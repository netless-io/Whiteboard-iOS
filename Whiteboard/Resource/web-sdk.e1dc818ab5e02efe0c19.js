/*! For license information please see web-sdk.e1dc818ab5e02efe0c19.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{Ui06:function(e,t,r){window,e.exports=function(e,t,r,n,i,o,a,s,c,u,l,p){return f={},h.m=d=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(226));var n=r(3);function i(e){if(n.isDisplayerNode(e))return n.getPhaseWithDisplayerNode(e);throw new Error("it isn't akko wrapped object")}t.isAkkoWrappedObject=n.isDisplayerNode,t.isAkkoWrappedObjectAccessible=function(e){return i(e)!==n.DisplayerNodePhase.Rejected},t.getPhaseWithAkkoWrappedObject=i;var o=r(4);t.AdminObserverId=o.AdminObserverId;var a=r(2);t.isBuffer=a.isBuffer,t.createBuffer=a.createBuffer,t.wrapBuffer=a.wrapBuffer,t.AkkoVersion=a.AkkoVersion;var s=r(340);t.AkkoApp=s.AkkoApp;var c=r(25);t.__context=c.__context,t.Library=c.Library,t.isAkkoObject=c.isAkkoObject,t.getClassReflection=c.getClassReflection,t.getLibrary=c.getLibrary;var u=r(54);t.noEffects=u.noEffects,t.transient=u.transient,t.event=u.event;var l=r(18);t.UpdateEventKind=l.UpdateEventKind;var p=r(13);t.findClassId=p.findClassId,t.findClass=p.findClass,t.isInstanceOf=p.isInstanceOf;var h=r(12);t.translateToAckFrame=h.translateToAckFrame,t.FramePicker=h.FramePicker,t.ActionFrameType=h.ActionFrameType,t.EventScope=h.EventScope;var d=r(17);t.createElement=d.createElement;var f=r(26);t.isInMagix=f.isInMagix,t.getEnvironment=f.getEnvironment,t.getCurrentTimestamp=f.getCurrentTimestamp,t.getAuthorId=f.getAuthorId,t.getUser=f.getUser,t.getUserIds=f.getUserIds,t.getUsersCount=f.getUsersCount,t.hasUser=f.hasUser,t.getResource=f.getResource,t.getSnapshot=f.getSnapshot,t.Environment=f.Environment;var m=r(3);t.addListener=m.addListener,t.removeListener=m.removeListener,t.findIdentifierWith=m.findIdentifierWith,t.copy=m.copyDisplayerNode,t.CopierMode=m.CopierMode,t.AkkoWrappedObjectPhase=m.DisplayerNodePhase;var y=r(81);t.socketFactory=y.socketFactory,t.SocketErrorCode=y.SocketErrorCode,t.KickReason=y.KickReason,t.EventPhase=y.EventPhase,t.Scope=y.Scope,t.MagixPhase=y.MagixPhase,t.ReconstructorPhase=y.ReconstructorPhase,t.ReconstructorFactory=y.ReconstructorFactory,t.OperationResult=y.OperationResult},function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(231)),n(r(72)),n(r(238)),n(r(122));var i=r(245);t.InvokeFrequencyLimiter=i.InvokeFrequencyLimiter;var o=r(124);t.resolve=o.resolve;var a=r(246);t.Version=a.Version,t.AkkoVersion="1.4.2"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(21),i=r(76);t.AkkoObjectStruct=i.AkkoObjectStruct;var o=r(38);t.carryObject=o.carryObject;var a=r(79);t.isFlatObjectProxyNode=a.isFlatObjectProxyNode;var s=r(80);t.isArrayProxyNode=s.isArrayProxyNode;var c=r(56);t.isAkkoObjectProxyNode=c.isAkkoObjectProxyNode;var u=r(21);t.isDisplayerNode=u.isDisplayerNode,t.getPhaseWithDisplayerNode=u.getPhaseWithDisplayerNode,t.DisplayerNodePhase=u.DisplayerNodePhase;var l=r(296);t.copyDisplayerNode=l.copyDisplayerNode,t.CopierMode=l.CopierMode;var p=r(31);t.isProxyNode=p.isProxyNode,t.unwrapProxy=p.unwrapProxy,t.convertToProxy=p.convertToProxy;var h=r(27);t.findIdentifierWith=h.findIdentifierWith,t.ProxyKind=h.ProxyKind,t.ProxyKey=h.ProxyKey;var d=r(297);t.AkkoDisplayerHolder=d.AkkoDisplayerHolder,t.addListener=function(e,t){if(!n.isDisplayerNode(e))throw new Error("it isn't akko wrapped object");e.__proxy.addListener(t)},t.removeListener=function(e,t){if(!n.isDisplayerNode(e))throw new Error("it isn't akko wrapped object");e.__proxy.removeListener(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34);t.Reader=n.Reader,t.Writer=n.Writer,t.MD5BinaryLength=n.MD5BinaryLength;var i=r(255);t.FormatFactory=i.FormatFactory,t.FormatError=i.FormatError;var o=r(125);t.convertToAkkoSerVersion=o.convertToAkkoSerVersion,t.AkkoSerVersion=o.AkkoSerVersion,t.Serialization=o.Serialization,t.AkkoPrimitiveType=o.AkkoPrimitiveType,t.ObjectType=o.ObjectType,t.DefaultObjectAdapter=o.DefaultObjectAdapter,t.SerializerError=o.SerializerError,t.DeserializerError=o.DeserializerError;var a=r(51);t.scopeIdWith=a.scopeIdWith,t.objectIdWith=a.objectIdWith,t.createIdentifierGenerator=a.createIdentifierGenerator,t.createV0IdentifierGenerator=a.createV0IdentifierGenerator,t.NoEffectScopeId=a.NoEffectScopeId,t.NullIdentifier=a.NullIdentifier,t.AdminObserverId=Math.pow(2,32)-1},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(6)),n(r(64));var i=r(97);t.CNodeKind=i.CNodeKind,t.CNodeCoordinates=i.CNodeCoordinates,t.CNode=i.CNode},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(357)),n(r(358)),n(r(398)),n(r(399)),n(r(400)),n(r(401)),n(r(402))},function(e,t,r){"use strict";function n(e){return"string"==typeof e?parseFloat(e):e}Object.defineProperty(t,"__esModule",{value:!0}),t.EmuToPt=12700,t.EmuToPx=9525,t.STPercentage100=1e5,t.FontToPt=100,t.DefaultTopPadding=45720,t.DefaultLeftPadding=91440,t.Degree=6e4,t.PaddingWebFix=4.5*t.EmuToPt,t.DefatultHeightLine=1,t.parseSTPercentage=function(e){return n(e)/t.STPercentage100},t.toPt=function(e){return n(e)/t.EmuToPt+"pt"},t.toDeg=function(e){return e/t.Degree},t.toNumber=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0).__context("index"),a=o.creator;r(165),r(171),r(61),r(344),r(166),r(173),r(32),r(170),r(345),r(90),r(91),r(60),r(22),r(168),r(167),r(346),r(93),r(347),r(174),r(23),r(169),r(43),r(348),r(94),r(172),r(62),r(175);var s=r(165),c=r(180),u=r(178),l=r(177),p=r(176),h=r(351),d=r(352),f=r(353);!function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(175));var m,y=(i(A,m=o.wrapSuperClass(s.AbstractApplianceManager)),A.prototype.createConstructors=function(){return a({selector:c.Selector,pencil:u.PencilAppliance,rectangle:l.RectangleAppliance,ellipse:p.EllipseAppliance,eraser:h.Eraser,arrow:d.ArrowAppliance,text:f.TextAppliance})},A.prototype.createMemberState=function(e){return a({currentApplianceName:"pencil",strokeColor:e,strokeWidth:4,textSize:16})},A);function A(){return m.call(this,a({currentSceneIndex:0}))||this}o.declareClass({classId:27,clazz:y,superClass:s.AbstractApplianceManager}),t.default=o.createLibrary(y,{identifier:"com.herewhite.whiteboard",version:"2.0.0",akko:"1.4.2",formatBase64:"ugAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAEAAAADAAAAF9nbG9iYWxTdGF0ZRoAAAAYAAAAYWRtaW5PYnNlcnZlck1lbWJlclN0YXRlGAAAAA4AAABtZW1iZXJzTWFuYWdlcg8AAAAGAAAAc2NlbmVzAgAAAAIAAAAAAAAAAAAAAAIAAAAMAAAAX2N1cnJlbnRQYXRoDgAAAA4AAAByb290U2NlbmVHcm91cAMAAAADAAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QEAAAACQAAAGdyb3Vwc01hcAYAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdAgAAAAJAAAAc2NlbmVzTWFwDQAAAAQAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QEAAAACQAAAGdyb3Vwc01hcAYAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdAgAAAAJAAAAc2NlbmVzTWFwDQAAAAYAAAAHAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QEAAAACQAAAGdyb3Vwc01hcAYAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdAgAAAAJAAAAc2NlbmVzTWFwDQAAAAgAAAAAAAAACQAAAAAAAAAJAAAAAAAAAAAAAAADAAAACgAAAGNvbXBvbmVudHMLAAAABAAAAG5hbWUAAAAAAwAAAHBwdAoAAAAKAAAAAAAAAAAAAAADAAAABgAAAGhlaWdodAAAAAADAAAAc3JjAAAAAAUAAAB3aWR0aAAAAAALAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABQAAAAYAAABoZWlnaHQAAAAAEwAAAGhpdFRlc3RpbmdCb3hNYXJnaW4AAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAABQAAAHdpZHRoAAAAAA0AAAAJAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAABAAAAA0AAABicm9hZGNhc3RlcklkAAAAAAoAAABkaXJlY3RvcklkAAAAABAAAABpbml0aWF0aXZlQ29sb3JzEAAAAAoAAABtZW1iZXJzTWFwEgAAABAAAAAAAAAAEQAAAAAAAAARAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAATAAAAAAAAABMAAAAAAAAAAAAAAAsAAAALAAAAX2RldmljZVR5cGUAAAAADAAAAF9pbmZvcm1hdGlvbhQAAAAJAAAAX21lbWJlcklkAAAAAAoAAABhcHBsaWFuY2VzFQAAAAcAAABjdXJzb3JYAAAAAAcAAABjdXJzb3JZAAAAAA8AAABpc0N1cnNvckluU2NlbmUAAAAACQAAAGlzUHJlc3NlZAAAAAAOAAAAaXNSdGNDb25uZWN0ZWQAAAAACwAAAG1lbWJlclN0YXRlGAAAAAkAAAB2aWV3U3RhdGUZAAAAFAAAAAAAAAAAAAAABAAAAAYAAABhdmF0YXIAAAAAAgAAAGlkAAAAAAcAAABpc093bmVyAAAAAAgAAABuaWNrTmFtZQAAAAAVAAAAFgAAAAAAAAAAAAAAFgAAAAAAAAAAAAAAAQAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludBcAAAAXAAAAAAAAAAAAAAACAAAAAQAAAHgAAAAAAQAAAHkAAAAAGAAAAAAAAAAAAAAABAAAABQAAABjdXJyZW50QXBwbGlhbmNlTmFtZQAAAAALAAAAc3Ryb2tlQ29sb3IRAAAACwAAAHN0cm9rZVdpZHRoAAAAAAgAAAB0ZXh0U2l6ZQAAAAAZAAAAAAAAAAAAAAAGAAAABgAAAGhlaWdodAAAAAAEAAAAbW9kZQAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAcGl4ZWxXaWR0aAAAAAAFAAAAd2lkdGgAAAAAGgAAAAAAAAAAAAAAAAAAABsAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAHQAAAAAAAAAAAAAAAAAAAB4AAAAAAAAAAAAAAAAAAAAfAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAABQAAAAcAAABjZW50ZXJYAAAAAAcAAABjZW50ZXJZAAAAAAYAAABoZWlnaHQAAAAABAAAAHV1aWQAAAAABQAAAHdpZHRoAAAAACEAAAAAAAAAAAAAAAAAAAAiAAAAAAAAAAAAAAAAAAAAIwAAAAAAAAAAAAAABAAAAAYAAABhbHRLZXkAAAAABwAAAGN0cmxLZXkAAAAAAwAAAGtleQAAAAAIAAAAc2hpZnRLZXkAAAAAJAAAAAAAAAAAAAAAAgAAAAYAAABzb2NrZXQAAAAABAAAAHVzZXIlAAAAJQAAAAAAAAAAAAAABAAAAAYAAABhdmF0YXIAAAAAAgAAAGlkAAAAAAcAAABpc093bmVyAAAAAAgAAABuaWNrTmFtZQAAAAAmAAAAAAAAAAAAAAAEAAAAEQAAAGhpdFRlc3RJZGVudGlmaWVzKAAAAAoAAAB0YXJnZXRzTWFwJwAAAAEAAAB4AAAAAAEAAAB5AAAAACcAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAKQAAAAAAAAAAAAAAAgAAAAsAAABpc0Nvbm5lY3RlZAAAAAAGAAAAdXNlcklkAAAAACoAAAAAAAAAAAAAAAAAAAArAAAAAAAAACwAAAAAAAAALAAAAAAAAAAAAAAAAgAAAAQAAABuYW1lAAAAAAMAAABwcHQtAAAALQAAAAAAAAAAAAAAAwAAAAYAAABoZWlnaHQAAAAAAwAAAHNyYwAAAAAFAAAAd2lkdGgAAAAALgAAAAAAAAAAAAAAAAAAAC8AAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAABgAAAGhlaWdodAAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAFAAAAd2lkdGgAAAAAMQAAAAAAAAAAAAAABQAAAAYAAABoZWlnaHQAAAAADAAAAG9yaWdpbmFsVGV4dAAAAAAFAAAAc2NhbGUAAAAACQAAAHRleHRMaW5lczIAAAAFAAAAd2lkdGgAAAAAMgAAAAAAAAAzAAAAAAAAADMAAAAAAAAAAAAAAAQAAAACAAAAZHgAAAAAAgAAAGR5AAAAAAQAAAB0ZXh0AAAAAAoAAAB0ZXh0TGVuZ3RoAAAAADQAAAAAAAAAAAAAAAAAAAA1AAAAAAAAAAAAAAABAAAACgAAAGNvbXBvbmVudHMLAAAANgAAAAAAAAAAAAAAAAAAADcAAAAAAAAAAAAAAAUAAAAKAAAAYXBwbGlhbmNlczkAAAAKAAAAZGV2aWNlVHlwZQAAAAALAAAAaW5mb3JtYXRpb244AAAACAAAAG1lbWJlcklkAAAAAAsAAABtZW1iZXJTdGF0ZRgAAAA4AAAAAAAAAAAAAAAEAAAABgAAAGF2YXRhcgAAAAACAAAAaWQAAAAABwAAAGlzT3duZXIAAAAACAAAAG5pY2tOYW1lAAAAADkAAAAWAAAAAAAAAAAAAAA6AAAAAAAAAAAAAAARAAAABQAAAGNvbG9yEQAAABQAAABjdXJyZW50QXBwbGlhbmNlTmFtZQAAAAAHAAAAY3Vyc29yWAAAAAAHAAAAY3Vyc29yWQAAAAAKAAAAZGV2aWNlVHlwZQAAAAAGAAAAaGVpZ2h0AAAAAAsAAABpbmZvcm1hdGlvbjsAAAAKAAAAaXNBY3Rpdml0eQAAAAAPAAAAaXNDdXJzb3JJblNjZW5lAAAAAAkAAABpc1ByZXNzZWQAAAAADgAAAGlzUnRjQ29ubmVjdGVkAAAAAAgAAABtZW1iZXJJZAAAAAAEAAAAbW9kZQAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAcGl4ZWxXaWR0aAAAAAAFAAAAd2lkdGgAAAAAOwAAAAAAAAAAAAAABAAAAAYAAABhdmF0YXIAAAAAAgAAAGlkAAAAAAcAAABpc093bmVyAAAAAAgAAABuaWNrTmFtZQAAAAA8AAAAAAAAAAAAAAAAAAAAPQAAAAAAAAAAAAAAAwAAAAoAAABkZXZpY2VUeXBlAAAAAAUAAABzY2VuZQkAAAAGAAAAc2NlbmVzPgAAAD4AAAAAAAAAAAAAAAIAAAAMAAAAX2N1cnJlbnRQYXRoDgAAAA4AAAByb290U2NlbmVHcm91cAMAAAA/AAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEEAAAAAAAAAAAAAAAMAAAAGAAAAaGVpZ2h0AAAAAAMAAABzcmMAAAAABQAAAHdpZHRoAAAAAEIAAAAAAAAAAAAAAAMAAAAPAAAAY29tcG9uZW50c0NvdW50AAAAAAQAAABuYW1lAAAAAAMAAABwcHRDAAAAQwAAAAAAAAAAAAAAAwAAAAYAAABoZWlnaHQAAAAAAwAAAHNyYwAAAAAFAAAAd2lkdGgAAAAARAAAAAAAAAAAAAAABwAAAAYAAABib3R0b20AAAAAAwAAAGtleQAAAAAEAAAAbGVmdAAAAAAHAAAAcGF5bG9hZAAAAAAFAAAAcmlnaHQAAAAAAwAAAHRvcAAAAAAEAAAAdHlwZQAAAABFAAAAAAAAAAAAAAABAAAABgAAAHBvaW50c0YAAABGAAAAAAAAAEcAAAAAAAAARwAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAAEgAAAAAAAAAAAAAAAAAAABJAAAAAAAAAAAAAAABAAAABgAAAHBvaW50c0oAAABKAAAAAAAAAEcAAAAAAAAASwAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAIAAAALAAAAYmVnaW5WZWN0b3JHAAAACQAAAGVuZFZlY3RvckcAAABNAAAAAAAAAAAAAAAGAAAACgAAAGJlZ2luUG9pbnRSAAAABwAAAGNvbnRleHROAAAAEAAAAGRyYWdFdmVudHNCdWZmZXJUAAAADAAAAGlzU2hpZnRQcmVzcwAAAAAWAAAAcGFpbnRpbmdSZWN0YW5nbGVTaGFwZU8AAAAMAAAAcHJlc3NlZFBvaW50UwAAAE4AAAAAAAAAAAAAAAMAAAAKAAAAZGV2aWNlVHlwZQAAAAAFAAAAc2NlbmUJAAAABgAAAHNjZW5lcz4AAABPAAAAAAAAAAAAAAANAAAABwAAAGNvbnRleHRQAAAACgAAAGRpcmVjdGlvblgAAAAACgAAAGRpcmVjdGlvblkAAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzUQAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAoAAABpc1BhaW50aW5nAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAoAAABzZWxlY3RhYmxlAAAAAAoAAABzZWxlY3RlZEJ5AAAAAAUAAABzdGF0ZRgAAAAFAAAAd2lkdGgAAAAAUAAAAAAAAAAAAAAAAwAAAAoAAABkZXZpY2VUeXBlAAAAAAUAAABzY2VuZQkAAAAGAAAAc2NlbmVzPgAAAFEAAAAAAAAAAAAAAAAAAABSAAAAAAAAAAAAAAACAAAAAQAAAHgAAAAAAQAAAHkAAAAAUwAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAAFQAAAAAAAAAJgAAAAAAAABVAAAAAAAAAAAAAAACAAAAAQAAAHgAAAAAAQAAAHkAAAAAVgAAAAAAAAAAAAAACwAAAAcAAABjb250ZXh0UAAAAAoAAABkaXJlY3Rpb25YAAAAAAoAAABkaXJlY3Rpb25ZAAAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkc1EAAAAKAAAAaXNQYWludGluZwAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAc3RhdGUYAAAABQAAAHdpZHRoAAAAAFcAAAAAAAAAAAAAAAcAAAAFAAAAYXJyb3duAAAABwAAAGVsbGlwc2VoAAAABgAAAGVyYXNlcmwAAAAGAAAAcGVuY2lsYAAAAAkAAAByZWN0YW5nbGVkAAAACAAAAHNlbGVjdG9yWAAAAAQAAAB0ZXh0bwAAAFgAAAAAAAAAAAAAAAsAAAAPAAAAYmVnaW5QcmVzc1BvaW50WwAAAAcAAABjb250ZXh0WgAAABAAAABkcmFnRXZlbnRzQnVmZmVyVAAAABwAAABkcmFnZ2VkQ29tcG9uZW50T3JpZ2luUG9pbnRzXAAAAA4AAABkcmFnZ2luZ1RhcmdldAAAAAAXAAAAZml4ZWRDdXJzb3JJblNjZW5lUG9pbnRZAAAADAAAAGlzU2hpZnRQcmVzcwAAAAAOAAAAbGF0ZXN0T3BlcmF0ZVgAAAAADgAAAGxhdGVzdE9wZXJhdGVZAAAAAAwAAABwcmVzc2VkUG9pbnRTAAAADQAAAHNlbGVjdGVkR3JvdXBeAAAAWQAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAAFoAAAAAAAAAAAAAAAMAAAAKAAAAZGV2aWNlVHlwZQAAAAAFAAAAc2NlbmUJAAAABgAAAHNjZW5lcz4AAABbAAAAAAAAAAAAAAACAAAAAQAAAHgAAAAAAQAAAHkAAAAAXAAAAF0AAAAAAAAAAAAAAF0AAAAAAAAAAAAAAAIAAAABAAAAeAAAAAABAAAAeQAAAABeAAAAAAAAAAAAAAAIAAAACgAAAGJlZ2luUG9pbnRdAAAACQAAAGJlbG9uZ3NUbwAAAAAHAAAAY29udGV4dF8AAAAGAAAAaGVpZ2h0AAAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAUAAAB3aWR0aAAAAABfAAAAAAAAAAAAAAADAAAACgAAAGRldmljZVR5cGUAAAAABQAAAHNjZW5lCQAAAAYAAABzY2VuZXM+AAAAYAAAAAAAAAAAAAAABQAAAAcAAABjb250ZXh0YQAAABAAAABkcmFnRXZlbnRzQnVmZmVyVAAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludFUAAAASAAAAcGFpbnRpbmdDdXJ2ZVNoYXBlYgAAAAwAAABwcmVzc2VkUG9pbnRTAAAAYQAAAAAAAAAAAAAAAwAAAAoAAABkZXZpY2VUeXBlAAAAAAUAAABzY2VuZQkAAAAGAAAAc2NlbmVzPgAAAGIAAAAAAAAAAAAAABMAAAAHAAAAX2hlaWdodAAAAAAGAAAAX3dpZHRoAAAAAAcAAABjb250ZXh0UAAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkc1EAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAARAAAAaW5pdGlhbGl6ZWRIZWlnaHQAAAAAEAAAAGluaXRpYWxpemVkV2lkdGgAAAAACgAAAGlzUGFpbnRpbmcAAAAAEAAAAGxhc3RWYWN1YXRlSW5kZXgAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAAEwAAAHBhdGhEZWZpbml0aW9uQ2FjaGUAAAAABgAAAHBvaW50c2MAAAARAAAAcHVzaGVkUG9pbnRzQ291bnQAAAAACgAAAHNlbGVjdGFibGUAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHN0YXRlGAAAAAUAAAB3aWR0aAAAAABjAAAAAAAAAF0AAAAAAAAAZAAAAAAAAAAAAAAACQAAAAoAAABiZWdpblBvaW50ZwAAAAcAAABjb250ZXh0ZQAAABAAAABkcmFnRXZlbnRzQnVmZmVyVAAAABcAAABmaXhlZEN1cnNvckluU2NlbmVQb2ludFUAAAAMAAAAaXNTaGlmdFByZXNzAAAAAAsAAABsYXRlc3REcmFnWAAAAAALAAAAbGF0ZXN0RHJhZ1kAAAAAFgAAAHBhaW50aW5nUmVjdGFuZ2xlU2hhcGVmAAAADAAAAHByZXNzZWRQb2ludFMAAABlAAAAAAAAAAAAAAADAAAACgAAAGRldmljZVR5cGUAAAAABQAAAHNjZW5lCQAAAAYAAABzY2VuZXM+AAAAZgAAAAAAAAAAAAAACwAAAAcAAABjb250ZXh0UAAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkc1EAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAKAAAAaXNQYWludGluZwAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAc3RhdGUYAAAABQAAAHdpZHRoAAAAAGcAAAAAAAAAAAAAAAIAAAABAAAAeAAAAAABAAAAeQAAAABoAAAAAAAAAAAAAAAJAAAACgAAAGJlZ2luUG9pbnRrAAAABwAAAGNvbnRleHRpAAAAEAAAAGRyYWdFdmVudHNCdWZmZXJUAAAAFwAAAGZpeGVkQ3Vyc29ySW5TY2VuZVBvaW50VQAAAAwAAABpc1NoaWZ0UHJlc3MAAAAACwAAAGxhdGVzdERyYWdYAAAAAAsAAABsYXRlc3REcmFnWQAAAAAUAAAAcGFpbnRpbmdFbGxpcHNlU2hhcGVqAAAADAAAAHByZXNzZWRQb2ludFMAAABpAAAAAAAAAAAAAAADAAAACgAAAGRldmljZVR5cGUAAAAABQAAAHNjZW5lCQAAAAYAAABzY2VuZXM+AAAAagAAAAAAAAAAAAAACwAAAAcAAABjb250ZXh0UAAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkc1EAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAKAAAAaXNQYWludGluZwAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAc3RhdGUYAAAABQAAAHdpZHRoAAAAAGsAAAAAAAAAAAAAAAIAAAABAAAAeAAAAAABAAAAeQAAAABsAAAAAAAAAAAAAAAEAAAABwAAAGNvbnRleHRtAAAAEAAAAGRyYWdFdmVudHNCdWZmZXJUAAAAFwAAAGZpeGVkQ3Vyc29ySW5TY2VuZVBvaW50VQAAAAwAAABwcmVzc2VkUG9pbnRTAAAAbQAAAAAAAAAAAAAAAwAAAAoAAABkZXZpY2VUeXBlAAAAAAUAAABzY2VuZQkAAAAGAAAAc2NlbmVzPgAAAG4AAAAAAAAAAAAAAAcAAAAKAAAAYmVnaW5Qb2ludFIAAAAHAAAAY29udGV4dE4AAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlclQAAAAXAAAAZml4ZWRDdXJzb3JJblNjZW5lUG9pbnRVAAAADAAAAGlzU2hpZnRQcmVzcwAAAAAWAAAAcGFpbnRpbmdSZWN0YW5nbGVTaGFwZU8AAAAMAAAAcHJlc3NlZFBvaW50UwAAAG8AAAAAAAAAAAAAAAQAAAAHAAAAY29udGV4dHAAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlclQAAAAXAAAAZml4ZWRDdXJzb3JJblNjZW5lUG9pbnRVAAAADAAAAHByZXNzZWRQb2ludFMAAABwAAAAAAAAAAAAAAADAAAACgAAAGRldmljZVR5cGUAAAAABQAAAHNjZW5lCQAAAAYAAABzY2VuZXM+AAAAcQAAAAAAAAAAAAAABQAAAA0AAABiZWdpbkhpdFBvaW50XQAAAAoAAABkZWx0YVBvaW50XQAAABUAAABvcmllbnRhdGlvblVuaXRWZWN0b3JzAAAADgAAAHN0YXJ0UmVjdGFuZ2xlcgAAAAgAAAB0YXJnZXRJZAAAAAByAAAAAAAAAAAAAAAEAAAABgAAAGhlaWdodAAAAAAFAAAAd2lkdGgAAAAAAQAAAHgAAAAAAQAAAHkAAAAAcwAAAAAAAAAAAAAAAgAAAAEAAAB4AAAAAAEAAAB5AAAAAHQAAAAAAAAAAAAAAAkAAAAPAAAAYmVsb25nc1RvVXNlcklkAAAAAAcAAABjb250ZXh0dQAAAA8AAABkcmFnZ2luZ0NvbnRleHR2AAAAFQAAAGluY2x1ZGVDb21wb25lbnROb2Rlc3cAAAAWAAAAaXNPbmx5SGFzVGV4dGFyZWFTaGFwZQAAAAAMAAAAaXNTaGlmdFByZXNzAAAAAAwAAABvcGVyYXRlUG9pbnQAAAAACQAAAHJlY3RhbmdsZXIAAAAWAAAAcmVjdGFuZ2xlV2l0aEhpdE1hcmdpbnIAAAB1AAAAAAAAAAAAAAADAAAACgAAAGRldmljZVR5cGUAAAAABQAAAHNjZW5lCQAAAAYAAABzY2VuZXM+AAAAdgAAAAAAAAAAAAAABQAAAA0AAABiZWdpbkhpdFBvaW50XQAAAAoAAABkZWx0YVBvaW50XQAAABUAAABvcmllbnRhdGlvblVuaXRWZWN0b3JzAAAADgAAAHN0YXJ0UmVjdGFuZ2xlcgAAAAgAAAB0YXJnZXRJZAAAAAB3AAAAAAAAAHgAAAAAAAAAeAAAAAAAAAAAAAAABQAAAAkAAABjb21wb25lbnR5AAAAAgAAAGR4AAAAAAIAAABkeQAAAAAGAAAAaGVpZ2h0AAAAAAUAAAB3aWR0aAAAAAB5AAAAAAAAAAAAAAAJAAAABwAAAGNvbnRleHRQAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzUQAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAoAAABzZWxlY3RhYmxlAAAAAAoAAABzZWxlY3RlZEJ5AAAAAAUAAAB3aWR0aAAAAAB6AAAAAAAAAHsAAAAAAAAAewAAAAAAAAAAAAAACQAAAAcAAABjb250ZXh0UAAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkc1EAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAd2lkdGgAAAAAfAAAAAAAAAAAAAAABQAAAAkAAABjb21wb25lbnR5AAAAAgAAAGR4AAAAAAIAAABkeQAAAAAGAAAAaGVpZ2h0AAAAAAUAAAB3aWR0aAAAAAB9AAAAAAAAAAAAAAAIAAAACgAAAGJlZ2luUG9pbnRrAAAABwAAAGNvbnRleHRpAAAAEAAAAGRyYWdFdmVudHNCdWZmZXJUAAAADAAAAGlzU2hpZnRQcmVzcwAAAAALAAAAbGF0ZXN0RHJhZ1gAAAAACwAAAGxhdGVzdERyYWdZAAAAABQAAABwYWludGluZ0VsbGlwc2VTaGFwZWoAAAAMAAAAcHJlc3NlZFBvaW50UwAAAH4AAAAAAAAAAAAAAAkAAAAHAAAAY29udGV4dFAAAAAGAAAAaGVpZ2h0AAAAABIAAABoaWdobGlnaHRBdXRob3JJZHNRAAAACgAAAGlzUGFpbnRpbmcAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHN0YXRlGAAAAAUAAAB3aWR0aAAAAAB/AAAAAAAAAAAAAAADAAAABwAAAGNvbnRleHRtAAAAEAAAAGRyYWdFdmVudHNCdWZmZXJUAAAADAAAAHByZXNzZWRQb2ludFMAAACAAAAAAAAAAAAAAAAJAAAABwAAAGNvbnRleHRQAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzUQAAAAgAAABpbWFnZVNyYwAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAEAAAAdXVpZAAAAAAFAAAAd2lkdGgAAAAAgQAAAAAAAAAAAAAADwAAAAcAAABfaGVpZ2h0AAAAAAYAAABfd2lkdGgAAAAABwAAAGNvbnRleHRQAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkc1EAAAARAAAAaW5pdGlhbGl6ZWRIZWlnaHQAAAAAEAAAAGluaXRpYWxpemVkV2lkdGgAAAAACgAAAGlzUGFpbnRpbmcAAAAAEAAAAGxhc3RWYWN1YXRlSW5kZXgAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAAEwAAAHBhdGhEZWZpbml0aW9uQ2FjaGUAAAAABgAAAHBvaW50c2MAAAARAAAAcHVzaGVkUG9pbnRzQ291bnQAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHN0YXRlGAAAAIIAAAAAAAAAAAAAAAQAAAAHAAAAY29udGV4dGEAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlclQAAAASAAAAcGFpbnRpbmdDdXJ2ZVNoYXBlYgAAAAwAAABwcmVzc2VkUG9pbnRTAAAAgwAAAAAAAAAAAAAACAAAAAoAAABiZWdpblBvaW50ZwAAAAcAAABjb250ZXh0ZQAAABAAAABkcmFnRXZlbnRzQnVmZmVyVAAAAAwAAABpc1NoaWZ0UHJlc3MAAAAACwAAAGxhdGVzdERyYWdYAAAAAAsAAABsYXRlc3REcmFnWQAAAAAWAAAAcGFpbnRpbmdSZWN0YW5nbGVTaGFwZWYAAAAMAAAAcHJlc3NlZFBvaW50UwAAAIQAAAAAAAAAAAAAAAkAAAAHAAAAY29udGV4dFAAAAAGAAAAaGVpZ2h0AAAAABIAAABoaWdobGlnaHRBdXRob3JJZHNRAAAACgAAAGlzUGFpbnRpbmcAAAAABwAAAG9yaWdpblgAAAAABwAAAG9yaWdpblkAAAAACgAAAHNlbGVjdGVkQnkAAAAABQAAAHN0YXRlGAAAAAUAAAB3aWR0aAAAAACFAAAAAAAAAAAAAAAHAAAACgAAAGJlZ2luUG9pbnRdAAAACQAAAGJlbG9uZ3NUbwAAAAAHAAAAY29udGV4dF8AAAAGAAAAaGVpZ2h0AAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAUAAAB3aWR0aAAAAACGAAAAAAAAAAAAAAALAAAADwAAAGJlZ2luUHJlc3NQb2ludFsAAAAHAAAAY29udGV4dFoAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlclQAAAAcAAAAZHJhZ2dlZENvbXBvbmVudE9yaWdpblBvaW50c1wAAAAOAAAAZHJhZ2dpbmdUYXJnZXQAAAAAFwAAAGZpeGVkQ3Vyc29ySW5TY2VuZVBvaW50WQAAAAwAAABpc1NoaWZ0UHJlc3MAAAAADgAAAGxhdGVzdE9wZXJhdGVYAAAAAA4AAABsYXRlc3RPcGVyYXRlWQAAAAAMAAAAcHJlc3NlZFBvaW50UwAAAA0AAABzZWxlY3RlZEdyb3VwXgAAAIcAAAAAAAAAiAAAAAAAAACIAAAAAAAAAAAAAAAJAAAABwAAAGNvbnRleHRQAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzUQAAABMAAABoaXRUZXN0aW5nQm94TWFyZ2luAAAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAoAAABzZWxlY3RhYmxlAAAAAAoAAABzZWxlY3RlZEJ5AAAAAAUAAAB3aWR0aAAAAACJAAAAAAAAAAAAAAAAAAAAigAAAAAAAAAAAAAACQAAAAcAAABjb250ZXh0UAAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkc1EAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAd2lkdGgAAAAAiwAAAAAAAAAAAAAAAAAAAIwAAAAAAAAAAAAAAAMAAAAHAAAAY29udGV4dHAAAAAQAAAAZHJhZ0V2ZW50c0J1ZmZlclQAAAAMAAAAcHJlc3NlZFBvaW50UwAAAI0AAAAAAAAAAAAAAAsAAAAHAAAAY29udGV4dFAAAAAIAAAAZWRpdGVkQnkAAAAABgAAAGhlaWdodAAAAAASAAAAaGlnaGxpZ2h0QXV0aG9ySWRzUQAAAAcAAABvcmlnaW5YAAAAAAcAAABvcmlnaW5ZAAAAAAoAAABzZWxlY3RlZEJ5AAAAAAkAAAB0ZXh0Q29sb3IRAAAACAAAAHRleHRTaXplAAAAAAsAAAB0ZXh0YXJlYUJveDEAAAAFAAAAd2lkdGgAAAAAjgAAAAAAAAAAAAAACQAAAAcAAABjb250ZXh0UAAAAAYAAABoZWlnaHQAAAAAEgAAAGhpZ2hsaWdodEF1dGhvcklkc1EAAAATAAAAaGl0VGVzdGluZ0JveE1hcmdpbgAAAAAHAAAAb3JpZ2luWAAAAAAHAAAAb3JpZ2luWQAAAAAKAAAAc2VsZWN0YWJsZQAAAAAKAAAAc2VsZWN0ZWRCeQAAAAAFAAAAd2lkdGgAAAAAjwAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAQAAAAKAAAAYmVnaW5JbmRleAAAAAAIAAAAZW5kSW5kZXgAAAAABgAAAHBvaW50c5EAAAAJAAAAdGhyZXNob2xkAAAAAJEAAAAAAAAAXQAAAAAAAACSAAAAAAAAAAAAAAADAAAAEAAAAGRyYWdFdmVudHNCdWZmZXJUAAAAFwAAAGZpeGVkQ3Vyc29ySW5TY2VuZVBvaW50VQAAAAwAAABwcmVzc2VkUG9pbnRTAAAAkwAAAAAAAAAAAAAAAAAAAJQAAAAAAAAAAAAAAAMAAAAFAAAAY29sb3IRAAAACQAAAGhpZ2hsaWdodAAAAAAKAAAAc2VsZWN0ZWRCeQAAAACVAAAAAAAAAAAAAAAEAAAABwAAAGJlbG9uZ3MAAAAABQAAAGNvbG9yEQAAAAoAAABpc0RyYWdnaW5nAAAAAA4AAABpc1VuaWZvcm1TY2FsZQAAAACWAAAAAAAAAAAAAAACAAAABwAAAGJlbG9uZ3MAAAAABQAAAGNvbG9yEQAAAJcAAAAAAAAAAAAAAAYAAAAFAAAAY29sb3IRAAAABgAAAG1hcmdpbgAAAAAMAAAAb3JpZ2luYWxUZXh0AAAAAAUAAABzY2FsZQAAAAAJAAAAdGV4dENvbG9yEQAAAAgAAAB0ZXh0U2l6ZQAAAACYAAAAAAAAAAAAAAAFAAAABQAAAGNvbG9yEQAAAAgAAABlZGl0b3JJZAAAAAALAAAAaW5mb3JtYXRpb26ZAAAABgAAAG1hcmdpbgAAAAAIAAAAdGV4dFNpemUAAAAAmQAAAAAAAAAAAAAABAAAAAYAAABhdmF0YXIAAAAAAgAAAGlkAAAAAAcAAABpc093bmVyAAAAAAgAAABuaWNrTmFtZQAAAACaAAAAAAAAAAAAAAAFAAAACAAAAGVkaXRhYmxllAAAAAYAAABlZGl0b3KVAAAABgAAAG15VGV4dJcAAAAJAAAAb3RoZXJUZXh0mAAAAA0AAABzZWxlY3RlZEdyb3VwlgAAAJsAAAAAAAAAAAAAAAQAAAAMAAAAX2dsb2JhbFN0YXRlGgAAABgAAABhZG1pbk9ic2VydmVyTWVtYmVyU3RhdGUYAAAADgAAAG1lbWJlcnNNYW5hZ2VyDwAAAAYAAABzY2VuZXMCAAAAnAAAAAAAAAAAAAAABQAAAAoAAABncm91cHNMaXN0BAAAAAkAAABncm91cHNNYXAGAAAABAAAAG5hbWUAAAAACgAAAHNjZW5lc0xpc3QIAAAACQAAAHNjZW5lc01hcA0AAACdAAAAAAAAAAAAAAACAAAADAAAAF9jdXJyZW50UGF0aA4AAAAOAAAAcm9vdFNjZW5lR3JvdXADAAAAngAAAAAAAAAAAAAAAAAAAJ8AAAAAAAAAAAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAoQAAAAAAAAAAAAAABQAAAAoAAABncm91cHNMaXN0BAAAAAkAAABncm91cHNNYXAGAAAABAAAAG5hbWUAAAAACgAAAHNjZW5lc0xpc3QIAAAACQAAAHNjZW5lc01hcA0AAACiAAAAAAAAAAAAAAAAAAAAowAAAAAAAACkAAAAAAAAAKQAAAAAAAAAAAAAAAAAAAClAAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QEAAAACQAAAGdyb3Vwc01hcAYAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdAgAAAAJAAAAc2NlbmVzTWFwDQAAAKYAAAAAAAAAAAAAAAAAAACnAAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QEAAAACQAAAGdyb3Vwc01hcAYAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdAgAAAAJAAAAc2NlbmVzTWFwDQAAAKgAAAAAAAAAAAAAAAAAAACpAAAAAAAAAAAAAAAAAAAAqgAAAAAAAAAAAAAAAAAAAKsAAAAAAAAAAAAAAAAAAACsAAAAAAAAAAAAAAAFAAAACgAAAGdyb3Vwc0xpc3QEAAAACQAAAGdyb3Vwc01hcAYAAAAEAAAAbmFtZQAAAAAKAAAAc2NlbmVzTGlzdAgAAAAJAAAAc2NlbmVzTWFwDQAAAK0AAAAAAAAAAAAAAAAAAACuAAAAAAAAAAAAAAAAAAAArwAAAAAAAAAAAAAABQAAAAoAAABncm91cHNMaXN0BAAAAAkAAABncm91cHNNYXAGAAAABAAAAG5hbWUAAAAACgAAAHNjZW5lc0xpc3QIAAAACQAAAHNjZW5lc01hcA0AAACwAAAAAAAAAAAAAAAAAAAAsQAAAAAAAAAAAAAAAAAAALIAAAAAAAAAAAAAAAAAAACzAAAAAAAAAAAAAAAAAAAAtAAAAAAAAAAAAAAAAAAAALUAAAAAAAAAAAAAAAAAAAC2AAAAAAAAAAAAAAAAAAAAtwAAAAAAAAAAAAAAAwAAAAQAAABfc3JjAAAAAAYAAABoZWlnaHQAAAAABQAAAHdpZHRoAAAAALgAAAAAAAAAAAAAAAAAAAC5AAAAAAAAAAAAAAAAAAAA",formatHash:"004ab57536b28e23c4268721e74dfa16",classes:{0:{objectFormatId:1,members:[{name:"scenes",mode:"value",type:"property",isPublic:!0},{name:"membersManager",mode:"value",type:"property",isPublic:!1},{name:"adminObserverMemberState",mode:"value",type:"property",isPublic:!1},{name:"_globalState",mode:"value",type:"property",isPublic:!1},{name:"deviceType",mode:"readonly",type:"property",isPublic:!0},{name:"scene",mode:"readonly",type:"property",isPublic:!0},{name:"createConstructors",type:"method",isPublic:!1,parameters:[]},{name:"createMemberState",type:"method",isPublic:!1,parameters:[17]},{name:"createAppliances",type:"method",isPublic:!1,parameters:[]},{name:"onMemberEnterRoom",type:"method",isPublic:!1,parameters:[0,36]},{name:"onMemberLeaveRoom",type:"method",isPublic:!1,parameters:[]},{name:"onRtcConnected",type:"method",isPublic:!1,parameters:[0,41]},{name:"onOthersEvent",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"changeScene",type:"method",isPublic:!0,parameters:[27]},{name:"putScenes",type:"method",isPublic:!0,parameters:[42,43,0]},{name:"removeScenes",type:"method",isPublic:!0,parameters:[46]},{name:"moveScene",type:"method",isPublic:!0,parameters:[33,34]},{name:"insertImage",type:"method",isPublic:!0,parameters:[32]},{name:"completeImageUpload",type:"method",isPublic:!0,parameters:[0,0]},{name:"setGlobalState",type:"method",isPublic:!0,parameters:[0]},{name:"setMemberState",type:"method",isPublic:!0,parameters:[0]},{name:"setViewState",type:"method",isPublic:!0,parameters:[0]},{name:"getScene",type:"method",isPublic:!0,parameters:[30]},{name:"getCurrentScenePath",type:"method",isPublic:!0,parameters:[]},{name:"getAllScenePaths",type:"method",isPublic:!0,parameters:[]},{name:"getSceneNames",type:"method",isPublic:!0,parameters:[29]},{name:"getSceneGroupNames",type:"method",isPublic:!0,parameters:[28]},{name:"getShellRectangle",type:"method",isPublic:!0,parameters:[31]},{name:"renderTagBoxes",type:"method",isPublic:!0,parameters:[]},{name:"renderSvg",type:"method",isPublic:!0,parameters:[47,48]},{name:"getInformationWithMemberId",type:"method",isPublic:!0,parameters:[0]},{name:"getMemberState",type:"method",isPublic:!0,parameters:[0]},{name:"getViewState",type:"method",isPublic:!0,parameters:[0]},{name:"getMemberIdWithUserId",type:"method",isPublic:!0,parameters:[0]},{name:"getBroadcasterId",type:"method",isPublic:!0,parameters:[]},{name:"updateTextarea",type:"method",isPublic:!0,parameters:[49]},{name:"getGlobalState",type:"method",isPublic:!0,parameters:[]},{name:"getMemberDisplayers",type:"method",isPublic:!0,parameters:[]},{name:"hitTest",type:"method",isPublic:!0,parameters:[0,0]},{name:"selectorRadius",type:"method",isPublic:!1,parameters:[]},{name:"onMouseDown",type:"method",isPublic:!0,parameters:[38]},{name:"onMouseMove",type:"method",isPublic:!0,parameters:[38]},{name:"onMouseUp",type:"method",isPublic:!0,parameters:[38]},{name:"onMouseLeave",type:"method",isPublic:!0,parameters:[38]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[35]},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[35]}]},1:{objectFormatId:12,members:[{name:"hitTestingBoxMargin",mode:"value",type:"property",isPublic:!0},{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"key",mode:"readonly",type:"property",isPublic:!0},{name:"identifier",mode:"readonly",type:"property",isPublic:!0},{name:"renderTagBoxes",type:"method",isPublic:!0,parameters:[]},{name:"renderSvg",type:"method",isPublic:!0,parameters:[]},{name:"pointHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"rectHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0,0,0,0]},{name:"pointHitTest",type:"method",isPublic:!0,parameters:[0,0,0]},{name:"rectHitTest",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"testInEditableRectangle",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"rectangleTester",type:"method",isPublic:!1,parameters:[0]}]},2:{objectFormatId:53,members:[{name:"components",mode:"value",type:"property",isPublic:!0},{name:"componentsLength",mode:"readonly",type:"property",isPublic:!0},{name:"componentAt",type:"method",isPublic:!0,parameters:[0]},{name:"addComponent",type:"method",isPublic:!0,parameters:[12]},{name:"addComponentAt",type:"method",isPublic:!0,parameters:[12,0]},{name:"indexOfComponent",type:"method",isPublic:!0,parameters:[12]},{name:"removeComponent",type:"method",isPublic:!0,parameters:[12]},{name:"forEachComponents",type:"method",isPublic:!0,parameters:[0]},{name:"componentsWithFilter",type:"method",isPublic:!0,parameters:[0]},{name:"findComponentFromBottom",type:"method",isPublic:!0,parameters:[0]},{name:"findComponentFromTop",type:"method",isPublic:!0,parameters:[0]},{name:"removeComponentAt",type:"method",isPublic:!0,parameters:[0]}]},3:{objectFormatId:19,members:[{name:"isRtcConnected",mode:"value",type:"property",isPublic:!0},{name:"_memberId",mode:"value",type:"property",isPublic:!1},{name:"_deviceType",mode:"value",type:"property",isPublic:!1},{name:"_information",mode:"value",type:"property",isPublic:!1},{name:"appliances",mode:"value",type:"property",isPublic:!1},{name:"cursorX",mode:"value",type:"property",isPublic:!1},{name:"cursorY",mode:"value",type:"property",isPublic:!1},{name:"memberState",mode:"value",type:"property",isPublic:!1},{name:"viewState",mode:"value",type:"property",isPublic:!1},{name:"isPressed",mode:"value",type:"property",isPublic:!1},{name:"isCursorInScene",mode:"value",type:"property",isPublic:!1},{name:"information",mode:"readonly",type:"property",isPublic:!0},{name:"memberId",mode:"readonly",type:"property",isPublic:!0},{name:"deviceType",mode:"readonly",type:"property",isPublic:!0},{name:"displayer",mode:"readonly",type:"property",isPublic:!0},{name:"currentAppliance",mode:"readonly",type:"property",isPublic:!0},{name:"isCursorOutOfBounds",type:"method",isPublic:!1,parameters:[]},{name:"setViewMode",type:"method",isPublic:!0,parameters:[0]},{name:"notifyAllThatSceneChanged",type:"method",isPublic:!0,parameters:[54]},{name:"getMemberState",type:"method",isPublic:!0,parameters:[]},{name:"getViewState",type:"method",isPublic:!0,parameters:[]},{name:"setCursor",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"changeToFollower",type:"method",isPublic:!0,parameters:[48]},{name:"setMemberState",type:"method",isPublic:!0,parameters:[0]},{name:"setViewState",type:"method",isPublic:!0,parameters:[0]},{name:"dispatchMagixEvent",type:"method",isPublic:!0,parameters:[0,0]},{name:"destroy",type:"method",isPublic:!0,parameters:[]}]},4:{objectFormatId:15,members:[{name:"initiativeColors",mode:"value",type:"property",isPublic:!1},{name:"membersMap",mode:"value",type:"property",isPublic:!1},{name:"directorId",mode:"value",type:"property",isPublic:!1},{name:"broadcasterId",mode:"value",type:"property",isPublic:!1},{name:"isMemberExits",type:"method",isPublic:!0,parameters:[0]},{name:"getBroadcasterId",type:"method",isPublic:!0,parameters:[]},{name:"findMemberIdWithUserId",type:"method",isPublic:!0,parameters:[0]},{name:"getInformationWithMemberId",type:"method",isPublic:!0,parameters:[0]},{name:"getMemberDisplayers",type:"method",isPublic:!0,parameters:[]},{name:"memberEnter",type:"method",isPublic:!0,parameters:[55]},{name:"enterMemberViewState",type:"method",isPublic:!1,parameters:[]},{name:"memberLeave",type:"method",isPublic:!0,parameters:[0]},{name:"updateDirector",type:"method",isPublic:!1,parameters:[]},{name:"getDeviceType",type:"method",isPublic:!0,parameters:[0]},{name:"getMemberState",type:"method",isPublic:!0,parameters:[0]},{name:"getMemberIdWithUserId",type:"method",isPublic:!0,parameters:[0]},{name:"getViewState",type:"method",isPublic:!0,parameters:[0]},{name:"setMemberState",type:"method",isPublic:!0,parameters:[0,0]},{name:"setViewState",type:"method",isPublic:!0,parameters:[0,0]},{name:"setCursor",type:"method",isPublic:!0,parameters:[0,0,0,0,0]},{name:"setRtcState",type:"method",isPublic:!0,parameters:[0,0]},{name:"dispatchMagixEvent",type:"method",isPublic:!0,parameters:[0,0,0]},{name:"notifyAllThatSceneChanged",type:"method",isPublic:!0,parameters:[60]},{name:"currentAppliance",type:"method",isPublic:!0,parameters:[0]},{name:"cancelBroadcaster",type:"method",isPublic:!1,parameters:[]},{name:"becomeNewBroadcast",type:"method",isPublic:!1,parameters:[0]},{name:"broadcastViewToAllRoom",type:"method",isPublic:!1,parameters:[]},{name:"initiativeColor",type:"method",isPublic:!0,parameters:[]},{name:"anyMemberHasColor",type:"method",isPublic:!1,parameters:[17]},{name:"isColorEquals",type:"method",isPublic:!1,parameters:[17,17]},{name:"compareDirector",type:"method",isPublic:!1,parameters:[0,0]}]},5:{objectFormatId:69,members:[{name:"points",mode:"value",type:"property",isPublic:!1},{name:"pushPoint",type:"method",isPublic:!0,parameters:[71]},{name:"pointHitTest",type:"method",isPublic:!0,parameters:[0,0]},{name:"rectHitTest",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"findCrossPoint",type:"method",isPublic:!1,parameters:[71,71,71,71]},{name:"isCrossPointBetweenSegment",type:"method",isPublic:!1,parameters:[71,71,71]}]},6:{objectFormatId:72,members:[{name:"pointHitTest",type:"method",isPublic:!0,parameters:[0,0]},{name:"rectHitTest",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"checkCrossVertical",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"checkCrossHorizontal",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"checkCrossGeometrical",type:"method",isPublic:!1,parameters:[0,0,0]}]},7:{objectFormatId:73,members:[{name:"points",mode:"value",type:"property",isPublic:!1},{name:"pushPoint",type:"method",isPublic:!0,parameters:[71]},{name:"hitTest",type:"method",isPublic:!0,parameters:[0,0,0]},{name:"hitAnySegments",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"hitAnyNodeCircles",type:"method",isPublic:!1,parameters:[0,0,0]}]},8:{objectFormatId:75,members:[{name:"testPoint",type:"method",isPublic:!0,parameters:[0,0,0,0,0,0]},{name:"iterate",type:"method",isPublic:!0,parameters:[0,0,0,0,0]},{name:"allPoints",type:"method",isPublic:!0,parameters:[0,0,0,0]},{name:"testRect",type:"method",isPublic:!0,parameters:[0,0,0,0,0,0,0,0]},{name:"testSegment",type:"method",isPublic:!1,parameters:[0,0,0,0]}]},9:{objectFormatId:76,members:[{name:"beginVector",mode:"value",type:"property",isPublic:!1},{name:"endVector",mode:"value",type:"property",isPublic:!1},{name:"hitTest",type:"method",isPublic:!0,parameters:[0,0]},{name:"radiusIncrement",type:"method",isPublic:!1,parameters:[0,0]}]},10:{objectFormatId:77,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"paintingRectangleShape",mode:"value",type:"property",isPublic:!1},{name:"beginPoint",mode:"value",type:"property",isPublic:!1},{name:"isShiftPress",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[38]},{name:"onDrag",type:"method",isPublic:!1,parameters:[38]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]}]},11:{objectFormatId:86,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"state",mode:"value",type:"property",isPublic:!1},{name:"isPainting",mode:"value",type:"property",isPublic:!1},{name:"directionX",mode:"value",type:"property",isPublic:!0},{name:"directionY",mode:"value",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"pointHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"renderSvgContent",type:"method",isPublic:!1,parameters:[]}]},12:{objectFormatId:116,members:[{name:"belongsToUserId",mode:"value",type:"property",isPublic:!0},{name:"isShiftPress",mode:"value",type:"property",isPublic:!0},{name:"context",mode:"value",type:"property",isPublic:!0},{name:"rectangle",mode:"value",type:"property",isPublic:!1},{name:"rectangleWithHitMargin",mode:"value",type:"property",isPublic:!1},{name:"operatePoint",mode:"value",type:"property",isPublic:!1},{name:"isOnlyHasTextareaShape",mode:"value",type:"property",isPublic:!1},{name:"draggingContext",mode:"value",type:"property",isPublic:!0},{name:"includeComponentNodes",mode:"value",type:"property",isPublic:!1},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"originX",mode:"readonly",type:"property",isPublic:!0},{name:"originY",mode:"readonly",type:"property",isPublic:!0},{name:"width",mode:"readonly",type:"property",isPublic:!0},{name:"height",mode:"readonly",type:"property",isPublic:!0},{name:"isUniformScale",mode:"readonly",type:"property",isPublic:!0},{name:"tryToStartEdit",type:"method",isPublic:!0,parameters:[0,0,39]},{name:"isIncludePoint",type:"method",isPublic:!0,parameters:[0,0]},{name:"findOperationPointWithTargetId",type:"method",isPublic:!1,parameters:[0]},{name:"dragToPoint",type:"method",isPublic:!0,parameters:[0,0]},{name:"findDraggingTargetPoint",type:"method",isPublic:!1,parameters:[0,0]},{name:"updateRectangleWithDraggingTargetPoint",type:"method",isPublic:!1,parameters:[93]},{name:"refreshIncludesComponentsPositionAndSize",type:"method",isPublic:!1,parameters:[]},{name:"completeEdit",type:"method",isPublic:!0,parameters:[]},{name:"refreshWithIncludesComponents",type:"method",isPublic:!0,parameters:[122]},{name:"refreshRectangleWithHitMargin",type:"method",isPublic:!1,parameters:[]},{name:"findRectangleIncludePoints",type:"method",isPublic:!1,parameters:[0]},{name:"renderTagBoxes",type:"method",isPublic:!0,parameters:[]}]},13:{objectFormatId:125,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"paintingEllipseShape",mode:"value",type:"property",isPublic:!1},{name:"beginPoint",mode:"value",type:"property",isPublic:!1},{name:"isShiftPress",mode:"value",type:"property",isPublic:!1},{name:"latestDragX",mode:"value",type:"property",isPublic:!1},{name:"latestDragY",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[35]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[35]},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[38]},{name:"onDrag",type:"method",isPublic:!1,parameters:[38]},{name:"refreshPaintingEllipseShape",type:"method",isPublic:!1,parameters:[]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]}]},14:{objectFormatId:126,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"state",mode:"value",type:"property",isPublic:!0},{name:"isPainting",mode:"value",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"pointHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"rectHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0,0,0,0]},{name:"outerEllipseTester",type:"method",isPublic:!1,parameters:[0]},{name:"innerEllipseTester",type:"method",isPublic:!1,parameters:[0]},{name:"renderSvgContent",type:"method",isPublic:!1,parameters:[]}]},15:{objectFormatId:127,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onClick",type:"method",isPublic:!1,parameters:[38]},{name:"onDrag",type:"method",isPublic:!1,parameters:[38]},{name:"removeHitComponents",type:"method",isPublic:!1,parameters:[38]}]},16:{objectFormatId:128,members:[{name:"uuid",mode:"value",type:"property",isPublic:!0},{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"imageSrc",mode:"value",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"setImageSrc",type:"method",isPublic:!0,parameters:[0]},{name:"renderSvgContent",type:"method",isPublic:!0,parameters:[]}]},17:{objectFormatId:129,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"initializedWidth",mode:"value",type:"property",isPublic:!1},{name:"initializedHeight",mode:"value",type:"property",isPublic:!1},{name:"_width",mode:"value",type:"property",isPublic:!1},{name:"_height",mode:"value",type:"property",isPublic:!1},{name:"state",mode:"value",type:"property",isPublic:!0},{name:"points",mode:"value",type:"property",isPublic:!0},{name:"isPainting",mode:"value",type:"property",isPublic:!0},{name:"pushedPointsCount",mode:"value",type:"property",isPublic:!1},{name:"lastVacuateIndex",mode:"value",type:"property",isPublic:!1},{name:"pathDefinitionCache",mode:"value",type:"property",isPublic:!1},{name:"width",mode:"accessible",type:"property",isPublic:!0},{name:"height",mode:"accessible",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"width",mode:"accessible",type:"property",isPublic:!0},{name:"height",mode:"accessible",type:"property",isPublic:!0},{name:"pointsCount",mode:"readonly",type:"property",isPublic:!0},{name:"pushPoint",type:"method",isPublic:!0,parameters:[93]},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"pointHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"renderSvgContent",type:"method",isPublic:!1,parameters:[]},{name:"getPathDefinition",type:"method",isPublic:!0,parameters:[]},{name:"createPathDefinition",type:"method",isPublic:!1,parameters:[]},{name:"displayPoints",type:"method",isPublic:!0,parameters:[]},{name:"getControlPoint",type:"method",isPublic:!1,parameters:[93,93,93,0]},{name:"calcHypotenuse",type:"method",isPublic:!1,parameters:[0,0]},{name:"needKeepLineAngle",type:"method",isPublic:!1,parameters:[93,93,93]},{name:"vacuatePoints",type:"method",isPublic:!1,parameters:[0]}]},18:{objectFormatId:130,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"paintingCurveShape",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[]},{name:"onDrag",type:"method",isPublic:!1,parameters:[38]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]}]},19:{objectFormatId:131,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"paintingRectangleShape",mode:"value",type:"property",isPublic:!1},{name:"beginPoint",mode:"value",type:"property",isPublic:!1},{name:"isShiftPress",mode:"value",type:"property",isPublic:!1},{name:"latestDragX",mode:"value",type:"property",isPublic:!1},{name:"latestDragY",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[35]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[35]},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[38]},{name:"onDrag",type:"method",isPublic:!1,parameters:[38]},{name:"refreshPaintingRectangleShape",type:"method",isPublic:!1,parameters:[]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]}]},20:{objectFormatId:132,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"state",mode:"value",type:"property",isPublic:!0},{name:"isPainting",mode:"value",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"completePainting",type:"method",isPublic:!0,parameters:[]},{name:"pointHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0]},{name:"rectHitTestContent",type:"method",isPublic:!1,parameters:[0,0,0,0,0,0]},{name:"innerRectangleTester",type:"method",isPublic:!1,parameters:[0]},{name:"renderSvgContent",type:"method",isPublic:!1,parameters:[]}]},21:{objectFormatId:133,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"context",mode:"value",type:"property",isPublic:!0},{name:"beginPoint",mode:"value",type:"property",isPublic:!1},{name:"belongsTo",mode:"value",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"updateEndPoint",type:"method",isPublic:!0,parameters:[0,0]},{name:"refreshWithPoints",type:"method",isPublic:!0,parameters:[0]},{name:"renderTagBoxes",type:"method",isPublic:!0,parameters:[]}]},22:{objectFormatId:134,members:[{name:"context",mode:"value",type:"property",isPublic:!0},{name:"fixedCursorInScenePoint",mode:"value",type:"property",isPublic:!0},{name:"beginPressPoint",mode:"value",type:"property",isPublic:!1},{name:"draggingTarget",mode:"value",type:"property",isPublic:!1},{name:"draggedComponentOriginPoints",mode:"value",type:"property",isPublic:!1},{name:"selectedGroup",mode:"value",type:"property",isPublic:!1},{name:"isShiftPress",mode:"value",type:"property",isPublic:!1},{name:"latestOperateX",mode:"value",type:"property",isPublic:!1},{name:"latestOperateY",mode:"value",type:"property",isPublic:!1},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[35]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[35]},{name:"onMemberStateChanged",type:"method",isPublic:!0,parameters:[24,24]},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[137]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]},{name:"cleanAllSelectingInformation",type:"method",isPublic:!1,parameters:[]},{name:"makeSureItsDraggingEvent",type:"method",isPublic:!1,parameters:[38]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[38]},{name:"startDragWithSelectedMode",type:"method",isPublic:!1,parameters:[]},{name:"startDragWithHighlightMode",type:"method",isPublic:!1,parameters:[138]},{name:"onDrag",type:"method",isPublic:!1,parameters:[38]},{name:"refreshMyEditorRectangleSpaceDragToPoint",type:"method",isPublic:!1,parameters:[]},{name:"dragComponents",type:"method",isPublic:!1,parameters:[0,0,135]},{name:"onHover",type:"method",isPublic:!1,parameters:[38]},{name:"onClick",type:"method",isPublic:!1,parameters:[38]},{name:"updateHighlightComponent",type:"method",isPublic:!1,parameters:[139]},{name:"cleanSelectedComponents",type:"method",isPublic:!1,parameters:[]},{name:"findMyEditorRectangleSpace",type:"method",isPublic:!1,parameters:[]},{name:"refreshAllUsersEditorRectangleSpace",type:"method",isPublic:!1,parameters:[]},{name:"allSelectedComponents",type:"method",isPublic:!1,parameters:[]}]},23:{objectFormatId:140,members:[{name:"context",mode:"value",type:"property",isPublic:!1},{name:"fixedCursorInScenePoint",mode:"readonly",type:"property",isPublic:!0},{name:"onMemberStateChanged",type:"method",isPublic:!0,parameters:[24,24]},{name:"onClick",type:"method",isPublic:!0,parameters:[38]}]},24:{objectFormatId:141,members:[{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"textSize",mode:"value",type:"property",isPublic:!0},{name:"editedBy",mode:"value",type:"property",isPublic:!0},{name:"textColor",mode:"value",type:"property",isPublic:!0},{name:"textareaBox",mode:"value",type:"property",isPublic:!0},{name:"isTextEmpty",mode:"readonly",type:"property",isPublic:!0},{name:"selectable",mode:"readonly",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"currentScale",mode:"readonly",type:"property",isPublic:!0},{name:"setTextareaBox",type:"method",isPublic:!0,parameters:[49]},{name:"adjustToKeepUniformScale",type:"method",isPublic:!0,parameters:[]},{name:"renderTagBoxes",type:"method",isPublic:!0,parameters:[]},{name:"renderTagBoxesWhenEditedByMe",type:"method",isPublic:!1,parameters:[]},{name:"renderTagBoxesWhenEditedByOther",type:"method",isPublic:!1,parameters:[]},{name:"renderSvgContent",type:"method",isPublic:!1,parameters:[]}]},25:{objectFormatId:142,members:[{name:"selectable",mode:"value",type:"property",isPublic:!0},{name:"originX",mode:"value",type:"property",isPublic:!0},{name:"originY",mode:"value",type:"property",isPublic:!0},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"selectedBy",mode:"value",type:"property",isPublic:!0},{name:"context",mode:"value",type:"property",isPublic:!0},{name:"highlightAuthorIds",mode:"value",type:"property",isPublic:!1},{name:"renderSvgContent",type:"method",isPublic:!1,parameters:[]},{name:"isHighlightBy",type:"method",isPublic:!0,parameters:[0]},{name:"setHighlightBy",type:"method",isPublic:!0,parameters:[0,0]},{name:"authorsPropertySetValue",type:"method",isPublic:!1,parameters:[143,0,0]},{name:"renderTagBoxes",type:"method",isPublic:!0,parameters:[]},{name:"renderSvg",type:"method",isPublic:!0,parameters:[]}]},26:{objectFormatId:146,members:[{name:"pressedPoint",mode:"value",type:"property",isPublic:!0},{name:"dragEventsBuffer",mode:"value",type:"property",isPublic:!0},{name:"fixedCursorInScenePoint",mode:"value",type:"property",isPublic:!0},{name:"isDragging",mode:"readonly",type:"property",isPublic:!0},{name:"needBufferDragEvent",mode:"readonly",type:"property",isPublic:!1},{name:"isPressDown",mode:"readonly",type:"property",isPublic:!0},{name:"onKeyUp",type:"method",isPublic:!0,parameters:[35]},{name:"onKeyDown",type:"method",isPublic:!0,parameters:[35]},{name:"onDestroy",type:"method",isPublic:!0,parameters:[]},{name:"onMouseLeave",type:"method",isPublic:!0,parameters:[38]},{name:"onDraggingStateChanged",type:"method",isPublic:!1,parameters:[38]},{name:"onDrag",type:"method",isPublic:!1,parameters:[38]},{name:"onHover",type:"method",isPublic:!1,parameters:[38]},{name:"onClick",type:"method",isPublic:!1,parameters:[38]},{name:"makeSureItsDraggingEvent",type:"method",isPublic:!1,parameters:[38]},{name:"onMemberStateChanged",type:"method",isPublic:!0,parameters:[24,24]},{name:"onMagixEvent",type:"method",isPublic:!0,parameters:[0,0]},{name:"onSceneChanged",type:"method",isPublic:!0,parameters:[147]},{name:"onPressedAndDrag",type:"method",isPublic:!1,parameters:[38]},{name:"onMouseDown",type:"method",isPublic:!0,parameters:[38]},{name:"onMouseMove",type:"method",isPublic:!0,parameters:[38]},{name:"onMouseUp",type:"method",isPublic:!0,parameters:[38]},{name:"checkShouldChangeGestureToDrag",type:"method",isPublic:!1,parameters:[38]},{name:"shouldChangeGestureToDrag",type:"method",isPublic:!1,parameters:[0,0]},{name:"invokeCallback",type:"method",isPublic:!1,parameters:[0,38]}]},27:{objectFormatId:155,members:[{name:"createConstructors",type:"method",isPublic:!1,parameters:[]},{name:"createMemberState",type:"method",isPublic:!1,parameters:[17]}]},28:{objectFormatId:157,members:[{name:"rootSceneGroup",mode:"value",type:"property",isPublic:!1},{name:"_currentPath",mode:"value",type:"property",isPublic:!1},{name:"currentSceneCache",mode:"value",type:"property",isPublic:!1},{name:"currentPath",mode:"accessible",type:"property",isPublic:!0},{name:"currentPath",mode:"accessible",type:"property",isPublic:!0},{name:"currentScene",mode:"readonly",type:"property",isPublic:!0},{name:"getScene",type:"method",isPublic:!0,parameters:[171]},{name:"listScenes",type:"method",isPublic:!0,parameters:[177]},{name:"listSceneGroups",type:"method",isPublic:!0,parameters:[176]},{name:"listAllScenes",type:"method",isPublic:!0,parameters:[]},{name:"collectScenes",type:"method",isPublic:!1,parameters:[161,162,163]},{name:"putScene",type:"method",isPublic:!0,parameters:[181,9,0]},{name:"removePath",type:"method",isPublic:!0,parameters:[182]},{name:"moveScene",type:"method",isPublic:!0,parameters:[179,180,0]},{name:"cleanIfSceneGroupEmpty",type:"method",isPublic:!1,parameters:[160]},{name:"isSceneGroupEmpty",type:"method",isPublic:!1,parameters:[175]},{name:"findSceneOrGroup",type:"method",isPublic:!1,parameters:[170]},{name:"findSceneGroup",type:"method",isPublic:!1,parameters:[169]},{name:"makeSceneGroup",type:"method",isPublic:!1,parameters:[178]},{name:"insertScene",type:"method",isPublic:!1,parameters:[172,9,0]},{name:"createRootSceneGroup",type:"method",isPublic:!1,parameters:[]},{name:"findNextScenePathInTree",type:"method",isPublic:!1,parameters:[168]},{name:"findNextPathStackInTree",type:"method",isPublic:!1,parameters:[166,167]},{name:"findNextName",type:"method",isPublic:!1,parameters:[165,0]},{name:"createSceneGroup",type:"method",isPublic:!1,parameters:[0]},{name:"isPathEquals",type:"method",isPublic:!0,parameters:[173,174]},{name:"checkPathIncludesPrefix",type:"method",isPublic:!1,parameters:[158,159]}]},29:{objectFormatId:183,members:[{name:"_src",mode:"value",type:"property",isPublic:!1},{name:"width",mode:"value",type:"property",isPublic:!0},{name:"height",mode:"value",type:"property",isPublic:!0},{name:"hitTestingBoxMargin",mode:"readonly",type:"property",isPublic:!0},{name:"originX",mode:"readonly",type:"property",isPublic:!0},{name:"originY",mode:"readonly",type:"property",isPublic:!0},{name:"src",mode:"readonly",type:"property",isPublic:!0},{name:"renderSvg",type:"method",isPublic:!0,parameters:[]}]},30:{objectFormatId:9,members:[{name:"ppt",mode:"value",type:"property",isPublic:!0},{name:"name",mode:"value",type:"property",isPublic:!0},{name:"componentsCount",mode:"readonly",type:"property",isPublic:!0},{name:"editableWithHitIdentifies",type:"method",isPublic:!0,parameters:[184]},{name:"editablesWithHitIdentifies",type:"method",isPublic:!0,parameters:[185]},{name:"shellRectangle",type:"method",isPublic:!0,parameters:[]},{name:"renderTagBoxes",type:"method",isPublic:!0,parameters:[]},{name:"renderSvg",type:"method",isPublic:!0,parameters:[48]},{name:"isComponentVisibleInViewRectangle",type:"method",isPublic:!1,parameters:[12,48]},{name:"isSvgElementLackOfKey",type:"method",isPublic:!1,parameters:[0]}]}}}),o=null},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(272);n(r(132)),n(r(273)),t.contextStack=new i.ContextStackImplement},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(419),o=r(420),a=r(421),s=(c.prototype.parse=function(e){return new p(this.picker,null,0,i.xml2js(e,{compact:!1,captureSpacesBetweenElements:!0}),this.resourceType)},c);function c(e,t){this.picker=t,this.resourceType=e}t.XMLNodeRuntime=s;var u=(l.prototype.execute=function(e){return void 0!==this.tagNames.find((function(t){return t===e}))},l.prototype.toString=function(){return this.tagNames.join(" or ")},l);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.tagNames=e}t.TagOrExpr=u;var p=(Object.defineProperty(h.prototype,"element",{get:function(){return this.elements[0]},enumerable:!0,configurable:!0}),h.prototype.displayer=function(e){return o.createXMLNodeDisplayer(this,e)},h.prototype.elementWithName=function(e){for(var t=0,r=this.elements;t<r.length;t++){var n=r[t];if(n.name===e)return n}},h.prototype.extraElementWithName=function(e){if(this.picker&&this.name)return this.cachedXMLMap||(this.cachedXMLMap={}),this.picker.getChild(this.name,e,this,this.cachedXMLMap,this.resourceType)},h.prototype.elementsWithName=function(e){for(var t=[],r=0,n=this.elements;r<n.length;r++){var i=n[r];i.name===e&&t.push(i)}return t},h.prototype.childElementOptional=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.searchChildElement(e),n=r.xml;return r.found?n:void 0},h.prototype.childElement=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.searchChildElement(e),n=r.xml;if(r.found)return n;"string"==typeof this.name&&e.unshift(this.name);var i=e.join(" -> "),o=e.findIndex((function(e){return e===n.name})),a=e.splice(o+1)[0],s=e.join(" -> ");throw new Error("can't find child "+i+": lack of child "+a+" from "+s)},h.prototype.searchChildElement=function(e){for(var t=this,r=0;r<e.length;++r){for(var n=e[r],i=t,o=0,a=t.elements;o<a.length;o++){var s=a[o];if("string"==typeof n){if(s.name===n){t=s;break}}else if(n.execute(s.name)){t=s;break}}if(i===t)return{xml:t,found:!1}}return{xml:t,found:!0}},h.prototype.hasChildElementWithName=function(e){for(var t=0,r=this.elements;t<r.length;t++)if(r[t].name===e)return!0;return!1},h.prototype.parentElement=function(e){var t=this.parentElementOptional(e);if(t)return t;throw new Error("can't find parent "+e+" from "+this.name)},h.prototype.parentElementOptional=function(e){for(var t=this.parent;t;){if("string"==typeof e){if(t.name===e)return t}else if(e.execute(t.name))return t;t=t.parent}},h);function h(e,t,r,i,o){this.picker=e,this.parent=t,this.index=r,this.resourceType=o,this.name=i.name,this.type=i.type,this.attr=new a.LocalAttributes(this.name,Object.freeze(n({},i.attributes))),this.extraAttr=e?new a.ExtraAttributes(this,e,o):new a.EmptyAttributes(this.name);var s=[];if((this.originXmlElement=i).elements)for(var c=0;c<i.elements.length;++c){var u=i.elements[c];"text"===u.type?this.text=u.text:s.push(new h(e,this,c,u,o))}this.elements=Object.freeze(s)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(29),o=r(48),a=r(7);t.None=o("#FFFFFF").alpha(0),t.UNDEFINED=o("#FFFFFF").alpha(0);var s=(c.prototype.setFillColor=function(e){this.fillColor=e},c.prototype.hsl=function(){return this.fillColor.hsl()},c.prototype.rgb=function(){return this.fillColor.rgb()},c);function c(){this.fillColor=t.None.hsl()}t.GroupFill=s;var u=(l.prototype.getResId=function(){return this.resId},l.prototype.getAlphaModFix=function(){return this.alphaModFix},l.prototype.hsl=function(){return t.None.hsl()},l.prototype.rgb=function(){return t.None.rgb()},l);function l(e){this.alphaModFix=1,this.resId=e.childElement("a:blip").attr.getString("r:embed");var t=e.childElement("a:blip").childElementOptional("a:alphaModFix");void 0!==t&&(this.alphaModFix=a.parseSTPercentage(t.attr.getNumber("amt")))}t.ImageFill=u;var p=(h.prototype.getGradientPath=function(){return this.path},h.prototype.getColors=function(){return this.colors},h.prototype.getRotation=function(){return this.rotation},h.prototype.hsl=function(){return this.colors&&0<this.colors.length&&this.colors[0].color?this.colors[0].color.hsl():t.None.hsl()},h.prototype.rgb=function(){return this.colors&&0<this.colors.length&&this.colors[0].color?this.colors[0].color.rgb():t.None.rgb()},h);function h(e,t,r){this.colors=[],this.rotation=0,this.path=void 0;var o=e.childElement("a:gsLst").elementsWithName("a:gs");if(this.colors=o.sort((function(e,t){return e.attr.getNumber("pos")/a.STPercentage100-t.attr.getNumber("pos")/a.STPercentage100})).map((function(e){return{stop:e.attr.getNumber("pos")/a.STPercentage100,color:d(e.childElement(new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(i.ALL_COLOR_TYPE)))),t,r)}})),e.hasChildElementWithName("a:lin")&&(this.rotation=a.toDeg(e.childElement("a:lin").attr.getNumber("ang",0))),e.hasChildElementWithName("a:path")){var s=e.childElement("a:path"),c=s.attr.getString("path"),u=s.childElement("a:fillToRect"),l=u.attr.getNumber("l",0),p=u.attr.getNumber("t",0),h=u.attr.getNumber("b",0),f=u.attr.getNumber("r",0);this.path={path:c,fillToRect:{left:l,top:p,bottom:h,right:f}}}}function d(e,t,r){if(e.attr.has("val")){var n=e.childElementOptional("a:alpha"),s=e.childElementOptional("a:shade"),c=e.childElementOptional("a:tint"),u=e.childElementOptional("a:lumMod"),l=e.childElementOptional("a:satMod"),p=e.childElementOptional("a:satOff"),h=e.childElementOptional("a:lumOff"),d=e.childElementOptional("a:hueMod"),m=e.childElementOptional("a:hueOff");switch(e.name){case"a:prstClr":return f(o(e.attr.getString("val")),n,s,u,c,l,h,p,d,m);case"a:srgbClr":return f(o("#"+e.attr.getString("val")),n,s,u,c,l,h,p,d,m);case"a:schemeClr":var y=e.attr.getString("val");return"phClr"===y&&(y=r.attr.getString("val")),f(o("#"+i.getSchemeClr(y,t)),n,s,u,c,l,h,p,d,m);case"a:hslClr":var A=e.attr.getNumber("hue")/a.Degree,g=e.attr.getNumber("sat")/a.STPercentage100,v=e.attr.getNumber("lum")/a.STPercentage100;return f(o({h:A,s:g,l:v}),n,s,u,c,l,h);case"a:scrgbClr":var b=255*e.attr.getNumber("r")/a.STPercentage100,P=255*e.attr.getNumber("g")/a.STPercentage100,w=255*e.attr.getNumber("b")/a.STPercentage100;return f(o({r:b,g:P,b:w}),n,s,u,c,l,h);case"a:sysClr":return f(o("#"+e.attr.getString("lastClr")),n,s,u,c,l,h,p,d,m);default:return}}}function f(e,t,r,n,i,s,c,u,l,p){if(i&&(e=e.mix(o("white"),1-i.attr.getNumber("val")/a.STPercentage100)),r&&(e=e.mix(o("black"),1-r.attr.getNumber("val")/a.STPercentage100)),s){var h=e.hsl().object(),d=h.h,f=h.s,m=h.l,y=f*s.attr.getNumber("val")/a.STPercentage100;e=o({l:m,s:y,h:d})}if(u){var A=e.hsl().object();d=A.h,f=A.s,m=A.l,y=u.attr.getNumber("val")/a.STPercentage100*100+f,e=o({l:m,s:y,h:d})}if(n){var g=e.hsl().object(),v=(d=g.h,f=g.s,(m=g.l)*n.attr.getNumber("val")/a.STPercentage100);e=o({l:v,s:f,h:d})}if(c){var b=e.hsl().object();d=b.h,f=b.s,m=b.l,v=c.attr.getNumber("val")/a.STPercentage100*100+m,e=o({l:v,s:f,h:d})}if(l){var P=e.hsl().object(),w=(d=P.h,f=P.s,m=P.l,d*l.attr.getNumber("val")/a.STPercentage100);e=o({l:m,s:f,h:w})}if(p){var S=e.hsl().object();d=S.h,f=S.s,m=S.l,w=p.attr.getNumber("val")/a.Degree+d,e=o({l:m,s:f,h:w})}return t&&(e=e.alpha(t.attr.getNumber("val")/a.STPercentage100)),e}t.GradientColor=p,t.getColor=d;var m=(y.prototype.read=function(e,r){if(void 0===e)return t.UNDEFINED;switch(e.name){case"a:noFill":return t.None;case"a:solidFill":return d(e.childElement(new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(i.ALL_COLOR_TYPE)))),r,this.placeHolderColor);case"a:gradFill":return new p(e,r,this.placeHolderColor);case"a:blipFill":return void 0!==e.childElement("a:blip").attr.getStringOptional("r:embed")?new u(e):t.None;case"a:grpFill":return new s;case"a:pattFill":default:return t.UNDEFINED}},y);function y(e){this.placeHolderColor=e}t.FillOrLineFillReader=m,t.ensureColor=function(e){return e instanceof u?"none":void 0===e?"none":e.rgb().string()}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(228);n(r(75)),n(r(262)),n(r(264)),n(r(140)),t.createFrameSerialization=function(e,t){return new i.FrameSerializationImplement(e,t)}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(131)),n(r(270))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.creator,c=a.setter,u=a.caller,l=a.getter,p=a.jsxUnwrapper,h=r(0),d=r(32),f=r(43),m=(i(y,o=a.wrapSuperClass(d.ApplianceComponent)),y.prototype.isHighlightBy=function(e){return-1!==u(l(this,"highlightAuthorIds"),"indexOf",[e])},y.prototype.setHighlightBy=function(e,t){u(this,"authorsPropertySetValue",[l(this,"highlightAuthorIds"),e,t])},y.prototype.authorsPropertySetValue=function(e,t,r){var n=u(e,"indexOf",[r]);t?-1===n&&u(e,"push",[r]):-1!==n&&u(e,"splice",[n,1])},y.prototype.renderTagBoxes=function(){var e=u(h,"getAuthorId",[]),t=u(this,"isHighlightBy",[e]);if(!t&&void 0===l(this,"selectedBy"))return null;var r=l(this,"hitTestingBoxMargin"),n=s({highlight:t,color:l(u(l(this,"context"),"getMemberState",[l(this,"selectedBy")]),"strokeColor"),selectedBy:void 0===l(this,"selectedBy")?l(f.BelongsTo,"None"):l(this,"selectedBy")===e?l(f.BelongsTo,"Me"):l(f.BelongsTo,"Others")});return s({key:l(this,"key"),type:"editable",payload:n,left:l(this,"originX")-r,top:l(this,"originY")-r,right:l(this,"originX")+l(this,"width")+r,bottom:l(this,"originY")+l(this,"height")+r})},y.prototype.renderSvg=function(){return h.createElement("g",{key:p(l(this,"key")),transform:p("translate("+l(this,"originX")+","+l(this,"originY")+")")},p(u(this,"renderSvgContent",[])))},y);function y(e){var t=o.call(this)||this;return t.highlightAuthorIds=s([]),c(t,"context",e),t}t.Editable=m,a.declareClass({classId:25,clazz:m,superClass:d.ApplianceComponent,memberDecorators:{isHighlightBy:[h.noEffects],renderTagBoxes:[h.noEffects]}}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(5);(i=n=t.WhiteLayouts||(t.WhiteLayouts={}))[i.Background=0]="Background",i[i.Graphics=1]="Graphics",i[i.Component=2]="Component",i[i.MouseCursor=3]="MouseCursor",t.createLayoutDescriptions=function(){return[{layout:n.Background,renderMode:o.LayoutRenderMode.AbsoluteSize,className:"background"},{layout:n.Graphics,renderMode:o.LayoutRenderMode.AbsoluteSize,className:"graphics"},{layout:n.Component,renderMode:o.LayoutRenderMode.RelativeSize,className:"component"},{layout:n.MouseCursor,renderMode:o.LayoutRenderMode.Screen}]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(11),o=r(29);t.Parser=function(e,t){this.animation=e,this.context=t,this.shapeAnimationParams=A(e.spId,t)};var a=r(435);t.AnimParser=a.AnimParser;var s=r(436);t.AnimRotateParser=s.AnimRotateParser;var c=r(437);t.AnimScaleParser=c.AnimScaleParser;var u=r(438);t.AnimEffectParser=u.AnimEffectParser;var l=r(439);t.AnimColorParser=l.AnimColorParser;var p=r(440);t.AnimSetParser=p.AnimSetParser;var h=r(441);t.AnimCmdParser=h.AnimCmdParser;var d=r(442);t.AnimMotionParser=d.AnimMotionParser;var f,m,y=r(49);function A(e,t){var r=t.shapeParamsIndex[parseInt(e)];return r?{ppt_x:r.rectangle.x/t.slideWidth,ppt_y:r.rectangle.y/t.slideHeight,ppt_w:r.rectangle.width/t.slideWidth,ppt_h:r.rectangle.height/t.slideHeight}:{ppt_x:0,ppt_y:0,ppt_w:.5,ppt_h:.5}}function g(e,t,r){var a,s=e.childElement(new n.TagOrExpr("p:strVal","p:fltVal","p:clrVal","p:intVal"));switch(a="p:clrVal"===s.name?i.getColor(s.childElement(new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(o.ALL_COLOR_TYPE)))),r.slideContext):s.attr.getString("val"),s.name){case"p:strVal":return"num"===t?{attrValue:a=a.replace(/#/g,"$"),attrValueType:f.formulaType}:{attrValue:a,attrValueType:f.stringType};case"p:fltVal":return{attrValue:parseFloat(a),attrValueType:f.floatType};case"p:clrVal":return{attrValue:a,attrValueType:f.colorType};case"p:intVal":return{attrValue:parseInt(a),attrValueType:f.intType};default:return{attrValue:a,attrValueType:f.stringType}}}t.TimeFilter=y.TimeFilter,t.TimeFilterResolver=y.TimeFilterResolver,(m=f=t.AnimatedAttrValueType||(t.AnimatedAttrValueType={}))[m.floatType=0]="floatType",m[m.stringType=1]="stringType",m[m.colorType=2]="colorType",m[m.intType=3]="intType",m[m.formulaType=4]="formulaType",t.toShapeParams=A,t.parseBehaviorAttr=function(e){var t=e.childElement("p:cTn"),r=t.childElementOptional("p:stCondLst","p:cond"),n=0;r&&(n=r.attr.getNumber("delay"));var i,o=t.attr.getString("dur");i="indefinite"===o?-1:parseInt(o);var a=t.attr.getStringOptional("fill"),s=t.attr.getStringOptional("tmFilter"),c=e.childElementOptional("p:attrNameLst"),u=[];return c&&c.elementsWithName("p:attrName").forEach((function(e){u.push(e.text)})),{duration:i,delay:n,animationAttrNames:u,timeFilter:s,fill:a}},t.getValueHolderOptional=function(e,t,r){if(void 0!==e)return g(e,t,r)},t.getValueHolder=g},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(77);t.CoreFunctionsMode=i.CoreFunctionsMode,n(r(137)),n(r(289)),n(r(295))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(138)),n(r(291))},function(e,r){e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(192);t.register=n.register,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(404))},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=n=t.DisplayerNodePhase||(t.DisplayerNodePhase={})).Uncommitted="uncommitted",i.Committed="committed",i.Rejected="rejected",t.isDisplayerNode=function(e){return e instanceof o},t.getPhaseWithDisplayerNode=function(e){var t=e.__proxy;return t.didDispose?n.Rejected:t.realTarget?n.Committed:n.Uncommitted};var o=function(e){this.__proxy=e};t.DisplayerNodeImplement=o,t.addDisplayerKey=function(e,t,r){void 0===r&&(r=!0),Object.defineProperty(e,t,{enumerable:r,configurable:!0,get:function(){var e=this.__proxy,r=e.proxyRuntime.pullValue(e.displayerTarget()[t]);return e.assertAccessible(),e.touchKey(t),r}})},t.removeDisplayerKey=function(e,t){delete e[t]}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(90);t.inCircle=i.inCircle;var o=r(59);t.RectangleTestingResult=o.RectangleTestingResult,n(r(91)),n(r(167)),n(r(168))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(174);t.Gesture=n.Gesture,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(89))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(203),c=r(67),u=r(16),l=r(201),p=(i(h,a=s.CacheTimingAnime),h.prototype.createState=function(e,t,r){if(void 0===this.repeatCount||"none"===this.repeatCount){!0===this.parentAnimeAutoRev?e>this.parentAnimeDelay+2*this.parentAnimeDuration&&(this.ended=!0):!0===this.autoRev?e>this.delay+2*this.duration&&(this.ended=!0):e>this.delay+this.duration&&(this.ended=!0);var n=this.getAutoRevEffectiveTime(e);return this.getState(n,t)}var i=this.getRepeatEffectiveTime(e,r);return n=this.getAutoRevEffectiveTime(i),this.getState(n,t)},h.prototype.getRepeatEffectiveTime=function(e,t){var r=this.parentAnimeDuration;return!0===this.parentAnimeAutoRev&&(r=2*this.parentAnimeDuration),"indefinite"!==this.repeatCount?Math.floor((e-this.parentAnimeDelay)/r)>=this.repeatCount?(this.ended=!0,this.delay+this.duration-1):(e-this.parentAnimeDelay)%r+this.parentAnimeDelay:(void 0===this.loopStartTime&&(this.loopStartTime=t),(t-this.loopStartTime+this.sequenceBeginAt-this.parentAnimeDelay)%r+this.parentAnimeDelay)},h.prototype.getAutoRevEffectiveTime=function(e){var t;if(!0===this.parentAnimeAutoRev){var r=(n=this.delay)+this.duration;t=(o=(i=this.parentAnimeDelay+this.parentAnimeDuration+(this.parentAnimeDelay+this.parentAnimeDuration-r))+this.duration)<e?n:i<e&&e<=o?n+o-e:r<e&&e<=r?r:e}else if(!0===this.autoRev){var n,i,o;t=(o=(i=r=(n=this.delay)+this.duration)+this.duration)<e?n:i<e&&e<=o?n+o-e:e}else t=e;return t},h.prototype.parseValue=function(e,t,r){return void 0!==e.formula?{value:e.attrValue,type:"formula",formula:l.parse(e.formula).compile()}:e.attrValueType===u.AnimatedAttrValueType.formulaType?{value:l.parse(e.attrValue).compile(),type:"variableFormula"}:{value:this.translateAttrValue(e.attrValue,t,r),type:"static"}},h.prototype.translateAttrValue=function(e,t,r){if(!e)return e;if(!this.shapeParam)throw new Error("not found shape "+this.shapeId+" data");return e},h.prototype.cacluateAttr=function(e,t,r){var n;if(void 0!==e){var i=(t-e.startProcessRate)/(e.endProcessRate-e.startProcessRate),a=o({},r,{$ppt_x:this.shapeAnimationParams.ppt_x,$ppt_y:this.shapeAnimationParams.ppt_y,$ppt_w:this.shapeAnimationParams.ppt_w,$ppt_h:this.shapeAnimationParams.ppt_h,pi:Math.PI});if("variableFormula"===e.fromType){var s=e.from.evaluate(a);n=s+(("variableFormula"===e.toType?e.to.evaluate(a):e.to)-s)*i}else if("formula"===e.fromType){var c=e.from+(e.to-e.from)*i;n=e.formula.evaluate(o({},a,{$:c}))}else n=(s=e.from)+(("variableFormula"===e.toType?e.to.evaluate(a):e.to)-s)*i;return n}},h.prototype.getExcutingFormula=function(e,t){for(var r,n=0;n<t.length;n++)if(n+1===t.length){if(t[n].startProcessRate<=e){r=t[n];break}}else if(t[n].startProcessRate<=e&&t[n+1].startProcessRate>e){r=t[n];break}return r},h.prototype.playingSoundEffecting=function(e){return void 0!==this.soundEffectId&&"number"==typeof e&&0<e&&e<=1},h);function h(e,t,r,n,i){var o=a.call(this)||this;if(o.animeId=e.animation.id,o.sequenceIndex=e.animation.sequenceIndex,o.shapeId=e.animation.spId,o.atomAnimeId=e.props.animeId,o.delay=e.props.delay+n,o.duration=e.props.duration,o.parentAnimeDelay=e.animation.delay+n,o.sequenceBeginAt=n,o.parentAnimeDuration=e.animation.duration,o.parentAnimeAutoRev=e.animation.autoRev,o.autoRev=e.props.autoRev,o.fill=e.props.fill,o.presetClass=e.animation.presetClass,o.presetID=e.animation.presetID,o.repeatCount=e.animation.repeatCount,o.repeatEndCondition=e.animation.repeatEndCondition,o.animeIndex=i,o.eventSourceId=void 0===e.animation.eventSourceShapeId?c.mainSequenceEventSourceId:e.animation.eventSourceShapeId,o.animatedValueAttrs=e.props.animatedValueAttrs,o.shapeParam=r.shapeParamsIndex[parseInt(o.shapeId)],o.shapeAnimationParams=u.toShapeParams(o.shapeId,r),o.soundEffectId=e.animation.soundEffectId,void 0!==o.animatedValueAttrs){var s=o.animatedValueAttrs;o.formulas=s.slice(0,s.length-1).map((function(e,n){var i=s[n],a=s[n+1];void 0!==s[n].formula&&(a.formula=i.formula);var c=o.parseValue(i,t,r),u=o.parseValue(a,t,r);return{from:c.value,to:u.value,startProcessRate:i.time,endProcessRate:a.time,formula:c.formula,fromType:c.type,toType:u.type}}))}return o}t.AtomTimingAnime=p},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(133)),n(r(276)),n(r(134))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(279)),n(r(135))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(21),o=r(31),a=r(26);t.ProxyKey="__proxy",(n=t.ProxyKind||(t.ProxyKind={}))[n.FlatObject=0]="FlatObject",n[n.AkkoObject=1]="AkkoObject",n[n.Array=2]="Array",t.findIdentifierWith=function(e){if(a.isInMagix()){if(o.isProxyNode(e))return e.identifier;var r=e[t.ProxyKey];if(!o.isProxyNode(r))throw new Error("identifier not found");return r.identifier}if(i.isDisplayerNode(e))return e.__proxy.identifier;throw"object"!=typeof e?new Error("can not find identifier of "+typeof e):null===e?new Error("can not find identifier of null"):new Error("identifier not found")}},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=n=t.EventPhase||(t.EventPhase={}))[i.Start=0]="Start",i[i.Update=1]="Update",i[i.End=2]="End",i[i.Other=3]="Other";var o=(Object.defineProperty(a.prototype,"disable",{get:function(){return this._disable},set:function(e){this._disable!==e&&(this._disable=e)&&this.cancel()},enumerable:!0,configurable:!0}),a.prototype.cancel=function(){for(var e=0,t=this.adapterNodes;e<t.length;e++){var r=t[e],n=r.adapter,i=r.payloads,o=r.canceledMap,a={},s=!1;for(var c in i)c in o||(a[c]=i[c],s=o[c]=!0);if(s){var u=n.createCancelEvent(a);u&&this.onCancelEvent(u)}}},a.prototype.interruptEvent=function(e){var t=this.adapterNodes.find((function(t){return t.adapter.isEventAccessible(e)}));if(t){for(var r=t.adapter,i=t.canceledMap,o=r.takeEventDescription(e),a=[],s=0,c=o?"number"==typeof o.length?o:[o]:[];s<c.length;s++){var u=c[s];if(u.phase===n.Other)a.push(u);else{var l=i[u.identifier];this.handleAndCheckIgnoreEventDescription(t,u)||l||a.push(u)}}return!this._disable&&0<a.length?r.convertToEvent(e,a):null}return e},a.prototype.handleAndCheckIgnoreEventDescription=function(e,t){var r=e.payloads,i=e.canceledMap,o=t.identifier,a=t.phase,s=t.payload;switch(a){case n.Start:return o in r||(r[o]=s,this._disable&&(i[o]=!0),!1);case n.Update:return!(o in r&&(r[o]=s,1));case n.End:return!(o in r&&(delete r[o],delete i[o],1));default:return!0}},a);function a(e,t){this._disable=!1,this.onCancelEvent=e,this.adapterNodes=Object.freeze(t.map((function(e){var t={},r={};return e.setEventDescriptionStateGetter&&e.setEventDescriptionStateGetter((function(e){var n=t[e];return n?{payload:n,isCanceled:!!r[e]}:void 0})),{adapter:e,payloads:t,canceledMap:r}})))}t.ContinuityNode=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(198);function o(e){var t={},r=e.childElementOptional("a:latin"),n=e.childElementOptional("a:ea"),i=e.childElementOptional("a:cs");r&&(t.latin=""===r.attr.getString("typeface")?[]:[r.attr.getString("typeface")]),n&&(t.ea=""===n.attr.getString("typeface")?[]:[n.attr.getString("typeface")]),i&&(t.cs=""===i.attr.getString("typeface")?[]:[i.attr.getString("typeface")]);var o=e.elementsWithName("a:font").filter((function(e){return["Hans","Hant","Jpan","Hang"].includes(e.attr.getString("script"))})).map((function(e){return e.attr.getString("typeface")}));return void 0!==t.ea?t.ea=t.ea.concat(o):t.ea=o,t}function a(e){return e.theme.childElement("a:theme","a:themeElements","a:fontScheme")}function s(e){var t=[];return void 0!==e.latin&&t.concat(e.latin),void 0!==e.ea&&t.concat(e.ea),void 0!==e.cs&&t.concat(e.cs),t}t.getSchemeClr=function(e,t){if(t.masterThemeColorMapping[e]){var r="a:"+t.masterThemeColorMapping[e];return(n=t.theme.childElementOptional("a:theme","a:themeElements","a:clrScheme",r,"a:srgbClr"))?n.attr.getString("val"):t.theme.childElement("a:theme","a:themeElements","a:clrScheme",r,"a:sysClr").attr.getString("lastClr")}var n;return r="a:"+e,(n=t.theme.childElementOptional("a:theme","a:themeElements","a:clrScheme",r,"a:srgbClr"))?n.attr.getString("val"):t.theme.childElement("a:theme","a:themeElements","a:clrScheme",r,"a:sysClr").attr.getString("lastClr")},t.getMajorFont=function(e){var t=a(e).childElementOptional("a:majorFont");return void 0===t?{}:o(t)},t.getMinorFont=function(e){var t=a(e).childElementOptional("a:minorFont");return void 0===t?{}:o(t)},t.parseAndLoadThemeFont=function(e,t){return"none"===e?[]:s(o(a(t).childElement("a:"+e+"Font"))).filter((function(e){return!e.startsWith("+")&&""!==e})).map((function(e){return i.loadFont(e,t.userFonts),e}))},t.getFontList=s,t.ALL_FILL_TYPE=["a:blipFill","a:gradFill","a:grpFill","a:noFill","a:pattFill","a:solidFill"],t.ALL_COLOR_TYPE=["a:hslClr","a:schemeClr","a:srgbClr","a:scrgbClr","a:sysClr","a:prstClr"],t.mergeShapeStyle=function(e,r){var i=r.theme.childElement("a:theme","a:themeElements","a:fmtScheme"),o=e.childElement("a:effectRef"),s=o.childElement(new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(t.ALL_COLOR_TYPE)))),c=o.attr.getNumber("idx"),u=i.childElement("a:effectStyleLst").elements[c-1],l=e.childElement("a:fillRef"),p=l.childElement(new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(t.ALL_COLOR_TYPE)))),h=l.attr.getNumber("idx"),d=i.childElement("a:fillStyleLst").elements[h-1],f=e.childElement("a:fontRef"),m=f.attr.getString("idx"),y=void 0;"none"!==m&&(y=a(r).childElement("a:"+m+"Font"));var A=e.childElement("a:lnRef"),g=A.childElement(new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(t.ALL_COLOR_TYPE)))),v=A.attr.getNumber("idx");return{effect:{xml:u,phClr:s},fill:{xml:d,phClr:p},font:{xml:y,fontRef:f},ln:{xml:i.childElement("a:lnStyleLst").elements[v-1],phClr:g}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"rate",{get:function(){return this._rate},enumerable:!0,configurable:!0}),i.prototype.caclulate=function(e){var t;return t=e<this.delay?"beforePlay":e<this.delay+this.duration?(e-this.delay)/this.duration:"hold"===this.fill?1:"end",this.timeFilter&&"number"==typeof t&&(t=this.timeFilter.filter(t)),this._rate=t,this},i);function i(e,t,r,n){this.delay=e,this.duration=t,this.timeFilter=r,this.fill=n}t.LinearRateCaculator=n;var o=(Object.defineProperty(a.prototype,"rate",{get:function(){return this._rate},enumerable:!0,configurable:!0}),a.prototype.caclulate=function(e){var t;return t=e<this.delay?"beforePlay":e<this.delay+this.duration?0:"hold"===this.fill?1:"end",this._rate=t,this},a);function a(e,t,r){this.delay=e,this.duration=t,this.fill=r}t.DiscreteRateCaculator=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=r(27),o=r(18),a=r(38),s=!1,c=n.ForwardMode.SingleForward;n.contextStack.addListener((function(e,t){switch(e){case n.ContextState.Appear:case n.ContextState.Reappear:s=t.proxyRuntime.runtime.isForcesOnIllusionLine(t.mode),c=t.forwardMode;break;case n.ContextState.Cleaned:s=!1,c=n.ForwardMode.SingleForward}})),t.isProxyNode=function(e){return e instanceof u},t.convertToProxy=function(e){return"object"!=typeof e||null===e?e:e instanceof u?e:e[i.ProxyKey]},t.unwrapProxy=function(e){return"object"!=typeof e||null===e?e:e instanceof u?e.target():e};var u=(Object.defineProperty(l.prototype,"didDispose",{get:function(){return this._didDispose},enumerable:!0,configurable:!0}),l.prototype.assertAccessible=function(){if(this._didDispose)throw new Error("akko wrapped object isn't accessible")},l.prototype.reportChanged=function(e){if(this.listeners)for(var t=0,r=this.listeners;t<r.length;t++)(0,r[t])(e)},l.prototype.getValue=function(e){return this.target()[e]},l.prototype.touchKey=function(e){var t=this.proxyRuntime.observerAdapter;t&&(this.observer||(this.observer=t.create(this.getDebugName())),void 0===e?this.observer.reportObservedIteration():this.observer.reportObservedKey(e))},l.prototype.dispose=function(){this._didDispose=!0,o.currentUpdatedSection().unbindDelegate(this),this._displayer&&(this.releaseDisplayer(this._displayer),delete this._displayer),delete this.observer,delete this.listeners},l.prototype.target=function(){return s?this.illuTarget:this.realTarget},l.prototype.sideTarget=function(){return c!==n.ForwardMode.DoubleForward||s?void 0:this.illuTarget},l.prototype.displayerTarget=function(){return this.illuTarget||this.realTarget},Object.defineProperty(l.prototype,"displayer",{get:function(){return this.proxyRuntime.callbacksWhenUpdate?(this.proxyRuntime.callbacksWhenUpdate&&!this._displayer&&(this._displayer=this.createDisplayer()),this._displayer):this.createDisplayer()},enumerable:!0,configurable:!0}),l.prototype.addListener=function(e){var t=this.listeners;-1===(t=t||(this.listeners=[])).indexOf(e)&&t.push(e)},l.prototype.removeListener=function(e){var t=this.listeners;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1),0===t.length&&delete this.listeners}},l.prototype.toString=function(){return this.target().toString()},l.prototype.toLocaleString=function(){return this.target().toLocaleString()},l);function l(e,t,r){this._didDispose=!1,this.proxyRuntime=e,this.identifier=t,s?this.illuTarget=a.carryObject(this,r):this.realTarget=a.carryObject(this,r)}t.ProxyNodeImplement=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(166))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(1),c=r(5),u=r(0),l=r(101),p=r(8),h=(i(d,a=s.Component),d.prototype.render=function(){var e=this.props.payload;if(!u.isAkkoWrappedObjectAccessible(e))return null;var t=e.isHighlightBy(this.props.context.observerId);if(!t&&void 0===e.selectedBy)return null;var r=void 0===e.selectedBy?p.BelongsTo.None:e.selectedBy===this.props.context.observerId?p.BelongsTo.Me:p.BelongsTo.Others,n=e.context.getMemberState(e.selectedBy).strokeColor,i=n[0],o=n[1],a=n[2];if(t||r!==p.BelongsTo.None){var l=this.props,h=l.size,d=h.width,f=h.height,m=l.margin,y={position:"absolute",top:0,left:0,width:d+m.left+m.right,height:f+m.top+m.bottom,borderColor:"rgb("+i+","+o+","+a+")"};return s.createElement(c.CNode,{kind:c.CNodeKind.HTML},s.createElement("div",{key:this.props.id,className:"highlight-box",style:y}))}return null},d=o([l.observer],d));function d(){return null!==a&&a.apply(this,arguments)||this}t.EditableComponent=h},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(229)),n(r(253)),n(r(254))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pow32=Math.pow(2,32),t.Pow16=Math.pow(2,16),t.UInt32Mask=t.Pow32-1,t.UInt16Mask=t.Pow16-1,t.UInt8Mask=255},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=(i(s,o=Error),s);function s(e){var t=o.call(this,e)||this;return t.name="FormatError",t}t.FormatError=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=r(275),o=r(25),a=r(282),s=r(3);function c(e){if("object"==typeof e&&null!==e){if(s.isProxyNode(e))return e;var t=e[s.ProxyKey];return s.isProxyNode(t)?t:void 0}}function u(e){return e instanceof o.AkkoObject?e.__proxy:e}t.findProxyNode=c,t.standardizeValue=u;var l=(p.prototype.updater=function(e){return e},p.prototype.getter=function(e,t){var r=c(e);return r?r.getValue(t):e[t]},p.prototype.caller=function(e,t,r,o){if("function"==typeof e){if(n.ClassReflectionName in e)return e[t].apply(e,r);if(a=i.findSystemClassProxyFunction(e,t))return a.apply(e,r);if("function"==typeof Function.prototype[t])return e[t].apply(e,r);throw new Error("can't call "+e.name+"."+t+", it's not supported")}var a=void 0,c=void 0;return o&&(a=o[t]),(a=s.isProxyNode(e)?(c=e.target(),a||e.getMethod(t)):(c=e,a||e[t])).apply(c,r)},p.prototype.setter=function(e,t,r){var n=c(e);return r=u(r),n?n.setValue(t,r):e[t]=r},p.prototype.prefix=function(e,t,r){var n=c(e);if(n)return n.prefix(t,r);e[t]+=r},p.prototype.postfix=function(e,t,r){var n=c(e);if(n)return n.postfix(t,r);var i=e[t];return e[t]+=r,i},p.prototype.remover=function(e,t){var r=c(e);if(r)return r.removeKey(t);delete e[t]},p.prototype.wrapper=function(e){return"object"!=typeof e||null===e?e:e[s.ProxyKey]||e},p.prototype.unwrapper=function(e){return s.isProxyNode(e)?e.target():e},p.prototype.jsxUnwrapper=function(e){return(new a.JsxUnwrapper).unwrap(e)},p);function p(){}t.CommonCoreFunctions=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27);t.carryObject=function(e,t){return Object.defineProperty(t,n.ProxyKey,{enumerable:!1,writable:!1,configurable:!0,value:e}),t}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(298)),n(r(299)),n(r(300)),n(r(301)),n(r(142)),n(r(302)),n(r(303))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),i.prototype.touch=function(){var e=this.getCurrentPhase(),t=this._phase;t!==e&&(this._phase=e,this.onPhaseChanged&&this.onPhaseChanged(e,t))},i);function i(e){this._phase=e.phase||e.getCurrentPhase(),this.getCurrentPhase=e.getCurrentPhase,this.onPhaseChanged=e.onPhaseChanged}t.PhaseNode=n},function(e,t){e.exports=r},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.creator,c=a.caller,u=a.getter,l=r(59),p=(i(h,o=a.baseClass()),h.testPoint=function(e,t,r,n,i,o){return e<=i&&i<=e+r&&t<=o&&o<=t+n},h.iterate=function(e,t,r,n,i){i(e,t),i(e+r,t),i(e+r,t+n),i(e,t+n)},h.allPoints=function(e,t,r,n){return s([s({x:e,y:t}),s({x:e+r,y:t}),s({x:e+r,y:t+n}),s({x:e,y:t+n})])},h.testRect=function(e,t,r,n,i,o,a,s){var p=c(this,"testSegment",[e,e+r,i,i+a]),h=c(this,"testSegment",[t,t+n,o,o+s]);return p===u(l.RectangleTestingResult,"Disjoint")||h===u(l.RectangleTestingResult,"Disjoint")?u(l.RectangleTestingResult,"Disjoint"):p===u(l.RectangleTestingResult,"Cross")||h===u(l.RectangleTestingResult,"Cross")?u(l.RectangleTestingResult,"Cross"):p===u(l.RectangleTestingResult,"IncludeRectangle")&&h===u(l.RectangleTestingResult,"IncludeRectangle")?u(l.RectangleTestingResult,"IncludeRectangle"):p===u(l.RectangleTestingResult,"IncludeByRectangle")&&h===u(l.RectangleTestingResult,"IncludeByRectangle")?u(l.RectangleTestingResult,"IncludeByRectangle"):u(l.RectangleTestingResult,"Cross")},h.testSegment=function(e,t,r,n){var i=r<e;if(i){var o=e,a=t;e=r,r=o,t=n,n=a}return u(l.RectangleTestingResult,t<r?"Disjoint":t<n?"Cross":i?"IncludeByRectangle":"IncludeRectangle")},h);function h(){return null!==o&&o.apply(this,arguments)||this}t.RectangleTester=p,a.declareClass({classId:8,clazz:p}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(169))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(0).__context("module"),c=s.creator,u=s.setter,l=s.getter,p=s.caller,h=s.jsxUnwrapper,d=r(0),f=r(14),m=(i(y,a=s.wrapSuperClass(f.Editable)),Object.defineProperty(y.prototype,"isTextEmpty",{get:function(){return""===l(l(this,"textareaBox"),"originalText")},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"selectable",{get:function(){return l(this,"editedBy")!==p(d,"getAuthorId",[])},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"hitTestingBoxMargin",{get:function(){return l(this,"textSize")/4},enumerable:!0,configurable:!0}),y.prototype.setTextareaBox=function(e){u(this,"textareaBox",e),u(this,"width",l(e,"width")*l(e,"scale")),u(this,"height",l(e,"height")*l(e,"scale"))},y.prototype.adjustToKeepUniformScale=function(){if(0!==l(l(this,"textareaBox"),"width")&&0!==l(l(this,"textareaBox"),"height")){var e=l(this,"width")/l(l(this,"textareaBox"),"width"),t=l(this,"height")/l(l(this,"textareaBox"),"height"),r=p(Math,"min",[e,t]),n=l(l(this,"textareaBox"),"width")*r,i=l(l(this,"textareaBox"),"height")*r;u(this,"originX",l(this,"originX")+(l(this,"width")-n)/2),u(this,"originY",l(this,"originY")+(l(this,"height")-i)/2),u(this,"width",n),u(this,"height",i)}},Object.defineProperty(y.prototype,"currentScale",{get:function(){if(0===l(l(this,"textareaBox"),"width")||0===l(l(this,"textareaBox"),"height"))return 1;var e=l(this,"width")/l(l(this,"textareaBox"),"width"),t=l(this,"height")/l(l(this,"textareaBox"),"height");return p(Math,"min",[e,t])},enumerable:!0,configurable:!0}),y.prototype.renderTagBoxes=function(){return l(this,"editedBy")===p(d,"getAuthorId",[])?p(this,"renderTagBoxesWhenEditedByMe",[]):void 0!==l(this,"editedBy")?p(this,"renderTagBoxesWhenEditedByOther",[]):p(this,"renderTagBoxes",[],a.prototype)},y.prototype.renderTagBoxesWhenEditedByMe=function(){var e=l(this,"hitTestingBoxMargin"),t=l(this,"currentScale"),r=c({margin:e,scale:t,color:l(p(l(this,"context"),"getMemberState",[]),"strokeColor"),textColor:l(this,"textColor"),textSize:l(this,"textSize"),originalText:l(l(this,"textareaBox"),"originalText")});return c({key:l(this,"key"),type:"myText",payload:r,left:l(this,"originX"),top:l(this,"originY"),right:l(this,"originX")+l(this,"width"),bottom:l(this,"originY")+l(this,"height")})},y.prototype.renderTagBoxesWhenEditedByOther=function(){var e=l(this,"hitTestingBoxMargin"),t=c({margin:e,editorId:l(this,"editedBy"),textSize:l(this,"textSize"),color:l(p(l(this,"context"),"getMemberState",[l(this,"editedBy")]),"strokeColor"),information:p(l(this,"context"),"getInformationWithMemberId",[l(this,"editedBy")])});return c({key:l(this,"key"),type:"otherText",payload:t,left:l(this,"originX"),top:l(this,"originY"),right:l(this,"originX")+l(this,"width"),bottom:l(this,"originY")+l(this,"height")})},y.prototype.renderSvgContent=function(){if(l(this,"editedBy")===p(d,"getAuthorId",[]))return null;var e=l(this,"currentScale"),t=l(this,"textSize")*e,r=l(this,"textColor"),n=l(r,0),i=l(r,1),o=l(r,2);return d.createElement("g",{key:h(l(this,"key")),x:h(0),y:h(0)},h(p(l(l(this,"textareaBox"),"textLines"),"map",[function(r,a){var s=l(r,"dx"),c=l(r,"dy"),u=l(r,"text"),p=l(r,"textLength");return d.createElement("text",{key:h(""+a),x:h(s*e),y:h(c*e),textLength:h(p*e),fill:h("rgb("+n+","+i+","+o+")"),fontSize:h(t),dominantBaseline:"central"},h(u))}])))},o([d.noEffects],y.prototype,"hitTestingBoxMargin",null),o([d.noEffects],y.prototype,"currentScale",null),y);function y(e,t,r){var n=a.call(this,e)||this;return n.originX=0,n.originY=0,n.width=0,n.height=0,n.textSize=16,n.textareaBox=c({scale:1,width:0,height:0,originalText:"",textLines:c([])}),u(n,"originX",t),u(n,"originY",r),u(n,"textColor",l(p(e,"getMemberState",[]),"strokeColor")),n}t.TextareaShape=m,s.declareClass({classId:24,clazz:m,superClass:f.Editable,memberDecorators:{hitTestingBoxMargin:[d.noEffects],currentScale:[d.noEffects]}}),s=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(191);var n=r(20);t.WhiteboardRender=n.WhiteboardRender;var i=r(103);t.createDynamicPpt=i.createDynamicPpt;var o=r(15);t.createLayoutDescriptions=o.createLayoutDescriptions,t.WhiteLayouts=o.WhiteLayouts;var a=r(491);t.WhiteScreenshotRender=a.WhiteScreenshotRender;var s=r(492);t.createSrc=s.createSrc,t.updateSrcBySetProps=s.updateSrcBySetProps,t.getProtocolWith=s.getProtocolWith,t.getPropsWith=s.getPropsWith,t.PluginsManager=s.PluginsManager},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);t.toPt=n.toPt,t.EmuToPt=n.EmuToPt,t.EmuToPx=n.EmuToPx,t.toNumber=n.toNumber;var i=r(197);t.Slide=i.Slide,t.sequenceIndexesKey=i.sequenceIndexesKey;var o=r(476);t.loadPPT=o.loadPPT;var a=r(66);t.mainSequenceEventSourceId=a.mainSequenceEventSourceId},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1).createContext(void 0);t.SlideContextProvider=n.Provider,t.SlideContextConsumer=n.Consumer},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.filter=function(e){var t=this,r=this.timeFilterNodes.slice(0,this.timeFilterNodes.length-1).map((function(e,r){return[t.timeFilterNodes[r],t.timeFilterNodes[r+1]]})).filter((function(t){var r=t[0],n=t[1];return r.timeInput<=e&&n.timeInput>=e}))[0],n=r[0],i=r[1];return(e-n.timeInput)/(i.timeInput-n.timeInput)*(i.timeOutput-n.timeOutput)+n.timeOutput},i);function i(e){this.timeFilterNodes=e}t.TimeFilter=n;var o=(a.prototype.resolve=function(e){return new n(this.standardizationTokenSplit(e).split(";").map((function(e){var t=e.split(","),r=t[0],n=t[1];return{timeInput:parseFloat(r),timeOutput:parseFloat(n)}})))},a.prototype.standardizationTokenSplit=function(e){return e.replace(/\s+/g,"")},a);function a(){}t.TimeFilterResolver=o},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.AkkoPrimitiveType||(t.AkkoPrimitiveType={}))[n.Never=0]="Never",n[n.Undefined=1]="Undefined",n[n.Null=2]="Null",n[n.String=3]="String",n[n.Integer32=4]="Integer32",n[n.Integer53=5]="Integer53",n[n.Float=6]="Float",n[n.Function=7]="Function",n[n.Object=8]="Object",n[n.Array=9]="Array",n[n.True=10]="True",n[n.False=11]="False",n[n.Buffer=12]="Buffer",(i=t.ObjectType||(t.ObjectType={}))[i.Array=0]="Array",i[i.DeducedObject=1]="DeducedObject",i[i.AssertedObject=2]="AssertedObject"},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(127)),n(r(249))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(35),i="0".charCodeAt(0),o="9".charCodeAt(0)+1,a="a".charCodeAt(0),s="f".charCodeAt(0)+1,c=(u.prototype.cleanUnmeaningZero=function(e,t){for(;e.length>t&&0===this.codeToInteger[e[e.length-1]];)e.pop()},u.prototype.pushInt53=function(e,t){var r=0|t,i=(t-r)/n.Pow32;this.pushUint32(e,r),this.pushUint32(e,i)},u.prototype.readInt53=function(e,t){var r=this.readInt32(e,t);return this.readInt32(e,t+8)*n.Pow32+r},u.prototype.pushUint32=function(e,t){var r=e.length;e[r]=this.integerToCode[15&t],e[r+1]=this.integerToCode[t>>4&15],e[r+2]=this.integerToCode[t>>8&15],e[r+3]=this.integerToCode[t>>12&15],e[r+4]=this.integerToCode[t>>16&15],e[r+5]=this.integerToCode[t>>20&15],e[r+6]=this.integerToCode[t>>24&15],e[r+7]=this.integerToCode[t>>28&15]},u.prototype.readUint32=function(e,t){var r=this.readInt32(e,t);return r<0&&(r+=n.Pow32),r},u.prototype.readInt32=function(e,t){for(var r=0,n=0;n<8;++n){var i=this.codeToInteger[e.charCodeAt(t+n)];if(void 0===i)return NaN;r|=i<<4*n}return r},u.prototype.parseCode=function(e){return this.codeToInteger[e]},u.prototype.toCode=function(e){return this.integerToCode[e]},u.prototype.increment=function(e,t){for(var r=t;;){if(e.length<=r){e[r]=i+1;break}var n=!0;switch(e[r]++,e[r]){case o:e[r]=a;break;case s:e[r]=i,r++,n=!1}if(n)break}},u.prototype.parseString=function(e){for(var t=new String(e),r=[],n=0;n<t.length;++n)r.push(t.charCodeAt(n));return r},u.prototype.stringify=function(e){return String.fromCharCode.apply(String,e)},u);function u(){for(var e=[],t=[],r=0;r<16;++r){var n=r.toString(16).charCodeAt(0);t[e[r]=n]=r}this.integerToCode=Object.freeze(e),this.codeToInteger=Object.freeze(t)}t.BigInteger=c,t.bigInteger=new c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=(i(s,o=Error),s);function s(e){var t=o.call(this,e)||this;return t.name="SerializerError",t}t.SerializerError=a;var c,u=(i(l,c=Error),l);function l(e){var t=c.call(this,e)||this;return t.name="DeserializerError",t}t.DeserializerError=u},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(265)),n(r(55)),n(r(266)),n(r(267))},function(e,t,r){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),t.isAkkoDecorator=function(e){return e instanceof n},t.createDecorator=function(e){function t(e,t,r){return r}return Object.setPrototypeOf(t,n.prototype),Object.defineProperty(t,"payload",{enumerable:!0,configurable:!1,writable:!1,value:e}),t}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),a=r(18),s=r(17),c=r(76),u=r(27),l=r(31),p=r(38);t.isAkkoObjectProxyNode=function(e){return e instanceof d};var h,d=(i(f,h=l.ProxyNodeImplement),f.prototype.getDebugName=function(){return this.struct.classReflection.name},f.prototype.createDisplayer=function(){return new this.struct.displayerNodeClass(this)},Object.defineProperty(f.prototype,"kind",{get:function(){return u.ProxyKind.AkkoObject},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"clazz",{get:function(){return this.struct.classReflection.clazz},enumerable:!0,configurable:!0}),f.prototype.updateDisplayer=function(e){},f.prototype.reportChanged=function(e){h.prototype.reportChanged.call(this,e);var t=this.observer;if(t)for(var r in e){var n=e[r],i=n.kind,o=n.value;t.reportChanged(r,o,i)}},f.prototype.converge=function(){var e=this.realTarget;if(e){for(var t={},r=0,n=this.struct.serializableValueProperties;r<n.length;r++){var i=n[r];i in e&&(t[i]=e[i])}Object.setPrototypeOf(t,this.struct.classReflection.clazz.prototype),this.replaceIlluTarget(t)}},f.prototype.replaceIlluTarget=function(e){var t=this.illuTarget||this.realTarget,r=p.carryObject(this,e);this.illuTarget=r;for(var n=a.currentUpdatedSection(),i=0,o=this.struct.serializableValueProperties;i<o.length;i++){var s=o[i],c=s in t,u=s in r;u&&!c?n.addProperty(this,s,r[s]):!u&&c?n.removeProperty(this,s):u&&c&&r[s]!==t[s]&&n.setProperty(this,s,r[s])}},f.prototype.getMethod=function(e){return this.target()[e]},f.prototype.touchKey=function(e){switch(this.struct.getPropertyReadableKind(e)){case c.PropertyReadableKind.ReadValue:case c.PropertyReadableKind.CanNotReadPrivateValue:h.prototype.touchKey.call(this,e)}},f.prototype.callOutside=function(e,t){var r,n,i=this;switch(this.assertAccessible(),this.struct.getMethodCallableKind(e)){case c.MethodCallableKind.NoEffects:var a=this.proxyRuntime.runtime,u=this.proxyRuntime.noEffectsIdGenerator,l={authorId:null===a.observerId?o.AdminObserverId:a.observerId,mode:s.CoreFunctionsMode.Outside,timestamp:Date.now(),identifierGenerator:u};r=a.runWithMagix(l,(function(){var r=i.target();return r[e].apply(r,t)}));break;case c.MethodCallableKind.Modifiable:if(!this.struct.classReflection.isRootClass)throw new Error("can only call modifiable methods of trigger object");r=this.proxyRuntime.onInvokedTriggerMethod(e,t);break;case c.MethodCallableKind.EventReceiver:throw new Error("can't invoke event receiver. you should call dispatch()");case c.MethodCallableKind.Private:throw new Error("can't invoke private method");default:(n=void 0)[e].apply(n,t)}return this.proxyRuntime.pullValue(r)},f.prototype.setValue=function(e,t){var r=this.target();if(this.struct.isValueProperty(e)){var n=r[e],i=e in r;r[e]=t,i?n!==t&&a.currentUpdatedSection().setProperty(this,e,t):a.currentUpdatedSection().addProperty(this,e,t);var o=this.sideTarget();return o&&(o[e]=t),t}return r[e]=t},f.prototype.postfix=function(e,t){var r=this.target();if(this.struct.isValueProperty(e)){var n=r[e],i=e in r,o=r[e]+=t;i?n!==o&&a.currentUpdatedSection().setProperty(this,e,o):a.currentUpdatedSection().addProperty(this,e,o);var s=this.sideTarget();return s&&(s[e]=o),o}return r[e]+=t},f.prototype.prefix=function(e,t){var r=this.target(),n=r[e];if(this.struct.isValueProperty(e)){var i=e in r,o=r[e]+=t;i?n!==o&&a.currentUpdatedSection().setProperty(this,e,o):a.currentUpdatedSection().addProperty(this,e,o);var s=this.sideTarget();s&&(s[e]=o)}else r[e]+=t;return n},f.prototype.removeKey=function(e){if(this.struct.isValueProperty(e)){var t=this.target(),r=e in t;if(r){delete t[e],a.currentUpdatedSection().removeProperty(this,e);var n=this.sideTarget();n&&delete n[e]}return r}return!1},f.prototype.releaseDisplayer=function(e){},f);function f(e,t,r,n){var i=h.call(this,e,t,r)||this;return i.struct=n,i}t.AkkoObjectProxyNodeImplement=d},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(306);n(r(82)),n(r(310)),n(r(58)),t.playerBufferFactory=new i.PlayerBufferFactory},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(2),a=r(144),s=r(40),c=r(82),u=r(308);(i=t.PlayerBufferMode||(t.PlayerBufferMode={})).Realtime="realtime",i.Reconstruction="reconstruction";var l=(Object.defineProperty(p.prototype,"didCompletePushFrames",{get:function(){return this._didCompletePushFrames},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"newestPushFrame",{get:function(){return this.framesBuffer[0]},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"nextFrame",{get:function(){return this.framesBuffer[this.framesBuffer.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"framesBufferLength",{get:function(){return this.framesBuffer.length},enumerable:!0,configurable:!0}),p.prototype.takeNextFrame=function(){return this.framesBuffer.pop()},Object.defineProperty(p.prototype,"currentBufferInterval",{get:function(){return 0<this.framesBufferLength?this.newestPushFrame.timestamp-this.nextFrame.timestamp:0},enumerable:!0,configurable:!0}),p.prototype.completePlaying=function(){this.didCompletePlaying=!0,this.phaseNode.touch(),this.tickLimiter.cancel()},Object.defineProperty(p.prototype,"frameInterval",{get:function(){return this.tickLimiter.limitDuration},set:function(e){this.tickLimiter.limitDuration=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"phase",{get:function(){return this.phaseNode.phase},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"frameDelay",{get:function(){return this.framesDelayer?this.framesDelayer.frameDelay:0},set:function(e){this.framesDelayer?0===e?(this.framesDelayer.release(),this.framesDelayer=null):this.framesDelayer.frameDelay=e:this.framesDelayer=this.createFrameDelayer(e)},enumerable:!0,configurable:!0}),p.prototype.createFrameDelayer=function(e){return void 0===e&&(e=0),0!==e?new u.FramesDelayer(e,this.handlePushedFrames):null},p.prototype.shouldTickNextFrame=function(){return!(this.didCompletePlaying||!this.willTickEveryFrames&&!(this.isPlaying&&0<this.framesBuffer.length))},p.prototype.pushFrames=function(e){this.framesDelayer?this.framesDelayer.pushFrames(e):this.handlePushedFrames(e)},p.prototype.play=function(){this.isPlaying||this.phaseNode.phase===c.PlayerPhase.Ended||(this.isPlaying=!0,0<this.framesBuffer.length&&this.tickLimiter.invoke(),this.phaseNode.touch())},p.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,this.tickLimiter.cancel(),this.phaseNode.touch())},p.prototype.completePushFrames=function(){this._didCompletePushFrames=!0,this.phaseNode.touch()},p);function p(e){var t=this;this.framesBuffer=[],this.isPlaying=!1,this._didCompletePushFrames=!1,this.didCompletePlaying=!1,this.handleTickEvent=function(){try{t.onTick()}finally{t.shouldTickNextFrame()&&t.tickLimiter.invoke(),t.phaseNode.touch()}},this.handlePushedFrames=function(e){for(var r=0,n=e;r<n.length;r++){var i=n[r];t.framesBuffer.unshift(i)}0<e.length&&t.isPlaying&&t.tickLimiter.invoke(),t.phaseNode.touch()},this.currentPhase=function(){return t.didCompletePlaying?c.PlayerPhase.Ended:t._didCompletePushFrames||0<t.framesBuffer.length?t.isPlaying?c.PlayerPhase.Playing:c.PlayerPhase.Pausing:t.isPlaying?c.PlayerPhase.Waiting:c.PlayerPhase.PausingAndWaiting},this.onPhaseChanged=function(e,r){r===c.PlayerPhase.Playing&&e!==c.PlayerPhase.Playing?t.onPlayingStop():r!==c.PlayerPhase.Playing&&e===c.PlayerPhase.Playing&&t.onPlayingContinue(),t.callbacks.onPhaseChanged&&t.callbacks.onPhaseChanged(e)},this.logger=e.logger,this.mode=e.mode,this.framesDelayer=this.createFrameDelayer(e.frameDelay),this.callbacks=Object.freeze(n({},e.callbacks));var r=e.enableAnimationFrame,i=e.frameInterval,u=void 0===i?17:i,l=e.remainLowTimeInterval,p=void 0===l?12e3:l;if(r){var h=new a.AnimationFrameTicker(this.handleTickEvent);this.tickLimiter=new o.InvokeFrequencyLimiter(u,(function(){return h.invoke()}))}else this.tickLimiter=new o.InvokeFrequencyLimiter(u,this.handleTickEvent);this.remainLowTimeInterval=p,this.phaseNode=new s.PhaseNode({getCurrentPhase:this.currentPhase,onPhaseChanged:this.onPhaseChanged})}t.AbstractPlayerBuffer=l},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.RectangleTestingResult||(t.RectangleTestingResult={}))[n.Disjoint=0]="Disjoint",n[n.Cross=1]="Cross",n[n.IncludeRectangle=2]="IncludeRectangle",n[n.IncludeByRectangle=3]="IncludeByRectangle"},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0).__context("module"),o=i.caller,a=i.getter,s=i.creator,c=i.setter,u=i.unwrapper;t.linearDistance=function(e,t){return o(Math,"abs",[a(e,"x")-a(t,"x")])+o(Math,"abs",[a(e,"y")-a(t,"y")])},t.distance=function(e,t){var r=a(e,"x")-a(t,"x"),n=a(e,"y")-a(t,"y");return o(Math,"sqrt",[r*r+n*n])},t.verticalVector=function(e){var t=a(e,"x"),r=a(e,"y");return s({x:-r,y:t})},t.dotProduct=function(e,t){return a(e,"x")*a(t,"x")+a(e,"y")*a(t,"y")},t.isZero=function(e){return o(Math,"abs",[e])<1e-6},t.unitVector=function(e){var t=o(Math,"sqrt",[a(e,"x")*a(e,"x")+a(e,"y")*a(e,"y")]);return c(e,"x",a(e,"x")/t),c(e,"y",a(e,"y")/t),e},t.plus=function(e,t){return s({x:a(e,"x")+a(t,"x"),y:a(e,"y")+a(t,"y")})},t.multiply=function(e,t){return s({x:e*a(t,"x"),y:e*a(t,"y")})},t.triangleArea=function(e,t,r){var n=0;return n+=(a(t,"y")+a(e,"y"))*(a(t,"x")-a(e,"x")),n+=(a(r,"y")+a(t,"y"))*(a(r,"x")-a(t,"x")),n+=(a(e,"y")+a(r,"y"))*(a(e,"x")-a(r,"x")),o(Math,"abs",[n])/2},t.projectionPoint=function(e,t,r){return(a(r,"x")-a(e,"x"))*a(t,"x")+(a(r,"y")-a(e,"y"))*a(t,"y")},t.pointByProject=function(e,t,r){var i=s(n({},u(t)));return c(i,"x",a(i,"x")*r),c(i,"y",a(i,"y")*r),c(i,"x",a(i,"x")+a(e,"x")),c(i,"y",a(i,"y")+a(e,"y")),i},t.meansOverlap=function(e){var t=a(e,"x"),r=a(e,"y");return o(Number,"isNaN",[t])&&o(Number,"isNaN",[r])},i=null},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(171)),(n=t.DeviceType||(t.DeviceType={})).Desktop="desktop",n.Touch="touch",n.Surface="surface",(i=t.ViewMode||(t.ViewMode={})).Freedom="freedom",i.Follower="follower",i.Broadcaster="broadcaster"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(0).__context("module"),c=s.setter,u=s.wrapper,l=s.getter,p=s.caller,h=s.creator,d=s.unwrapper,f=s.jsxUnwrapper,m=r(0),y=r(14),A=r(22),g=r(42),v=r(173),b=r(32),P=(i(w,a=s.wrapSuperClass(v.ApplianceComponentContainer)),w.prototype.editableWithHitIdentifies=function(e){var t=l(e,0);return void 0===t?void 0:p(this,"findComponentFromTop",[function(e){return t===l(e,"identifier")}])},w.prototype.editablesWithHitIdentifies=function(e){for(var t=h([]),r=function(e){var r=p(n,"findComponentFromTop",[function(t){return e===l(t,"identifier")}]);r&&p(t,"push",[r])},n=this,i=0,o=d(e);i<o.length;i++)r(o[i]);return t},Object.defineProperty(w.prototype,"componentsCount",{get:function(){return l(l(this,"components"),"length")},enumerable:!0,configurable:!0}),w.prototype.shellRectangle=function(){if(0===l(l(this,"components"),"length"))return h({originX:0,originY:0,width:0,height:0});for(var e=l(Number,"MAX_SAFE_INTEGER"),t=l(Number,"MAX_SAFE_INTEGER"),r=l(Number,"MIN_SAFE_INTEGER"),n=l(Number,"MIN_SAFE_INTEGER"),i=0,o=d(l(this,"components"));i<o.length;i++){var a=o[i],s=l(a,"originX"),c=l(a,"originY"),u=l(a,"width"),f=l(a,"height"),m=d(a)instanceof y.Editable?l(a,"hitTestingBoxMargin"):0;e=p(Math,"min",[e,s-m]),t=p(Math,"min",[t,c-m]),r=p(Math,"max",[r,s+u+m]),n=p(Math,"max",[n,c+f+m])}return h({originX:e,originY:t,width:r-e,height:n-t})},w.prototype.renderTagBoxes=function(){for(var e=h([]),t=0,r=d(l(this,"components"));t<r.length;t++){var n=r[t],i=p(n,"renderTagBoxes",[]);i&&p(e,"push",[i])}return e},w.prototype.renderSvg=function(e){for(var t=h([]),r=0,n=d(l(this,"components"));r<n.length;r++){var i=n[r];if(p(w,"isComponentVisibleInViewRectangle",[i,e])){var o=p(i,"renderSvg",[]);o&&(p(w,"isSvgElementLackOfKey",[o])&&p(console,"warn",["lack string key for component "+(i&&l(l(i,"constructor"),"name"))]),p(t,"push",[o]))}}return t},w.isComponentVisibleInViewRectangle=function(e,t){return!t||l(A.RectangleTestingResult,"Disjoint")!==p(g.RectangleTester,"testRect",[l(t,"originX"),l(t,"originY"),l(t,"width"),l(t,"height"),l(e,"originX"),l(e,"originY"),l(e,"width"),l(e,"height")])},w.isSvgElementLackOfKey=function(e){return"object"==typeof e&&null!==e&&!(d(e)instanceof Array)&&"string"!=typeof l(e,"key")},w);function w(e,t){var r=a.call(this)||this;if(c(r,"name",e),t){var n=u(new x(l(t,"src"),l(t,"width"),l(t,"height")));p(r,"addComponentAt",[n,0]),c(r,"ppt",t)}return r}t.SceneNode=P;var S,x=(i(C,S=s.wrapSuperClass(b.ApplianceComponent)),Object.defineProperty(C.prototype,"hitTestingBoxMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"originX",{get:function(){return-l(this,"width")/2},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"originY",{get:function(){return-l(this,"height")/2},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"src",{get:function(){return l(this,"_src")},enumerable:!0,configurable:!0}),C.prototype.renderSvg=function(){return m.createElement("image",{key:f(l(this,"key")),xlinkHref:f(p(p(m,"getResource",[]),"convertIdToUrl",[l(this,"_src")])),x:f(l(this,"originX")),y:f(l(this,"originY")),width:f(l(this,"width")),height:f(l(this,"height"))})},o([m.noEffects],C.prototype,"hitTestingBoxMargin",null),o([m.noEffects],C.prototype,"originX",null),o([m.noEffects],C.prototype,"originY",null),o([m.noEffects],C.prototype,"src",null),C);function C(e,t,r){var n=S.call(this)||this;return c(n,"_src",e),c(n,"width",t),c(n,"height",r),n}t.BackgroundImage=x,s.declareClass({classId:30,clazz:P,superClass:v.ApplianceComponentContainer}),s.declareClass({classId:29,clazz:x,superClass:b.ApplianceComponent,memberDecorators:{hitTestingBoxMargin:[m.noEffects],originX:[m.noEffects],originY:[m.noEffects],src:[m.noEffects]}}),s=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.dispatch=function(e){for(var t=0,r=this.listeners;t<r.length;t++)(0,r[t])(e)},i.prototype.addListener=function(e){-1===this.listeners.indexOf(e)&&this.listeners.push(e)},i.prototype.removeListener=function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},i.prototype.removeAllListeners=function(){this.listeners.splice(0)},i);function i(){this.listeners=[]}t.EventDispatcher=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(391))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66);t.createSlideAnimations=n.createSlideAnimations;var i=r(204);t.AnimationProvider=i.AnimationProvider;var o=r(458);t.ShapeAnimation=o.ShapeAnimation,t.TextAnimation=o.TextAnimation},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(105),i=r(432),o=r(67),a=r(433),s=r(202),c=r(67);t.mainSequenceEventSourceId=c.mainSequenceEventSourceId;var u=r(202);t.AnimationsCombiner=u.AnimationsCombiner,t.createSlideAnimations=function(e,t){var r=new i.AnimationsCollector(e).collect(),c=new o.SequenceParser(r).parse(),u=a.decomposeSlideAnimations(r,t),l=function(e,t,r){var i={};for(var o in e){var a=e[o];i[o]=new n.AnimationManager({id:o,animes:a,sequences:t,mergerConstructor:n.ShapeAnimeMerger,presetStyle:r[o]})}return i}(new s.AnimationsCombiner(u,c,t).combine(),c,a.getPresetShapeStyle(u,c,t)),p={};return c.forEach((function(e){var t=e.key;p[t]=e.value.stepCount})),Object.freeze({animationManagers:Object.freeze(l),sequences:c,loopAnimationBeginAt:void 0,sequenceAnimesCounts:p})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(105),i=r(106);t.mainSequenceEventSourceId="-1";var o=(a.prototype.parse=function(){if(0===this.animations.length)return new i.LinkedMap;this.splitIntoSequenceAnimations();var e=this.countSequencesDurationList(),t=this.checkSequenceAutoPlayFirstSequence(),r=new i.LinkedMap;return this.sequenceAnimations.forEach((function(i){var o=i.key,a=new n.Sequence({durationList:e[o],autoPlayFirstSequence:t[o]});r.put(i.key,a)})),r},a.prototype.splitIntoSequenceAnimations=function(){for(var e=0,r=this.animations;e<r.length;e++){var n=r[e],i=void 0;"mainSeq"===n.sequenceType?(i=t.mainSequenceEventSourceId,void 0===this.sequenceAnimations.get(i)&&this.sequenceAnimations.insertToHeader(i,[])):(i=n.eventSourceShapeId,void 0===this.sequenceAnimations.get(i)&&this.sequenceAnimations.put(i,[]));var o=this.sequenceAnimations.get(i)[n.sequenceIndex];void 0===o&&(o=this.sequenceAnimations.get(i)[n.sequenceIndex]=[]),o.push(n)}},a.prototype.countSequencesDurationList=function(){var e=this,t={};return this.sequenceAnimations.forEach((function(r){t[r.key]=e.countDurationList(r.value)})),t},a.prototype.countDurationList=function(e){for(var t=[],r=0,n=e;r<n.length;r++){for(var i=0,o=0,a=n[r];o<a.length;o++){var s=a[o],c=void 0;c="indefinite"===s.repeatCount||"none"===s.repeatCount?s.duration:s.duration*s.repeatCount,!0===s.autoRev&&(c*=2);var u=s.delay+c;i<u&&(i=u)}t.push(i)}return t},a.prototype.checkSequenceAutoPlayFirstSequence=function(){var e=this,r={};return this.sequenceAnimations.forEach((function(n){n.key===t.mainSequenceEventSourceId?r[n.key]=e.checkAutoPlayFirstSequence(n.value):r[n.key]=!1})),r},a.prototype.checkAutoPlayFirstSequence=function(e){var t=e[0];return!(!t||"clickEffect"===t[0].nodeType)},a);function a(e){this.animations=e,this.sequenceAnimations=new i.LinkedMap}t.SequenceParser=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(209);t.FormulaRegistry=n.FormulaRegistry,t.FormulaEval=n.FormulaEval;var i=r(470);t.LumiaFactory=i.LumiaFactory,t.LumiaContext=i.LumiaContext,t.getPresetShapeDefinition=i.getPresetShapeDefinition;var o=r(471);t.Lumia=o.Lumia},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.displayerContext=n.createContext(void 0),t.roomContext=n.createContext(void 0),t.playerContext=n.createContext(void 0),t.createWrappedComponent=function(e,t){var r=e.Provider;return function(e){return n.createElement(r,{value:t},e.children)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"limitDuration",{get:function(){return this._limitDuration},set:function(e){if(this._limitDuration!==e){if(this._limitDuration=e,-1!==this.timer){clearTimeout(this.timer);var t=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,t)}this.invoke()}},enumerable:!0,configurable:!0}),i.prototype.invoke=function(){if(this.isFreezed)this.shouldInvokeAfterFreeze=!0;else if(-1===this.timer){var e=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,e)}},i.prototype.nextInvokeTimeDuration=function(){var e=(new Date).getTime(),t=this.latestInvokeTimestamp+this.limitDuration-e;return Math.max(0,t)},i.prototype.invokeWhenTimeout=function(){this.timer=-1,this.latestInvokeTimestamp=(new Date).getTime(),this.invoker()},i.prototype.cancel=function(){this.isFreezed?this.shouldInvokeAfterFreeze=!1:-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1)},i.prototype.freeze=function(){this.isFreezed||(-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1,this.shouldInvokeAfterFreeze=!0),this.isFreezed=!0)},i.prototype.unfreeze=function(){this.isFreezed&&(this.isFreezed=!1,this.shouldInvokeAfterFreeze&&(this.shouldInvokeAfterFreeze=!1,this.invoke()))},i);function i(e,t){this.isFreezed=!1,this.shouldInvokeAfterFreeze=!1,this.latestInvokeTimestamp=0,this.timer=-1,this._limitDuration=e,this.invoker=t,this.invokeWhenTimeout=this.invokeWhenTimeout.bind(this)}t.InvokeFrequencyLimiter=n},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(73);!function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(120));var i=r(73);t.TypeCreator=i.TypeCreator;var o=r(237);t.replaceTypeIds=o.replaceTypeIds;var a=new n.TypeCreator;t.getSingletonType=a.getSingletonType.bind(a),t.getFunctionType=a.getFunctionType.bind(a),t.getObjectType=a.getObjectType.bind(a),t.getCompoundType=a.getCompoundType.bind(a),t.getGenericType=a.getGenericType.bind(a),t.getGeneratorType=a.getGeneratorType.bind(a),t.getReferenceType=a.getReferenceType.bind(a),t.getGlobalReferenceType=a.getGlobalReferenceType.bind(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(120),i=(o.createSingletonMap=function(){for(var e={},t=0,r=[n.TypeEnum.Any,n.TypeEnum.Never,n.TypeEnum.Undefined,n.TypeEnum.Null,n.TypeEnum.String,n.TypeEnum.Number,n.TypeEnum.Boolean];t<r.length;t++){var i=r[t];e[i]={typeEnum:i}}return Object.freeze(e)},o.prototype.getSingletonType=function(e){return this.singletonMap[e]},o.prototype.getFunctionType=function(){return{typeEnum:n.TypeEnum.Function}},o.prototype.getObjectType=function(e){var t=void 0===e?{}:e,r=t.key,i=t.index,o=t.properties;return{typeEnum:n.TypeEnum.Object,key:r||this.getSingletonType(n.TypeEnum.Undefined),index:i||this.getSingletonType(n.TypeEnum.Undefined),properties:o||{}}},o.prototype.getCompoundType=function(e,t){return void 0===t&&(t=[]),{typeEnum:e,children:t}},o.prototype.getGenericType=function(e){return{typeEnum:n.TypeEnum.Generic,index:e}},o.prototype.getGeneratorType=function(e){var t=e.template,r=e.params;return{typeEnum:n.TypeEnum.Generator,template:t,params:r||[]}},o.prototype.getReferenceType=function(e){return{typeEnum:n.TypeEnum.Reference,name:e}},o.prototype.getGlobalReferenceType=function(e,t){return{typeEnum:n.TypeEnum.GlobalReference,path:e,name:t}},o);function o(){this.singletonMap=o.createSingletonMap()}t.TypeCreator=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="__identifier",i=(o.prototype.createObject=function(e,t){var r=t?[]:{};return Object.defineProperty(r,n,{enumerable:!1,configurable:!0,value:e}),r},o.prototype.findIdentifier=function(e){return e[n]},o.prototype.isArray=function(e){return e.constructor===Array},o.prototype.length=function(e){return e.length},o.prototype.keys=function(e){return Object.keys(e)},o.prototype.hasKey=function(e,t){return t in e},o.prototype.getValue=function(e,t){return e[t]},o.prototype.setValue=function(e,t,r){e[t]=r},o);function o(e){void 0===e&&(e=function(){}),this.decorateObject=e}t.DefaultObjectAdapter=i},function(e,t,r){"use strict";var n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),(i=n=t.ActionFrameType||(t.ActionFrameType={}))[i.Invoker=0]="Invoker",i[i.Event=1]="Event",i[i.Ack=2]="Ack",i[i.Enter=3]="Enter",i[i.Leave=4]="Leave",t.isInvokerFrame=function(e){return e.type===n.Invoker},t.isEventFrame=function(e){return e.type===n.Event},t.isEnterFrame=function(e){return e.type===n.Enter},t.isLeaveFrame=function(e){return e.type===n.Leave},(o=t.EventScope||(t.EventScope={}))[o.System=0]="System",o[o.App=1]="App",o[o.Custom=2]="Custom",o[o.Magix=3]="Magix"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s,c,u=r(4),l=r(13),p=r(54),h=r(21),d=r(17);(a=o=t.PropertyReadableKind||(t.PropertyReadableKind={}))[a.ReadValue=0]="ReadValue",a[a.ReadByGetter=1]="ReadByGetter",a[a.CanNotReadGetter=2]="CanNotReadGetter",a[a.CanNotReadPrivateValue=3]="CanNotReadPrivateValue",a[a.CanNotReadPrivateGetter=4]="CanNotReadPrivateGetter",(c=s=t.MethodCallableKind||(t.MethodCallableKind={}))[c.NoEffects=0]="NoEffects",c[c.Modifiable=1]="Modifiable",c[c.Private=2]="Private",c[c.EventReceiver=3]="EventReceiver";var f=(m.prototype.isValueProperty=function(e){return e in this.valuePropertiesSet},m.prototype.getPropertyReadableKind=function(e){return this.propertyKinds[e]},m.prototype.getMethodCallableKind=function(e){return this.methodKinds[e]},m.prototype.getValueOutsideFromProxyNode=function(e,t){switch(this.propertyKinds[t]){case o.ReadValue:case o.ReadByGetter:return e.proxyRuntime.pullValue(this.getValueFromProxyNode(e,t));case o.CanNotReadGetter:throw new Error("can't read property "+JSON.stringify(t)+" unless it has @noEffects");case o.CanNotReadPrivateValue:case o.CanNotReadPrivateGetter:throw new Error("can't read private property "+JSON.stringify(t));default:return}},m.prototype.getValueFromProxyNode=function(e,t){switch(e.assertAccessible(),this.propertyKinds[t]){case o.ReadValue:case o.CanNotReadPrivateValue:var r=e.displayerTarget()[t];return e.touchKey(t),r;case o.ReadByGetter:var n=e.proxyRuntime.runtime,i=e.proxyRuntime.noEffectsIdGenerator,a={authorId:null===n.observerId?u.AdminObserverId:n.observerId,mode:d.CoreFunctionsMode.Outside,timestamp:Date.now(),identifierGenerator:i};return n.runWithMagix(a,(function(){return e.target()[t]}));default:return}},m.prototype.createAkkoDisplayerNodeClass=function(e){var t,r=(t=h.DisplayerNodeImplement,i(n,t),n);function n(){return null!==t&&t.apply(this,arguments)||this}function o(e){Object.defineProperty(r.prototype,e,{enumerable:!1,configurable:!1,get:function(){var t=this.__proxy,r=t.struct;return t.assertAccessible(),r.getValueOutsideFromProxyNode(t,e)}})}for(var a in e.properties)o(a);function s(e){r.prototype[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.__proxy.callOutside(e,t)}}for(var c in e.methods)s(c);return r},m.prototype.createPropertyReadableKinds=function(e){var t={};for(var r in e.properties){var n=e.properties[r];n.isPublic?n.mode===l.ClassReflectionPropertyMode.Value?t[r]=o.ReadValue:n.decorators.some((function(e){return e===p.noEffects}))?t[r]=o.ReadByGetter:t[r]=o.CanNotReadGetter:n.mode===l.ClassReflectionPropertyMode.Value?t[r]=o.CanNotReadPrivateValue:t[r]=o.CanNotReadPrivateGetter}return Object.freeze(t)},m.prototype.createMethodCallableKinds=function(e){var t={};for(var r in e.methods){var n=e.methods[r];n.isPublic?n.decorators.some((function(e){return p.isAkkoDecorator(e)&&p.isEventPayload(e.payload)}))?t[r]=s.EventReceiver:n.decorators.some((function(e){return e===p.noEffects}))?t[r]=s.NoEffects:t[r]=s.Modifiable:t[r]=s.Private}return Object.freeze(t)},m);function m(e){this.valuePropertiesSet={},this.classReflection=e;var t=[],r=[],n=[],i={};for(var o in e.properties){var a=e.properties[o],s=a.mode===l.ClassReflectionPropertyMode.Value,c=a.decorators.some((function(e){return e===p.noEffects})),u=a.decorators.some((function(e){return e===p.transient}));s&&(i[o]=!0,u?t.push(o):r.push(o)),a.isPublic&&(s||c)&&n.push(o)}this.transientValueProperties=Object.freeze(t),this.serializableValueProperties=Object.freeze(r),this.copyableProperties=Object.freeze(n),this.displayerNodeClass=this.createAkkoDisplayerNodeClass(e),this.valuePropertiesSet=Object.freeze(i),this.propertyKinds=this.createPropertyReadableKinds(e),this.methodKinds=this.createMethodCallableKinds(e)}t.AkkoObjectStruct=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(271);t.CoreFunctionsSwitcher=n.CoreFunctionsSwitcher,t.CoreFunctionsMode=n.CoreFunctionsMode;var i=r(287);t.createBranchRuntime=i.createBranchRuntime},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),i=r(9),o=r(3),a=void 0;function s(e,t,r){return r.constructor===Object?e.createFlatObjectProxy(t,r):e.createArrayProxy(t,r)}t.createProxyNode=function(e,t,r){return a?a(t,r):s(e,t,r)},i.contextStack.addListener((function(e,t){switch(e){case i.ContextState.Appear:case i.ContextState.Reappear:a=function(e){var t=e.proxyRuntime,r=e.mode,a=e.forwardMode,c=e.frameSection;if(c)switch(r){case n.CoreFunctionsMode.Illusion:return function(e,r){var n=s(t,e,r);return c.addCreatedObject(n),n};case n.CoreFunctionsMode.IllusionRebuild:return function(e,r){var n=c.illusionTakeCreatedObject(e,r);return n?n.replaceIlluTarget(r):n=s(t,e,r),c.addCreatedObject(n),n};case n.CoreFunctionsMode.RealAck:return function(e,r){var n=c.realTakeCreatedObject(e,r);return n?n.realTarget=o.carryObject(n,r):(n=s(t,e,r)).converge(),n}}return r===n.CoreFunctionsMode.Real&&a===i.ForwardMode.DoubleForward?function(e,r){var n=s(t,e,r);return n.converge(),n}:function(e,r){return s(t,e,r)}}({proxyRuntime:t.proxyRuntime,mode:t.mode,forwardMode:t.forwardMode,frameSection:t.frameSection});break;case i.ContextState.Cleaned:a=void 0}}))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(18),s=r(21),c=r(56),u=r(27),l=r(31),p=r(38);t.isFlatObjectProxyNode=function(e){return e instanceof d};var h,d=(i(f,h=l.ProxyNodeImplement),f.prototype.getDebugName=function(){return"Object"},f.prototype.createDisplayer=function(){var e=new s.DisplayerNodeImplement(this);for(var t in this.displayerTarget())s.addDisplayerKey(e,t);return e},f.prototype.updateDisplayer=function(e){var t=this._displayer;if(t)for(var r in e)switch(e[r].kind){case a.UpdateEventKind.Inserted:s.addDisplayerKey(t,r);break;case a.UpdateEventKind.Removed:s.removeDisplayerKey(t,r)}},f.prototype.reportChanged=function(e){h.prototype.reportChanged.call(this,e);var t=this.observer;if(t)for(var r in e){var n=e[r],i=n.kind,o=n.value;t.reportChanged(r,o,i)}},f.prototype.covertToAkkoObjectProxyNode=function(e){var t=this.realTarget,r=this.illuTarget;return this.struct=this.proxyRuntime.getAkkoObjectStruct(e),this._displayer=void 0,Object.setPrototypeOf(this,c.AkkoObjectProxyNodeImplement.prototype),Object.setPrototypeOf(t,e.clazz.prototype),r&&Object.setPrototypeOf(r,e.clazz.prototype),this},Object.defineProperty(f.prototype,"kind",{get:function(){return u.ProxyKind.FlatObject},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"clazz",{get:function(){return Object},enumerable:!0,configurable:!0}),f.prototype.converge=function(){this.realTarget&&this.replaceIlluTarget(o({},this.realTarget))},f.prototype.replaceIlluTarget=function(e){var t=this.illuTarget||this.realTarget,r=p.carryObject(this,e);this.illuTarget=r;var n=a.currentUpdatedSection();for(var i in r){var o=r[i];i in t?t[i]!==o&&n.setProperty(this,i,o):n.addProperty(this,i,o)}for(var i in t)i in r||n.removeProperty(this,i)},f.prototype.getMethod=function(e){return this.target()[e]},f.prototype.setValue=function(e,t){var r=this.target(),n=this.sideTarget(),i=r[e],o=e in r;return r[e]=t,o?i!==t&&a.currentUpdatedSection().setProperty(this,e,t):a.currentUpdatedSection().addProperty(this,e,t),n&&(n[e]=t),t},f.prototype.prefix=function(e,t){var r=this.target(),n=this.sideTarget(),i=r[e],o=e in r,s=r[e]+=t;return o?i!==s&&a.currentUpdatedSection().setProperty(this,e,s):a.currentUpdatedSection().addProperty(this,e,s),n&&(n[e]=s),s},f.prototype.postfix=function(e,t){var r=this.target(),n=this.sideTarget(),i=r[e],o=e in r,s=r[e]+=t;return o?i!==s&&a.currentUpdatedSection().setProperty(this,e,s):a.currentUpdatedSection().addProperty(this,e,s),n&&(n[e]=s),i},f.prototype.removeKey=function(e){var t=this.target(),r=e in t;if(r){delete t[e];var n=this.sideTarget();a.currentUpdatedSection().removeProperty(this,e),n&&delete n[e]}return r},f.prototype.releaseDisplayer=function(e){},f);function f(e,t,r){return h.call(this,e,t,r)||this}t.FlatObjectProxyNodeImplement=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(18),a=r(9),s=r(293),c=r(27),u=r(31),l=r(38),p=r(78),h=r(136);t.isArrayProxyNode=function(e){return e instanceof f};var d,f=(i(m,d=u.ProxyNodeImplement),m.prototype.getDebugName=function(){return"Array"},m.prototype.createDisplayer=function(){return new s.ArrayDisplayerNode(this)},m.createArrayValidMethods=function(){var e=void 0,t=void 0,r=void 0;a.contextStack.addListener((function(n,i){switch(n){case a.ContextState.Appear:case a.ContextState.Reappear:r=i.tools?(e=i.proxyRuntime,t=i.tools.idGenerator,i.coreFunctions.updater):t=e=void 0;break;case a.ContextState.Cleaned:r=t=e=void 0}}));for(var n={},i=function(i,a,s,u,l,d){var f=Array.prototype[i],m=s||u;n[i]=function(){for(var n=[],y=0;y<arguments.length;y++)n[y]=arguments[y];var A=this,g=A.length,v=A[c.ProxyKey],b=f.apply(A,n);if(m&&!h.enableModify(v))throw new Error("Magix is frozen, you can't call Array."+i+"()");var P=d&&d(A,n);if(s&&v.refreshLength(g,A),P)for(var w=Math.min(A.length,P.beginIndex+P.length),S=v.sideTarget(),x=o.currentUpdatedSection(),C=P.beginIndex;C<w;++C){if(u){var k=A[C];S&&(S[C]=k),x.setProperty(v,C,k)}v.touchKey(C)}return l&&v.touchKey(),m&&r(v),a?function(r,n){if(r===n)return r[c.ProxyKey];var i=t.generate();return p.createProxyNode(e,i,n)}(A,b):b}},s=0,u=m.createArrayMethodDescriptions();s<u.length;s++){var l=u[s];i(l.methodName,l.returnArray,l.lengthChanged,l.elementChanged,l.touchLength,l.pickTouchedSegment)}return Object.freeze(n)},Object.defineProperty(m.prototype,"kind",{get:function(){return c.ProxyKind.Array},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"clazz",{get:function(){return Array},enumerable:!0,configurable:!0}),m.prototype.updateDisplayer=function(e){var t=this._displayer,r=e.length;t&&r&&s.ArrayDisplayerNode.refreshLength(t,r.value)},m.prototype.reportChanged=function(e){d.prototype.reportChanged.call(this,e);var t=this.observer;if(t){var r=e.length;for(var n in r&&t.reportChanged("length",r.value,r.kind),e){var i=e[n],o=i.kind,a=i.value;i.isIndex&&t.reportChanged(parseInt(n),a,o)}}},m.prototype.converge=function(){this.realTarget&&this.replaceIlluTarget(this.realTarget.slice())},m.prototype.replaceIlluTarget=function(e){var t=this.illuTarget||this.realTarget,r=l.carryObject(this,e);this.illuTarget=r;for(var n=Math.min(t.length,r.length),i=o.currentUpdatedSection(),a=0;a<n;++a)t[a]!==r[a]&&i.setProperty(this,a,r[a]);this.refreshLength(t.length,r)},m.prototype.getMethod=function(e){return m.arrayValidMethods[e]},m.prototype.getValue=function(e){return"number"==typeof e?this.target()[e]:"length"===e?this.target().length:void 0},m.prototype.setValue=function(e,t){var r=this.target(),n=r.length;if("number"!=typeof e)return r[e];if(0<=e){var i=r[e]=t,o=this.sideTarget();return this.refreshLength(n,r),o&&(o[e]=t),i}return t},m.prototype.removeKey=function(e){return!1},m.prototype.prefix=function(e,t){if("number"==typeof e){var r=this.target(),n=this.sideTarget(),i=r.length,o=r[e]+=t;return this.refreshLength(i,r),n&&(n[e]=o),o}},m.prototype.postfix=function(e,t){if("number"==typeof e){var r=this.target(),n=this.sideTarget(),i=r.length,o=r[e],a=r[e]+=t;return this.refreshLength(i,r),n&&(n[e]=a),o}},m.prototype.releaseDisplayer=function(e){},m.prototype.refreshLength=function(e,t){if(e!==t.length){var r=this.sideTarget(),n=o.currentUpdatedSection();if(e>t.length){r&&r.splice(t.length);for(var i=t.length;i<e;++i)n.removeProperty(this,i)}else for(i=e;i<t.length;++i)r&&(r[i]=t[i]),n.addProperty(this,i,t[i]);n.setProperty(this,"length",t.length)}},m.createArrayMethodDescriptions=function(){return[{methodName:"toString",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"toLocaleString",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"join",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"indexOf",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"lastIndexOf",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"every",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"some",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"forEach",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"reduce",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"reduceRight",returnArray:!1,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"concat",returnArray:!0,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"reverse",returnArray:!0,lengthChanged:!1,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"slice",returnArray:!0,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"splice",returnArray:!0,lengthChanged:!0,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e,t){var r=void 0,n=t[0];if(0<=n&&n<e.length)if(1<t.length){var i=t[1];void 0===i&&(i=0);var o=t.length-2;o<0&&(o=0),o===i?0<o&&(r={beginIndex:n,length:o}):r={beginIndex:n,length:e.length-n}}else r={beginIndex:n,length:e.length-n};return r}},{methodName:"map",returnArray:!0,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"filter",returnArray:!0,lengthChanged:!1,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"sort",returnArray:!0,lengthChanged:!1,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}},{methodName:"push",returnArray:!1,lengthChanged:!0,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:e.length-1,length:1}}},{methodName:"pop",returnArray:!1,lengthChanged:!0,elementChanged:!1,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:e.length,length:1}}},{methodName:"shift",returnArray:!1,lengthChanged:!0,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length+1}}},{methodName:"unshift",returnArray:!1,lengthChanged:!0,elementChanged:!0,touchLength:!0,pickTouchedSegment:function(e){return{beginIndex:0,length:e.length}}}]},m.arrayValidMethods=m.createArrayValidMethods(),m);function m(e,t,r){return d.call(this,e,t,r)||this}t.ArrayProxyNodeImplement=f},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(143)),n(r(155)),n(r(84)),n(r(153)),n(r(154)),n(r(156));var i=r(85);t.connectWebSocketSession=i.connectWebSocketSession,t.WebSocketConnection=i.WebSocketConnection},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.PlayerPhase||(t.PlayerPhase={})).Playing="playing",n.Pausing="pausing",n.PausingAndWaiting="pausingAndWaiting",n.Waiting="waiting",n.Ended="ended"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCallbacks=function(e){function t(t){var n=e[t];r[t]="function"==typeof n?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return n.apply(r,e)}catch(e){console.error(e)}}:n}var r={};for(var n in e)t(n);return Object.freeze(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o,a=r(12);(i=n=t.Scope||(t.Scope={})).System="system",i.App="app",i.Custom="custom",i.Magix="magix",(o=t.EventPhase||(t.EventPhase={})).Dispatched="dispatched",o.Updated="updated",o.Canceled="canceled",t.getEventWithDescription=function(e,t){return{event:e.event,payload:e.payload,authorId:e.authorId,scope:function(e){switch(e){case a.EventScope.System:return n.System;case a.EventScope.App:return n.App;case a.EventScope.Custom:return n.Custom;default:return n.Magix}}(e.scope),phase:t}}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(145)),n(r(321)),n(r(146)),n(r(322))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.create=function(e){return new i(e)},i.prototype.createTypesMap=function(e){for(var t={},r=0;r<e.length;++r)t[r]=e[r];return t},i.prototype.createTypeToIndexMap=function(e){var t={};for(var r in e){var n=parseInt(r),i=e[n];if(i in t)throw new Error('find duplicated type "'+i+' in parameters of new TypesMap(...)"');t[i]=n}return t},i.prototype.hasType=function(e){return e in this.typeToIndexMap},i.prototype.findTypeId=function(e){var t=this.typeToIndexMap[e];if(void 0===t)throw new Error("can't find id with type "+e);return t},i.prototype.findTypeById=function(e){var t=this.typesMap[e];if(!t)throw new Error("can't find type with id "+e);return t},i.prototype.extendsTypesMap=function(e){var t=[];for(var r in this.typesMap)t.push(this.typesMap[r]);for(var r in e.typesMap)t.push(e.typesMap[r]);return new i(t)},i);function i(e){this.typesMap={},this.typeToIndexMap={},this.typesMap=Object.freeze(this.createTypesMap(e)),this.typeToIndexMap=Object.freeze(this.createTypeToIndexMap(this.typesMap))}t.TypesMap=n},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(86),o=r(151),a=r(88),s=(c.prototype.send=function(e,t){if(this.isWorking)if(t instanceof Array)for(var r=0,n=t;r<n.length;r++){var i=n[r];this.sendPackage(e,i)}else this.sendPackage(e,t)},c.prototype.sendPackage=function(e,t){if(this.checkBufferedAmountOverflow())throw this.crashByChannelError||(this.crashByChannelError=!0,this.callbacks.onSendingBufferOverflow()),new Error("sending buffer overflow");this.sendHeartbeatDelayer.refreshAndInvokeAfterInterval(this.akkoSocket.params.heartbeatInterval),this.chanel.sendPackage(e,t)},c.prototype.checkBufferedAmountOverflow=function(){var e=!1,t=this.akkoSocket.params,r=t.sendingBufferCrash,n=t.sendingBufferLimit,i=t.sendingBufferLimitDuration,o=this.chanel,a=o.bufferedAmount,s=o.maxPackageBytesInLatestThree;if(r+s<a)e=!0;else if(n+s<a){var c=Date.now();this.isLimit?c-this.becameLimitTimestamp>i&&(e=!(this.isLimit=!1)):(this.isLimit=!0,this.becameLimitTimestamp=c)}else this.isLimit=!1;return e},c.prototype.dispatchClose=function(e){var t=JSON.stringify(e);this.chanel.sendPackage("close",t)},c.prototype.start=function(){this.isWorking||(this.isWorking=!0,this.delayRemoteHeartbeatTimeoutChecking(),this.sendHeartbeatDelayer.refreshAndInvokeAfterInterval(this.akkoSocket.params.heartbeatInterval),this.chanel.sendPackage("setHeartbeatTimeout",this.akkoSocket.params.heartbeatTimeout),this.cleanReceivedWhenNotWorkingBuffer())},c.prototype.cleanReceivedWhenNotWorkingBuffer=function(){var e=this.receivedWhenNotWorkingBuffer.splice(0,this.receivedWhenNotWorkingBuffer.length);if(0<e.length)try{for(var t=0,r=e;t<r.length;t++){var n=r[t];this.handleReceivedPackage(n)}}finally{this.delayRemoteHeartbeatTimeoutChecking()}},c.prototype.stop=function(){this.isWorking&&(this.isWorking=!1,this.sendHeartbeatDelayer.cancel(),this.remoteHeartbeatTimeoutDelayer.cancel(),this.remoteHeartbeatTimeout=void 0)},c.prototype.handleReceivedPackage=function(e){if(c.sessionEventTypesMap.hasType(e.type)){if("setHeartbeatTimeout"===e.type)"number"==typeof e.data&&0<e.data?this.remoteHeartbeatTimeout=e.data:this.logger.warn("illegal remote heartbeat timeout: "+e.data);else if("close"===e.type){var t=void 0;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){this.logger.warn("parse close payload as JSON failed: "+e.message)}this.callbacks.onCloseByRemote(t)}}else this.callbacks.onEvent(e.type,e.data)},c.prototype.delayRemoteHeartbeatTimeoutChecking=function(){void 0===this.remoteHeartbeatTimeout?this.remoteHeartbeatTimeoutDelayer.refreshAndInvokeAfterInterval(this.akkoSocket.params.heartbeatTimeout):this.remoteHeartbeatTimeoutDelayer.refreshAndInvokeAfterInterval(this.remoteHeartbeatTimeout)},c.sessionEventTypesMap=i.TypesMap.create(["heartbeat","setHeartbeatTimeout","close"]),c);function c(e,t,r,i,s){var c=this;this.receivedWhenNotWorkingBuffer=[],this.remoteHeartbeatTimeout=void 0,this.crashByChannelError=!1,this.isWorking=!1,this.isLimit=!1,this.becameLimitTimestamp=0,this.sendHeartbeat=function(){c.isWorking&&(c.sendHeartbeatDelayer.refreshAndInvokeAfterInterval(c.akkoSocket.params.heartbeatInterval),c.chanel.sendPackage("heartbeat"))},this.handleRemoteHeartbeatTimeout=function(){c.crashByChannelError||(c.crashByChannelError=!0,c.callbacks.onRemoteHeartbeatTimeout())},this.onReceivedPackage=function(e){if(!c.crashByChannelError)if(c.isWorking)try{c.handleReceivedPackage(e)}finally{c.delayRemoteHeartbeatTimeoutChecking()}else c.receivedWhenNotWorkingBuffer.push(e)},this.akkoSocket=e,this.logger=r,this.chanel=new o.PackagesChannel(i,t,this.onReceivedPackage),this.callbacks=Object.freeze(n({},s)),this.sendHeartbeatDelayer=new a.Delayer(this.sendHeartbeat),this.remoteHeartbeatTimeoutDelayer=new a.Delayer(this.handleRemoteHeartbeatTimeout)}t.SessionChannel=s},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(315)),n(r(316)),n(r(317))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0).__context("module"),i=n.caller,o=n.unwrapper,a=n.creator,s=n.getter,c=r(14),u=r(22);function l(e,t){return e<=1&&t<=1}t.willIgnoreSelectingBox=l,t.setHighlightNothing=function(e,t){i(e,"forEachComponents",[function(e){o(e)instanceof c.Editable&&i(e,"setHighlightBy",[!1,t])}])},t.findHighlightComponent=function(e,t){return i(e,"findComponentFromTop",[function(e){return o(e)instanceof c.Editable&&i(e,"isHighlightBy",[t])}])},t.searchEditableComponentsByPoint=function(e,t,r,n){var u=a([]);return i(e,"forEachComponents",[function(e){o(e)instanceof c.Editable&&s(e,"selectable")&&i(e,"pointHitTest",[t,r,n])&&i(u,"push",[e])}]),u},t.searchEditableComponentsByRectangle=function(e,t,r,n,p){if(l(n,p))return a([]);var h=a([]);return i(e,"forEachComponents",[function(e){o(e)instanceof c.Editable&&s(e,"selectable")&&i(e,"rectHitTest",[t,r,n,p])!==s(u.RectangleTestingResult,"Disjoint")&&i(h,"push",[e])}]),h},n=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0).__context("module"),i=n.getter;t.inCircle=function(e,t,r,n){var o=r-i(e,"x"),a=n-i(e,"y");return o*o+a*a<=t*t},n=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.creator,c=a.caller,u=a.getter,l=a.unwrapper,p=r(60),h=r(59),d=r(42),f=(i(m,o=a.baseClass()),m.prototype.pushPoint=function(e){c(u(this,"points"),"push",[e])},m.prototype.pointHitTest=function(e,t){for(var r=0;r<u(u(this,"points"),"length");++r){var n=u(u(this,"points"),r),i=u(u(this,"points"),(r+1)%u(u(this,"points"),"length")),o=s({x:u(i,"x")-u(n,"x"),y:u(i,"y")-u(n,"y")});if(0!==u(o,"x")||0!==u(o,"y")){var a=c(p,"verticalVector",[o]),l=s({x:e-u(n,"x"),y:t-u(n,"y")});if(c(p,"dotProduct",[a,l])<0)return!1}}return!0},m.prototype.rectHitTest=function(e,t,r,n){var i=this,o=!1,a=!1;if(c(d.RectangleTester,"iterate",[e,t,r,n,function(e,t){c(i,"pointHitTest",[e,t])?o=!0:a=!0}]),o&&a)return u(h.RectangleTestingResult,"Cross");if(o)return u(h.RectangleTestingResult,"IncludeRectangle");if(a){for(var s=0;s<u(u(this,"points"),"length");++s)for(var p=u(u(this,"points"),s),f=u(u(this,"points"),(s+1)%u(u(this,"points"),"length")),m=c(d.RectangleTester,"allPoints",[e,t,r,n]),y=0;y<u(m,"length");++y){var A=u(m,y),g=u(m,(y+1)%u(m,"length"));if(c(this,"findCrossPoint",[p,f,A,g]))return u(h.RectangleTestingResult,"Cross")}for(var v=0,b=l(u(this,"points"));v<b.length;v++){var P=b[v];if(c(d.RectangleTester,"testPoint",[e,t,r,n,u(P,"x"),u(P,"y")]))return u(h.RectangleTestingResult,"IncludeByRectangle")}}return u(h.RectangleTestingResult,"Disjoint")},m.prototype.findCrossPoint=function(e,t,r,n){var i=u(t,"y")-u(e,"y"),o=u(e,"x")-u(t,"x"),a=u(e,"x")*(u(e,"y")-u(t,"y"))-u(e,"y")*(u(e,"x")-u(t,"x")),l=u(n,"y")-u(r,"y"),p=u(r,"x")-u(n,"x"),h=u(r,"x")*(u(r,"y")-u(n,"y"))-u(r,"y")*(u(r,"x")-u(n,"x")),d=i*p-l*o,f=(o*h-p*a)/d,m=(l*a-i*h)/d;if(c(Math,"abs",[f])===1/0||c(Math,"abs",[m])===1/0)return!1;if(c(Number,"isNaN",[f])||c(Number,"isNaN",[m]))return!1;var y=s({x:f,y:m});return!(!c(this,"isCrossPointBetweenSegment",[y,e,t])||!c(this,"isCrossPointBetweenSegment",[y,r,n]))},m.prototype.isCrossPointBetweenSegment=function(e,t,r){var n=(u(e,"x")-u(t,"x"))*(u(e,"x")-u(r,"x")),i=(u(e,"y")-u(t,"y"))*(u(e,"y")-u(r,"y")),o=c(Math,"abs",[n])<.01,a=c(Math,"abs",[i])<.01;return o&&a?n<=0&&i<=0:(n<=0||o)&&(i<=0||a)},m);function m(){var e=null!==o&&o.apply(this,arguments)||this;return e.points=s([]),e}t.ConvexPolygonTester=f,a.declareClass({classId:5,clazz:f}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0).__context("module"),i=n.caller,o=n.unwrapper,a=n.setter,s=n.getter,c=r(0),u=r(44);function l(e,t){return i(e,"findComponentFromTop",[function(e){return o(e)instanceof u.TextareaShape&&s(e,"editedBy")===t}])}t.updateTextarea=function(e,t){var r=l(e,i(c,"getAuthorId",[]));r&&i(r,"setTextareaBox",[t])},t.releaseAllTextarea=function(e){i(e,"forEachComponents",[function(e){o(e)instanceof u.TextareaShape&&a(e,"editedBy",void 0)}])},t.releaseTextareaEditedBy=function(e,t){var r=l(e,t);r&&(s(r,"isTextEmpty")?i(e,"removeComponent",[r]):a(r,"editedBy",void 0))},t.textareaEditedBy=l,n=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(0).__context("module"),c=s.setter,u=s.getter,l=s.jsxUnwrapper,p=s.caller,h=s.creator,d=r(0),f=r(14),m=(i(y,a=s.wrapSuperClass(f.Editable)),y.prototype.setImageSrc=function(e){c(this,"imageSrc",e)},Object.defineProperty(y.prototype,"hitTestingBoxMargin",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"selectable",{get:function(){return!0},enumerable:!0,configurable:!0}),y.prototype.renderSvgContent=function(){return u(this,"imageSrc")?d.createElement("image",{key:l(u(this,"key")),preserveAspectRatio:l("none meet"),xlinkHref:l(p(p(d,"getResource",[]),"convertIdToUrl",[u(this,"imageSrc")])),width:l(u(this,"width")),height:l(u(this,"height"))}):d.createElement("rect",{strokeDasharray:l("5,5"),key:l(u(this,"key")),x:l(0),y:l(0),width:l(u(this,"width")),height:l(u(this,"height")),style:l(h({stroke:"#EEEEEE",strokeWidth:3,fill:"#F5F5F5",strokeLinejoin:"round",strokeLinecap:"round"}))})},o([d.noEffects],y.prototype,"hitTestingBoxMargin",null),y);function y(e,t){var r=a.call(this,e)||this;return r.originX=0,r.originY=0,r.width=0,r.height=0,c(r,"uuid",u(t,"uuid")),c(r,"originX",u(t,"centerX")-u(t,"width")/2),c(r,"originY",u(t,"centerY")-u(t,"height")/2),c(r,"width",u(t,"width")),c(r,"height",u(t,"height")),r}t.ImageShape=m,s.declareClass({classId:16,clazz:m,superClass:f.Editable,memberDecorators:{hitTestingBoxMargin:[d.noEffects]}}),s=null},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(172)),n(r(62))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(185)),n(r(362))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayRemove=function(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)},t.arrayPut=function(e,t){-1===e.indexOf(t)&&e.push(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(364);t.ScreenImplement=n.ScreenImplement;var i=r(98);t.AnimationPriority=i.AnimationPriority;var o=r(394);t.CNodeKind=o.CNodeKind,t.CNodeCoordinates=o.CNodeCoordinates,t.CNode=o.CNode},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.AnimationPriority||(t.AnimationPriority={}))[n.ComponentMoving=0]="ComponentMoving",n[n.CameraMoving=1]="CameraMoving",n[n.Rendering=2]="Rendering"},function(e,t){e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);function i(e,t){var r=e.sceneMargin,n=e.parallaxMargin,i=r.left*t+n.left,o=r.top*t+n.top,a=r.right*t+n.right,s=r.bottom*t+n.bottom;return Object.freeze({left:i,right:a,top:o,bottom:s})}function o(e,t){var r=e.sceneMargin,n=e.parallaxMargin,i=r.left+n.left/t,o=r.top+n.top/t,a=r.right+n.right/t,s=r.bottom+n.bottom/t;return Object.freeze({left:i,right:a,top:o,bottom:s})}t.convertVisionRectangle=function(e,t,r){var n=t/e.scale,i=r/e.scale;return{originX:e.centerX-n/2,originY:e.centerY-i/2,width:n,height:i}},t.getLocationWithMode=function(e,t,r,a,s){var c,u,l,p,h,d;switch(t){case n.LayoutRenderMode.AbsoluteSize:case n.LayoutRenderMode.RelativeSize:c=(e.originX-r.centerX)*r.scale+a/2,u=(e.originY-r.centerY)*r.scale+s/2,l=e.width,p=e.height,t===n.LayoutRenderMode.RelativeSize?(d=h=i(e,r.scale),l*=r.scale,p*=r.scale):(h=o(e,r.scale),d=i(e,r.scale));break;case n.LayoutRenderMode.Screen:d=h=o(e,1),c=e.originX+a/2,u=e.originY+s/2,l=e.width,p=e.height;break;default:throw new Error("unexpected mode "+t)}return{originX:c-=d.left,originY:u-=d.top,margin:h,size:Object.freeze({width:l,height:p}),wrapperSize:Object.freeze({width:l+h.left+h.right,height:p+h.top+h.bottom})}},t.getMarginOnScene=o},function(e,t){e.exports=o},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(193);t.inCircle=i.inCircle,n(r(194)),n(r(406)),n(r(407))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(414)),n(r(490)),n(r(196))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=(o.prototype._withIDBStore=function(e,t){var r=this;return this._dbp.then((function(n){return new Promise((function(i,o){var a=n.transaction(r.storeName,e);a.oncomplete=function(){return i()},a.onabort=a.onerror=function(){return o(a.error)},t(a.objectStore(r.storeName))}))}))},o);function o(e,t){void 0===e&&(e="keyval-store"),void 0===t&&(t="keyval"),this.storeName=t,this._dbp=new Promise((function(r,n){var i=indexedDB.open(e,1);i.onerror=function(){return n(i.error)},i.onsuccess=function(){return r(i.result)},i.onupgradeneeded=function(){i.result.createObjectStore(t)}}))}function a(){return n=n||new i}t.Store=i,t.get=function(e,t){var r;return void 0===t&&(t=a()),t._withIDBStore("readonly",(function(t){r=t.get(e)})).then((function(){return r.result}))},t.set=function(e,t,r){return void 0===r&&(r=a()),r._withIDBStore("readwrite",(function(r){r.put(t,e)}))},t.del=function(e,t){return void 0===t&&(t=a()),t._withIDBStore("readwrite",(function(t){t.delete(e)}))},t.clear=function(e){return void 0===e&&(e=a()),e._withIDBStore("readwrite",(function(e){e.clear()}))},t.keys=function(e){void 0===e&&(e=a());var t=[];return e._withIDBStore("readonly",(function(e){(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}})).then((function(){return t}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(425);t.SlidePlayer=n.SlidePlayer;var i=r(429);t.AnimationManager=i.AnimationManager;var o=r(430);t.Sequence=o.Sequence;var a=r(431);t.ShapeAnimeMerger=a.ShapeAnimeMerger},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.getPointer=function(){return this.pointer},i.prototype.setPointer=function(e){void 0!==this.linkedMap[e]&&(this.pointer=e)},i.prototype.get=function(e){return void 0===this.linkedMap[e]?void 0:this.linkedMap[e].value},i.prototype.getPointerNode=function(){if(void 0!==this.pointer)return this.linkedMap[this.pointer]},i.prototype.getByPointer=function(){if(void 0!==this.pointer){var e=this.linkedMap[this.pointer];return this.pointer=e.nextKey,e.value}},i.prototype.resetPointer=function(){this.pointer=this.head?this.head.key:void 0},i.prototype.put=function(e,t,r){this.remove(e);var n={key:e,value:t,prevKey:void 0===this.tail?void 0:this.tail.key,nextKey:void 0};void 0===this.head&&(this.head=n),void 0!==this.tail&&(this.tail.nextKey=n.key),this.tail=n,this.linkedMap[e]=n,this.length=this.length+1,1===this.length?this.pointer=n.key:void 0!==r?this.pointer=r:void 0===this.pointer&&(this.pointer=n.key)},i.prototype.insertToHeader=function(e,t,r){this.remove(e);var n=!1;0<this.length&&this.head.key===this.pointer&&(n=!0);var i={key:e,value:t,prevKey:void 0,nextKey:void 0===this.head?void 0:this.head.key};void 0===this.tail&&(this.tail=i),void 0!==this.head&&(this.head.prevKey=i.key),this.head=i,this.linkedMap[e]=i,this.length=this.length+1,1===this.length?this.pointer=i.key:void 0!==r?this.pointer=r:n&&(this.pointer=i.key)},i.prototype.remove=function(e){var t=this.linkedMap[e];void 0!==t&&(1===this.length?(this.head=void 0,this.tail=void 0,this.length=0,this.pointer=void 0):(void 0===t.prevKey?this.head=this.linkedMap[t.nextKey]:this.linkedMap[t.prevKey].nextKey=t.nextKey,void 0===t.nextKey?this.tail=this.linkedMap[t.prevKey]:this.linkedMap[t.nextKey].prevKey=t.prevKey,this.pointer===e&&(this.pointer=t.nextKey),this.length=this.length-1),delete this.linkedMap[e])},i.prototype.forEach=function(e){if(0<this.length)for(var t=this.head.key,r=0;void 0!==t;)e(this.linkedMap[t],r),r++,t=this.linkedMap[t].nextKey},i.prototype.haxNext=function(){return void 0!==this.pointer&&void 0!==this.linkedMap[this.pointer].nextKey},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isPointToEnd=function(){return void 0===this.pointer&&0!==this.length},i);function i(e){if(this.linkedMap={},this.length=0,this.head=void 0,this.tail=void 0,(this.pointer=void 0)!==e){this.length=e.length;for(var t=0;t<e.length;t++){var r={key:e[t].key,value:e[t].value,prevKey:0===t?void 0:e[t-1].key,nextKey:t===e.length-1?void 0:e[t+1].key};0===t&&(this.head=r),t===e.length-1&&(this.tail=r),this.linkedMap[e[t].key]=r}this.pointer=e[0].key}}t.LinkedMap=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(210),a=r(104),s=r(211),c=(u.prototype.preloadLumiaPSD=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,a.get("PresetShapeDefinitions")];case 1:return void 0!==(e=t.sent())?[3,4]:[4,o.fetchText("https://cdnedge.herewhite.com/ppt-psd/PresetShapeDefinitions.xml")];case 2:return e=t.sent(),[4,a.set("PresetShapeDefinitions",e)];case 3:t.sent(),t.label=4;case 4:return u.presetShapeDefinitons=new s.XMLNodeRuntime("slide").parse(e).childElement("presetShapeDefinitons"),[2]}}))}))},u.prototype.preLoad=function(e,t,r,o){return n(this,void 0,void 0,(function(){var n,a,s,c;return i(this,(function(i){switch(i.label){case 0:return[4,this.fetchAllResourceUrl(t,r)];case 1:n=i.sent(),a=0,i.label=2;case 2:return a<n.length?(s=a+1,c=n[a],[4,this.preloadOnePage(e,s,c)]):[3,5];case 3:i.sent(),o&&o((s/n.length).toFixed(2)),i.label=4;case 4:return a++,[3,2];case 5:return[2]}}))}))},u.prototype.preloadOnePage=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,a,s;return i(this,(function(i){switch(i.label){case 0:for(n=[],o=0,a=Object.keys(r);o<a.length;o++)s=a[o],n.push(this.cacheResource(e,s,r[s],t));return[4,Promise.all(n)];case 1:return i.sent(),[2]}}))}))},u.buildCacheKey=function(e,t,r,n){return e+"-"+t+"-"+r+"-"+n},u.prototype.cacheResource=function(e,t,r,o){return n(this,void 0,void 0,(function(){var n,a,s,c,l,p,h;return i(this,(function(i){switch(i.label){case 0:if(!(0<Object.keys(r).length))return[3,2];for(n=Object.keys(r),a=[],s=0,c=n;s<c.length;s++)l=c[s],p=u.buildCacheKey(e,o,t,l),(h=r[l]).endsWith(".mp4")||a.push(this.fetchResource(h,p));return[4,Promise.all(a)];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},u.prototype.fetchResource=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return[4,a.get(t)];case 1:if(void 0!==(r=i.sent())&&r instanceof Blob)return[3,7];i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(e)];case 3:return[4,i.sent().blob()];case 4:return r=i.sent(),a.set(t,r),[3,6];case 5:return n=i.sent(),console.debug("cache fail",n),[3,6];case 6:return[3,7];case 7:return[2]}}))}))},u.prototype.fetchAllResourceUrl=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:for(r=[],n=1;n<=t;n++)r.push(o.fetchJSON(e+"/resources/resource"+n+".json"));return[4,Promise.all(r)];case 1:return[2,i.sent()]}}))}))},u.prototype.fetchOnePageResource=function(e,t){return n(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,o.fetchJSON(e+"/resources/resource"+t+".json")];case 1:return[2,r.sent()]}}))}))},u);function u(){}t.ResourcePreLoader=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);function i(e){if(e){var t=e.childElementOptional(new n.TagOrExpr("p:nvSpPr","p:nvCxnSpPr"));if(t){var r=t.childElementOptional("p:nvPr","p:ph");if(r){var i=r.attr.getStringOptional("idx"),o=r.attr.getStringOptional("type");return"title"!==o&&"ctrTitle"!==o||(i=i||"0"),{idx:i,type:o}}}}}function o(e,r,n){var i=r.masterIndex.txStyle[e];return i||(n?r.masterIndex.txStyle[t.BODY_TEXT_STYLE]:r.masterIndex.txStyle[t.DEFAULT_TEXT_STYLE])}function a(e){return e.main.childElement("p:presentation","p:defaultTextStyle")}function s(e){switch(e){case"ctrTitle":case"title":return"title";case"dt":return"dt";case"ftr":return"ftr";case"sldNum":return"sldNum";default:return"body"}}t.DEFAULT_TEXT_STYLE="other",t.BODY_TEXT_STYLE="body",t.isMajor=function(e){switch(e){case"title":case"ctrTitle":return!0;default:return!1}},t.getRelationshipPlaceHolder=function(e,r,n){var c,u=function(e){var t=!1,r=e.childElementOptional("p:nvSpPr");return r&&r.childElement("p:cNvSpPr").attr.getBooleanOptional("txBox")&&(t=!0),t}(e),l=!0;if("master"===n)return(c=i(e))?{placeHolderType:d=c.type||t.BODY_TEXT_STYLE,masterShape:e,masterStyleXML:o(d,r,u),allShape:[e],isTextBox:u,hasPlaceHolder:l}:(l=!1,{allShape:[e],masterStyleXML:a(r),isTextBox:u,hasPlaceHolder:l});if("layout"===n){if(!(m=i(e)))return l=!1,{allShape:[e],masterStyleXML:a(r),isTextBox:u,hasPlaceHolder:l};var p=s(d=m.type||t.BODY_TEXT_STYLE),h=[e];return(y=r.masterIndex.typeIndex[p])&&h.push(y),{allShape:h,placeHolderType:p,layoutShape:e,masterShape:y,masterStyleXML:o(p,r,u),isTextBox:u,hasPlaceHolder:l}}if(!(c=i(e)))return l=!1,{allShape:[e],masterStyleXML:a(r),isTextBox:u,hasPlaceHolder:l};!function(e){return void 0!==e&&void 0!==e.idx&&"4294967295"===e.idx}(c)||(c.idx="1");var d,f=void 0;if(c.idx?(f=r.layoutIndex.idxIndex[c.idx],c.type&&void 0===f&&(f=r.layoutIndex.typeIndex[c.type])):c.type&&(f=r.layoutIndex.typeIndex[c.type]),f){var m;if(m=i(f)){p=s(d=m.type||t.BODY_TEXT_STYLE);var y=r.masterIndex.typeIndex[p];return h=[e],f&&h.push(f),y&&h.push(y),{allShape:h,placeHolderType:p,layoutShape:f,masterShape:y,masterStyleXML:o(p,r,u),isTextBox:u,hasPlaceHolder:l}}throw new Error("layout ph not existed.")}return p=s(d=c.type||t.BODY_TEXT_STYLE),h=[e],(y=r.masterIndex.typeIndex[p])&&h.push(y),{allShape:h,placeHolderType:p,layoutShape:e,masterShape:y,masterStyleXML:o(p,r,u),isTextBox:u,hasPlaceHolder:l}}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(99),o=r(1),a=r(0),s=r(45),c=r(5),u=r(8),l=r(505),p=r(507),h=r(220),d=r(111),f=r(218),m=r(69),y=(Object.defineProperty(A.prototype,"deviceType",{get:function(){return this.boundless.deviceType},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"observerId",{get:function(){return this._observerId},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"handToolActive",{get:function(){return this.cameraman.handToolActive},set:function(e){this.handToolActive!==(this.cameraman.handToolActive=e)&&this.onlyCallbackRemoteStateModify&&this.onHandToolActive(e)},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"handToolKey",{get:function(){return this.cameraman.handToolKey},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"disableCameraTransform",{get:function(){return this.cameraman.disableCameraTransform},set:function(e){this.cameraman.disableCameraTransform=e},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"cameraman",{get:function(){return this.cameraBoundState.cameraman},enumerable:!0,configurable:!0}),A.prototype.createWrappedComponents=function(){return[m.createWrappedComponent(m.displayerContext,this)]},A.prototype.createPluginOperator=function(){var e=this;return Object.freeze({insert:function(){throw new Error("it is not a writable room")},setProps:function(){throw new Error("it is not a writable room")},getProps:function(t){return e.getPluginProps(t)}})},A.prototype.setForcePPTLandscape=function(e){this.screen.context.forcePPTLandscape!==e&&(this.screen.context=Object.freeze(n({},this.screen.context,{forcePPTLandscape:e})))},A.prototype.bindHtmlElement=function(e){(this.screen.divElement=e)&&this.refreshViewSize()},A.prototype.refreshViewSize=function(){var e=this.screen.divElement;if(e){var t={width:e.clientWidth,height:e.clientHeight};this.screen.resize(t.width,t.height),this.cameraBoundState.setScreenSize(t)}this.cursors&&this.cursors.updateScreenSize(),this.refreshRender()},A.prototype.zoomChange=function(e){this.logger.warn("zoomChange was deprecated. Please replace it with moveCamera"),this.moveCamera({scale:e})},A.prototype.setCameraBound=function(e){this.cameraBoundState.setCameraBound(e)},A.prototype.moveCamera=function(e){var t=e.animationMode||c.AnimationMode.Continuous;this.cameraman.transformCamera(n({},e,{animationMode:t}))},A.prototype.moveCameraToContain=function(e){var t=e.animationMode||c.AnimationMode.Continuous;this.cameraman.adaptRectangle(n({},e,{animationMode:t,adapterMode:c.RectangleAdapterMode.Centering}))},Object.defineProperty(A.prototype,"callbacks",{get:function(){return this._callbacks},enumerable:!0,configurable:!0}),A.prototype.updateCursorClass=function(e){this.screen.className=null!==e?"netless-whiteboard "+e:"netless-whiteboard"},A.prototype.getCurrentSceneState=function(){for(var e=this.applianceManager,t=a.copy(e.getCurrentScenePath()),r=h.scenePathConverter.stringify(t),n=t.pop(),i=[],o=0,s=a.copy(e.getSceneNames(t));o<s.length;o++){var c=s[o],u=a.copy(e.getScene(t.concat([c])));u&&i.push(u)}var l=i.findIndex((function(e){return e.name===n}));return{scenePath:r,scenes:i,index:l}},A.prototype.setup=function(){var e=this;if(!this.didCallSetup){var t=this.applianceManager.getViewState();this.screen.adaptRectangle({originX:t.originX,originY:t.originY,width:t.width,height:t.height,adapterMode:c.RectangleAdapterMode.Centering,animationMode:c.AnimationMode.Immediately}),this._callbacks.onCatchErrorWhenRender&&this.screen.addRenderErrorCatchedListener(this._callbacks.onCatchErrorWhenRender),this.render=new s.WhiteboardRender(this.screen,this.pluginsManager,this.applianceManager),this.cursorAdapter&&setTimeout((function(){e.cursors=new p.CursorsManager({applianceManager:e.applianceManager,screen:e.screen,observerId:e.observerId,willHideObserver:e.willHideSelfCursor,adapter:e.cursorAdapter})}),0),this.didCallSetup=!0}},A.prototype.refreshRender=function(){this.render&&this.render.refreshSceneComponents()},A.prototype.dispose=function(){this._callbacks.onCatchErrorWhenRender&&this.screen.removeRenderErrorCatchedListener(this._callbacks.onCatchErrorWhenRender),this.cameraman.release(),this.render&&this.render.release(),this.cursors&&this.cursors.release()},A.prototype.setObserverId=function(e){this._observerId!==e&&(this._observerId=e,this.screen.context=Object.freeze(n({},this.screen.context,{observerId:e})),this.cursors&&this.cursors.updateObserverId(e))},A.prototype.scenePreview=function(e,t,r,n){var a=h.scenePathConverter.parse(e);r="number"!=typeof r?t.clientWidth:r,n="number"!=typeof n?t.clientHeight:n;var c=new s.WhiteScreenshotRender({applianceManager:this.applianceManager,pluginsManager:this.pluginsManager,width:r,height:n,path:a,pluginOperator:this.pluginOperator}),u=Math.min(r/this.screen.width,n/this.screen.height)*this.screen.camera.scale,l=c.render({centerX:this.screen.camera.centerX,centerY:this.screen.camera.centerY,scale:u});if(!o.isValidElement(l))throw new Error("scene preview must render ReactElement");i.render(l,t)},A.prototype.fillSceneSnapshot=function(e,t,r,n){var a=h.scenePathConverter.parse(e),c=new s.WhiteScreenshotRender({applianceManager:this.applianceManager,pluginsManager:this.pluginsManager,width:r,height:n,path:a,pluginOperator:this.pluginOperator}).render();if(!o.isValidElement(c))throw new Error("scene preview must render ReactElement");i.render(c,t)},A.prototype.convertToPointInWorld=function(e){return this.screen.convertPointToScene(e.x,e.y)},A.prototype.getPluginProps=function(e){var t=this.findImageShape(e);return t?s.getPropsWith(t):void 0},A.prototype.findImageShape=function(e){for(var t=0,r=this.applianceManager.scene.components;t<r.length;t++){var n=r[t];if(a.isInstanceOf(n,u.ImageShape)){var i=n;if(i.uuid===e)return i}}},A.prototype.dispatchMagixEventWithObject=function(e){this.magixEventsManager.dispatchMagixEvent(e)},A.prototype.findTargetsMap=function(e,t,r){return this.render&&this.render.findTargetsMap(e,t,r)},A.prototype.getHitTestIdentifies=function(e){return this.screen.hitTest(e.x,e.y,this.selectorRadius())},A.prototype.addMagixEventListener=function(e,t,r){void 0===r?this.magixEventsManager.addMagixEventListener(e,t):(r<500&&(this.logger.warn("fireInterval "+r+"ms of event "+JSON.stringify(e)+" can't less than 500ms, it's will be reset as 500ms"),r=500),this.magixEventsManager.addMagixEventsListener(e,t,r))},A.prototype.removeMagixEventListener=function(e,t){this.magixEventsManager.removeMagixEventListener(e,t)},A.prototype.waitMagixEvent=function(e){return this.magixEventsManager.waitMagixEvent(e)},A.prototype.setViewSize=function(e,t){this.logger.warn("setViewSize was deprecated. Please replace it with refreshViewSize"),this.refreshViewSize()},A.prototype.selectorRadius=function(){return this.deviceType===c.DeviceType.Touch?36/d.basePixelWidth(this.screenType):0},A);function A(e){var t=e.logger,r=e.boundless,n=e.preloadDynamicPPT,i=e.userFonts,o=e.globalStateUpdater,c=e.pptJumper,u=e.screenType,p=e.cameraBound,h=e.pluginsManager,d=e.completeImageUpload,m=e.willHideSelfCursor,y=e.onlyCallbackRemoteStateModify,A=e.handToolKey,g=e.disableOperations,v=e.cursorAdapter,b=e.eventInterrupter,P=e.callbacks,w=e.urlInterrupter,S=e.onTextareaUpdate,x=this;this.magixEventsManager=new l.MagixEventsManager,this._observerId=a.AdminObserverId,this.didCallSetup=!1,this.onHandToolActive=function(e){x.callbacks.onHandToolActive&&x.callbacks.onHandToolActive(e)},this.updateCursorClassBySelector=function(e){if(x.applianceManager){var t=x.applianceManager.getMemberState();t&&"selector"===t.currentApplianceName&&x.updateCursorClass(e)}},this.covertMemberDisplayerToMember=function(e){var t=e.information,r=t?t.session:"",n=t&&t.payload;return{memberId:e.memberId,memberState:x.memberState(e.memberId),session:r,payload:a.copy(n)}},this.logger=t,this.boundless=r,this.dynamicPpt=s.createDynamicPpt({globalStateUpdater:o,pptJumper:c,userFonts:i,preload:n,onPPTLoadProgress:P.onPPTLoadProgress}),this.screenType=u,this.scene=r.createScene.apply(r,s.createLayoutDescriptions()),this.pluginOperator=this.createPluginOperator(),this.screen=this.scene.createScreen({className:"netless-whiteboard",eventInterrupter:b,wrappedComponents:this.createWrappedComponents(),context:Object.freeze({deviceType:r.deviceType,observerId:this._observerId,dynamicPpt:this.dynamicPpt,forcePPTLandscape:!1,disalbeImageHit:!1,convertIdToUrl:w,updateTextarea:S,updateCursorClass:this.updateCursorClassBySelector,completeImageUpload:d,pluginOperator:this.pluginOperator})}),this.onlyCallbackRemoteStateModify=y,this.cameraBoundState=new f.CameraBoundState(this.screen,p),this.cameraBoundState.cameraman.disableBoundlessEvent=g,this.cameraBoundState.cameraman.handToolKey=A,this.pluginsManager=h,this.willHideSelfCursor=m,this.cursorAdapter=v,this._callbacks=Object.freeze(Object.assign({},P))}t.DisplayerImplement=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BecomeInactivityDuration=5600,t.KeepActiveMaxDistance=4,t.HoverMouseEventLimitTimeInterval=100,t.TransformLimitTimeInterval=100},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(512)),n(r(514)),n(r(515)),n(r(516))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(519)),n(r(223)),n(r(520)),n(r(521))},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a,s,c=r(8),u=r(1),l=r(0),p=r(354),h=r(5),d=r(45),f=r(495),m=r(496),y=r(215),A=r(498),g=r(217);(s=a=t.ScreenType||(t.ScreenType={})).Desktop="desktop",s.Phone="phone",s.Pad="pad",s.TV="tv";var v=(b.prototype.joinRoom=function(e,t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return[4,(r=new g.RoomImplement({loggerContext:this.loggerFactory.createRealtimeLoggerContext(e.uuid),boundless:this.boundless,screenType:this.screenType,pluginsManager:this.pluginsManager,akkoApp:this.akkoApp,preloadDynamicPPT:this.preloadDynamicPPT,userFonts:this.fonts,handToolKey:this.handToolKey,cameraBound:this.standardizeCameraBound(e.cameraBound),userPayload:e.userPayload,disableDeviceInputs:!(!e.disableDeviceInputs&&!e.disableOperations),disableEraseImage:!!e.disableEraseImage,onlyCallbackRemoteStateModify:this.onlyCallbackRemoteStateModify,cursorAdapter:e.cursorAdapter,urlInterrupter:this.urlInterrupter,callbacks:t})).connect({uuid:e.uuid,roomToken:e.roomToken,userPayload:e.userPayload,deviceType:this.deviceType,disableBezier:e.disableBezier})];case 1:return n.sent(),[2,r]}}))}))},b.prototype.replayRoom=function(e,t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return"string"==typeof e.audioUrl&&console.warn("audioUrl was deprecated. Please replace it with mediaURL"),[4,(r=new g.PlayerImplement({loggerContext:this.loggerFactory.createPlayerLoggerContext(),boundless:this.boundless,screenType:this.screenType,pluginsManager:this.pluginsManager,preloadDynamicPPT:this.preloadDynamicPPT,userFonts:this.fonts,handToolKey:this.handToolKey,cameraBound:this.standardizeCameraBound(e.cameraBound),onlyCallbackRemoteStateModify:this.onlyCallbackRemoteStateModify,cursorAdapter:e.cursorAdapter,urlInterrupter:this.urlInterrupter,callbacks:t})).setupReconstructor({akkoApp:this.akkoApp,roomToken:e.roomToken,mediaURL:e.mediaURL||e.audioUrl,slice:e.slice,room:e.room,beginTimestamp:e.beginTimestamp,duration:e.duration})];case 1:return n.sent(),[2,r]}}))}))},b.prototype.pptConverter=function(e){return new y.PptConverterImplement(e)},b.prototype.standardizeCameraBound=function(e){var t,r;void 0===e&&(e={});var i=1/0,o=1/0;return t=void 0!==this.zoomMaxScale?g.contentModeScale(this.zoomMaxScale):g.contentModeScale(10),r=void 0!==this.zoomMinScale?g.contentModeScale(this.zoomMinScale):g.contentModeScale(.1),void 0!==this.limitWidth&&(i=this.limitWidth),void 0!==this.limitHeight&&(o=this.limitHeight),n({maxContentMode:t,minContentMode:r,width:i,height:o},e)},b.prototype.createPluginsManager=function(e){return e?e instanceof Array||(e=[e]):e=[],new d.PluginsManager(e)},b.netState=new m.NetState,b);function b(e){void 0===e&&(e={}),e.deviceType&&e.screenType?(this.deviceType=e.deviceType,this.screenType=e.screenType):e.deviceType&&!e.screenType?(this.deviceType=e.deviceType,this.screenType=e.deviceType===c.DeviceType.Desktop?a.Desktop:a.Phone):!e.deviceType&&e.screenType?(this.deviceType=e.screenType===a.Desktop?c.DeviceType.Desktop:c.DeviceType.Touch,this.screenType=e.screenType):(this.deviceType=c.DeviceType.Desktop,this.screenType=a.Desktop),this.akkoApp=new l.AkkoApp(c.default,{observerAdapter:new p.MobXObserverAdapter,serverOriginsFetcher:f.fetchRoomOrigin,enableAnimationFrame:!0,jsxFactory:u.createElement,escapeObjectFilter:u.isValidElement,reconnectionOptions:e.reconnectionOptions,netStateAdapter:b.netState,convertIdToUrl:e.urlInterrupter||function(e){return e}}),this.preloadDynamicPPT=!!e.preloadDynamicPPT,this.fonts=Object.freeze(n({},e.fonts)),this.handToolKey=e.handToolKey,this.urlInterrupter=e.urlInterrupter||function(e){return e},this.boundless=new h.Boundless(this.deviceType),this.loggerFactory=new A.WhiteLoggerFactory(this.akkoApp,e.loggerOptions),this.pluginsManager=this.createPluginsManager(e.plugins),this.onlyCallbackRemoteStateModify=!!e.onlyCallbackRemoteStateModify,void 0!==e.zoomMaxScale&&console.warn("zoomMaxScale was deprecated. Please replace it with CameraBorder"),void 0!==e.zoomMinScale&&console.warn("zoomMinScale was deprecated. Please replace it with CameraBorder"),void 0!==e.limitWidth&&console.warn("limitWidth was deprecated. Please replace it with CameraBorder"),void 0!==e.limitHeight&&console.warn("limitHeight was deprecated. Please replace it with CameraBorder"),this.zoomMaxScale=e.zoomMaxScale,this.zoomMinScale=e.zoomMinScale,this.limitWidth=e.limitWidth,this.limitHeight=e.limitHeight}t.WhiteWebSdk=v},function(e,t,r){"use strict";function n(){this.strToByteMap=this.createStrToByteMap(),this.byteToStrArray=this.createByteToStrArray()}Object.defineProperty(t,"__esModule",{value:!0}),t.Uint64Bytes=8;var i=new(n.prototype.createStrToByteMap=function(){for(var e={},t=0;t<256;++t){var r=new Number(t).toString(16);1===r.length&&(e["0"+r]=t),e[r]=t}return Object.freeze(e)},n.prototype.createByteToStrArray=function(){for(var e=[],t=0;t<256;++t){var r=new Number(t).toString(16);1===r.length?e[t]="0"+r:e[t]=r}return Object.freeze(e)},n.prototype.set=function(e,r,n){for(var i=new String(new Number(n).toString(16)),o=2*t.Uint64Bytes-i.length,a=0;a<t.Uint64Bytes;++a){var s=2*a-o;if(s<-1)e.setUint8(r+a,0);else if(-1==s){var c=i.substr(0,1),u=this.strToByteMap[c];e.setUint8(r+a,u)}else c=i.substr(s,2),u=this.strToByteMap[c],e.setUint8(r+a,u)}},n.prototype.get=function(e,r){for(var n="",i=0;i<t.Uint64Bytes;++i){var o=e.getUint8(r+i);n+=this.byteToStrArray[o]}return parseInt(n,16)},n);t.setUint64=function(e,t,r){i.set(e,t,r)},t.getUint64=function(e,t){return i.get(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.length=function(e){for(var t=new String(e),r=0,n=0,i=0;i<t.length;++i)(n=t.charCodeAt(i))<128?r+=1:n<2048?r+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(i+1))?(++i,r+=4):r+=3;return r},t.read=function(e,t,r){if(r<1)return"";for(var n,i=t+r,o=[],a=null,s=0;t<i;)(n=e.getUint8(t++))<128?o[s++]=n:191<n&&n<224?o[s++]=(31&n)<<6|63&e.getUint8(t++):239<n&&n<365?(n=((7&n)<<18|(63&e.getUint8(t++))<<12|(63&e.getUint8(t++))<<6|63&e.getUint8(t++))-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&e.getUint8(t++))<<6|63&e.getUint8(t++),8191<s&&((a=a||[]).push(String.fromCharCode.apply(String,o)),s=0);return a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))},t.write=function(e,t){for(var r,n,i=new String(e),o=0;o<i.length;++o)(r=i.charCodeAt(o))<128?t.pushUint8(r):(r<2048?t.pushUint8(r>>6|192):(55296==(64512&r)&&56320==(64512&(n=i.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&n),++o,t.pushUint8(r>>18|240),t.pushUint8(r>>12&63|128)):t.pushUint8(r>>12|224),t.pushUint8(r>>6&63|128)),t.pushUint8(63&r|128))}},function(e,t){e.exports=a},function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(235),o=r(236),a=new function(){var t=this;this.create=function(e){return t.nodeBuffer?new i.NodeAkkoBuffer(t.nodeBuffer.alloc(e)):new o.BrowserAkkoBuffer(new ArrayBuffer(e))},this.wrap=function(e){return t.nodeBuffer&&e instanceof t.nodeBuffer?new i.NodeAkkoBuffer(e):new o.BrowserAkkoBuffer(e)},this.nodeBuffer="function"==typeof e?n.Buffer:null};t.createBuffer=a.create,t.wrapBuffer=a.wrap,t.isAkkoBuffer=function(e){return e instanceof i.ReadonlyNodeAkkoBuffer||e instanceof o.ReadonlyBrowserAkkoBuffer}}).call(this,r(118).Buffer,r(71))},function(e,t,r){"use strict";(function(e){var n=r(232),i=r(233),o=r(234);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"!=typeof e)return u(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=s(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|d(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?s(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(l(t),e=s(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(e).length;default:if(n)return B(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:A(e,t,r,n,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):A(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function A(e,t,r,n,i){var o,a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=a=2,c/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(s<r+c&&(r=s-c),o=r;0<=o;o--){for(var p=!0,h=0;h<c;h++)if(u(e,o+h)!==u(t,h)){p=!1;break}if(p)return o}return-1}function g(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?i<(n=Number(n))&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function v(e,t,r,n){return D(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,c,u=e[i],l=null,p=239<u?4:223<u?3:191<u?2:1;if(i+p<=r)switch(p){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&127<(c=(31&u)<<6|63&o)&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(c=(15&u)<<12|(63&o)<<6|63&a)&&(c<55296||57343<c)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&c<1114112&&(l=c)}null===l?(l=65533,p=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=p}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=w));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return p(null,e)},c.allocUnsafeSlow=function(e){return p(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?P(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return b(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(n,i),l=e.slice(t,r),p=0;p<s;++p)if(u[p]!==l[p]){o=u[p],a=l[p];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,a,s,c,u,l,p=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return u=t,l=r,D(B(e,this.length-u),this,u,l);case"ascii":return v(this,e,t,r);case"latin1":case"binary":return v(this,e,t,r);case"base64":return s=t,c=r,D(N(e),this,s,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=t,a=r,D(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,this.length-o),this,o,a);default:if(p)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function x(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||n<r)&&(r=n);for(var i="",o=t;o<r;++o)i+=F(e[o]);return i}function k(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function T(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function E(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function M(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(e,t,r,n,o){return o||M(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function j(e,t,r,n,o){return o||M(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;r=new c(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=t,i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||_(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||_(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):E(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):E(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);_(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);_(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):E(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):E(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),t=t||0,0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;0<=i;--i)e[i+t]=this[i+r];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=t;o<r;++o)this[o]=e;else{var a=c.isBuffer(e)?e:B(new c(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function N(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(71))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"id",{get:function(){return void 0===this._id&&(this._id=""+i.nextBufferId++),this._id},enumerable:!0,configurable:!0}),i.nextBufferId=0,i);function i(){}t.BaseAkkoBuffer=n},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.TypeEnum||(t.TypeEnum={})).Any="any",n.Never="never",n.Undefined="undefined",n.Null="null",n.String="string",n.Number="number",n.Boolean="boolean",n.Function="function",n.Object="object",n.And="and",n.Or="or",n.Generic="generic",n.Generator="generator",n.Reference="reference",n.GlobalReference="globalReference"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=(i(s,o=Error),s);function s(e){var t=o.call(this,e)||this;return t.name="RuntimeError",t}t.RuntimeError=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(121);t.RuntimeError=n.RuntimeError;var i=r(242);t.linkTypes=i.linkTypes;var o=r(123);t.DefinitionFinder=o.DefinitionFinder;var a=r(243);t.linkClasses=a.linkClasses},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(124),i=(o.prototype.findPath=function(e,t,r){t=void 0===t?e:n.resolve(this.findDirectory(e),t);var i=this.findFinalPath(t,r);if(!i)throw new Error("can't find "+t+":"+r+" in "+e);return i},o.prototype.findFinalPath=function(e,t){var r=this.definitionAdapter.getFileDefinitions(e);if(r||(e+="/index",r=this.definitionAdapter.getFileDefinitions(e)),!r)return null;if("default"!==t)return this.findFinalPathFromDefinitions(r,e,t);var i=r.defaultRef;if(!i)throw new Error("path "+JSON.stringify(e)+" doesn't have default");return i.path&&(e=n.resolve(this.findDirectory(e),i.path)),this.findFinalPath(e,i.name)},o.prototype.findFinalPathFromDefinitions=function(e,t,r){if(this.definitionAdapter.isDefined(t,r))return{path:t,name:r};for(var i=this.findDirectory(t),o=0,a=e.externals;o<a.length;o++){var s=a[o],c=s.path,u=s.clauses,l=n.resolve(i,c);if(u){for(var p in u)if(u[p]===r)return this.findFinalPath(l,p)}else{var h=this.findFinalPath(l,r);if(h)return h}}return null},o.prototype.findDirectory=function(e){var t=e.split("/");return t.pop(),t.join("/")},o);function o(e){this.definitionAdapter=e}t.DefinitionFinder=i},function(e,t,r){"use strict";function n(e){for(var t=[],r=0,n=0,i=e;n<i.length;n++){var o=i[n];".."===o?r++:t.push(o)}return{doubleDotsCount:r,pureCells:t}}function i(e){for(var t=[],r=0;r<e;++r)t.push("..");return t}Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[];return e.map((function(e){return function(e){var t=e.split("/");return 0<t.length&&("."===t[0]&&t.shift(),""===t[t.length-1]&&t.pop()),t}(e)})).forEach((function(e){r=0!==r.length&&function(e){return 0<e.length&&""!==e[0]}(e)?function(e,t){var r=n(e),o=n(t);if(r.pureCells.length>o.doubleDotsCount){for(var a=0;a<o.doubleDotsCount;++a)r.pureCells.pop();return i(r.doubleDotsCount).concat(r.pureCells,o.pureCells)}var s=o.doubleDotsCount-r.pureCells.length;return i(r.doubleDotsCount+s).concat(o.pureCells)}(r,e):e})),r.join("/")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(50);t.AkkoPrimitiveType=n.AkkoPrimitiveType,t.ObjectType=n.ObjectType;var i=r(247);t.Serialization=i.Serialization;var o=r(128);t.convertToAkkoSerVersion=o.convertToAkkoSerVersion,t.AkkoSerVersion=o.AkkoSerVersion;var a=r(74);t.DefaultObjectAdapter=a.DefaultObjectAdapter;var s=r(53);t.SerializerError=s.SerializerError,t.DeserializerError=s.DeserializerError},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSelfloopObjectFormats=function(){var e={id:-1};return((e.key=e).index=e).properties=Object.freeze({}),Object.freeze(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(52);t.NullIdentifier="",t.NoEffectScopeId=-1,t.ScopeIdHexCount=16,t.scopeIdWith=function(e){return n.bigInteger.readInt53(e,0)},t.objectIdWith=function(e){return n.bigInteger.readInt53(e,t.ScopeIdHexCount)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(2);(i=n=t.AkkoSerVersion||(t.AkkoSerVersion={}))[i.V0=0]="V0",i[i.V1=1]="V1";var a=o.Version.parse("1.4.2");t.convertToAkkoSerVersion=function(e){return"string"==typeof e&&(e=o.Version.parse(e)),o.Version.compare(e,a)<0?n.V0:n.V1}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.HandleState||(t.HandleState={}))[n.Indeterminate=0]="Indeterminate",n[n.Circular=1]="Circular",n[n.Noncircular=2]="Noncircular"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(2),a=r(36);(i=n=t.ExpandedNodeClass||(t.ExpandedNodeClass={}))[i.Border=0]="Border",i[i.Compound=1]="Compound",i[i.Object=2]="Object",i[i.Handle=3]="Handle";var s=(c.prototype.getExpandedExpression=function(){return this.expandNode(this.templateType)},c.prototype.expandNode=function(e){switch(e.typeEnum){case o.TypeEnum.Any:case o.TypeEnum.Never:case o.TypeEnum.Undefined:case o.TypeEnum.Null:case o.TypeEnum.String:case o.TypeEnum.Number:case o.TypeEnum.Boolean:case o.TypeEnum.Function:return{type:e,clazz:n.Border};case o.TypeEnum.Object:var t=e,r={};for(var i in t.properties){var s=t.properties[i];r[i]=this.expandNode(s)}return{type:t,clazz:n.Object,key:this.expandNode(t.key),index:this.expandNode(t.index),properties:r};case o.TypeEnum.And:case o.TypeEnum.Or:for(var c=e,u=[],l=0,p=c.children;l<p.length;l++){var h=p[l];u.push(this.expandNode(h))}return{type:c,clazz:n.Compound,children:u};case o.TypeEnum.Generator:return this.expandGeneratorType(e);case o.TypeEnum.Generic:return this.expandGenericType(e);case o.TypeEnum.Reference:case o.TypeEnum.GlobalReference:return this.expandReferenceType(e)}throw new a.FormatError("unrecognized enum type "+e.typeEnum)},c.prototype.expandGeneratorType=function(e){var t=e.params.map(this.convertTypeToGeneratorParam),r=this.templateEnvironment.getTemplate(e.template);return{clazz:n.Handle,handle:r.getHandle(t)}},c.prototype.convertTypeToGeneratorParam=function(e){var t=this.expandNode(e);return t.clazz!==n.Handle?t.type:t.handle},c.prototype.expandGenericType=function(e){var t=e.index,r=this.expandedParamNodes[t];if(!r){var n=this.params[t];if(!n)throw new a.FormatError("generic index "+t+" is out of range: 0 ~ "+(this.params.length-1));r=this.covertParamTypeToExpandedNode(n),this.expandedParamNodes[t]=r}return r},c.prototype.expandReferenceType=function(e){var t,r=this.templateEnvironment.replaceReferenceType(e);return t=r.typeEnum===o.TypeEnum.Generator?r:{typeEnum:o.TypeEnum.Generator,template:r,params:[]},this.expandGeneratorType(t)},c.prototype.covertParamTypeToExpandedNode=function(e){return"id"in e?this.expandNode(e):{clazz:n.Handle,handle:e}},c);function c(e,t,r){this.templateEnvironment=e,this.templateType=t,this.params=r,this.expandedParamNodes=[],this.convertTypeToGeneratorParam=this.convertTypeToGeneratorParam.bind(this);for(var n=0;n<r.length;++n)this.expandedParamNodes[n]=void 0}t.ExpandedExpressionGenerator=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(54),o=r(2);t.ClassReflectionPropertyMode=o.ClassReflectionPropertyMode,t.ClassReflectionName="__reflection";var a=(s.prototype.createProperty=function(e,t,r){var n=e.decorators.some((function(e){return e===i.transient}));return Object.freeze({name:e.name,mode:e.mode,belongsClass:t,isTransient:n,isPublic:e.isPublic,objectFormat:r.properties[e.name],decorators:e.decorators})},s.prototype.createMethod=function(e,t,r){for(var n=e.name,i=e.parameters,o=e.decorators,a=[],s=0,c=i;s<c.length;s++){var u=c[s];a.push(r.findObjectFormat(u))}return Object.freeze({name:n,belongsClass:t,isPublic:e.isPublic,parameterFormatObjects:Object.freeze(a),decorators:Object.freeze(o.slice())})},s);function s(e,t,r,i){this.isRootClass=t,this.id=r.classId,this.name=r.clazz.name,this.clazz=r.clazz,this.superClass=r.superClass,this.objectFormat=e.findObjectFormat(r.objectFormatId);for(var o={},a={},s=[r].concat(i),c=s.length-1;0<=c;--c)for(var u=s[c],l=u.clazz,p=0,h=u.members;p<h.length;p++){var d=h[p];n.isClassProperty(d)?o[d.name]=this.createProperty(d,l,this.objectFormat):n.isClassMethod(d)&&(a[d.name]=this.createMethod(d,l,e))}this.properties=Object.freeze(o),this.methods=Object.freeze(a),this.methodNames=Object.freeze(Object.keys(this.methods))}t.ClassReflectionImplement=a},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.ContextState||(t.ContextState={}))[n.Appear=0]="Appear",n[n.Disappear=1]="Disappear",n[n.Covered=2]="Covered",n[n.Reappear=3]="Reappear",n[n.Cleaned=4]="Cleaned"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=void 0;n.contextStack.addListener((function(e,t){switch(e){case n.ContextState.Appear:case n.ContextState.Reappear:i=t.coreFunctions.creator;break;case n.ContextState.Cleaned:i=void 0}})),t.AkkoObject=function(){if(!i){var e=this.constructor&&this.constructor.name;throw e?new Error("can't construct "+e+" out of Magix, it's an AkkoObject"):new Error("can't construct an AkkoObject out of Magix")}i(this)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(4),o=r(277),a=r(13),s=(c.prototype.create=function(e){if(this.isSupportAkkoVersion(e.akkoVersion))throw new n.RuntimeError("can't find superClass");var t=this.createFormat(e.formatBase64),r=this.createClassReflections(t,e.rootConstructor,e.classDeclarations),i=this.createObjectFormatToClassMap(r);return new u(e.appIdentifier,e.appVersion,e.formatHash,e.akkoVersion,e.rootConstructor,(function(e){return i[e]}),t,r)},c.prototype.isSupportAkkoVersion=function(e){var t=n.AkkoVersion.split("."),r=e.split(".");return!(r.length<2||t[0]!==r[0]||t[1]!==r[1]||3<=t.length&&!(t[2]>=r[3]))},c.prototype.createFormat=function(e){var t=new i.FormatFactory,r=this.base64Parser.parse(e);return t.createWithBuffer(r)},c.prototype.createClassReflections=function(e,t,r){var i={};for(var o in r){var s=r[o],c=s.clazz,u=c===t,l=this.searchThisAndSuperClassDeclarations(s,r),p=l[0],h=l.slice(1),d=new a.ClassReflectionImplement(e,u,p,h);if(void 0!==Object.getOwnPropertyDescriptor(c,a.ClassReflectionName))throw new n.RuntimeError("class "+c.name+' has defined  reserved word static property "'+a.ClassReflectionName);Object.defineProperty(c,a.ClassReflectionName,{value:d,writable:!1,configurable:!1}),i[o]=d}return Object.freeze(i)},c.prototype.createObjectFormatToClassMap=function(e){var t={};for(var r in e){var n=e[r];t[n.objectFormat.id]=n.clazz}return Object.freeze(t)},c.prototype.searchThisAndSuperClassDeclarations=function(e,t){for(var r=[];r.push(e),e.superClass&&e.superClass!==Object;)e=this.findClassDeclarationsWithConstructor(e.superClass,t);return r},c.prototype.findClassDeclarationsWithConstructor=function(e,t){for(var r in t){var i=t[r];if(i.clazz===e)return i}throw new n.RuntimeError("can't find superClass")},c);function c(e){this.base64Parser=new o.Base64Parser(e)}t.LibraryFactory=s;var u=(l.prototype.classReflection=function(e){var t=this.classReflections[e];if(!t)throw new Error("can't find class with id "+e);return t},l);function l(e,t,r,n,i,o,a,s){this.appIdentifier=e,this.appVersion=t,this.appHash=r,this.akkoVersion=n,this.rootClass=i,this.covertObjectFormatIdToClass=o,this.format=a,this.classReflections=s}t.Library=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(9);function a(){return new Error("you can not call this function out of Magix")}(n=t.Environment||(t.Environment={})).Real="real",n.Illusion="illusion",n.NoEffects="noEffects",o.contextStack.addListener((function(e,t){switch(e){case o.ContextState.Appear:case o.ContextState.Reappear:i=t.tools;break;case o.ContextState.Cleaned:i=void 0}})),t.getEnvironment=function(){if(!i)throw a();return i.environment},t.getCurrentTimestamp=function(){if(!i)throw a();return i.timestamp},t.getAuthorId=function(){if(!i)throw a();return i.getAuthorId()},t.hasUser=function(e){if(!i)throw a();return i.hasUser(e)},t.getUsersCount=function(){if(!i)throw a();return i.getUsersCount()},t.getUser=function(e){if(!i)throw a();return i.getUser(e)},t.getUserIds=function(){if(!i)throw a();return i.getUserIds()},t.getResource=function(){if(!i)throw a();return i.resource},t.getSnapshot=function(){if(!i)throw a();return i.snapshot},t.isInMagix=function(){return!!o.contextStack.currentNode}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(9),o=r(77);function a(e){return n.scopeIdWith(e.identifier)===n.NoEffectScopeId}function s(){return!0}t.enableModify=s,i.contextStack.addListener((function(e,r){switch(e){case i.ContextState.Appear:case i.ContextState.Reappear:r.tools&&r.mode===o.CoreFunctionsMode.Outside?t.enableModify=a:t.enableModify=s;break;case i.ContextState.Cleaned:t.enableModify=s}}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(9),o=r(26),a=r(77),s=(Object.defineProperty(c.prototype,"hasDoubleLines",{get:function(){return this._hasDoubleLines},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"branchRuntime",{get:function(){return this._branchRuntime},enumerable:!0,configurable:!0}),c.prototype.changeToDoubleLines=function(){this._hasDoubleLines=!0},c.prototype.forkBranchRuntime=function(){return this._branchRuntime=a.createBranchRuntime(this.logger),this._branchRuntime},c.prototype.releaseBranchRuntime=function(){this._branchRuntime&&(this._branchRuntime=null)},c.prototype.getForwardMode=function(){return!this._hasDoubleLines||this._branchRuntime?i.ForwardMode.SingleForward:i.ForwardMode.DoubleForward},c.prototype.runWithMagix=function(e,t){var r=e.authorId,n=this.getEnvironment(e.mode),a=this.getForwardMode(),s=c.coreFunctionsSwitcher.switchCoreFunctions(e.mode),u=new o.MagixTools({observerId:this.observerId,resource:this.resource,snapshot:this.snapshotManager,coreFunctions:s,roomObserver:this.proxyRuntime.roomObserver,imageUsers:this.imageUsers,environment:n,timestamp:e.timestamp,authorId:r,idGenerator:e.identifierGenerator}),l={mode:e.mode,coreFunctions:s,frameSection:e.frameSection,proxyRuntime:this.proxyRuntime,forwardMode:a,tools:u};return i.contextStack.runWith(l,t)},c.prototype.runWithSerialization=function(e,t){var r=this.getForwardMode(),n=c.coreFunctionsSwitcher.switchCoreFunctions(e.mode),o={mode:e.mode,coreFunctions:n,frameSection:e.frameSection,proxyRuntime:this.proxyRuntime,forwardMode:r};return i.contextStack.runWith(o,t)},c.prototype.isForcesOnIllusionLine=function(e){switch(e){case a.CoreFunctionsMode.Real:case a.CoreFunctionsMode.RealAck:return!1;case a.CoreFunctionsMode.Illusion:case a.CoreFunctionsMode.IllusionRebuild:return!0;case a.CoreFunctionsMode.Outside:return this._hasDoubleLines&&!!this._branchRuntime}},c.prototype.getEnvironment=function(e){switch(e){case a.CoreFunctionsMode.Illusion:case a.CoreFunctionsMode.IllusionRebuild:return o.Environment.Illusion;case a.CoreFunctionsMode.Real:case a.CoreFunctionsMode.RealAck:return o.Environment.Real;case a.CoreFunctionsMode.Outside:return o.Environment.NoEffects}},c.coreFunctionsSwitcher=new a.CoreFunctionsSwitcher,c);function c(e){this.observerId=n.AdminObserverId,this._hasDoubleLines=!1,this._branchRuntime=null,this.logger=e.logger,this.proxyRuntime=e.proxyRuntime,this.imageUsers=e.imageUsers,this.resource=e.resource,this.snapshotManager=e.snapshotManager}t.Runtime=s},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.UpdateEventKind||(t.UpdateEventKind={}))[n.Inserted=0]="Inserted",n[n.Updated=1]="Updated",n[n.Removed=2]="Removed"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(78),o=(a.prototype.createObject=function(e,t){return i.createProxyNode(this.proxyRuntime,e,t?[]:{})},a.prototype.findIdentifier=function(e){var t=e.identifier;if(void 0===t)throw n.isProxyNode(e)?new Error("can't find identifier of proxy node"):new Error("object should be proxy node");return t},a.prototype.isArray=function(e){return n.isArrayProxyNode(e)},a.prototype.keys=function(e){return Object.keys(e.displayerTarget())},a.prototype.length=function(e){return n.isArrayProxyNode(e)?e.displayerTarget().length:void 0},a.prototype.hasKey=function(e,t){return t in e.displayerTarget()},a.prototype.getValue=function(e,t){return e.displayerTarget()[t]},a.prototype.setValue=function(e,t,r){var n=e.sideTarget(),i=e.target();n&&(n[t]=r),i[t]=r},a);function a(e,t){void 0===t&&(t=function(){}),this.proxyRuntime=e,this.decorateObject=t}t.ProxyObjectAdapter=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(4),s=(i(c,o=a.DefaultObjectAdapter),c.prototype.createObject=function(e,t){var r=o.prototype.createObject.call(this,e,t);return c.objectsCollection&&c.objectsCollection.push(r),r},c.startCollection=function(){this.objectsCollection=[]},c.completeCollection=function(){try{if(!this.objectsCollection)return[];for(var e=0,t=this.objectsCollection;e<t.length;e++)delete t[e].__identifier;return this.objectsCollection}finally{this.objectsCollection=void 0}},c.objectsCollection=void 0,c);function c(){return o.call(this)||this}t.ParamsObjectAdapter=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(3),o="__identifier";function a(e,t){Object.defineProperty(e,o,{enumerable:!1,configurable:!0,value:t})}var s=(c.prototype.complete=function(){for(var e=0,t=this.foundObjects;e<t.length;e++)delete t[e][o]},c.prototype.bind=function(e){if("object"!=typeof e)return e;if(null===e)return e;if(n.isBuffer(e))return e;if(i.isDisplayerNode(e))return i.copyDisplayerNode(e);if(e.constructor===Array)return this.bindArray(e);if(e.constructor===Object)return this.bindObject(e);throw new Error("can't let object of "+e.constructor.name+" pass Magix border")},c.prototype.bindArray=function(e){var t=e[o];void 0===t&&(a(e,t=this.idGenerator.generate()),this.foundObjects.push(e));for(var r=0;r<e.length;++r)this.bind(e[r])},c.prototype.bindObject=function(e){var t=e[o];for(var r in void 0===t&&(a(e,t=this.idGenerator.generate()),this.foundObjects.push(e)),e)this.bind(e[r])},c);function c(e){this.idGenerator=e,this.foundObjects=[]}t.ObjectLikeBinder=s},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.AccessUpdaterKind||(t.AccessUpdaterKind={}))[n.Readonly=0]="Readonly",n[n.Writable=1]="Writable",t.getKindWithAccessUpdaterBuffer=function(e){return e.getUint8(0)}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(304),a=(s.prototype.createMagix=function(e){return new o.MagixImplement({logger:e.logger,imageFactory:this.imageFactory,serverOriginsFetcher:this.serverOriginsFetcher,enableAnimationFrame:this.magixConfiguration.enableAnimationFrame,reconnectionOptions:this.reconnectionOptions,observerAdapter:this.observerAdapter,netState:this.netState,userPayload:e.userPayload,callbacks:e.callbacks||{}})},s);function s(e,t,r,i,o,a){this.imageFactory=e,this.serverOriginsFetcher=t,this.observerAdapter=r,this.reconnectionOptions=i,this.netState=o,this.magixConfiguration=Object.freeze(n({},a))}t.MagixFactory=a,(i=t.MagixPhase||(t.MagixPhase={})).Ready="ready",i.Connecting="connecting",i.Connected="connected",i.Reconnecting="reconnecting",i.Disconnecting="disconnecting",i.Disconnected="disconnected"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.invoke=function(){if(this.blockInvoke)this.shouldInvokeNextFrame=!0;else{try{this.invoker()}catch(e){console.error(e)}null===this.animationFrameId&&(this.animationFrameId=window.requestAnimationFrame(this.fireTick)),this.blockInvoke=!0}},i);function i(e){var t=this;this.invoker=e,this.animationFrameId=null,this.shouldInvokeNextFrame=!1,this.blockInvoke=!1,this.fireTick=function(){if(t.shouldInvokeNextFrame)try{t.invoker()}catch(e){console.error(e)}t.shouldInvokeNextFrame=!1,t.blockInvoke=!1,t.animationFrameId=null}}t.AnimationFrameTicker=n},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(312),s=r(146),c=r(320),u=Object.freeze([1e3,1e3,1e3,3e3,3e3,5e3,5e3]),l=(p.prototype.dispose=function(){this._didDispose||(this._didDispose=!0,this.operator&&this.operator.cancel(),this.connectionTask=null,this.operator=null,this.netStatePaddingNode&&this.netStatePaddingNode.dispose())},p.prototype.connect=function(e){return i(this,void 0,void 0,(function(){var t,r,i=this;return o(this,(function(o){switch(o.label){case 0:if(this._didDispose)throw new Error("did dispose");if(this.connectionTask)throw new Error("is connecting");return this.connectionNode&&(this.connectionNode.filter.switchOn=!1,this.connectionNode=null),(t=this.netStatePaddingNode)?[4,this.netStatePaddingNode.makeSureOnline()]:[3,2];case 1:t=!o.sent(),o.label=2;case 2:if(t)throw new Error("offline");r=new Promise((function(t,r){var o=new c.CallbacksFilter;i.connectionTask={resolve:t,reject:r,filter:o,params:n({},e,{callbacks:o.wrapCallbacks(e.callbacks)})}})),this.startConnectionTask(),o.label=3;case 3:return o.trys.push([3,,5,6]),[4,r];case 4:return[2,o.sent()];case 5:return this.connectionTask=null,[7];case 6:return[2]}}))}))},p.prototype.startConnectionTask=function(){var e=this,t=new h(this.logger),r=this.connectionTask,n=r.params,i=r.filter,o=r.resolve,a=r.reject;this.operator=t,this.operator.connect(n).then((function(r){r&&t===e.operator&&(o(r),e.operator=null,e.connectionNode={connection:r.connection,filter:i})})).catch((function(r){t===e.operator&&(a(r),e.operator=null)}))},p);function p(e,t){var r=this;this._didDispose=!1,this.connectionTask=null,this.operator=null,this.connectionNode=null,this.onNetStateUpdate=function(e){r._didDispose||(e?r.connectionTask&&r.startConnectionTask():r.operator&&(r.operator.cancel(),r.operator=null))},this.logger=e,this.netStatePaddingNode=t&&new a.NetStatePaddingNode(t,this.onNetStateUpdate)}t.ConnectionBuilder=l;var h=(d.prototype.connect=function(e){return i(this,void 0,void 0,(function(){var t,r,n,i,a;return o(this,(function(o){switch(o.label){case 0:t="",r=0,o.label=1;case 1:return r<u.length+1?(this.connection=new s.WebSocketConnection(e),n=Date.now(),[4,this.connection.connect()]):[3,8];case 2:return i=o.sent(),this.isCancel?i&&this.connection?[4,this.connection.disconnectWithError(new Error("cancel connect"))]:[3,4]:[3,5];case 3:o.sent(),o.label=4;case 4:return[2,null];case 5:return"object"==typeof i?[2,{connection:this.connection,snapshot:i.snapshot,actionFrames:i.actionFrames}]:(t=i,this.connection=null,void 0===(a=u[r])?[3,7]:0<n+a-Date.now()?[4,function(e){return new Promise((function(t){return setTimeout(t,e)}))}(a)]:[3,7]);case 6:if(o.sent(),this.isCancel)return[2,null];o.label=7;case 7:return++r,[3,1];case 8:throw new Error("connect fail after multiple retries: "+t)}}))}))},d.prototype.cancel=function(){var e=this;this.connection&&(this.connection.disconnectWithError(new Error("cancel connect")).catch((function(t){return e.logger.error(t)})),this.connection=null),this.isCancel=!0},d);function d(e){this.logger=e,this.connection=null,this.isCancel=!1}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(41),s=r(147),c=r(153),u=r(319),l=r(39),p=u.getWebSocket(),h=(Object.defineProperty(d.prototype,"sessionBuild",{get:function(){if(!this._sessionBuild)throw new Error("not connected");return this._sessionBuild},enumerable:!0,configurable:!0}),d.prototype.sendActionFrame=function(e){this.socket.emit("action",e)},d.prototype.isConnected=function(){return!!this._sessionBuild},d.prototype.connect=function(){var e=this;return new Promise((function(t,r){function n(){var t=e.disconnectedCallbacks.indexOf(i);-1!==t&&e.disconnectedCallbacks.splice(t,1),e.socket.off("session-build",o)}var i=function(e,i){n(),i?t(e):r(new Error("connect failed: "+e))};e.disconnectedCallbacks.push(i);var o=function(r){n();var i=e.snapshotFrameInterrupter,o=e.actionFramesInterrupter;e._sessionBuild=l.deserializeSessionBuild(r),e.snapshotFrameInterrupter=null,e.actionFramesInterrupter=null,t({snapshot:i,actionFrames:o})};e.socket.on("session-build",o),e.socket.waitToConnected().catch((function(t){e.logger.warn(t.message),i(t.message,!0)}))}))},d.prototype.disconnect=function(){return this.disconnectedCallback("disconnect",!1),this.socket.disconnect()},d.prototype.disconnectWithError=function(e){return this.disconnectedCallback(e.message,!1),this.socket.disconnectWithErrorDescription({message:e.message})},d.prototype.updateToWritable=function(e,t){return i(this,void 0,void 0,(function(){var r,n;return o(this,(function(i){switch(i.label){case 0:return r={kind:l.AccessUpdaterKind.Writable,userPayload:e,connectedPayload:t},this.socket.emit("update-access",this.serialization.serialize(r)),[4,this.interruptEvent("allocate-user",[c.SocketErrorCode.WritableAccessForbidden,c.SocketErrorCode.StuffedOfWritableUsers,c.SocketErrorCode.WrongWritablePhase])];case 1:if(void 0!==(n=i.sent()).errorCode)switch(n.errorCode){case c.SocketErrorCode.WritableAccessForbidden:throw new Error("can't update to writable. you don't have permission");case c.SocketErrorCode.StuffedOfWritableUsers:throw new Error("room is stuffed of writable users");case c.SocketErrorCode.WrongWritablePhase:throw new Error("it's wrong writable phase")}return void 0!==n.target?[2,l.deserializeAllocatedUser(n.target)]:[2,null]}}))}))},d.prototype.updateToReadonly=function(e){return i(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return t={kind:l.AccessUpdaterKind.Readonly,payload:e},this.socket.emit("update-access",this.serialization.serialize(t)),[4,this.interruptEvent("release-user",[c.SocketErrorCode.NoUserToRelease,c.SocketErrorCode.WrongWritablePhase])];case 1:if(void 0!==(r=n.sent()).errorCode)switch(r.errorCode){case c.SocketErrorCode.NoUserToRelease:throw new Error("room don't have user to release");case c.SocketErrorCode.WrongWritablePhase:throw new Error("it's wrong writable phase")}return[2,void 0!==r.target]}}))}))},d.prototype.disconnectedCallback=function(e,t){for(var r=0,n=this.disconnectedCallbacks.splice(0);r<n.length;r++)(0,n[r])(e,t)},d.prototype.interruptEvent=function(e,t){var r=this;return new Promise((function(n){function i(){var t=r.disconnectedCallbacks.indexOf(o);-1!==t&&r.disconnectedCallbacks.splice(t,1),r.socket.off(e,a),r.socket.off("error",s)}var o=function(){i(),n({})};r.disconnectedCallbacks.push(o);var a=function(e){i(),n({target:e})},s=function(e){-1!==t.indexOf(e)&&(i(),n({errorCode:e}))};r.socket.on(e,a),r.socket.on("error",s)}))},d);function d(e){var t=e.logger,r=e.socketURL,i=e.serialization,o=e.roomToken,u=e.webSocketQuery,h=e.callbacks,d=this;this.disconnectedCallbacks=[],this.actionFramesInterrupter=[],this.snapshotFrameInterrupter=null,this.onReceiveSnapshotFrame=function(e){d.snapshotFrameInterrupter=e},this.onReceiveActionFrame=function(e){d.actionFramesInterrupter?d.actionFramesInterrupter.push(e):d.callbacks.onReceivedActionFrame(e)},this.onReceiveScopeSlices=function(e){d.callbacks.onReceivedScopeSlices(l.deserializeScopeSlices(e))},this.onDisconnect=function(e){var t=e.reason,r=e.message,n=d.isConnected();d._sessionBuild=void 0;var i=t===s.AkkoSocketDisconnectReason.WebSocketError||t===s.AkkoSocketDisconnectReason.CommunicationError;if(d.disconnectedCallback(r,i),n)switch(t){case s.AkkoSocketDisconnectReason.WebSocketError:case s.AkkoSocketDisconnectReason.CommunicationError:d.callbacks.onDisconnectedWithSocketError(new Error(r));break;case s.AkkoSocketDisconnectReason.Normal:d.callbacks.onKickWithReason(r);break;case s.AkkoSocketDisconnectReason.RemoteError:d.callbacks.onDisconnectedByServer(new Error(r))}};var f=r+"?"+function(e,t){var r={room:t.uuid,token:e,combinable:!0,sessionToken:t.sessionToken,identifier:t.appIdentifier,version:t.appVersion,hash:t.appHash,akkoVersion:t.akkoVersion,access:t.access};for(var n in r)void 0===r[n]&&delete r[n];return a.stringify(r)}(o,u),m=new p(f);this.logger=t,this.uuid=u.uuid,this.serialization=i,this.socket=c.socketFactory.createSocket(m,t,{onDisconnect:this.onDisconnect}),this.socket.on("snapshot",this.onReceiveSnapshotFrame),this.socket.on("action",this.onReceiveActionFrame),this.socket.on("allocate-scope",this.onReceiveScopeSlices),this.callbacks=Object.freeze(n({},h))}t.WebSocketConnection=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(148);t.CombinedSockets=n.CombinedSockets;var i=r(313);t.AkkoSocketPhase=i.AkkoSocketPhase,t.AkkoSocketDisconnectReason=i.AkkoSocketDisconnectReason,t.AkkoSocketFactory=i.AkkoSocketFactory},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"socketsCount",{get:function(){return this.sockets.length},enumerable:!0,configurable:!0}),i.prototype.addSocket=function(e){-1===this.sockets.indexOf(e)&&this.sockets.push(e)},i.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);-1!==t&&this.sockets.splice(t,1)},i.prototype.forEachSockets=function(e){this.sockets.forEach(e)},i.prototype.emit=function(e,t){for(var r=0,n=this.sockets;r<n.length;r++){var i=n[r];try{i.emit(e,t)}catch(e){this.logger.error(e)}}},i);function i(e){this.sockets=[],this.logger=e}t.CombinedSockets=n},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=r(86),s=r(150),c=r(87),u=r(148),l=(p.prototype.createSocket=function(e,t,r){return void 0===r&&(r={}),new s.AkkoSocketImplement(e,t,this.eventTypesMap,n({},p.defaultSocketParams,r))},p.prototype.createCombinedSockets=function(e){return new u.CombinedSockets(e)},p.defaultSocketParams=Object.freeze({heartbeatInterval:4e4,heartbeatTimeout:12e4,sendingBufferLimit:5242880,sendingBufferLimitDuration:3e4,sendingBufferCrash:104857600,onDisconnect:function(){},onPhaseChanged:function(){}}),p);function p(e){this.eventTypesMap=c.SessionChannel.sessionEventTypesMap.extendsTypesMap(a.TypesMap.create(e))}t.AkkoSocketFactory=l,(i=t.AkkoSocketPhase||(t.AkkoSocketPhase={})).Connecting="connecting",i.Connected="connected",i.Disconnecting="disconnecting",i.Disconnected="disconnected",(o=t.AkkoSocketDisconnectReason||(t.AkkoSocketDisconnectReason={})).Normal="normal",o.WebSocketError="webSocketError",o.CommunicationError="communicationError",o.RemoteError="remoteError"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var c,u=r(314),l=r(149),p=r(87),h=r(318),d=r(88),f=(i(m,c=d.EventsManagers),m.prototype.initializePhaseWithSocketReadyState=function(){if(this.socket.readyState===u.ReadyState.CONNECTING)this._phase=l.AkkoSocketPhase.Connecting,this.connect();else{if(this.socket.readyState!==u.ReadyState.OPEN)throw new Error("WebSocket's readyState can be only CLOSED or OPEN, instead of "+this.socket.readyState);this._phase=l.AkkoSocketPhase.Connected,this.addSessionListeners(),this.sessionChannel.start()}},Object.defineProperty(m.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),m.prototype.updatePhase=function(e){if(this._phase!==e)try{this.params.onPhaseChanged(e)}finally{this._phase=e}},m.prototype.emit=function(e,t){if(this._phase!==l.AkkoSocketPhase.Connected)throw new Error("AkkoSocket can't emit when phase is "+this.phase);try{this.sessionChannel.send(e,t)}catch(e){throw this.disconnectForceWithCode(1001),this.params.onDisconnect({reason:l.AkkoSocketDisconnectReason.WebSocketError,message:e.message}),e}},m.prototype.connect=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),this.connectingManager=new h.ConnectingManager(this.socket,this.logger),[4,this.connectingManager.waitToConnected()];case 1:return t.sent(),this.addSessionListeners(),this.sessionChannel.start(),this.updatePhase(l.AkkoSocketPhase.Connected),[3,4];case 2:return e=t.sent(),this.updatePhase(l.AkkoSocketPhase.Disconnected),this.connectFailError=e,[3,4];case 3:return this.connectingManager=null,[7];case 4:return[2]}}))}))},m.prototype.addSessionListeners=function(){this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("error",this.onError)},m.prototype.waitToConnected=function(){if(this.connectFailError)throw this.connectFailError;if(this._phase===l.AkkoSocketPhase.Connected)return Promise.resolve();if(this._phase===l.AkkoSocketPhase.Connecting)return this.connectingManager.waitToConnected();throw new Error("AkkoSocket's phase had became "+this._phase)},m.prototype.disconnect=function(e){return e?this.disconnectWithCodeAndReason({reason:e}):this.disconnectWithCodeAndReason()},m.prototype.disconnectWithErrorDescription=function(e){var t=e.message,r=e.code;return this.disconnectWithCodeAndReason({error:t,errorCode:r})},m.prototype.disconnectForce=function(){this._phase===l.AkkoSocketPhase.Connected&&this.disconnectForceWithCode(1001)},m.prototype.disconnectForceWithCode=function(e){this.sessionChannel.stop(),this.closeSocket(e),this.updatePhase(l.AkkoSocketPhase.Disconnected)},m.prototype.disconnectWithCodeAndReason=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(this._phase!==l.AkkoSocketPhase.Connected)throw new Error("AkkoSocket can't disconnect when phase is "+this.phase);return this.updatePhase(l.AkkoSocketPhase.Disconnecting),this.sessionChannel.dispatchClose(e),[4,this.waitUtilCloseAndCheckTimeout()];case 1:return t.sent()&&this.closeSocket(1e3),this.sessionChannel.stop(),this.updatePhase(l.AkkoSocketPhase.Disconnected),[2]}}))}))},m.prototype.waitUtilCloseAndCheckTimeout=function(){var e=this,t=null,r=new Promise((function(e){t=setTimeout((function(){e(!(t=null))}),3e3)})),n=new Promise((function(t){e.socket.readyState===u.ReadyState.CLOSED?t(!1):e.socket.addEventListener("close",(function(){return t(!1)}))}));return Promise.race([r,n]).then((function(e){return null!==t&&clearTimeout(t),e}))},m.prototype.onCommunicationErrorMessage=function(e){this._phase===l.AkkoSocketPhase.Connected&&(this.disconnectForce(),this.params.onDisconnect({reason:l.AkkoSocketDisconnectReason.CommunicationError,message:e}))},m.prototype.closeSocket=function(e){try{this.socket.close(e)}catch(e){this.logger.error(e)}},m.prototype.errorMessageWithCode=function(e){switch(e){case 1e3:return"CLOSE_NORMAL";case 1001:return"CLOSE_GOING_AWAY";case 1002:return"CLOSE_PROTOCOL_ERROR";case 1003:return"CLOSE_UNSUPPORTED";case 1005:return"CLOSE_NO_STATUS";case 1006:return"CLOSE_ABNORMAL";case 1007:return"Unsupported Data";case 1008:return"Policy Violation";case 1009:return"CLOSE_TOO_LARGE";case 1010:return"Missing Extension";case 1011:return"Internal Error";case 1012:return"Service Restart";case 1013:return"Try Again Later";case 1015:return"TLS Handshake";default:return}},m);function m(e,t,r,n){var i=c.call(this)||this;return i.connectingManager=null,i.connectFailError=void 0,i.onError=function(){i.logger.warn("websocket received error")},i.onCloseByRemote=function(e){if(i._phase===l.AkkoSocketPhase.Connected){i.sessionChannel.stop(),i.closeSocket(1e3),i.updatePhase(l.AkkoSocketPhase.Disconnected);var t=e&&e.error,r=e&&e.reason;t?i.params.onDisconnect({reason:l.AkkoSocketDisconnectReason.RemoteError,message:t,remoteCode:e.errorCode}):i.params.onDisconnect({reason:l.AkkoSocketDisconnectReason.Normal,message:r||"ok"})}},i.onClose=function(e){var t=e.code,r=void 0===t?1e3:t,n=e.reason;if(i._phase===l.AkkoSocketPhase.Connected){var o=i.errorMessageWithCode(r)||"disconnected with code "+r+' "'+n+'"';i.sessionChannel.stop(),i.updatePhase(l.AkkoSocketPhase.Disconnected),i.params.onDisconnect({reason:l.AkkoSocketDisconnectReason.WebSocketError,message:o,webSocketCode:r})}},i.socket=e,i.socket.binaryType="arraybuffer",i.logger=t,i.params=Object.freeze(o({},n)),i.sessionChannel=new p.SessionChannel(i,e,t,r,{onCloseByRemote:i.onCloseByRemote,onEvent:function(e,t){return i.dispatchToListeners(e,t)},onRemoteHeartbeatTimeout:function(){return i.onCommunicationErrorMessage("remote heartbeat timeout")},onSendingBufferOverflow:function(){return i.onCommunicationErrorMessage("sending buffer overflow")}}),i.initializePhaseWithSocketReadyState(),i}t.AkkoSocketImplement=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(88),o=r(152),a=(Object.defineProperty(s.prototype,"bufferedAmount",{get:function(){return this.socket.bufferedAmount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maxPackageBytesInLatestThree",{get:function(){return Math.max.apply(Math,[0].concat(this.latestThreePackageBytes))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"latestReceivedRemoteId",{get:function(){return this._latestReceivedRemoteId},enumerable:!0,configurable:!0}),s.prototype.sendPackage=function(e,t){void 0===t&&(t=0);var r=Object.freeze({id:this.nextSelfPackageId,receivedId:this._latestReceivedRemoteId,type:e,data:t});this.nextSelfPackageId++;var n=this.createPackageHead(r),i=this.wrapPackageData(r.data),o=n.byteLength+i.byteLength;return this.socket.send(n.primitiveBuffer),this.socket.send(i.primitiveBuffer),this.latestThreePackageBytes[0]=this.latestThreePackageBytes[1],this.latestThreePackageBytes[1]=this.latestThreePackageBytes[2],this.latestThreePackageBytes[2]=o,r.id},s.prototype.createPackageHead=function(e){var t=n.createBuffer(18);return i.setInt64(t,0,e.id),i.setInt64(t,8,e.receivedId),t.setUint8(16,this.typesMap.findTypeId(e.type)),t.setUint8(17,o.findDataTypeWith(e.data)),t},s.prototype.wrapPackageData=function(e){if("string"!=typeof e)return"number"!=typeof e?e:(r=n.createBuffer(8),i.setInt64(r,0,e),r);for(var t=new String(e),r=n.createBuffer(2*t.length),o=0;o<t.length;++o)r.setUint16(2*o,65535&t.charCodeAt(o));return r},s.prototype.parsePackage=function(e,t){var r,n=i.getInt64(e,0),a=i.getInt64(e,8),s=e.getUint8(16),c=e.getUint8(17);switch(c){case o.PackageDataType.String:for(var u=t.byteLength/2,l=[],p=0;p<u;++p)l[p]=t.getUint16(2*p);r=String.fromCharCode.apply(String,l);break;case o.PackageDataType.Integer:r=i.getInt64(t,0);break;case o.PackageDataType.Buffer:r=t;break;default:throw new Error("unrecognized data type "+c)}return Object.freeze({id:n,receivedId:a,type:this.typesMap.findTypeById(s),data:r})},s);function s(e,t,r){var i=this;this.typesMap=e,this.socket=t,this.receiver=r,this.latestThreePackageBytes=[0,0,0],this.nextSelfPackageId=0,this._latestReceivedRemoteId=-1,this.onMessage=function(e){if(i.receivedPackageHeadBuffer){var t=i.receivedPackageHeadBuffer,r=n.wrapBuffer(e.data),o=i.parsePackage(t,r);i._latestReceivedRemoteId=Math.max(o.id,i._latestReceivedRemoteId),i.receivedPackageHeadBuffer=void 0,i.receiver(o)}else i.receivedPackageHeadBuffer=n.wrapBuffer(e.data)},t.binaryType="arraybuffer",t.addEventListener("message",this.onMessage)}t.PackagesChannel=a},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=n=t.PackageDataType||(t.PackageDataType={}))[i.Buffer=0]="Buffer",i[i.String=1]="String",i[i.Integer=2]="Integer",t.findDataTypeWith=function(e){switch(typeof e){case"number":return n.Integer;case"string":return n.String;default:return n.Buffer}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(147);t.socketFactory=new i.AkkoSocketFactory(["error","snapshot","action","chunk","session-build","update-online","allocate-user","release-user","allocate-scope","update-access","ban-access","hang-up"]),(n=t.SocketErrorCode||(t.SocketErrorCode={}))[n.Undefined=0]="Undefined",n[n.NoUserToRelease=1]="NoUserToRelease",n[n.WritableAccessForbidden=2]="WritableAccessForbidden",n[n.StuffedOfWritableUsers=3]="StuffedOfWritableUsers",n[n.WrongWritablePhase=4]="WrongWritablePhase"},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.KickReason||(t.KickReason={})).RoomDelete="roomDelete",n.RoomZombie="roomZombie",n.RoomBan="roomBan",n.KickByAdmin="kickByAdmin",n.ReplaceByOther="replaceByOther",n.Crash="crash"},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(41),s=r(324),c=r(328),u=r(157),l=r(329),p=(h.prototype.createReconstructor=function(e){return n(this,void 0,void 0,(function(){var t,r,n,o,a;return i(this,(function(i){switch(i.label){case 0:return[4,this.serverOriginsFetcher(e.roomToken)];case 1:return t=i.sent(),r=t.persistence,n=t.assets,o=new c.SequenceFetcher(r,n),[4,this.fetchSliceChunk(r,e)];case 2:return a=i.sent(),[2,new s.ReconstructorImplement(e.logger,a,this.imageFactory,o,this.enableAnimationFrame,e.thirdPartyReconstructorFactory,this.observerAdapter,e.callbacks||{})]}}))}))},h.prototype.fetchSliceChunk=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,s,c,p,h,d,f,m;return i(this,(function(i){switch(i.label){case 0:return void 0===t.slice?[3,2]:(c=e+"/v2/slices/"+t.slice,[4,u.fetcher.fetchJSON(c)]);case 1:if(m=i.sent(),void 0!==t.room&&t.room!==m.roomUUID)throw new Error("slice "+m.uuid+" is not belongs to room "+t.room);return r=[m],[3,5];case 2:return void 0===t.room?[3,4]:(n=t.beginTimestamp,o=void 0!==t.beginTimestamp&&void 0!==t.duration?t.beginTimestamp+t.duration:void 0,s=a.stringify({beginAt:n,endAt:o}),c=e+"/v2/rooms/"+t.room+"/slices?"+s,[4,u.fetcher.fetchJSON(c)]);case 3:return r=i.sent(),[3,5];case 4:throw new Error("expect either room or slice");case 5:if(0===r.length)throw new Error("couldn't find any matching slices");for(void 0===(p=t.beginTimestamp)&&(p=Math.min.apply(Math,r.map((function(e){return e.beginTimestamp})))),h=t.duration?p+t.duration:Math.max.apply(Math,r.map((function(e){return e.beginTimestamp+e.duration}))),d=0,f=r;d<f.length;d++)m=f[d],Object.freeze(m);return r=r.filter((function(e){var t=e.beginTimestamp,r=e.beginTimestamp+e.duration;return p<=r&&t<=h})),[2,new l.SliceChunk({beginAt:p,endAt:h,slices:r})]}}))}))},h);function h(e,t,r,n){this.imageFactory=e,this.serverOriginsFetcher=t,this.enableAnimationFrame=r,this.observerAdapter=n}t.ReconstructorFactory=p,(o=t.ReconstructorPhase||(t.ReconstructorPhase={})).WaitingFirstFrame="waitingFirstFrame",o.Playing="playing",o.Pause="pause",o.Stopped="stopped",o.Ended="ended",o.Buffering="buffering",o.Seeking="seeking"},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.OperationResult||(t.OperationResult={})).Success="success",n.Padding="padding"},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),a=(s.prototype.fetchJSON=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return[4,window.fetch(e,t)];case 1:return r=i.sent(),this.isSuccessStatus(r,t)?[4,r.text()]:[3,3];case 2:return""===(n=i.sent())?[2,void 0]:[2,JSON.parse(n)];case 3:return[4,this.createError(e,r)];case 4:throw i.sent();case 5:return[2]}}))}))},s.prototype.fetchBuffer=function(e,t){return n(this,void 0,void 0,(function(){var r,n,a;return i(this,(function(i){switch(i.label){case 0:return[4,window.fetch(e,t)];case 1:return 404!==(r=i.sent()).status?[3,2]:[2,null];case 2:return this.isSuccessStatus(r,t)?r.arrayBuffer?(n=o.wrapBuffer,[4,r.arrayBuffer()]):[3,4]:[3,7];case 3:return[2,n.apply(void 0,[i.sent()])];case 4:return a=o.wrapBuffer,[4,r.buffer()];case 5:return[2,a.apply(void 0,[i.sent()])];case 6:return[3,9];case 7:return[4,this.createError(e,r)];case 8:throw i.sent();case 9:return[2]}}))}))},s.prototype.isSuccessStatus=function(e,t){var r=e.status;switch(t&&t.method||"get"){case"get":return 200===r||206===r;case"delete":return 204===r;default:return 201===r}},s.prototype.createError=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o;return i(this,(function(i){switch(i.label){case 0:return r=t.headers.get("content-type"),n="without error message",r&&!/application\/json/i.test(r)?[3,2]:[4,t.json()];case 1:(o=i.sent()).error&&("object"==typeof o.error?n=o.error.title:"string"==typeof o.error&&(n=o.error)),i.label=2;case 2:return[2,new Error("fetch "+e+" failed with error status code "+t.status+": "+n)]}}))}))},s);function s(){}t.Fetcher=a,t.fetcher=new a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(159);t.ImageAuthor=n.ImageAuthor;var i=r(160);t.ActionFrameHelper=i.ActionFrameHelper;var o=r(161);t.ImageUsers=o.ImageUsers;var a=r(162);t.IllusionFrameGenerator=a.IllusionFrameGenerator;var s=r(163);t.ImagePhase=s.ImagePhase,t.ImageFactory=s.ImageFactory},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(4),o=(a.prototype.createFrameId=function(){return this.nextFrameId++},a.prototype.appendScopeSlices=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.scopeStorage.appendScopeSlice(n)}},a.prototype.allocateIdentifierGenerator=function(){var e=this.scopeStorage.allocScopeId();if(void 0===e)throw new n.RuntimeError("run out of scope ID");return i.createIdentifierGenerator(e)},a);function a(e,t,r){this.nextFrameId=0,this.userId=e,this.scopeStorage=t,this.nextFrameId=r}t.ImageAuthor=o},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(141),o=r(12),a=(s.prototype.deserialize=function(e,t){var r,n;try{o.ParamsObjectAdapter.startCollection(),r=this.paramsSerialization.deserializeActionFrame(e,this.deserializerVersion,t)}finally{n=o.ParamsObjectAdapter.completeCollection()}for(var i=0,a=n;i<a.length;i++){var s=a[i];Object.freeze(s)}return r},s.prototype.serialize=function(e,t,r){var o=new i.ObjectLikeBinder(e);try{this.replaceWithBindsActionFrame(o,t);var a=n({},t,{beginObjectId:e.createdCount});return this.paramsSerialization.serializeActionFrame(a,r)}finally{o.complete()}},s.prototype.getIllusionFrameResult=function(e){return{frameBuffer:e,illusionFrame:this.proxyNodeSerialization.deserializeActionFrame(e,this.deserializerVersion,!0)}},s.prototype.replaceWithBindsActionFrame=function(e,t){if(o.isEventFrame(t))e.bind(t.payload);else if(o.isInvokerFrame(t))for(var r=0,n=t.parameters;r<n.length;r++){var i=n[r];e.bind(i)}else o.isEnterFrame(t)?(e.bind(t.userPayload),e.bind(t.connectedPayload)):o.isLeaveFrame(t)&&e.bind(t.payload)},s);function s(e,t,r){this.paramsSerialization=e,this.proxyNodeSerialization=t,this.deserializerVersion=r}t.ActionFrameHelper=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(3),o=r(39),a=r(159),s=(c.prototype.hasUser=function(e){return e in this.users},Object.defineProperty(c.prototype,"userIds",{get:function(){var e=[];for(var t in this.users)e.push(parseInt(t));return e.sort()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"usersCount",{get:function(){return this._usersCount},enumerable:!0,configurable:!0}),c.prototype.user=function(e,t){var r=this.users[e];if(r){var n=r.payload;return t||(n=function(e){return i.isProxyNode(e)?e.displayer:e}(n)),{userId:e,session:r.session,payload:n}}},c.prototype.snapshotUsers=function(){for(var e=[],t=0,r=this.userIds;t<r.length;t++){var n=r[t],i=this.users[n];e.push({userId:n,nextFrameId:i.nextFrameId,session:i.session,payload:i.payload})}return e},c.prototype.createImageAuthor=function(e){var t=this,r=e.userId,n=this.users[r];if(n){var i=new o.ScopeStorage(e.initializeSlices),s=new a.ImageAuthor(e.userId,i,n.nextFrameId);return Promise.resolve(s)}return new Promise((function(r){t.paddingImageCreatingTask={allocatedUser:e,resolve:r}}))},c.prototype.cancelImageAuthorCreating=function(){this.paddingImageCreatingTask&&(this.paddingImageCreatingTask.resolve(null),this.paddingImageCreatingTask=null)},c.prototype.updateUserNextFrameId=function(e,t){var r=this.users[e];r&&(r.nextFrameId=t)},c.prototype.userEnter=function(e,t,r,n){if(e in this.users||this._usersCount++,this.users[e]={userId:e,nextFrameId:t,session:r,payload:n},this.paddingImageCreatingTask){var i=this.paddingImageCreatingTask.allocatedUser,s=i.userId,c=i.initializeSlices;if(s===e){var u=new o.ScopeStorage(c),l=new a.ImageAuthor(e,u,t);this.paddingImageCreatingTask.resolve(l),this.paddingImageCreatingTask=null}}this.roomObserver.reportUsersChanged(this._usersCount)},c.prototype.userLeave=function(e){e in this.users&&(this._usersCount--,delete this.users[e]),this.roomObserver.reportUsersChanged(this._usersCount)},c);function c(e,t){if(this.users={},this._usersCount=0,this.paddingImageCreatingTask=null,this.roomObserver=e,t)for(var r=0,i=t;r<i.length;r++){var o=i[r];this.users[o.userId]={userId:o.userId,nextFrameId:o.nextFrameId,session:o.session,payload:o.payload},this._usersCount++}else this.users[n.AdminObserverId]={userId:n.AdminObserverId,nextFrameId:0,session:"",payload:void 0},this._usersCount++}t.ImageUsers=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=(o.prototype.appendScopeSlices=function(e){this.author.appendScopeSlices(e)},o.prototype.createIllusionEventFrame=function(e,t,r,n){var i=this.createEventFrame(e,t,r,n);return this.actionFrameHelper.getIllusionFrameResult(i)},o.prototype.createIllusionInvokerFrame=function(e,t,r,n){var i=this.createInvokerFrame(e,t,r,n);return this.actionFrameHelper.getIllusionFrameResult(i)},o.prototype.createEventFrame=function(e,t,r,i){var o=this.author.createFrameId(),a={frameId:o,originalFrameId:o,timestamp:r,authorId:this.author.userId,type:n.ActionFrameType.Event,scopeId:i.scopeId,beginObjectId:0,event:e,payload:t,scope:n.EventScope.Custom};return this.actionFrameHelper.serialize(i,a,this.includesFrameHash)},o.prototype.createInvokerFrame=function(e,t,r,i){var o=this.author.createFrameId(),a={frameId:o,originalFrameId:o,timestamp:r,authorId:this.author.userId,type:n.ActionFrameType.Invoker,scopeId:i.scopeId,beginObjectId:0,methodId:e,parameters:t};return this.actionFrameHelper.serialize(i,a,this.includesFrameHash)},o);function o(e,t,r){this.author=e,this.actionFrameHelper=t,this.includesFrameHash=r}t.IllusionFrameGenerator=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(4),o=r(2),a=r(330),s=r(335),c=r(12),u=r(17),l=r(161);(n=t.ImagePhase||(t.ImagePhase={})).Real="real",n.Illusion="illusion",n.Persistence="persistence";var p=(h.prototype.createWithParameters=function(e){var t=this,r=this.snapshotManagerFactory.create(e.roomUUID),n=new u.ProxyRuntime({observerAdapter:this.observerAdapter,escapeObjectFilter:this.escapeObjectFilter,jsxFactory:this.jsxFactory,callbacksWhenUpdate:e.callbacksWhenUpdate}),o=new l.ImageUsers(n.roomObserver);n.bindRuntimeParams({logger:e.logger,resource:this.resource,imageUsers:o,snapshotManager:r});var a=Date.now(),p=i.AdminObserverId,d=i.createIdentifierGenerator(e.constructorScopeId),f=n.pushValues(d,e.args,!0),m={authorId:p,mode:u.CoreFunctionsMode.Real,timestamp:a,identifierGenerator:d},y=n.runtime.runWithMagix(m,(function(){return new((e=t.library.rootClass).bind.apply(e,[void 0].concat(f)));var e})).__proxy,A=new c.FrameSerializationBundles(this.library,n);return new s.ImageImplement({frameId:0,timestamp:a,library:this.library,logger:e.logger,triggerProxy:y,proxyRuntime:n,frameSerializationBundles:A,actionFrames:[],imageUsers:o,strategy:h.wrapStrategy(e),callbacksWhenUpdate:e.callbacksWhenUpdate,callbacks:e.callbacks})},h.prototype.createWithSnapshot=function(e){var t=new u.ProxyRuntime({observerAdapter:this.observerAdapter,escapeObjectFilter:this.escapeObjectFilter,jsxFactory:this.jsxFactory,callbacksWhenUpdate:e.callbacksWhenUpdate}),r=e.snapshotDeserializerVersion;void 0===r&&(r=i.convertToAkkoSerVersion(o.AkkoVersion));var n=new c.FrameSerializationBundles(this.library,t),a=n.proxyNodeSerialization.deserializeSnapshotFrame(e.snapshotFrame,r,e.ignoreHashChecking),p=a.proxyNode,d=new l.ImageUsers(t.roomObserver,a.users);return t.bindRuntimeParams({logger:e.logger,resource:this.resource,imageUsers:d,snapshotManager:this.snapshotManagerFactory.create(e.roomUUID)}),new s.ImageImplement({frameId:a.frameId,timestamp:a.timestamp,library:this.library,logger:e.logger,triggerProxy:p,actionFrames:e.actionFrames,proxyRuntime:t,frameSerializationBundles:n,imageUsers:d,strategy:h.wrapStrategy(e),callbacksWhenUpdate:e.callbacksWhenUpdate,callbacks:e.callbacks})},h.wrapStrategy=function(e){var t=e.actionDeserializerVersion;return void 0===t&&(t=i.convertToAkkoSerVersion(o.AkkoVersion)),Object.freeze({roomUUID:e.roomUUID,ignoreHashChecking:e.ignoreHashChecking,includesFrameHash:e.includesFrameHash,deserializerVersion:t})},h);function h(e){this.library=e.library,this.resource=e.resource,this.snapshotManagerFactory=new a.SnapshotManagerFactory(e.library),this.observerAdapter=e.observerAdapter,this.escapeObjectFilter=e.escapeObjectFilter,this.jsxFactory=e.jsxFactory}t.ImageFactory=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.idGeneratorWithFrame=function(e){return void 0===e.beginGenerationId?n.createIdentifierGenerator(e.scopeId,e.beginObjectId):n.createV0IdentifierGenerator(e.authorId,e.beginGenerationId)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s,c=r(0).__context("module"),u=c.setter,l=c.wrapper,p=c.caller,h=c.creator,d=c.getter,f=c.unwrapper,m=r(0),y=r(89),A=r(92),g=r(170),v=r(93),b=r(61),P=r(94),w=(i(S,s=c.baseClass()),Object.defineProperty(S.prototype,"deviceType",{get:function(){return p(d(this,"membersManager"),"getDeviceType",[p(m,"getAuthorId",[])])},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"scene",{get:function(){return d(d(this,"scenes"),"currentScene")},enumerable:!0,configurable:!0}),S.prototype.createAppliances=function(){var e=h({}),t=p(this,"createConstructors",[]);for(var r in f(t)){var n=d(t,r);u(e,r,l(new n(this)))}return e},S.prototype.onMemberEnterRoom=function(e,t){var r=p(m,"getAuthorId",[]),n=p(d(this,"membersManager"),"initiativeColor",[]),i=p(m,"getUser",[r]),o=h({id:d(i,"userId"),session:d(i,"session"),payload:d(i,"payload")});p(d(this,"membersManager"),"memberEnter",[h({memberId:r,deviceType:t,information:o,appliances:p(this,"createAppliances",[]),memberState:p(this,"createMemberState",[n])})])},S.prototype.onMemberLeaveRoom=function(){var e=p(m,"getAuthorId",[]);p(d(this,"membersManager"),"memberLeave",[e])},S.prototype.onRtcConnected=function(e,t){},S.prototype.onOthersEvent=function(e,t,r){var n=p(m,"getAuthorId",[]);r!==d(d(m,"EventScope"),"System")&&p(d(this,"membersManager"),"isMemberExits",[n])&&p(d(this,"membersManager"),"dispatchMagixEvent",[n,e,t])},S.prototype.changeScene=function(e){var t=d(d(this,"scenes"),"currentPath");u(d(this,"scenes"),"currentPath",e),p(d(this,"scenes"),"isPathEquals",[t,d(d(this,"scenes"),"currentPath")])||p(d(this,"membersManager"),"notifyAllThatSceneChanged",[t])},S.prototype.putScenes=function(e,t,r){for(var n=0;n<d(t,"length");++n){var i=d(t,n),o=l(new P.SceneNode(d(i,"name"),d(i,"ppt"))),a=void 0===r||r<0?void 0:r+n;p(d(this,"scenes"),"putScene",[e,o,a])}},S.prototype.removeScenes=function(e){var t=d(d(this,"scenes"),"currentPath");p(d(this,"scenes"),"removePath",[e]),p(d(this,"scenes"),"isPathEquals",[t,d(d(this,"scenes"),"currentPath")])||p(d(this,"membersManager"),"notifyAllThatSceneChanged",[t])},S.prototype.moveScene=function(e,t){var r=d(d(this,"scenes"),"currentPath");p(d(this,"scenes"),"moveScene",[e,t]),p(d(this,"scenes"),"isPathEquals",[r,d(d(this,"scenes"),"currentPath")])||p(d(this,"membersManager"),"notifyAllThatSceneChanged",[r])},S.prototype.insertImage=function(e){var t=l(new v.ImageShape(this,e));p(d(this,"scene"),"addComponent",[t])},S.prototype.completeImageUpload=function(e,t){var r=p(d(this,"scene"),"findComponentFromTop",[function(t){return f(t)instanceof v.ImageShape&&d(t,"uuid")===e}]);if(!r)throw l(new Error("uuid "+e+" not found"));p(r,"setImageSrc",[t])},S.prototype.setGlobalState=function(e){var t=d(this,"_globalState");return u(this,"_globalState",h(o({},f(t),f(e)))),d(this,"_globalState")},S.prototype.setMemberState=function(e){return p(d(this,"membersManager"),"setMemberState",[p(m,"getAuthorId",[]),e])},S.prototype.setViewState=function(e){return p(d(this,"membersManager"),"setViewState",[p(m,"getAuthorId",[]),e])},S.prototype.getScene=function(e){var t=void 0===e?d(d(this,"scenes"),"currentScene"):p(d(this,"scenes"),"getScene",[e]);if(t)return h({name:d(t,"name"),componentsCount:d(t,"componentsCount"),ppt:d(t,"ppt")})},S.prototype.getCurrentScenePath=function(){return d(d(this,"scenes"),"currentPath")},S.prototype.getAllScenePaths=function(){return p(d(this,"scenes"),"listAllScenes",[])},S.prototype.getSceneNames=function(e){return p(d(this,"scenes"),"listScenes",[e])},S.prototype.getSceneGroupNames=function(e){return p(d(this,"scenes"),"listSceneGroups",[e])},S.prototype.getShellRectangle=function(e){var t=e?p(d(this,"scenes"),"getScene",[e]):d(d(this,"scenes"),"currentScene");return t&&p(t,"shellRectangle",[])},S.prototype.renderTagBoxes=function(){return p(d(this,"scene"),"renderTagBoxes",[])},S.prototype.renderSvg=function(e,t){var r=e?p(d(this,"scenes"),"getScene",[e]):d(d(this,"scenes"),"currentScene");return r?p(r,"renderSvg",[t]):h([])},S.prototype.getInformationWithMemberId=function(e){return p(d(this,"membersManager"),"getInformationWithMemberId",[e])},S.prototype.getMemberState=function(e){return void 0===e&&(e=p(m,"getAuthorId",[])),e===d(m,"AdminObserverId")?d(this,"adminObserverMemberState"):p(d(this,"membersManager"),"getMemberState",[e])},S.prototype.getViewState=function(e){return void 0===e&&(e=p(m,"getAuthorId",[])),p(d(this,"membersManager"),"getViewState",[e])},S.prototype.getMemberIdWithUserId=function(e){return p(d(this,"membersManager"),"getMemberIdWithUserId",[e])},S.prototype.getBroadcasterId=function(){return p(d(this,"membersManager"),"getBroadcasterId",[])},S.prototype.updateTextarea=function(e){p(A,"updateTextarea",[d(this,"scene"),e])},S.prototype.getGlobalState=function(){return d(this,"_globalState")},S.prototype.getMemberDisplayers=function(){return p(d(this,"membersManager"),"getMemberDisplayers",[])},S.prototype.hitTest=function(e,t){var r=p(this,"selectorRadius",[]),n=p(y,"searchEditableComponentsByPoint",[d(this,"scene"),e,t,r]);return p(p(n,"map",[function(e){return d(e,"identifier")}]),"reverse",[])},S.prototype.selectorRadius=function(){switch(d(this,"deviceType")){case d(b.DeviceType,"Surface"):case d(b.DeviceType,"Desktop"):return 0;case d(b.DeviceType,"Touch"):return 36/d(p(this,"getViewState",[]),"pixelWidth")}},S.prototype.onMouseDown=function(e){var t=p(m,"getAuthorId",[]),r=p(d(this,"membersManager"),"currentAppliance",[t]);r&&(p(r,"onMouseDown",[e]),p(d(this,"membersManager"),"setCursor",[t,d(e,"x"),d(e,"y"),!0,!0]))},S.prototype.onMouseMove=function(e){var t=p(m,"getAuthorId",[]),r=p(d(this,"membersManager"),"currentAppliance",[t]);r&&(p(r,"onMouseMove",[e]),p(d(this,"membersManager"),"setCursor",[t,d(e,"x"),d(e,"y"),!0]))},S.prototype.onMouseUp=function(e){var t=p(m,"getAuthorId",[]),r=p(d(this,"membersManager"),"currentAppliance",[t]);r&&(p(r,"onMouseUp",[e]),p(d(this,"membersManager"),"setCursor",[t,d(e,"x"),d(e,"y"),!0,!1]))},S.prototype.onMouseLeave=function(e){var t=p(m,"getAuthorId",[]),r=p(d(this,"membersManager"),"currentAppliance",[t]);r&&(p(r,"onMouseLeave",[e]),p(d(this,"membersManager"),"setCursor",[t,d(e,"x"),d(e,"y"),!1]))},S.prototype.onKeyDown=function(e){var t=p(m,"getAuthorId",[]),r=p(d(this,"membersManager"),"currentAppliance",[t]);r&&p(r,"onKeyDown",[e])},S.prototype.onKeyUp=function(e){var t=p(m,"getAuthorId",[]),r=p(d(this,"membersManager"),"currentAppliance",[t]);r&&p(r,"onKeyUp",[e])},a([m.noEffects],S.prototype,"scene",null),S);function S(e){var t=s.call(this)||this;return u(t,"_globalState",e),u(t,"scenes",l(new P.SceneManager)),u(t,"membersManager",l(new g.MembersManager)),u(t,"adminObserverMemberState",p(t,"createMemberState",[h([0,0,0])])),t}t.AbstractApplianceManager=w,c.declareClass({classId:0,clazz:w,memberDecorators:{scene:[m.noEffects],onMemberEnterRoom:[m.event("Enter")],onMemberLeaveRoom:[m.event("Leave")],onRtcConnected:[m.event("RtcState")],onOthersEvent:[m.event(/./i)],getScene:[m.noEffects],getCurrentScenePath:[m.noEffects],getAllScenePaths:[m.noEffects],getSceneNames:[m.noEffects],getSceneGroupNames:[m.noEffects],getShellRectangle:[m.noEffects],renderTagBoxes:[m.noEffects],renderSvg:[m.noEffects],getInformationWithMemberId:[m.noEffects],getMemberState:[m.noEffects],getViewState:[m.noEffects],getMemberIdWithUserId:[m.noEffects],getBroadcasterId:[m.noEffects],getGlobalState:[m.noEffects],getMemberDisplayers:[m.noEffects],hitTest:[m.noEffects]}}),c=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.caller,c=a.getter,u=a.wrapper,l=a.creator,p=r(0),h=r(22),d=r(42),f=(i(m,o=a.baseClass()),Object.defineProperty(m.prototype,"key",{get:function(){return p.findIdentifierWith(this)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"identifier",{get:function(){return p.findIdentifierWith(this)},enumerable:!0,configurable:!0}),m.prototype.renderTagBoxes=function(){return null},m.prototype.renderSvg=function(){return null},m.prototype.pointHitTestContent=function(e,t,r){return!0},m.prototype.rectHitTestContent=function(e,t,r,n,i,o){return e},m.prototype.pointHitTest=function(e,t,r){var n=s(Math,"max",[c(this,"hitTestingBoxMargin"),r]);if(s(this,"testInEditableRectangle",[e,t,n])){var i=e-c(this,"originX"),o=t-c(this,"originY");return s(this,"pointHitTestContent",[i,o,n])}return!1},m.prototype.rectHitTest=function(e,t,r,n){var i=c(this,"hitTestingBoxMargin"),o=s(this,"rectangleTester",[i]),a=s(o,"rectHitTest",[e,t,r,n]);if(a===c(h.RectangleTestingResult,"Disjoint")||a===c(h.RectangleTestingResult,"IncludeByRectangle"))return a;var u=e-c(this,"originX"),l=t-c(this,"originY"),p=e+r-c(this,"originX"),d=t+n-c(this,"originY"),f=s(Math,"min",[u,p]),m=s(Math,"min",[l,d]),y=s(Math,"abs",[u-p]),A=s(Math,"abs",[l-d]);return s(this,"rectHitTestContent",[a,f,m,y,A,i])},m.prototype.testInEditableRectangle=function(e,t,r){var n=c(this,"originX")-r,i=c(this,"originY")-r,o=c(this,"width")+2*r,a=c(this,"height")+2*r;return s(d.RectangleTester,"testPoint",[n,i,o,a,e,t])},m.prototype.rectangleTester=function(e){var t=u(new h.ConvexPolygonTester),r=c(this,"originX")-e,n=c(this,"originY")-e,i=c(this,"width")+2*e,o=c(this,"height")+2*e;return s(t,"pushPoint",[l({x:r,y:n})]),s(t,"pushPoint",[l({x:r+i,y:n})]),s(t,"pushPoint",[l({x:r+i,y:n+o})]),s(t,"pushPoint",[l({x:r,y:n+o})]),t},m);function m(){return null!==o&&o.apply(this,arguments)||this}t.ApplianceComponent=f,a.declareClass({classId:1,clazz:f}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.setter,c=a.creator,u=a.getter,l=a.caller,p=r(60),h=(i(d,o=a.baseClass()),d.prototype.hitTest=function(e,t){var r=c({x:e-u(u(this,"originPoint"),"x"),y:t-u(u(this,"originPoint"),"y")}),n=l(Math,"atan2",[u(u(this,"beginVector"),"y"),u(u(this,"beginVector"),"x")]),i=l(Math,"atan2",[u(u(this,"endVector"),"y"),u(u(this,"endVector"),"x")]),o=l(Math,"atan2",[u(r,"y"),u(r,"x")]),a=l(this,"radiusIncrement",[o,n]),s=l(this,"radiusIncrement",[i,n]);if(s<a)return!1;var h=c({x:0,y:0}),d=l(p,"distance",[c({x:e,y:t}),u(this,"originPoint")]),f=l(p,"distance",[u(this,"beginVector"),h]);return d<=f+a/s*(l(p,"distance",[u(this,"endVector"),h])-f)},d.prototype.radiusIncrement=function(e,t){var r=t-e;return r>=2*u(Math,"PI")?r-=2*u(Math,"PI"):r<0&&(r+=2*u(Math,"PI")),r},d);function d(e,t,r){var n=o.call(this)||this;return n.originPoint=r,s(n,"beginVector",c({x:u(e,"x")-u(r,"x"),y:u(e,"y")-u(r,"y")})),s(n,"endVector",c({x:u(t,"x")-u(r,"x"),y:u(t,"y")-u(r,"y")})),n}t.SectorTester=h,a.declareClass({classId:9,clazz:h}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.creator,c=a.caller,u=a.getter,l=a.wrapper,p=r(60),h=r(91),d=r(90),f=(i(m,o=a.baseClass()),m.prototype.pushPoint=function(e){c(u(this,"points"),"push",[e])},m.prototype.hitTest=function(e,t,r){return c(this,"hitAnySegments",[e,t,r])||c(this,"hitAnyNodeCircles",[e,t,r])},m.prototype.hitAnySegments=function(e,t,r){for(var n=e/2,i=1;i<u(u(this,"points"),"length");++i){var o=u(u(this,"points"),i-1),a=u(u(this,"points"),i),d=s({x:u(a,"x")-u(o,"x"),y:u(a,"y")-u(o,"y")});if(!c(p,"isZero",[u(d,"x")])||!c(p,"isZero",[u(d,"y")])){var f=c(p,"unitVector",[c(p,"verticalVector",[d])]),m=l(new h.ConvexPolygonTester),y=c(p,"multiply",[-n,f]),A=c(p,"multiply",[n,f]);if(c(m,"pushPoint",[c(p,"plus",[o,A])]),c(m,"pushPoint",[c(p,"plus",[o,y])]),c(m,"pushPoint",[c(p,"plus",[a,y])]),c(m,"pushPoint",[c(p,"plus",[a,A])]),c(m,"pointHitTest",[t,r]))return!0}}return!1},m.prototype.hitAnyNodeCircles=function(e,t,r){for(var n=0;n<u(u(this,"points"),"length");++n){var i=u(u(this,"points"),n);if(d.inCircle(i,e/2,t,r))return!0}return!1},m);function m(){var e=null!==o&&o.apply(this,arguments)||this;return e.points=s([]),e}t.PolylineTester=f,a.declareClass({classId:7,clazz:f}),a=null},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.BelongsTo||(t.BelongsTo={})).None="none",n.Others="others",n.Me="me"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(0).__context("module"),c=s.setter,u=s.getter,l=s.creator,p=s.unwrapper,h=s.caller,d=s.wrapper,f=s.remover,m=r(61),y=(i(A,a=s.baseClass()),Object.defineProperty(A.prototype,"information",{get:function(){return u(this,"_information")},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"memberId",{get:function(){return u(this,"_memberId")},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"deviceType",{get:function(){return u(this,"_deviceType")},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"displayer",{get:function(){var e=u(this,"cursorX"),t=u(this,"cursorY"),r=u(u(this,"currentAppliance"),"fixedCursorInScenePoint");if(r){var n=u(r,"x"),i=u(r,"y"),a=u(this,"viewState"),s=u(a,"originX"),c=u(a,"originY"),h=u(a,"width"),d=u(a,"height");e=0===h?.5:(n-s)/h,t=0===d?.5:(i-c)/d}return l(o({},p(u(this,"viewState")),{cursorX:e,cursorY:t,memberId:u(this,"_memberId"),deviceType:u(this,"_deviceType"),isRtcConnected:u(this,"isRtcConnected"),isPressed:u(this,"isPressed"),isActivity:!!r||u(this,"isPressed"),isCursorInScene:!!r||u(this,"isCursorInScene"),currentApplianceName:u(u(this,"memberState"),"currentApplianceName"),color:u(u(this,"memberState"),"strokeColor"),information:u(this,"_information")}))},enumerable:!0,configurable:!0}),A.prototype.isCursorOutOfBounds=function(){return 1<u(this,"cursorX")||u(this,"cursorX")<0||1<u(this,"cursorY")||u(this,"cursorY")<0},Object.defineProperty(A.prototype,"currentAppliance",{get:function(){return u(u(this,"appliances"),u(u(this,"memberState"),"currentApplianceName"))},enumerable:!0,configurable:!0}),A.prototype.setViewMode=function(e){c(u(this,"viewState"),"mode",e)},A.prototype.notifyAllThatSceneChanged=function(e){for(var t in p(u(this,"appliances")))h(u(u(this,"appliances"),t),"onSceneChanged",[e])},A.prototype.getMemberState=function(){return u(this,"memberState")},A.prototype.getViewState=function(){return u(this,"viewState")},A.prototype.setCursor=function(e,t,r,n){var i=u(this,"viewState"),o=u(i,"originX"),a=u(i,"originY"),s=u(i,"width"),l=u(i,"height");c(this,"cursorX",0===s?.5:(e-o)/s),c(this,"cursorY",0===l?.5:(t-a)/l),void 0!==r&&c(this,"isCursorInScene",r),void 0!==n&&c(this,"isPressed",n)},A.prototype.changeToFollower=function(e){var t=u(this,"viewState");if(c(this,"viewState",l(o({},p(t),p(e),{mode:u(m.ViewMode,"Follower")}))),0!==u(t,"width")&&0!==u(t,"height")){var r=u(e,"width")/u(t,"width"),n=u(e,"height")/u(t,"height"),i=h(Math,"max",[r,n]),a=(u(t,"width")*i-u(e,"width"))/2,s=(u(t,"height")*i-u(e,"height"))/2;c(this,"cursorX",u(this,"cursorX")-a/u(e,"width")),c(this,"cursorY",u(this,"cursorY")-s/u(e,"height"))}},A.prototype.setMemberState=function(e){var t=u(this,"memberState");for(var r in c(this,"memberState",l(o({},p(t),p(e)))),p(u(this,"appliances")))h(u(u(this,"appliances"),r),"onMemberStateChanged",[u(this,"memberState"),t]);return u(this,"memberState")},A.prototype.setViewState=function(e){var t=u(this,"viewState");return c(this,"viewState",l(o({},p(t),p(e)))),u(this,"viewState")},A.prototype.dispatchMagixEvent=function(e,t){for(var r in p(u(this,"appliances")))h(u(u(this,"appliances"),r),"onMagixEvent",[e,t])},A.prototype.destroy=function(){for(var e in p(u(this,"appliances")))h(u(u(this,"appliances"),e),"onDestroy",[])},A);function A(e,t,r,n,i,o){var s=a.call(this)||this;return s.isRtcConnected=!1,s.cursorX=0,s.cursorY=0,s.isPressed=!1,s.isCursorInScene=!1,c(s,"_memberId",e),c(s,"_deviceType",t),c(s,"appliances",r),c(s,"memberState",n),c(s,"viewState",i),c(s,"_information",o),s}var g,v=(i(b,g=s.baseClass()),b.prototype.isMemberExits=function(e){return!!u(u(this,"membersMap"),e)},b.prototype.getBroadcasterId=function(){return u(this,"broadcasterId")},b.prototype.findMemberIdWithUserId=function(e){for(var t in p(u(this,"membersMap"))){var r=u(u(this,"membersMap"),t);if(e===(u(r,"information")&&u(u(r,"information"),"id")))return parseInt(t)}},b.prototype.getInformationWithMemberId=function(e){return u(u(this,"membersMap"),e)&&u(u(u(this,"membersMap"),e),"information")},b.prototype.getMemberDisplayers=function(){var e=l([]);for(var t in p(u(this,"membersMap"))){var r=u(u(this,"membersMap"),t);h(e,"push",[u(r,"displayer")])}return e},b.prototype.memberEnter=function(e){var t=u(e,"memberId"),r=u(e,"deviceType"),n=u(e,"information"),i=u(e,"appliances"),o=u(e,"memberState");c(u(this,"membersMap"),t,d(new y(t,r,i,o,h(this,"enterMemberViewState",[]),n))),h(this,"compareDirector",[t,u(this,"directorId")])<0&&c(this,"directorId",t)},b.prototype.enterMemberViewState=function(){if(void 0===u(this,"broadcasterId"))return l({mode:u(m.ViewMode,"Freedom"),pixelWidth:1,originX:0,originY:0,width:0,height:0});var e=h(u(u(this,"membersMap"),u(this,"broadcasterId")),"getViewState",[]);return l({mode:u(m.ViewMode,"Follower"),pixelWidth:u(e,"pixelWidth"),originX:u(e,"originX"),originY:u(e,"originY"),width:u(e,"width"),height:u(e,"height")})},b.prototype.memberLeave=function(e){var t=u(u(this,"membersMap"),e);t&&(h(t,"destroy",[]),f(u(this,"membersMap"),e),u(this,"broadcasterId")===e&&h(this,"cancelBroadcaster",[]),h(this,"updateDirector",[]))},b.prototype.updateDirector=function(){var e=l([]);for(var t in p(u(this,"membersMap")))h(e,"push",[parseInt(t)]);0===u(e,"length")?c(this,"directorId",void 0):(h(e,"sort",[h(u(this,"compareDirector"),"bind",[this])]),c(this,"directorId",u(e,0)))},b.prototype.getDeviceType=function(e){return u(u(u(this,"membersMap"),e),"deviceType")},b.prototype.getMemberState=function(e){var t=u(u(this,"membersMap"),e);return t?h(t,"getMemberState",[]):void 0},b.prototype.getMemberIdWithUserId=function(e){for(var t in p(u(this,"membersMap"))){var r=u(u(this,"membersMap"),t);if(u(r,"information")&&u(u(r,"information"),"id")===e)return u(r,"memberId")}},b.prototype.getViewState=function(e){var t=u(u(this,"membersMap"),e);return t?h(t,"getViewState",[]):void 0!==u(this,"directorId")?h(u(u(this,"membersMap"),u(this,"directorId")),"getViewState",[]):l({mode:u(m.ViewMode,"Freedom"),pixelWidth:1,originX:0,originY:0,width:0,height:0})},b.prototype.setMemberState=function(e,t){return h(u(u(this,"membersMap"),e),"setMemberState",[t])},b.prototype.setViewState=function(e,t){var r=u(t,"mode");r!==u(m.ViewMode,"Follower")||void 0!==u(this,"broadcasterId")&&u(this,"broadcasterId")!==e||(f(t,"mode"),r=void 0);var n=h(u(u(this,"membersMap"),e),"setViewState",[t]);return r===u(m.ViewMode,"Freedom")?u(this,"broadcasterId")===e&&h(this,"cancelBroadcaster",[]):r===u(m.ViewMode,"Broadcaster")?h(this,"becomeNewBroadcast",[e]):u(n,"mode")===u(m.ViewMode,"Broadcaster")&&h(this,"broadcastViewToAllRoom",[]),n},b.prototype.setCursor=function(e,t,r,n,i){h(u(u(this,"membersMap"),e),"setCursor",[t,r,n,i])},b.prototype.setRtcState=function(e,t){c(u(u(this,"membersMap"),e),"isRtcConnected",t)},b.prototype.dispatchMagixEvent=function(e,t,r){h(u(u(this,"membersMap"),e),"dispatchMagixEvent",[t,r])},b.prototype.notifyAllThatSceneChanged=function(e){for(var t in p(u(this,"membersMap")))h(u(u(this,"membersMap"),t),"notifyAllThatSceneChanged",[e])},b.prototype.currentAppliance=function(e){return u(u(u(this,"membersMap"),e),"currentAppliance")},b.prototype.cancelBroadcaster=function(){for(var e in p(u(this,"membersMap")))parseInt(e)!==u(this,"broadcasterId")&&h(u(u(this,"membersMap"),e),"setViewMode",[u(m.ViewMode,"Freedom")]);c(this,"broadcasterId",void 0)},b.prototype.becomeNewBroadcast=function(e){var t=h(u(u(this,"membersMap"),e),"getViewState",[]),r=u(t,"originX"),n=u(t,"originY"),i=u(t,"width"),o=u(t,"height"),a=l({originX:r,originY:n,width:i,height:o});for(var s in p(u(this,"membersMap")))parseInt(s)!==e&&h(u(u(this,"membersMap"),s),"changeToFollower",[a]);c(this,"broadcasterId",e)},b.prototype.broadcastViewToAllRoom=function(){var e=h(u(u(this,"membersMap"),u(this,"broadcasterId")),"getViewState",[]),t=u(e,"originX"),r=u(e,"originY"),n=u(e,"width"),i=u(e,"height"),o=l({originX:t,originY:r,width:n,height:i});for(var a in p(u(this,"membersMap"))){var s=u(u(this,"membersMap"),a);u(h(s,"getViewState",[]),"mode")===u(m.ViewMode,"Follower")&&h(s,"setViewState",[o])}},b.prototype.initiativeColor=function(){for(var e=0,t=p(u(this,"initiativeColors"));e<t.length;e++){var r=t[e];if(!h(this,"anyMemberHasColor",[r]))return r}var n=0;for(var i in p(u(this,"membersMap")))n++;var o=n%u(u(this,"initiativeColors"),"length");return u(u(this,"initiativeColors"),o)},b.prototype.anyMemberHasColor=function(e){for(var t in p(u(this,"membersMap")))if(h(b,"isColorEquals",[e,u(h(u(u(this,"membersMap"),t),"getMemberState",[]),"strokeColor")]))return!0;return!1},b.isColorEquals=function(e,t){return u(e,0)===u(t,0)&&u(e,1)===u(t,1)&&u(e,2)===u(t,2)},b.prototype.compareDirector=function(e,t){if(e===t)return 0;if(void 0===e&&void 0!==t)return 1;if(void 0!==e&&void 0===t)return-1;if(e===u(this,"broadcasterId"))return-1;if(t===u(this,"broadcasterId"))return 1;var r=u(u(this,"membersMap"),e),n=u(u(this,"membersMap"),t);if(u(r,"information")&&!u(n,"information"))return-1;if(!u(r,"information")&&u(n,"information"))return 1;if(!u(r,"information")&&!u(n,"information"))return u(r,"memberId")-u(n,"memberId");var i=u(r,"information"),o=u(n,"information");if(u(i,"isOwner")&&!u(o,"isOwner"))return-1;if(!u(i,"isOwner")&&u(o,"isOwner"))return 1;var a=u(i,"id"),s=u(o,"id");return a===s?u(r,"memberId")-u(n,"memberId"):a-s},b);function b(){var e=null!==g&&g.apply(this,arguments)||this;return e.initiativeColors=m.getInitiativeColors(),e.membersMap=l({}),e}t.MembersManager=v,s.declareClass({classId:3,clazz:y}),s.declareClass({classId:4,clazz:v}),s=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0).__context("module"),i=n.creator;t.getInitiativeColors=function(){return i([i([236,52,85]),i([0,91,246]),i([245,173,70]),i([104,171,93]),i([158,81,182])])},n=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(0).__context("module"),c=s.setter,u=s.caller,l=s.creator,p=s.getter,h=s.wrapper,d=s.unwrapper,f=s.remover,m=r(0),y=r(62),A=(i(g,a=s.baseClass()),Object.defineProperty(g.prototype,"currentPath",{get:function(){return p(this,"_currentPath")},set:function(e){if(!u(this,"getScene",[e]))throw h(new Error("/"+u(e,"join",["/"])+" is not a scene"));c(this,"_currentPath",e)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"currentScene",{get:function(){return u(this,"getScene",[p(this,"_currentPath")])},enumerable:!0,configurable:!0}),g.prototype.getScene=function(e){e=l(d(e).slice());var t=u(e,"pop",[]);if(void 0!==t){var r=u(this,"findSceneGroup",[e]);if(r){var n=p(p(r,"scenesMap"),t);if(n)return n}}},g.prototype.listScenes=function(e){var t=l([]),r=u(this,"findSceneGroup",[e]);if(r)for(var n=0,i=d(p(r,"scenesList"));n<i.length;n++){var o=i[n],a=p(o,"name");u(t,"push",[a])}return t},g.prototype.listSceneGroups=function(e){var t=l([]),r=u(this,"findSceneGroup",[e]);if(r)for(var n=0,i=d(p(r,"groupsList"));n<i.length;n++){var o=i[n],a=p(o,"name");u(t,"push",[a])}return t},g.prototype.listAllScenes=function(){var e=l([]);return u(this,"collectScenes",[p(this,"rootSceneGroup"),l([]),e]),e},g.prototype.collectScenes=function(e,t,r){for(var n=0,i=d(p(e,"groupsList"));n<i.length;n++){var o=i[n],a=l(d(t).concat([p(o,"name")]));u(this,"collectScenes",[o,a,r])}for(var s=0,c=d(p(e,"scenesList"));s<c.length;s++){var h=c[s];u(r,"push",[l(d(t).concat([p(h,"name")]))])}},g.prototype.putScene=function(e,t,r){var n=u(this,"makeSceneGroup",[e]);if(!n||p(p(n,"groupsMap"),p(t,"name")))return!1;var i=p(p(n,"scenesMap"),p(t,"name"));if(i){var o=u(p(n,"scenesList"),"indexOf",[i]);c(p(n,"scenesList"),o,t),c(p(n,"scenesMap"),p(t,"name"),t)}else u(this,"insertScene",[n,t,r]);return!0},g.prototype.removePath=function(e){for(var t=null,r=p(this,"rootSceneGroup"),n=p(p(this,"rootSceneGroup"),"name"),i=0;i<p(e,"length");++i)if(n=p(e,i),!(r=p(p(t=r,"groupsMap"),n))){if(i<p(e,"length")-1)return!1;break}if(!t)return c(this,"rootSceneGroup",u(this,"createRootSceneGroup",[])),c(this,"_currentPath",l(["init"])),!0;var o=null;if(u(this,"checkPathIncludesPrefix",[p(this,"_currentPath"),e])&&(o=u(this,"findNextScenePathInTree",[e])||l(["init"])),r){var a=u(p(t,"groupsList"),"indexOf",[r]);u(p(t,"groupsList"),"splice",[a,1]),f(p(t,"groupsMap"),p(r,"name"))}else{var s=p(p(t,"scenesMap"),n);if(!s)return!1;a=u(p(t,"scenesList"),"indexOf",[s]),u(p(t,"scenesList"),"splice",[a,1]),f(p(t,"scenesMap"),n)}return u(this,"cleanIfSceneGroupEmpty",[e]),o&&c(this,"_currentPath",o),!0},g.prototype.moveScene=function(e,t,r){t=l(d(t).slice());var n=null,i=!1;u(this,"isPathEquals",[e,p(this,"_currentPath")])&&(n=l(d(t).slice()));var o=u(this,"getScene",[e]),a=u(t,"pop",[]);return o&&void 0!==a&&(c(o,"name",a),u(this,"removePath",[e]),(i=u(this,"putScene",[t,o,r]))||(e=l(d(e).slice()),c(o,"name",u(e,"pop",[])),u(this,"putScene",[e,o]))),i&&n&&c(this,"_currentPath",n),i},g.prototype.cleanIfSceneGroupEmpty=function(e){for(var t=p(this,"rootSceneGroup"),r=l([p(this,"rootSceneGroup")]),n=0;n<p(e,"length")-1;++n)t=p(p(t,"groupsMap"),p(e,n)),u(r,"push",[t]);for(n=p(r,"length")-1;0<n;n--){var i=p(r,n),o=p(r,n-1);if(u(this,"isSceneGroupEmpty",[i])){var a=u(p(o,"groupsList"),"indexOf",[i]);u(p(o,"groupsList"),"splice",[a,1]),f(p(o,"groupsMap"),p(i,"name"))}}u(this,"isSceneGroupEmpty",[p(this,"rootSceneGroup")])&&c(this,"rootSceneGroup",u(this,"createRootSceneGroup",[]))},g.prototype.isSceneGroupEmpty=function(e){return 0===p(p(e,"groupsList"),"length")&&0===p(p(e,"scenesList"),"length")},g.prototype.findSceneOrGroup=function(e){if(0===p(e,"length"))return p(this,"rootSceneGroup");e=l(d(e).slice());var t=u(e,"pop",[]),r=u(this,"findSceneGroup",[e]);return r?p(p(r,"groupsMap"),t)||p(p(r,"scenesMap"),t):void 0},g.prototype.findSceneGroup=function(e){for(var t=p(this,"rootSceneGroup"),r=0,n=d(e);r<n.length;r++){var i=n[r];if(!(t=p(p(t,"groupsMap"),i)))return null}return t},g.prototype.makeSceneGroup=function(e){for(var t=p(this,"rootSceneGroup"),r=0,n=d(e);r<n.length;r++){var i=n[r];if(p(p(t,"scenesMap"),i))return null;var o=p(p(t,"groupsMap"),i);o||(o=u(this,"createSceneGroup",[i]),c(p(t,"groupsMap"),i,o),u(p(t,"groupsList"),"push",[o])),t=o}return t},g.prototype.insertScene=function(e,t,r){void 0===r||r<0||r>=p(p(e,"scenesList"),"length")?u(p(e,"scenesList"),"push",[t]):u(p(e,"scenesList"),"splice",[r,0,t]),c(p(e,"scenesMap"),p(t,"name"),t)},g.prototype.createRootSceneGroup=function(){var e=u(this,"createSceneGroup",[""]),t=h(new y.SceneNode("init"));return u(p(e,"scenesList"),"push",[t]),c(p(e,"scenesMap"),p(t,"name"),t),e},g.prototype.findNextScenePathInTree=function(e){var t=u(l(d(e).slice()),"reverse",[]),r=u(this,"findNextPathStackInTree",[t,p(this,"rootSceneGroup")]);if(!r)return null;var n=u(r,"reverse",[]),i=u(this,"findSceneOrGroup",[n]);if(!i)return null;if(d(i)instanceof y.SceneNode)return n;for(var o=i;;){var a=p(p(o,"groupsList"),0);if(!a)return u(n,"push",[p(p(p(o,"scenesList"),0),"name")]),n;u(n,"push",[p(a,"name")]),o=a}},g.prototype.findNextPathStackInTree=function(e,t){var r=u(e,"pop",[]),n=p(p(t,"groupsMap"),r);if(0<p(e,"length")&&n){var i=u(this,"findNextPathStackInTree",[e,n]);if(i)return u(i,"push",[r]),i}var o=u(this,"findNextName",[t,r]);return null===o?null:l([o])},g.prototype.findNextName=function(e,t){var r=p(p(e,"groupsMap"),t),n=null;if(r){var i=u(p(e,"groupsList"),"indexOf",[r]);(o=p(p(e,"groupsList"),i+1)||p(p(e,"scenesList"),0)||p(p(e,"groupsList"),i-1))&&(n=p(o,"name"))}else{var o,a=p(p(e,"scenesMap"),t);a&&(i=u(p(e,"scenesList"),"indexOf",[a]),(o=p(p(e,"scenesList"),i+1)||p(p(e,"scenesList"),i-1)||p(p(e,"groupsList"),p(p(e,"groupsList"),"length")-1))&&(n=p(o,"name")))}return n},g.prototype.createSceneGroup=function(e){return l({name:e,groupsList:l([]),groupsMap:l({}),scenesList:l([]),scenesMap:l({})})},g.prototype.isPathEquals=function(e,t){if(p(e,"length")!==p(t,"length"))return!1;for(var r=0;r<p(e,"length");++r)if(p(e,r)!==p(t,r))return!1;return!0},g.prototype.checkPathIncludesPrefix=function(e,t){for(var r=0;r<p(t,"length");++r)if(p(t,r)!==p(e,r))return!1;return!0},o([m.noEffects],g.prototype,"currentPath",null),o([m.noEffects],g.prototype,"currentScene",null),g);function g(){var e=a.call(this)||this;return c(e,"rootSceneGroup",u(e,"createRootSceneGroup",[])),c(e,"_currentPath",l(["init"])),e}t.SceneManager=A,s.declareClass({classId:28,clazz:A,memberDecorators:{currentSceneCache:[m.transient],currentPath:[m.noEffects],currentScene:[m.noEffects],getScene:[m.noEffects]}}),s=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.creator,c=a.getter,u=a.caller,l=a.wrapper,p=(i(h,o=a.baseClass()),Object.defineProperty(h.prototype,"componentsLength",{get:function(){return c(c(this,"components"),"length")},enumerable:!0,configurable:!0}),h.prototype.componentAt=function(e){return c(c(this,"components"),e)},h.prototype.addComponent=function(e){u(c(this,"components"),"push",[e])},h.prototype.addComponentAt=function(e,t){if(t<0||t>c(c(this,"components"),"length"))throw l(new Error("index should be 0~"+c(c(this,"components"),"length")+", instead of "+t));u(c(this,"components"),"splice",[t,0,e])},h.prototype.indexOfComponent=function(e){return u(c(this,"components"),"indexOf",[e])},h.prototype.removeComponent=function(e){var t=u(c(this,"components"),"indexOf",[e]);-1!==t&&u(c(this,"components"),"splice",[t,1])},h.prototype.forEachComponents=function(e){u(c(this,"components"),"forEach",[e])},h.prototype.componentsWithFilter=function(e){return u(c(this,"components"),"filter",[e])},h.prototype.findComponentFromBottom=function(e){for(var t=0;t<c(c(this,"components"),"length");++t){var r=c(c(this,"components"),t);if(e(r,t))return r}},h.prototype.findComponentFromTop=function(e){for(var t=c(c(this,"components"),"length")-1;0<=t;--t){var r=c(c(this,"components"),t);if(e(r,t))return r}},h.prototype.removeComponentAt=function(e){if(e<0||e>=c(c(this,"components"),"length"))throw l(new Error("index should be 0~"+(c(c(this,"components"),"length")-1)+", instead of "+e));return c(u(c(this,"components"),"splice",[e,1]),0)},h);function h(){var e=null!==o&&o.apply(this,arguments)||this;return e.components=s([]),e}t.ApplianceComponentContainer=p,a.declareClass({classId:2,clazz:p}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.getter,c=a.caller,u=a.setter,l=a.creator,p=a.unwrapper,h=(i(d,o=a.baseClass()),Object.defineProperty(d.prototype,"isDragging",{get:function(){return!!s(this,"pressedPoint")&&!s(this,"dragEventsBuffer")},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"needBufferDragEvent",{get:function(){return!!s(this,"dragEventsBuffer")},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isPressDown",{get:function(){return!!s(this,"pressedPoint")},enumerable:!0,configurable:!0}),d.prototype.onKeyUp=function(e){},d.prototype.onKeyDown=function(e){},d.prototype.onDestroy=function(){},d.prototype.onMouseLeave=function(e){},d.prototype.onDraggingStateChanged=function(e){},d.prototype.onDrag=function(e){},d.prototype.onHover=function(e){},d.prototype.onClick=function(e){},d.prototype.makeSureItsDraggingEvent=function(e){return!1},d.prototype.onMemberStateChanged=function(e,t){},d.prototype.onMagixEvent=function(e,t){},d.prototype.onSceneChanged=function(e){},d.prototype.onPressedAndDrag=function(e){s(this,"needBufferDragEvent")?(c(s(this,"dragEventsBuffer"),"push",[e]),c(this,"checkShouldChangeGestureToDrag",[e])):c(this,"invokeCallback",[s(this,"onDrag"),e])},d.prototype.onMouseDown=function(e){u(this,"pressedPoint",l({x:s(e,"x"),y:s(e,"y")})),c(this,"makeSureItsDraggingEvent",[e])?c(this,"invokeCallback",[s(this,"onDraggingStateChanged"),e]):u(this,"dragEventsBuffer",l([])),c(this,"onPressedAndDrag",[e])},d.prototype.onMouseMove=function(e){s(this,"isPressDown")?c(this,"onPressedAndDrag",[e]):c(this,"invokeCallback",[s(this,"onHover"),e])},d.prototype.onMouseUp=function(e){var t=!1;c(this,"onPressedAndDrag",[e]),s(this,"needBufferDragEvent")&&(u(this,"dragEventsBuffer",null),c(this,"invokeCallback",[s(this,"onClick"),e]),t=!0),u(this,"pressedPoint",null),t||c(this,"invokeCallback",[s(this,"onDraggingStateChanged"),e])},d.prototype.checkShouldChangeGestureToDrag=function(e){if(c(this,"shouldChangeGestureToDrag",[s(e,"x"),s(e,"y")])){var t=s(this,"dragEventsBuffer");if(u(this,"dragEventsBuffer",null),0<s(t,"length")){var r=s(t,0);c(this,"invokeCallback",[s(this,"onDraggingStateChanged"),r]);for(var n=0,i=p(t);n<i.length;n++){var o=i[n];c(this,"invokeCallback",[s(this,"onDrag"),o])}}}},d.prototype.shouldChangeGestureToDrag=function(e,t){var r=s(s(this,"pressedPoint"),"x")-e,n=s(s(this,"pressedPoint"),"y")-t;return 16<r*r+n*n},d.prototype.invokeCallback=function(e,t){try{c(e,"call",[this,t])}catch(e){c(console,"error",[e])}},d);function d(){var e=null!==o&&o.apply(this,arguments)||this;return e.pressedPoint=null,e.dragEventsBuffer=null,e}t.Gesture=h,a.declareClass({classId:26,clazz:h}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(43));var n=r(61);t.DeviceType=n.DeviceType,t.ViewMode=n.ViewMode;var i=r(94);t.SceneNode=i.SceneNode;var o=r(32);t.ApplianceComponent=o.ApplianceComponent;var a=r(14);t.Editable=a.Editable;var s=r(176);t.EllipseShape=s.EllipseShape;var c=r(177);t.RectangleShape=c.RectangleShape;var u=r(178);t.CurveShape=u.CurveShape;var l=r(179);t.EditorRectangleSpace=l.EditorRectangleSpace;var p=r(180);t.SelectedGroupRectangleSpace=p.SelectedGroupRectangleSpace;var h=r(93);t.ImageShape=h.ImageShape;var d=r(44);t.TextareaShape=d.TextareaShape;var f=r(62);t.BackgroundImage=f.BackgroundImage},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(0).__context("module"),c=s.setter,u=s.getter,l=s.caller,p=s.wrapper,h=s.creator,d=s.jsxUnwrapper,f=r(0),m=r(23),y=r(14),A=r(349),g=r(22),v=(i(b,a=s.wrapSuperClass(m.Gesture)),Object.defineProperty(b.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),b.prototype.onKeyUp=function(e){"Shift"===u(e,"key")&&(c(this,"isShiftPress",!1),u(this,"beginPoint")&&l(this,"refreshPaintingEllipseShape",[]))},b.prototype.onKeyDown=function(e){"Shift"===u(e,"key")&&(c(this,"isShiftPress",!0),u(this,"beginPoint")&&l(this,"refreshPaintingEllipseShape",[]))},b.prototype.onSceneChanged=function(){c(this,"isShiftPress",!1)},b.prototype.onDraggingStateChanged=function(e){var t=u(e,"x"),r=u(e,"y");u(this,"isDragging")?(c(this,"paintingEllipseShape",p(new w(u(this,"context")))),c(u(this,"paintingEllipseShape"),"originX",t),c(u(this,"paintingEllipseShape"),"originY",r),l(u(u(this,"context"),"scene"),"addComponent",[u(this,"paintingEllipseShape")]),c(this,"beginPoint",h({x:t,y:r}))):(l(u(this,"paintingEllipseShape"),"completePainting",[]),c(this,"paintingEllipseShape",null),c(this,"beginPoint",null))},b.prototype.onDrag=function(e){var t=u(e,"x"),r=u(e,"y");c(this,"latestDragX",t),c(this,"latestDragY",r),l(this,"refreshPaintingEllipseShape",[])},b.prototype.refreshPaintingEllipseShape=function(){var e=u(this,"paintingEllipseShape");if(c(e,"originX",l(Math,"min",[u(this,"latestDragX"),u(u(this,"beginPoint"),"x")])),c(e,"originY",l(Math,"min",[u(this,"latestDragY"),u(u(this,"beginPoint"),"y")])),u(this,"isShiftPress")){var t=l(Math,"abs",[u(this,"latestDragX")-u(u(this,"beginPoint"),"x")]),r=l(Math,"abs",[u(this,"latestDragY")-u(u(this,"beginPoint"),"y")]),n=l(Math,"max",[t,r]);c(e,"width",n),c(e,"height",n)}else c(e,"width",l(Math,"abs",[u(this,"latestDragX")-u(u(this,"beginPoint"),"x")])),c(e,"height",l(Math,"abs",[u(this,"latestDragY")-u(u(this,"beginPoint"),"y")]))},b.prototype.onDestroy=function(){u(this,"paintingEllipseShape")&&l(u(this,"paintingEllipseShape"),"completePainting",[])},b);function b(e){var t=a.call(this)||this;return t.paintingEllipseShape=null,t.beginPoint=null,t.isShiftPress=!1,t.latestDragX=0,t.latestDragY=0,c(t,"context",e),t}t.EllipseAppliance=v;var P,w=(i(S,P=s.wrapSuperClass(y.Editable)),Object.defineProperty(S.prototype,"selectable",{get:function(){return!u(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"hitTestingBoxMargin",{get:function(){return u(u(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),S.prototype.completePainting=function(){c(this,"isPainting",!1)},S.prototype.pointHitTestContent=function(e,t,r){var n=l(this,"outerEllipseTester",[r]);if(!l(n,"pointHitTest",[e,t]))return!1;var i=l(this,"innerEllipseTester",[r]);return!i||!l(i,"pointHitTest",[e,t])},S.prototype.rectHitTestContent=function(e,t,r,n,i,o){var a=l(this,"outerEllipseTester",[o]),s=l(a,"rectHitTest",[t,r,n,i]);if(s===u(g.RectangleTestingResult,"IncludeRectangle")){var c=l(this,"innerEllipseTester",[o]);if(c)switch(l(c,"rectHitTest",[t,r,n,i])){case u(g.RectangleTestingResult,"Disjoint"):return u(g.RectangleTestingResult,"IncludeRectangle");case u(g.RectangleTestingResult,"IncludeByRectangle"):case u(g.RectangleTestingResult,"Cross"):return u(g.RectangleTestingResult,"Cross");case u(g.RectangleTestingResult,"IncludeRectangle"):return u(g.RectangleTestingResult,"Disjoint")}}return s},S.prototype.outerEllipseTester=function(e){var t=u(this,"width")+2*e,r=u(this,"height")+2*e,n=u(this,"width")/2,i=u(this,"height")/2;return p(new A.EllipseTester(n,i,t,r))},S.prototype.innerEllipseTester=function(e){var t=u(this,"width")-2*e,r=u(this,"height")-2*e;if(!(t<=0||r<=0)){var n=u(this,"width")/2,i=u(this,"height")/2;return p(new A.EllipseTester(n,i,t,r))}},S.prototype.renderSvgContent=function(){var e=u(u(this,"state"),"strokeColor"),t=u(e,0),r=u(e,1),n=u(e,2);return f.createElement("ellipse",{key:d(u(this,"key")),style:d(h({stroke:"rgb("+t+","+r+","+n+")",fill:"none",strokeWidth:u(u(this,"state"),"strokeWidth")})),cx:d(""+u(this,"width")/2),cy:d(""+u(this,"height")/2),rx:d(""+u(this,"width")/2),ry:d(""+u(this,"height")/2)})},o([f.noEffects],S.prototype,"selectable",null),o([f.noEffects],S.prototype,"hitTestingBoxMargin",null),S);function S(e){var t=P.call(this,e)||this;return t.originX=0,t.originY=0,t.width=0,t.height=0,t.isPainting=!0,c(t,"state",l(e,"getMemberState",[])),t}t.EllipseShape=w,s.declareClass({classId:13,clazz:v,superClass:m.Gesture}),s.declareClass({classId:14,clazz:w,superClass:y.Editable,memberDecorators:{selectable:[f.noEffects],hitTestingBoxMargin:[f.noEffects]}}),s=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(0).__context("module"),c=s.setter,u=s.getter,l=s.caller,p=s.wrapper,h=s.creator,d=s.jsxUnwrapper,f=r(0),m=r(23),y=r(14),A=r(22),g=(i(v,a=s.wrapSuperClass(m.Gesture)),Object.defineProperty(v.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),v.prototype.onKeyUp=function(e){"Shift"===u(e,"key")&&(c(this,"isShiftPress",!1),u(this,"beginPoint")&&l(this,"refreshPaintingRectangleShape",[]))},v.prototype.onKeyDown=function(e){"Shift"===u(e,"key")&&(c(this,"isShiftPress",!0),u(this,"beginPoint")&&l(this,"refreshPaintingRectangleShape",[]))},v.prototype.onSceneChanged=function(){c(this,"isShiftPress",!1)},v.prototype.onDraggingStateChanged=function(e){var t=u(e,"x"),r=u(e,"y");u(this,"isDragging")?(c(this,"paintingRectangleShape",p(new P(u(this,"context")))),c(u(this,"paintingRectangleShape"),"originX",t),c(u(this,"paintingRectangleShape"),"originY",r),l(u(u(this,"context"),"scene"),"addComponent",[u(this,"paintingRectangleShape")]),c(this,"beginPoint",h({x:t,y:r}))):(l(u(this,"paintingRectangleShape"),"completePainting",[]),c(this,"paintingRectangleShape",null),c(this,"beginPoint",null))},v.prototype.onDrag=function(e){var t=u(e,"x"),r=u(e,"y");c(this,"latestDragX",t),c(this,"latestDragY",r),l(this,"refreshPaintingRectangleShape",[])},v.prototype.refreshPaintingRectangleShape=function(){var e=u(this,"paintingRectangleShape");if(c(e,"originX",l(Math,"min",[u(this,"latestDragX"),u(u(this,"beginPoint"),"x")])),c(e,"originY",l(Math,"min",[u(this,"latestDragY"),u(u(this,"beginPoint"),"y")])),u(this,"isShiftPress")){var t=l(Math,"abs",[u(this,"latestDragX")-u(u(this,"beginPoint"),"x")]),r=l(Math,"abs",[u(this,"latestDragY")-u(u(this,"beginPoint"),"y")]),n=l(Math,"max",[t,r]);c(e,"width",n),c(e,"height",n)}else c(e,"width",l(Math,"abs",[u(this,"latestDragX")-u(u(this,"beginPoint"),"x")])),c(e,"height",l(Math,"abs",[u(this,"latestDragY")-u(u(this,"beginPoint"),"y")]))},v.prototype.onDestroy=function(){u(this,"paintingRectangleShape")&&l(u(this,"paintingRectangleShape"),"completePainting",[])},v);function v(e){var t=a.call(this)||this;return t.paintingRectangleShape=null,t.beginPoint=null,t.isShiftPress=!1,t.latestDragX=0,t.latestDragY=0,c(t,"context",e),t}t.RectangleAppliance=g;var b,P=(i(w,b=s.wrapSuperClass(y.Editable)),Object.defineProperty(w.prototype,"selectable",{get:function(){return!u(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"hitTestingBoxMargin",{get:function(){return u(u(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),w.prototype.completePainting=function(){c(this,"isPainting",!1)},w.prototype.pointHitTestContent=function(e,t,r){var n=l(this,"innerRectangleTester",[r]);return!n||!l(n,"pointHitTest",[e,t])},w.prototype.rectHitTestContent=function(e,t,r,n,i,o){if(e===u(A.RectangleTestingResult,"IncludeRectangle")){var a=l(this,"innerRectangleTester",[o]);if(a)switch(l(a,"rectHitTest",[t,r,n,i])){case u(A.RectangleTestingResult,"Disjoint"):return u(A.RectangleTestingResult,"IncludeRectangle");case u(A.RectangleTestingResult,"IncludeByRectangle"):case u(A.RectangleTestingResult,"Cross"):return u(A.RectangleTestingResult,"Cross");case u(A.RectangleTestingResult,"IncludeRectangle"):return u(A.RectangleTestingResult,"Disjoint")}}return e},w.prototype.innerRectangleTester=function(e){var t=p(new A.ConvexPolygonTester),r=e,n=e,i=u(this,"width")-2*e,o=u(this,"height")-2*e;if(!(i<=0||o<=0))return l(t,"pushPoint",[h({x:r,y:n})]),l(t,"pushPoint",[h({x:r+i,y:n})]),l(t,"pushPoint",[h({x:r+i,y:n+o})]),l(t,"pushPoint",[h({x:r,y:n+o})]),t},w.prototype.renderSvgContent=function(){var e=u(u(this,"state"),"strokeColor"),t=u(e,0),r=u(e,1),n=u(e,2);return f.createElement("rect",{key:d(u(this,"key")),x:d(0),y:d(0),width:d(u(this,"width")),height:d(u(this,"height")),style:d(h({stroke:"rgb("+t+","+r+","+n+")",strokeWidth:u(u(this,"state"),"strokeWidth"),fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}))})},o([f.noEffects],w.prototype,"selectable",null),o([f.noEffects],w.prototype,"hitTestingBoxMargin",null),w);function w(e){var t=b.call(this,e)||this;return t.originX=0,t.originY=0,t.width=0,t.height=0,t.isPainting=!0,c(t,"state",l(e,"getMemberState",[])),t}t.RectangleShape=P,s.declareClass({classId:19,clazz:g,superClass:m.Gesture}),s.declareClass({classId:20,clazz:P,superClass:y.Editable,memberDecorators:{selectable:[f.noEffects],hitTestingBoxMargin:[f.noEffects]}}),s=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0).__context("module"),s=a.getter,c=a.setter,u=a.wrapper,l=a.caller,p=a.creator,h=a.postfix,d=a.unwrapper,f=a.jsxUnwrapper,m=r(0),y=r(23),A=r(14),g=r(22),v=r(350);function b(e,t){return 0===e&&0===t?1:e/t}s(Math,"PI"),s(Math,"PI");var P,w=(i(S,P=a.wrapSuperClass(y.Gesture)),Object.defineProperty(S.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),S.prototype.onDraggingStateChanged=function(){if(s(this,"isDragging"))c(this,"paintingCurveShape",u(new C(s(this,"context")))),l(s(s(this,"context"),"scene"),"addComponent",[s(this,"paintingCurveShape")]);else if(s(this,"paintingCurveShape")){var e=s(this,"paintingCurveShape");c(this,"paintingCurveShape",null),2<=s(e,"pointsCount")?l(e,"completePainting",[]):l(s(s(this,"context"),"scene"),"removeComponent",[e])}},S.prototype.onDrag=function(e){var t=s(e,"x"),r=s(e,"y");s(this,"paintingCurveShape")&&l(s(this,"paintingCurveShape"),"pushPoint",[p({x:t,y:r})])},S.prototype.onDestroy=function(){s(this,"paintingCurveShape")&&l(s(this,"paintingCurveShape"),"completePainting",[])},S);function S(e){var t=P.call(this)||this;return t.paintingCurveShape=null,c(t,"context",e),t}t.PencilAppliance=w;var x,C=(i(k,x=a.wrapSuperClass(A.Editable)),Object.defineProperty(k.prototype,"width",{get:function(){return s(this,"_width")},set:function(e){s(this,"_width")!==e&&(c(this,"_width",e),c(this,"pathDefinitionCache",void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"height",{get:function(){return s(this,"_height")},set:function(e){s(this,"_height")!==e&&(c(this,"_height",e),c(this,"pathDefinitionCache",void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"selectable",{get:function(){return!s(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"hitTestingBoxMargin",{get:function(){return s(s(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),k.prototype.pushPoint=function(e){if(l(s(this,"points"),"push",[e]),h(this,"pushedPointsCount",1),c(this,"pathDefinitionCache",void 0),s(this,"pushedPointsCount")%60==0&&l(this,"vacuatePoints",[50]),1===s(this,"pushedPointsCount"))c(this,"originX",s(e,"x")),c(this,"originY",s(e,"y"));else{var t=s(this,"originX"),r=s(this,"originY"),n=s(this,"originX")+s(this,"_width"),i=s(this,"originY")+s(this,"_height");s(e,"x")<t?(c(this,"originX",s(e,"x")),c(this,"_width",n-s(e,"x"))):s(e,"x")>n&&c(this,"_width",s(e,"x")-t),s(e,"y")<r?(c(this,"originY",s(e,"y")),c(this,"_height",i-s(e,"y"))):s(e,"y")>i&&c(this,"_height",s(e,"y")-r)}},k.prototype.completePainting=function(){l(this,"vacuatePoints",[0]),c(this,"initializedWidth",s(this,"_width")),c(this,"initializedHeight",s(this,"_height"));for(var e=0,t=d(s(this,"points"));e<t.length;e++){var r=t[e];c(r,"x",s(r,"x")-s(this,"originX")),c(r,"y",s(r,"y")-s(this,"originY"))}c(this,"isPainting",!1),c(this,"pathDefinitionCache",void 0)},Object.defineProperty(k.prototype,"pointsCount",{get:function(){return s(s(this,"points"),"length")},enumerable:!0,configurable:!0}),k.prototype.pointHitTestContent=function(e,t,r){for(var n=u(new g.PolylineTester),i=0,o=d(l(this,"displayPoints",[]));i<o.length;i++){var a=o[i];l(n,"pushPoint",[a])}return l(n,"hitTest",[s(s(this,"state"),"strokeWidth")+r,e,t])},k.prototype.renderSvgContent=function(){var e=s(s(this,"state"),"strokeColor"),t=s(e,0),r=s(e,1),n=s(e,2);return m.createElement("path",{key:f(s(this,"key")),d:f(l(this,"getPathDefinition",[])),style:f(p({stroke:"rgb("+t+","+r+","+n+")",strokeWidth:s(s(this,"state"),"strokeWidth"),fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}))})},k.prototype.getPathDefinition=function(){return s(this,"pathDefinitionCache")||c(this,"pathDefinitionCache",l(this,"createPathDefinition",[])),s(this,"pathDefinitionCache")},k.prototype.createPathDefinition=function(){var e=p([]),t=l(this,"displayPoints",[]);if(2<s(t,"length")&&!s(l(s(this,"context"),"getMemberState",[]),"__disableBezier")){var r=s(t,0),n=s(r,"x"),i=s(r,"y");l(e,"push",["M "+n+" "+i]);var o=l(this,"getControlPoint",[s(t,1),s(t,0),s(t,2),.2]);l(e,"push",["Q "+s(s(o,0),"x")+" "+s(s(o,0),"y")+", "+s(s(t,1),"x")+" "+s(s(t,1),"y")]);for(var a=s(o,1),c=2;c<s(t,"length")-2;++c){var u=l(this,"getControlPoint",[s(t,c),s(t,c-1),s(t,c+1),.2]);l(e,"push",["C "+s(a,"x")+" "+s(a,"y")+", "+s(s(u,0),"x")+" "+s(s(u,0),"y")+", "+s(s(t,c),"x")+" "+s(s(t,c),"y")]),a=s(u,1)}var h=s(t,"length")-2;l(e,"push",["Q "+s(s(t,h),"x")+" "+s(s(t,h),"y")+", "+s(s(t,1+h),"x")+" "+s(s(t,1+h),"y")])}else for(c=0;c<s(t,"length");++c){var d=s(t,c),f=s(d,"x"),m=s(d,"y");l(e,"push",0===c?["M"+f+" "+m]:["L"+f+" "+m])}return l(e,"join",[" "])},k.prototype.displayPoints=function(){if(s(this,"isPainting"))return l(s(this,"points"),"map",[function(e){return p({x:s(e,"x"),y:s(e,"y")})}]);var e=b(s(this,"_width"),s(this,"initializedWidth")),t=b(s(this,"_height"),s(this,"initializedHeight"));return 1===e&&1===t?s(this,"points"):l(s(this,"points"),"map",[function(r){return p({x:s(r,"x")*e,y:s(r,"y")*t})}])},k.prototype.getControlPoint=function(e,t,r,n){var i=l(this,"calcHypotenuse",[s(e,"x")-s(t,"x"),s(e,"y")-s(t,"y")]),o=l(this,"calcHypotenuse",[s(e,"x")-s(r,"x"),s(e,"y")-s(r,"y")])/(i+1e-6),a=p({x:0,y:0});1<o?(c(a,"x",s(t,"x")-(s(e,"x")+(s(r,"x")-s(e,"x"))/(1e-6+o))),c(a,"y",s(t,"y")-(s(e,"y")+(s(r,"y")-s(e,"y"))/(1e-6+o)))):(c(a,"x",s(e,"x")+(s(t,"x")-s(e,"x"))*o-s(r,"x")),c(a,"y",s(e,"y")+(s(t,"y")-s(e,"y"))*o-s(r,"y"))),a=p({x:s(a,"x")*n,y:s(a,"y")*n});var u=p({x:s(e,"x")+s(a,"x"),y:s(e,"y")+s(a,"y")}),h=p({x:s(e,"x")-s(a,"x"),y:s(e,"y")-s(a,"y")});return p([u,h])},k.prototype.calcHypotenuse=function(e,t){return l(Math,"sqrt",[e*e+t*t])},k.prototype.needKeepLineAngle=function(e,t,r){return!1},k.prototype.vacuatePoints=function(e){var t=3/s(l(s(this,"context"),"getViewState",[]),"pixelWidth"),r=l(Math,"max",[0,s(this,"lastVacuateIndex")-30]),n=l(Math,"max",[0,s(s(this,"points"),"length")-e-1]);if(r+2<=n){var i=v.pointsWithDouglasPeucker(p({threshold:t,beginIndex:r,endIndex:n,points:s(this,"points")})),o=n-r+1;s(i,"length")!==o&&l(s(this,"points"),"splice",[r,o].concat(d(i)))}c(this,"lastVacuateIndex",l(Math,"max",[s(this,"lastVacuateIndex"),n]))},o([m.noEffects],k.prototype,"width",null),o([m.noEffects],k.prototype,"height",null),o([m.noEffects],k.prototype,"selectable",null),o([m.noEffects],k.prototype,"hitTestingBoxMargin",null),k);function k(e){var t=x.call(this,e)||this;return t.originX=0,t.originY=0,t.initializedWidth=0,t.initializedHeight=0,t._width=0,t._height=0,t.points=p([]),t.isPainting=!0,t.pushedPointsCount=0,t.lastVacuateIndex=0,c(t,"state",l(e,"getMemberState",[])),t}t.CurveShape=C,a.declareClass({classId:18,clazz:w,superClass:y.Gesture}),a.declareClass({classId:17,clazz:C,superClass:A.Editable,memberDecorators:{pathDefinitionCache:[m.transient],width:[m.noEffects],height:[m.noEffects],selectable:[m.noEffects],hitTestingBoxMargin:[m.noEffects],getPathDefinition:[m.noEffects],displayPoints:[m.noEffects]}}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s,c,u=r(0).__context("module"),l=u.creator,p=u.getter,h=u.setter,d=u.unwrapper,f=u.caller,m=u.wrapper,y=r(0),A=r(32),g=r(43),v=r(44),b=r(42);(c=s=s||{})[c.None=0]="None",c[c.LeftTop=1]="LeftTop",c[c.RightTop=2]="RightTop",c[c.RightBottom=3]="RightBottom",c[c.LeftBottom=4]="LeftBottom",c[c.Top=5]="Top",c[c.Right=6]="Right",c[c.Bottom=7]="Bottom",c[c.Left=8]="Left";var P,w=(i(S,P=u.wrapSuperClass(A.ApplianceComponent)),Object.defineProperty(S.prototype,"hitTestingBoxMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"originX",{get:function(){return p(p(this,"rectangleWithHitMargin"),"x")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"originY",{get:function(){return p(p(this,"rectangleWithHitMargin"),"y")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"width",{get:function(){return p(p(this,"rectangleWithHitMargin"),"width")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"height",{get:function(){return p(p(this,"rectangleWithHitMargin"),"height")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"isUniformScale",{get:function(){if(p(this,"draggingContext"))switch(p(p(this,"draggingContext"),"targetId")){case"T":case"B":case"L":case"R":return!1}return p(this,"isShiftPress")||p(this,"isOnlyHasTextareaShape")},enumerable:!0,configurable:!0}),S.prototype.tryToStartEdit=function(e,t,r){var n=p(r,p(this,"key"));if(!n)for(var i in d(r))if(n=p(r,i))break;if(n){var a=f(this,"findOperationPointWithTargetId",[n]),s=p(a,"x"),c=p(a,"y"),u=p(a,"point");return h(this,"operatePoint",u),h(this,"draggingContext",l({targetId:n,startRectangle:l(o({},d(p(this,"rectangle")))),beginHitPoint:l({x:e,y:t}),deltaPoint:l({x:s-e,y:c-t})})),!0}return!1},S.prototype.isIncludePoint=function(e,t){return f(b.RectangleTester,"testPoint",[p(p(this,"rectangle"),"x"),p(p(this,"rectangle"),"y"),p(p(this,"rectangle"),"width"),p(p(this,"rectangle"),"height"),e,t])},S.prototype.findOperationPointWithTargetId=function(e){switch(e){case"LT":return l({x:p(p(this,"rectangle"),"x"),y:p(p(this,"rectangle"),"y"),point:p(s,"LeftTop")});case"RT":return l({x:p(p(this,"rectangle"),"x")+p(p(this,"rectangle"),"width"),y:p(p(this,"rectangle"),"y"),point:p(s,"RightTop")});case"LB":return l({x:p(p(this,"rectangle"),"x"),y:p(p(this,"rectangle"),"y")+p(p(this,"rectangle"),"height"),point:p(s,"LeftBottom")});case"RB":return l({x:p(p(this,"rectangle"),"x")+p(p(this,"rectangle"),"width"),y:p(p(this,"rectangle"),"y")+p(p(this,"rectangle"),"height"),point:p(s,"RightBottom")});case"T":return l({x:p(p(this,"rectangle"),"x")+p(p(this,"rectangle"),"width")/2,y:p(p(this,"rectangle"),"y"),point:p(s,"Top")});case"R":return l({x:p(p(this,"rectangle"),"x")+p(p(this,"rectangle"),"width"),y:p(p(this,"rectangle"),"y")+p(p(this,"rectangle"),"height")/2,point:p(s,"Right")});case"B":return l({x:p(p(this,"rectangle"),"x")+p(p(this,"rectangle"),"width")/2,y:p(p(this,"rectangle"),"y")+p(p(this,"rectangle"),"height"),point:p(s,"Bottom")});case"L":return l({x:p(p(this,"rectangle"),"x"),y:p(p(this,"rectangle"),"y")+p(p(this,"rectangle"),"height")/2,point:p(s,"Left")})}throw m(new Error('unrecognized targetId of EditorRectangleSpace "'+e+'"'))},S.prototype.dragToPoint=function(e,t){var r=f(this,"findDraggingTargetPoint",[e,t]);f(this,"updateRectangleWithDraggingTargetPoint",[r]),f(this,"refreshIncludesComponentsPositionAndSize",[]),f(this,"refreshRectangleWithHitMargin",[])},S.prototype.findDraggingTargetPoint=function(e,t){var r=p(this,"draggingContext"),n=p(r,"deltaPoint"),i=p(r,"beginHitPoint"),o=p(r,"startRectangle"),a=e+p(n,"x"),s=t+p(n,"y");if(p(this,"isUniformScale")){var c=p(o,"x")+p(o,"width")/2,u=p(o,"y")+p(o,"height")/2;if(!p(p(this,"draggingContext"),"orientationUnitVector")){var d=p(i,"x")+p(n,"x")-c,m=p(i,"y")+p(n,"y")-u,y=f(Math,"sqrt",[d*d+m*m]);h(p(this,"draggingContext"),"orientationUnitVector",l(0!==y?{x:d/y,y:m/y}:{x:1,y:1}))}var A=p(p(this,"draggingContext"),"orientationUnitVector"),g=s-u,v=(a-c)*p(A,"x")+g*p(A,"y");a=c+v*p(A,"x"),s=u+v*p(A,"y")}return l({x:a,y:s})},S.prototype.updateRectangleWithDraggingTargetPoint=function(e){var t=p(e,"x"),r=p(e,"y"),n=p(p(this,"draggingContext"),"startRectangle"),i=p(n,"x"),o=p(n,"y"),a=p(n,"x")+p(n,"width"),c=p(n,"y")+p(n,"height");switch(p(this,"operatePoint")){case p(s,"LeftTop"):i=t,o=r;break;case p(s,"RightTop"):a=t,o=r;break;case p(s,"RightBottom"):a=t,c=r;break;case p(s,"LeftBottom"):i=t,c=r;break;case p(s,"Top"):o=r;break;case p(s,"Right"):a=t;break;case p(s,"Bottom"):c=r;break;case p(s,"Left"):i=t}h(p(this,"rectangle"),"x",f(Math,"min",[i,a])),h(p(this,"rectangle"),"y",f(Math,"min",[o,c])),h(p(this,"rectangle"),"width",f(Math,"abs",[i-a])),h(p(this,"rectangle"),"height",f(Math,"abs",[o-c]))},S.prototype.refreshIncludesComponentsPositionAndSize=function(){for(var e=0,t=d(p(this,"includeComponentNodes"));e<t.length;e++){var r=t[e],n=p(r,"component"),i=p(r,"dx"),o=p(r,"dy"),a=p(r,"width"),s=p(r,"height");h(n,"originX",p(p(this,"rectangle"),"x")+i*p(p(this,"rectangle"),"width")),h(n,"originY",p(p(this,"rectangle"),"y")+o*p(p(this,"rectangle"),"height")),h(n,"width",a*p(p(this,"rectangle"),"width")),h(n,"height",s*p(p(this,"rectangle"),"height")),!p(this,"isOnlyHasTextareaShape")&&d(n)instanceof v.TextareaShape&&f(n,"adjustToKeepUniformScale",[])}},S.prototype.completeEdit=function(){h(this,"operatePoint",p(s,"None")),h(this,"draggingContext",void 0)},S.prototype.refreshWithIncludesComponents=function(e){var t=this;h(this,"rectangle",f(this,"findRectangleIncludePoints",[function(t){for(var r=0,n=d(e);r<n.length;r++){var i=n[r];t(p(i,"originX"),p(i,"originY")),t(p(i,"originX")+p(i,"width"),p(i,"originY")+p(i,"height"))}}])),h(this,"includeComponentNodes",f(e,"map",[function(e){var r,n,i,o;return i=0!==p(p(t,"rectangle"),"width")?(r=(p(e,"originX")-p(p(t,"rectangle"),"x"))/p(p(t,"rectangle"),"width"),p(e,"width")/p(p(t,"rectangle"),"width")):(r=0,1),o=0!==p(p(t,"rectangle"),"height")?(n=(p(e,"originY")-p(p(t,"rectangle"),"y"))/p(p(t,"rectangle"),"height"),p(e,"height")/p(p(t,"rectangle"),"height")):(n=0,1),l({dx:r,dy:n,width:i,height:o,component:e})}])),f(this,"refreshRectangleWithHitMargin",[])},S.prototype.refreshRectangleWithHitMargin=function(){var e=this;h(this,"isOnlyHasTextareaShape",!f(p(this,"includeComponentNodes"),"some",[function(e){return!(d(p(e,"component"))instanceof v.TextareaShape)}])),h(this,"rectangleWithHitMargin",f(this,"findRectangleIncludePoints",[function(t){for(var r=0,n=d(p(e,"includeComponentNodes"));r<n.length;r++){var i=n[r],o=p(i,"component"),a=p(o,"hitTestingBoxMargin");t(p(o,"originX")-a,p(o,"originY")-a),t(p(o,"originX")+p(o,"width")+a,p(o,"originY")+p(o,"height")+a)}}]))},S.prototype.findRectangleIncludePoints=function(e){var t=p(Number,"MIN_SAFE_INTEGER"),r=p(Number,"MIN_SAFE_INTEGER"),n=p(Number,"MAX_SAFE_INTEGER"),i=p(Number,"MAX_SAFE_INTEGER");return e((function(e,o){t=f(Math,"max",[t,e]),n=f(Math,"min",[n,e]),r=f(Math,"max",[r,o]),i=f(Math,"min",[i,o])})),l({x:n,y:i,width:t-n,height:r-i})},S.prototype.renderTagBoxes=function(){var e=f(p(this,"context"),"getMemberState",[p(this,"belongsToUserId")]);if(e){var t=l({isDragging:!!p(this,"draggingContext"),isUniformScale:p(this,"isUniformScale"),belongs:p(this,"belongsToUserId")===f(y,"getAuthorId",[])?p(g.BelongsTo,"Me"):p(g.BelongsTo,"Others"),color:p(e,"strokeColor")});return l({key:p(this,"key"),type:"editor",payload:t,left:p(p(this,"rectangleWithHitMargin"),"x"),top:p(p(this,"rectangleWithHitMargin"),"y"),right:p(p(this,"rectangleWithHitMargin"),"x")+p(p(this,"rectangleWithHitMargin"),"width"),bottom:p(p(this,"rectangleWithHitMargin"),"y")+p(p(this,"rectangleWithHitMargin"),"height")})}return null},a([y.noEffects],S.prototype,"hitTestingBoxMargin",null),a([y.noEffects],S.prototype,"originX",null),a([y.noEffects],S.prototype,"originY",null),a([y.noEffects],S.prototype,"width",null),a([y.noEffects],S.prototype,"height",null),a([y.noEffects],S.prototype,"isUniformScale",null),S);function S(e,t){var r=P.call(this)||this;return r.isShiftPress=!1,r.rectangle=l({x:0,y:0,width:0,height:0}),r.rectangleWithHitMargin=l({x:0,y:0,width:0,height:0}),r.operatePoint=p(s,"None"),r.isOnlyHasTextareaShape=!1,r.includeComponentNodes=l([]),h(r,"context",e),h(r,"belongsToUserId",t),r}t.EditorRectangleSpace=w,u.declareClass({classId:12,clazz:w,superClass:A.ApplianceComponent,memberDecorators:{hitTestingBoxMargin:[y.noEffects],originX:[y.noEffects],originY:[y.noEffects],width:[y.noEffects],height:[y.noEffects],isUniformScale:[y.noEffects],renderTagBoxes:[y.noEffects]}}),u=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s,c=r(0).__context("module"),u=c.getter,l=c.creator,p=c.setter,h=c.caller,d=c.unwrapper,f=c.wrapper,m=c.remover,y=r(0),A=r(89),g=r(92),v=r(23),b=r(14),P=r(32),w=r(44),S=r(43),x=r(179);(s=a=a||{})[s.None=0]="None",s[s.Selected=1]="Selected",s[s.OperationPoint=2]="OperationPoint";var C,k=(i(O,C=c.wrapSuperClass(v.Gesture)),O.prototype.onKeyUp=function(e){if("Shift"===u(e,"key"))p(this,"isShiftPress",!1),h(this,"refreshMyEditorRectangleSpaceDragToPoint",[]);else if("Backspace"===u(e,"key")){for(var t=0,r=d(h(this,"allSelectedComponents",[]));t<r.length;t++){var n=r[t];h(u(u(this,"context"),"scene"),"removeComponent",[n])}h(this,"refreshAllUsersEditorRectangleSpace",[])}},O.prototype.onKeyDown=function(e){"Shift"===u(e,"key")&&(p(this,"isShiftPress",!0),h(this,"refreshMyEditorRectangleSpaceDragToPoint",[]))},O.prototype.onMemberStateChanged=function(e,t){if("selector"!==u(e,"currentApplianceName")&&"selector"===u(t,"currentApplianceName")&&(h(this,"cleanAllSelectingInformation",[]),p(this,"isShiftPress",!1),h(this,"refreshMyEditorRectangleSpaceDragToPoint",[])),"selector"===u(e,"currentApplianceName")&&"text"===u(t,"currentApplianceName")){var r=h(y,"getAuthorId",[]),n=h(u(u(this,"context"),"scene"),"findComponentFromTop",[function(e){return d(e)instanceof w.TextareaShape}]);n&&u(n,"editedBy")===r&&p(this,"fixedCursorInScenePoint",l({x:u(n,"originX")-5,y:u(n,"originY")}))}},O.prototype.onSceneChanged=function(e){var t=h(u(u(this,"context"),"scenes"),"getScene",[e]);t&&h(g,"releaseAllTextarea",[t]),p(this,"isShiftPress",!1),h(this,"refreshMyEditorRectangleSpaceDragToPoint",[])},O.prototype.onDestroy=function(){h(this,"cleanAllSelectingInformation",[])},O.prototype.cleanAllSelectingInformation=function(){var e=h(y,"getAuthorId",[]);u(this,"selectedGroup")&&(h(u(u(this,"context"),"scene"),"removeComponent",[u(this,"selectedGroup")]),p(this,"selectedGroup",void 0)),h(A,"setHighlightNothing",[u(u(this,"context"),"scene"),e]),h(this,"cleanSelectedComponents",[]),h(g,"releaseTextareaEditedBy",[u(u(this,"context"),"scene"),e])},O.prototype.makeSureItsDraggingEvent=function(e){var t=h(this,"findMyEditorRectangleSpace",[]);if(t){if(u(u(e,"targetsMap"),u(t,"key")))return!0;for(var r in d(u(e,"targetsMap")))return!0;return!1}return!1},O.prototype.onDraggingStateChanged=function(e){var t,r=u(e,"x"),n=u(e,"y"),i=u(e,"targetsMap"),o=u(e,"hitTestIdentifies");if(u(this,"isDragging"))if((t=h(this,"findMyEditorRectangleSpace",[]))&&h(t,"tryToStartEdit",[r,n,i]))p(this,"draggingTarget",u(a,"OperationPoint"));else{if(t&&h(t,"isIncludePoint",[r,n]))h(this,"startDragWithSelectedMode",[]);else{h(g,"releaseTextareaEditedBy",[u(u(this,"context"),"scene"),h(y,"getAuthorId",[])]),h(this,"updateHighlightComponent",[o]);var s=h(A,"findHighlightComponent",[u(u(this,"context"),"scene"),h(y,"getAuthorId",[])]);s&&u(s,"selectedBy")!==h(y,"getAuthorId",[])?h(this,"startDragWithHighlightMode",[s]):p(this,"draggingTarget",u(a,"None"))}p(this,"beginPressPoint",l({x:r,y:n}))}else(t=h(this,"findMyEditorRectangleSpace",[]))&&u(this,"draggingTarget")===u(a,"OperationPoint")&&h(t,"completeEdit",[]),u(this,"selectedGroup")&&(h(u(u(this,"context"),"scene"),"removeComponent",[u(this,"selectedGroup")]),p(this,"selectedGroup",void 0)),p(this,"draggingTarget",u(a,"None")),p(this,"beginPressPoint",null),p(this,"draggedComponentOriginPoints",l({})),h(this,"updateHighlightComponent",[o]),h(this,"refreshAllUsersEditorRectangleSpace",[])},O.prototype.startDragWithSelectedMode=function(){p(this,"draggingTarget",u(a,"Selected"));for(var e=0,t=d(h(this,"allSelectedComponents",[]));e<t.length;e++){var r=t[e];p(u(this,"draggedComponentOriginPoints"),u(r,"key"),l({x:u(r,"originX"),y:u(r,"originY")}))}},O.prototype.startDragWithHighlightMode=function(e){p(this,"draggingTarget",u(a,"Selected")),p(u(this,"draggedComponentOriginPoints"),u(e,"key"),l({x:u(e,"originX"),y:u(e,"originY")}));var t=h(y,"getAuthorId",[]);u(e,"selectedBy")!==t&&(h(this,"cleanSelectedComponents",[]),p(e,"selectedBy",t),h(this,"refreshAllUsersEditorRectangleSpace",[]))},O.prototype.onDrag=function(e){var t=u(e,"x"),r=u(e,"y");switch(u(e,"hitTestIdentifies"),u(this,"draggingTarget")){case u(a,"Selected"):h(this,"dragComponents",[t,r].concat(d(h(this,"allSelectedComponents",[]))));break;case u(a,"OperationPoint"):p(this,"latestOperateX",t),p(this,"latestOperateY",r),h(this,"refreshMyEditorRectangleSpaceDragToPoint",[]);break;case u(a,"None"):u(this,"selectedGroup")||(p(this,"selectedGroup",f(new T(u(this,"context"),u(this,"beginPressPoint")))),h(u(u(this,"context"),"scene"),"addComponent",[u(this,"selectedGroup")])),h(u(this,"selectedGroup"),"updateEndPoint",[t,r]),h(this,"cleanSelectedComponents",[]);for(var n=u(this,"selectedGroup"),i=u(n,"originX"),o=u(n,"originY"),s=u(n,"width"),c=u(n,"height"),l=h(A,"searchEditableComponentsByRectangle",[u(u(this,"context"),"scene"),i,o,s,c]),m=h(y,"getAuthorId",[]),g=0,v=d(l);g<v.length;g++){var b=v[g];p(b,"selectedBy",m)}h(this,"refreshAllUsersEditorRectangleSpace",[])}},O.prototype.refreshMyEditorRectangleSpaceDragToPoint=function(){var e=h(this,"findMyEditorRectangleSpace",[]);e&&(p(e,"isShiftPress",u(this,"isShiftPress")),u(this,"draggingTarget")===u(a,"OperationPoint")&&h(e,"dragToPoint",[u(this,"latestOperateX"),u(this,"latestOperateY")]))},O.prototype.dragComponents=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];l(r);for(var i=e-u(u(this,"beginPressPoint"),"x"),o=t-u(u(this,"beginPressPoint"),"y"),a=0;a<u(r,"length");++a){var s=u(r,a),c=u(u(this,"draggedComponentOriginPoints"),u(s,"key"));p(s,"originX",u(c,"x")+i),p(s,"originY",u(c,"y")+o)}h(this,"refreshAllUsersEditorRectangleSpace",[])},O.prototype.onHover=function(e){var t=u(e,"hitTestIdentifies");h(this,"updateHighlightComponent",[t])},O.prototype.onClick=function(e){u(e,"x"),u(e,"y");var t=u(e,"hitTestIdentifies"),r=h(u(u(this,"context"),"scene"),"editableWithHitIdentifies",[t]),n=h(y,"getAuthorId",[]);if(r&&d(r)instanceof w.TextareaShape&&u(r,"selectedBy")===n&&void 0===u(r,"editedBy")){var i=h(y,"getAuthorId",[]);h(g,"releaseTextareaEditedBy",[u(u(this,"context"),"scene"),i]),p(r,"editedBy",i),h(this,"cleanSelectedComponents",[]),p(this,"fixedCursorInScenePoint",l({x:u(r,"originX")-5,y:u(r,"originY")}))}else h(g,"releaseTextareaEditedBy",[u(u(this,"context"),"scene"),h(y,"getAuthorId",[])]),r?u(r,"selectedBy")!==n&&(h(this,"cleanSelectedComponents",[]),p(r,"selectedBy",n),h(this,"refreshAllUsersEditorRectangleSpace",[])):h(this,"cleanSelectedComponents",[]);h(this,"updateHighlightComponent",[t])},O.prototype.updateHighlightComponent=function(e){var t=h(u(u(this,"context"),"scene"),"editableWithHitIdentifies",[e]);h(A,"setHighlightNothing",[u(u(this,"context"),"scene"),h(y,"getAuthorId",[])]),t&&h(t,"setHighlightBy",[!0,h(y,"getAuthorId",[])])},O.prototype.cleanSelectedComponents=function(){var e=h(y,"getAuthorId",[]);h(u(u(this,"context"),"scene"),"forEachComponents",[function(t){d(t)instanceof b.Editable&&u(t,"selectedBy")===e&&p(t,"selectedBy",void 0)}]),h(this,"refreshAllUsersEditorRectangleSpace",[]),p(this,"fixedCursorInScenePoint",void 0)},O.prototype.findMyEditorRectangleSpace=function(){var e=h(y,"getAuthorId",[]);return h(u(u(this,"context"),"scene"),"findComponentFromTop",[function(t){return d(t)instanceof x.EditorRectangleSpace&&u(t,"belongsToUserId")===e}])},O.prototype.refreshAllUsersEditorRectangleSpace=function(){var e=l({}),t=l([]);h(u(u(this,"context"),"scene"),"forEachComponents",[function(r){if(d(r)instanceof x.EditorRectangleSpace)h(t,"push",[r]);else if(d(r)instanceof b.Editable&&void 0!==u(r,"selectedBy")){var n=u(e,u(r,"selectedBy"));n||(n=l([]),p(e,u(r,"selectedBy"),n)),h(n,"push",[r])}}]);for(var r=0,n=d(t);r<n.length;r++){var i=n[r],o=u(i,"belongsToUserId");(s=u(e,o))&&0<u(s,"length")?h(i,"refreshWithIncludesComponents",[s]):h(u(u(this,"context"),"scene"),"removeComponent",[i]),m(e,o)}for(var a in d(e)){o=parseInt(a);var s=u(e,o);i=f(new x.EditorRectangleSpace(u(this,"context"),o)),h(i,"refreshWithIncludesComponents",[s]),h(u(u(this,"context"),"scene"),"addComponent",[i])}},O.prototype.allSelectedComponents=function(){var e=h(y,"getAuthorId",[]);return h(u(u(this,"context"),"scene"),"componentsWithFilter",[function(t){return d(t)instanceof b.Editable&&u(t,"selectedBy")===e}])},O);function O(e){var t=C.call(this)||this;return t.fixedCursorInScenePoint=void 0,t.beginPressPoint=null,t.draggingTarget=u(a,"None"),t.draggedComponentOriginPoints=l({}),t.isShiftPress=!1,t.latestOperateX=0,t.latestOperateY=0,p(t,"context",e),t}t.Selector=k;var _,T=(i(E,_=c.wrapSuperClass(P.ApplianceComponent)),Object.defineProperty(E.prototype,"hitTestingBoxMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),E.prototype.updateEndPoint=function(e,t){var r=this;h(this,"refreshWithPoints",[function(n){n(e,t),n(u(u(r,"beginPoint"),"x"),u(u(r,"beginPoint"),"y"))}])},E.prototype.refreshWithPoints=function(e){var t=u(Number,"MIN_SAFE_INTEGER"),r=u(Number,"MIN_SAFE_INTEGER"),n=u(Number,"MAX_SAFE_INTEGER"),i=u(Number,"MAX_SAFE_INTEGER");e((function(e,o){t=h(Math,"max",[t,e]),n=h(Math,"min",[n,e]),r=h(Math,"max",[r,o]),i=h(Math,"min",[i,o])})),p(this,"originX",n),p(this,"originY",i),p(this,"width",t-n),p(this,"height",r-i)},E.prototype.renderTagBoxes=function(){if(h(A,"willIgnoreSelectingBox",[u(this,"width"),u(this,"height")]))return null;var e=l({belongs:u(this,"belongsTo")===h(y,"getAuthorId",[])?u(S.BelongsTo,"Me"):u(S.BelongsTo,"Others"),color:u(h(u(this,"context"),"getMemberState",[u(this,"belongsTo")]),"strokeColor")});return l({key:u(this,"key"),type:"selectedGroup",payload:e,left:u(this,"originX"),top:u(this,"originY"),right:u(this,"originX")+u(this,"width"),bottom:u(this,"originY")+u(this,"height")})},o([y.noEffects],E.prototype,"hitTestingBoxMargin",null),E);function E(e,t){var r=_.call(this)||this;return r.originX=0,r.originY=0,r.width=0,r.height=0,p(r,"context",e),p(r,"beginPoint",t),p(r,"originX",u(t,"x")),p(r,"originY",u(t,"y")),p(r,"width",0),p(r,"height",0),p(r,"belongsTo",h(y,"getAuthorId",[])),r}t.SelectedGroupRectangleSpace=T,c.declareClass({classId:22,clazz:k,superClass:v.Gesture}),c.declareClass({classId:21,clazz:T,superClass:P.ApplianceComponent,memberDecorators:{hitTestingBoxMargin:[y.noEffects]}}),c=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(182);t.SceneImplement=n.SceneImplement,t.ComponentUpdaterBehavior=n.ComponentUpdaterBehavior;var i=r(183);t.ComponentImplement=i.ComponentImplement},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=r(183),s=r(97),c=r(63),u=r(96),l=r(190),p=r(397);(o=i=t.ComponentUpdaterBehavior||(t.ComponentUpdaterBehavior={}))[o.Added=0]="Added",o[o.Updated=1]="Updated",o[o.Removed=2]="Removed";var h=(Object.defineProperty(d.prototype,"components",{get:function(){return this._components},enumerable:!0,configurable:!0}),d.prototype.reportComponentUpdate=function(e){this.componentUpdateDispatcher.dispatch(e)},d.prototype.reportComponentsStructUpdate=function(){this.componentsStructDispatcher.dispatch(void 0)},d.prototype.createScreen=function(e){return void 0===e&&(e={}),new s.ScreenImplement({scene:this,context:e.context,className:e.className,width:l.numberWithDefault(e.width,0),height:l.numberWithDefault(e.height,0),eventInterrupter:e.eventInterrupter||function(){return!1},wrappedComponents:e.wrappedComponents||[]})},d.prototype.addComponent=function(e){if(void 0!==e.id&&this.componentsMap[e.id])throw new Error("component did exits: id="+e.id);var t=new a.ComponentImplement(this,e);(this.componentsMap[t.id]=t).index=this._components.length,this._components.push(t);for(var r=0,n=t.layouts;r<n.length;r++){var o=n[r],s=this.layoutComponents[o];s&&s.push(t)}return this.reportComponentUpdate({component:t,behavior:i.Added}),t},d.prototype.removeComponent=function(e){if(this.componentsMap[e.id]!==e)return!1;delete this.componentsMap[e.id],u.arrayRemove(this._components,e);for(var t=0,r=e.layouts;t<r.length;t++){var n=r[t],o=this.layoutComponents[n];o&&u.arrayRemove(o,e)}return this.refreshComponents(),this.reportComponentUpdate({component:e,behavior:i.Removed}),e.stopAllAnimations(),!0},d.prototype.layoutDescription=function(e){var t=this.layoutDescriptions[e];if(!t)throw new Error("can't find layout "+e);return t},d.prototype.setLayoutDescription=function(e,t){var r=this.layoutDescriptions[e];if(!r)throw new Error("can't find layout "+e);var i=Object.freeze(n({},r,t));if(i.layout!==r.layout)throw new Error("can't change layout");this.layoutDescriptions[e]=i,this.reportComponentsStructUpdate()},d.prototype.component=function(e){return this.componentsMap[e]},d.prototype.sortComponents=function(e,t){if("number"==typeof t){for(var r=0,n=e;r<n.length;r++){var i=n[r];u.arrayRemove(this._components,i)}t<0?t=0:t>this._components.length&&(t=this._components.length),(p=this._components).splice.apply(p,[t,0].concat(e))}else{for(var o=[],a=0,s=e;a<s.length;a++)i=s[a],o.push(i.index);o.sort();for(var c=0;o.length;++c){var l=o[c];i=e[c],(this._components[l]=i).index=l}}var p;this.reportComponentsStructUpdate()},d.prototype.renderScreenshot=function(e){return p.renderScreenshot(this,e)},d.prototype.willInterruptEvent=function(e,t,r,n){var i=this.componentsMap[t];return!!i&&i.willInterruptEvent(e,r,n)},d.prototype.refreshComponents=function(){for(var e=0;e<this._components.length;++e)this._components[e].index=e},d.prototype.addComponentUpdateListener=function(e){this.componentUpdateDispatcher.addListener(e)},d.prototype.removeComponentUpdateListener=function(e){this.componentUpdateDispatcher.removeListener(e)},d.prototype.addComponentsStructListener=function(e){this.componentsStructDispatcher.addListener(e)},d.prototype.removeComponentsStructListener=function(e){this.componentsStructDispatcher.removeListener(e)},d);function d(e,t){this.componentUpdateDispatcher=new c.EventDispatcher,this.componentsStructDispatcher=new c.EventDispatcher,this.componentsMap={},this._components=[];for(var r={},i={},o=[],a=0,s=t=t.slice().sort((function(e,t){return e.layout-t.layout}));a<s.length;a++){var u=s[a],l=u.layout,p=u.renderMode,h=u.className,d=u.style;i[l]=[],o.push(l),r[l]=Object.freeze({layout:l,renderMode:p,className:h,style:Object.freeze(n({},d))})}this.deviceType=e,this.layouts=Object.freeze(o),this.layoutDescriptions=r,this.layoutComponents=Object.freeze(i)}t.SceneImplement=h},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function i(){return!1}Object.defineProperty(t,"__esModule",{value:!0});var o=r(184),a=r(6),s=r(182),c=r(95),u=r(97),l=Object.freeze({left:0,right:0,top:0,bottom:0}),p=new c.SpaceSpringFactory({matchingDistance:2,zeroSpeed:.55,kDistance:.17,velocityDamping:.55,heavyDampingRadius:15,heavyDampingSpeed:.25,pedesisSpeedMean:0,pedesisSpeedVariance:0},{matchingDistance:2,zeroSpeed:.55,kDistance:.12,velocityDamping:.35,heavyDampingRadius:15,heavyDampingSpeed:.35,pedesisSpeedMean:0,pedesisSpeedVariance:0}),h=(Object.defineProperty(d.prototype,"originX",{get:function(){return this.rectangleAnimation.point[0]},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"originY",{get:function(){return this.rectangleAnimation.point[1]},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"width",{get:function(){return this.rectangleAnimation.point[2]},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"height",{get:function(){return this.rectangleAnimation.point[3]},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"parallaxMargin",{get:function(){return this._parallaxMargin},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"sceneMargin",{get:function(){return this._sceneMargin},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"payload",{get:function(){return this._payload},set:function(e){e!==this._payload&&(this._payload=e,this.scene.reportComponentUpdate({component:this,behavior:s.ComponentUpdaterBehavior.Updated}))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"orderIndex",{get:function(){return this._orderIndex},set:function(e){e!==this._orderIndex&&(this._orderIndex=e,this.scene.reportComponentsStructUpdate())},enumerable:!0,configurable:!0}),d.prototype.isVisible=function(e){return this.visibleMap[e]||!1},d.prototype.setVisible=function(e,t){void 0!==this.visibleMap[e]&&this.visibleMap[e]!==t&&(this.visibleMap[e]=t,this.scene.reportComponentUpdate({component:this,behavior:s.ComponentUpdaterBehavior.Updated}))},d.prototype.moveTo=function(e,t,r){void 0===r&&(r=a.AnimationMode.Immediately),this.rectangleTarget.originX===e&&this.rectangleTarget.originY===t||(this.rectangleTarget.originX=e,this.rectangleTarget.originY=t,this.syncRectangleTarget(r))},d.prototype.resize=function(e,t,r){void 0===r&&(r=a.AnimationMode.Immediately),this.rectangleTarget.width===e&&this.rectangleTarget.height===t||(this.rectangleTarget.width=e,this.rectangleTarget.height=t,this.syncRectangleTarget(r))},d.prototype.setRectangle=function(e,t,r,n,i){void 0===i&&(i=a.AnimationMode.Immediately),this.rectangleTarget.originX===e&&this.rectangleTarget.originY===t&&this.rectangleTarget.width===r&&this.rectangleTarget.height===n||(this.rectangleTarget.originX=e,this.rectangleTarget.originY=t,this.rectangleTarget.width=r,this.rectangleTarget.height=n,this.syncRectangleTarget(i))},d.prototype.syncRectangleTarget=function(e){var t=[this.rectangleTarget.originX,this.rectangleTarget.originY,this.rectangleTarget.width,this.rectangleTarget.height];switch(e){case a.AnimationMode.Immediately:this.rectangleAnimation.moveRightNow(t),this.scene.reportComponentUpdate({component:this,behavior:s.ComponentUpdaterBehavior.Updated});break;case a.AnimationMode.Continuous:this.rectangleAnimation.moveTo(t)}},d.prototype.setParallaxMargin=function(e){y(this._parallaxMargin,e)||(this._parallaxMargin=m(e),this.scene.reportComponentUpdate({component:this,behavior:s.ComponentUpdaterBehavior.Updated}))},d.prototype.setSceneMargin=function(e){y(this._sceneMargin,e)||(this._sceneMargin=m(e),this.scene.reportComponentUpdate({component:this,behavior:s.ComponentUpdaterBehavior.Updated}))},d.prototype.stopAllAnimations=function(){this.rectangleAnimation.stop()},d);function d(e,t){var r=this;this.visibleMap={},this.onRectanglePointUpdate=function(){r.scene.reportComponentUpdate({component:r,behavior:s.ComponentUpdaterBehavior.Updated})};for(var n=[],a={},c=0,l=e.layouts;c<l.length;c++)if((v=l[c])in t.render.layouts){var h=t.render.layouts[v].isVisible;n.push(v),a[v]=Object.freeze({isVisible:h})}this.scene=e,this.render=t.render,this.layouts=Object.freeze(n),this.id=t.id||o().replace(/-/g,""),this._parallaxMargin=m(t.parallaxMargin),this._sceneMargin=m(t.sceneMargin),this.disableVisionTrim=!!t.disableVisionTrim,this._payload=t.payload,this._orderIndex=t.orderIndex,this.rectangleTarget={originX:f(t.originX),originY:f(t.originY),width:f(t.width),height:f(t.height)};var d=[this.rectangleTarget.originX,this.rectangleTarget.originY,this.rectangleTarget.width,this.rectangleTarget.height];this.rectangleAnimation=p.create(u.AnimationPriority.ComponentMoving,d,this.onRectanglePointUpdate);var y=this.render.willInterruptEvent;this.willInterruptEvent=y?"function"==typeof y?function(e,t,n){return y.call(r.render,e,r,t,n)}:function(){return y}:i;for(var A=0,g=this.layouts;A<g.length;A++){var v=g[A];this.visibleMap[v]=a[v].isVisible}}function f(e){return"number"==typeof e?e:0}function m(e){return void 0===e||0===e?l:"number"==typeof e?Object.freeze({left:e,right:e,top:e,bottom:e}):Object.freeze(n({},e))}function y(e,t){return void 0===t?0===e.top&&0===e.left&&0===e.right&&0===e.bottom:"number"==typeof t?e.top===t&&e.left===t&&e.right===t&&e.bottom===t:e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom==e.bottom}t.ComponentImplement=h},function(e,t,r){var n=r(359),i=r(360);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(361),i=r(96),o=(a.prototype.createAnimationGroup=function(){return new s},a.prototype.createAnimation=function(e,t){return new u(e,t)},a.prototype.createAnimationFrameInvoker=function(e){return new d(e)},a.prototype.createAfterAnimationsInvoker=function(e){return new p(e)},a.animationFrames=new n.AnimationFrames,a);function a(){}var s=(c.prototype.createAnimation=function(e,t){var r=this,n=new u(e,t,(function(e){return i.arrayRemove(r.children,e)}));return this.children.push(n),n},c.prototype.createAfterAnimationsInvoker=function(e){var t=this,r=new p(e,(function(e){return i.arrayRemove(t.children,e)}));return this.children.push(r),r},c.prototype.release=function(){for(var e=0,t=this.children.splice(0);e<t.length;e++)t[e].release()},c);function c(){this.children=[]}var u=(l.prototype.release=function(){o.animationFrames.removeAnimation(this.priority,this.onAnimationFrame),this.onRelease&&this.onRelease(this)},l);function l(e,t,r){var n=this;this.priority=e,this.onRefresh=t,this.onRelease=r,this.onAnimationFrame=function(){m(n,n.onRefresh)},o.animationFrames.addAnimation(this.priority,this.onAnimationFrame)}var p=(h.prototype.release=function(){o.animationFrames.removeAfterAnimationsInvoker(this.onAnimationFrame),this.onRelease&&this.onRelease(this)},h);function h(e,t){var r=this;this.onRefresh=e,this.onRelease=t,this.onAnimationFrame=function(){m(r,r.onRefresh)},o.animationFrames.addAfterAnimationsInvoker(this.onAnimationFrame)}var d=(f.prototype.invoke=function(e){this.banAnimationChange||this.nextHandler||o.animationFrames.addAnimation(this.priority,this.onAnimationFrame),this.nextHandler=e},f.prototype.release=function(){!this.banAnimationChange&&this.nextHandler&&(this.nextHandler=null,o.animationFrames.removeAnimation(this.priority,this.onAnimationFrame))},f);function f(e){var t=this;this.priority=e,this.nextHandler=null,this.banAnimationChange=!1,this.onAnimationFrame=function(){if(t.nextHandler){var e=t.nextHandler;t.nextHandler=null;try{t.banAnimationChange=!0,m(t,e)}finally{t.banAnimationChange=!1}null===t.nextHandler&&o.animationFrames.removeAnimation(t.priority,t.onAnimationFrame)}}}function m(e,t){try{t(e)}catch(e){console.error(e)}}t.animation=new o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(373),o=r(374),a=r(375),s=r(376),c=r(377),u=r(28);t.ContinuityNode=u.ContinuityNode,t.createContinuityNode=function(e){return new n.ContinuityNode(e,[new i.MouseEventAdapter,new o.TouchEventAdapter,new a.SortedTouchEventAdapter,new s.KeyboardEventAdapter,new c.WheelEventAdapter])}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(1),c=r(99),u=r(188),l=r(189),p=(i(h,a=s.Component),h.render=function(e,t,r){c.render(u.wrapContent(e,s.createElement(h,o({},r))),t)},h.prototype.render=function(){var e=[],t={width:this.props.width,height:this.props.height};for(var r in this.props.layoutDescriptions){var n=this.props.layoutDescriptions[r],i=this.props.visibleComponents[r];e.push(s.createElement(l.AspectLayout,{key:r,layoutDescription:n,visibleComponents:i,camera:this.props.camera,screenSize:t,context:this.props.context}))}var o=this.props.className;return s.createElement("div",{className:o,style:{width:"100%",height:"100%",position:"relative"}},e)},h);function h(e){return a.call(this,e)||this}t.ScreenRender=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.wrapContent=function(e,t){for(var r=0,i=e;r<i.length;r++){var o=i[r];t=n.createElement(o,{},t)}return t}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(6),c=r(392),u=a.createContext(void 0),l=u.Provider;t.AspectLayoutConsumer=u.Consumer;var p,h=(i(d,p=a.Component),d.prototype.render=function(){for(var e=[],t=this.props.layoutDescription,r=t.renderMode===s.LayoutRenderMode.RelativeSize?this.props.camera.scale:1,n=0,i=this.props.visibleComponents;n<i.length;n++){var u=i[n],p=u.component,h=p.id,d=p.payload,f={renderMode:this.props.layoutDescription.renderMode,aspectComponent:u,camera:this.props.camera,screenSize:this.props.screenSize,zIndex:p.orderIndex},m=u.location.margin,y=u.location.size,A={x:u.location.originX,y:u.location.originY};e.push(a.createElement(l,{key:h,value:f},a.createElement(c.AspectComponentRender,{layout:t.layout,scale:r,context:this.props.context,component:p,margin:m,size:y,origin:A,payload:d,onSetElement:u.onSetElement})))}return a.createElement("div",{className:this.props.layoutDescription.className,style:o({},t.style,{width:"100%",height:"100%",position:"absolute",overflow:"hidden",zIndex:t.layout})},e)},d);function d(){return null!==p&&p.apply(this,arguments)||this}t.AspectLayout=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberWithDefault=function(e,t){return"number"==typeof e?e:t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(403),r(408),r(409),r(410),r(411),r(33),r(412),r(413)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(101),i=r(0),o=(a.prototype.classId=function(e){var t=this,r=i.findClassId(e);return function(e){return t.registeredMap[r]=n.observer(e)}},a.prototype.findApplianceClass=function(e){return this.registeredMap[e]},a);function a(){this.registeredMap={}}t.ApplianceRegister=o,t.register=new o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inCircle=function(e,t,r,n){var i=r-e.x,o=n-e.y;return i*i+o*o<=t*t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(195),i=r(5),o=(a.prototype.pushPoint=function(e){this.points.push(e)},a.prototype.pointHitTest=function(e,t){for(var r=0;r<this.points.length;++r){var i=this.points[r],o=this.points[(r+1)%this.points.length],a={x:o.x-i.x,y:o.y-i.y};if(0!==a.x||0!==a.y){var s=n.verticalVector(a),c={x:e-i.x,y:t-i.y};if(n.dotProduct(s,c)<0)return!1}}return!0},a.prototype.rectHitTest=function(e,t,r,n){var o=this,a=!1,s=!1;if(i.RectangleTesting.iterate(e,t,r,n,(function(e,t){o.pointHitTest(e,t)?a=!0:s=!0})),a&&s)return i.RectangleTesting.Result.Cross;if(a)return i.RectangleTesting.Result.IncludeRectangle;if(s){for(var c=0;c<this.points.length;++c)for(var u=this.points[c],l=this.points[(c+1)%this.points.length],p=i.RectangleTesting.allPoints(e,t,r,n),h=0;h<p.length;++h){var d=p[h],f=p[(h+1)%p.length];if(this.findCrossPoint(u,l,d,f))return i.RectangleTesting.Result.Cross}for(var m=0,y=this.points;m<y.length;m++){var A=y[m];if(i.RectangleTesting.testPoint(e,t,r,n,A.x,A.y))return i.RectangleTesting.Result.IncludeByRectangle}}return i.RectangleTesting.Result.Disjoint},a.prototype.findCrossPoint=function(e,t,r,n){var i=t.y-e.y,o=e.x-t.x,a=e.x*(e.y-t.y)-e.y*(e.x-t.x),s=n.y-r.y,c=r.x-n.x,u=r.x*(r.y-n.y)-r.y*(r.x-n.x),l=i*c-s*o,p=(o*u-c*a)/l,h=(s*a-i*u)/l;if(Math.abs(p)===1/0||Math.abs(h)===1/0)return!1;if(Number.isNaN(p)||Number.isNaN(h))return!1;var d={x:p,y:h};return!(!this.isCrossPointBetweenSegment(d,e,t)||!this.isCrossPointBetweenSegment(d,r,n))},a.prototype.isCrossPointBetweenSegment=function(e,t,r){var n=(e.x-t.x)*(e.x-r.x),i=(e.y-t.y)*(e.y-r.y),o=Math.abs(n)<.01,a=Math.abs(i)<.01;return o&&a?n<=0&&i<=0:(n<=0||o)&&(i<=0||a)},a);function a(){this.points=[]}t.ConvexPolygonTester=o},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.linearDistance=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},t.distance=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},t.verticalVector=function(e){var t=e.x;return{x:-e.y,y:t}},t.dotProduct=function(e,t){return e.x*t.x+e.y*t.y},t.isZero=function(e){return Math.abs(e)<1e-6},t.unitVector=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return e.x/=t,e.y/=t,e},t.plus=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},t.multiply=function(e,t){return{x:e*t.x,y:e*t.y}},t.triangleArea=function(e,t,r){var n=0;return n+=(t.y+e.y)*(t.x-e.x),n+=(r.y+t.y)*(r.x-t.x),n+=(e.y+r.y)*(e.x-r.x),Math.abs(n)/2},t.projectionPoint=function(e,t,r){return(r.x-e.x)*t.x+(r.y-e.y)*t.y},t.pointByProject=function(e,t,r){var i=n({},t);return i.x*=r,i.y*=r,i.x+=e.x,i.y+=e.y,i},t.meansOverlap=function(e){var t=e.x,r=e.y;return Number.isNaN(t)&&Number.isNaN(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(416),i=r(2),o=(a.parse=function(e){var t=new n(e);return"pptx:"===t.protocol&&/[a-z0-9\-]+\/\d+\.(xml|slide)\/?$/i.test(t.pathname)?new a(t,e):void 0},a.prototype.relativeFile=function(e){var t="../"+e,r=new n(this.slideUrl);return r.set("pathname",i.resolve(this.directoryPath,t)),r.toString()},a);function a(e,t){var r=e.pathname;this.slideUrl=t,this.directoryPath=r.replace(/\/$/i,"")+"/";var n=(r=(r=r.replace(/\.(xml|slide)\/?$/i,"")).match(/[a-z0-9\-]+\/\d+$/)[0]).split("/"),i=n[0],o=n[1],a=parseInt(o);if(Number.isNaN(a))throw new Error("invalid slide index "+JSON.stringify(o));this.uuid=i,this.index=a-1}t.SlideUrl=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(417);t.Slide=n.Slide,t.sequenceIndexesKey=n.sequenceIndexesKey;var i=r(68);t.FormulaEval=i.FormulaEval,t.FormulaRegistry=i.FormulaRegistry,t.getPresetShapeDefinition=i.getPresetShapeDefinition,t.LumiaContext=i.LumiaContext,t.LumiaFactory=i.LumiaFactory;var o=r(213);t.parsingShapeXML=o.parsingShapeXML;var a=r(199);t.parsingShapeGroupXML=a.parsingShapeGroupXML},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(104);t.DefaultFonts={"Arial Rounded MT Bold":"https://cdnedge.herewhite.com/ArialRoundedMTBold.ttf",Arial:"https://cdnedge.herewhite.com/arial.ttf","":"https://cdnedge.herewhite.com/HanYiQuanTangShiJian-1.ttf","":"https://cdnedge.herewhite.com/HanYiChengXingJian-1.ttf","W":"https://cdnedge.herewhite.com/HYQingYunW-1.ttf","Cooper Black":"https://cdnedge.herewhite.com/COOPBL.ttf",Calibri:"https://cdnedge.herewhite.com/Calibri.ttf","":"https://cdnedge.herewhite.com/msyh.ttf","":"https://cdnedge.herewhite.com/HuaWenXinWei-1.ttf","-":"https://cdnedge.herewhite.com/yuppy.ttf","":"https://cdnedge.herewhite.com/simhei.ttf",Heiti:"https://cdnedge.herewhite.com/simhei.ttf",Aharoni:"https://cdnedge.herewhite.com/Aharoni.ttf","Aharoni Bold":"https://cdnedge.herewhite.com/Aharoni%20Bold.ttf"},t.convertFontByOS=function(e){return""};var a=new Map;t.loadFont=function(e,r){return n(this,void 0,void 0,(function(){var n,s,c,u,l;return i(this,(function(i){switch(i.label){case 0:return a.has(e)?[2]:[4,o.get(e)];case 1:if(void 0===(n=i.sent()))return[3,6];u=new FontFace(e,n),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,u.load()];case 3:return i.sent(),document.fonts.add(u),a.set(e,!0),[3,5];case 4:return s=i.sent(),console.error(e+" load error font",s),[3,5];case 5:return[2];case 6:return r&&r[e]&&(c=r[e]),t.DefaultFonts[e]&&(c=t.DefaultFonts[e]),c?[4,fetch(c,{cache:"force-cache"})]:[3,9];case 7:return[4,i.sent().arrayBuffer()];case 8:n=i.sent(),i.label=9;case 9:if(!n)return[3,13];u=new FontFace(e,n),i.label=10;case 10:return i.trys.push([10,12,,13]),[4,u.load()];case 11:return i.sent(),document.fonts.add(u),o.set(e,n),a.set(e,!0),[3,13];case 12:return l=i.sent(),console.error(e+" load error font",l),[3,13];case 13:return[2]}}))}))}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(200),c=r(65),u=r(11),l=r(7),p=r(205),h=r(206),d=r(459),f=r(467),m=r(468),y=r(473),A=r(47),g=r(474),v=r(475),b=r(213),P=r(10);function w(e,t,r,n){var i=e.childElementOptional("p:grpSpPr","a:xfrm"),o=0,a=0,s=0,c=0,p=1,h=1,d=void 0;e.extraAttr.getOptional("fillColor")&&(d=e.extraAttr.getColor("fillColor"))instanceof u.GroupFill&&d.setFillColor(n.fillColor);var f=!1,m=!1,y=0,A={x:0,y:0,width:t?t.slideWidth:0,height:t?t.slideHeight:0};if(i){var g=e.childElement("p:grpSpPr","a:xfrm","a:chExt"),v=e.childElement("p:grpSpPr","a:xfrm","a:ext"),b=e.childElement("p:grpSpPr","a:xfrm","a:chOff");s=g.attr.getNumber("cx"),c=g.attr.getNumber("cy"),p=0===s?1:v.attr.getNumber("cx")/s,h=0===c?1:v.attr.getNumber("cy")/c,o=-b.attr.getNumber("x"),a=-b.attr.getNumber("y"),y=i.attr.getNumber("rot",0)/l.Degree,f=i.attr.getBoolean("flipV",!1),m=i.attr.getBoolean("flipH",!1);var P=e.childElement("p:grpSpPr","a:xfrm","a:off");A={x:P.attr.getNumber("x"),y:P.attr.getNumber("y"),width:v.attr.getNumber("cx"),height:v.attr.getNumber("cy")}}return{rectangle:A,borderStyle:{},opacity:1,tailor:void 0,flipV:f,flipH:m,transform:{translateX:o,translateY:a,scaleX:p,scaleY:h,rotate:y,fillColor:d},parentGroupShapeId:r,fillColor:d}}t.parsingShapeGroupXML=w;var S,x=(i(C,S=a.Component),C.prototype.transformWithAnimation=function(e,t){return t?{translateX:h.get(t,"translateX",0),translateY:h.get(t,"translateY",0),scaleX:h.get(t,"scaleX",1),scaleY:h.get(t,"scaleY",1),rotate:h.get(t,"rotate",0)}:{translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0}},C.prototype.transformWithShapeParams=function(e,t){var r=t.translateX,n=t.translateY,i=e.flipH?-t.scaleX:t.scaleX,o=e.flipV?-t.scaleY:t.scaleY,a=0;return t.rotate&&s.isNumber(t.rotate)&&(a=t.rotate),{translateX:r,translateY:n,scaleX:i,scaleY:o,rotate:a}},C.prototype.transform=function(e,t){var r=this.transformWithAnimation(e.transform,t);this.props.shapeGroupTransform&&(r.rotate=this.props.shapeGroupTransform.rotate+r.rotate);var n=this.transformWithShapeParams(e,r),i=n.translateX,o=n.translateY,a=n.scaleX,s=n.scaleY,c=n.rotate;return"translate("+l.toPt(i)+", "+l.toPt(o)+") scale("+a+","+s+") rotate("+(l.toDeg(c)+e.transform.rotate)+"deg)"},C.prototype.opacity=function(e,t){return void 0===t&&(t=1),h.get(e,"opacity",t)},C.prototype.visible=function(e){return h.get(e,"visible",!0)},C.prototype.render=function(){var e=this;return a.createElement(A.SlideContextConsumer,{children:function(t){var r,n,i,o,s=e.props.shapeGroupXML,u=e.shapeMap.map(s,t,e.props.shapeGroupTransform),p=e.props.shapeGroupXML.extraAttr.getString("spId");return o=e.props.shapeGroupTransform?(r=l.toPt((u.rectangle.x+e.props.shapeGroupTransform.translateX)*e.props.shapeGroupTransform.scaleX),n=l.toPt((u.rectangle.y+e.props.shapeGroupTransform.translateY)*e.props.shapeGroupTransform.scaleY),i=l.toPt(u.rectangle.width*e.props.shapeGroupTransform.scaleX),l.toPt(u.rectangle.height*e.props.shapeGroupTransform.scaleY)):(r=l.toPt(u.rectangle.x),n=l.toPt(u.rectangle.y),i=l.toPt(u.rectangle.width),l.toPt(u.rectangle.height)),a.createElement(c.ShapeAnimation,{spId:p,children:function(t){return a.createElement("div",{className:"spGoupId-"+p,style:{position:"absolute",left:r,top:n,transform:e.transform(u,t),width:i,height:o,zIndex:e.props.zIndex,opacity:e.opacity(t,u.opacity),display:e.visible(t)?void 0:"none"}},a.createElement(A.SlideContextConsumer,{children:function(r){return a.createElement("audio",{src:e.getSoundEffectUrl(r.resourceLoader,t),ref:e.player,autoPlay:!0,controls:!1})}}),e.renderShapeGroupContent(u))}})}})},C.prototype.renderShapeGroupContent=function(e){var t=this,r=this.props.shapeGroupXML,n=r.elementsWithName("p:sp"),i=r.elementsWithName("p:cxnSp"),s=r.elementsWithName("p:pic"),c=r.elementsWithName("p:graphicFrame"),u=r.elementsWithName("p:grpSp"),l=o({},e.transform),p=this.props.shapeGroupTransform;return p&&(l.rotate+=p.rotate,l.scaleX*=p.scaleX,l.scaleY*=p.scaleY),a.createElement(a.Fragment,null,n.map((function(n,i){return t.renderShape(r,n,i,l,e)})),i.map((function(n,i){return t.renderShape(r,n,i,l,e)})),s.map((function(n,i){return t.renderPicture(r,n,i,l,e)})),c.map((function(e,n){return t.renderGraph(r,e,n)})),u.map((function(e,n){return t.renderShapeGroup(r,e,n,l)})))},C.prototype.parseMediaRef=function(e,t){if(t){var r=t.childElementOptional(new P.TagOrExpr("a:videoFile","a:audioFile"));if(r){var n="a:videoFile"===r.name?"video":"audio",i=r.attr.getString("r:link"),o=e.loadURL(this.props.resourceType,i);if(o)return{resURL:o,mediaType:n};var a=t.childElementOptional("p:extLst","p:ext");if(a&&"{DAA4B4D4-6D71-4841-9C94-3DE7FCFB9230}"===a.attr.getString("uri")){var s=a.childElement("p14:media"),c=s.attr.getStringOptional("r:link"),u=s.attr.getStringOptional("r:embed"),l=c||u||"unknow";if(s.hasChildElementWithName("p14:trim")){var p=s.childElement("p14:trim"),h=p.attr.getNumberOptional("st"),d=p.attr.getNumberOptional("end");return h&&(h/=1e3),d&&(d/=1e3),{resURL:e.loadURL(this.props.resourceType,l),mediaType:n,startTime:h,endTime:d}}return{resURL:e.loadURL(this.props.resourceType,l),mediaType:n}}}}},C.prototype.renderPictureContent=function(e,t,r,n){var i,s,c=this,u=t.width,l=t.height,p=t.fillColor,h=t.borderStyle,d=t.margin,g=t.play,v=t.stop,b=e.childElementOptional("p:nvPicPr","p:nvPr"),P=this.parseMediaRef(r,b),w=e.childElementOptional("p:blipFill","a:blip"),S=o({},d);if(n?(i=u*n.scaleX,s=l*n.scaleY,S.left*=n.scaleX,S.right*=n.scaleX,S.top*=n.scaleY,S.bottom*=n.scaleY):(i=u,s=l),P&&"video"===P.mediaType)return a.createElement(y.Video,{width:i,startTimePerfix:P.startTime?P.startTime:0,play:1===g,stop:1===v,height:s,fillColor:p,borderStyle:h,videoURL:P.resURL});if(P&&"audio"===P.mediaType)return a.createElement(f.Audio,{width:i,startTimePerfix:P.startTime?P.startTime:0,play:1===g,stop:1===v,height:s,fillColor:p,borderStyle:h,audioURL:P.resURL});if(w){var x=w.attr.getStringOptional("r:embed");if(void 0===x)return null;var C=r.loadURL(this.props.resourceType,x);return a.createElement(A.SlideContextConsumer,null,(function(t){return a.createElement(m.Image,{width:i,uuid:t.uuid,resourceType:c.props.resourceType,resId:x,height:s,slideIndex:t.slideIndex,fillColor:p,borderStyle:h,imageURL:C,margin:S,imageXML:e})}))}return null},C.prototype.zIndex=function(e,t){var r=t.extraAttr.getStringOptional("spId");if("string"==typeof r){var n=new g.ZOrderIndexer(e).indexBySpId();if(r in n)return n[r]}return 999},C.prototype.getSoundEffectUrl=function(e,t){return void 0!==t&&void 0!==t.soundEffectId&&"slide"===this.props.resourceType?e.loadURL(this.props.resourceType,t.soundEffectId):void 0},C);function C(e){var t=S.call(this,e)||this;if(t.eventSourceId=void 0,t.shapeMap=new p.MapNode(w),t.renderShape=function(e,r,n,i,o){return a.createElement(b.ShapeWrapper,{key:""+n,shapeXML:r,shapeGroupTransform:i,sequences:t.props.sequences,eventSourceId:t.eventSourceId,onEventSourceClick:t.props.onEventSourceClick,onHyperLinkClick:t.props.onHyperLinkClick,zIndex:t.zIndex(e,r),resourceType:t.props.resourceType},(function(e){return a.createElement(A.SlideContextConsumer,null,(function(n){return a.createElement(v.Shape,{width:e.width,height:e.height,slideIndex:n.slideIndex,fillColor:e.fillColor,groupFillColor:o.fillColor,borderStyle:e.borderStyle,shapeGroupTransform:e.shapeGroupTransform,shapeXML:r,resourceLoader:n.resourceLoader,resourceType:t.props.resourceType})}))}))},t.renderPicture=function(e,r,n,i,o){return a.createElement(b.ShapeWrapper,{key:""+n,shapeXML:r,sequences:t.props.sequences,shapeGroupTransform:i,eventSourceId:t.eventSourceId,onEventSourceClick:t.props.onEventSourceClick,onHyperLinkClick:t.props.onHyperLinkClick,zIndex:t.zIndex(e,r),resourceType:t.props.resourceType},(function(e){return a.createElement(A.SlideContextConsumer,null,(function(n){return t.renderPictureContent(r,e,n.resourceLoader,i)}))}))},t.renderGraph=function(e,r,n){return a.createElement(b.ShapeWrapper,{key:""+n,shapeXML:r,sequences:t.props.sequences,eventSourceId:t.eventSourceId,onEventSourceClick:t.props.onEventSourceClick,onHyperLinkClick:t.props.onHyperLinkClick,zIndex:t.zIndex(e,r),resourceType:t.props.resourceType},(function(e){return a.createElement(d.Graph,{width:e.width,height:e.height,rotate:e.rotate,borderStyle:e.borderStyle,fillColor:e.fillColor,key:""+n,graphXML:r})}))},t.renderShapeGroup=function(e,r,n,i){var o=t.zIndex(e,r);return a.createElement(C,{key:""+n,zIndex:o,shapeGroupXML:r,sequences:t.props.sequences,resourceType:t.props.resourceType,onEventSourceClick:t.props.onEventSourceClick,onHyperLinkClick:t.props.onHyperLinkClick,shapeGroupTransform:i})},void 0!==e.eventSourceId)t.eventSourceId=e.eventSourceId;else{var r=t.props.shapeGroupXML.extraAttr.getString("spId");e.sequences&&void 0!==e.sequences.get(r)&&void 0!==t.props.onEventSourceClick&&(t.eventSourceId=r)}return t.player=a.createRef(),t}t.ShapeGroup=x},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;t.format=function(e){if(!A(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(o<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<o;c=n[++r])m(c)||!b(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var o,a={};function s(e,r){var n={seen:[],stylize:u};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&t._extend(n,r),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),l(n,e,n.depth)}function c(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function u(e,t){return e}function l(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return A(i)||(i=l(e,i,n)),i}var o=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(A(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,r);if(o)return o;var a=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),w(r)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return p(r);if(0===a.length){if(S(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(v(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(P(r))return e.stylize(Date.prototype.toString.call(r),"date");if(w(r))return p(r)}var u,b="",x=!1,C=["{","}"];return d(r)&&(x=!0,C=["[","]"]),S(r)&&(b=" [Function"+(r.name?": "+r.name:"")+"]"),v(r)&&(b=" "+RegExp.prototype.toString.call(r)),P(r)&&(b=" "+Date.prototype.toUTCString.call(r)),w(r)&&(b=" "+p(r)),0!==a.length||x&&0!=r.length?n<0?v(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=x?function(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)O(t,String(a))?o.push(h(e,t,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))})),o}(e,r,n,s,a):a.map((function(t){return h(e,r,n,s,t,x)})),e.seen.pop(),function(e,t,r){return 60<e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,b,C)):C[0]+b+C[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),O(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?-1<(s=m(r)?l(e,c.value,null):l(e,c.value,r-1)).indexOf("\n")&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),g(a)){if(o&&i.match(/^\d+$/))return s;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+s}function d(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return"number"==typeof e}function A(e){return"string"==typeof e}function g(e){return void 0===e}function v(e){return b(e)&&"[object RegExp]"===x(e)}function b(e){return"object"==typeof e&&null!==e}function P(e){return b(e)&&"[object Date]"===x(e)}function w(e){return b(e)&&("[object Error]"===x(e)||e instanceof Error)}function S(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(g(o)&&(o=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){var n=e.pid;a[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else a[r]=function(){};return a[r]},(t.inspect=s).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=A,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=g,t.isRegExp=v,t.isObject=b,t.isDate=P,t.isError=w,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(423);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=r(424),t._extend=function(e,t){if(!t||!b(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var _="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(_&&e[_]){var t;if("function"!=typeof(t=e[_]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,_,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(n){r(n)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),_&&Object.defineProperty(t,_,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=_,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");function o(){return i.apply(a,arguments)}var a=this;t.apply(this,r).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(T,t,o)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(422))},function(e,t){e.exports=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(450),i=r(106),o=(a.prototype.combine=function(){return this.createTimingAnimes()},a.prototype.createSequenceTimingAnimesLinkMap=function(e){var t,r={};for(t in e){var n=e[t];void 0!==n&&(r[t]=new i.LinkedMap(n))}return r},a.prototype.createTimingAnimes=function(){var e,t={};for(var r in this.animations){var n={},i=this.animations[r];if(void 0!==i)for(var o in i){var a=this.createSequenceTimingAnimes(i[o],this.sequences.get(o));void 0!==n?n[o]=a:((e={})[o]=a,n=e)}t[r]=n}return t},a.prototype.createSequenceTimingAnimes=function(e,t){var r=this,n={};return e.forEach((function(e,i){e.forEach((function(e,o){var a=e.animeProps,s=e.atomAnimeProps,c=t.range(i);s.forEach((function(e){var t;for(t in e){var s=r.createAtomTimingAnime(t,e[t],a,c.beginAt,o);if(void 0!==s)if(void 0!==n[t]){var u=n[t].find((function(e){return e.key===""+i}));void 0!==u?u.value.push(s):n[t].push({key:""+i,value:[s]})}else n[t]=[{key:""+i,value:[s]}]}}))}))})),this.createSequenceTimingAnimesLinkMap(n)},a.prototype.createAtomTimingAnime=function(e,t,r,i,o){switch(e){case"translateX":case"translateY":return new n.TranslateTimingAnime({props:t,animation:r},e,this.context,i,o);case"scaleX":case"scaleY":case"ppt_w":case"ppt_h":return new n.ScaleTimingAnime({props:t,animation:r},e,this.context,i,o);case"rotate":return new n.RotateTimeAnime({props:t,animation:r},e,this.context,i,o);case"opacity":return new n.OpacityTimingAnime({props:t,animation:r},e,this.context,i,o);case"visible":return new n.VisibleTimingAnime({props:t,animation:r},e,this.context,i,o);case"play":case"stop":return new n.MediaTimingAnime({props:t,animation:r},e,this.context,i,o);case"fillcolor":return new n.ColorTimingAnime({props:t,animation:r},e,this.context,i,o);default:return void console.warn("can not resolve attribute "+e)}},a);function a(e,t,r){this.animations=e,this.sequences=t,this.context=r}t.AnimationsCombiner=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.isStateEquals=function(e,t){return e===t},i.prototype.state=function(e,t,r){return!0===this.ended||(this.stateCache=this.createState(e,t,r)),this.stateCache},i.prototype.resetCache=function(){this.ended=!1,this.stateCache=void 0,this.loopStartTime=void 0},i);function i(){this.stateCache=void 0}t.CacheTimingAnime=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(105),c=r(66),u=a.createContext(void 0),l=u.Provider;t.AnimeContextConsumer=u.Consumer;var p,h=(i(d,p=a.Component),d.prototype.componentWillReceiveProps=function(e){this.props.slideAnimations!==e.slideAnimations&&(this.key=this.createNewKey())},d.prototype.createNewKey=function(){return Date.now()+":"+Math.floor(1e4*Math.random())},d.prototype.sequenceIndex=function(){var e=o({},this.props.sequenceIndexes),t={};for(var r in e){var n=Math.max(this.props.sequenceIndexes[r],0);n=Math.min(n,this.props.slideAnimations.sequences.get(r).sequencesCount),t[r]=n}return t},d.prototype.render=function(){return[a.createElement(m,{key:this.key,slideAnimations:this.props.slideAnimations,sequenceIndexes:this.sequenceIndex(),disableAnimation:this.props.disableAnimation},this.props.children)]},d);function d(e){var t=p.call(this,e)||this;return t.key=t.createNewKey(),t}t.AnimationProvider=h;var f,m=(i(y,f=a.Component),y.prototype.componentDidMount=function(){var e=!1;for(var t in this.state.animationManagers)if(!0===this.state.animationManagers[t].playingLoop){e=!0;break}for(var r in this.player.isPlayingLoop=e,this.props.sequenceIndexes)r===c.mainSequenceEventSourceId&&this.props.slideAnimations.sequences.get(r).autoPlayFirstSequence&&1===this.props.sequenceIndexes[r]?this.player.playToIndex(this.props.sequenceIndexes[r],r):this.player.seekToIndex(this.props.sequenceIndexes[r],r)},y.prototype.componentWillUnmount=function(){this.player.pause()},y.prototype.componentWillReceiveProps=function(e){var t=!1;for(var r in e.slideAnimations.animationManagers)if(!0===e.slideAnimations.animationManagers[r].playingLoop){t=!0;break}for(var n in this.player.isPlayingLoop=t,this.props.sequenceIndexes)this.props.sequenceIndexes[n]!==e.sequenceIndexes[n]&&(e.disableAnimation||this.props.sequenceIndexes[n]+1!==e.sequenceIndexes[n]?this.player.seekToIndex(e.sequenceIndexes[n],n):this.player.playToIndex(e.sequenceIndexes[n],n))},y.prototype.componentWillUpdate=function(){var e=!1;for(var t in this.state.animationManagers)if(!0===this.state.animationManagers[t].playingLoop){e=!0;break}this.player.isPlayingLoop=e},y.prototype.render=function(){return a.createElement(l,{value:this.state},this.props.children)},y);function y(e){var t=f.call(this,e)||this;return t.slideAnimations=e.slideAnimations,t.player=new s.SlidePlayer({sequence:t.slideAnimations.sequences,loopAnimationBeginAt:t.slideAnimations.loopAnimationBeginAt,onAnimationFrame:function(){return t.setState(t.player.state)}}),t.state=o({},t.player.state,{animationManagers:t.slideAnimations.animationManagers}),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.map=function(e,t,r){return this.buffer&&this.buffer.source===e||(this.buffer={source:e,target:this.mapper(e,t,void 0,r)}),this.buffer.target},i);function i(e){this.mapper=e}t.MapNode=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,r){var n;if(e&&(n=e[t]),void 0===n&&(n=r),void 0===n)throw new Error("can't get "+JSON.stringify(t)+" from object");return n}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(208),c=r(7),u=r(461),l=(p.prototype.get=function(e,t,r){var n=e.extraAttr.getNumber("level");if(this.indexByLevel.has(n)||(this.indexByLevel.set(n,0),this.startAtByLevel.set(n,-1)),t!==this.startAtByLevel.get(n))this.indexByLevel.set(n,0),this.startAtByLevel.set(n,t);else{var i=this.indexByLevel.get(n);r&&(i++,this.indexByLevel.set(n,i))}return this.indexByLevel.get(n)},p.prototype.reset=function(){this.indexByLevel=new Map,this.startAtByLevel=new Map},p);function p(){this.indexByLevel=new Map,this.startAtByLevel=new Map}t.BuIndexCounter=l;var h,d=(i(f,h=a.Component),f.prototype.render=function(){var e=this,t=this.paragraphXMLs.map((function(t,r){return e.renderParagraph(t,e.bodyPrXML,r,e.spcFirstLastPara,0===r,r===e.paragraphXMLs.length-1,e.isTextWrap)}));return this.buIndexCounter.reset(),a.createElement("div",{className:"txBoby",style:this.rectStyle},a.createElement("ol",{style:{width:c.toPt(this.props.width-this.paddingLeft-this.paddingRight),marginBlockEnd:0,marginBlockStart:0,paddingBlockStart:0,paddingBlockEnd:0,marginInlineEnd:0,marginInlineStart:0,paddingInlineStart:0,paddingInlineEnd:0,margin:0,padding:0,whiteSpace:this.isTextWrap?"normal":"nowrap"}},t))},f.prototype.renderParagraph=function(e,t,r,n,i,o,s){var c=e.elements.find((function(e){return"a:r"===e.name}));return a.createElement(u.Paragraph,{key:""+r,isTextWrap:s,width:this.props.width,height:this.props.height,paragraphIndex:r,firstRangeXML:c,buIndexCounter:this.buIndexCounter,paragraphXML:e,bodyPrXML:t,round:0,spcFirstLastPara:n,isFirst:i,isLast:o,resourceType:this.props.resourceType})},f);function f(e){var t=h.call(this,e)||this;t.buIndexCounter=new l,t.bodyPrXML=t.props.txBodyXML.childElement("a:bodyPr"),t.paragraphXMLs=t.props.txBodyXML.elementsWithName("a:p");var r=t.bodyPrXML.extraAttr.getString("anchor","t"),n=t.bodyPrXML.extraAttr.getString("wrap","square");t.isTextWrap="square"===n,t.spcFirstLastPara=t.bodyPrXML.extraAttr.getBoolean("spcFirstLastPara",!1),t.anchorCtr=t.bodyPrXML.extraAttr.getBoolean("anchorCtr",!1),t.bodyPrXML.extraAttr.getNumber("numCols",1),t.paddingLeft=s.isCenter(r)?0:t.bodyPrXML.extraAttr.getNumber("lIns",c.DefaultLeftPadding);var i=t.bodyPrXML.extraAttr.getNumber("tIns",c.DefaultTopPadding);t.paddingRight=s.isCenter(r)?0:t.bodyPrXML.extraAttr.getNumber("rIns",c.DefaultLeftPadding);var a=t.bodyPrXML.extraAttr.getNumber("bIns",c.DefaultTopPadding);return t.rectStyle=t.props.insideTable?{position:"relative",left:0,top:0,width:c.toPt(t.props.width),minHeight:c.toPt(t.props.height)}:{position:"absolute",left:c.toPt(void 0===t.props.left?0:t.props.left),top:c.toPt(void 0===t.props.right?0:t.props.right),width:c.toPt(t.props.width),height:c.toPt(t.props.height)},t.rectStyle=o({},t.rectStyle,{display:"inline-flex",flexDirection:"column",alignItems:"center",justifyContent:s.toFlexAlign(r),zIndex:9999,paddingLeft:c.toPt(t.paddingLeft),paddingTop:c.toPt(i),paddingRight:c.toPt(t.paddingRight),paddingBottom:c.toPt(a),boxSizing:"border-box",whiteSpace:t.isTextWrap?"normal":"nowrap"}),t}t.TxBody=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardizeColor=function(e,t){e=e.replace("#","");var r=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);return"number"==typeof t?"rgba("+r+","+n+","+i+","+t+")":"rgb("+r+","+n+","+i+")"},t.toFlexAlign=function(e){switch(e){case"b":return"flex-end";case"ctr":return"center";default:return"flex-start"}},t.isCenter=function(e){return"center"===e||"ctr"===e},t.toTextAlign=function(e){switch(e){case"l":return"left";case"r":return"right";case"ctr":return"center";case"just":case"dist":return"justify";default:return"left"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);function i(e){return e/n.Degree*(Math.PI/180)}t.FormulaRegistry={"*/":function(e,t,r){return e*t/r},"+-":function(e,t,r){return e+t-r},"+/":function(e,t,r){return(e+t)/r},"?:":function(e,t,r){return 0<e?t:r},abs:function(e){return Math.abs(e)},at2:function(e,t){return function(e){return e*(180/Math.PI)*n.Degree}(Math.atan2(t,e))},cat2:function(e,t,r){return e*Math.cos(Math.atan2(r,t))},cos:function(e,t){return e*Math.cos(i(t))},max:function(e,t){return t<e?e:t},min:function(e,t){return e<t?e:t},mod:function(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))},pin:function(e,t,r){return t<e?e:r<t?r:t},sat2:function(e,t,r){return e*Math.sin(Math.atan2(r,t))},sin:function(e,t){return e*Math.sin(i(t))},sqrt:function(e){return Math.sqrt(e)},tan:function(e,t){return e*Math.tan(i(t))},val:function(e){return e}};var o=(a.prototype.standardizationTokenSplit=function(e){return e.replace(/\s+/g," ")},a.prototype.eval=function(e){var r=this.standardizationTokenSplit(this.expr).split(" "),n=r.slice(1,r.length).map((function(t){return isNaN(Number(t))?e.getRequiredVariable(t):parseInt(t)}));if(void 0===t.FormulaRegistry[r[0]])throw new Error("Formula "+r[0]+" not supported");return t.FormulaRegistry[r[0]].apply(t.FormulaRegistry,n)},a);function a(e){this.expr=e}t.FormulaEval=o},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchText=function(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,fetch(e)];case 1:if(200!==(t=r.sent()).status)throw new Error("fetch "+JSON.stringify(e)+" failed with "+t.status);return[4,t.text()];case 2:return[2,r.sent()]}}))}))},t.fetchJSON=function(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,fetch(e,{headers:{"content-type":"application/json",Accept:"application/json"}})];case 1:if(200!==(t=r.sent()).status)throw new Error("fetch "+JSON.stringify(e)+" failed with "+t.status);return[4,t.json()];case 2:return[2,r.sent()]}}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);t.XMLNodeRuntime=n.XMLNodeRuntime;var i=r(212);t.Pickers=i.Pickers},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.createPickers=function(){return new s(this.attributePickers,this.childPickers)},i.prototype.bindAttributePicker=function(e,t,r){this.bindPicker(e,t,r,this.attributePickers)},i.prototype.bindChildPicker=function(e,t,r){this.bindPicker(e,t,r,this.childPickers)},i.prototype.bindPicker=function(e,t,r,n){"string"==typeof e&&(e=[e]),"string"==typeof t&&(t=[t]);for(var i=0,o=e;i<o.length;i++){var a=o[i];this.bindPickerWithAttributeNames(a,t,r,n)}},i.prototype.bindPickerWithAttributeNames=function(e,t,r,n){var i=n[e];if("object"==typeof(i=i||(n[e]={})))for(var o=0,a=t;o<a.length;o++)i[a[o]]=r},i);function i(){this.attributePickers={},this.childPickers={}}t.PickersModule=n;var o=(a.prototype.forEach=function(e,t){var r=this.pickers[e];if(r)for(var n in r)"*"!==n&&t(n)},a.prototype.has=function(e,t){var r=this.pickers[e];return!!r&&(t in r||"*"in r)},a.prototype.get=function(e,t,r,n,i,o){var a=this.pickers[t];if(a){var s=a[r];if(s=s||a["*"])return s(n,e,r,i,o)}},a);function a(e){this.pickers=e}var s=(c.prototype.forEachAttributes=function(e,t){this.attributePickers.forEach(e,t)},c.prototype.hasAttribute=function(e,t){return this.attributePickers.has(e,t)},c.prototype.getAttribute=function(e,t,r,n,i){if(this.context)return this.attributePickers.get(this.context,e,t,r,n,i)},c.prototype.getChild=function(e,t,r,n,i){if(this.context)return this.childPickers.get(this.context,e,t,r,n,i)},c);function c(e,t){this.attributePickers=new o(e),this.childPickers=new o(t)}t.Pickers=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(48),s=r(1),c=r(200),u=r(65),l=r(7),p=r(205),h=r(206),d=r(47),f=r(11),m="ppaction://hlinksldjump";function y(e,t,r,n){var i={x:e.extraAttr.getNumber("x"),y:e.extraAttr.getNumber("y"),width:e.extraAttr.getNumber("width"),height:e.extraAttr.getNumber("height")},o=e.hasChildElementWithName("p:txBody")&&e.childElement("p:txBody").childElement("a:p").hasChildElementWithName("a:r"),a=e.extraAttr.getBoolean("hidden"),s=e.extraAttr.getBoolean("flipV"),c=!o&&e.extraAttr.getBoolean("flipH"),u=e.extraAttr.getNumberOptional("rot"),p={color:e.extraAttr.getColor("borderColor"),width:e.extraAttr.getNumber("borderWidth"),type:e.extraAttr.getString("borderType"),strokeDashArray:e.extraAttr.getString("borderStrokeDashArray")},h=void 0;e.extraAttr.getOptional("fillColor")&&(h=e.extraAttr.getColor("fillColor"))instanceof f.GroupFill&&h.setFillColor(n.fillColor);var d=e.childElementOptional("p:blipFill","a:srcRect"),y=void 0;if(d){var A=l.parseSTPercentage(d.attr.getNumber("l",0)),g=l.parseSTPercentage(d.attr.getNumber("r",0)),v=l.parseSTPercentage(d.attr.getNumber("t",0)),b=l.parseSTPercentage(d.attr.getNumber("b",0)),P=i.width/(1-A-g),w=i.height/(1-v-b);y={width:P,height:w,margin:{left:P*A,top:w*v,right:P*g,bottom:w*b}}}var S=e.childElementOptional("p:nvSpPr","p:cNvPr","a:hlinkClick"),x=e.childElementOptional("p:nvPicPr","p:cNvPr","a:hlinkClick"),C=void 0;return S&&S.attr.getStringOptional("action")===m?C=S.attr.getStringOptional("r:id"):x&&x.attr.getStringOptional("action")===m&&(C=x.attr.getStringOptional("r:id")),{rectangle:i,borderStyle:p,fillColor:h,tailor:y,flipV:s,flipH:c,rotate:u,parentGroupShapeId:r,hidden:a,hyperLinkDestination:C}}t.parsingShapeXML=y;var A,g=(i(v,A=s.Component),v.prototype.transformWithAnimation=function(e){return e?{translateX:h.get(e,"translateX",0),translateY:h.get(e,"translateY",0),scaleX:h.get(e,"scaleX",1),scaleY:h.get(e,"scaleY",1),rotate:h.get(e,"rotate",0)}:{translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0}},v.prototype.transformWithShapeParams=function(e,t){var r=t.translateX,n=t.translateY,i=e.flipH?-t.scaleX:t.scaleX,o=e.flipV?-t.scaleY:t.scaleY,a=0;return t.rotate&&c.isNumber(t.rotate)&&(a=t.rotate),{translateX:r,translateY:n,scaleX:i,scaleY:o,rotate:a}},v.prototype.transform=function(e,t){var r=this.transformWithAnimation(t),n=this.transformWithShapeParams(e,r),i=n.translateX,o=n.translateY,a=n.scaleX,s=n.scaleY,c=n.rotate,u=(e.rotate||0)+c;return a<0&&(u=-u),s<0&&(u=-u),"translate("+l.toPt(i)+", "+l.toPt(o)+") scale("+a+","+s+") rotate("+l.toDeg(u)+"deg)"},v.prototype.opacity=function(e){return h.get(e,"opacity",1)},v.prototype.visible=function(e){return h.get(e,"visible",!0)},v.prototype.requestBasicAnimation=function(e,t){return e.fillColor&&e.fillColor instanceof a&&(e.fillColor=h.get(t,"fillcolor",e.fillColor)),e.play=h.get(t,"play",0),e.stop=h.get(t,"stop",0),e},v.prototype.render=function(){var e,t,r,n,i,o=this;return n=this.props.shapeGroupTransform?(e=l.toPt((this.shapeWrapperParams.rectangle.x+this.props.shapeGroupTransform.translateX)*this.props.shapeGroupTransform.scaleX),t=l.toPt((this.shapeWrapperParams.rectangle.y+this.props.shapeGroupTransform.translateY)*this.props.shapeGroupTransform.scaleY),r=l.toPt(this.shapeWrapperParams.rectangle.width*this.props.shapeGroupTransform.scaleX),l.toPt(this.shapeWrapperParams.rectangle.height*this.props.shapeGroupTransform.scaleY)):(e=l.toPt(this.shapeWrapperParams.rectangle.x),t=l.toPt(this.shapeWrapperParams.rectangle.y),r=l.toPt(this.shapeWrapperParams.rectangle.width),l.toPt(this.shapeWrapperParams.rectangle.height)),!0===this.shapeWrapperParams.hidden&&(i="none"),this.shapeWrapperParams.hyperLinkDestination||void 0!==this.eventSourceId?s.createElement(u.ShapeAnimation,{spId:this.spId,children:function(a){return s.createElement("div",{className:"spId-"+o.spId+" ppt-event-source",style:{position:"absolute",display:i||(o.visible(a)?void 0:"none"),zIndex:o.props.zIndex,left:e,top:t,width:r,height:n,transform:o.transform(o.shapeWrapperParams,a),opacity:o.opacity(a)},onClick:o.onClick.bind(o)},s.createElement(d.SlideContextConsumer,{children:function(e){return s.createElement("audio",{src:o.getSoundEffectUrl(e.resourceLoader,a),ref:o.player,autoPlay:!0,controls:!1})}}),o.renderShape(o.requestBasicAnimation(o.shapeWrapperParams,a)))}}):s.createElement(u.ShapeAnimation,{spId:this.spId,children:function(a){return s.createElement("div",{className:"spId-"+o.spId,style:{position:"absolute",display:i||(o.visible(a)?void 0:"none"),zIndex:o.props.zIndex,left:e,top:t,width:r,height:n,transform:o.transform(o.shapeWrapperParams,a),opacity:o.opacity(a)}},s.createElement(d.SlideContextConsumer,{children:function(e){return s.createElement("audio",{src:o.getSoundEffectUrl(e.resourceLoader,a),ref:o.player,autoPlay:!0,controls:!1})}}),o.renderShape(o.requestBasicAnimation(o.shapeWrapperParams,a)))}})},v.prototype.onClick=function(){return this.shapeWrapperParams.hyperLinkDestination?this.props.onHyperLinkClick?this.props.onHyperLinkClick(this.shapeWrapperParams.hyperLinkDestination):void 0:void 0!==this.eventSourceId&&this.props.onEventSourceClick?this.props.onEventSourceClick(this.eventSourceId):void 0},v.prototype.getSoundEffectUrl=function(e,t){return void 0!==t&&void 0!==t.soundEffectId&&"slide"===this.props.resourceType?e.loadURL(this.props.resourceType,t.soundEffectId):void 0},v.prototype.renderShape=function(e){var t=e.tailor,r={left:0,right:0,top:0,bottom:0},n=e.rectangle;return t&&(n=o({},e.rectangle,{width:t.width,height:t.height}),r=t.margin),this.renderChildren({play:e.play,stop:e.stop,width:n.width,height:n.height,borderStyle:e.borderStyle,fillColor:e.fillColor,rotate:e.rotate,margin:r,shapeGroupTransform:this.props.shapeGroupTransform})},v.prototype.renderChildren=function(e){return"function"==typeof this.props.children?this.props.children(e):this.props.children},v);function v(e){var t=A.call(this,e)||this;return t.shapeMap=new p.MapNode(y),t.eventSourceId=void 0,t.spId=t.props.shapeXML.extraAttr.getString("spId"),t.resourceType=t.props.resourceType,t.player=s.createRef(),t.shapeWrapperParams=t.shapeMap.map(t.props.shapeXML,void 0,t.props.shapeGroupTransform),void 0!==e.eventSourceId?t.eventSourceId=e.eventSourceId:e.sequences&&void 0!==e.sequences.get(t.spId)&&void 0!==t.props.onEventSourceClick&&(t.eventSourceId=t.spId),t}t.ShapeWrapper=g},function(e,t,r){"use strict";function n(e){var t=e.imageSrc;if(t){var r=t.match(/^(\w|-)+:\/\//);if(r)return r[0].replace(/:\/\/$/,"")}}function i(e){var t=e.imageSrc;if(t){var r=t.replace(/^(\w|-)+:\/\//,"");return JSON.parse(r)}}function o(e,t){return e+"://"+JSON.stringify(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateSrcBySetProps=function(e,t){var r=n(e),a=i(e);if(r&&a)return o(r,Object.assign(a,t))},t.getProtocolWith=n,t.getPropsWith=i,t.createSrc=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(497))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.indexOfLevel=function(e){return void 0===e&&(e="info"),this.levelToIndexMap[e]},i.prototype.log=function(e,t){i.indexOfLevel(e)>=this.levelMaskIndex&&(this.prefix?console[e](this.prefix,t):console[e](t))},i.levelToIndexMap=Object.freeze({debug:0,info:1,warn:2,error:3}),i);function i(e){var t=e.prefix,r=e.levelMask;this.prefix=t,this.levelMaskIndex=i.indexOfLevel(r)}t.DefaultLoggerHub=n},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(69);n(r(218)),n(r(109)),n(r(221)),n(r(518)),n(r(224)),n(r(522)),t.DisplayerConsumer=i.displayerContext.Consumer,t.RoomConsumer=i.roomContext.Consumer,t.PlayerConsumer=i.playerContext.Consumer},function(e,t,r){"use strict";function n(e){return function(t,r){var n=t.width/r.width,i=t.height/r.height,o=Math.max(n,i)*e;return Number.isNaN(o)?1:o}}function i(e,t){return function(r,n){var i=r.width/(n.width+2*t),o=r.height/(n.height+2*t),a=Math.min(i,o)*e;return Number.isNaN(a)||a==1/0?0:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.contentModeScale=function(e){return function(){return e}},t.contentModeAspectFill=function(){return n(1)},t.contentModeAspectFillScale=n,t.contentModeAspectFit=function(){return i(1,0)},t.contentModeAspectFitSpace=function(e){return i(1,e)},t.contentModeAspectFitScale=function(e){return i(e,0)};var o=(a.prototype.setScreenSize=function(e){this.screenSize&&this.screenSize.width===e.width&&this.screenSize.height===e.height||(this.screenSize=e,this.setCameraBound({maxContentMode:this.maxContentMode,minContentMode:this.minContentMode}))},a.prototype.setCameraBound=function(e){this.cameraman.setCameraBorder(this.toCameraBorder(e))},a.prototype.toCameraBorder=function(e){var t=e.damping,r=e.centerX,n=e.centerY,i=e.width,o=e.height,a=this.boundSize(i,o);this.maxContentMode=e.maxContentMode,this.minContentMode=e.minContentMode;var s=1/0,c=0;return this.screenSize&&(this.maxContentMode&&(s=this.maxContentMode(this.screenSize,a)),this.minContentMode&&(c=this.minContentMode(this.screenSize,a))),function(e){for(var t in e)void 0===e[t]&&delete e[t];return e}({damping:t,centerX:r,centerY:n,width:i,height:o,maxScale:s,minScale:c})},a.prototype.boundSize=function(e,t){return this.cameraman?{width:void 0===e?this.cameraman.cameraBorder.width:e,height:void 0===t?this.cameraman.cameraBorder.height:t}:{width:void 0===e?1/0:e,height:void 0===t?1/0:t}},a);function a(e,t){this.cameraman=e.bindCameraman(this.toCameraBorder(t))}t.CameraBoundState=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEquals=function e(t,r){if(typeof t!=typeof r)return!1;if("object"!=typeof t||null===t)return t===r;if(t.constructor!==r.constructor)return!1;if(t.constructor===Object){for(var n in t){if(!(n in r))return!1;if(!e(t[n],r[n]))return!1}for(var n in r)if(!(n in t))return!1;return!0}if(t.constructor!==Array)return!0;var i=t,o=r;if(i.length!==o.length)return!1;for(var a=0;a<i.length;++a)if(!e(t[a],r[a]))return!1;return!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.parse=function(e){var t=e.split("/");if(""!==t[0])throw new Error("path "+JSON.stringify(e)+' should start with "/"');""===t[t.length-1]&&t.pop();for(var r=[],n=1;n<t.length;++n)r.push(t[n].trim());return r},i.prototype.stringify=function(e){return"/"+e.join("/")},i);function i(){}t.ScenePathConverter=n,t.scenePathConverter=new n},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.RoomPhase||(t.RoomPhase={})).Connecting="connecting",n.Connected="connected",n.Reconnecting="reconnecting",n.Disconnecting="disconnecting",n.Disconnected="disconnected"},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=r(19),a=r(0),s=r(5),c=(u.prototype.release=function(){this.screen.removeCameraUpdatedListener(this.onCameraUpdated)},u.prototype.getZoomScale=function(){return this.zoomScale},u.prototype.getBroadcastState=function(){var e=this.applianceManager,t=a.copy(e.getBroadcasterId()),r=void 0;if(void 0!==t)for(var n=0,i=e.getMemberDisplayers();n<i.length;n++){var o=i[n];if(o.memberId===t){r=a.copy(o.information);break}}return{mode:e.getViewState().mode,broadcasterId:t,broadcasterInformation:r}},u.prototype.refreshCameraRectangleWithViewState=function(e){var t=e.originX,r=e.originY,i=e.width,o=e.height,a={originX:t,originY:r,width:i,height:o};this.previousRectangle&&this.previousRectangle.originX===t&&this.previousRectangle.originY===r&&this.previousRectangle.width===i&&this.previousRectangle.height===o||(this.screen.adaptRectangle(n({},a,{animationMode:s.AnimationMode.Continuous,adapterMode:s.RectangleAdapterMode.Centering})),this.previousRectangle=a)},i([o.observable],u.prototype,"zoomScale",void 0),u);function u(e){var t=this;this.previousRectangle=null,this.onCameraUpdated=function(){t.zoomScale=t.screen.camera.scale},this.applianceManager=e.applianceManager,this.screen=e.screen,this.screen.addCameraUpdatedListener(this.onCameraUpdated),this.zoomScale=e.screen.camera.scale}t.ViewStateObserver=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.create=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(e.length>this.contentLength&&(e=e.splice(0,this.contentLength));e.length<this.contentLength;)e.push(0);return new o(this.width,this.height,e)},i.prototype.createByGenerator=function(e){for(var t=0,r=[],n=0;n<this.height;++n)for(var i=0;i<this.width;++i)r[t]=e(t,i,n),t++;return new o(this.width,this.height,r)},i.prototype.E=function(){if(this.width!==this.height)throw new Error("width is not equals to height");return this.createByGenerator((function(e,t,r){return t===r?1:0}))},i);function i(e,t){this.width=e,this.height=t,this.contentLength=e*t}t.MatrixFactory=n,t.Matrix2D=new n(2,2),t.Matrix3D=new n(3,3),t.Vector2D=new n(1,2),t.Vector3D=new n(1,3);var o=(a.prototype.clone=function(){if(this.content.find((function(e){return Number.isNaN(e)})))throw new Error("find value who isn't a number in matrix");return new a(this.width,this.height,this.content.slice())},a.prototype.get=function(e,t){return this.isOutOfRange(e,t)?NaN:this.content[e+t*this.width]},a.prototype.set=function(e,t,r){if(Number.isNaN(r))throw Error("can't set not number value at ("+e+", "+t+")");this.isOutOfRange(e,t)||(this.content[e+t*this.width]=r)},a.prototype.toArray=function(){return this.content.slice()},a.prototype.forEach=function(e){for(var t=0,r=0;r<this.height;++r)for(var n=0;n<this.width;++n)e(this.content[t],t,n,r),t++},a.prototype.isOutOfRange=function(e,t){return e<0||e>this.width||t<0||t>this.height},a.plus=function(e,t){if(e.width!==t.width||e.height!==t.height)throw new Error("Matrix size not match");var r=[];return e.forEach((function(e,n,i,o){return r[n]=e+t.get(i,o)})),new a(e.width,e.height,r)},a.inverseOf3D=function(e){var r=t.Matrix3D.create(),n=1/(e.get(0,0)*(e.get(1,1)*e.get(2,2)-e.get(2,1)*e.get(1,2))-e.get(0,1)*(e.get(1,0)*e.get(2,2)-e.get(2,0)*e.get(1,2))+e.get(0,2)*(e.get(1,0)*e.get(2,1)-e.get(2,0)*e.get(1,1)));if(n==1/0)throw new Error("matrix doesn't have inverse");return r.set(0,0,n*(e.get(1,1)*e.get(2,2)-e.get(2,1)*e.get(1,2))),r.set(0,1,n*(e.get(2,1)*e.get(0,2)-e.get(0,1)*e.get(2,2))),r.set(0,2,n*(e.get(0,1)*e.get(1,2)-e.get(1,1)*e.get(0,2))),r.set(1,0,n*(e.get(2,0)*e.get(1,2)-e.get(1,0)*e.get(2,2))),r.set(1,1,n*(e.get(0,0)*e.get(2,2)-e.get(2,0)*e.get(0,2))),r.set(1,2,n*(e.get(1,0)*e.get(0,2)-e.get(0,0)*e.get(1,2))),r.set(2,0,n*(e.get(1,0)*e.get(2,1)-e.get(2,0)*e.get(1,1))),r.set(2,1,n*(e.get(0,1)*e.get(2,0)-e.get(0,0)*e.get(2,1))),r.set(2,2,n*(e.get(0,0)*e.get(1,1)-e.get(0,1)*e.get(1,0))),r},a.multiply=function(e,t){if(e.height!==t.width)throw new Error("matrix1's height is not match matrix2's width");var r=e.width,i=t.height,o=e.height;return new n(r,i).createByGenerator((function(r,n,i){for(var a=0,s=0;s<o;++s)a+=e.get(n,s)*t.get(s,i);return a}))},a.prototype.toString=function(){for(var e=[],t=0,r=0;r<this.height;++r)for(var n=e[r]=[],i=0;i<this.width;++i)n.push(this.content[t]),t++;return"{\n"+e.map((function(e){return"\t"+e.map((function(e){return Math.ceil(100*e)/100})).join("\t")})).join("\n")+"\n}"},a);function a(e,t,r){this.width=e,this.height=t,this.content=r}t.Matrix=o},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.PlayerPhase||(t.PlayerPhase={})).WaitingFirstFrame="waitingFirstFrame",n.Playing="playing",n.Pause="pause",n.Stopped="stop",n.Ended="ended",n.Buffering="buffering",(i=t.ObserverMode||(t.ObserverMode={})).Directory="directory",i.Freedom="freedom"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(113));var n=r(0);t.EventScope=n.EventScope,t.EventPhase=n.EventPhase;var i=r(5);t.DeviceType=i.DeviceType,t.AnimationMode=i.AnimationMode,t.CNode=i.CNode,t.CNodeCoordinates=i.CNodeCoordinates,t.CNodeKind=i.CNodeKind;var o=r(215);t.PptKind=o.PptKind;var a=r(217);t.contentModeScale=a.contentModeScale,t.contentModeAspectFit=a.contentModeAspectFit,t.contentModeAspectFitScale=a.contentModeAspectFitScale,t.contentModeAspectFitSpace=a.contentModeAspectFitSpace,t.contentModeAspectFill=a.contentModeAspectFill,t.contentModeAspectFillScale=a.contentModeAspectFillScale,t.RoomPhase=a.RoomPhase,t.PlayerPhase=a.PlayerPhase,t.ObserverMode=a.ObserverMode,t.DisplayerConsumer=a.DisplayerConsumer,t.RoomConsumer=a.RoomConsumer,t.PlayerConsumer=a.PlayerConsumer;var s=r(8);t.ViewMode=s.ViewMode},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(227);t.RoomMode=n.RoomMode;var i=r(114);t.Uint64Bytes=i.Uint64Bytes,t.getUint64=i.getUint64,t.setUint64=i.setUint64;var o=r(12);t.createFrameSerialization=o.createFrameSerialization;var a=r(39);t.serializeScopeSlices=a.serializeScopeSlices,t.deserializeScopeSlices=a.deserializeScopeSlices,t.serializeAllocatedUser=a.serializeAllocatedUser,t.deserializeAllocatedUser=a.deserializeAllocatedUser,t.serializeSessionBuild=a.serializeSessionBuild,t.deserializeSessionBuild=a.deserializeSessionBuild,t.serializeOnlineState=a.serializeOnlineState,t.deserializeOnlineState=a.deserializeOnlineState,t.getKindWithAccessUpdaterBuffer=a.getKindWithAccessUpdaterBuffer,t.AccessUpdaterKind=a.AccessUpdaterKind,t.AccessUpdaterSerialization=a.AccessUpdaterSerialization,t.ScopeStorage=a.ScopeStorage;var s=r(81);t.connectWebSocketSession=s.connectWebSocketSession,t.WebSocketConnection=s.WebSocketConnection;var c=r(158);t.ImagePhase=c.ImagePhase,t.IllusionFrameGenerator=c.IllusionFrameGenerator,t.ActionFrameHelper=c.ActionFrameHelper,t.ImageAuthor=c.ImageAuthor},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.RoomMode||(t.RoomMode={})).Transitory="transitory",n.Persistent="persistent",n.Historied="historied"},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),o=r(261),a=r(75),s=(c.prototype.serializeSnapshotFrame=function(e){var t=new i.Writer;return this.serializeFrameHeader(t,e),this.serializeUsers(t,e.users),this.serialization.serialize({writer:t,values:[e.proxyNode],objectFormats:this.rootObjectFormats,includesHash:!0}),t.toBuffer()},c.prototype.serializeUsers=function(e,t){var r=[this.serialization.format.anyObjectFormat];e.writeUint32(t.length);for(var n=0,i=t;n<i.length;n++){var o=i[n];e.writeUint32(o.userId),e.writeUint32(o.nextFrameId),e.writeString(o.session),this.serialization.serialize({writer:e,values:[o.payload],objectFormats:r,includesHash:!0})}},c.prototype.deserializeSnapshotFrame=function(e,t,r){var a,s=new i.Reader(e),c=this.deserializeFrameHeader(s);a=t!==i.AkkoSerVersion.V0?this.deserializeUsers(s,t,r):o.deserializeLegacyIdentifierContext(s);var u=this.serialization.deserialize({reader:s,objectFormats:this.rootObjectFormats,ignoreHashChecking:r,version:t})[0];return n({},c,{users:a,proxyNode:u})},c.prototype.deserializeUsers=function(e,t,r){for(var n=e.readUint32(),i=[],o=[this.serialization.format.anyObjectFormat],a=0;a<n;++a){var s=e.readUint32(),c=e.readUint32(),u=e.readString(),l=this.serialization.deserialize({reader:e,objectFormats:o,ignoreHashChecking:r,version:t})[0];i.push({userId:s,nextFrameId:c,session:u,payload:l})}return Object.freeze(i)},c.prototype.serializeActionFrame=function(e,t){var r=new i.Writer;if(this.serializeFrameHeader(r,e),r.writeUint8(e.type),r.writeInt53(e.scopeId),r.writeInt53(e.beginObjectId),a.isInvokerFrame(e)){r.writeUint32(e.methodId);var n=this.rootClassReflection.methodNames[e.methodId],o=this.rootClassReflection.methods[n].parameterFormatObjects;this.serialization.serialize({writer:r,values:e.parameters,objectFormats:o,includesHash:t})}else a.isEventFrame(e)?(r.writeUint8(e.scope),r.writeString(e.event),this.serialization.serialize({writer:r,values:[e.payload],objectFormats:this.oneAnyObjectFormats,includesHash:t})):a.isEnterFrame(e)?(r.writeString(e.session),this.serialization.serialize({writer:r,values:[e.userPayload,e.connectedPayload],objectFormats:this.twoAnyObjectFormats,includesHash:t})):a.isLeaveFrame(e)&&this.serialization.serialize({writer:r,values:[e.payload],objectFormats:this.oneAnyObjectFormats,includesHash:t});return r.toBuffer()},c.prototype.deserializeActionFrame=function(e,t,r){var o=new i.Reader(e),s=this.deserializeFrameHeader(o),c=o.readUint8(),u=0,l=0,p=void 0;switch(t!==i.AkkoSerVersion.V0&&(u=o.readInt53(),l=o.readInt53()),c){case a.ActionFrameType.Invoker:var h=o.readUint32(),d=this.rootClassReflection.methodNames[h],f=this.rootClassReflection.methods[d].parameterFormatObjects,m=this.serialization.deserialize({reader:o,objectFormats:f,ignoreHashChecking:r,version:t});return t===i.AkkoSerVersion.V0&&(p=o.readBigInt()),n({},s,{type:c,scopeId:u,beginObjectId:l,beginGenerationId:p,methodId:h,parameters:m});case a.ActionFrameType.Event:var y=o.readUint8(),A=o.readString(),g=this.serialization.deserialize({reader:o,objectFormats:this.oneAnyObjectFormats,ignoreHashChecking:r,version:t})[0];return t===i.AkkoSerVersion.V0&&(p=o.readBigInt()),n({},s,{type:c,scopeId:u,beginObjectId:l,beginGenerationId:p,scope:y,event:A,payload:g});case a.ActionFrameType.Ack:return n({},s,{type:c,scopeId:u,beginObjectId:l});case a.ActionFrameType.Enter:var v=o.readString(),b=this.serialization.deserialize({reader:o,objectFormats:this.twoAnyObjectFormats,ignoreHashChecking:r,version:t}),P=b[0],w=b[1];return n({},s,{type:c,scopeId:u,beginObjectId:l,session:v,userPayload:P,connectedPayload:w});case a.ActionFrameType.Leave:return g=this.serialization.deserialize({reader:o,objectFormats:this.oneAnyObjectFormats,ignoreHashChecking:r,version:t})[0],n({},s,{type:c,scopeId:u,beginObjectId:l,payload:g})}},c.prototype.serializeFrameHeader=function(e,t){e.writeUint32(t.frameId),e.writeUint32(t.originalFrameId),e.writeInt53(t.timestamp),e.writeUint32(t.authorId)},c.prototype.deserializeFrameHeader=function(e){return{frameId:e.readUint32(),originalFrameId:e.readUint32(),timestamp:e.readInt53(),authorId:e.readUint32()}},c);function c(e,t){var r=e.format.anyObjectFormat;this.serialization=e,this.rootClassReflection=t,this.rootObjectFormats=Object.freeze([this.rootClassReflection.objectFormat]),this.oneAnyObjectFormats=Object.freeze([r]),this.twoAnyObjectFormats=Object.freeze([r,r])}t.FrameSerializationImplement=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(115),i=r(35),o=r(230),a=r(125),s=r(52),c="0".charCodeAt(0),u=(l.prototype.generateHash=function(e,t){return this.buffer.generateHash(e,t)},Object.defineProperty(l.prototype,"didWriteBytes",{get:function(){return this.buffer.length},enumerable:!0,configurable:!0}),l.prototype.writeBuffer=function(e){this.buffer.pushUint32(e.byteLength),0<e.byteLength&&this.buffer.pushBuffer(e)},l.prototype.writeUint8=function(e){this.buffer.pushUint8(e)},l.prototype.writeUInt16=function(e){this.buffer.pushUInt16(e)},l.prototype.writeInt32=function(e){this.buffer.pushInt32(e)},l.prototype.writeUint32=function(e){this.buffer.pushUint32(e)},l.prototype.putUint32Holder=function(){return this.buffer.pushUint32Holder()},l.prototype.writeInt53=function(e){var t=0|e,r=(e-t)/i.Pow32;this.buffer.pushInt32(t),this.buffer.pushInt32(r)},l.prototype.writeFloat64=function(e){this.buffer.pushFloat64(e)},l.prototype.writeString=function(e){var t=n.length(e);this.writeInt32(t),n.write(e,this.buffer)},l.prototype.writeBigInt=function(e){var t=new String(e);if(255<t.length)throw new a.SerializerError("length of identifier "+t.length+" is greater than 255");this.buffer.pushUint8(t.length);for(var r=Math.ceil(t.length/2),n=0;n<r;++n){var i=t.charCodeAt(2*n),o=t.charCodeAt(2*n+1);Number.isNaN(o)&&(o=c);var u=s.bigInteger.parseCode(i),l=s.bigInteger.parseCode(o);if(void 0===u||void 0===l)throw new a.SerializerError("invalid big integer "+JSON.stringify(e));this.buffer.pushUint8(u|l<<4)}},l.prototype.toBuffer=function(){return this.buffer.toBuffer()},l);function l(){this.buffer=new o.ExtendableBuffer}t.Writer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(116),i=r(2),o=(Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),a.prototype.toBuffer=function(){for(var e=i.createBuffer(this.length),t=0,r=0,n=this.bufferChunks;r<n.length;r++){var o=n[r];e.fill(o.buffer,t,0,o.length),t+=o.length}return e},a.prototype.generateHash=function(e,t){for(var r=0;;){if(r>=this.bufferChunks.length)return"";var i=this.bufferChunks[r].length;if(e<i)break;e-=i,r++}for(var o=t,a=new n,s=[0];r<this.bufferChunks.length;++r){for(var c=this.bufferChunks[r],u=c.buffer,l=c.length,p=e;p<l;++p)if(s[0]=u.getUint8(p),a.appendBinary(String.fromCharCode.apply(String,s)),--o<=0)return a.end(!0);e=0}return a.end(!0)},a.prototype.pushBuffer=function(e){var t=Math.min(e.byteLength,this.currentChunk.buffer.byteLength-this.currentChunk.length);0<t&&(this.currentChunk.buffer.fill(e,this.currentChunk.length,0,t),this.currentChunk.length+=t,this._length+=t);var r=e.byteLength-t;0<r&&(this.currentChunk={buffer:e.slice(t),length:r},this.bufferChunks.push(this.currentChunk),this._length+=r)},a.prototype.pushUint8=function(e){this.currentChunk.length+1>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setUint8(this.currentChunk.length,e),this.currentChunk.length+=1,this._length+=1},a.prototype.pushUInt16=function(e){this.currentChunk.length+2>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setUint16(this.currentChunk.length,e),this.currentChunk.length+=2,this._length+=2},a.prototype.pushInt32=function(e){this.currentChunk.length+4>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setInt32(this.currentChunk.length,e),this.currentChunk.length+=4,this._length+=4},a.prototype.pushUint32=function(e){this.currentChunk.length+4>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setUint32(this.currentChunk.length,e),this.currentChunk.length+=4,this._length+=4},a.prototype.pushUint32Holder=function(){this.currentChunk.length+4>this.currentChunk.buffer.byteLength&&this.appendNewChunk();var e=this.currentChunk.length,t=this.currentChunk.buffer;return this.currentChunk.length+=4,this._length+=4,function(r){return t.setUint32(e,r)}},a.prototype.pushFloat64=function(e){this.currentChunk.length+8>this.currentChunk.buffer.byteLength&&this.appendNewChunk(),this.currentChunk.buffer.setFloat64(this.currentChunk.length,e),this.currentChunk.length+=8,this._length+=8},a.prototype.appendNewChunk=function(){var e=i.createBuffer(256);this.currentChunk={buffer:e,length:0},this.bufferChunks.push(this.currentChunk)},a);function a(){this._length=0,this.bufferChunks=[],this.appendNewChunk()}t.ExtendableBuffer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(117);t.isBuffer=n.isAkkoBuffer;var i=r(117);t.createBuffer=i.createBuffer,t.wrapBuffer=i.wrapBuffer},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=u(e),n=r[0],a=r[1],s=new o(function(e,t,r){return 3*(t+r)/4-r}(0,n,a)),c=0,l=0<a?n-4:n,p=0;p<l;p+=4)t=i[e.charCodeAt(p)]<<18|i[e.charCodeAt(p+1)]<<12|i[e.charCodeAt(p+2)]<<6|i[e.charCodeAt(p+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(p)]<<2|i[e.charCodeAt(p+1)]>>4,s[c++]=255&t),1===a&&(t=i[e.charCodeAt(p)]<<10|i[e.charCodeAt(p+1)]<<4|i[e.charCodeAt(p+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(l(e,a,s<a+16383?s:a+16383));return 1==i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2==i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,c=(1<<s)-1,u=c>>1,l=-7,p=r?i-1:0,h=r?-1:1,d=e[t+p];for(p+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;0<l;o=256*o+e[t+p],p+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;0<l;a=256*a+e[t+p],p+=h,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=u}return(d?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,p=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),2<=(t+=1<=a+p?h/c:h*Math.pow(2,1-p))*c&&(a++,c/=2),l<=a+p?(s=0,a=l):1<=a+p?(s=(t*c-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));8<=i;e[r+d]=255&s,d+=f,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;e[r+d]=255&a,d+=f,a/=256,u-=8);e[r+d-f]|=128*m}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(119),s=(i(c,o=a.BaseAkkoBuffer),Object.defineProperty(c.prototype,"readonly",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"byteLength",{get:function(){return this.buffer.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"primitiveBuffer",{get:function(){return this.buffer},enumerable:!0,configurable:!0}),c.prototype.isEqualsTo=function(e){if(this.byteLength!==e.byteLength)return!1;for(var t=0;t<this.byteLength;++t)if(this.getUint8(t)!==e.getUint8(t))return!1;return!0},c.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.buffer.length-e),new l(this.buffer.slice(e,e+t))},c.prototype.getFloat64=function(e){return this.buffer.readDoubleLE(e)},c.prototype.getUint16=function(e){return this.buffer.readUInt16LE(e)},c.prototype.getInt32=function(e){return this.buffer.readInt32LE(e)},c.prototype.getUint32=function(e){return this.buffer.readUInt32LE(e)},c.prototype.getUint8=function(e){return this.buffer.readUInt8(e)},c);function c(e){var t=o.call(this)||this;return t.buffer=e,t}t.ReadonlyNodeAkkoBuffer=s;var u,l=(i(p,u=s),Object.defineProperty(p.prototype,"readonly",{get:function(){return!1},enumerable:!0,configurable:!0}),p.prototype.freeze=function(){return Object.setPrototypeOf(this,s.prototype),this},p.prototype.fill=function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=e.byteLength-r);var i=e.primitiveBuffer;if(i instanceof ArrayBuffer){for(var o=new DataView(i),a=this.buffer.byteLength-t,s=Math.min(n,a),c=0;c<s;++c)this.buffer.writeUInt8(o.getUint8(c+r),c+t);return s}return i.copy(this.buffer,t,r,r+n)},p.prototype.setFloat64=function(e,t){this.buffer.writeDoubleLE(t,e)},p.prototype.setUint16=function(e,t){this.buffer.writeUInt16LE(t,e)},p.prototype.setInt32=function(e,t){this.buffer.writeInt32LE(t,e)},p.prototype.setUint32=function(e,t){this.buffer.writeUInt32LE(t,e)},p.prototype.setUint8=function(e,t){this.buffer.writeUInt8(t,e)},p);function p(){return null!==u&&u.apply(this,arguments)||this}t.NodeAkkoBuffer=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(119),s=(i(c,o=a.BaseAkkoBuffer),Object.defineProperty(c.prototype,"readonly",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"byteLength",{get:function(){return this.arrayBuffer.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"primitiveBuffer",{get:function(){return this.arrayBuffer},enumerable:!0,configurable:!0}),c.prototype.isEqualsTo=function(e){if(this.byteLength!==e.byteLength)return!1;for(var t=0;t<this.byteLength;++t)if(this.getUint8(t)!==e.getUint8(t))return!1;return!0},c.prototype.slice=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.dataView.byteLength-e);for(var r=new ArrayBuffer(t),n=new DataView(r),i=0;i<t;++i)n.setUint8(i,this.dataView.getUint8(e+i));return new l(r)},c.prototype.getFloat64=function(e){return this.dataView.getFloat64(e,!0)},c.prototype.getUint16=function(e){return this.dataView.getUint16(e,!0)},c.prototype.getInt32=function(e){return this.dataView.getInt32(e,!0)},c.prototype.getUint32=function(e){return this.dataView.getUint32(e,!0)},c.prototype.getUint8=function(e){return this.dataView.getUint8(e)},c);function c(e){var t=o.call(this)||this;return t.arrayBuffer=e,t.dataView=new DataView(e),t}t.ReadonlyBrowserAkkoBuffer=s;var u,l=(i(p,u=s),Object.defineProperty(p.prototype,"readonly",{get:function(){return!1},enumerable:!0,configurable:!0}),p.prototype.freeze=function(){return Object.setPrototypeOf(this,s.prototype),this},p.prototype.fill=function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=Number.MAX_SAFE_INTEGER);var i=e.primitiveBuffer,o=this.dataView.byteLength-t,a=Math.min(n,o);if(i instanceof ArrayBuffer)for(var s=new DataView(i),c=0;c<a;++c)this.dataView.setUint8(c+t,s.getUint8(c+r));else for(c=0;c<a;++c)this.dataView.setUint8(c+t,i.readUInt8(c+r));return a},p.prototype.setFloat64=function(e,t){this.dataView.setFloat64(e,t,!0)},p.prototype.setUint16=function(e,t){this.dataView.setUint16(e,t,!0)},p.prototype.setInt32=function(e,t){this.dataView.setInt32(e,t,!0)},p.prototype.setUint32=function(e,t){this.dataView.setUint32(e,t,!0)},p.prototype.setUint8=function(e,t){this.dataView.setUint8(e,t)},p);function p(){return null!==u&&u.apply(this,arguments)||this}t.BrowserAkkoBuffer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(73),i=r(72);t.replaceTypeIds=function(e){return(new o).replaceIds(e)};var o=(a.prototype.replaceIds=function(e){var t={};for(var r in e)t[r]=this.replaceIdsWithType(e[r]);return t},a.prototype.replaceIdsWithType=function(e){switch(e.typeEnum){case i.TypeEnum.Any:case i.TypeEnum.Never:case i.TypeEnum.Undefined:case i.TypeEnum.Null:case i.TypeEnum.String:case i.TypeEnum.Number:case i.TypeEnum.Boolean:return this.singletonMap[e.typeEnum];case i.TypeEnum.Object:return this.replaceIdsWithObjectType(e);case i.TypeEnum.And:case i.TypeEnum.Or:return this.replaceIdsWithCompoundType(e);case i.TypeEnum.Generator:return this.replaceIdsWithGeneratorType(e);default:return e.id=this.createId(),e}},a.prototype.replaceIdsWithObjectType=function(e){for(var t in e.id=this.createId(),e.key=this.replaceIdsWithType(e.key),e.index=this.replaceIdsWithType(e.index),e.properties)e.properties[t]=this.replaceIdsWithType(e.properties[t]);return e},a.prototype.replaceIdsWithCompoundType=function(e){e.id=this.createId();for(var t=0;t<e.children.length;++t)e.children[t]=this.replaceIdsWithType(e.children[t]);return e},a.prototype.replaceIdsWithGeneratorType=function(e){e.id=this.createId(),e.template=this.replaceIdsWithType(e.template);for(var t=0;t<e.params.length;++t)e.params[t]=this.replaceIdsWithType(e.params[t]);return e},a.prototype.createId=function(){return""+this.nextId++},a);function a(){for(var e in this.nextId=0,this.singletonMap=n.TypeCreator.createSingletonMap(),this.singletonMap)this.singletonMap[e].id=this.createId()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(239);t.Initializer=n.Initializer;var i=r(244);t.isClassProperty=i.isClassProperty,t.isClassMethod=i.isClassMethod,t.ClassMemberType=i.ClassMemberType,t.ClassReflectionPropertyMode=i.ClassReflectionPropertyMode},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(240),o=r(122);t.Initializer=function(e){var t=this;this.contextsStack=[],this.context=function(e){switch(e){case"index":var r=i.createContext({akkoVersion:t.akkoVersion,akkoObjectBaseClass:t.akkoObjectBaseClass,libraryFactory:t.libraryFactory,coreFunctions:t.coreFunctions,onCreatedLibrary:function(){return t.contextsStack.pop()}});return t.contextsStack.push(r),r;case"module":var n=t.contextsStack[t.contextsStack.length-1];if(!n)throw new o.RuntimeError("can't import index out of library");return n;default:throw new o.RuntimeError("unexpect mode "+JSON.stringify(e))}},this.isAkkoObject=function(e){return e instanceof t.akkoObjectBaseClass},this.getLibrary=function(e){if("function"==typeof e){var r=e.__library;if("object"==typeof r)return r}else if(t.isAkkoObject(e))return t.getLibrary(e.constructor)},this.akkoVersion=e.akkoVersion,this.akkoObjectBaseClass=e.akkoObjectBaseClass,this.libraryFactory=e.libraryFactory,this.coreFunctions=Object.freeze(n({},e.coreFunctions))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(241);t.createContext=function(e){var t=new n.PrecompiledContext(e.akkoVersion,e.akkoObjectBaseClass,e.libraryFactory,e.onCreatedLibrary);return Object.freeze({baseClass:t.baseClass.bind(t),wrapSuperClass:t.wrapSuperClass.bind(t),declareClass:t.declareClass.bind(t),createLibrary:t.createLibrary.bind(t),creator:e.coreFunctions.creator,updater:e.coreFunctions.updater,wrapper:e.coreFunctions.wrapper,unwrapper:e.coreFunctions.unwrapper,jsxUnwrapper:e.coreFunctions.jsxUnwrapper,getter:e.coreFunctions.getter,setter:e.coreFunctions.setter,caller:e.coreFunctions.caller,remover:e.coreFunctions.remover,prefix:e.coreFunctions.prefix,postfix:e.coreFunctions.postfix})}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(121),o=(a.prototype.baseClass=function(){return this.akkoObjectBaseClass},a.prototype.wrapSuperClass=function(e){if(e===Object)return this.akkoObjectBaseClass;if("function"!=typeof e)return e;for(var t=e;t!==this.akkoObjectBaseClass;){var r=Object.getPrototypeOf(t.prototype);if(!r)throw new i.RuntimeError("class "+e.name+" can't be extended, it's out of library");t=r.constructor}return e},a.prototype.declareClass=function(e){var t=e.classId,r=e.clazz,n=e.superClass,o=e.memberDecorators;if(this.classHandlers[t])throw new i.RuntimeError("class id "+t+" was declared");this.classHandlers[t]={classId:t,clazz:r,superClass:n,memberDecorators:o||{}}},a.prototype.createLibrary=function(e,t){var r={};for(var i in t.classes){for(var o=t.classes[i],a=this.classHandlers[i],s=[],c=0,u=o.members;c<u.length;c++){var l=u[c],p=a.memberDecorators[l.name];s.push(n({},l,{decorators:p||[]}))}r[i]={classId:a.classId,clazz:a.clazz,superClass:a.superClass,objectFormatId:o.objectFormatId,members:s}}var h=this.libraryFactory({appIdentifier:t.identifier,appVersion:t.version,akkoVersion:t.akko,formatBase64:t.formatBase64,formatHash:t.formatHash,rootConstructor:e,classDeclarations:r});return Object.defineProperty(e,"__library",{enumerable:!1,configurable:!1,writable:!1,value:h}),this.onCreatedLibrary(h),e},a);function a(e,t,r,n){this.akkoVersion=e,this.akkoObjectBaseClass=t,this.libraryFactory=r,this.onCreatedLibrary=n,this.classHandlers={}}t.PrecompiledContext=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(72),i=r(123);t.linkTypes=function(e){return new o(e).link()};var o=(a.prototype.link=function(){return this.referenceIdBundle=this.createReferenceIdBundle(),{referenceIdBundle:this.referenceIdBundle,flatTypeBundle:this.flatTypeBundle()}},a.prototype.createReferenceIdBundle=function(){for(var e=0,t={},r=0,n=Object.keys(this.typeBundle).sort();r<n.length;r++){for(var i=n[r],o=this.typeBundle[i].types,a={},s=0,c=Object.keys(o).sort();s<c.length;s++)a[c[s]]=e++;t[i]=Object.freeze(a)}return Object.freeze(t)},a.prototype.flatTypeBundle=function(){var e={};for(var t in this.referenceIdBundle){var r=this.typeBundle[t].types,n=this.referenceIdBundle[t];for(var i in n){var o=n[i],a=r[i];e[o]=this.replaceType(t,a)}}return Object.freeze(e)},a.prototype.replaceType=function(e,t){switch(t.typeEnum){case n.TypeEnum.Object:this.refreshObjectType(e,t);break;case n.TypeEnum.And:case n.TypeEnum.Or:this.refreshCompoundType(e,t);break;case n.TypeEnum.Generator:this.refreshGenerator(e,t);break;case n.TypeEnum.Reference:case n.TypeEnum.GlobalReference:return this.replaceReference(e,t)}return t},a.prototype.replaceReference=function(e,t){var r=t.name,i=this.findReferencePath(t),o=this.definitionFinder.findPath(e,i,r),a=this.referenceIdBundle[o.path][o.name];return{typeEnum:n.TypeEnum.Reference,name:""+a}},a.prototype.findReferencePath=function(e){return e.typeEnum===n.TypeEnum.GlobalReference?e.path:void 0},a.prototype.refreshObjectType=function(e,t){for(var r in t.key=this.replaceType(e,t.key),t.index=this.replaceType(e,t.index),t.properties)t.properties[r]=this.replaceType(e,t.properties[r])},a.prototype.refreshCompoundType=function(e,t){for(var r=t.children,n=0;n<r.length;++n)r[n]=this.replaceType(e,r[n])},a.prototype.refreshGenerator=function(e,t){t.template=this.replaceType(e,t.template);for(var r=0;r<t.params.length;++r)t.params[r]=this.replaceType(e,t.params[r])},a);function a(e){var t=this;this.typeBundle=e,this.definitionFinder=new i.DefinitionFinder({getFileDefinitions:function(e){return t.typeBundle[e]},isDefined:function(e,r){return!(!t.typeBundle[e]||!t.typeBundle[e].types[r])}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkClasses=function(e){for(var t=0,r={},n=0,i=Object.keys(e).sort();n<i.length;n++){for(var o=i[n],a={},s=0,c=e[o].slice().sort();s<c.length;s++)a[c[s]]=t++;r[o]=Object.freeze(a)}return Object.freeze(r)}},function(e,t,r){"use strict";var n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.isClassProperty=function(e){return e.type===n.Property},t.isClassMethod=function(e){return e.type===n.Method},(i=n=t.ClassMemberType||(t.ClassMemberType={})).Method="method",i.Property="property",(o=t.ClassReflectionPropertyMode||(t.ClassReflectionPropertyMode={})).Value="value",o.Readonly="readonly",o.Writeonly="writeonly",o.Accessible="accessible"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"limitDuration",{get:function(){return this._limitDuration},set:function(e){if(this._limitDuration!==e){if(this._limitDuration=e,-1!==this.timer){clearTimeout(this.timer);var t=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,t)}this.invoke()}},enumerable:!0,configurable:!0}),i.prototype.invoke=function(){if(this.isFreezed)this.shouldInvokeAfterFreeze=!0;else if(-1===this.timer){var e=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,e)}},i.prototype.nextInvokeTimeDuration=function(){var e=Date.now(),t=this.latestInvokeTimestamp+this.limitDuration-e;return Math.max(0,t)},i.prototype.invokeWhenTimeout=function(){this.timer=-1,this.latestInvokeTimestamp=Date.now(),this.invoker()},i.prototype.cancel=function(){this.isFreezed?this.shouldInvokeAfterFreeze=!1:-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1)},i.prototype.freeze=function(){this.isFreezed||(-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1,this.shouldInvokeAfterFreeze=!0),this.isFreezed=!0)},i.prototype.unfreeze=function(){this.isFreezed&&(this.isFreezed=!1,this.shouldInvokeAfterFreeze&&(this.shouldInvokeAfterFreeze=!1,this.invoke()))},i);function i(e,t){this.isFreezed=!1,this.shouldInvokeAfterFreeze=!1,this.latestInvokeTimestamp=0,this.timer=-1,this._limitDuration=e,this.invoker=t,this.invokeWhenTimeout=this.invokeWhenTimeout.bind(this)}t.InvokeFrequencyLimiter=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.freeze(["alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega"]),i=(o.prototype.withoutSuffix=function(){return new o(this.x,this.y,this.z)},o.prototype.toString=function(){var e=this.x+"."+this.y+"."+this.z;return this.suffix&&(e+="-"+this.suffix.greekLetter+"."+this.suffix.number),e},o.parse=function(e){if(!/^\d+\.\d+\.\d+(-\w+\.\d+)?$/i.test(e))throw new Error("invalid version format "+JSON.stringify(e));var t,r=e.match(/-\w+\.\d+$/),n=e;r&&(t=o.parseSuffix(e,r[0].replace(/^-/i,"")),n=e.substring(0,e.length-r[0].length));var i=o.parseVersionArray(e,n);return new o(i[0],i[1],i[2],t)},o.parseSuffix=function(e,t){var r=t.split("."),i=r[0];if(-1===n.indexOf(i))throw new Error("invalid Greek letter "+JSON.stringify(i)+" of "+JSON.stringify(e));var o=parseInt(r[1]);if(!Number.isSafeInteger(o))throw new Error("invalid version number "+JSON.stringify(o)+" of "+JSON.stringify(e));return Object.freeze({greekLetter:i,number:o})},o.parseVersionArray=function(e,t){for(var r=[],n=0,i=t.split(".");n<i.length;n++){var o=i[n],a=parseInt(o);if(!Number.isSafeInteger(a))throw new Error("invalid version number "+JSON.stringify(o)+" of "+JSON.stringify(e));r.push(a)}return r},o.compare=function(e,t){var r=e.x-t.x;if(0!==r)return r;if(0!=(r=e.y-t.y))return r;if(0!=(r=e.z-t.z))return r;if(!e.suffix&&t.suffix)return 1;if(e.suffix&&!t.suffix)return-1;if(!e.suffix&&!t.suffix)return 0;var i=e.suffix.greekLetter,o=t.suffix.greekLetter;return 0!=(r=n.indexOf(i)-n.indexOf(o))?r:e.suffix.number-t.suffix.number},o);function o(e,t,r,n){this.x=e,this.y=t,this.z=r,this.suffix=n,Object.freeze(this)}t.Version=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(248),i=r(250),o=r(251),a=r(128),s=(c.prototype.serialize=function(e){var t=e.writer,r=e.values,i=e.objectFormats,o=e.includesHash;new n.Serializer(t,i,this.objectAdapter,this.assertObjectFormat).serialize(r,o)},c.prototype.deserialize=function(e){var t=e.reader,r=e.objectFormats,n=e.ignoreHashChecking;switch(e.version){case a.AkkoSerVersion.V0:return new o.LegacyDeserializer(t,this.format,r,this.objectAdapter).deserialize(n);case a.AkkoSerVersion.V1:return new i.Deserializer(t,this.format,this.objectAdapter,r.length).deserialize(n);default:return[]}},c);function c(e){this.format=e.format,this.objectAdapter=e.objectAdapter,this.assertObjectFormat=e.assertObjectFormat||function(){}}t.Serialization=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(2),o=r(34),a=r(126),s=r(51),c=r(53),u=r(50),l=Math.pow(2,31)-1,p=-Math.pow(2,31),h=(d.prototype.serialize=function(e,t){var r=this.writer.putUint32Holder(),i=this.writer.didWriteBytes;1!==this.objectFormats.length&&this.writer.writeUint32(e.length);for(var a=0;a<e.length;++a){var c=this.objectFormats[a]||this.neverObjectFormat,u=e[a];this.serializeValue(c,u)}for(;0<this.serializeTasksQueue.length;)this.handleSerializeTask(this.serializeTasksQueue.shift());this.writer.writeBigInt(s.NullIdentifier),this.writer.writeUint32(this.serializeBufferQueue.length);for(var l=0,p=this.serializeBufferQueue;l<p.length;l++){var h=p[l];this.writer.writeUint8(h.readonly?255:0),this.writer.writeBuffer(h)}var d=this.writer.didWriteBytes-i,f=t?this.writer.generateHash(i,d):o.MD5ZeroBinary;this.serializeHash(f),r(d+n.MD5BinaryLength)},d.prototype.serializeValue=function(e,t){"object"!=typeof t?this.serializeNotObjectValue(t):null===t?this.writer.writeUint8(u.AkkoPrimitiveType.Null):i.isBuffer(t)?this.serializeBufferValue(t):this.serializeObjectValue(e,t)},d.prototype.handleSerializeTask=function(e){var t=e.isArray,r=e.identifier,n=e.object,i=e.deducedFormat;if(this.writer.writeBigInt(r),t)this.writer.writeUint8(u.ObjectType.Array),this.handleArraySerializeTask(n,i);else{var o=this.assertObjectFormat(n),a=o?u.ObjectType.AssertedObject:u.ObjectType.DeducedObject,s=o||i,c=!o;this.writer.writeUint8(a),this.handleObjectSerializeTask(n,s,c)}},d.prototype.serializeNotObjectValue=function(e){switch(typeof e){case"undefined":this.writer.writeUint8(u.AkkoPrimitiveType.Undefined);break;case"string":this.writer.writeUint8(u.AkkoPrimitiveType.String),this.writer.writeString(e);break;case"number":Number.isSafeInteger(e)?p<=e&&e<=l?(this.writer.writeUint8(u.AkkoPrimitiveType.Integer32),this.writer.writeInt32(e)):(this.writer.writeUint8(u.AkkoPrimitiveType.Integer53),this.writer.writeInt53(e)):(this.writer.writeUint8(u.AkkoPrimitiveType.Float),this.writer.writeFloat64(e));break;case"boolean":e?this.writer.writeUint8(u.AkkoPrimitiveType.True):this.writer.writeUint8(u.AkkoPrimitiveType.False);break;default:throw new c.SerializerError("not support "+typeof e+" now")}},d.prototype.serializeBufferValue=function(e){var t=this.bufferIndexMap[e.id];void 0===t&&(t=this.serializeBufferQueue.length,this.bufferIndexMap[e.id]=t,this.serializeBufferQueue[t]=e),this.writer.writeUint8(u.AkkoPrimitiveType.Buffer),this.writer.writeUint32(t)},d.prototype.serializeObjectValue=function(e,t){var r=this.objectAdapter.findIdentifier(t);this.objectAdapter.isArray(t)?(this.writer.writeUint8(u.AkkoPrimitiveType.Array),this.writer.writeUint8(0),this.pushToSerializeTaskQueueIfFirstCall({identifier:r,object:t,deducedFormat:e,isArray:!0})):(this.writer.writeUint8(u.AkkoPrimitiveType.Object),this.writer.writeUint8(0),this.pushToSerializeTaskQueueIfFirstCall({identifier:r,object:t,deducedFormat:e,isArray:!1})),this.writer.writeBigInt(r)},d.prototype.pushToSerializeTaskQueueIfFirstCall=function(e){this.didObjectInQueueSet[e.identifier]||(this.didObjectInQueueSet[e.identifier]=!0,this.serializeTasksQueue.push(e))},d.prototype.handleArraySerializeTask=function(e,t){var r=this.objectAdapter.length(e),n=t.index;this.writer.writeUint32(r);for(var i=0;i<r;++i)this.serializeValue(n,this.objectAdapter.getValue(e,i))},d.prototype.handleObjectSerializeTask=function(e,t,r){for(var n in this.writer.writeUint32(t.id),t.properties){var i=t.properties[n];this.objectAdapter.hasKey(e,n)?this.serializeValue(i,this.objectAdapter.getValue(e,n)):this.writer.writeUint8(u.AkkoPrimitiveType.Never)}if(r){for(var o=this.writer.putUint32Holder(),a=0,s=0,c=this.objectAdapter.keys(e);s<c.length;s++)(n=c[s])in t.properties||(this.writer.writeString(n),this.serializeValue(t.key,this.objectAdapter.getValue(e,n)),a++);o(a)}else this.writer.writeUint32(0)},d.prototype.serializeHash=function(e){for(var t=0;t<n.MD5BinaryLength;++t)t<e.length?this.writer.writeUint8(e.charCodeAt(t)):this.writer.writeUint8(0)},d);function d(e,t,r,n){this.writer=e,this.objectFormats=t,this.objectAdapter=r,this.assertObjectFormat=n,this.neverObjectFormat=a.createSelfloopObjectFormats(),this.serializeTasksQueue=[],this.serializeBufferQueue=[],this.didObjectInQueueSet={},this.bufferIndexMap={}}t.Serializer=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(127),i=r(52),o=r(35);t.createIdentifierGenerator=function(e,t){var r=[];return i.bigInteger.pushInt53(r,e),"number"==typeof t&&(i.bigInteger.pushInt53(r,t),i.bigInteger.cleanUnmeaningZero(r,n.ScopeIdHexCount)),new a(e,r)},t.createV0IdentifierGenerator=function(e,t){if(e>o.UInt32Mask)throw new Error("observerId "+e+" is out of range 0 ~ "+o.UInt32Mask);var r=[],n=new c(e,r);return i.bigInteger.pushUint32(r,e),n.makeSureNextGenerationIdAfter(t),n};var a=(s.prototype.generate=function(){var e=i.bigInteger.stringify(this.codes);return i.bigInteger.increment(this.codes,n.ScopeIdHexCount),e},Object.defineProperty(s.prototype,"createdCount",{get:function(){for(var e=n.ScopeIdHexCount,t=0,r=0,a=0;a<8;++a)t|=(s=void 0===(s=this.codes[e+a])?0:i.bigInteger.parseCode(s))<<4*a;for(e+=8,a=0;a<8;++a){var s;r|=(s=void 0===(s=this.codes[e+a])?0:i.bigInteger.parseCode(s))<<4*a}return r*o.Pow32+t},enumerable:!0,configurable:!0}),s.prototype.clone=function(){return new s(this.scopeId,this.codes.slice())},s);function s(e,t){this.scopeId=e,this.codes=t}t.ObserverIdHexCount=8;var c=(Object.defineProperty(u.prototype,"scopeId",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"createdCount",{get:function(){return this._createdCount},enumerable:!0,configurable:!0}),u.prototype.generate=function(){return this._createdCount++,i.bigInteger.increment(this.codes,t.ObserverIdHexCount),i.bigInteger.stringify(this.codes)},u.prototype.clone=function(){return new u(this.observerId,this.codes.slice())},u.prototype.makeSureNextGenerationIdAfter=function(e){for(var r=[],n=0;n<e.length;++n){var o=e.charCodeAt(n);if(void 0===i.bigInteger.parseCode(o))throw new Error("invalid generationId");r[n]=o}for(n=0;n<r.length;++n)this.codes[n+t.ObserverIdHexCount]=r[n]},u);function u(e,t){this.observerId=e,this.codes=t,this._createdCount=0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),i=r(50),o=r(51),a=r(53),s=r(74),c=(u.prototype.deserialize=function(e){for(var t=u.simpleObjectAdapter,r=this.reader.readUint32(),i=this.reader.didReadBytes,s=this.deserializeRootValuesLength(),c=[],l=0;l<s;++l)this.deserializeValue(t,c,l);for(;;){var p=this.reader.readBigInt();if(p===o.NullIdentifier)break;this.deserializeArrayOrObjectBody(p)}this.handleAllDeserializeBuffers(),this.invokeObjectDecorator();var h=this.reader.didReadBytes-i;if(r!==h+n.MD5BinaryLength)throw new a.DeserializerError("expect bytes "+r+", instead of "+(this.reader.didReadBytes-i));var d=this.deserializeHash();if(!e&&d!==n.MD5ZeroBinary&&d!==this.reader.generateHash(i,h))throw new a.DeserializerError("hash isn't matched");return c},u.prototype.deserializeRootValuesLength=function(){return 1!==this.valuesLength?this.reader.readUint32():1},u.prototype.invokeObjectDecorator=function(){var e=Object.freeze([]);for(var t in this.objectCacheMap){var r=this.objectCacheMap[t],n=this.objectStateMap[t];if(n){var i=this.holdersMap[t]||e,o=n.objectFormat,a=n.type;this.objectAdapter.decorateObject(r,a,i,o)}}},u.prototype.deserializeValue=function(e,t,r){var n=void 0;switch(this.reader.readUint8()){case i.AkkoPrimitiveType.Undefined:e.setValue(t,r,void 0);break;case i.AkkoPrimitiveType.Null:e.setValue(t,r,null);break;case i.AkkoPrimitiveType.String:e.setValue(t,r,this.reader.readString());break;case i.AkkoPrimitiveType.Integer32:e.setValue(t,r,this.reader.readInt32());break;case i.AkkoPrimitiveType.Integer53:e.setValue(t,r,this.reader.readInt53());break;case i.AkkoPrimitiveType.Float:e.setValue(t,r,this.reader.readFloat64());break;case i.AkkoPrimitiveType.True:e.setValue(t,r,!0);break;case i.AkkoPrimitiveType.False:e.setValue(t,r,!1);break;case i.AkkoPrimitiveType.Object:this.reader.readUint8(),n=this.reader.readBigInt();var o=this.readAndPushToDeserializeTaskQueueIfNeed(n,!1);e.setValue(t,r,o);break;case i.AkkoPrimitiveType.Array:this.reader.readUint8(),n=this.reader.readBigInt(),o=this.readAndPushToDeserializeTaskQueueIfNeed(n,!0),e.setValue(t,r,o);break;case i.AkkoPrimitiveType.Buffer:var a=this.reader.readUint32(),s=this.deserializeBufferSetterQueue[a];(s=s||(this.deserializeBufferSetterQueue[a]=[])).push((function(n){return e.setValue(t,r,n)}))}return n},u.prototype.readAndPushToDeserializeTaskQueueIfNeed=function(e,t){var r=t?this.arrayCacheMap:this.objectCacheMap,n=r[e];return n||(r[e]=n=this.objectAdapter.createObject(e,t)),n},u.prototype.deserializeArrayOrObjectBody=function(e){var t=this.reader.readUint8();switch(t){case i.ObjectType.Array:this.handleArrayDeserializerTask(this.arrayCacheMap[e]);break;case i.ObjectType.DeducedObject:case i.ObjectType.AssertedObject:var r=this.reader.readUint32(),n=this.format.findObjectFormat(r);this.objectStateMap[e]={type:t,objectFormat:n},this.handleObjectDeserializerTask(this.objectCacheMap[e],n)}},u.prototype.handleAllDeserializeBuffers=function(){for(var e=this.reader.readUint32(),t=0;t<e;++t){var r=this.reader.readUint8(),n=this.reader.readBuffer();r&&n.freeze();for(var i=0,o=this.deserializeBufferSetterQueue[t];i<o.length;i++)(0,o[i])(n)}},u.prototype.handleArrayDeserializerTask=function(e){for(var t=this.reader.readUint32(),r=0;r<t;++r)this.deserializeValueAndRecordHolders(e,r)},u.prototype.handleObjectDeserializerTask=function(e,t){for(var r in t.properties)this.deserializeValueAndRecordHolders(e,r);for(var n=this.reader.readUint32(),i=0;i<n;++i)r=this.reader.readString(),this.deserializeValueAndRecordHolders(e,r)},u.prototype.deserializeValueAndRecordHolders=function(e,t){var r=this.deserializeValue(this.objectAdapter,e,t);if(void 0!==r){var n=this.holdersMap[r];n||(this.holdersMap[r]=n=[]),n.push({object:e,key:t})}},u.prototype.deserializeHash=function(){for(var e=new Array(n.MD5BinaryLength),t=0;t<n.MD5BinaryLength;++t)e[t]=this.reader.readUint8();return String.fromCharCode.apply(String,e)},u.simpleObjectAdapter=new s.DefaultObjectAdapter,u);function u(e,t,r,n){this.reader=e,this.format=t,this.objectAdapter=r,this.valuesLength=n,this.arrayCacheMap={},this.objectCacheMap={},this.objectStateMap={},this.holdersMap={},this.deserializeBufferSetterQueue=[]}t.Deserializer=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(252);t.LegacyDeserializer=n.LegacyDeserializer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),i=r(126),o=r(50),a=r(51),s=r(53),c=r(74),u=(l.prototype.deserialize=function(e){for(var t=l.simpleObjectAdapter,r=this.reader.readUint32(),i=this.reader.didReadBytes,o=this.deserializeRootValuesLength(),c=[],u=0;u<o;++u){var p=this.objectFormats[u]||l.neverObjectFormat;this.deserializeValue(p,t,c,u)}for(;;){var h=this.reader.readBigInt();if(h===a.NullIdentifier)break;var d=this.takeNextDeserializerTask(h);this.handleDeserializerTask(d)}this.handleAllDeserializeBuffers(),this.invokeObjectDecorator();var f=this.reader.didReadBytes-i;if(r!==f+n.MD5BinaryLength)throw new s.DeserializerError("expect bytes "+r+", instead of "+(this.reader.didReadBytes-i));var m=this.deserializeHash();if(!e&&m!==n.MD5ZeroBinary&&m!==this.reader.generateHash(i,f))throw new s.DeserializerError("hash isn't matched");return c},l.prototype.deserializeRootValuesLength=function(){return 1!==this.objectFormats.length?this.reader.readUint32():1},l.prototype.invokeObjectDecorator=function(){var e=Object.freeze([]);for(var t in this.objectCacheMap){var r=this.objectCacheMap[t],n=this.holdersMap[t]||e,i=this.objectStateMap[t],o=i.objectFormat,a=i.type;this.objectAdapter.decorateObject(r,a,n,o)}},l.prototype.deserializeValueAndRecordHolders=function(e,t,r){var n=this.deserializeValue(e,this.objectAdapter,t,r);if(void 0!==n){var i=this.holdersMap[n];i||(this.holdersMap[n]=i=[]),i.push({object:t,key:r})}},l.prototype.deserializeValue=function(e,t,r,n){var i=void 0;switch(this.reader.readUint8()){case o.AkkoPrimitiveType.Undefined:t.setValue(r,n,void 0);break;case o.AkkoPrimitiveType.Null:t.setValue(r,n,null);break;case o.AkkoPrimitiveType.String:t.setValue(r,n,this.reader.readString());break;case o.AkkoPrimitiveType.Integer32:t.setValue(r,n,this.reader.readInt32());break;case o.AkkoPrimitiveType.Integer53:t.setValue(r,n,this.reader.readInt53());break;case o.AkkoPrimitiveType.Float:t.setValue(r,n,this.reader.readFloat64());break;case o.AkkoPrimitiveType.True:t.setValue(r,n,!0);break;case o.AkkoPrimitiveType.False:t.setValue(r,n,!1);break;case o.AkkoPrimitiveType.Object:i=this.reader.readBigInt();var a=this.readAndPushToDeserializeTaskQueueIfNeed(i,e,!1);t.setValue(r,n,a);break;case o.AkkoPrimitiveType.Array:i=this.reader.readBigInt(),a=this.readAndPushToDeserializeTaskQueueIfNeed(i,e,!0),t.setValue(r,n,a);break;case o.AkkoPrimitiveType.Buffer:var s=this.reader.readUint32(),c=this.deserializeBufferSetterQueue[s];(c=c||(this.deserializeBufferSetterQueue[s]=[])).push((function(e){return t.setValue(r,n,e)}))}return i},l.prototype.readAndPushToDeserializeTaskQueueIfNeed=function(e,t,r){var n=r?this.arrayCacheMap:this.objectCacheMap,i=n[e];return i||(n[e]=i=this.objectAdapter.createObject(e,r),this.deserializeTasksQueue.push({isArray:r,identifier:e,deducedFormat:t,object:i})),i},l.prototype.takeNextDeserializerTask=function(e){for(var t=0;t<this.deserializeTasksQueue.length;++t){var r=this.deserializeTasksQueue[t];if(e===r.identifier)return this.deserializeTasksQueue.splice(t,1),r}throw new s.DeserializerError("can't find identifier "+e+" in task queue")},l.prototype.handleDeserializerTask=function(e){var t=this.reader.readUint8(),r=e.identifier;switch(t){case o.ObjectType.Array:if(!e.isArray)throw new s.DeserializerError("expect array");this.objectStateMap[r]={type:t,objectFormat:e.deducedFormat},this.handleArrayDeserializerTask(e.object,e.deducedFormat);break;case o.ObjectType.DeducedObject:if(e.isArray)throw new s.DeserializerError("expect object");this.objectStateMap[r]={type:t,objectFormat:e.deducedFormat},this.handleObjectDeserializerTask(e.object,e.deducedFormat);break;case o.ObjectType.AssertedObject:if(e.isArray)throw new s.DeserializerError("expect object");var n=this.reader.readUint32(),i=this.format.findObjectFormat(n);this.objectStateMap[r]={type:t,objectFormat:i},this.handleObjectDeserializerTask(e.object,i)}},l.prototype.handleAllDeserializeBuffers=function(){for(var e=this.reader.readUint32(),t=0;t<e;++t){var r=this.reader.readUint8(),n=this.reader.readBuffer();r&&n.freeze();for(var i=0,o=this.deserializeBufferSetterQueue[t];i<o.length;i++)(0,o[i])(n)}},l.prototype.handleArrayDeserializerTask=function(e,t){for(var r=t.index,n=this.reader.readUint32(),i=0;i<n;++i)this.deserializeValueAndRecordHolders(r,e,i)},l.prototype.handleObjectDeserializerTask=function(e,t){for(var r in t.properties)this.deserializeValueAndRecordHolders(t.properties[r],e,r);for(var n=this.reader.readUint32(),i=0;i<n;++i)r=this.reader.readString(),this.deserializeValueAndRecordHolders(t.key,e,r)},l.prototype.deserializeHash=function(){for(var e=new Array(n.MD5BinaryLength),t=0;t<n.MD5BinaryLength;++t)e[t]=this.reader.readUint8();return String.fromCharCode.apply(String,e)},l.neverObjectFormat=i.createSelfloopObjectFormats(),l.simpleObjectAdapter=new c.DefaultObjectAdapter,l);function l(e,t,r,n){this.reader=e,this.format=t,this.objectFormats=r,this.objectAdapter=n,this.arrayCacheMap={},this.objectCacheMap={},this.objectStateMap={},this.holdersMap={},this.deserializeTasksQueue=[],this.deserializeBufferSetterQueue=[]}t.LegacyDeserializer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(115),i=r(116),o=r(35),a=r(52),s=[],c=[0],u=[0,0],l=[0,0,0],p=[0,0,0,0],h=[0,0,0,0,0],d=[0,0,0,0,0,0],f=[0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0],y=(Object.defineProperty(A.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),A.prototype.generateHash=function(e,t){for(var r=Math.min(e+t-1,this.buffer.byteLength-1),n=new i,o=[0],a=e;a<=r;++a)o[0]=this.buffer.getUint8(a),n.appendBinary(String.fromCharCode.apply(String,o));return n.end(!0)},Object.defineProperty(A.prototype,"didReadBytes",{get:function(){return this._offset},enumerable:!0,configurable:!0}),A.prototype.readBuffer=function(){var e=this.buffer.getUint32(this._offset);this._offset+=4;var t=this.buffer.slice(this._offset,e);return this._offset+=e,t},A.prototype.readUint8=function(){var e=this.buffer.getUint8(this._offset);return this._offset+=1,e},A.prototype.readUint16=function(){var e=this.buffer.getUint16(this._offset);return this._offset+=2,e},A.prototype.readInt32=function(){var e=this.buffer.getInt32(this._offset);return this._offset+=4,e},A.prototype.readUint32=function(){var e=this.buffer.getUint32(this._offset);return this._offset+=4,e},A.prototype.readInt53=function(){var e=this.buffer.getInt32(this._offset);this._offset+=4;var t=this.buffer.getInt32(this._offset);return this._offset+=4,t*o.Pow32+e},A.prototype.readFloat64=function(){var e=this.buffer.getFloat64(this._offset);return this._offset+=8,e},A.prototype.readString=function(){var e=this.readInt32(),t=n.read(this.buffer,this._offset,e);return this._offset+=e,t},A.prototype.readBigInt=function(){for(var e=this.readUint8(),t=Math.ceil(e/2),r=function(e){switch(e){case 0:return s;case 1:return c;case 2:return u;case 3:return l;case 4:return p;case 5:return h;case 6:return d;case 7:return f;case 8:return m;default:return[]}}(e),n=0;n<t;++n){var i=this.readUint8(),o=15&i,y=i>>4&15;r[2*n]=a.bigInteger.toCode(o),2*n+1<e&&(r[2*n+1]=a.bigInteger.toCode(y))}return String.fromCharCode.apply(String,r)},A.prototype.skipBytes=function(e){this._offset+=e},A);function A(e){this._offset=0,this.buffer=e}t.Reader=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MD5BinaryLength=16,t.MD5ZeroBinary=function(){for(var e=[],r=0;r<t.MD5BinaryLength;++r)e[r]=0;return String.fromCharCode.apply(String,e)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36);t.FormatError=n.FormatError;var i=r(256);t.FormatFactory=i.FormatFactory},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),i=r(36),o=r(257),a=r(35),s=(c.prototype.createWithRecords=function(e,t){for(var r=new o.FormatConstructor(t||this.replaceReferenceType),n=[],i={},a=0,s=e;a<s.length;a++){var c=s[a],l=c.type,p=c.interrupter,h=r.covert(l);p&&(i[h.id]=p),n.push(h.id)}for(var d=r.getObjectFormatRecords().map((function(e){var t=i[e.id];return t?t(e):e})),f=new u(d),m=[],y=0,A=n;y<A.length;y++){var g=A[y];m.push(f.findObjectFormat(g))}return{format:f,objectFormats:m}},c.prototype.createWithBuffer=function(e){return new u(u.deserialize(e))},c);function c(){this.replaceReferenceType=function(){throw new i.FormatError("not define referenceTypeReplacer")}}t.FormatFactory=s;var u=(l.prototype.isAnyObjectFormatRecord=function(e){for(var t in e.properties)return!1;return e.index===e.id&&e.key===e.id},l.prototype.completeObjectFormat=function(e,t){for(var r in e.id=t.id,e.key=this.formats[t.key],e.index=this.formats[t.index],e.properties={},t.properties)e.properties[r]=this.formats[t.properties[r]];Object.freeze(e.properties),Object.freeze(e)},l.prototype.findObjectFormat=function(e){var t=this.formats[e];if(!t)throw new Error("can't find ObjectFormat with id "+e);return t},l.prototype.serialize=function(){var e=[],t=new n.Writer;for(var r in this.records)e.push(this.records[r]);e.sort((function(e,t){return e.id-t.id})),t.writeUint32(e.length);for(var i=0,o=e;i<o.length;i++){var a=o[i];this.serializeRecord(a,t)}return t.toBuffer()},l.prototype.serializeRecord=function(e,t){if(e.id>a.UInt32Mask)throw new i.FormatError("ObjectFormat's number can't greater than "+a.UInt32Mask);var r=Object.keys(e.properties).sort();if(r.length>a.UInt32Mask)throw new i.FormatError("ObjectFormat's properties number can't greater than "+a.UInt32Mask);t.writeUint32(e.id),t.writeUint32(e.key),t.writeUint32(e.index),t.writeUint32(r.length);for(var n=0,o=r;n<o.length;n++){var s=o[n];t.writeString(s),t.writeUint32(e.properties[s])}},l.deserialize=function(e){for(var t=[],r=new n.Reader(e),i=r.readUint32(),o=0;o<i;++o){for(var a=r.readUint32(),s=r.readUint32(),c=r.readUint32(),u=r.readUint32(),l={},p=0;p<u;++p){var h=r.readString(),d=r.readUint32();l[h]=d}t.push({id:a,key:s,index:c,properties:l})}return t},l);function l(e){this.records={},this.formats={};for(var t=null,r=0,n=e;r<n.length;r++){var i=n[r],o={};this.records[i.id]=i,this.formats[i.id]=o,this.isAnyObjectFormatRecord(i)&&(t=o)}for(var a=0,s=e;a<s.length;a++)i=s[a],this.completeObjectFormat(this.formats[i.id],i);if(!t)throw new Error("can't find any object format");this.anyObjectFormat=t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(258);t.FormatConstructor=n.FormatConstructor},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(259),o=(a.prototype.covert=function(e){var t=this.templateEnvironment.getTemplate(e).getHandle([]).collapsedNode,r=this.findRecordId(t);return this.recordMap[r]},a.prototype.getObjectFormatRecords=function(){var e=[];for(var t in this.recordMap)e.push(this.recordMap[t]);return e},a.prototype.findRecordId=function(e){if(e.types.some((function(e){return e===n.TypeEnum.Object}))){var t=this.collapsedNodeToRecordMap[e.id];if(!t){var r={id:this.nextRecordId++};this.collapsedNodeToRecordMap[e.id]=r,this.recordMap[r.id]=r,this.convertCollapsedNodeAndFillObjectFormatRecord(e,r),t=r}return t.id}return this.anyObjectFormatRecord.id},a.prototype.convertCollapsedNodeAndFillObjectFormatRecord=function(e,t){for(;e.handle;)e=e.handle.collapsedNode;var r=e.object,n={};for(var i in r.properties)n[i]=this.findRecordId(r.properties[i]);t.key=this.findRecordId(r.key),t.index=this.findRecordId(r.index),t.properties=n},a);function a(e){this.collapsedNodeToRecordMap={},this.recordMap={},this.nextRecordId=0,this.templateEnvironment=new i.TemplateEnvironment(e);var t=this.nextRecordId++;this.recordMap[t]=this.anyObjectFormatRecord={id:t,key:t,index:t,properties:{}}}t.FormatConstructor=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(129),i=r(130),o=r(260),a=r(36),s=(c.prototype.getTemplate=function(e){if(void 0===e.id)throw new a.FormatError("templateType don't have id");var t=this.templatesTable[e.id];return t||(t=new u(this,e),this.templatesTable[e.id]=t),t},c);function c(e){this.replaceReferenceType=e,this.templatesTable={}}t.TemplateEnvironment=s;var u=(l.prototype.getHandle=function(e){var t=this.getHandleByParams(e);if(!t){t={state:n.HandleState.Indeterminate},this.setHandleWithParams(t,e.slice());var r=this.createCollapsedNode(e);t.collapsedNode=r,t.state=r.hasCircular?n.HandleState.Circular:n.HandleState.Noncircular}return t},l.prototype.createCollapsedNode=function(e){var t=new i.ExpandedExpressionGenerator(this.templateEnvironment,this.templateType,e).getExpandedExpression();return new o.CollapsedExpressionGenerator(t).getCollapsedExpression()},l.prototype.getHandleByParams=function(e){for(var t=0,r=this.handlesCache;t<r.length;t++){var n=r[t];if(l.isParamsEquals(n.params,e))return n.handle}},l.prototype.setHandleWithParams=function(e,t){if(2500<=this.handlesCache.length)throw new a.FormatError("the template's definition is divergence");this.handlesCache.push({handle:e,params:t})},l.isParamsEquals=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r){var n=e[r],i=t[r];if(n!==i){if(!("id"in n&&"id"in i))return!1;if(n.id!==i.id)return!1}}return!0},l);function l(e,t){this.templateEnvironment=e,this.templateType=t,this.handlesCache=[]}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=r(129),a=r(36),s=r(130),c=(u.generateId=function(){return""+this.nextId++},u.prototype.getCollapsedExpression=function(){return this.collapseNode(this.rootExpandedNode)},u.prototype.collapseNode=function(e){switch(e.clazz){case s.ExpandedNodeClass.Border:return{id:u.generateId(),hasCircular:!1,types:[e.type.typeEnum]};case s.ExpandedNodeClass.Object:return this.collapseObjectExpandedNode(e);case s.ExpandedNodeClass.Handle:return this.collapseHandleExpandedNode(e);case s.ExpandedNodeClass.Compound:return this.collapseCompoundExpandedNode(e,e.type.typeEnum)}},u.prototype.collapseObjectExpandedNode=function(e){var t=e.key,r=e.index,n=e.properties,o=this.collapseNode(t),a=this.collapseNode(r),s=o.hasCircular||a.hasCircular,c={};for(var l in n){var p=n[l],h=this.collapseNode(p);c[l]=h,s=s||h.hasCircular}var d={key:o,index:a,properties:c};return this.isCollapsedObjectHasNeverPropertyTypes(d)?u.NeverCollapsedNode:{id:u.generateId(),hasCircular:s,types:[i.TypeEnum.Object],object:d}},u.prototype.collapseHandleExpandedNode=function(e){var t=e.handle;switch(t.state){case o.HandleState.Noncircular:return t.collapsedNode;case o.HandleState.Indeterminate:case o.HandleState.Circular:return{id:u.generateId(),hasCircular:!0,types:[i.TypeEnum.Object],handle:t}}},u.prototype.collapseCompoundExpandedNode=function(e,t){for(var r=[],n=0,s=e.children;n<s.length;n++){var c=s[n];r.push(this.collapseNode(c))}if(0===r.length)return u.NeverCollapsedNode;if(1===r.length)return r[0];for(var l=0,p=r;l<p.length;l++){var h=p[l];if(h.handle&&h.handle.state===o.HandleState.Indeterminate){var d=t===i.TypeEnum.And?"&":"|";throw new a.FormatError('can not operate an indeterminate expression with "'+d+'" sign')}}return t===i.TypeEnum.And?this.pruneAndMergeNodes(r):this.flattenNodes(r)},u.prototype.pruneAndMergeNodes=function(e){var t=this.collectCrossTypeEnumsWith(e);if(0===t.length||t.find((function(e){return e===i.TypeEnum.Never})))return u.NeverCollapsedNode;var r=this.collectAllObjectCollapsedNodesIn(e);return this.handleObjectCollapsedNodesWithTypeEnums(r,t,i.TypeEnum.And)},u.prototype.flattenNodes=function(e){var t=this.collectUnionTypeEnumsWith(e);if(0===(t=t.filter((function(e){return e!==i.TypeEnum.Never}))).length)return u.NeverCollapsedNode;if(t.find((function(e){return e===i.TypeEnum.Any})))return{id:u.generateId(),hasCircular:!1,types:[i.TypeEnum.Any]};var r=this.collectAllObjectCollapsedNodesIn(e);return this.handleObjectCollapsedNodesWithTypeEnums(r,t,i.TypeEnum.Or)},u.prototype.collectCrossTypeEnumsWith=function(e){for(var t={},r=0,n=e;r<n.length;r++)for(var i=0,o=n[r].types;i<o.length;i++){var a=o[i];void 0===(u=t[a])&&(u=0),t[a]=u+1}var s=[];for(var c in t){var u;(u=t[c])===e.length&&s.push(c)}return s},u.prototype.collectUnionTypeEnumsWith=function(e){for(var t={},r=0,n=e;r<n.length;r++)for(var i=0,o=n[r].types;i<o.length;i++)t[o[i]]=!0;var a=[];for(var s in t)t[s]&&a.push(s);return a},u.prototype.collectAllObjectCollapsedNodesIn=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];(i.object||i.handle)&&t.push(i)}return t},u.prototype.handleObjectCollapsedNodesWithTypeEnums=function(e,t,r){if(0===e.length)return{id:u.generateId(),hasCircular:!1,types:t};if(1===e.length)return n({},e[0],{id:u.generateId(),types:t});var o=[];if(e=e.filter((function(e){return!e.handle||(o.push(e),!1)})),2<=o.length){var s=r===i.TypeEnum.And?"&":"|";throw new a.FormatError("can not "+o.length+' circular expression with "'+s+'" sign')}e.push.apply(e,o);for(var c=e[0].object,l=1;l<e.length;++l){if(r===i.TypeEnum.And&&this.isCollapsedObjectHasNeverPropertyTypes(c))return u.NeverCollapsedNode;var p=e[l],h=this.getObjectFromObjectCollapsedNode(p);c=r===i.TypeEnum.And?this.factorizeWithAndOperation(c,h):this.factorizeWithOrOperation(c,h)}return this.isCollapsedObjectHasNeverPropertyTypes(c)?u.NeverCollapsedNode:{id:u.generateId(),types:t,hasCircular:this.hasCircularIn(e),object:c}},u.prototype.getObjectFromObjectCollapsedNode=function(e){for(;;){if(e.object)return e.object;e=e.handle.collapsedNode}},u.prototype.hasCircularIn=function(e){for(var t=0,r=e;t<r.length;t++)if(r[t].hasCircular)return!0;return!1},u.prototype.factorizeWithAndOperation=function(e,t){var r=[],n=[],i=[];for(var o in e.properties)o in t.properties?r.push(o):n.push(o);for(var o in t.properties)o in e.properties||i.push(o);for(var a={},s=0,c=r;s<c.length;s++){o=c[s];var u=e.properties[o],l=t.properties[o];a[o]=this.pruneAndMergeNodes([u,l])}for(var p=0,h=n;p<h.length;p++)a[o=h[p]]=e.properties[o];for(var d=0,f=i;d<f.length;d++)a[o=f[d]]=t.properties[o];return{key:this.pruneAndMergeKeyOrIndexNodes(e.key,t.key),index:this.pruneAndMergeKeyOrIndexNodes(e.index,t.index),properties:a}},u.prototype.factorizeWithOrOperation=function(e,t){var r=[];for(var n in e.properties)n in t.properties&&r.push(n);for(var i={},o=0,a=r;o<a.length;o++){n=a[o];var s=e.properties[n],c=t.properties[n];i[n]=this.flattenNodes([s,c])}return{key:this.flattenNodesKeyOrIndexNodes(e.key,t.key),index:this.flattenNodesKeyOrIndexNodes(e.index,t.index),properties:i}},u.prototype.pruneAndMergeKeyOrIndexNodes=function(e,t){return this.isCollapsedNodeTypeEqual(e,i.TypeEnum.Undefined)?t:this.isCollapsedNodeTypeEqual(t,i.TypeEnum.Undefined)?e:this.pruneAndMergeNodes([e,t])},u.prototype.flattenNodesKeyOrIndexNodes=function(e,t){return this.isCollapsedNodeTypeEqual(e,i.TypeEnum.Undefined)?t:this.isCollapsedNodeTypeEqual(t,i.TypeEnum.Undefined)?e:this.flattenNodes([e,t])},u.prototype.isCollapsedObjectHasNeverPropertyTypes=function(e){if(this.isCollapsedNodeTypeEqual(e.key,i.TypeEnum.Never))return!0;if(this.isCollapsedNodeTypeEqual(e.index,i.TypeEnum.Never))return!0;for(var t in e.properties)if(this.isCollapsedNodeTypeEqual(e.properties[t],i.TypeEnum.Never))return!0;return!1},u.prototype.isCollapsedNodeTypeEqual=function(e,t){return 1===e.types.length&&e.types[0]===t},u.nextId=0,u.NeverCollapsedNode={id:u.generateId(),hasCircular:!1,types:[i.TypeEnum.Never]},u);function u(e){this.rootExpandedNode=e}t.CollapsedExpressionGenerator=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeLegacyIdentifierContext=function(e){for(var t=e.readInt32(),r=(e.readInt32(),[]),n=0;n<t;++n){var i=e.readUint32();r.push({userId:i,nextFrameId:0,session:"",payload:void 0})}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(75),o=r(263);function a(e,t){var r=e.getInt32(t);return e.getInt32(t+4)*o.Pow32+r}t.translateToAckFrame=function(e){for(var t=new n.Reader(e),r=new n.Writer,o=0;o<20;++o)r.writeUint8(t.readUint8());return r.writeUint8(i.ActionFrameType.Ack),r.toBuffer()};var s=(Object.defineProperty(c.prototype,"frameId",{get:function(){return this.frameBuffer.getUint32(0)},set:function(e){this.frameBuffer.setUint32(0,e)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"originalFrameId",{get:function(){return this.frameBuffer.getUint32(4)},set:function(e){this.frameBuffer.setUint32(4,e)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"timestamp",{get:function(){return a(this.frameBuffer,8)},set:function(e){var t=0|e,r=(e-t)/o.Pow32;this.frameBuffer.setInt32(8,t),this.frameBuffer.setInt32(12,r)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"authorId",{get:function(){return this.frameBuffer.getUint32(16)},set:function(e){this.frameBuffer.setUint32(16,e)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"type",{get:function(){return this.frameBuffer.getUint8(20)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"scopeId",{get:function(){return a(this.frameBuffer,21)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"beginObjectId",{get:function(){return a(this.frameBuffer,29)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"scope",{get:function(){return this.frameBuffer.getUint8(37)},enumerable:!0,configurable:!0}),c.prototype.fetchEventContent=function(){var e=new n.Reader(this.frameBuffer);if(e.skipBytes(37),this.type===i.ActionFrameType.Event){var t=e.readUint8();return{event:e.readString(),scope:t}}},c);function c(e){if(e.byteLength<20)throw new Error("Buffer is to short");this.frameBuffer=e}t.FramePicker=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pow32=Math.pow(2,32),t.Pow16=Math.pow(2,16),t.UInt32Mask=t.Pow32-1,t.UInt16Mask=t.Pow16-1,t.UInt8Mask=255},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(13),o=r(25),a=r(139),s=r(3),c=r(140),u=r(12),l=(p.prototype.createParamsSerialization=function(e){var t=o.getClassReflection(e.rootClass),r=new n.Serialization({format:e.format,objectAdapter:new c.ParamsObjectAdapter});return u.createFrameSerialization(r,t)},p.prototype.createProxyNodeSerialization=function(e,t){var r=this.createProxyObjectAdapter(e,t),i=o.getClassReflection(e.rootClass),a=new n.Serialization({format:e.format,objectAdapter:r,assertObjectFormat:function(e){return s.isAkkoObjectProxyNode(e)?e.struct.classReflection.objectFormat:void 0}});return u.createFrameSerialization(a,i)},p.prototype.createProxyObjectAdapter=function(e,t){var r=e.covertObjectFormatIdToClass;return new a.ProxyObjectAdapter(t,(function(e,t,o,a){if(a&&t===n.ObjectType.AssertedObject){var c=r(a.id);if(!c)throw new n.SerializerError("can't find class by object format id "+a.id);var u=c[i.ClassReflectionName];s.isFlatObjectProxyNode(e)&&e.covertToAkkoObjectProxyNode(u)}}))},p);function p(e,t){this.paramsSerialization=this.createParamsSerialization(e),this.proxyNodeSerialization=this.createProxyNodeSerialization(e,t)}t.FrameSerializationBundles=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55);t.transient=n.createDecorator(null)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55);t.noEffects=n.createDecorator(null)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(268),i=r(55),o=function(e){this.eventFilter=new n.EventFilterHub(e).filter};t.isEventPayload=function(e){return"object"==typeof e&&null!==e&&e instanceof o},t.event=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.createDecorator(new o(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(269))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventFilterHub=function(e){var t=this;this.filters=[],this.filter=function(e,r,n){for(var i=0,o=t.filters;i<o.length;i++)if((0,o[i])(e,r,n))return!0;return!1};for(var r=[],n=function(e){var t=void 0;if("function"==typeof e)t=e;else if("string"==typeof e)t=function(t){return t===e};else{if(!(e instanceof RegExp))throw new Error("unrecognized condition "+e);t=function(t){return e.test(t)}}r.push(t)},i=0,o=e;i<o.length;i++)n(o[i]);this.filters=Object.freeze(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(131),i=r(3);function o(e){switch(typeof e){case"function":return e;case"object":if(null!==e)return function(e){if(i.isDisplayerNode(e)){var t=e.__proxy;return i.isFlatObjectProxyNode(t)?Object:i.isArrayProxyNode(t)?Array:i.isAkkoObjectProxyNode(t)?t.struct.classReflection.clazz:void 0}return i.isProxyNode(e)?e.clazz:e.constructor}(e)}}t.isInstanceOf=function(e,t){return i.isDisplayerNode(e)?e.__proxy.displayerTarget()instanceof t:i.isProxyNode(e)?e.displayerTarget()instanceof t:e instanceof t},t.findClassId=function(e){var t=o(e);if(t===Object)return-1;if(t===Array)return-2;if(void 0===t)return-3;var r=t[n.ClassReflectionName];return r?r.id:-3},t.findClass=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(9),a=r(274),s=r(283),c=r(284),u=r(285),l=r(286);(i=n=t.CoreFunctionsMode||(t.CoreFunctionsMode={}))[i.Illusion=0]="Illusion",i[i.IllusionRebuild=1]="IllusionRebuild",i[i.Real=2]="Real",i[i.RealAck=3]="RealAck",i[i.Outside=4]="Outside";var p=(h.prototype.switchCoreFunctions=function(e){switch(e){case n.Illusion:this.currentCoreFunctions=this.illusion;break;case n.IllusionRebuild:this.currentCoreFunctions=this.illusionRebuild;break;case n.Real:this.currentCoreFunctions=this.real;break;case n.RealAck:this.currentCoreFunctions=this.realAck;break;case n.Outside:this.currentCoreFunctions=this.outside}return this.currentCoreFunctions},h.bind=function(e){return Object.freeze({creator:e.creator.bind(e),updater:e.updater.bind(e),wrapper:e.wrapper.bind(e),unwrapper:e.unwrapper.bind(e),jsxUnwrapper:e.jsxUnwrapper.bind(e),getter:e.getter.bind(e),setter:e.setter.bind(e),caller:e.caller.bind(e),remover:e.remover.bind(e),prefix:e.prefix.bind(e),postfix:e.postfix.bind(e),onContextUpdate:e.onContextUpdate.bind(e)})},h);function h(){var e=this;this.illusion=h.bind(new a.IllusionCoreFunctions),this.illusionRebuild=h.bind(new s.IllusionRebuildCoreFunctions),this.real=h.bind(new c.RealCoreFunctions),this.realAck=h.bind(new u.RealAckCoreFunctions),this.outside=h.bind(new l.OutsideCoreFunctions),this.currentCoreFunctions=this.illusion,o.contextStack.addListener((function(t,r){return e.currentCoreFunctions.onContextUpdate(t,r)}))}t.CoreFunctionsSwitcher=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(132),i=(Object.defineProperty(o.prototype,"currentNode",{get:function(){return this._currentNode},enumerable:!0,configurable:!0}),o.prototype.addListener=function(e){this.listeners.push(e)},o.prototype.runWith=function(e,t){var r=this._currentNode;this._currentNode=e,r&&this.dispatch(n.ContextState.Covered,r),this.dispatch(n.ContextState.Appear,e);try{return t()}finally{this._currentNode=r,this.dispatch(n.ContextState.Disappear,e),r?this.dispatch(n.ContextState.Reappear,r):this.dispatch(n.ContextState.Cleaned,void 0)}},o.prototype.dispatch=function(e,t){for(var r=0,n=this.listeners;r<n.length;r++){var i=n[r];try{i(e,t)}catch(e){console.error(e)}}},o);function o(){this.listeners=[]}t.ContextStackImplement=i},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.ForwardMode||(t.ForwardMode={}))[n.SingleForward=0]="SingleForward",n[n.DoubleForward=1]="DoubleForward"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(9),s=r(37),c=r(3),u=r(13),l=void 0,p=void 0,h=void 0,d=(i(f,o=s.CommonCoreFunctions),f.prototype.onContextUpdate=function(e,t){switch(e){case a.ContextState.Appear:case a.ContextState.Reappear:h=t.tools?(l=t.tools.idGenerator,p=t.frameSection,t.proxyRuntime):p=l=void 0;break;case a.ContextState.Cleaned:h=p=l=void 0}},f.prototype.creator=function(e){var t,r=l.generate();if(e.constructor===Array)t=h.createArrayProxy(r,e);else if(e.constructor===Object)t=h.createFlatObjectProxy(r,e);else{var n=e.constructor[u.ClassReflectionName];if("object"!=typeof n||null===n)throw new Error("can't find __reflection");t=h.createAkkoObjectProxy(r,e,n)}return p.addCreatedObject(t),t},f.prototype.updater=function(e){return c.isProxyNode(e)&&p.illusionUpdateProxyNode(e),e},f.prototype.setter=function(e,t,r){var n=s.findProxyNode(e);return r=s.standardizeValue(r),n?(p.illusionUpdateProxyNode(n),n.setValue(t,r)):e[t]=r},f.prototype.prefix=function(e,t,r){var n=s.findProxyNode(e);if(n)return p.illusionUpdateProxyNode(n),n.prefix(t,r);e[t]+=r},f.prototype.postfix=function(e,t,r){var n=s.findProxyNode(e);if(n)return p.illusionUpdateProxyNode(n),n.postfix(t,r);var i=e[t];return e[t]+=r,i},f.prototype.remover=function(e,t){var r=s.findProxyNode(e);if(r)return p.illusionUpdateProxyNode(r),r.removeKey(t);delete e[t]},f);function f(){return null!==o&&o.apply(this,arguments)||this}t.IllusionCoreFunctions=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);function i(){this.systemClassNodes={}}var o=new(i.prototype.findFunction=function(e,t){var r=e.name,n=this.systemClassNodes[r];if(n&&n.clazz===e)return n.proxy[t]},i.prototype.bindSystemClass=function(e,t){var r=e.name,n=this.createClassProxy(r,t);this.systemClassNodes[r]=Object.freeze({clazz:e,proxy:n})},i.prototype.createClassProxy=function(e,t){var r=t.banList,n=t.proxy,i={};if(n)for(var o in n)i[o]=n[o];if(r)for(var a=function(t){i[t]=function(){throw new Error(e+"."+t+" is ban in Magix")}},s=0,c=r;s<c.length;s++)a(o=c[s]);return Object.freeze(i)},i);o.bindSystemClass(Object,{banList:["getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","create","defineProperty","defineProperties"],proxy:{assign:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;++r)e[r]=n.unwrapProxy(e[r]);return Object.assign.apply(this,e)[n.ProxyKey]}}}),o.bindSystemClass(Array,{banList:["from"]}),o.bindSystemClass(String,{proxy:{fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;++r)e[r]=n.unwrapProxy(e[r]);return String.fromCodePoint.apply(this,e)},fromCharCode:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;++r)e[r]=n.unwrapProxy(e[r]);return String.fromCharCode.apply(this,e)}}}),o.bindSystemClass(Number,{proxy:{isFinite:Number.isFinite,isInteger:Number.isInteger,isNaN:Number.isNaN,isSafeInteger:Number.isSafeInteger,parseFloat:Number.parseFloat,parseInt:Number.parseInt}}),t.findSystemClassProxyFunction=function(e,t){return o.findFunction(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(2),a=r(133),s=r(13),c=r(134),u=r(3),l=r(278),p=r(26),h=(n=function(){if("undefined"==typeof window||void 0===window.document){var e=r(280);if(e)return e;throw new o.RuntimeError('need install "atob" before launch')}}(),i=new c.LibraryFactory(n),new o.Initializer({akkoVersion:o.AkkoVersion,akkoObjectBaseClass:a.AkkoObject,libraryFactory:i.create.bind(i),coreFunctions:l.getInitializerCoreFunctions()}));t.__context=h.context,t.getLibrary=h.getLibrary,t.isAkkoObject=function(e){if(!p.isInMagix())throw new Error("can't call isAkkoObject out of Magix");return u.isAkkoObjectProxyNode(e)||h.isAkkoObject(e)},t.getClassReflection=function e(t){if("function"==typeof t){var r=t[s.ClassReflectionName];if("object"==typeof r&&null!==r)return r}else if(h.isAkkoObject(t))return e(t.constructor)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=(o.prototype.parse=function(e){for(var t=new String((this.atob||atob)(e)),r=n.createBuffer(t.length),i=0;i<t.length;++i)r.setUint8(i,t.charCodeAt(i));return r},o);function o(e){this.atob=e}t.Base64Parser=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o,a,s,c,u,l,p,h,d,f=r(9);function m(e){n=e.creator,i=e.updater,o=e.wrapper,a=e.unwrapper,s=e.jsxUnwrapper,c=e.getter,u=e.setter,l=e.caller,p=e.remover,h=e.prefix,d=e.postfix}t.getInitializerCoreFunctions=function(){return{creator:function(e){return n(e)},updater:function(e){return i(e)},wrapper:function(e){return o(e)},unwrapper:function(e){return a(e)},jsxUnwrapper:function(e){return s(e)},getter:function(e,t){return c(e,t)},setter:function(e,t,r){return u(e,t,r)},caller:function(e,t,r,n){return l(e,t,r,n)},remover:function(e,t){return p(e,t)},prefix:function(e,t,r){return h(e,t,r)},postfix:function(e,t,r){return d(e,t,r)}}};var y=Object.freeze({creator:function(e){return e},updater:function(e){return e},wrapper:function(e){return e},unwrapper:function(e){return e},jsxUnwrapper:function(e){return e},getter:function(e,t){return e[t]},setter:function(e,t,r){return e[t]=r},caller:function(e,t,r,n){return(n||e)[t].apply(e,r)},remover:function(e,t){return delete e[t]},prefix:function(e,t,r){return e[t]+=r},postfix:function(e,t,r){var n=e[t];return e[t]+=r,n}});m(y),f.contextStack.addListener((function(e,t){switch(e){case f.ContextState.Appear:case f.ContextState.Reappear:m(t.coreFunctions);break;case f.ContextState.Cleaned:m(y)}}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(135),i=(o.prototype.getAuthorId=function(){return this.environment===n.Environment.NoEffects&&this.observerId===this.authorId&&this.roomObserver.reportObservedSelfUserId(),this.authorId},o.prototype.hasUser=function(e){return this.environment===n.Environment.NoEffects&&this.roomObserver.reportObservedUsers(),this.imageUsers.hasUser(e)},o.prototype.getUsersCount=function(){return this.environment===n.Environment.NoEffects&&this.roomObserver.reportObservedUsers(),this.imageUsers.usersCount},o.prototype.getUser=function(e){var t;return this.imageUsers.hasUser(e)&&(t=(t=this.usersCache[e])||(this.usersCache[e]=this.core.creator(this.imageUsers.user(e,!0)))),this.environment===n.Environment.NoEffects&&this.roomObserver.reportObservedUsers(),t},o.prototype.getUserIds=function(){return this.userIdsCache||(this.userIdsCache=this.core.creator(this.imageUsers.userIds)),this.environment===n.Environment.NoEffects&&this.roomObserver.reportObservedUsers(),this.userIdsCache},o);function o(e){this.usersCache={},this.idGenerator=e.idGenerator,this.observerId=e.observerId,this.environment=e.environment,this.timestamp=e.timestamp,this.authorId=e.authorId,this.core=e.coreFunctions,this.roomObserver=e.roomObserver,this.imageUsers=e.imageUsers,this.resource=e.resource,this.snapshot=e.snapshot}t.MagixTools=i},function(e,t,r){(function(e,t){!function(r){"use strict";var n,i="function"==typeof(n=r.atob)?n:"function"==typeof e?function(t){return new e(t,"base64").toString("binary")}:"object"==typeof r.base64js?function(e){var t=r.base64js.b64ToByteArray(e);return Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("")}:function(){throw new Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.")};r.atob=i,t&&t.exports&&(t.exports=i)}(window)}).call(this,r(118).Buffer,r(281)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(3),o=(a.prototype.unwrap=function(e){return i.isProxyNode(e)?this.unwrapProxyNode(e):n.isBuffer(e)?e.readonly?e:e.slice():e},a.prototype.unwrapProxyNode=function(e){if(i.isAkkoObjectProxyNode(e))return e.displayer;var t=e.identifier,r=this.unwrappedMap[t];if(!r){var n=e.target();if(i.isFlatObjectProxyNode(e))for(var o in this.unwrappedMap[t]=r={},n)r[o]=this.unwrap(n[o]);else if(i.isArrayProxyNode(e)){this.unwrappedMap[t]=r=[];for(var a=0;a<n.length;++a)r[a]=this.unwrap(n[a])}}return r},a);function a(){this.unwrappedMap={}}t.JsxUnwrapper=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(9),s=r(37),c=r(3),u=r(13),l=void 0,p=void 0,h=void 0,d=(i(f,o=s.CommonCoreFunctions),f.prototype.onContextUpdate=function(e,t){switch(e){case a.ContextState.Appear:case a.ContextState.Reappear:h=t.tools?(l=t.tools.idGenerator,p=t.frameSection,this.createCarrierAndCreator(t)):p=l=void 0;break;case a.ContextState.Cleaned:h=p=l=void 0}},f.prototype.createCarrierAndCreator=function(e){var t=e.frameSection,r=e.proxyRuntime;return function(e,n){var i=t.illusionTakeCreatedObject(e,n);if(i)i.replaceIlluTarget(n);else if(n.constructor===Array)i=r.createArrayProxy(e,n);else if(n.constructor===Object)i=r.createFlatObjectProxy(e,n);else{var o=n.constructor[u.ClassReflectionName];if("object"!=typeof o||null===o)throw new Error("can't find __reflection");i=r.createAkkoObjectProxy(e,n,o)}return t.addCreatedObject(i),i}},f.prototype.creator=function(e){return h(l.generate(),e)},f.prototype.updater=function(e){return c.isProxyNode(e)&&p.illusionUpdateProxyNode(e),e},f.prototype.setter=function(e,t,r){var n=s.findProxyNode(e);return r=s.standardizeValue(r),n?(p.illusionUpdateProxyNode(n),n.setValue(t,r)):e[t]=r},f.prototype.prefix=function(e,t,r){var n=s.findProxyNode(e);if(n)return p.illusionUpdateProxyNode(n),n.prefix(t,r);e[t]+=r},f.prototype.postfix=function(e,t,r){var n=s.findProxyNode(e);if(n)return p.illusionUpdateProxyNode(n),n.postfix(t,r);var i=e[t];return e[t]+=r,i},f.prototype.remover=function(e,t){var r=s.findProxyNode(e);if(r)return p.illusionUpdateProxyNode(r),r.removeKey(t);delete e[t]},f);function f(){return null!==o&&o.apply(this,arguments)||this}t.IllusionRebuildCoreFunctions=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=r(13),c=r(3),u=r(9),l=r(37),p=void 0,h=u.ForwardMode.SingleForward,d=(i(f,a=l.CommonCoreFunctions),f.prototype.onContextUpdate=function(e,t){switch(e){case u.ContextState.Appear:case u.ContextState.Reappear:h=t.tools?(p=t.tools.idGenerator,o=t.proxyRuntime,t.forwardMode):(o=p=void 0,u.ForwardMode.SingleForward);break;case u.ContextState.Cleaned:o=p=void 0,h=u.ForwardMode.SingleForward}},f.prototype.creator=function(e){var t,r=p.generate();if(e.constructor===Array)t=o.createArrayProxy(r,e);else if(e.constructor===Object)t=o.createFlatObjectProxy(r,e);else{var n=e.constructor[s.ClassReflectionName];if("object"!=typeof n||null===n)throw new Error("can't find __reflection");t=o.createAkkoObjectProxy(r,e,n)}return h===u.ForwardMode.DoubleForward&&t.converge(),t},f.prototype.wrapper=function(e){if("object"!=typeof e||null===e)return e;var t=e[c.ProxyKey];return t?(h===u.ForwardMode.DoubleForward&&t.converge(),t):e},f);function f(){return null!==a&&a.apply(this,arguments)||this}t.RealCoreFunctions=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(9),s=r(37),c=r(3),u=r(13),l=void 0,p=void 0,h=void 0,d=(i(f,o=s.CommonCoreFunctions),f.prototype.onContextUpdate=function(e,t){switch(e){case a.ContextState.Appear:case a.ContextState.Reappear:h=t.tools?(l=t.tools.idGenerator,p=t.frameSection,this.createCarrierAndCreator(t)):p=l=void 0;break;case a.ContextState.Cleaned:h=p=l=void 0}},f.prototype.createCarrierAndCreator=function(e){var t=e.frameSection,r=e.proxyRuntime;return function(e,n){var i=t.realTakeCreatedObject(e,n);if(i)i.realTarget=c.carryObject(i,n);else if(n.constructor===Array)(i=r.createArrayProxy(e,n)).converge(),t.realUpdateProxyNode(i);else if(n.constructor===Object)(i=r.createFlatObjectProxy(e,n)).converge(),t.realUpdateProxyNode(i);else{var o=n.constructor[u.ClassReflectionName];if("object"!=typeof o||null===o)throw new Error("can't find __reflection");(i=r.createAkkoObjectProxy(e,n,o)).converge(),t.realUpdateProxyNode(i)}return i}},f.prototype.creator=function(e){return h(l.generate(),e)},f.prototype.wrapper=function(e){if("object"!=typeof e||null===e)return e;var t=e[c.ProxyKey];return t?(t.illuTarget||(t.converge(),p.realUpdateProxyNode(t)),t):e},f.prototype.updater=function(e){return c.isProxyNode(e)&&p.realUpdateProxyNode(e),e},f.prototype.setter=function(e,t,r){var n=s.findProxyNode(e);return r=s.standardizeValue(r),n?(p.realUpdateProxyNode(n),n.setValue(t,r)):e[t]=r},f.prototype.prefix=function(e,t,r){var n=s.findProxyNode(e);if(n)return p.realUpdateProxyNode(n),n.prefix(t,r);e[t]+=r},f.prototype.postfix=function(e,t,r){var n=s.findProxyNode(e);if(n)return p.realUpdateProxyNode(n),n.postfix(t,r);var i=e[t];return e[t]+=r,i},f.prototype.remover=function(e,t){var r=s.findProxyNode(e);if(r)return p.realUpdateProxyNode(r),r.removeKey(t);delete e[t]},f);function f(){return null!==o&&o.apply(this,arguments)||this}t.RealAckCoreFunctions=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),s=r(9),c=r(13),u=r(37),l=r(136),p=r(25),h=void 0;function d(e,t){if(l.enableModify(e))return!0;var r=p.getClassReflection(e.target());if(r){var n=r.properties[t];if(n&&n.isTransient)return!0}return!1}var f,m=(i(y,f=u.CommonCoreFunctions),y.prototype.onContextUpdate=function(e,t){switch(e){case s.ContextState.Appear:case s.ContextState.Reappear:o=t.tools?(h=t.tools.idGenerator,t.proxyRuntime):h=void 0;break;case s.ContextState.Cleaned:o=h=void 0}},y.prototype.creator=function(e){var t,r=h.generate();if(e.constructor===Array)t=o.createArrayProxy(r,e);else if(e.constructor===Object)t=o.createFlatObjectProxy(r,e);else{var n=e.constructor[c.ClassReflectionName];if("object"!=typeof n||null===n)throw new Error("can't find __reflection");t=o.createAkkoObjectProxy(r,e,n)}return t},y.prototype.getter=function(e,t){var r=u.findProxyNode(e);if(r){var n=r.getValue(t);return r.touchKey(t),n}return e[t]},y.prototype.unwrapper=function(e){return a.isProxyNode(e)?(e.touchKey(),e.target()):e},y.prototype.setter=function(e,t,r){var n=u.findProxyNode(e);if(n&&d(n,t))return r=u.standardizeValue(r),n?n.setValue(t,r):e[t]=r;throw new Error("Magix is frozen, you can't modify anything")},y.prototype.prefix=function(e,t,r){var n=u.findProxyNode(e);if(n&&d(n,t)){var i=n.prefix(t,r);return n.touchKey(t),i}throw new Error("Magix is frozen, you can't modify anything")},y.prototype.postfix=function(e,t,r){var n=u.findProxyNode(e);if(n&&d(n,t)){var i=n.postfix(t,r);return n.touchKey(t),i}throw new Error("Magix is frozen, you can't modify anything")},y.prototype.remover=function(e,t){var r=u.findProxyNode(e);if(r&&d(r,t))return r.removeKey(t);throw new Error("Magix is frozen, you can't modify anything")},y);function y(){return null!==f&&f.apply(this,arguments)||this}t.OutsideCoreFunctions=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(288),i=r(3);function o(e,t){return!(e===t||Number.isNaN(e)&&Number.isNaN(t))}t.createBranchRuntime=function(e){return new a(e)};var a=(s.prototype.createFrameSection=function(e){return new c(this,this.updatedProxyNodes.createSubSet(),e)},s.prototype.syncTwoBranches=function(){for(var e in this.updatedProxyNodes.release((function(e){e.converge()})),this.noConvergentIllusionNodes){var t=this.noConvergentIllusionNodes[e];t!==this.noConvergentRealNodes[e]&&t.converge(),delete this.noConvergentIllusionNodes[e]}for(var e in this.noConvergentRealNodes)this.noConvergentRealNodes[e].converge(),delete this.noConvergentRealNodes[e]},s.prototype.isUpdatedProxyNode=function(e){return this.updatedProxyNodes.hasElement(e)},s.prototype.isNoConvergentIllusionProxyNode=function(e){return e in this.noConvergentIllusionNodes},s.prototype.isNoConvergentRealProxyNode=function(e){return e in this.noConvergentRealNodes},s.prototype.addNoConvergentIllusionProxyNode=function(e){this.logger.warn("found no convergent illusion object: "+e.identifier),this.noConvergentIllusionNodes[e.identifier]=e},s.prototype.addNoConvergentRealProxyNode=function(e){this.logger.warn("found no convergent real object: "+e.identifier),this.noConvergentRealNodes[e.identifier]=e},s);function s(e){this.logger=e,this.updatedProxyNodes=n.createUniteSet(),this.noConvergentRealNodes={},this.noConvergentIllusionNodes={}}t.BranchRuntimeImplement=a;var c=(u.prototype.takeCreatedProxyNodes=function(){try{return this.createdProxyNodes}finally{this.createdProxyNodes={}}},u.prototype.illusionUpdateProxyNode=function(e){this.branch.isNoConvergentIllusionProxyNode(e.identifier)||this.illuUpdatedProxyNodes.add(e)},u.prototype.realUpdateProxyNode=function(e){this.branch.isNoConvergentRealProxyNode(e.identifier)||this.branch.isUpdatedProxyNode(e)||(this.realUpdatedProxyNodes[e.identifier]=e)},u.prototype.addCreatedObject=function(e){e.identifier in this.createdProxyNodes||(this.createdProxyNodes[e.identifier]=e),this.illuUpdatedProxyNodes.add(e)},u.prototype.illusionTakeCreatedObject=function(e,t){return this.takeCreatedObject(e,t,this.legacyCreatedProxyNodes)},u.prototype.realTakeCreatedObject=function(e,t){var r=this.takeCreatedObject(e,t,this.createdProxyNodes);return r&&!this.branch.isUpdatedProxyNode(r)&&(this.realUpdatedProxyNodes[e]=r),r},u.prototype.takeCreatedObject=function(e,t,r){var n=r[e];return n&&(delete r[e],i.isArrayProxyNode(n)&&t.constructor!==Array?(n.dispose(),n=void 0):i.isFlatObjectProxyNode(n)&&t.constructor!==Object?(n.dispose(),n=void 0):i.isAkkoObjectProxyNode(n)&&t.constructor!==n.struct.classReflection.clazz&&(n.dispose(),n=void 0)),n},u.prototype.completeRebuild=function(){for(var e in this.legacyCreatedProxyNodes)this.legacyCreatedProxyNodes[e].dispose(),delete this.legacyCreatedProxyNodes[e]},u.prototype.completeACK=function(){var e=this;for(var t in this.realUpdatedProxyNodes){var r=this.realUpdatedProxyNodes[t];u.isShallowEquals(r)||this.branch.addNoConvergentRealProxyNode(r),delete this.realUpdatedProxyNodes[t]}for(var t in this.illuUpdatedProxyNodes.release((function(t){t.realTarget&&!u.isShallowEquals(t)&&e.branch.addNoConvergentIllusionProxyNode(t)})),this.createdProxyNodes)this.createdProxyNodes[t].dispose(),delete this.createdProxyNodes[t]},u.isShallowEquals=function(e){var t=e.realTarget,r=e.illuTarget;if(!t||!r)return!1;switch(e.kind){case i.ProxyKind.Array:var n=t,a=r;if(n.length!==a.length)return!1;for(var s=0;s<n.length;++s)if(o(n[s],a[s]))return!1;return!0;case i.ProxyKind.FlatObject:for(var c in t){if(!(c in r))return!1;if(o(r[c],t[c]))return!1}for(var c in r)if(!(c in t))return!1;return!0;case i.ProxyKind.AkkoObject:for(var u=0,l=e.struct.serializableValueProperties;u<l.length;u++){if((c=l[u])in t!=c in r)return!1;if(o(t[c],r[c]))return!1}return!0}},u);function u(e,t,r){void 0===r&&(r={}),this.createdProxyNodes={},this.branch=e,this.illuUpdatedProxyNodes=t,this.realUpdatedProxyNodes={},this.legacyCreatedProxyNodes=r}t.FrameSectionImplement=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUniteSet=function(){return new n};var n=(i.prototype.hasElement=function(e){var t=this.elementSet[e.identifier];return!!t&&t===e},i.prototype.createSubSet=function(){return new o(this)},i.prototype.release=function(e){for(var t in this.elementSet){var r=this.elementSet[t];e&&e(r),delete this.counterSet[t],delete this.elementSet[t]}},i.prototype.add=function(e){var t=e.identifier;return t in this.counterSet?++this.counterSet[t]:(this.elementSet[t]=e,this.counterSet[t]=1)},i.prototype.remove=function(e){var t=this.counterSet[e];return void 0===t?t=0:0==--t&&(delete this.counterSet[e],delete this.elementSet[e]),t},i);function i(){this.counterSet={},this.elementSet={}}t.UniteSetImplement=n;var o=(a.prototype.add=function(e){var t=e.identifier;t in this.elementSet||(this.elementSet[t]=e,this.uniteSet.add(e))},a.prototype.release=function(e){for(var t in this.elementSet){var r=this.elementSet[t],n=this.uniteSet.remove(t);e&&0===n&&e(r),delete this.elementSet[t]}},a);function a(e){this.uniteSet=e,this.elementSet={}}t.ChildSetImplement=o},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=r(4),a=r(290),s=r(137),c=r(79),u=r(56),l=r(80),p=r(294),h=r(3),d=(Object.defineProperty(f.prototype,"runtime",{get:function(){return this._runtime},enumerable:!0,configurable:!0}),f.prototype.bindRuntimeParams=function(e){if(this._runtime)throw new Error("did bind runtime params");this._runtime=new s.Runtime(n({},e,{proxyRuntime:this}))},f.prototype.getAkkoObjectStruct=function(e){var t=this.structMap[e.id];return t||(this.structMap[e.id]=new h.AkkoObjectStruct(e))},f.prototype.createFlatObjectProxy=function(e,t){return new c.FlatObjectProxyNodeImplement(this,e,t)},f.prototype.createAkkoObjectProxy=function(e,t,r){return new u.AkkoObjectProxyNodeImplement(this,e,t,this.getAkkoObjectStruct(r))},f.prototype.createArrayProxy=function(e,t){return new l.ArrayProxyNodeImplement(this,e,t)},f.prototype.pushValues=function(e,t,r){var n=[],i=new a.ProxyWrapper(this,e,r);try{for(var o=0;o<t.length;++o)n[o]=i.wrap(t[o]);return n}finally{i.complete()}},f.prototype.pullValue=function(e){return"object"!=typeof e||null===e?e:h.isProxyNode(e)?e.displayer:i.isBuffer(e)?e.readonly?e:e.slice():this.escapeObjectFilter(e)?e:void 0},f);function f(e){var t=void 0===e?{}:e,r=t.observerAdapter,n=t.escapeObjectFilter,i=t.jsxFactory,a=t.callbacksWhenUpdate,s=void 0===a||a;this.structMap={},this.observerAdapter=r,this.escapeObjectFilter=n||function(){return!1},this.jsxFactory=i,this.callbacksWhenUpdate=s,this.roomObserver=new p.RoomObserver(r),this.noEffectsIdGenerator=o.createIdentifierGenerator(o.NoEffectScopeId)}t.ProxyRuntime=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(3),o=r(78),a="__identifier";function s(e,t){Object.defineProperty(e,a,{enumerable:!1,configurable:!0,value:t})}var c=(u.prototype.complete=function(){for(var e=0,t=this.modifyObjects;e<t.length;e++)delete t[e][a]},u.prototype.wrap=function(e){if(this.banFunction&&"function"==typeof e)throw new Error("can't wrap function");if("object"!=typeof e)return e;if(null===e)return e;if(n.isBuffer(e))return e;if(i.isDisplayerNode(e))throw new Error("can't let displayer node pass Magix border");if(e.constructor===Array)return this.wrapArray(e);if(e.constructor===Object)return this.wrapObject(e);throw new Error("can't let object of "+e.constructor.name+" pass Magix border")},u.prototype.wrapArray=function(e){var t,r=e[a];if(void 0===r){s(e,r=this.identifierGenerator.generate());for(var n=(t=o.createProxyNode(this.proxyRuntime,r,[])).target(),i=0;i<e.length;++i)n[i]=this.wrap(e[i]);this.proxyNodes[r]=t,this.modifyObjects.push(e)}else t=this.proxyNodes[r];return t},u.prototype.wrapObject=function(e){var t,r=e[a];if(void 0===r){s(e,r=this.identifierGenerator.generate());for(var n=(t=o.createProxyNode(this.proxyRuntime,r,{})).target(),i=0,c=Object.keys(e).sort();i<c.length;i++){var u=c[i];n[u]=this.wrap(e[u])}this.proxyNodes[r]=t,this.modifyObjects.push(e)}else t=this.proxyNodes[r];return t},u);function u(e,t,r){this.proxyRuntime=e,this.identifierGenerator=t,this.banFunction=r,this.proxyNodes={},this.modifyObjects=[]}t.ProxyWrapper=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(292),i=(o.prototype.addProperty=function(e,t,r){},o.prototype.removeProperty=function(e,t){},o.prototype.setProperty=function(e,t,r){},o.prototype.unbindDelegate=function(e){},o.prototype.callbackDelegates=function(){return{didUpdated:!1}},new o);function o(){}t.currentUpdatedSection=function(){return i},t.runWithUpdatedSection=function(e,t){if(!e)return t(),{didUpdated:!1};var r=i,o=new n.UpdatedSectionImplement;try{return i=o,t(),o.callbackDelegates(),{didUpdated:o.didUpdated}}finally{i=r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(138),i=(Object.defineProperty(o.prototype,"didUpdated",{get:function(){return this._didUpdated},enumerable:!0,configurable:!0}),o.prototype.callbackDelegates=function(){for(var e in this.delegates)if(e in this.unbindsDelegated)delete this.delegates[e];else{var t=this.delegates[e],r=this.updatedObjects[e];t.updateDisplayer(r)}for(var e in this.delegates)t=this.delegates[e],r=this.updatedObjects[e],t.reportChanged(r)},o.prototype.unbindDelegate=function(e){this.disable||(this.unbindsDelegated[e.identifier]=!0)},o.prototype.addProperty=function(e,t,r){if(!this.disable&&(this._didUpdated=!0,!e.didDispose)){var i=this.getBufferObject(e),o=i[t];if(o)switch(o.value=r,o.kind){case n.UpdateEventKind.Removed:o.kind=n.UpdateEventKind.Updated;break;case n.UpdateEventKind.Inserted:o.kind=n.UpdateEventKind.Inserted;break;case n.UpdateEventKind.Updated:o.kind=n.UpdateEventKind.Updated}else i[t]={kind:n.UpdateEventKind.Inserted,value:r,isIndex:"number"==typeof t}}},o.prototype.setProperty=function(e,t,r){if(!this.disable&&(this._didUpdated=!0,!e.didDispose)){var i=this.getBufferObject(e),o=i[t];if(o)switch(o.value=r,o.kind){case n.UpdateEventKind.Removed:o.kind=n.UpdateEventKind.Updated;break;case n.UpdateEventKind.Inserted:o.kind=n.UpdateEventKind.Inserted;break;case n.UpdateEventKind.Updated:o.kind=n.UpdateEventKind.Updated}else i[t]={kind:n.UpdateEventKind.Updated,value:r,isIndex:"number"==typeof t}}},o.prototype.removeProperty=function(e,t){if(!this.disable&&(this._didUpdated=!0,!e.didDispose)){var r=this.getBufferObject(e),i=r[t];if(i)switch(i.kind){case n.UpdateEventKind.Removed:break;case n.UpdateEventKind.Inserted:delete r[t];break;case n.UpdateEventKind.Updated:i.kind=n.UpdateEventKind.Removed,i.value=void 0}else r[t]={kind:n.UpdateEventKind.Removed,value:void 0,isIndex:"number"==typeof t}}},o.prototype.getBufferObject=function(e){var t=e.identifier,r=this.updatedObjects[t];return r||(this.delegates[t]=e,this.updatedObjects[t]=r={}),r},o);function o(){this.disable=!1,this.delegates={},this.unbindsDelegated={},this.updatedObjects={},this._didUpdated=!1}t.UpdatedSectionImplement=i},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(21),s=(i(c,o=a.DisplayerNodeImplement),c.refreshLength=function(e,t){for(var r=t;r in e;)a.removeDisplayerKey(e,r),r++;if(r===t)for(r=t-1;0<=r&&!(r in e);)a.addDisplayerKey(e,r),r--},c.unwrapToPureArray=function(e){if(e instanceof c){for(var t=e.__proxy.displayerTarget().length,r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}return e},c.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=c.unwrapToPureArray(this),n=0;n<e.length;++n)e[n]=c.unwrapToPureArray(e[n]);return Array.prototype.concat(r,e)},c.prototype.every=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.every.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},c.prototype.filter=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.filter.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},c.prototype.find=function(e,t){var r=this,n=this.__proxy.proxyRuntime,i=Array.prototype.find.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}));return n.pullValue(i)},c.prototype.findIndex=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.findIndex.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},c.prototype.forEach=function(e,t){var r=this,n=this.__proxy.proxyRuntime;Array.prototype.forEach.call(this.__proxy.displayerTarget(),(function(i,o){e.call(t,n.pullValue(i),o,r)}))},c.prototype.indexOf=function(e,t){return a.isDisplayerNode(e)&&(e=e.__proxy),Array.prototype.indexOf.call(this.__proxy.displayerTarget(),e,t)},c.prototype.lastIndexOf=function(e,t){return a.isDisplayerNode(e)&&(e=e.__proxy),Array.prototype.lastIndexOf.call(this.__proxy.displayerTarget(),e,t)},c.prototype.join=function(e){return Array.prototype.join.call(this.__proxy.displayerTarget(),e)},c.prototype.map=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.map.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},c.prototype.reduce=function(e,t){var r=this,n=this.__proxy.proxyRuntime,i=t;return Array.prototype.reduce.call(this.__proxy.displayerTarget(),(function(t,o,a){return i!==t&&(t=n.pullValue(t)),i=e(t,n.pullValue(o),a,r)}),t)},c.prototype.reduceRight=function(e,t){var r=this,n=this.__proxy.proxyRuntime,i=t;return Array.prototype.reduceRight.call(this.__proxy.displayerTarget(),(function(t,o,a){return i!==t&&(t=n.pullValue(t)),i=e(t,n.pullValue(o),a,r)}),t)},c.prototype.slice=function(e,t){for(var r=this.__proxy.proxyRuntime,n=Array.prototype.slice.call(this.__proxy.displayerTarget(),e,t),i=0;i<n.length;++i)n[i]=r.pullValue(n[i]);return n},c.prototype.some=function(e,t){var r=this,n=this.__proxy.proxyRuntime;return Array.prototype.some.call(this.__proxy.displayerTarget(),(function(i,o){return e.call(t,n.pullValue(i),o,r)}))},c.prototype.toString=function(){return Array.prototype.toString.apply(this.__proxy.displayerTarget())},c.prototype.copyWithin=function(){c.throwImmutableError()},c.prototype.fill=function(){c.throwImmutableError()},c.prototype.pop=function(){c.throwImmutableError()},c.prototype.push=function(){c.throwImmutableError()},c.prototype.reverse=function(){c.throwImmutableError()},c.prototype.shift=function(){c.throwImmutableError()},c.prototype.splice=function(){c.throwImmutableError()},c.prototype.unshift=function(){c.throwImmutableError()},c.prototype.sort=function(){c.throwImmutableError()},c.prototype.entries=function(){c.throwBanMethodError()},c.prototype.keys=function(){c.throwBanMethodError()},c.prototype.values=function(){c.throwBanMethodError()},c.throwImmutableError=function(){throw new Error("it is immutable")},c.throwBanMethodError=function(){throw new Error("ban method")},c);function c(e){for(var t=o.call(this,e)||this,r=e.displayerTarget(),n=0;n<r.length;++n)a.addDisplayerKey(t,n);return t}t.ArrayDisplayerNode=s,Object.defineProperty(s.prototype,"length",{enumerable:!1,configurable:!0,get:function(){var e=this.__proxy,t=e.proxyRuntime.pullValue(e.displayerTarget().length);return e.touchKey("length"),t}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18),i=(o.prototype.reportSelfUserIdChanged=function(e){this.observer&&this.observer.reportChanged(o.selfUserId,e,n.UpdateEventKind.Updated)},o.prototype.reportUsersChanged=function(e){this.observer&&this.observer.reportChanged(o.users,e,n.UpdateEventKind.Updated)},o.prototype.reportObservedSelfUserId=function(){this.observer&&this.observer.reportObservedKey(o.selfUserId)},o.prototype.reportObservedUsers=function(){this.observer&&this.observer.reportObservedKey(o.users)},o.selfUserId="userId",o.users="users",o);function o(e){e&&(this.observer=e.create("room observer"))}t.RoomObserver=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=r(26),o=void 0;n.contextStack.addListener((function(e,t){switch(e){case n.ContextState.Appear:case n.ContextState.Reappear:o=t.proxyRuntime.jsxFactory;break;case n.ContextState.Cleaned:o=void 0}})),t.createElement=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!o)throw i.isInMagix()?new Error("can't create JSX. you didn't set jsxFactory"):new Error("can't create JSX. maybe you called it out of Magix");return o.apply(void 0,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(2),a=r(21),s=r(79),c=r(56),u=r(80),l=r(31),p=r(26);(i=n=t.CopierMode||(t.CopierMode={}))[i.ExportsPropertyMode=0]="ExportsPropertyMode",i[i.SerializablePropertyMode=1]="SerializablePropertyMode",t.copyDisplayerNode=function(e,t,r){if(void 0===t&&(t=n.ExportsPropertyMode),p.isInMagix())throw new Error("can't call akko.copy(...) inside Magix");return new h(t,r).copyValue(e)};var h=(d.prototype.copyValue=function(e){return a.isDisplayerNode(e)?this.copyProxyNode(e.__proxy):l.isProxyNode(e)?this.copyProxyNode(e):e},d.prototype.copyProxyNode=function(e){var t=e.identifier,r=this.copedObjectMap[t];if(!r){var n=e.displayerTarget();if(s.isFlatObjectProxyNode(e)){var i={};for(var o in this.copedObjectMap[t]=r=i,n)i[o]=this.copyInsideValue(e.proxyRuntime,n[o])}else if(c.isAkkoObjectProxyNode(e)){var a=e.struct;i=this.createAkkoObject(a.classReflection.clazz),this.copedObjectMap[t]=r=i;for(var l=0,p=this.getPropertiesToCopy(e);l<p.length;l++)i[o=p[l]]=this.copyInsideValue(e.proxyRuntime,a.getValueFromProxyNode(e,o))}else if(u.isArrayProxyNode(e)){var h=n.length,d=[];this.copedObjectMap[t]=r=d;for(var f=0;f<h;++f)d[f]=this.copyInsideValue(e.proxyRuntime,n[f])}}return r},d.prototype.getPropertiesToCopy=function(e){switch(this.mode){case n.ExportsPropertyMode:return e.struct.copyableProperties;case n.SerializablePropertyMode:return e.struct.serializableValueProperties}},d.prototype.createAkkoObject=function(e){return this.creator?this.creator(e):{}},d.prototype.copyInsideValue=function(e,t){return"object"!=typeof t||null===t?t:l.isProxyNode(t)?this.copyProxyNode(t):o.isBuffer(t)?t.readonly?t:t.slice():e.escapeObjectFilter(t)?t:void 0},d);function d(e,t){this.mode=e,this.creator=t,this.copedObjectMap={}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),a=r(18),s=r(17),c=r(27),u=r(76),l=r(21),p=(h.prototype.dispose=function(){this.didDispose||(this._akkoProxyNode.removeListener(this.onAkkoProxyNodeUpdated),this.didDispose=!0)},Object.defineProperty(h.prototype,"akkoProxyNode",{get:function(){return this._akkoProxyNode},set:function(e){var t=this;this._akkoProxyNode!==e&&(this._akkoProxyNode.removeListener(this.onAkkoProxyNodeUpdated),this.observerAdapter?this.observerAdapter.observeUpdate((function(){t.compareAndReportUpdated(t._akkoProxyNode,e),t._akkoProxyNode=e})):(this.compareAndReportUpdated(this._akkoProxyNode,e),this._akkoProxyNode=e))},enumerable:!0,configurable:!0}),h.prototype.compareAndReportUpdated=function(e,t){if(this.observer){for(var r=e.displayerTarget(),n=t.displayerTarget(),i=0,o=this.valueProperties;i<o.length;i++){var s=o[i],u=s in r,l=s in n;u&&!l?this.observer.reportChanged(s,void 0,a.UpdateEventKind.Removed):!u&&l?this.observer.reportChanged(s,n[s],a.UpdateEventKind.Inserted):r[s]!==n[s]&&this.observer.reportChanged(s,n[s],a.UpdateEventKind.Updated)}this.observer.reportChanged(c.ProxyKey,t,a.UpdateEventKind.Updated)}},h.prototype.createDisplayer=function(e){var t,r=this,n=e.struct.classReflection,o=(t=l.DisplayerNodeImplement,i(a,t),a);function a(){return null!==t&&t.apply(this,arguments)||this}function s(e){Object.defineProperty(o.prototype,e,{enumerable:!1,configurable:!1,get:function(){return r.getProperty(e)}})}for(var c in n.properties)s(c);function u(e){o.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.invokeMethod(e,t)}}for(var p in n.methods)u(p);return new o(e)},h.prototype.getProperty=function(e){var t=this,r=void 0,n=this.akkoProxyNode.proxyRuntime;switch(this.struct.getPropertyReadableKind(e)){case u.PropertyReadableKind.ReadValue:r=n.pullValue(this.akkoProxyNode.displayerTarget()[e]),this.touchKey(e);break;case u.PropertyReadableKind.ReadByGetter:var i=n.runtime,a=n.noEffectsIdGenerator,l={authorId:null===i.observerId?o.AdminObserverId:i.observerId,mode:s.CoreFunctionsMode.Outside,timestamp:Date.now(),identifierGenerator:a};r=i.runWithMagix(l,(function(){return t.akkoProxyNode.target()[e]})),this.touchKey(c.ProxyKey),r=n.pullValue(r);break;case u.PropertyReadableKind.CanNotReadGetter:throw new Error("can't read property "+JSON.stringify(e)+" unless it has @noEffects");case u.PropertyReadableKind.CanNotReadPrivateValue:case u.PropertyReadableKind.CanNotReadPrivateGetter:throw new Error("can't read private property "+JSON.stringify(e))}return r},h.prototype.invokeMethod=function(e,t){var r=this.akkoProxyNode.callOutside(e,t);return this.touchKey(c.ProxyKey),r},h.prototype.touchKey=function(e){var t=this.observerAdapter;t&&(this.observer||(this.observer=t.create("AkkoDisplayerHolder")),this.observer.reportObservedKey(e))},h);function h(e,t){var r=this;this.didDispose=!1,this.onAkkoProxyNodeUpdated=function(e){if(r.observer)for(var t in e){var n=e[t],i=n.kind,o=n.value;r.observer.reportChanged(t,o,i)}},this.struct=e.struct,this.observerAdapter=t,this._akkoProxyNode=e,this.displayer=this.createDisplayer(e),this._akkoProxyNode.addListener(this.onAkkoProxyNodeUpdated),this.valueProperties=Object.freeze(this.struct.transientValueProperties.concat(this.struct.serializableValueProperties))}t.AkkoDisplayerHolder=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.serializeAllocatedUser=function(e){var t=new n.Writer;t.writeUint32(e.userId),t.writeUint32(e.initializeSlices.length);for(var r=0,i=e.initializeSlices;r<i.length;r++){var o=i[r];t.writeInt53(o.beginScopeId),t.writeUint32(o.count)}return t.toBuffer()},t.deserializeAllocatedUser=function(e){for(var t=new n.Reader(e),r=t.readUint32(),i=[],o=t.readUint32(),a=0;a<o;++a){var s=t.readInt53(),c=t.readUint32();i.push(Object.freeze({beginScopeId:s,count:c}))}return Object.freeze({userId:r,initializeSlices:Object.freeze(i)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=r(4),o=r(12),a=r(141),s=r(142),c=(u.prototype.serialize=function(e){var t=new i.Writer,r=i.createIdentifierGenerator(i.NoEffectScopeId),n=new a.ObjectLikeBinder(r);t.writeUint8(e.kind);try{switch(e.kind){case s.AccessUpdaterKind.Writable:var o=e,c=o.userPayload,u=o.connectedPayload;n.bind(c),n.bind(u),this.serialization.serialize({writer:t,values:[c,u],objectFormats:this.twoAnyObjectFormats,includesHash:!1});break;case s.AccessUpdaterKind.Readonly:var l=e.payload;n.bind(l),this.serialization.serialize({writer:t,values:[l],objectFormats:this.oneAnyObjectFormats,includesHash:!1})}return t.toBuffer()}finally{n.complete()}},u.prototype.deserialize=function(e){try{o.ParamsObjectAdapter.startCollection();var t=new i.Reader(e),r=t.readUint8();switch(r){case s.AccessUpdaterKind.Writable:var n=this.serialization.deserialize({reader:t,objectFormats:this.twoAnyObjectFormats,ignoreHashChecking:!0,version:u.akkoSerVersion});return{kind:r,userPayload:n[0],connectedPayload:n[1]};case s.AccessUpdaterKind.Readonly:return{kind:r,payload:this.serialization.deserialize({reader:t,objectFormats:this.oneAnyObjectFormats,ignoreHashChecking:!0,version:u.akkoSerVersion})[0]};default:throw new Error("invalid kind "+r)}}finally{o.ParamsObjectAdapter.completeCollection()}},u.akkoSerVersion=i.convertToAkkoSerVersion(n.AkkoVersion),u);function u(e){var t=e.format.anyObjectFormat;this.serialization=new i.Serialization({format:e.format,objectAdapter:new o.ParamsObjectAdapter}),this.oneAnyObjectFormats=Object.freeze([t]),this.twoAnyObjectFormats=Object.freeze([t,t])}t.AccessUpdaterSerialization=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.serializeSessionBuild=function(e){var t=new n.Writer;return t.writeString(e.session),t.writeString(e.sessionToken),t.writeString(e.slice),t.toBuffer()},t.deserializeSessionBuild=function(e){var t=new n.Reader(e),r=t.readString(),i=t.readString(),o=t.readString();return Object.freeze({session:r,sessionToken:i,slice:o})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.serializeOnlineState=function(e){var t=new n.Writer;return t.writeUint32(e.userId),t.writeUint8(e.isOnline?255:0),t.toBuffer()},t.deserializeOnlineState=function(e){var t=new n.Reader(e),r=t.readUint32(),i=!!t.readUint8();return Object.freeze({userId:r,isOnline:i})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.allocScopeId=function(){if(this.usingSlice){var e=this.nextScopeId;return e===this.usingSlice.beginScopeId+this.usingSlice.count-1?(this.usingSlice=this.storageSlices.shift(),this.usingSlice&&(this.nextScopeId=this.usingSlice.beginScopeId)):this.nextScopeId++,e}},i.prototype.appendScopeSlice=function(e){this.usingSlice?this.storageSlices.push(e):(this.usingSlice=e,this.nextScopeId=e.beginScopeId)},i);function i(e){if(this.storageSlices=[],this.usingSlice=void 0,this.nextScopeId=0,e)for(var t=0,r=e;t<r.length;t++){var n=r[t];this.appendScopeSlice(n)}}t.ScopeStorage=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.deserializeScopeSlices=function(e){for(var t=new n.Reader(e),r=[],i=t.readUint32(),o=0;o<i;++o){var a=t.readInt53(),s=t.readUint32();r.push(Object.freeze({beginScopeId:a,count:s}))}return Object.freeze(r)},t.serializeScopeSlices=function(e){var t=new n.Writer;t.writeUint32(e.length);for(var r=0,i=e;r<i.length;r++){var o=i[r];t.writeInt53(o.beginScopeId),t.writeUint32(o.count)}return t.toBuffer()}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(305),a=r(144),s=r(83),c=r(84),u=r(143),l=r(3),p=r(85),h=r(323),d=r(39),f=(Object.defineProperty(m.prototype,"modifiable",{get:function(){return this._modifiable},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"timeDelay",{get:function(){return this._timeDelay},set:function(e){this._timeDelay=e,this.magixSession&&this.magixSession.updateTimeDelay(e)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"session",{get:function(){return this.socketSession.session},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"slice",{get:function(){return this.socketSession.slice},enumerable:!0,configurable:!0}),m.prototype.changePhase=function(e){this._phase!==e&&(this._phase=e,this.callbacks.onPhaseChanged&&this.callbacks.onPhaseChanged(e))},Object.defineProperty(m.prototype,"selfUserId",{get:function(){return this.authorState.selfUserId},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"isWritable",{get:function(){return void 0!==this.authorState.selfUserId},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"imagePhase",{get:function(){if(!this.magixSession)throw new Error("image phase not exist when Magix's phase is "+this.phase);return this.magixSession.imagePhase},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"trigger",{get:function(){if(!this.displayerHolder)throw new Error("trigger object not exist when Magix's phase is "+this.phase);return this.displayerHolder.displayer},enumerable:!0,configurable:!0}),m.prototype.setWritable=function(e,t){return this._phase===u.MagixPhase.Connected||this._phase===u.MagixPhase.Reconnecting?(this.switchWritable=e,this.settingWritablePayload=e?t:void 0,this.authorState.setWritable(e,t)):Promise.reject(new Error("can't only set writable when connected or reconnecting"))},m.prototype.connect=function(e){return n(this,void 0,void 0,(function(){var t,r,n,o,a,s,c,l,h,f,m,y;return i(this,(function(i){switch(i.label){case 0:if(this.phase!==u.MagixPhase.Ready)throw new Error("can't connect when Magix's phase is "+this.phase);return this.changePhase(u.MagixPhase.Connecting),[4,this.serverOriginsFetcher(e.roomToken)];case 1:t=i.sent(),i.label=2;case 2:return i.trys.push([2,6,,7]),r=new d.AccessUpdaterSerialization(this.imageFactory.library),n=this.imageFactory.library,o=n.appIdentifier,a=n.appVersion,s=n.appHash,[4,p.connectWebSocketSession({logger:this.logger,uuid:e.uuid,roomToken:e.roomToken,socketURL:t.socket,access:"writable",netState:this.netState,reconnectionOptions:this.reconnectionOptions,accessUpdaterSerialization:r,appDescription:{appIdentifier:o,appVersion:a,appHash:s},callbacks:{onReceivedActionFrame:this.onReceivedActionFrame,onReceivedScopeSlices:this.onReceivedScopeSlices,onBeginReconnect:this.onBeginReconnect,onReconnected:this.onReconnected,onSliceUpdate:this.callbacks.onSliceChanged,onSessionUpdate:this.callbacks.onSessionChanged,onDisconnectedByServer:this.onDisconnectWithError,onDisconnectedWithSocketError:this.onDisconnectWithError,onKickWithReason:this.onKickedWithReason}})];case 3:return c=i.sent(),l=c.session,h=c.connection,f=c.snapshot,m=c.actionFrames,this.socketSession=l,this.settingWritablePayload=e.connectedPayload,this.buildMagixSession(h,f,m),e.isWritable?[4,this.authorState.setWritable(!0,e.connectedPayload)]:[3,5];case 4:i.sent(),this.switchWritable=!0,i.label=5;case 5:return this.changePhase(u.MagixPhase.Connected),[3,7];case 6:throw y=i.sent(),this.changePhase(u.MagixPhase.Disconnected),y;case 7:return[2]}}))}))},m.prototype.reconnectWithError=function(e){if(this._phase!==u.MagixPhase.Reconnecting){if(this._phase!==u.MagixPhase.Connected)throw new Error("can't reconnect when magix's phase is "+this._phase);this.socketSession.reconnectWithError(e)}},m.prototype.buildMagixSession=function(e,t,r){var n=this;this.magixSession&&this.magixSession.destroy(),this.magixSession=new o.MagixSession({logger:this.logger,connection:e,snapshot:t,initializeActionFrames:r,imageFactory:this.imageFactory,enableAnimationFrame:this.enableAnimationFrame,timeDelay:this._timeDelay,callbacks:{onImagePhaseChanged:function(e){return n.callbacks.onImagePhaseChanged&&n.callbacks.onImagePhaseChanged(e)},onGeneratedActionFrame:this.onGeneratedActionFrame,onModified:this.onModified,onEventFire:this.onEventFire,onReceivedRttReport:this.callbacks.onReceivedRttReport,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame||function(e,t){return n.logger.error(t)}}}),this.magixSession.setModifiable(this._modifiable),this.authorState.setConnectedMagixSession(this.magixSession),this.displayerHolder?this.displayerHolder.akkoProxyNode=this.magixSession.triggerProxyNode:this.displayerHolder=new l.AkkoDisplayerHolder(this.magixSession.triggerProxyNode,this.observerAdapter)},m.prototype.disconnect=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.phase!==u.MagixPhase.Reconnecting?[3,1]:(this.socketSession.dispose(),this.changePhase(u.MagixPhase.Disconnected),[3,7]);case 1:if(this.phase!==u.MagixPhase.Connected)return[3,6];this.changePhase(u.MagixPhase.Disconnecting),e.label=2;case 2:return e.trys.push([2,,4,5]),[4,this.socketSession.connection.disconnect()];case 3:return e.sent(),[3,5];case 4:return this.changePhase(u.MagixPhase.Disconnected),[7];case 5:return[3,7];case 6:throw new Error("can't disconnect when Magix's phase is "+this.phase);case 7:return[2]}}))}))},m.prototype.dispatch=function(e,t){if(this.phase!==u.MagixPhase.Connected)throw new Error("can't dispatch event when Magix's phase is "+this.phase);this.magixSession.dispatch(e,t)},m);function m(e){var t=this;this._phase=u.MagixPhase.Ready,this._modifiable=!0,this._timeDelay=0,this.switchWritable=!1,this.switchWritableTaskId=0,this.displayerHolder=void 0,this.onBeginReconnect=function(){t.switchWritableTaskId++,t.changePhase(u.MagixPhase.Reconnecting),t.authorState.setConnectedMagixSession(null)},this.onReceivedActionFrame=function(e){try{t.magixSession.receivedActionFrame(e)}catch(e){t.logger.error("found error when receive action frame: "+e.message),t.socketSession.reconnectWithError(e)}},this.onReceivedScopeSlices=function(e){try{t.magixSession.receivedScopeSlices(e)}catch(e){t.logger.error("found error when receive scope slices: "+e.message),t.socketSession.reconnectWithError(e)}},this.onReconnected=function(e){var r=e.connection,o=e.snapshot,a=e.actionFrames;return n(t,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return this.buildMagixSession(r,o,a),e=this.switchWritableTaskId,this.switchWritable?[4,this.authorState.setWritable(!0,this.settingWritablePayload)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e===this.switchWritableTaskId&&(this.changePhase(u.MagixPhase.Connected),this.onModified()),[2]}}))}))},this.onGeneratedActionFrame=function(e){try{t.socketSession.connection.sendActionFrame(e)}catch(e){t.callbacks.onReceivedWarning&&t.callbacks.onReceivedWarning(e.message)}},this.onSelfUserIdUpdate=function(e){t.callbacks.onSelfUserIdUpdate&&t._phase!==u.MagixPhase.Ready&&t._phase!==u.MagixPhase.Connecting&&t.callbacks.onSelfUserIdUpdate(e)},this.onModified=function(){t.callbacks.onModified&&t._phase!==u.MagixPhase.Ready&&t._phase!==u.MagixPhase.Connecting&&(t.animationFrameTicker?t.animationFrameTicker.invoke():t.callbacks.onModified())},this.onEventFire=function(e){t.callbacks.onEventFire&&t.callbacks.onEventFire(c.getEventWithDescription(e,c.EventPhase.Dispatched))},this.onDisconnectWithError=function(e){t.magixSession.destroy(),t.phase!==u.MagixPhase.Disconnected&&(t.socketSession.dispose(),t.changePhase(u.MagixPhase.Disconnected),t.callbacks.onDisconnectWithError&&t.callbacks.onDisconnectWithError(e))},this.onKickedWithReason=function(e){t.magixSession.destroy(),t.phase!==u.MagixPhase.Disconnected&&(t.socketSession.dispose(),t.changePhase(u.MagixPhase.Disconnected),t.callbacks.onKickedWithReason&&t.callbacks.onKickedWithReason(e))},this.logger=e.logger,this.imageFactory=e.imageFactory,this.serverOriginsFetcher=e.serverOriginsFetcher,this.enableAnimationFrame=e.enableAnimationFrame,this.reconnectionOptions=e.reconnectionOptions,this.observerAdapter=e.observerAdapter,this.netState=e.netState,this.callbacks=s.wrapCallbacks(e.callbacks),this.callbacks.onModified&&e.enableAnimationFrame&&(this.animationFrameTicker=new a.AnimationFrameTicker(this.callbacks.onModified)),this.authorState=new h.MagixAuthorState(e.userPayload,this.onSelfUserIdUpdate,this.onModified)}t.MagixImplement=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=r(57),o=r(311),a=(Object.defineProperty(s.prototype,"imagePhase",{get:function(){return this.image.phase},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"triggerProxyNode",{get:function(){return this.image.triggerProxyNode},enumerable:!0,configurable:!0}),s.prototype.receivedScopeSlices=function(e){this.image.appendScopeSlices(e)},s.prototype.dispatch=function(e,t){this.image.dispatch(e,t)},s.prototype.updateTimeDelay=function(e){this.playerBuffer.frameDelay=e},s.prototype.setModifiable=function(e){this.image.modifiable=e},s.prototype.setAllocatedUser=function(e){return this.image.setAllocatedUser(e)},s.prototype.removeAllocatedUser=function(){return this.image.removeAllocatedUser()},s.prototype.destroy=function(){this.image.destroy()},s.prototype.createEventFireCallback=function(e){var t=this;return function(r){t.paddingEvents?t.paddingEvents.push(r):e(r)}},s.prototype.handleAndReleasePaddingEvents=function(e){var t=this;e||(this.paddingEvents=void 0),Promise.resolve().then((function(){if(t.paddingEvents){for(var r=0,n=t.paddingEvents;r<n.length;r++){var i=n[r];try{e(i)}catch(r){t.logger.error(r)}}t.paddingEvents=void 0}}))},s);function s(e){var t=this;this.paddingEvents=[],this.receivedActionFrame=function(e){var r=new n.FramePicker(e);t.frameIdAsserter.assertReceivedFrameId(r.frameId),t.playerBuffer.pushFrames([r])},this.onPlayActionFrames=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(o.frameBuffer)}t.image.appendActionFrames(r)},this.connection=e.connection,this.logger=e.logger,this.image=e.imageFactory.createWithSnapshot({logger:e.logger,snapshotFrame:e.snapshot,actionFrames:e.initializeActionFrames.slice(),includesFrameHash:!1,ignoreHashChecking:!0,roomUUID:e.connection.uuid,callbacksWhenUpdate:!0,callbacks:{onPhaseChanged:e.callbacks.onImagePhaseChanged,onGeneratedActionFrame:e.callbacks.onGeneratedActionFrame,onCatchErrorWhenAppendFrame:e.callbacks.onCatchErrorWhenAppendFrame,onReceivedRttReport:e.callbacks.onReceivedRttReport,onModified:e.callbacks.onModified,onEventFire:e.callbacks.onEventFire&&this.createEventFireCallback(e.callbacks.onEventFire)}}),this.frameIdAsserter=new o.FrameIdAsserter,this.playerBuffer=i.playerBufferFactory.create({logger:e.logger,mode:i.PlayerBufferMode.Realtime,frameDelay:e.timeDelay,enableAnimationFrame:e.enableAnimationFrame,initFrameTimestamp:this.image.timestamp,callbacks:{onPlayActionFrames:this.onPlayActionFrames}}),this.handleAndReleasePaddingEvents(e.callbacks.onEventFire),this.playerBuffer.play()}t.MagixSession=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(307),i=r(309),o=r(58),a=(s.prototype.create=function(e){switch(e.mode){case o.PlayerBufferMode.Realtime:return new n.RealtimePlayerBuffer(e);case o.PlayerBufferMode.Reconstruction:return new i.ReconstructionPlayerBuffer(e)}},s);function s(){}t.PlayerBufferFactory=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(58),s=[{duration:1200,rate:1},{duration:1e3,rate:.75},{duration:3e3,rate:.5},{duration:5e3,rate:.25}],c=function(){for(var e=0,t=0,r=s;t<r.length;t++)e+=r[t].duration;return e}(),u=(i(l,o=a.AbstractPlayerBuffer),Object.defineProperty(l.prototype,"willTickEveryFrames",{get:function(){return!1},enumerable:!0,configurable:!0}),l.prototype.onPlayingContinue=function(){},l.prototype.onPlayingStop=function(){},l.prototype.onTick=function(){for(var e=[],t=Date.now(),r=t+this.frameInterval;this.currentBufferInterval>c;)e.push(this.takeNextFrame());for(;0<this.framesBufferLength;){var n=this.nextFrame,i=this.playTimestampReferPrevious(n)/2+(n.timestamp+this.meanDelayTimeOffset)/2;if(this.reportFrame(t,n),!(i<=r))break;e.push(this.takeNextFrame())}0<e.length&&this.playFrames(e),this.callbacks.onBufferRemainLow&&!this.didCompletePushFrames&&this.currentBufferRemainTimeInterval<this.remainLowTimeInterval&&this.callbacks.onBufferRemainLow()},l.prototype.reportFrame=function(e,t){var r=e-t.timestamp;this.meanDelayTimeOffset=r/2+this.meanDelayTimeOffset/2},l.prototype.playTimestampReferPrevious=function(e){var t=function(e){for(var t=0,r=s;t<r.length;t++){var n=r[t];if(e<=n.duration)return n.rate;e-=n.duration}throw new Error("durationTime is too large:"+e)}(this.currentBufferInterval)*(e.timestamp-this.latestPlayFrameTimestamp);return this.latestPlayDeviceTimestamp+t},Object.defineProperty(l.prototype,"currentBufferRemainTimeInterval",{get:function(){if(0<this.framesBufferLength){var e=this.newestPushFrame.timestamp-this.latestPlayFrameTimestamp,t=Date.now()-this.latestPlayDeviceTimestamp;return Math.max(0,e-t)}return 0},enumerable:!0,configurable:!0}),l.prototype.playFrames=function(e){try{this.callbacks.onPlayActionFrames&&this.callbacks.onPlayActionFrames(e)}catch(e){this.logger.error(e)}finally{var t=e[e.length-1];this.latestPlayFrameTimestamp=t.timestamp,this.latestPlayDeviceTimestamp=Date.now()}},l);function l(e){var t=o.call(this,e)||this;return t.meanDelayTimeOffset=0,t.latestPlayFrameTimestamp=e.initFrameTimestamp,t.latestPlayDeviceTimestamp=0,t}t.RealtimePlayerBuffer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"frameDelay",{get:function(){return this._frameDelay},set:function(e){this._frameDelay!==e&&(this.changeFrameDelay(this._frameDelay,e),this._frameDelay=e)},enumerable:!0,configurable:!0}),i.prototype.pushFrames=function(e){var t=Date.now(),r={frames:e,beginAt:t,fireAt:t+this._frameDelay};this.nodes.unshift(r),null===this.timer&&(this.timer=setTimeout(this.onFire,this._frameDelay))},i.prototype.release=function(){null!==this.timer&&this.stopTimer();for(var e=this.nodes.splice(0),t=e.length-1;0<=t;t--)this.onDelayedFrames(e[t].frames)},i.prototype.changeFrameDelay=function(e,t){null!==this.timer&&this.stopTimer();for(var r=!1,n=Date.now(),i=t-e,o=this.nodes.length-1;0<=o;o--){var a=this.nodes[o];a.fireAt+=i,r||(a.fireAt<=n?(this.onDelayedFrames(a.frames),this.nodes.pop()):r=!0)}0<this.nodes.length&&this.startNextTimer(n)},i.prototype.startNextTimer=function(e){var t=this.nodes[this.nodes.length-1].fireAt,r=Math.max(0,t-e);this.timer=setTimeout(this.onFire,r)},i.prototype.stopTimer=function(){clearTimeout(this.timer),this.timer=null},i);function i(e,t){var r=this;this.nodes=[],this.timer=null,this.onFire=function(){var e=r.nodes.pop(),t=Date.now();r.onDelayedFrames(e.frames),0<r.nodes.length?r.startNextTimer(t):r.stopTimer()},this._frameDelay=e,this.onDelayedFrames=t}t.FramesDelayer=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(58),s=(i(c,o=a.AbstractPlayerBuffer),c.prototype.play=function(){o.prototype.play.call(this);var e=this.callbacks.onBufferRemainLow;e&&this.isBufferRemainLow&&Promise.resolve().then(e)},Object.defineProperty(c.prototype,"willTickEveryFrames",{get:function(){return!0},enumerable:!0,configurable:!0}),c.prototype.onPlayingContinue=function(){this.playingBeginDeviceTimestamp=Date.now(),this.playingBeginFrameTimestamp=this.lastPlayingStopFrameTimestamp},c.prototype.onPlayingStop=function(){var e=Date.now()-this.playingBeginDeviceTimestamp;this.lastPlayingStopFrameTimestamp=this.playingBeginFrameTimestamp+e},c.prototype.onTick=function(){for(var e=[],t=Date.now()-this.playingBeginDeviceTimestamp,r=this.playingBeginFrameTimestamp+t+this.frameInterval;0<this.framesBufferLength&&this.nextFrame.timestamp<=r;)e.push(this.takeNextFrame());if(0<e.length)try{this.callbacks.onPlayActionFrames&&this.callbacks.onPlayActionFrames(e)}catch(e){this.logger.error(e)}if(this.callbacks.onTick)if(0<e.length){var n=e[e.length-1],i=Math.max(this.playingBeginFrameTimestamp,n.timestamp);this.callbacks.onTick(i,!1)}else this.callbacks.onTick(r,!0);this.callbacks.onBufferRemainLow&&!this.didCompletePushFrames&&this.isBufferRemainLow&&this.callbacks.onBufferRemainLow(),this.didCompletePushFrames&&0===e.length&&(void 0===this.endFrameTimestamp||r>=this.endFrameTimestamp)&&this.completePlaying()},Object.defineProperty(c.prototype,"isBufferRemainLow",{get:function(){return this.currentBufferInterval<this.remainLowTimeInterval},enumerable:!0,configurable:!0}),c);function c(e){var t=o.call(this,e)||this;return t.playingBeginDeviceTimestamp=Date.now(),t.playingBeginFrameTimestamp=e.initFrameTimestamp,t.lastPlayingStopFrameTimestamp=e.initFrameTimestamp,t.endFrameTimestamp=e.endFrameTimestamp,t}t.ReconstructionPlayerBuffer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82),i=r(40),o=(Object.defineProperty(a.prototype,"phase",{get:function(){return this.phaseNode.phase},enumerable:!0,configurable:!0}),a.prototype.touchPlayerPhaseChanged=function(){this.didDispose||(this.didAllEnded=this.checkDidAllEnded(),this.isAnyPlayerPadding=this.checkIsAnyPlayerPadding(),this.refreshShouldPlaying())},a.prototype.play=function(){this.didDispose||this.didAllEnded||this.isPlaying||(this.isPlaying=!0,this.refreshShouldPlaying())},a.prototype.pause=function(){!this.didDispose&&this.isPlaying&&(this.isPlaying=!1,this.refreshShouldPlaying())},a.prototype.dispose=function(){for(var e=0,t=this.players;e<t.length;e++)t[e].pause();this.didDispose=!0},a.prototype.refreshShouldPlaying=function(){if(!this.isRefreshing){this.isRefreshing=!0;try{for(var e=!1,t=0;t<20&&(e=this.isPlaying&&!this.isAnyPlayerPadding,this.shouldPlaying!==e);++t){this.shouldPlaying=e;for(var r=0,n=this.players;r<n.length;r++){var i=n[r];e?i.play():i.pause()}}if(this.shouldPlaying!==e)throw new Error("switch play state can't convergence");this.phaseNode.touch()}finally{this.isRefreshing=!1}}},a.prototype.checkIsAnyPlayerPadding=function(){for(var e=0,t=this.players;e<t.length;e++){var r=t[e];if(r.phase===n.PlayerPhase.Waiting||r.phase===n.PlayerPhase.PausingAndWaiting)return!0}return!1},a.prototype.checkDidAllEnded=function(){for(var e=0,t=this.players;e<t.length;e++)if(t[e].phase!==n.PlayerPhase.Ended)return!1;return!0},a);function a(e){var t=this;this.isPlaying=!1,this.shouldPlaying=!1,this.isRefreshing=!1,this.currentPhase=function(){return t.didAllEnded?n.PlayerPhase.Ended:t.isPlaying?t.isAnyPlayerPadding?n.PlayerPhase.Waiting:n.PlayerPhase.Playing:n.PlayerPhase.Pausing},this.players=Object.freeze(e.players.slice()),this.isAnyPlayerPadding=this.checkIsAnyPlayerPadding(),this.didAllEnded=this.checkDidAllEnded(),this.phaseNode=new i.PhaseNode({getCurrentPhase:this.currentPhase,onPhaseChanged:e.onPhaseChanged})}t.PlayerSynchronizer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.assertReceivedFrameId=function(e){if(-1===this.latestReceivedFrameId)this.latestReceivedFrameId=e;else{var t=this.latestReceivedFrameId+1;if(e!==t)throw new Error("Magix want frameId "+t+", instead of "+e);this.latestReceivedFrameId=e}},i);function i(){this.latestReceivedFrameId=-1}t.FrameIdAsserter=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"isOnline",{get:function(){return this._isOnline},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"didDispose",{get:function(){return this._didDispose},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){try{this.handleAllPaddingResolver(!1),this.netState.removeListener(this.listener)}finally{this._didDispose=!0}},i.prototype.makeSureOnline=function(){var e=this;return this._didDispose?Promise.resolve(!1):this._isOnline?Promise.resolve(!0):new Promise((function(t){e.paddingResolver.push(t)}))},i.prototype.handleAllPaddingResolver=function(e){for(var t=0,r=this.paddingResolver.splice(0,this.paddingResolver.length);t<r.length;t++)(0,r[t])(e)},i);function i(e,t){var r=this;this.netState=e,this.onNetStateUpdate=t,this.paddingResolver=[],this._didDispose=!1,this.onOnline=function(){r._isOnline=!0,r.onNetStateUpdate&&r.onNetStateUpdate(!0),r.handleAllPaddingResolver(!0)},this.onOffline=function(){r._isOnline=!1,r.onNetStateUpdate&&r.onNetStateUpdate(!1)},e.addListener(this.listener={onOnline:this.onOnline,onOffline:this.onOffline}),this._isOnline=e.isOnline}t.NetStatePaddingNode=n},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(149)),n(r(150)),n(r(152)),n(r(151)),n(r(86)),n(r(87))},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.ReadyState||(t.ReadyState={}))[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSING=2]="CLOSING",n[n.CLOSED=3]="CLOSED"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.refreshAndInvokeAfterInterval=function(e){null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.invokeWhenTimeout,e)},i.prototype.cancel=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},i);function i(e){var t=this;this.invoker=e,this.timer=null,this.invokeWhenTimeout=function(){t.timer=null,t.invoker()}}t.Delayer=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.on=function(e,t){var r=this.eventListeners[e];r||(r=[],this.eventListeners[e]=r),-1===r.indexOf(t)&&r.push(t)},i.prototype.off=function(e,t){var r=this.eventListeners[e];if(r){var n=r.indexOf(t);-1!==n&&(r.splice(n,1),0===r.length&&delete this.eventListeners[e])}},i.prototype.once=function(e,t){var r=this,n=function(i){try{t(i)}finally{r.off(e,n)}};this.on(e,n)},i.prototype.dispatchToListeners=function(e,t){var r=this.eventListeners[e];if(r)for(var n=0,i=r;n<i.length;n++){var o=i[n];try{o(t)}catch(e){console.error(e)}}},i);function i(){this.eventListeners={}}t.EventsManagers=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow(2,32);t.setInt64=function(e,t,r){var i=r%n,o=(r-i)/n;e.setInt32(t,i),e.setInt32(t+4,o)},t.getInt64=function(e,t){var r=e.getInt32(t);return e.getInt32(t+4)*n+r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.waitToConnected=function(){var e=this;return new Promise((function(t,r){e.paddingExecutors.push({resolve:t,reject:r})}))},i.prototype.finishConnecting=function(){this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("error",this.onError),this.isConnecting=!1,this.timeoutTimer=null},i);function i(e,t){var r=this;this.socket=e,this.logger=t,this.paddingExecutors=[],this.isConnecting=!0,this.onOpen=function(){if(r.isConnecting){r.finishConnecting();for(var e=0,t=r.paddingExecutors.splice(0);e<t.length;e++)t[e].resolve()}},this.onError=function(e){if(r.isConnecting){r.finishConnecting();for(var t=new Error(e.message||"connect failed"),n=0,i=r.paddingExecutors.splice(0);n<i.length;n++)i[n].reject(t)}},this.onTimeout=function(){if(r.isConnecting){r.finishConnecting();for(var e=new Error("timeout"),t=0,n=r.paddingExecutors.splice(0);t<n.length;t++)n[t].reject(e);try{r.socket.close(1e3)}catch(e){r.logger.error(e)}}},e.addEventListener("open",this.onOpen),e.addEventListener("error",this.onError),this.timeoutTimer=setTimeout(this.onTimeout,25e3)}t.ConnectingManager=n},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getWebSocket=function(){return"undefined"==typeof WebSocket?e.WebSocket:WebSocket}}).call(this,r(71))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.wrapCallbacks=function(e){function t(t){var i=e[t];n[t]="function"==typeof i?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(r.switchOn)return i.apply(n,e)}:i}var r=this,n={};for(var i in e)t(i);return Object.freeze(n)},i);function i(){this.switchOn=!0}t.CallbacksFilter=n},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function a(){}Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),c=r(145),u=r(154);t.connectWebSocketSession=function(e){return i(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return[4,(t=new l(e)).connect()];case 1:return r=n.sent(),[2,{session:t,snapshot:r.snapshot,actionFrames:r.actionFrames,connection:r.connection}]}}))}))};var l=(Object.defineProperty(p.prototype,"session",{get:function(){return this.sessionBuild.session},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"slice",{get:function(){return this.sessionBuild.slice},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"connection",{get:function(){return this._connection},enumerable:!0,configurable:!0}),p.prototype.dispose=function(){this.connectionBuilder.dispose()},p.prototype.connect=function(){return i(this,void 0,void 0,(function(){var e,t,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,this.connectionBuilder.connect({logger:this.logger,socketURL:this.socketURL,roomToken:this.roomToken,serialization:this.serialization,webSocketQuery:n({},this.appDescription,{uuid:this.uuid,akkoVersion:s.AkkoVersion,access:this.access,sessionToken:this.sessionBuild&&this.sessionBuild.sessionToken}),callbacks:{onReceivedActionFrame:this.callbacks.onReceivedActionFrame||a,onReceivedScopeSlices:this.callbacks.onReceivedScopeSlices||a,onDisconnectedByServer:this.onDisconnectedByServer,onKickWithReason:this.onKickWithReason,onDisconnectedWithSocketError:this.onDisconnectedWithSocketError}})];case 1:return e=o.sent(),this.sessionBuild&&(t=e.connection.sessionBuild,r=t.session,i=t.slice,this.callbacks.onSessionUpdate&&this.sessionBuild.session!==r&&this.callbacks.onSessionUpdate(r),this.callbacks.onSliceUpdate&&this.sessionBuild.slice!==i&&this.callbacks.onSliceUpdate(i)),this._connection=e.connection,this.sessionBuild=e.connection.sessionBuild,[2,e]}}))}))},p.prototype.reconnectWithError=function(e){var t=this;this._connection&&(this._connection.disconnect(),this._connection=null),Promise.resolve().then((function(){t.startReconnect(e)}))},p.prototype.startReconnect=function(e){return i(this,void 0,void 0,(function(){var t,r;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.callbacks.onBeginReconnect&&this.callbacks.onBeginReconnect(e),[4,this.connect()];case 1:return t=n.sent(),this.callbacks.onReconnected&&this.callbacks.onReconnected(t),[3,3];case 2:return r=n.sent(),this.callbacks.onDisconnectedWithSocketError&&this.callbacks.onDisconnectedWithSocketError(r),[3,3];case 3:return[2]}}))}))},p);function p(e){var t=this;this._connection=null,this.onDisconnectedByServer=function(e){t._connection=null,t.callbacks.onDisconnectedByServer&&t.callbacks.onDisconnectedByServer(e)},this.onKickWithReason=function(e){t._connection=null,t.reconnectionOptions.disableReconnect||e!==u.KickReason.RoomZombie?t.callbacks.onKickWithReason&&t.callbacks.onKickWithReason(e):t.startReconnect(new Error("room became zombie"))},this.onDisconnectedWithSocketError=function(e){return i(t,void 0,void 0,(function(){return o(this,(function(t){return this._connection=null,this.reconnectionOptions.disableReconnect?this.callbacks.onDisconnectedWithSocketError&&this.callbacks.onDisconnectedWithSocketError(e):this.startReconnect(e),[2]}))}))},this.logger=e.logger,this.uuid=e.uuid,this.roomToken=e.roomToken,this.reconnectionOptions=e.reconnectionOptions,this.socketURL=e.socketURL,this.access=e.access,this.serialization=e.accessUpdaterSerialization,this.appDescription=Object.freeze(n({},e.appDescription)),this.connectionBuilder=new c.ConnectionBuilder(e.logger,e.netState),this.callbacks=Object.freeze(n({},e.callbacks))}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=Object.freeze({disableReconnect:!1});t.wholeReconnectionOptions=function(e){return!1===e?{disableReconnect:!0}:n({},i,e)}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=(Object.defineProperty(a.prototype,"selfUserId",{get:function(){return this._selfUserId},enumerable:!0,configurable:!0}),a.prototype.setConnectedMagixSession=function(e){this.connectedSession!==e&&(!this.connectedSession&&e&&this.paddingAndWaitSession&&(this.paddingAndWaitSession(e),this.paddingAndWaitSession=void 0),this.connectedSession=e,this.isConnectedSessionWritable=!1)},a.prototype.setWritable=function(e,t){return this.invokerBlock=this.convertTo(this.invokerBlock,e,t)},a.prototype.convertTo=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return[4,e];case 1:if(i.sent(),this.isConnectedSessionWritable===t)return[2];this.updateObserverId(void 0),n=null,i.label=2;case 2:return[4,this.waitAndGetConnectedSession()];case 3:return o=i.sent(),this.isConnectedSessionWritable===t?[3,10]:t?[4,o.connection.updateToWritable(this.userPayload,r)]:[3,6];case 4:return(n=i.sent())?[4,o.setAllocatedUser(n)]:[3,2];case 5:return i.sent(),[3,9];case 6:return[4,o.connection.updateToReadonly(r)];case 7:return i.sent()?[4,o.removeAllocatedUser()]:[3,2];case 8:i.sent(),i.label=9;case 9:return this.isConnectedSessionWritable=t,[3,10];case 10:return n&&this.updateObserverId(n.userId),this.onConvertToWritable&&this.onConvertToWritable(!!n),[2]}}))}))},a.prototype.waitAndGetConnectedSession=function(){var e=this;return this.connectedSession?Promise.resolve(this.connectedSession):new Promise((function(t){return e.paddingAndWaitSession=t}))},a.prototype.updateObserverId=function(e){this._selfUserId!==e&&(this._selfUserId=e,this.onSelfUserIdUpdate&&this.onSelfUserIdUpdate(e))},a);function a(e,t,r){this.userPayload=e,this.onSelfUserIdUpdate=t,this.onConvertToWritable=r,this._selfUserId=void 0,this.invokerBlock=Promise.resolve(),this.isConnectedSessionWritable=!1,this.connectedSession=null}t.MagixAuthorState=o},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(155),s=r(325),c=r(40),u=r(326),l=r(57),p=r(84),h=r(83),d=(Object.defineProperty(f.prototype,"trigger",{get:function(){return this.displayerHolder.displayer},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"phase",{get:function(){return this.phaseNode.phase},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"scheduleTime",{get:function(){return this._scheduleTime},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"slice",{get:function(){return this.currentLine&&this.currentLine.slice},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"sliceIndex",{get:function(){return this.currentLine&&this.currentLine.sliceIndex},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"roomUUID",{get:function(){return this.sliceChunk.roomUUID},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"duration",{get:function(){return this.sliceChunk.duration},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"framesCount",{get:function(){return this.sliceChunk.framesCount},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"beginTimestamp",{get:function(){return this.sliceChunk.beginTimestamp},enumerable:!0,configurable:!0}),f.prototype.play=function(){this.assertNotStop(),this.phaseNode.phase!==a.ReconstructorPhase.Ended&&(this.isPlaying||this.isSeeking||(this.currentLine?this.currentLine.play():this.seekToScheduleTime(0)),this.isPlaying=!0,this.phaseNode.touch())},f.prototype.pause=function(){this.assertNotStop(),this.isPlaying&&!this.isSeeking&&this.currentLine&&this.currentLine.pause(),this.isPlaying=!1,this.phaseNode.touch()},f.prototype.stop=function(){this.assertNotStop(),this.isSeeking&&this.currentSeekingTaskId++,this.currentLine&&(this.currentLine.destroy(),this.currentLine=void 0),this.thirdPartyReconstructorPlayer&&this.thirdPartyReconstructorPlayer.stop(),this.didStop=!0,this.phaseNode.touch()},f.prototype.seekToFrameId=function(e){var t=this;this.assertNotStop(),e=Math.max(e,0),e=Math.min(e,this.framesCount),this.startSeekingTask((function(r){return t.lineFactory.createWithFrameId(t.logger,e,r)}))},f.prototype.seekToScheduleTime=function(e){var t=this;this.assertNotStop(),e=Math.max(e,0),e=Math.min(e,this.duration),Number.isSafeInteger(e)||(e=Math.floor(e));var r=this.thirdPartyReconstructorPlayer&&this.thirdPartyReconstructorPlayer.seek(e);this.startSeekingTask((function(r){return t.lineFactory.createWithScheduleTime(t.logger,e,r)}),r)},f.prototype.startSeekingTask=function(e,t){return i(this,void 0,void 0,(function(){var r,i,a,s,c,u,l=this;return o(this,(function(o){switch(o.label){case 0:this.isSeeking=!0,this.currentLine&&this.currentLine.destroy(),this.currentSeekingTaskId++,this.phaseNode.touch(),r=this.currentSeekingTaskId,o.label=1;case 1:return o.trys.push([1,7,8,9]),i=n({},this.wrapCallbacksWithTaskChecking(r,{onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame,onCatchErrorWhenFetchBuffer:this.onCatchError,onModified:this.callbacks.onModified,onSliceChanged:this.callbacks.onSliceChanged,onEventFire:this.onEventFire,onTick:this.onTick,onPhaseChanged:function(){return l.phaseNode.touch()}})),[4,e(i)];case 2:return a=o.sent(),this.thirdPartyReconstructorPlayer&&!t&&(s=a.beginTimestamp-this.beginTimestamp,t=this.thirdPartyReconstructorPlayer.seek(s)),this.currentSeekingTaskId!==r?[3,5]:(c=!t)?[3,4]:[4,t];case 3:c=o.sent(),o.label=4;case 4:return c?(this.changeCurrentLine(a),a.loadActionFrames()):this.currentSeekingTaskId++,[3,6];case 5:a.destroy(),o.label=6;case 6:return[3,9];case 7:throw u=o.sent(),this.onCatchError(u),u;case 8:return this.currentSeekingTaskId===r&&(this.isSeeking=!1,this.phaseNode.touch()),[7];case 9:return[2]}}))}))},f.prototype.changeCurrentLine=function(e){var t=!!this.currentLine&&this.currentLine.sliceIndex!==e.sliceIndex;this.currentLine=e,this.displayerHolder?e.bindDisplayerHolder(this.displayerHolder):this.displayerHolder=e.createAndBindDisplayerHolder(this.observerAdapter),this.isPlaying&&e.play(),this.callbacks.onSliceChanged&&t&&this.callbacks.onSliceChanged(e.slice,e.sliceIndex),this.phaseNode.touch(),this.callbacks.onModified&&this.callbacks.onModified(),this.onTick(e.beginTimestamp)},f.prototype.wrapCallbacksWithTaskChecking=function(e,t){function r(r){var o=t[r];o&&(i[r]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(e===n.currentSeekingTaskId)return o.apply(void 0,t)})}var n=this,i={};for(var o in t)r(o);return i},f.prototype.assertNotStop=function(){if(this.didStop)throw new Error("Reconstructor did stop")},f);function f(e,t,r,n,i,o,d,f){var m=this;this._scheduleTime=0,this.isPlaying=!1,this.isSeeking=!1,this.didStop=!1,this.currentSeekingTaskId=0,this.currentLine=void 0,this.displayerHolder=void 0,this.currentPhase=function(){if(m.didStop)return a.ReconstructorPhase.Stopped;if(!m.currentLine)return a.ReconstructorPhase.WaitingFirstFrame;if(m.isSeeking)return a.ReconstructorPhase.Seeking;switch(m.currentLine.phase){case l.PlayerPhase.Playing:return a.ReconstructorPhase.Playing;case l.PlayerPhase.Pausing:case l.PlayerPhase.PausingAndWaiting:return a.ReconstructorPhase.Pause;case l.PlayerPhase.Waiting:return a.ReconstructorPhase.Buffering;case l.PlayerPhase.Ended:return a.ReconstructorPhase.Ended}},this.onTick=function(e){var t=e-m.beginTimestamp;m._scheduleTime=t,m.callbacks.onScheduleTimeChanged&&m.callbacks.onScheduleTimeChanged(t)},this.onThirdPartyReconstructorPlayerPhaseChanged=function(){m.currentLine&&m.currentLine.touchThirdPartyUpdate()},this.onCatchError=function(e){m.didStop||(m.stop(),m.callbacks.onStoppedWithError&&m.callbacks.onStoppedWithError(e))},this.onEventFire=function(e){m.callbacks.onEventFire&&m.callbacks.onEventFire(p.getEventWithDescription(e,p.EventPhase.Dispatched))},this.logger=e,this.sliceChunk=t,o&&(this.thirdPartyReconstructorPlayer=new s.ThirdPartyReconstructorPlayer({thirdPartyReconstructorFactory:o,onPhaseChanged:this.onThirdPartyReconstructorPlayerPhaseChanged,onCatchError:this.onCatchError})),this.observerAdapter=d,this.callbacks=h.wrapCallbacks(f),this.phaseNode=new c.PhaseNode({phase:a.ReconstructorPhase.WaitingFirstFrame,onPhaseChanged:f.onPhaseChanged,getCurrentPhase:this.currentPhase}),this.lineFactory=new u.ReconstructorLineFactory({sliceChunk:t,imageFactory:r,sequenceFetcher:n,thirdPartyReconstructorPlayer:this.thirdPartyReconstructorPlayer,enableAnimationFrame:i})}t.ReconstructorImplement=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(57),i=r(156),o=r(40),a=(Object.defineProperty(s.prototype,"phase",{get:function(){return this.phaseNode.phase},enumerable:!0,configurable:!0}),s.prototype.seek=function(e){var t=this;return this.isEnded=!1,this.handleSeekingResolvers(!1),this.reconstructor.seek(e)===i.OperationResult.Success?Promise.resolve(!0):new Promise((function(e){return t.seekingResolvers.push(e)}))},s.prototype.play=function(){this.isEnded||this.isPlaying||(this.isPlaying=!0,this.isPadding=this.reconstructor.play()===i.OperationResult.Padding,this.phaseNode.touch())},s.prototype.pause=function(){this.isPlaying&&(this.isPlaying=!1,this.reconstructor.pause(),this.phaseNode.touch())},s.prototype.stop=function(){this.didStop||(this.didStop=!0,this.reconstructor&&this.reconstructor.stop(),this.phaseNode.touch())},s.prototype.handleSeekingResolvers=function(e){var t=this.seekingResolvers.length;if(0<t){for(var r=0,n=this.seekingResolvers;r<n.length;r++)(0,n[r])(e);this.seekingResolvers.splice(0,t)}},s.prototype.wrapCallbacks=function(e){function t(t){var i=e[t];n[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.didStop||i.apply(r,e)}}var r=this,n={};for(var i in e)t(i);return n},s);function s(e){var t=this;this.seekingResolvers=[],this.isPlaying=!1,this.isPadding=!1,this.isEnded=!1,this.didStop=!1,this.onEnded=function(){t.isEnded=!0,t.phaseNode.touch()},this.onCanPlay=function(){t.isPadding=!1,t.phaseNode.touch()},this.onBuffering=function(){t.isPadding=!0,t.phaseNode.touch()},this.onSeeked=function(){t.handleSeekingResolvers(!0)},this.currentPhase=function(){return t.isEnded||t.didStop?n.PlayerPhase.Ended:t.isPlaying?t.isPadding?n.PlayerPhase.Waiting:n.PlayerPhase.Playing:t.isPadding?n.PlayerPhase.PausingAndWaiting:n.PlayerPhase.Pausing},this.reconstructor=e.thirdPartyReconstructorFactory(this.wrapCallbacks({onEnded:this.onEnded,onCanPlay:this.onCanPlay,onBuffering:this.onBuffering,onSeeked:this.onSeeked,onCatchError:e.onCatchError})),this.phaseNode=new o.PhaseNode({getCurrentPhase:this.currentPhase,onPhaseChanged:e.onPhaseChanged})}t.ThirdPartyReconstructorPlayer=a},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(327),a=(s.prototype.createWithFrameId=function(e,t,r){return n(this,void 0,void 0,(function(){var n,a,s,c,u;return i(this,(function(i){switch(i.label){case 0:return n=this.sliceChunk.getFrameDescriptionWithFrameId(t),a=n.sliceIndex,s=n.frameId,c=this.sliceChunk.sliceAt(a),[4,this.sequenceFetcher.initializeWithFrameId(c,s)];case 1:return u=i.sent(),[2,new o.ReconstructorLineImplement({logger:e,imageFactory:this.imageFactory,sequenceFetcher:this.sequenceFetcher,sliceChunk:this.sliceChunk,beginSliceIndex:a,initFrameTimestamp:this.sliceChunk.beginTimestamp,sequenceInitializer:u,thirdPartyReconstructorPlayer:this.thirdPartyReconstructorPlayer,enableAnimationFrame:this.enableAnimationFrame,callbacks:r})]}}))}))},s.prototype.createWithScheduleTime=function(e,t,r){return n(this,void 0,void 0,(function(){var n,a,s,c,u,l;return i(this,(function(i){switch(i.label){case 0:return n=this.sliceChunk.getFrameDescriptionWithTimestamp(t),a=n.sliceIndex,s=n.timestamp,c=this.sliceChunk.sliceAt(a),u=s+c.beginTimestamp,[4,this.sequenceFetcher.initializeWithTimestamp(c,u)];case 1:return l=i.sent(),[2,new o.ReconstructorLineImplement({logger:e,imageFactory:this.imageFactory,sequenceFetcher:this.sequenceFetcher,sliceChunk:this.sliceChunk,beginSliceIndex:a,initFrameTimestamp:this.sliceChunk.beginTimestamp+t,sequenceInitializer:l,thirdPartyReconstructorPlayer:this.thirdPartyReconstructorPlayer,enableAnimationFrame:this.enableAnimationFrame,callbacks:r})]}}))}))},s);function s(e){this.sliceChunk=e.sliceChunk,this.imageFactory=e.imageFactory,this.sequenceFetcher=e.sequenceFetcher,this.thirdPartyReconstructorPlayer=e.thirdPartyReconstructorPlayer,this.enableAnimationFrame=e.enableAnimationFrame}t.ReconstructorLineFactory=a},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=r(57);function s(e){return n(this,void 0,void 0,(function(){var t,r,n,o;return i(this,(function(i){switch(i.label){case 0:t=3,n=0,i.label=1;case 1:if(!(n<t))return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,e()];case 3:return[2,i.sent()];case 4:return o=i.sent(),r=o,[3,5];case 5:return++n,[3,1];case 6:throw r}}))}))}var c=(u.prototype.createImage=function(e){var t=e.snapshot,r=e.actionFrames,n=e.akkoSerVersion,i=this.imageFactory.createWithSnapshot({logger:this.logger,snapshotFrame:t,actionFrames:r,roomUUID:this.sliceChunk.roomUUID,includesFrameHash:!1,ignoreHashChecking:!0,snapshotDeserializerVersion:n,actionDeserializerVersion:n,callbacksWhenUpdate:!0,callbacks:{onModified:this.callbacks.onModified,onEventFire:this.callbacks.onEventFire,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame}});return i.modifiable=!1,i},Object.defineProperty(u.prototype,"slice",{get:function(){return this.sliceChunk.sliceAt(this.playingSliceIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sliceIndex",{get:function(){return this.playingSliceIndex},enumerable:!0,configurable:!0}),u.prototype.play=function(){this.targetPlayer.play()},u.prototype.pause=function(){this.targetPlayer.pause()},u.prototype.destroy=function(){this.didDestroy||(this.playerSynchronizer&&this.playerSynchronizer.dispose(),this.playerBuffer.pause(),this.displayerHolder&&(this.displayerHolder.dispose(),this.displayerHolder=void 0),this.didDestroy=!0)},u.prototype.bindDisplayerHolder=function(e){this.displayerHolder=e,this.image&&(this.displayerHolder.akkoProxyNode=this.image.triggerProxyNode)},u.prototype.createAndBindDisplayerHolder=function(e){var t=new o.AkkoDisplayerHolder(this.image.triggerProxyNode,e);return this.bindDisplayerHolder(t),t},u.prototype.touchThirdPartyUpdate=function(){this.playerSynchronizer&&this.playerSynchronizer.touchPlayerPhaseChanged()},Object.defineProperty(u.prototype,"phase",{get:function(){return this.targetPlayer.phase},enumerable:!0,configurable:!0}),u.prototype.isRemainFramesToFetch=function(){return!this.didFetchOverTimestampFrame&&this.fetchingSliceIndex<this.sliceChunk.slicesCount},u.prototype.loadActionFrames=function(){this.fillActionFramesIntoBuffer()},u.prototype.fillActionFramesIntoBuffer=function(){return n(this,void 0,void 0,(function(){var e,t,r;return i(this,(function(n){switch(n.label){case 0:if(!this.isRemainFramesToFetch())return[3,5];n.label=1;case 1:return n.trys.push([1,3,4,5]),this.isDownloading=!0,[4,this.fetchFrames()];case 2:return e=n.sent(),t=this.sliceChunk.beginTimestamp+this.sliceChunk.duration,0<this.removeTimestampOverFrames(e,t).length&&(this.didFetchOverTimestampFrame=!0,e.push({frameId:this.fetchingFrameId+1,timestamp:t})),0<e.length&&(this.playerBuffer.pushFrames(e),this.fetchingFrameId=e[e.length-1].frameId),this.isRemainFramesToFetch()||this.playerBuffer.completePushFrames(),[3,5];case 3:return r=n.sent(),this.callbacks.onCatchErrorWhenFetchBuffer&&this.callbacks.onCatchErrorWhenFetchBuffer(r),[3,5];case 4:return this.isDownloading=!1,[7];case 5:return[2]}}))}))},u.prototype.fetchFrames=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,o,a,c,l,p,h,d,f=this;return i(this,(function(i){switch(i.label){case 0:for(;;){if(!(e=this.sliceChunk.sliceAt(this.fetchingSliceIndex)))return[2,[]];if(0<(t=e.framesCount-this.fetchingFrameId))break;this.fetchingFrameId=0,this.fetchingSliceIndex++,this.isFirstSlice=!1}return r=Math.min(t,u.fetchFramesCountOnce),n=0===this.fetchingFrameId&&!this.isFirstSlice,[4,Promise.all([s((function(){return f.sequenceFetcher.fetchFramePickers(e,f.fetchingFrameId+1,r)})),n?s((function(){return f.sequenceFetcher.initializeWithFrameId(e,f.fetchingFrameId)})):Promise.resolve(void 0)])];case 1:for(o=i.sent(),a=o[0],c=o[1],l=[],p=0,h=a;p<h.length;p++)d=h[p],l.push({frameId:d.frameId,timestamp:d.timestamp,framePicker:d});return c&&(l[0].sequenceInitializer=c),[2,l]}}))}))},u.prototype.removeTimestampOverFrames=function(e,t){var r=e.findIndex((function(e){return e.timestamp>=t}));return-1!==r?e.splice(r,e.length-r):[]},u.fetchFramesCountOnce=600,u);function u(e){var t=this;this.displayerHolder=void 0,this.isDownloading=!1,this.didDestroy=!1,this.didFetchOverTimestampFrame=!1,this.onPlayActionFrames=function(e){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],a=o.sequenceInitializer,s=o.framePicker;a&&(0<r.length&&(t.image.appendActionFrames(r),r=[]),t.image=t.createImage(a),t.displayerHolder&&(t.displayerHolder.akkoProxyNode=t.image.triggerProxyNode),t.playingSliceIndex++,t.callbacks.onSliceChanged&&t.callbacks.onSliceChanged(t.slice,t.playingSliceIndex)),s&&r.push(s.frameBuffer)}0<r.length&&t.image.appendActionFrames(r)},this.onBufferRemainLow=function(){t.isDownloading||t.loadActionFrames()},this.onPlayerBufferPhaseChanged=function(e){t.playerSynchronizer?t.playerSynchronizer.touchPlayerPhaseChanged():t.callbacks.onPhaseChanged&&t.callbacks.onPhaseChanged(e)},this.logger=e.logger,this.imageFactory=e.imageFactory,this.sliceChunk=e.sliceChunk,this.sequenceFetcher=e.sequenceFetcher,this.fetchingSliceIndex=e.beginSliceIndex,this.playingSliceIndex=e.beginSliceIndex,this.callbacks=e.callbacks,this.isFirstSlice=!0,this.image=this.createImage(e.sequenceInitializer),this.fetchingFrameId=this.image.frameId,this.beginTimestamp=void 0===e.initFrameTimestamp?this.image.timestamp:e.initFrameTimestamp,this.playerBuffer=a.playerBufferFactory.create({logger:e.logger,mode:a.PlayerBufferMode.Reconstruction,enableAnimationFrame:e.enableAnimationFrame,initFrameTimestamp:this.beginTimestamp,endFrameTimestamp:this.sliceChunk.beginTimestamp+this.sliceChunk.duration,callbacks:{onBufferRemainLow:this.onBufferRemainLow,onPlayActionFrames:this.onPlayActionFrames,onPhaseChanged:this.onPlayerBufferPhaseChanged,onTick:e.callbacks.onTick}}),e.thirdPartyReconstructorPlayer?(this.playerSynchronizer=new a.PlayerSynchronizer({players:[e.thirdPartyReconstructorPlayer,this.playerBuffer],onPhaseChanged:e.callbacks.onPhaseChanged}),this.targetPlayer=this.playerSynchronizer):this.targetPlayer=this.playerBuffer}t.ReconstructorLineImplement=c},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(41),a=r(2),s=r(4),c=r(0),u=r(157),l=r(114);function p(e,t,r){var n=Math.min(e,r),i=Math.max(e,r);return t<n?t=n:i<t&&(t=i),t}var h=(d.prototype.initializeWithTimestamp=function(e,t){return n(this,void 0,void 0,(function(){var r,n,a,c,l,h,d,f,m;return i(this,(function(i){switch(i.label){case 0:return r=p(e.beginTimestamp,t,e.beginTimestamp+e.duration),n=this.persistenceServerOrigin+"/v2/slices/"+e.uuid+"/snapshots?"+o.stringify({timestamp:r}),[4,u.fetcher.fetchJSON(n,{method:"get",headers:{"content-type":"application/json",Accept:"application/json"}})];case 1:return a=(a=i.sent())||{frameId:0,timestamp:e.beginTimestamp},[4,this.fetchFrameRouterPicker(e,a.frameId)];case 2:for(c=i.sent(),h=l=0;h<c.framesCount;h++)c.timestampAt(h)<=t&&l++;return[4,this.fetchSnapshot(e,a.frameId)];case 3:return d=i.sent(),0!==l?[3,4]:(m=[],[3,6]);case 4:return[4,this.fetchFramePickers(e,c.beginFrameId,l)];case 5:m=i.sent(),i.label=6;case 6:return f=m,[2,{snapshot:d.frameBuffer,actionFrames:f.map((function(e){return e.frameBuffer})),akkoSerVersion:s.convertToAkkoSerVersion(e.akkoVersion)}]}}))}))},d.prototype.initializeWithFrameId=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,a,c;return i(this,(function(i){switch(i.label){case 0:return r=p(0,t,e.framesCount-1),[4,this.fetchSnapshot(e,r)];case 1:return n=i.sent(),0!=(o=r-n.frameId)?[3,2]:[2,{snapshot:n.frameBuffer,actionFrames:[],akkoSerVersion:s.convertToAkkoSerVersion(e.akkoVersion)}];case 2:return[4,this.fetchFrameRouterPicker(e,n.frameId)];case 3:return a=i.sent(),[4,this.fetchFramePickers(e,a.beginFrameId,o)];case 4:return c=i.sent(),[2,{snapshot:n.frameBuffer,actionFrames:c.map((function(e){return e.frameBuffer})),akkoSerVersion:s.convertToAkkoSerVersion(e.akkoVersion)}]}}))}))},d.prototype.fetchFramePickers=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,a,s,u,l,p,h,d,m;return i(this,(function(i){switch(i.label){case 0:return n=this.assetsPrefix+"/"+e.roomUUID+"/"+e.uuid+"/frames.router",o=t-1,[4,f.pick(n,o,r)];case 1:return a=i.sent(),[4,this.fetchBody(e,"frames",a.offset,a.length)];case 2:for(s=i.sent(),u=[],l=0;l<a.framesCount&&(p=a.offsetAt(l)-a.offset,h=a.lengthAt(l),!(s.byteLength<p+h));++l)d=s.slice(p,h),m=new c.FramePicker(d),u.push(m);return[2,u]}}))}))},d.prototype.fetchSnapshot=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,a,s,u;return i(this,(function(i){switch(i.label){case 0:return r=this.assetsPrefix+"/"+e.roomUUID+"/"+e.uuid+"/snapshots.router",n=Math.floor(t/e.snapshotIdInterval),[4,f.pick(r,n,1)];case 1:if(0===(o=i.sent()).framesCount)throw new Error("can't find snapshot with frameId "+t);return a=o.offsetAt(0),s=o.lengthAt(0),[4,this.fetchBody(e,"snapshots",a,s)];case 2:return u=i.sent(),[2,new c.FramePicker(u)]}}))}))},d.prototype.fetchFrameRouterPicker=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,a;return i(this,(function(i){return r=t+1,n=Math.min(e.framesCount-1,t+e.snapshotIdInterval-1),o=n-r+1,a=this.assetsPrefix+"/"+e.roomUUID+"/"+e.uuid+"/frames.router",[2,f.pick(a,r,o)]}))}))},d.prototype.fetchBody=function(e,t,r,o){return n(this,void 0,void 0,(function(){var n,a;return i(this,(function(i){switch(i.label){case 0:return n=this.assetsPrefix+"/"+e.roomUUID+"/"+e.uuid+"/"+t+".body",[4,u.fetcher.fetchBuffer(n,{method:"get",headers:{"content-type":"application/json",Accept:"application/octet-stream",Range:"bytes="+r+"-"+(r+o)}})];case 1:if(!(a=i.sent()))throw new Error("can't find \""+n+'"');return[2,a]}}))}))},d);function d(e,t){this.persistenceServerOrigin=e,this.assetsPrefix=t}t.SequenceFetcher=h;var f=(m.pick=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,s,c,p;return i(this,(function(i){switch(i.label){case 0:return n=3*l.Uint64Bytes,o=t*n,s=(t+r)*n-1,[4,u.fetcher.fetchBuffer(e,{method:"get",headers:{"content-type":"application/json",Accept:"application/octet-stream",Range:"bytes="+o+"-"+s}})];case 1:return c=(c=i.sent())||a.createBuffer(0),p=Math.floor(c.byteLength/n),[2,new m(c,t,p)]}}))}))},Object.defineProperty(m.prototype,"length",{get:function(){if(void 0===this._length)for(var e=this._length=0;e<this.framesCount;++e)this._length+=this.lengthAt(e);return this._length},enumerable:!0,configurable:!0}),m.prototype.timestampAt=function(e){var t=e*(3*l.Uint64Bytes)+0*l.Uint64Bytes;return l.getUint64(this.buffer,t)},m.prototype.offsetAt=function(e){var t=e*(3*l.Uint64Bytes)+1*l.Uint64Bytes;return l.getUint64(this.buffer,t)},m.prototype.lengthAt=function(e){var t=e*(3*l.Uint64Bytes)+2*l.Uint64Bytes;return l.getUint64(this.buffer,t)},m);function m(e,t,r){this.buffer=e,this.beginFrameId=t,this.framesCount=r,0<this.framesCount?this.offset=this.offsetAt(0):this.offset=Number.NaN}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.getRoomUUID=function(){for(var e=this.slices[0].roomUUID,t=1;t<this.slices.length;++t)if(e!==this.slices[t].roomUUID)throw new Error("all slices should have the same roomUUID");return e},i.prototype.getFramesCount=function(){for(var e=0,t=0,r=this.slices;t<r.length;t++)e+=r[t].framesCount;return e},Object.defineProperty(i.prototype,"beginTimestamp",{get:function(){return this.beginAt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this.endAt-this.beginAt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slicesCount",{get:function(){return this.slices.length},enumerable:!0,configurable:!0}),i.prototype.sliceAt=function(e){return this.slices[e]},i.prototype.getFrameDescriptionWithFrameId=function(e){for(var t=e,r=0,n=0;n<this.slices.length;++n){var i=this.slices[n];if(r=n,t<i.framesCount)break;t-=i.framesCount}return{frameId:t,sliceIndex:r}},i.prototype.getFrameDescriptionWithTimestamp=function(e){for(var t=e+this.beginAt,r=0,n=0;n<this.slices.length;++n){var i=this.slices[n];if(r=n,t<i.beginTimestamp+i.duration)break}return{sliceIndex:r,timestamp:Math.max(0,t-this.slices[r].beginTimestamp)}},i);function i(e){this.slices=Object.freeze(e.slices.slice().sort((function(e,t){return e.beginTimestamp-t.beginTimestamp}))),this.beginAt=e.beginAt,this.endAt=e.endAt,this.roomUUID=this.getRoomUUID(),this.framesCount=this.getFramesCount()}t.SliceChunk=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(331))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(332),i=(o.prototype.create=function(e){return void 0===e&&(e=""),new n.SnapshotManagerImplement(e,this.library)},o);function o(e){this.library=e}t.SnapshotManagerFactory=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(3),o=r(333),a=r(9),s=r(139),c=r(26),u=void 0,l=void 0;a.contextStack.addListener((function(e,t){switch(e){case a.ContextState.Appear:case a.ContextState.Reappear:u=t.tools?(l=t.tools.idGenerator,t.proxyRuntime):l=void 0;break;case a.ContextState.Cleaned:u=l=void 0}}));var p=(h.prototype.createSnapshot=function(e,t){if(void 0===t&&(t=!1),!c.isInMagix())throw new Error("can't call createSnapshot out of Magix");var r=e,i=new n.Writer,o=this.readObjectFormatWith(r),a=t;return i.writeUint8(t?255:0),t&&(i.writeString(this.description.roomUUID),i.writeString(this.description.appIdentifier),i.writeString(this.description.appVersion),i.writeString(this.description.appHash),i.writeString(this.description.akkoVersion)),i.writeUint32(o.id),new n.Serialization({format:this.format,objectAdapter:new s.ProxyObjectAdapter(u),assertObjectFormat:h.assertObjectFormat}).serialize({writer:i,values:[r],objectFormats:[o],includesHash:a}),i.toBuffer().freeze()},h.prototype.recoverWithSnapshot=function(e,t){if(!c.isInMagix())throw new Error("can't call recoverWithSnapshot out of Magix");var r=t,i=new n.Reader(e),a=this.readDescription(i),s=i.readUint32();if(r&&this.readObjectFormatWith(r).id!==s)throw new Error("target's class isn't matching");var p=this.format.findObjectFormat(s),h=this.shouldOverrideTarget(a)?r:void 0;return new o.ObjectPutter(h,this.format,[p],l,u,this.covertIdToClass).recoverFrom(i,void 0!==a)},h.prototype.readObjectFormatWith=function(e){if(!i.isAkkoObjectProxyNode(e))throw new Error("can't only create snapshot of AkkoObject");return e.struct.classReflection.objectFormat},h.prototype.readDescription=function(e){if(e.readUint8()){var t=e.readString(),r=e.readString(),n=e.readString(),i=e.readString(),o=e.readString();if(r!==this.description.appIdentifier)throw new Error("invalid snapshot: appIdentifier not matches");if(n!==this.description.appVersion)throw new Error("invalid snapshot: appVersion not matches");if(i!==this.description.appHash)throw new Error("invalid snapshot: appHash not matches");if(o!==this.description.akkoVersion)throw new Error("invalid snapshot: akkoVersion not matches");return{roomUUID:t,appIdentifier:r,appVersion:n,appHash:i,akkoVersion:o}}},h.prototype.shouldOverrideTarget=function(e){return!e||e.roomUUID===this.description.roomUUID},h.assertObjectFormat=function(e){return i.isAkkoObjectProxyNode(e)?e.struct.classReflection.objectFormat:void 0},h);function h(e,t){this.format=t.format,this.covertIdToClass=t.covertObjectFormatIdToClass,this.description=Object.freeze({roomUUID:e,appIdentifier:t.appIdentifier,appVersion:t.appVersion,appHash:t.appHash,akkoVersion:t.akkoVersion})}t.SnapshotManagerImplement=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(2),a=r(4),s=r(334),c=r(13),u=r(25),l=r(3);(i=n=n||{})[i.FlatObject=0]="FlatObject",i[i.AkkoObject=1]="AkkoObject",i[i.Array=2]="Array";var p=(h.prototype.recoverFrom=function(e,t){for(var r,n=!t,i=new a.Serialization({format:this.format,objectAdapter:this.objectAdapter,assertObjectFormat:h.assertObjectFormat}).deserialize({reader:e,objectFormats:this.snapshotObjectFormats,ignoreHashChecking:n,version:h.akkoSerVersion})[0],o=0,s=this.overrideNodes;o<s.length;o++){var c=s[o],u=c.proxyNode,l=c.tempObject,p=c.reflection;this.overrideProxyNode(u,l,p),l===i&&(r=u)}return r},h.prototype.overrideProxyNode=function(e,t,r){if(l.isFlatObjectProxyNode(e))for(var n in t)e.target()[n]=t[n];else if(l.isArrayProxyNode(e))for(var i=0;i<t.length;++i)e.target()[i]=t[i];else if(l.isAkkoObjectProxyNode(e)){for(var o=this.proxyRuntime.getAkkoObjectStruct(r),a=e.target(),s=0,c=o.transientValueProperties;s<c.length;s++)delete a[n=c[s]];for(var u=0,p=o.serializableValueProperties;u<p.length;u++)a[n=p[u]]=t[n]}},h.tempObjectKind=function(e,t){return t?n.AkkoObject:e.constructor===Object?n.FlatObject:n.Array},h.proxyNodeKind=function(e){return l.isFlatObjectProxyNode(e)?n.FlatObject:l.isArrayProxyNode(e)?n.Array:n.AkkoObject},h.assertObjectFormat=function(e){if(e instanceof u.AkkoObject){var t=u.getClassReflection(e.constructor);if(t)return t.objectFormat}},h.akkoSerVersion=a.convertToAkkoSerVersion(o.AkkoVersion),h);function h(e,t,r,i,o,u){var l=this;this.rootProxyNode=e,this.format=t,this.snapshotObjectFormats=r,this.idGenerator=i,this.proxyRuntime=o,this.covertIdToClass=u,this.decorateObject=function(e,t,r,i){var o=void 0;if(i&&t===a.ObjectType.AssertedObject&&!(o=l.covertIdToClass(i.id)))throw new a.DeserializerError("can't find class by object format id "+i.id);var s=o&&o[c.ClassReflectionName],u=e.__identifier,p=h.tempObjectKind(e,s),d=l.floatProxyNodes[u];if(!d||p!==h.proxyNodeKind(d)){var f=l.idGenerator.generate();switch(p){case n.FlatObject:d=l.proxyRuntime.createFlatObjectProxy(f,{});break;case n.Array:d=l.proxyRuntime.createArrayProxy(f,[]);break;case n.AkkoObject:var m={};Object.setPrototypeOf(m,s.clazz.prototype),d=l.proxyRuntime.createAkkoObjectProxy(f,m,s)}}for(var y=0,A=r;y<A.length;y++){var g=A[y];g.object[g.key]=d}l.overrideNodes.push({proxyNode:d,tempObject:e,reflection:s})};var p=new s.ObjectsFlatter;this.rootIdentifier=p.collectValue(e),this.objectAdapter=new a.DefaultObjectAdapter(this.decorateObject),this.floatProxyNodes=p.floatProxyNodes,this.tempObjects={},this.overrideNodes=[]}t.ObjectPutter=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=(o.prototype.collectValue=function(e){if("object"==typeof e&&null!==e){if(n.isFlatObjectProxyNode(e))return this.collectFlatObjectProxyNode(e);if(n.isArrayProxyNode(e))return this.collectArrayProxyNode(e);if(n.isAkkoObjectProxyNode(e))return this.collectAkkoObjectProxyNode(e);throw new Error("invalid class "+(e.constructor&&e.constructor.name))}},o.prototype.collectFlatObjectProxyNode=function(e){var t=e.identifier;if(t in this.floatProxyNodes)return t;var r=(this.floatProxyNodes[t]=e).target();for(var n in r)this.collectValue(r[n]);return t},o.prototype.collectArrayProxyNode=function(e){var t=e.identifier;if(t in this.floatProxyNodes)return t;for(var r=0,n=(this.floatProxyNodes[t]=e).target();r<n.length;r++){var i=n[r];this.collectValue(i)}return t},o.prototype.collectAkkoObjectProxyNode=function(e){var t=e.identifier;if(t in this.floatProxyNodes)return t;for(var r=(this.floatProxyNodes[t]=e).target(),n=0,i=e.struct.serializableValueProperties;n<i.length;n++){var o=i[n];this.collectValue(r[o])}return t},o);function o(){this.floatProxyNodes={}}t.ObjectsFlatter=i},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),s=r(18),c=r(163),u=r(83),l=r(336),p=r(337),h=r(40),d=r(338),f=r(160),m=r(17),y=r(164),A=r(162),g=r(12),v=(b.prototype.createActionFrameHelper=function(e){var t=e.frameSerializationBundles.paramsSerialization,r=e.frameSerializationBundles.proxyNodeSerialization,n=e.strategy.deserializerVersion;return new f.ActionFrameHelper(t,r,n)},Object.defineProperty(b.prototype,"hasDoubleLines",{get:function(){return this.proxyRuntime.runtime.hasDoubleLines},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"trigger",{get:function(){return this.proxyNode.displayer},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"triggerProxyNode",{get:function(){return this.proxyNode},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"phase",{get:function(){return this.phaseNode.phase},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"userIds",{get:function(){return this.imageUsers.userIds},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"usersCount",{get:function(){return this.imageUsers.usersCount},enumerable:!0,configurable:!0}),b.prototype.hasUser=function(e){return this.imageUsers.hasUser(e)},b.prototype.user=function(e){return this.imageUsers.user(e,!1)},Object.defineProperty(b.prototype,"verifiedFrameId",{get:function(){return this.triggerInvoker.frameId},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"frameId",{get:function(){var e=this.triggerInvoker.frameId,t=this.branchImageHelper.illusionQueue;return t&&(e+=t.length),e},set:function(e){var t=this.branchImageHelper.illusionQueue;t&&(e-=t.length),this.triggerInvoker.frameId=e},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"timestamp",{get:function(){return this.triggerInvoker.timestamp},enumerable:!0,configurable:!0}),b.prototype.appendActionFrames=function(e){var t=this,r=this.proxyRuntime.runtime,n=this.continuousUpdated((function(){r.hasDoubleLines?r.branchRuntime?t.branchImageHelper.appendActionFrames(e):t.branchImageHelper.appendActionFramesWithDoubleMode(e):t.appendActionFramesWithSingleMode(e)}));this.phaseNode.touch(),this.callbacks.onModified&&n.didUpdated&&this.callbacks.onModified()},b.prototype.appendScopeSlices=function(e){this.frameGenerator&&this.frameGenerator.appendScopeSlices(e)},b.prototype.appendActionFramesWithSingleMode=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t],i=this.proxyNodeSerialization.deserializeActionFrame(n,this.strategy.deserializerVersion,this.strategy.ignoreHashChecking),o=y.idGeneratorWithFrame(i);this.assertAppendFrameId(i),this.triggerInvoker.appendAction(i,{authorId:i.authorId,mode:m.CoreFunctionsMode.Real,timestamp:i.timestamp,identifierGenerator:o})}},b.prototype.dispatch=function(e,t){var r=this;this.assertEnableSendActionFrames();var n=Date.now(),i=this.frameGenerator,o=i.author.allocateIdentifierGenerator(),a=this.continuousUpdated((function(){var a=r.prepareBranchRuntimeForInitiativeModify().createFrameSection(),s={authorId:i.author.userId,mode:m.CoreFunctionsMode.Illusion,timestamp:n,frameSection:a,identifierGenerator:o};r.proxyRuntime.runtime.runWithMagix(s,(function(){var s=i.createIllusionEventFrame(e,t,n,o),c=s.frameBuffer,u=s.illusionFrame;try{return r.triggerInvoker.dispatch(e,u.payload)}finally{r.handleActionFrame(c,a)}}))}));this.callbacks.onEventFire&&this.callbacks.onEventFire({event:e,payload:t,scope:g.EventScope.Custom,authorId:i.author.userId}),this.callbacks.onModified&&a.didUpdated&&this.callbacks.onModified()},b.prototype.handleActionFrame=function(e,t){var r=new g.FramePicker(e);this.branchImageHelper.illusionQueue.pushIllusionActionFrame(r,t),this.phaseNode.touch(),this.callbacks.onGeneratedActionFrame&&this.callbacks.onGeneratedActionFrame(e)},b.prototype.snapshot=function(){var e=this.frameGenerator?this.frameGenerator.author.userId:a.AdminObserverId,t={frameId:this.frameId,originalFrameId:this.frameId,timestamp:this.timestamp,authorId:e,proxyNode:this.proxyNode,users:this.imageUsers.snapshotUsers()};return this.proxyNodeSerialization.serializeSnapshotFrame(t)},b.prototype.setAllocatedUser=function(e){return i(this,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return[4,this.imageUsers.createImageAuthor(e)];case 1:return(t=r.sent())&&(this.frameGenerator=new A.IllusionFrameGenerator(t,this.actionFrameHelper,this.strategy.includesFrameHash),this.proxyRuntime.runtime.observerId=e.userId,this.branchImageHelper.setObserverId(t.userId),this.proxyRuntime.roomObserver.reportSelfUserIdChanged(e.userId)),[2]}}))}))},b.prototype.removeAllocatedUser=function(){return this.imageUsers.cancelImageAuthorCreating(),this.frameGenerator=null,this.proxyRuntime.runtime.observerId=a.AdminObserverId,this.proxyRuntime.roomObserver.reportSelfUserIdChanged(a.AdminObserverId),this.branchImageHelper.cleanObserverId()},b.prototype.destroy=function(){this.didDestroy||(this.didDestroy=!0,this.phaseNode.touch())},b.prototype.prepareBranchRuntimeForInitiativeModify=function(){if(!this.modifiable||!this.frameGenerator)throw new Error("it's not writable mode");if(this.frameGenerator.author.userId===a.AdminObserverId)throw new Error("admin image is not modifiable");var e=this.proxyRuntime.runtime;e.hasDoubleLines||((new p.ProxyObjectCopier).copyProxyNode(this.proxyNode),e.changeToDoubleLines());var t=e.branchRuntime;return t||e.forkBranchRuntime()},b.prototype.continuousUpdated=function(e){var t,r=this,n=this.proxyRuntime.observerAdapter;return n?n.observeUpdate((function(){t=s.runWithUpdatedSection(r.callbacksWhenUpdate,e)})):t=s.runWithUpdatedSection(this.callbacksWhenUpdate,e),t},b.prototype.createEventFrameBuffer=function(e){var t=n({},this.createFrameHeader(e),{type:g.ActionFrameType.Event,scopeId:e.identifierGenerator.scopeId,scope:e.scope,event:e.event,payload:e.payload});return this.actionFrameHelper.serialize(e.identifierGenerator,t,this.strategy.includesFrameHash)},b.prototype.createEnterFrameBuffer=function(e){var t=n({},this.createFrameHeader(e),{type:g.ActionFrameType.Enter,scopeId:e.identifierGenerator.scopeId,session:e.session,userPayload:e.userPayload,connectedPayload:e.connectedPayload});return this.actionFrameHelper.serialize(e.identifierGenerator,t,this.strategy.includesFrameHash)},b.prototype.createLeaveFrameBuffer=function(e){var t=n({},this.createFrameHeader(e),{type:g.ActionFrameType.Leave,scopeId:e.identifierGenerator.scopeId,payload:e.payload});return this.actionFrameHelper.serialize(e.identifierGenerator,t,this.strategy.includesFrameHash)},b.prototype.createFrameHeader=function(e){var t=e.frameId,r=e.originalFrameId,n=e.authorId;return{frameId:t,originalFrameId:void 0===r?t:r,timestamp:Date.now(),authorId:n,beginObjectId:0}},b.prototype.assertEnableSendActionFrames=function(){if(this.phaseNode.phase===c.ImagePhase.Persistence)throw new Error("can't modify when it is ImagePhase.Persistence")},b);function b(e){var t=this;if(this.modifiable=!0,this.frameGenerator=null,this.didDestroy=!1,this.assertAppendFrameId=function(e){var r=e.frameId,n=t.triggerInvoker.frameId+1;if(n!==r)throw new Error("find unexpected frame id "+r+", wanna "+n)},this.invokeMethod=function(e,r){t.assertEnableSendActionFrames();var n=void 0,i=Date.now(),o=t.frameGenerator,a=o.author.allocateIdentifierGenerator(),s=t.continuousUpdated((function(){var s=t.prepareBranchRuntimeForInitiativeModify().createFrameSection(),c={authorId:o.author.userId,mode:m.CoreFunctionsMode.Illusion,frameSection:s,timestamp:i,identifierGenerator:a};n=t.proxyRuntime.runtime.runWithMagix(c,(function(){var n=t.triggerInvoker.methodNameToId(e),c=o.createIllusionInvokerFrame(n,r,i,a),u=c.frameBuffer,l=c.illusionFrame;try{return t.triggerInvoker.invoke(e,l.parameters)}finally{t.handleActionFrame(u,s)}}))}));return t.callbacks.onModified&&s.didUpdated&&t.callbacks.onModified(),n},this.currentPhase=function(){var e=t.branchImageHelper.illusionQueue,r=e?e.length:0;return t.didDestroy||700<=r?c.ImagePhase.Persistence:0===r?c.ImagePhase.Real:c.ImagePhase.Illusion},this.library=e.library,this.logger=e.logger,this.proxyNode=e.triggerProxy,this.proxyRuntime=e.proxyRuntime,this.actionFrameHelper=this.createActionFrameHelper(e),this.proxyNodeSerialization=e.frameSerializationBundles.proxyNodeSerialization,this.imageUsers=e.imageUsers,this.strategy=e.strategy,this.callbacksWhenUpdate=e.callbacksWhenUpdate,this.callbacks=u.wrapCallbacks(e.callbacks||{}),this.triggerInvoker=new l.TriggerInvoker({library:this.library,imageUsers:this.imageUsers,proxyRuntime:e.proxyRuntime,proxyNode:e.triggerProxy,onEventFire:this.callbacks.onEventFire,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame}),this.triggerInvoker.frameId=e.frameId,this.triggerInvoker.timestamp=e.timestamp,this.proxyRuntime.onInvokedTriggerMethod=this.invokeMethod,e.actionFrames)for(var r=0,n=e.actionFrames;r<n.length;r++){var i=n[r],o=this.proxyNodeSerialization.deserializeActionFrame(i,this.strategy.deserializerVersion,this.strategy.ignoreHashChecking),a=y.idGeneratorWithFrame(o);this.triggerInvoker.appendAction(o,{authorId:o.authorId,timestamp:o.timestamp,mode:m.CoreFunctionsMode.Real,identifierGenerator:a})}this.phaseNode=new h.PhaseNode({phase:c.ImagePhase.Real,getCurrentPhase:this.currentPhase,onPhaseChanged:this.callbacks.onPhaseChanged}),this.branchImageHelper=new d.BranchImageHelper(this.proxyNodeSerialization,this.strategy,this.proxyRuntime,this.logger,this.triggerInvoker,this.assertAppendFrameId,this.callbacks.onReceivedRttReport),this.triggerInvoker.completeInit()}t.ImageImplement=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=r(25),o=r(54),a=r(3),s=r(17),c=(u.prototype.completeInit=function(){this.didCompleteInit=!0},u.prototype.methodNameToId=function(e){return this.methodNameToIdMap[e]},u.prototype.dispatch=function(e,t){for(var r=this.proxyNode.target(),i=n.EventScope.Custom,o=0,a=this.eventHandlers;o<a.length;o++){var s=a[o],c=s.filter,u=s.method;c(e,t,i)&&this.proxyNode.getMethod(u).apply(r,[e,t,i])}},u.prototype.invoke=function(e,t){var r=this.proxyNode.getMethod(e),n=this.proxyNode.target();return r.apply(n,t)},u.prototype.appendAction=function(e,t){var r=this;t.mode!==s.CoreFunctionsMode.Real&&t.mode!==s.CoreFunctionsMode.RealAck||this.imageUsers.updateUserNextFrameId(e.authorId,e.originalFrameId+1);var i=this.proxyRuntime.runtime,o=!i.isForcesOnIllusionLine(t.mode);try{i.runWithMagix(t,(function(){n.isInvokerFrame(e)?r.invokeActionFrame(e):n.isEventFrame(e)?r.handleEventActionFrame(e):n.isEnterFrame(e)?r.handleEnterActionFrame(e):n.isLeaveFrame(e)&&r.handleLeaveActionFrame(e)}))}catch(t){this.onCatchErrorWhenAppendFrame&&this.onCatchErrorWhenAppendFrame(e.authorId,t)}finally{o&&(this.frameId=e.frameId,this.timestamp=e.timestamp),this.onEventFire&&this.dispatchEventIfNeed(e,i.observerId,this.onEventFire)}},u.prototype.invokeActionFrame=function(e){var t=e.methodId,r=e.parameters,n=this.proxyNode,i=this.methodNames[t];n.getMethod(i).apply(n.target(),r)},u.prototype.handleEventActionFrame=function(e){if(void 0!==e.beginGenerationId&&e.scope===n.EventScope.System)switch(e.event){case"Enter":var t=e.authorId,r=e.originalFrameId+1;this.imageUsers.userEnter(t,r,"",void 0);break;case"Leave":this.imageUsers.userLeave(e.authorId)}this.invokeEventCallbacks(e.event,e.payload,e.scope)},u.prototype.handleEnterActionFrame=function(e){var t=e.authorId,r=e.originalFrameId+1,i=e.session,o=e.userPayload;this.imageUsers.userEnter(t,r,i,o),this.invokeEventCallbacks("Enter",e.connectedPayload,n.EventScope.System)},u.prototype.handleLeaveActionFrame=function(e){var t=e.authorId,r=e.payload;this.imageUsers.userLeave(t),this.invokeEventCallbacks("Leave",r,n.EventScope.System)},u.prototype.invokeEventCallbacks=function(e,t,r){for(var n=this.proxyNode.target(),i=0,o=this.eventHandlers;i<o.length;i++){var a=o[i],s=a.filter,c=a.method;s(e,t,r)&&this.proxyNode.getMethod(c).apply(n,[e,t,r])}},u.prototype.dispatchEventIfNeed=function(e,t,r){this.didCompleteInit&&(n.isEventFrame(e)?e.authorId!==t&&r({event:e.event,payload:a.copyDisplayerNode(e.payload),scope:e.scope,authorId:e.authorId}):n.isEnterFrame(e)?r({event:"Enter",payload:a.copyDisplayerNode(e.connectedPayload),scope:n.EventScope.System,authorId:e.authorId}):n.isLeaveFrame(e)&&r({event:"Leave",payload:a.copyDisplayerNode(e.payload),scope:n.EventScope.System,authorId:e.authorId}))},u.findEventPayloadWithDecorators=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(o.isAkkoDecorator(n)&&o.isEventPayload(n.payload))return n.payload}},u);function u(e){this.didCompleteInit=!1,this.proxyRuntime=e.proxyRuntime,this.imageUsers=e.imageUsers,this.proxyNode=e.proxyNode,this.onEventFire=e.onEventFire,this.onCatchErrorWhenAppendFrame=e.onCatchErrorWhenAppendFrame;var t=i.getClassReflection(e.library.rootClass),r=[],n={};for(var o in t.methods){var a=t.methods[o],s=u.findEventPayloadWithDecorators(a.decorators);s&&r.push(Object.freeze({filter:s.eventFilter,method:o}))}for(var c=0;c<t.methodNames.length;++c)n[t.methodNames[c]]=c;this.methodNames=t.methodNames,this.methodNameToIdMap=Object.freeze(n),this.eventHandlers=Object.freeze(r)}t.TriggerInvoker=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);function i(e,t){Object.defineProperty(e,n.ProxyKey,{enumerable:!1,writable:!1,configurable:!0,value:t})}var o=(a.prototype.copyProxyNode=function(e){var t=e.identifier;this.didTouchedSet[t]||(this.didTouchedSet[t]=!0,n.isAkkoObjectProxyNode(e)?this.copyAkkoObjectProxyNode(e):n.isFlatObjectProxyNode(e)?this.copyFlatObjectProxyNode(e):n.isArrayProxyNode(e)&&this.copyArrayProxyNode(e))},a.prototype.copyAkkoObjectProxyNode=function(e){var t=e.realTarget,r=e.struct;if(t){for(var o={},a=0,s=r.serializableValueProperties;a<s.length;a++){var c=s[a];if(c in t){var u=t[c];n.isProxyNode(u)&&this.copyProxyNode(u),o[c]=u}}i(o,e),Object.setPrototypeOf(o,e.struct.classReflection.clazz.prototype),e.illuTarget=o}},a.prototype.copyFlatObjectProxyNode=function(e){var t=e.realTarget;if(t){var r={};for(var o in t){var a=t[o];n.isProxyNode(a)&&this.copyProxyNode(a),r[o]=a}i(r,e),e.illuTarget=r}},a.prototype.copyArrayProxyNode=function(e){var t=e.realTarget;if(t){for(var r=[],o=0;o<t.length;++o)if(o in t){var a=t[o];n.isProxyNode(a)&&this.copyProxyNode(a),r[o]=a}i(r,e),e.illuTarget=r}},a);function a(){this.didTouchedSet={}}t.ProxyObjectCopier=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18),i=r(17),o=r(339),a=r(164),s=(Object.defineProperty(c.prototype,"illusionQueue",{get:function(){return this._illusionQueue},enumerable:!0,configurable:!0}),c.prototype.setObserverId=function(e){if(this._illusionQueue)throw new Error("did set observer ID");this.observerId=e,this._illusionQueue=new o.IllusionQueue(e,this.logger)},c.prototype.cleanObserverId=function(){var e=this;return 0===this._illusionQueue.length?(this.observerId=null,this._illusionQueue=null,Promise.resolve()):new Promise((function(t){e.onIllusionQueueEmpty=function(){e.observerId=null,e._illusionQueue=null,t()}}))},c.prototype.appendActionFramesWithDoubleMode=function(e){for(var t=this,r=this.proxyRuntime.runtime,n=function(e){var n={mode:i.CoreFunctionsMode.Real},s=r.runWithSerialization(n,(function(){return t.frameSerialization.deserializeActionFrame(e,t.strategy.deserializerVersion,t.strategy.ignoreHashChecking)})),c=a.idGeneratorWithFrame(s);o.assertAppendFrameId(s),o.triggerInvoker.appendAction(s,{authorId:s.authorId,mode:i.CoreFunctionsMode.Real,timestamp:s.timestamp,identifierGenerator:c})},o=this,s=0,c=e;s<c.length;s++)n(c[s])},c.prototype.appendActionFrames=function(e){for(var t=this,r=[],o=[],s=!1,c=0,u=e;c<u.length;c++){var l=u[c],p=this._illusionQueue.replaceActionFrame(l);p.isAck||(s=!0);var h={frameBuffer:p.replacedBuffer,frameSection:p.section};s?o.push(h.frameBuffer):r.push(h),this.onReceivedRttReport&&void 0!==p.rttTimeInterval&&this.onReceivedRttReport(p.rttTimeInterval)}var d=this.proxyRuntime.runtime,f=n.currentUpdatedSection();try{f.disable=!0;for(var m=function(e,r){var n={mode:i.CoreFunctionsMode.RealAck,frameSection:r},o=d.runWithSerialization(n,(function(){return t.frameSerialization.deserializeActionFrame(e,t.strategy.deserializerVersion,t.strategy.ignoreHashChecking)})),s=a.idGeneratorWithFrame(o);y.assertAppendFrameId(o),y.triggerInvoker.appendAction(o,{authorId:o.authorId,mode:i.CoreFunctionsMode.RealAck,timestamp:o.timestamp,frameSection:r,identifierGenerator:s}),r.completeACK()},y=this,A=0,g=r;A<g.length;A++){var v=g[A];m(v.frameBuffer,v.frameSection)}}finally{f.disable=!1}0<o.length&&(d.branchRuntime.syncTwoBranches(),d.releaseBranchRuntime(),this.appendActionFramesWithDoubleMode(o),0<this._illusionQueue.length&&this.rebuildIllusionBranch()),d.branchRuntime&&0===this._illusionQueue.length&&d.hasDoubleLines&&(d.branchRuntime.syncTwoBranches(),d.releaseBranchRuntime()),this.onIllusionQueueEmpty&&0===this._illusionQueue.length&&(this.onIllusionQueueEmpty(),this.onIllusionQueueEmpty=void 0)},c.prototype.rebuildIllusionBranch=function(){var e=this,t=this.proxyRuntime.runtime,r=t.forkBranchRuntime(),n=this._illusionQueue;this._illusionQueue=new o.IllusionQueue(this.observerId,this.logger),n.forFrames((function(n,o){var s=o.takeCreatedProxyNodes(),c=r.createFrameSection(s);e._illusionQueue.pushIllusionActionFrame(n,c);var u={mode:i.CoreFunctionsMode.IllusionRebuild,frameSection:c},l=t.runWithSerialization(u,(function(){return e.frameSerialization.deserializeActionFrame(n.frameBuffer,e.strategy.deserializerVersion,e.strategy.ignoreHashChecking)})),p=a.idGeneratorWithFrame(l);e.triggerInvoker.appendAction(l,{authorId:l.authorId,mode:i.CoreFunctionsMode.IllusionRebuild,timestamp:l.timestamp,frameSection:c,identifierGenerator:p}),c.completeRebuild()}))},c);function c(e,t,r,n,i,o,a){this.frameSerialization=e,this.strategy=t,this.proxyRuntime=r,this.logger=n,this.triggerInvoker=i,this.assertAppendFrameId=o,this.onReceivedRttReport=a,this.observerId=null,this._illusionQueue=null}t.BranchImageHelper=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=(Object.defineProperty(o.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),o.prototype.pushIllusionActionFrame=function(e,t){this.queue.push({frameId:e.originalFrameId,timestamp:e.timestamp,picker:e,section:t})},o.prototype.forFrames=function(e){for(var t=0,r=this.queue;t<r.length;t++){var n=r[t],i=n.frameId,o=n.timestamp;e(n.picker,n.section,i,o)}},o.prototype.replaceActionFrame=function(e){var t,r=new n.FramePicker(e),i=this.isAckFrame(r),o=void 0,a=void 0;if(i){var s=this.takeIllusionFrame(r.frameId,r.originalFrameId),c=s.picker;o=Date.now()-s.timestamp,c.frameId=r.frameId,c.originalFrameId=r.originalFrameId,c.timestamp=r.timestamp,t=c.frameBuffer,a=s.section}else{if(r.type===n.ActionFrameType.Ack)throw new Error("received others' ACK frame");t=e}return{replacedBuffer:t,isAck:i,rttTimeInterval:o,section:a}},o.prototype.takeIllusionFrame=function(e,t){var r=this.queue.findIndex((function(e){return e.frameId===t}));if(0<r&&this.logger.warn("received frame can't touch first illusion frame"),-1===r)throw new Error("not found frameId "+t+" match to ACK frameId");return this.queue.splice(r,1)[0]},o.prototype.isAckFrame=function(e){switch(e.type){case n.ActionFrameType.Ack:case n.ActionFrameType.Invoker:return e.authorId===this.observerId;case n.ActionFrameType.Event:if(e.scope===n.EventScope.Custom)return e.authorId===this.observerId}return!1},o);function o(e,t){this.observerId=e,this.logger=t,this.queue=[]}t.IllusionQueue=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(25),i=r(341),o=r(158),a=r(39),s=r(85),c=r(81),u=(Object.defineProperty(l.prototype,"appIdentifier",{get:function(){return this.library.appIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"appVersion",{get:function(){return this.library.appVersion},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"appHash",{get:function(){return this.library.appHash},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"akkoVersion",{get:function(){return this.library.akkoVersion},enumerable:!0,configurable:!0}),l.prototype.createImageWithSnapshot=function(e){return this.imageFactory.createWithSnapshot(e)},l.prototype.createImageWithParameters=function(e){return this.imageFactory.createWithParameters(e)},l.prototype.createAccessUpdaterSerialization=function(){return new a.AccessUpdaterSerialization(this.library)},l.prototype.createMagix=function(e){if(!this.magixFactory)throw new Error("expect serverOriginsFetcher");return this.magixFactory.createMagix(e)},l.prototype.createReconstructor=function(e){if(!this.playerFactory)throw new Error("expect serverOriginsFetcher");return this.playerFactory.createReconstructor(e)},l);function l(e,t){var r=!!t.enableAnimationFrame,a=(new i.ResourceManagerFactory).create({convertIdToUrl:t.convertIdToUrl}),u=n.getLibrary(e);if(!u)throw new Error("can't find library from "+e.name+". it's not root class");if(this.library=u,this.imageFactory=new o.ImageFactory({library:u,resource:a,observerAdapter:t.observerAdapter,escapeObjectFilter:t.escapeObjectFilter,jsxFactory:t.jsxFactory}),t.serverOriginsFetcher){var l={enableAnimationFrame:r},p=s.wholeReconnectionOptions(t.reconnectionOptions);this.magixFactory=new c.MagixFactory(this.imageFactory,t.serverOriginsFetcher,t.observerAdapter,p,t.netStateAdapter,l),this.playerFactory=new c.ReconstructorFactory(this.imageFactory,t.serverOriginsFetcher,r,t.observerAdapter)}}t.AkkoApp=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(342))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(343),i=(o.prototype.create=function(e){return void 0===e&&(e={}),new n.ResourceManagerImplement(e)},o);function o(){}t.ResourceManagerFactory=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.wrapCallbacks=function(e){for(var t={},r=function(r){var n=e[r];t[r]=n||function(){throw new Error("can't call. "+r+" not register")}},n=0,o=i.callbackKeys;n<o.length;n++)r(o[n]);return Object.freeze(t)},i.prototype.convertIdToUrl=function(e){return this.callbacks.convertIdToUrl(e)},i.callbackKeys=Object.freeze(["convertIdToUrl"]),i);function i(e){this.callbacks=Object.freeze(this.wrapCallbacks(e))}t.ResourceManagerImplement=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.getter,c=a.caller,u=r(59),l=r(42),p=(i(h,o=a.baseClass()),h.prototype.pointHitTest=function(e,t){return(e=(e-s(this,"circleCenterX"))/s(this,"width")*2)*e+(t=(t-s(this,"circleCenterY"))/s(this,"height")*2)*t<=1},h.prototype.rectHitTest=function(e,t,r,n){var i=this,o=!1,a=!1;if(c(l.RectangleTester,"iterate",[e,t,r,n,function(e,t){c(i,"pointHitTest",[e,t])?o=!0:a=!0}]),o&&a)return s(u.RectangleTestingResult,"Cross");if(o)return s(u.RectangleTestingResult,"IncludeRectangle");if(a){for(var p=c(l.RectangleTester,"allPoints",[e,t,r,n]),h=0;h<s(p,"length");++h){var d=s(p,h),f=s(p,(h+1)%s(p,"length"));if(s(d,"x")===s(f,"x")){if(c(this,"checkCrossVertical",[s(d,"x"),s(d,"y"),s(f,"y")]))return s(u.RectangleTestingResult,"Cross")}else if(c(this,"checkCrossHorizontal",[s(d,"y"),s(d,"x"),s(f,"x")]))return s(u.RectangleTestingResult,"Cross")}if(c(l.RectangleTester,"testPoint",[e,t,r,n,s(this,"circleCenterX"),s(this,"circleCenterY")]))return s(u.RectangleTestingResult,"IncludeByRectangle")}return s(u.RectangleTestingResult,"Disjoint")},h.prototype.checkCrossVertical=function(e,t,r){return e=(e-s(this,"circleCenterX"))/s(this,"width")*2,t=(t-s(this,"circleCenterY"))/s(this,"height")*2,r=(r-s(this,"circleCenterY"))/s(this,"height")*2,c(this,"checkCrossGeometrical",[c(Math,"abs",[e]),t,r])},h.prototype.checkCrossHorizontal=function(e,t,r){return e=(e-s(this,"circleCenterY"))/s(this,"height")*2,t=(t-s(this,"circleCenterX"))/s(this,"width")*2,r=(r-s(this,"circleCenterX"))/s(this,"width")*2,c(this,"checkCrossGeometrical",[c(Math,"abs",[e]),t,r])},h.prototype.checkCrossGeometrical=function(e,t,r){if(1<e)return!1;var n=c(Math,"sqrt",[1-e*e]),i=c(Math,"max",[t,r]),o=c(Math,"min",[t,r]);return n<=i&&o<=n||-n<=i&&o<=-n},h);function h(e,t,r,n){var i=o.call(this)||this;return i.circleCenterX=e,i.circleCenterY=t,i.width=r,i.height=n,i}t.EllipseTester=p,a.declareClass({classId:6,clazz:p}),a=null},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0).__context("module"),o=i.getter,a=i.creator,s=i.setter,c=i.caller,u=i.unwrapper;function l(e,t){var r=a({x:-t,y:e}),n=c(Math,"sqrt",[o(r,"x")*o(r,"x")+o(r,"y")*o(r,"y")]);return s(r,"x",o(r,"x")/n),s(r,"y",o(r,"y")/n),r}t.pointsWithDouglasPeucker=function(e){for(var t=o(e,"points"),r=o(e,"threshold"),i=o(e,"beginIndex"),p=o(e,"endIndex"),h=a([]),d=a([]),f=i;f<=p;++f)s(d,f,!1);for(function e(t,r,n,i,a){var u,p,h;if(2<a-i+1){for(var d=o(t,i),f=o(t,a),m=l(o(f,"x")-o(d,"x"),o(f,"y")-o(d,"y")),y=-1,A=o(Number,"NEGATIVE_INFINITY"),g=i+1;g<a;++g){var v=o(t,g),b=(u=d,p=m,(o(h=v,"x")-o(u,"x"))*o(p,"x")+(o(h,"y")-o(u,"y"))*o(p,"y")),P=c(Math,"abs",[b]);A<P&&(y=g,A=P)}if(n<A)e(t,r,n,i,y),e(t,r,n,y,a);else for(g=i+1;g<a;++g)s(r,g,!0)}}(t,d,r,i,p),f=i;f<=p;++f)o(d,f)||c(h,"push",[a(n({},u(o(t,f))))]);return h},i=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.setter,c=a.caller,u=a.getter,l=a.unwrapper,p=r(23),h=(i(d,o=a.wrapSuperClass(p.Gesture)),Object.defineProperty(d.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),d.prototype.onClick=function(e){c(this,"removeHitComponents",[e])},d.prototype.onDrag=function(e){c(this,"removeHitComponents",[e])},d.prototype.removeHitComponents=function(e){for(var t=u(e,"hitTestIdentifies"),r=0,n=l(c(u(u(this,"context"),"scene"),"editablesWithHitIdentifies",[t]));r<n.length;r++){var i=n[r];c(u(u(this,"context"),"scene"),"removeComponent",[i])}},d);function d(e){var t=o.call(this)||this;return s(t,"context",e),t}t.Eraser=h,a.declareClass({classId:15,clazz:h,superClass:p.Gesture}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.setter,c=a.getter,u=a.wrapper,l=a.caller,p=a.creator,h=a.jsxUnwrapper,d=r(0),f=r(23),m=r(14),y=r(22),A=(i(g,o=a.wrapSuperClass(f.Gesture)),Object.defineProperty(g.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),g.prototype.onDraggingStateChanged=function(e){var t=c(e,"x"),r=c(e,"y");c(this,"isDragging")?(s(this,"paintingRectangleShape",u(new b(c(this,"context")))),s(c(this,"paintingRectangleShape"),"originX",t),s(c(this,"paintingRectangleShape"),"originY",r),l(c(c(this,"context"),"scene"),"addComponent",[c(this,"paintingRectangleShape")]),s(this,"beginPoint",p({x:t,y:r}))):(l(c(this,"paintingRectangleShape"),"completePainting",[]),s(this,"paintingRectangleShape",null),s(this,"beginPoint",null))},g.prototype.onDrag=function(e){var t=c(e,"x"),r=c(e,"y"),n=c(this,"paintingRectangleShape");s(n,"originX",l(Math,"min",[t,c(c(this,"beginPoint"),"x")])),s(n,"originY",l(Math,"min",[r,c(c(this,"beginPoint"),"y")])),s(n,"directionX",c(c(this,"beginPoint"),"x")-c(n,"originX")==0?1:0),s(n,"directionY",c(c(this,"beginPoint"),"y")-c(n,"originY")==0?1:0),s(n,"width",l(Math,"abs",[t-c(c(this,"beginPoint"),"x")])),s(n,"height",l(Math,"abs",[r-c(c(this,"beginPoint"),"y")]))},g.prototype.onDestroy=function(){c(this,"paintingRectangleShape")&&l(c(this,"paintingRectangleShape"),"completePainting",[])},g);function g(e){var t=o.call(this)||this;return t.paintingRectangleShape=null,t.beginPoint=null,t.isShiftPress=!1,s(t,"context",e),t}t.ArrowAppliance=A;var v,b=(i(P,v=a.wrapSuperClass(m.Editable)),Object.defineProperty(P.prototype,"selectable",{get:function(){return!c(this,"isPainting")},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"hitTestingBoxMargin",{get:function(){return c(c(this,"state"),"strokeWidth")/2},enumerable:!0,configurable:!0}),P.prototype.completePainting=function(){s(this,"isPainting",!1)},P.prototype.pointHitTestContent=function(e,t,r){var n=u(new y.PolylineTester),i=p({x:c(this,"directionX")?0:c(this,"width"),y:c(this,"directionY")?0:c(this,"height")}),o=p({x:c(this,"directionX")?c(this,"width"):0,y:c(this,"directionY")?c(this,"height"):0});return l(n,"pushPoint",[i]),l(n,"pushPoint",[o]),l(n,"hitTest",[r+12,e,t])},P.prototype.renderSvgContent=function(){var e=p({x:c(this,"directionX")?0:c(this,"width"),y:c(this,"directionY")?0:c(this,"height")}),t=p({x:c(this,"directionX")?c(this,"width"):0,y:c(this,"directionY")?c(this,"height"):0}),r=c(c(this,"state"),"strokeColor"),n=c(r,0),i=c(r,1),o=c(r,2);return d.createElement("g",null,d.createElement("defs",null,d.createElement("marker",{id:h("arrow"+c(this,"key")),markerWidth:"5",markerHeight:"6",refX:"3",refY:"3",orient:"auto"},d.createElement("polyline",{points:"0,0 3,3 0,6",fill:"none",stroke:h("rgb("+n+","+i+","+o+")"),key:h(c(this,"key")),strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"1"}))),d.createElement("line",{x1:h(c(e,"x")),y1:h(c(e,"y")),x2:h(c(t,"x")),y2:h(c(t,"y")),stroke:h("rgb("+n+","+i+","+o+")"),key:h(c(this,"key")),strokeWidth:"4",markerEnd:h("url(#arrow"+c(this,"key")+")"),fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}))},P);function P(e){var t=v.call(this,e)||this;return t.originX=0,t.originY=0,t.width=0,t.height=0,t.isPainting=!0,t.directionX=0,t.directionY=0,s(t,"state",l(e,"getMemberState",[])),t}a.declareClass({classId:10,clazz:A,superClass:f.Gesture}),a.declareClass({classId:11,clazz:b,superClass:m.Editable}),a=null},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(0).__context("module"),s=a.setter,c=a.getter,u=a.caller,l=a.wrapper,p=a.creator,h=r(0),d=r(92),f=r(23),m=r(44),y=(i(A,o=a.wrapSuperClass(f.Gesture)),Object.defineProperty(A.prototype,"fixedCursorInScenePoint",{get:function(){},enumerable:!0,configurable:!0}),A.prototype.onMemberStateChanged=function(e,t){if(c(e,"strokeColor")!==c(t,"strokeColor")||c(e,"textSize")!==c(t,"textSize")){var r=u(d,"textareaEditedBy",[c(c(this,"context"),"scene"),u(h,"getAuthorId",[])]);r&&s(r,"textSize",c(e,"textSize"))}},A.prototype.onClick=function(e){var t=c(e,"x"),r=c(e,"y");u(d,"releaseTextareaEditedBy",[c(c(this,"context"),"scene"),u(h,"getAuthorId",[])]);var n=l(new m.TextareaShape(c(this,"context"),t,r));s(n,"editedBy",u(h,"getAuthorId",[])),s(n,"textSize",c(u(c(this,"context"),"getMemberState",[]),"textSize")),u(c(c(this,"context"),"scene"),"addComponent",[n]),u(c(this,"context"),"setMemberState",[p({currentApplianceName:"selector"})])},A);function A(e){var t=o.call(this)||this;return s(t,"context",e),t}t.TextAppliance=y,a.declareClass({classId:23,clazz:y,superClass:f.Gesture}),a=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(355))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),i=r(356),o=(a.prototype.observeUpdate=function(e){n.runInAction(e)},a.prototype.create=function(e){return new i.MobXObserver(e)},a);function a(){}t.MobXObserverAdapter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),i=r(0),o=(a.prototype.reportChanged=function(e,t,r){var n=this.atoms[e];if(n&&n.reportChanged(),this.iterationAtom)switch(r){case i.UpdateEventKind.Removed:case i.UpdateEventKind.Inserted:this.iterationAtom.reportChanged()}n&&r===i.UpdateEventKind.Removed&&delete this.atoms[e]},a.prototype.reportObservedIteration=function(){var e=this.iterationAtom;(e=e||(this.iterationAtom=n.createAtom(this.debugName))).reportObserved()},a.prototype.reportObservedKey=function(e){var t=this.atoms[e];(t=t||(this.atoms[e]=n.createAtom(this.debugName))).reportObserved()},a);function a(e){this.atoms={},this.debugName=e}t.MobXObserver=o},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.BoundlessEventKind||(t.BoundlessEventKind={})).MouseDown="MouseDown",n.MouseMove="MouseMove",n.MouseUp="MouseUp",n.MouseLeave="MouseLeave",n.MouseWheel="MouseWheel",n.TouchStart="TouchStart",n.TouchMove="TouchMove",n.TouchEnd="TouchEnd",n.TouchCancel="TouchCancel",n.SortedTouchStart="SortedTouchStart",n.SortedTouchMove="SortedTouchMove",n.SortedTouchEnd="SortedTouchEnd",n.SortedTouchCancel="SortedTouchCancel",n.KeyDown="KeyDown",n.KeyUp="KeyUp"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(181);(n=t.DeviceType||(t.DeviceType={})).Desktop="desktop",n.Touch="touch",n.Surface="surface";var o=(a.prototype.createScene=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new i.SceneImplement(this.deviceType,e)},a);function a(e){this.deviceType=e}t.Boundless=o},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(96),i=(o.prototype.addAnimation=function(e,t){var r=this.animations[e],i=!1;r||(r=this.animations[e]=[],this.animationPriorities.push(e),this.animationPriorities.sort(),i=1===this.animationPriorities.length),n.arrayPut(r,t),i&&null===this.animationId&&(this.animationId=window.requestAnimationFrame(this.onAnimationFrame))},o.prototype.removeAnimation=function(e,t){var r=this.animations[e];r&&(n.arrayRemove(r,t),0===r.length&&(delete this.animations[e],n.arrayRemove(this.animationPriorities,e),0!==this.animationPriorities.length||this.isInAnimationFrame||null===this.animationId||(window.cancelAnimationFrame(this.animationId),this.animationId=null)))},o.prototype.addAfterAnimationsInvoker=function(e){n.arrayPut(this.afterAnimationsInvokers,e)},o.prototype.removeAfterAnimationsInvoker=function(e){n.arrayRemove(this.afterAnimationsInvokers,e)},o);function o(){var e=this;this.animationPriorities=[],this.animations={},this.afterAnimationsInvokers=[],this.animationId=null,this.isInAnimationFrame=!1,this.onAnimationFrame=function(){try{e.isInAnimationFrame=!0;for(var t=0,r=e.animationPriorities;t<r.length;t++)for(var n=r[t],i=0,o=e.animations[n].slice();i<o.length;i++)(0,o[i])();for(var a=0,s=e.afterAnimationsInvokers.slice();a<s.length;a++)(0,s[a])();0<e.animationPriorities.length?e.animationId=window.requestAnimationFrame(e.onAnimationFrame):e.animationId=null}finally{e.isInAnimationFrame=!1}}}t.AnimationFrames=i},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(363),o=r(185),a=(s.prototype.create=function(e,t,r){return new c(e,this.configurations.slice(),t,r)},s);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.configurations=Object.freeze(e.map((function(e){return Object.freeze(n({},e))})))}t.SpaceSpringFactory=a;var c=(Object.defineProperty(u.prototype,"point",{get:function(){return this._point},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isPlayingAnimation",{get:function(){return!!this.playingAnimation},enumerable:!0,configurable:!0}),u.prototype.moveRightNow=function(e){this.guider&&this.guider.moveRightNow(e),u.setPoint(this.idealPoint,e),u.setPoint(this._point,e),u.setPointZero(this.velocity),this.playingAnimation&&(this.playingAnimation.release(),this.playingAnimation=null),this.completeTick=!1},u.prototype.moveTo=function(e){this.guider?this.guider.moveTo(e):this.updateIdealPoint(e)},u.prototype.moveToAndChangeCoordinate=function(e,t){for(var r=0;r<this._point.length;++r)this._point[r]+=e[r];this.guider?this.guider.moveToAndChangeCoordinate(e,t):this.updateIdealPoint(t)},u.prototype.stop=function(){u.setPoint(this.idealPoint,this._point),u.setPointZero(this.velocity),this.playingAnimation&&(this.playingAnimation.release(),this.playingAnimation=null),this.completeTick=!1},u.prototype.executePhysicalSimulate=function(){for(var e=this.squareDistanceToIdealPoint(),t=this.velocityDamping(e),r=e>this.noPedesisRadius*this.noPedesisRadius,n=0;n<this._point.length;++n){var i=this.idealPoint[n]-this._point[n],o=this.configuration.kDistance*i;if(this.velocity[n]+=o,r&&this.gaussian){var a=this.gaussian.ppf(Math.random());.5<=Math.random()&&(a=-a),this.velocity[n]+=a}this._point[n]+=this.velocity[n],this.velocity[n]*=1-t}},u.prototype.velocityDamping=function(e){for(var t=0,r=0;r<this.velocity.length;++r)t+=this.velocity[r]*this.velocity[r];var n=this.configuration,i=n.heavyDampingRadius,o=n.heavyDampingSpeed;return t<o*o||i*i<e?this.configuration.velocityDamping:Math.min(1,t*this.configuration.velocityDamping)},u.prototype.squareDistanceToIdealPoint=function(){for(var e=0,t=0;t<this.velocity.length;++t){var r=this.idealPoint[t]-this._point[t];e+=r*r}return e},u.prototype.shouldContinueMoving=function(){for(var e=0;e<this._point.length;++e){if(Math.abs(this._point[e]-this.idealPoint[e])>this.configuration.matchingDistance)return!0;if(Math.abs(this.velocity[e])>this.configuration.zeroSpeed)return!0}return!1},u.setPoint=function(e,t){for(var r=0;r<e.length;++r)e[r]=r in t?t[r]:0},u.setPointZero=function(e){for(var t=0;t<e.length;++t)e[t]=0},u.noPedesisRadiusRate=2.7,u);function u(e,t,r,n){var a=this;this.priority=e,this._point=r,this.onPointUpdate=n,this.completeTick=!1,this.playingAnimation=null,this.updateIdealPoint=function(e){u.setPoint(a.idealPoint,e),!a.playingAnimation&&a.shouldContinueMoving()&&(a.playingAnimation=o.animation.createAnimation(a.priority,a.onTick)),a.completeTick=!1},this.onTick=function(){a.completeTick?a.stop():(a.executePhysicalSimulate(),a.onPointUpdate&&a.onPointUpdate(a._point),a.shouldContinueMoving()||(a.completeTick=!0))},this.configuration=t.splice(0,1)[0],this._point=r.slice(),this.idealPoint=r.slice(),this.velocity=r.map((function(){return 0})),0<t.length&&(this.guider=new u(this.priority,t,r,this.updateIdealPoint));var s=this.configuration.pedesisSpeedMean,c=this.configuration.pedesisSpeedVariance;this.gaussian=0!==s&&0!==c?i.gaussian(s,c):null,this.noPedesisRadius=(s+Math.sqrt(c))*u.noPedesisRadiusRate}t.SpaceSpring=c},function(e,t,r){"use strict";function n(e){var t=Math.abs(e),r=1/(1+t/2),n=r*Math.exp(-t*t-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(r*(.27886807+r*(r*(1.48851587+r*(.17087277*r-.82215223))-1.13520398))-.18628806)))));return 0<=e?n:2-n}function i(e,t){return new a(e,t)}function o(e,t){return i(t/e,1/e)}Object.defineProperty(t,"__esModule",{value:!0}),t.gaussian=i;var a=(s.prototype.pdf=function(e){var t=this.standardDeviation*Math.sqrt(2*Math.PI);return Math.exp(-Math.pow(e-this.mean,2)/(2*this.variance))/t},s.prototype.cdf=function(e){return.5*n(-(e-this.mean)/(this.standardDeviation*Math.sqrt(2)))},s.prototype.ppf=function(e){return this.mean-this.standardDeviation*Math.sqrt(2)*function(e){if(2<=e)return-100;if(e<=0)return 100;for(var t=e<1?e:2-e,r=Math.sqrt(-2*Math.log(t/2)),i=-.70711*((2.30753+.27061*r)/(1+r*(.99229+.04481*r))-r),o=0;o<2;o++){var a=n(i)-t;i+=a/(1.1283791670955126*Math.exp(-i*i)-i*a)}return e<1?i:-i}(2*e)},s.prototype.mul=function(e){if("number"==typeof e)return this.scale(e);var t=1/this.variance,r=1/e.variance;return o(t+r,t*this.mean+r*e.mean)},s.prototype.div=function(e){if("number"==typeof e)return this.scale(1/e);var t=1/this.variance,r=1/e.variance;return o(t-r,t*this.mean-r*e.mean)},s.prototype.add=function(e){return i(this.mean+e.mean,this.variance+e.variance)},s.prototype.sub=function(e){return i(this.mean-e.mean,this.variance+e.variance)},s.prototype.scale=function(e){return i(this.mean*e,this.variance*e*e)},s);function s(e,t){this.mean=e,this.variance=t,this.standardDeviation=Math.sqrt(t)}t.Gaussian=a},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=r(365),a=r(388),s=r(389),c=r(190),u=r(63),l=r(100),p=r(64),h=(Object.defineProperty(d.prototype,"className",{get:function(){return this._className},set:function(e){this._className!==e&&(this._className=e,this.screenInformationUpdatedDispatcher.dispatch(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"wrappedComponents",{get:function(){return this._wrappedComponents},set:function(e){this._wrappedComponents=Object.freeze(e.slice()),this.updater&&(this.updater.wrappedComponents=this._wrappedComponents)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"divElement",{get:function(){return this.updater&&this.updater.divElement},set:function(e){this.divElement!==e&&(this.updater&&(this.updater.release(),this.updater=null),this.updater=e?new s.ScreenUpdater(this,this.layouts,e,this._wrappedComponents):null,this._eventProxy&&this._eventProxy.bindDivElement(e))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"eventProxy",{get:function(){return this._eventProxy||(this._eventProxy=new o.EventProxyImplement(this,this.eventInterrupter),this._eventProxy.bindDivElement(this.divElement)),this._eventProxy},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"context",{get:function(){return this._context},set:function(e){this._context!==e&&(this._context=e,this.contextUpdatedDispatcher.dispatch(e))},enumerable:!0,configurable:!0}),d.prototype.bindCameraman=function(e){return new o.CameramanImplement(this,this.eventProxy,e)},d.prototype.convertPointToScreen=function(e,t){return{x:(e-this.centerX)*this.scale+this._width/2,y:(t-this.centerY)*this.scale+this._height/2}},d.prototype.convertPointToScene=function(e,t){return{x:(e-this._width/2)/this.scale+this.centerX,y:(t-this._height/2)/this.scale+this.centerY}},d.prototype.layoutComponentWithTarget=function(e){return this.updater?this.updater.getLayoutComponent(e):void 0},d.prototype.resize=function(e,t){var r;this._width===e&&this._height===t||(this._width=e,this._height=t,r=this.adaptedRectangle?this.cameraWithAdaptRectangle(this.adaptedRectangle,this.adaptedRectangle.adapterMode):this.camera,this.updateCamera(n({},r,{animationMode:i.AnimationMode.Immediately})),this.dispatchUpdatedEvent(r))},d.prototype.cameraWithAdaptRectangle=function(e,t){var r=e.originX+e.width/2,n=e.originY+e.height/2,o=0===e.width?1:this._width/e.width,a=0===e.height?1:this._height/e.height;switch(t){case i.RectangleAdapterMode.Centering:return{centerX:r,centerY:n,scale:Math.min(o,a)};case i.RectangleAdapterMode.Tailor:return{centerX:r,centerY:n,scale:Math.max(o,a)}}},d.prototype.adaptRectangle=function(e){this.updateCamera(n({},this.cameraWithAdaptRectangle(e,e.adapterMode),{animationMode:e.animationMode})),this.adaptedRectangle=Object.freeze({originX:e.originX,originY:e.originY,width:e.width,height:e.height,adapterMode:e.adapterMode})},d.prototype.transformCamera=function(e){this.adaptedRectangle=null,this.updateCamera(e)},d.prototype.updateCamera=function(e){var t=c.numberWithDefault(e.centerX,this.centerX),r=c.numberWithDefault(e.centerY,this.centerY),n=c.numberWithDefault(e.scale,this.scale);if(t!==this.centerX||r!==this.centerY||n!==this.scale){this.centerX=t,this.centerY=r,this.scale=n;var o=this.camera;switch(e.animationMode){case i.AnimationMode.Immediately:this.dispatchUpdatedEvent(o),this.cameraAnimation.moveToRightNow(o);break;case i.AnimationMode.Continuous:this.cameraAnimation.moveTo(o)}}},d.prototype.dispatchUpdatedEvent=function(e){var t=l.convertVisionRectangle(e,this._width,this._height);this.screenUpdatedDispatcher.dispatch({width:this._width,height:this._height,camera:e,visionRectangle:t}),this.cameraUpdatedDispatcher.dispatch(e)},Object.defineProperty(d.prototype,"camera",{get:function(){return{centerX:this.centerX,centerY:this.centerY,scale:this.scale}},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"visionRectangle",{get:function(){return l.convertVisionRectangle(this.camera,this._width,this._height)},enumerable:!0,configurable:!0}),d.prototype.hitTest=function(e,t,r){var n=[],i=this.convertPointToScene(e,t);if(this.updater)for(var o=this.updater.getVisibleComponents(),a=this.updater.momentCamera,s=r/a.scale,c=0,u=o;c<u.length;c++){var l=u[c];this.isHitComponent(l,i,a,s)&&n.push(l.id)}return n.reverse()},d.prototype.isHitComponent=function(e,t,r,n){var i=t.x,o=t.y,a=l.getMarginOnScene(e,r.scale),s=Math.max(a.left,n),c=Math.max(a.right,n),u=Math.max(a.top,n),h=Math.max(a.bottom,n),d=e.originX-s,f=e.originY-u,m=e.width+s+c,y=e.height+u+h;if(p.RectangleTesting.testPoint(d,f,m,y,i,o)){var A=e.render.hitTest;return!A||A.call(e.render,this,e,i,o,n)}return!1},d.prototype.addCameraUpdatedListener=function(e){this.cameraUpdatedDispatcher.addListener(e)},d.prototype.removeCameraUpdatedListener=function(e){this.cameraUpdatedDispatcher.removeListener(e)},d.prototype.addRenderErrorCatchedListener=function(e){this.renderErrorCatchedDispatcher.addListener(e)},d.prototype.removeRenderErrorCatchedListener=function(e){this.renderErrorCatchedDispatcher.removeListener(e)},d.prototype.addContextUpdateListener=function(e){this.contextUpdatedDispatcher.addListener(e)},d.prototype.removeContextUpdateListener=function(e){this.contextUpdatedDispatcher.removeListener(e)},d.prototype.addScreenUpdatedListener=function(e){this.screenUpdatedDispatcher.addListener(e)},d.prototype.removeScreenUpdatedListener=function(e){this.screenUpdatedDispatcher.removeListener(e)},d.prototype.addScreenInformationUpdatedListener=function(e){this.screenInformationUpdatedDispatcher.addListener(e)},d.prototype.removeScreenInformationUpdatedListener=function(e){this.screenInformationUpdatedDispatcher.removeListener(e)},d);function d(e){var t=this;this.screenUpdatedDispatcher=new u.EventDispatcher,this.screenInformationUpdatedDispatcher=new u.EventDispatcher,this.cameraUpdatedDispatcher=new u.EventDispatcher,this.renderErrorCatchedDispatcher=new u.EventDispatcher,this.contextUpdatedDispatcher=new u.EventDispatcher,this.centerX=0,this.centerY=0,this.scale=1,this.adaptedRectangle=null,this.updater=null,this.deviceType=e.scene.deviceType,this.scene=e.scene,this._context=e.context,this._className=e.className,this._width=e.width,this._height=e.height,this.cameraAnimation=new a.CameraAnimation(this.camera,(function(e){return t.dispatchUpdatedEvent(e)})),this._wrappedComponents=Object.freeze(e.wrappedComponents.slice()),this.eventInterrupter=e.eventInterrupter;for(var r=[],n=0,i=this.scene.layouts;n<i.length;n++){var o=i[n];r.push(o)}this.layouts=Object.freeze(r)}t.ScreenImplement=h},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(366)),n(r(378))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(367),i=r(63),o=r(186),a=(s.prototype.bindDivElement=function(e){e!==(this.binder?this.binder.divElement:null)&&(this.binder&&this.binder.release(),this.binder=e?new n.EventBinder(this.screen.deviceType,e,this):null)},Object.defineProperty(s.prototype,"disable",{get:function(){return this.continuityNode.disable},set:function(e){this.continuityNode.disable=e},enumerable:!0,configurable:!0}),s.prototype.toPointInScene=function(e,t){return this.screen.convertPointToScene(e,t)},s.prototype.willInterruptEvent=function(e,t){if(!this.disable&&this.eventInterrupter(e))return!0;if(t){var r=this.screen.layoutComponentWithTarget(t);if(r)return this.screen.scene.willInterruptEvent(this.screen,r.componentId,r.layout,e)}return!1},s.prototype.addListener=function(e){this.eventDispatcher.addListener(e)},s.prototype.removeListener=function(e){this.eventDispatcher.removeListener(e)},s);function s(e,t){var r=this;this.eventDispatcher=new i.EventDispatcher,this.binder=null,this.fireEvent=function(e){var t=r.continuityNode.interruptEvent(e);t&&r.eventDispatcher.dispatch(t)},this.screen=e,this.eventInterrupter=t,this.continuityNode=o.createContinuityNode((function(e){return r.eventDispatcher.dispatch(e)}))}t.EventProxyImplement=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(368))},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=r(369),a=r(370),s=r(371),c=r(372),u=(l.prototype.createEventParamMap=function(e){var t={};switch(e){case i.DeviceType.Desktop:t=n({},t,{keyup:{method:this.keyboardEventHandler.onKeyUp,element:document.body},keydown:{method:this.keyboardEventHandler.onKeyDown,element:document.body},mousedown:{method:this.mouseEventHandler.onMouseDown},mousemove:{method:this.mouseEventHandler.onMouseMove,element:document},mouseup:{method:this.mouseEventHandler.onMouseUp,element:document},mouseleave:{method:this.mouseEventHandler.onMouseLeave},wheel:{method:this.wheelEventHandler.onMouseWheel},gesturestart:{method:this.wheelEventHandler.onGestureStart,element:document.body},gesturechange:{method:this.wheelEventHandler.onGestureChange,element:document.body},gestureend:{method:this.wheelEventHandler.onGestureEnd,element:document.body}});break;case i.DeviceType.Touch:t=n({},t,{touchstart:{method:this.touchEventHandler.onTouchStart},touchmove:{method:this.touchEventHandler.onTouchMove},touchend:{method:this.touchEventHandler.onTouchEnd},touchcancel:{method:this.touchEventHandler.onTouchCancel}});break;case i.DeviceType.Surface:t=n({},t,{keyup:{method:this.keyboardEventHandler.onKeyUp,element:document.body},keydown:{method:this.keyboardEventHandler.onKeyDown,element:document.body},mousedown:{method:this.mouseEventHandler.onMouseDown},mousemove:{method:this.mouseEventHandler.onMouseMove,element:document},mouseup:{method:this.mouseEventHandler.onMouseUp,element:document},mouseleave:{method:this.mouseEventHandler.onMouseLeave},wheel:{method:this.wheelEventHandler.onMouseWheel},gesturestart:{method:this.wheelEventHandler.onGestureStart,element:document.body},gesturechange:{method:this.wheelEventHandler.onGestureChange,element:document.body},gestureend:{method:this.wheelEventHandler.onGestureEnd,element:document.body},touchstart:{method:this.touchEventHandler.onTouchStart},touchmove:{method:this.touchEventHandler.onTouchMove},touchend:{method:this.touchEventHandler.onTouchEnd},touchcancel:{method:this.touchEventHandler.onTouchCancel}})}return Object.freeze(t)},l.prototype.addListeners=function(){for(var e in this.eventParamMap){var t=this.eventParamMap[e],r=t.method;(t.element||this.divElement).addEventListener(e,r,!0)}},l.prototype.release=function(){for(var e in this.eventParamMap){var t=this.eventParamMap[e],r=t.method;(t.element||this.divElement).removeEventListener(e,r,!0)}},l.prototype.fireEvent=function(e){this.delegate.fireEvent(e)},l.prototype.getOS=function(){var e=window.navigator.userAgent,t=window.navigator.platform,r="";return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?r="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(t)?r="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?r="Windows":/Android/.test(e)?r="Android":!r&&/Linux/.test(t)&&(r="Linux"),r},l.prototype.toPointInScene=function(e,t){return this.delegate.toPointInScene(e,t)},l.prototype.willInterruptMouseOrTouchEvent=function(e,t){return!!t&&(!this.isEventFiredOnElement(t,this.divElement)||this.delegate.willInterruptEvent(e,t))},l.prototype.willInterruptKeyboardEvent=function(e,t){return!!t&&this.delegate.willInterruptEvent(e,t)},l.prototype.isEventFiredOnElement=function(e,t){for(;e;){if(e===t)return!0;e=e.parentElement}return!1},l.prototype.eventPosition=function(e){var t=this.divElement.getBoundingClientRect(),r=t.left,n=t.top;return{x:Math.floor(e.clientX)-r,y:Math.floor(e.clientY)-n}},l);function l(e,t,r){this.mouseEventHandler=new o.MouseEventHandler(this),this.touchEventHandler=new s.TouchEventHandler(this),this.wheelEventHandler=new a.WheelEventHandler(this),this.keyboardEventHandler=new c.KeyboardEventHandler(this),this.divElement=t,this.eventParamMap=this.createEventParamMap(e),this.delegate=r,this.addListeners()}t.EventBinder=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=(o.prototype.checkMouseDidUp=function(e){var t=0!==e.which;this.isLeftButtonPressed&&!t&&this.fireMouseUpEvent(e)},o.prototype.fireMouseUpEvent=function(e){var t=this.binder.eventPosition(e),r={kind:n.BoundlessEventKind.MouseUp,nativeEvent:e,pointOnScreen:t,pointOnScene:this.binder.toPointInScene(t.x,t.y)};this.binder.fireEvent(r)},o);function o(e){var t=this;this.binder=e,this.isLeftButtonPressed=!1,this.onMouseDown=function(e){if(0===e.button&&(t.checkMouseDidUp(e),t.isLeftButtonPressed=!0,!t.binder.willInterruptMouseOrTouchEvent(e,e.target))){var r=t.binder.eventPosition(e),i={kind:n.BoundlessEventKind.MouseDown,nativeEvent:e,pointOnScreen:r,pointOnScene:t.binder.toPointInScene(r.x,r.y)};t.binder.fireEvent(i)}},this.onMouseMove=function(e){if(0===e.button){t.checkMouseDidUp(e);var r=t.binder.eventPosition(e),i={kind:n.BoundlessEventKind.MouseMove,nativeEvent:e,pointOnScreen:r,pointOnScene:t.binder.toPointInScene(r.x,r.y)};t.binder.fireEvent(i)}},this.onMouseLeave=function(e){if(0===e.button&&(t.checkMouseDidUp(e),e.target===t.binder.divElement)){var r=t.binder.eventPosition(e),i={kind:n.BoundlessEventKind.MouseLeave,nativeEvent:e,pointOnScreen:r,pointOnScene:t.binder.toPointInScene(r.x,r.y)};t.binder.fireEvent(i)}},this.onMouseUp=function(e){0===e.button&&(t.isLeftButtonPressed=!1,t.fireMouseUpEvent(e))}}t.MouseEventHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=(o.prototype.adjustScale=function(e){return Math.max(e,o.minScaleStep)*o.scaleRate},o.safariScaleNumber=10,o.minScaleStep=-40,o.scaleRate=.02,o);function o(e){var t=this;this.binder=e,this.latestScale=1,this.onMouseWheel=function(e){if(!t.binder.willInterruptMouseOrTouchEvent(e,e.target)){var r=t.binder.eventPosition(e),i=e.deltaX,o=e.deltaY,a=Math.sqrt(i*i+o*o),s=0,c=0;"Windows"===t.binder.getOS()&&(a=-a),i+o<0&&(a=-a),t.isMacTouchpadTwoFingerZoom(e)?a=.5*-a:t.isMacTouchpadTwoFingerScroll(e)?(s=-i,c=-o,a=0):a*=.035;var u={kind:n.BoundlessEventKind.MouseWheel,nativeEvent:e,offsetPoint:{x:s,y:c},scale:t.adjustScale(a),pointOnScreen:r,pointOnScene:t.binder.toPointInScene(r.x,r.y)};t.binder.fireEvent(u)}e.preventDefault()},this.onGestureStart=function(e){t.binder.willInterruptMouseOrTouchEvent(e,e.target)||(e.preventDefault(),t.latestScale=1)},this.onGestureChange=function(e){if(!t.binder.willInterruptMouseOrTouchEvent(e,e.target)){e.preventDefault();var r=(e.scale/t.latestScale-1)*o.safariScaleNumber,i={x:e.layerX,y:e.layerY},a={kind:n.BoundlessEventKind.MouseWheel,nativeEvent:e,offsetPoint:{x:0,y:0},scale:t.adjustScale(r),pointOnScreen:i,pointOnScene:t.binder.toPointInScene(i.x,i.y)};t.binder.fireEvent(a)}},this.onGestureEnd=function(e){t.binder.willInterruptMouseOrTouchEvent(e,e.target)||e.preventDefault()},this.isMacTouchpadTwoFingerZoom=function(e){return-1!==navigator.platform.indexOf("Mac")&&e.ctrlKey},this.isMacTouchpadTwoFingerScroll=function(e){return-1!==navigator.platform.indexOf("Mac")&&(e.wheelDelta%120!=0||0!==e.movementX||0!==e.deltaX)}}t.WheelEventHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=(o.prototype.cleanAcceptedTouchesByTouchEvent=function(e){for(var t=[],r=0;r<e.changedTouches.length;++r){var n=e.changedTouches.item(r),i=""+n.identifier,o=this.binder.eventPosition(n);t.push({identifier:i,pointOnScreen:o,pointOnScene:this.binder.toPointInScene(o.x,o.y)})}return t},o);function o(e){var t=this;this.binder=e,this.onTouchStart=function(e){e.cancelable&&e.preventDefault();for(var r=[],i=0;i<e.changedTouches.length;++i){var o=e.changedTouches.item(i);if(!t.binder.willInterruptMouseOrTouchEvent(e,o.target)){var a=""+o.identifier,s=t.binder.eventPosition(o);r.push({identifier:a,pointOnScreen:s,pointOnScene:t.binder.toPointInScene(s.x,s.y)})}}if(0<r.length){var c={kind:n.BoundlessEventKind.TouchStart,nativeEvent:e,touches:r};t.binder.fireEvent(c)}},this.onTouchMove=function(e){e.cancelable&&e.preventDefault();for(var r=[],i=0;i<e.changedTouches.length;++i){var o=e.changedTouches.item(i),a=""+o.identifier,s=t.binder.eventPosition(o);r.push({identifier:a,pointOnScreen:s,pointOnScene:t.binder.toPointInScene(s.x,s.y)})}if(0<r.length){var c={kind:n.BoundlessEventKind.TouchMove,nativeEvent:e,touches:r};t.binder.fireEvent(c)}},this.onTouchEnd=function(e){e.cancelable&&e.preventDefault();var r=t.cleanAcceptedTouchesByTouchEvent(e);if(0<r.length){var i={kind:n.BoundlessEventKind.TouchEnd,nativeEvent:e,touches:r};t.binder.fireEvent(i)}},this.onTouchCancel=function(e){e.cancelable&&e.preventDefault();var r=t.cleanAcceptedTouchesByTouchEvent(e);if(0<r.length){var i={kind:n.BoundlessEventKind.TouchCancel,nativeEvent:e,touches:r};t.binder.fireEvent(i)}}}t.TouchEventHandler=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);t.KeyboardEventHandler=function(e){var t=this;this.binder=e,this.onKeyDown=function(e){if(!t.binder.willInterruptKeyboardEvent(e,e.target)){var r=e.key,i=e.altKey,o=e.ctrlKey,a=e.shiftKey,s={kind:n.BoundlessEventKind.KeyDown,nativeEvent:e,key:r,altKey:i,ctrlKey:o,shiftKey:a};t.binder.fireEvent(s)}},this.onKeyUp=function(e){var r=e.key,i=e.altKey,o=e.ctrlKey,a=e.shiftKey,s={kind:n.BoundlessEventKind.KeyUp,nativeEvent:e,key:r,altKey:i,ctrlKey:o,shiftKey:a};t.binder.fireEvent(s)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(6),o=(a.prototype.setEventDescriptionStateGetter=function(e){this.getDescriptionState=e},a.prototype.isEventAccessible=function(e){return e.kind===i.BoundlessEventKind.MouseDown||e.kind===i.BoundlessEventKind.MouseMove||e.kind===i.BoundlessEventKind.MouseUp||e.kind===i.BoundlessEventKind.MouseLeave},a.prototype.convertToEvent=function(e,t){var r=t[0].payload;return{kind:e.kind,nativeEvent:e.nativeEvent,pointOnScreen:r.pointOnScreen,pointOnScene:r.pointOnScene}},a.prototype.createCancelEvent=function(e){var t;for(var r in e)t=e[r];return{kind:i.BoundlessEventKind.MouseUp,pointOnScreen:t.pointOnScreen,pointOnScene:t.pointOnScene}},a.prototype.takeEventDescription=function(e){e.kind===i.BoundlessEventKind.MouseDown&&this.currentIdentifier++;var t,r=""+this.currentIdentifier;switch(e.kind===i.BoundlessEventKind.MouseUp&&this.currentIdentifier++,e.kind){case i.BoundlessEventKind.MouseDown:t=n.EventPhase.Start;break;case i.BoundlessEventKind.MouseMove:case i.BoundlessEventKind.MouseLeave:var o=this.getDescriptionState(r);if(o){if(o.isCanceled)return null;t=n.EventPhase.Update}else t=n.EventPhase.Other;break;case i.BoundlessEventKind.MouseUp:t=n.EventPhase.End;break;default:return null}return{identifier:r,phase:t,payload:{pointOnScreen:e.pointOnScreen,pointOnScene:e.pointOnScene}}},a);function a(){this.currentIdentifier=0}t.MouseEventAdapter=o},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(28),o=r(6),a=(s.prototype.isEventAccessible=function(e){return e.kind===o.BoundlessEventKind.TouchStart||e.kind===o.BoundlessEventKind.TouchMove||e.kind===o.BoundlessEventKind.TouchEnd||e.kind===o.BoundlessEventKind.TouchCancel},s.prototype.convertToEvent=function(e,t){for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i],s=a.identifier,c=a.payload;r.push(n({identifier:s},c))}return{kind:e.kind,nativeEvent:e.nativeEvent,touches:r}},s.prototype.createCancelEvent=function(e){var t=[];for(var r in e)t.push(n({identifier:r},e[r]));return{kind:o.BoundlessEventKind.TouchCancel,touches:t}},s.prototype.takeEventDescription=function(e){var t;switch(e.kind){case o.BoundlessEventKind.TouchStart:t=i.EventPhase.Start;break;case o.BoundlessEventKind.TouchMove:t=i.EventPhase.Update;break;case o.BoundlessEventKind.TouchEnd:case o.BoundlessEventKind.TouchCancel:t=i.EventPhase.End;break;default:return null}for(var r=[],n=0,a=e.touches;n<a.length;n++){var s=a[n],c=s.identifier,u=s.pointOnScene,l=s.pointOnScreen;r.push({identifier:c,phase:t,payload:{pointOnScene:u,pointOnScreen:l}})}return r},s);function s(){}t.TouchEventAdapter=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(6),o=(a.prototype.isEventAccessible=function(e){return e.kind===i.BoundlessEventKind.SortedTouchStart||e.kind===i.BoundlessEventKind.SortedTouchMove||e.kind===i.BoundlessEventKind.SortedTouchEnd||e.kind===i.BoundlessEventKind.SortedTouchCancel},a.prototype.convertToEvent=function(e,t){var r=t[0],n=r.identifier,i=r.payload;return{kind:e.kind,nativeEvent:e.nativeEvent,identifier:n,pointOnScene:i.pointOnScene,pointOnScreen:i.pointOnScreen}},a.prototype.createCancelEvent=function(e){var t;for(var r in e)t=r;var n=e[t],o=n.pointOnScene,a=n.pointOnScreen;return{kind:i.BoundlessEventKind.SortedTouchCancel,identifier:t,pointOnScene:o,pointOnScreen:a}},a.prototype.takeEventDescription=function(e){var t;switch(e.kind){case i.BoundlessEventKind.SortedTouchStart:t=n.EventPhase.Start;break;case i.BoundlessEventKind.SortedTouchMove:t=n.EventPhase.Update;break;case i.BoundlessEventKind.SortedTouchEnd:case i.BoundlessEventKind.SortedTouchCancel:t=n.EventPhase.End;break;default:return null}return[{identifier:e.identifier,phase:t,payload:{pointOnScene:e.pointOnScene,pointOnScreen:e.pointOnScreen}}]},a);function a(){}t.SortedTouchEventAdapter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(6),o=(a.prototype.isEventAccessible=function(e){return e.kind===i.BoundlessEventKind.KeyUp||e.kind===i.BoundlessEventKind.KeyDown},a.prototype.convertToEvent=function(e,t){var r=t[0],n=(r.identifier,r.payload);return{kind:e.kind,nativeEvent:e.nativeEvent,key:n.key,altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey}},a.prototype.createCancelEvent=function(e){var t;for(var r in e)t=e[r];return{kind:i.BoundlessEventKind.KeyUp,key:t.key,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey}},a.prototype.takeEventDescription=function(e){var t;switch(e.kind){case i.BoundlessEventKind.KeyDown:t=n.EventPhase.Start;break;case i.BoundlessEventKind.KeyUp:t=n.EventPhase.End;break;default:return null}return{identifier:e.key,phase:t,payload:{key:e.key,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey}}},a);function a(){}t.KeyboardEventAdapter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(6),o=(a.prototype.setEventDescriptionStateGetter=function(e){this.getDescriptionState=e},a.prototype.isEventAccessible=function(e){return e.kind===i.BoundlessEventKind.MouseWheel},a.prototype.takeEventDescription=function(e){var t=""+this.currentIdentifier;this.getDescriptionState(t),this.currentIdentifier++;var r={pointOnScene:e.pointOnScene,pointOnScreen:e.pointOnScreen,offsetPoint:e.offsetPoint,scale:e.scale};return{identifier:t,phase:n.EventPhase.Other,payload:r}},a.prototype.convertToEvent=function(e,t){return t[0].payload,e},a.prototype.createCancelEvent=function(e){return null},a);function a(){this.currentIdentifier=0}t.WheelEventAdapter=o},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(63),o=r(379),a=r(186),s=r(382),c=r(6),u=r(387),l=(Object.defineProperty(p.prototype,"handToolActive",{get:function(){return this.handTool.active},set:function(e){this.handTool.active=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"handToolKey",{get:function(){return this.handTool.key},set:function(e){this.handTool.key=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"cameraBorder",{get:function(){return this.border},enumerable:!0,configurable:!0}),p.prototype.setCameraBorder=function(e){var t=this.border,r=this.border=Object.freeze(n({},this.border,e));if(!s.isCameraBorderEquals(t,r)){var i=void 0;this.transformer?((i=this.transformer).setCurrentBorder(r),r=i.adaptOriginBorder):(i=new s.CameraBorderTransformer(t)).setCurrentBorder(r),this.cameraView.setCameraBorder(r);var o=this.moveToCamera||this.screen.camera,a=i.transform;this.screen.transformCamera({animationMode:c.AnimationMode.Immediately,centerX:o.centerX+a.deltaX,centerY:o.centerY+a.deltaY,scale:o.scale*a.scale})}return this.border},Object.defineProperty(p.prototype,"disableBoundlessEvent",{get:function(){return this.continuityNode.disable},set:function(e){this.continuityNode.disable=e},enumerable:!0,configurable:!0}),p.prototype.transformCamera=function(e){var t=this;this.isPaddingCameraOperations?this.paddingCameraOperation=function(){return t.screen.transformCamera(e)}:this.screen.transformCamera(e)},p.prototype.adaptRectangle=function(e){var t=this;this.isPaddingCameraOperations?this.paddingCameraOperation=function(){return t.screen.adaptRectangle(e)}:this.screen.adaptRectangle(e)},p.prototype.release=function(){this.didRelease||(this.sorter&&this.sorter.cancel(),this.eventProxy.removeListener(this.onBoundlessEvent),this.screen.removeScreenUpdatedListener(this.onScreenUpdatedListener),this.didRelease=!0)},p.prototype.handleBoundlessEventWhenItIsDesktop=function(e){switch(e.kind){case c.BoundlessEventKind.MouseWheel:this.onMouseWheel(e);break;case c.BoundlessEventKind.TouchStart:case c.BoundlessEventKind.TouchMove:case c.BoundlessEventKind.TouchEnd:case c.BoundlessEventKind.TouchCancel:break;case c.BoundlessEventKind.KeyDown:case c.BoundlessEventKind.KeyUp:this.handTool.isKeyEvent(e)?this.handTool.handleKeyEvent(e):this.dispatchBoundlessEvent(e);break;default:this.dispatchBoundlessEvent(e)}},p.prototype.handleBoundlessEventWhenItIsTouch=function(e){switch(e.kind){case c.BoundlessEventKind.TouchStart:case c.BoundlessEventKind.TouchMove:case c.BoundlessEventKind.TouchEnd:case c.BoundlessEventKind.TouchCancel:this.sorter.pushTouchEvent(e);break;case c.BoundlessEventKind.MouseDown:case c.BoundlessEventKind.MouseUp:case c.BoundlessEventKind.MouseMove:case c.BoundlessEventKind.MouseLeave:break;case c.BoundlessEventKind.KeyDown:case c.BoundlessEventKind.KeyUp:this.handTool.isKeyEvent(e)?this.handTool.handleKeyEvent(e):this.dispatchBoundlessEvent(e);break;default:this.dispatchBoundlessEvent(e)}},p.prototype.handleBoundlessEventWhenItIsSurface=function(e){switch(e.kind){case c.BoundlessEventKind.MouseWheel:this.onMouseWheel(e);break;case c.BoundlessEventKind.TouchStart:case c.BoundlessEventKind.TouchMove:case c.BoundlessEventKind.TouchEnd:case c.BoundlessEventKind.TouchCancel:this.sorter.pushTouchEvent(e);break;case c.BoundlessEventKind.MouseDown:case c.BoundlessEventKind.MouseUp:case c.BoundlessEventKind.MouseMove:case c.BoundlessEventKind.MouseLeave:default:this.dispatchBoundlessEvent(e)}},p.prototype.onMouseWheel=function(e){if(!this.disableCameraTransform){var t=this.screen.camera,r=t.centerX,i=t.centerY,o=t.scale;if(0!==e.scale){var a=1+e.scale,s=e.pointOnScreen.x,u=e.pointOnScreen.y,l=(1-1/a)/o;r+=l*(s-this.screen.width/2),i+=l*(u-this.screen.height/2),o*=a}r-=e.offsetPoint.x/o,i-=e.offsetPoint.y/o;var p=this.cameraView.transformToCombinedCamera({centerX:r,centerY:i,scale:o},e.pointOnScreen);this.transformationEventDispatcher.dispatch(c.CameraTransformation.Begin),this.screen.transformCamera(n({},this.cameraAppendBorderTransform(p.valid),{animationMode:c.AnimationMode.Immediately})),this.transformationEventDispatcher.dispatch(c.CameraTransformation.End)}},p.prototype.cameraAppendBorderTransform=function(e){if(this.transformer){var t=this.transformer.transform;return Object.freeze({centerX:e.centerX+t.deltaX,centerY:e.centerY+t.deltaY,scale:e.scale*t.scale})}return e},p.prototype.addHandToolActiveListener=function(e){this.handToolActiveEventDispatcher.addListener(e)},p.prototype.removeHandToolActiveListener=function(e){this.handToolActiveEventDispatcher.removeListener(e)},p.prototype.addCameraTransformationListener=function(e){this.transformationEventDispatcher.addListener(e)},p.prototype.removeCameraTransformationListener=function(e){this.transformationEventDispatcher.removeListener(e)},p.prototype.addBoundlessEventListener=function(e){this.boundlessEventDispatcher.addListener(e)},p.prototype.removeBoundlessEventListener=function(e){this.boundlessEventDispatcher.removeListener(e)},p);function p(e,t,r){void 0===r&&(r={});var l=this;this.disableCameraTransform=!1,this.boundlessEventDispatcher=new i.EventDispatcher,this.transformationEventDispatcher=new i.EventDispatcher,this.handToolActiveEventDispatcher=new i.EventDispatcher,this.transformer=null,this.border=Object.freeze({damping:.75,centerX:0,centerY:0,width:Number.POSITIVE_INFINITY,height:Number.POSITIVE_INFINITY,minScale:0,maxScale:Number.POSITIVE_INFINITY}),this.moveToCamera=null,this.didRelease=!1,this.isPaddingCameraOperations=!1,this.paddingCameraOperation=null,this.onBoundlessEvent=function(e){switch(l.screen.deviceType){case c.DeviceType.Surface:l.handleBoundlessEventWhenItIsSurface(e);break;case c.DeviceType.Desktop:l.handleBoundlessEventWhenItIsDesktop(e);break;case c.DeviceType.Touch:l.handleBoundlessEventWhenItIsTouch(e)}},this.onScreenUpdatedListener=function(e){e.camera;var t=e.width,r=e.height,i=l.cameraView.screenSize;if(i.width!==t||i.height!==r){l.cameraView.screenSize=Object.freeze({width:t,height:r});var o=l.screen.camera,a=l.cameraView.transformToCombinedCamera(l.screen.camera,{x:t/2,y:r/2}).valid;o.centerX===a.centerX&&o.centerY===a.centerY&&o.scale===a.scale||l.screen.transformCamera(n({},a,{animationMode:c.AnimationMode.Immediately}))}},this.dispatchBoundlessEvent=function(e){var t=l.continuityNode.interruptEvent(e);l.handTool.willInterruptEvent(t)?l.handTool.moveCameraByEvent(t):t&&l.boundlessEventDispatcher.dispatch(t),l.handTool.handlePreviousEvent(t)},this.onBeginTransformCamera=function(e){l.disableCameraTransform||(l.isPaddingCameraOperations=!0,l.transformationEventDispatcher.dispatch(c.CameraTransformation.Begin),l.cameraView.beginWithCamera(l.screen.camera),l.transformer=new s.CameraBorderTransformer(l.border),l.onTransformCamera(e))},this.onTransformCamera=function(e){if(!l.disableCameraTransform){var t=l.cameraView.handleTouchesAndGetCameraMoving(e);l.moveToCamera=t.view,l.screen.transformCamera(n({},l.cameraAppendBorderTransform(t.view),{animationMode:c.AnimationMode.Immediately}))}},this.onAfterTransformCamera=function(){if(!l.disableCameraTransform){var e=l.cameraView.completeAndGetValidCamera();l.isPaddingCameraOperations=!1,l.moveToCamera=l.cameraAppendBorderTransform(e),l.cameraView.setCameraBorder(l.border),l.paddingCameraOperation&&(l.paddingCameraOperation(),l.paddingCameraOperation=null),l.transformer=null,l.transformationEventDispatcher.dispatch(c.CameraTransformation.End)}},this.onCompleteGroupOfEvents=function(){if(l.moveToCamera){var e=l.screen.camera;l.moveToCamera.centerX===e.centerX&&l.moveToCamera.centerY===e.centerY&&l.moveToCamera.scale===e.scale||l.screen.transformCamera(n({},l.moveToCamera,{animationMode:c.AnimationMode.Continuous})),l.moveToCamera=null}},this.onContinuityNodeCancel=function(e){l.boundlessEventDispatcher.dispatch(e),l.sorter&&l.sorter.cancel()},this.screen=e,this.eventProxy=t,this.continuityNode=a.createContinuityNode(this.onContinuityNodeCancel),this.cameraView=new s.CameraView({width:e.width,height:e.height}),this.handTool=new u.HandTool({cameraman:this,activeDispatch:function(e){return l.handToolActiveEventDispatcher.dispatch(e)}}),this.setCameraBorder(r),e.deviceType!==c.DeviceType.Touch&&e.deviceType!==c.DeviceType.Surface||(this.sorter=new o.EventAndCameraSorter({onBeginTransformCamera:this.onBeginTransformCamera,onTransformCamera:this.onTransformCamera,onAfterTransformCamera:this.onAfterTransformCamera,onCompleteGroupOfEvents:this.onCompleteGroupOfEvents,onReceivedSortedTouchEvent:this.dispatchBoundlessEvent})),t.addListener(this.onBoundlessEvent),e.addScreenUpdatedListener(this.onScreenUpdatedListener)}t.CameramanImplement=l},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,o,a=r(6),s=r(380),c=r(381);(o=i=i||{})[o.None=0]="None",o[o.Event=1]="Event",o[o.Camera=2]="Camera",o[o.Cancel=3]="Cancel";var u=(l.prototype.pushTouchEvent=function(e){switch(e.kind){case a.BoundlessEventKind.TouchStart:this.pressedTouches.receiveTouchStartOrMoveEvent(e),this.pushTouchStartEvent(e);break;case a.BoundlessEventKind.TouchMove:this.pressedTouches.receiveTouchStartOrMoveEvent(e),this.pushTouchMoveEvent(e);break;case a.BoundlessEventKind.TouchEnd:case a.BoundlessEventKind.TouchCancel:this.pressedTouches.receiveTouchEndOrCancelEvent(e),this.pushTouchEndOrCancelEvent(e)}},l.prototype.cancel=function(){var e=this;this.state!==i.None&&this.state!==i.Cancel&&(this.state=i.Cancel,this.pressedTouches.waitUntilNoPressedTouches().then((function(){e.state=i.None})))},l.prototype.pushTouchStartEvent=function(e){var t=e.touches;switch(this.state){case i.None:this.blocker.startOperation(),1===t.length?(this.state=i.Event,this.firstPressedTouchBeginX=t[0].pointOnScreen.x,this.firstPressedTouchBeginY=t[0].pointOnScreen.y,this.firstPressedTouch={identifier:t[0].identifier,x:this.firstPressedTouchBeginX,y:this.firstPressedTouchBeginY},this.blocker.pushBoundlessEvent(this.covertToSortedTouchEvent(e,0))):(this.state=i.Camera,this.pinchTouches=t.map((function(e){return{identifier:e.identifier,x:e.pointOnScreen.x,y:e.pointOnScreen.y}})),this.handleTouchEvents(this.pinchTouches));break;case i.Event:this.pinchTouches=[{identifier:this.firstPressedTouch.identifier,x:this.firstPressedTouch.x,y:this.firstPressedTouch.y}],this.blocker.unknownIsMultiFingers&&(this.blocker.assertMultiFingers(),this.firstPressedTouch=null),this.pushToPinchTouches(t),this.handleTouchEvents(this.pinchTouches),this.state=i.Camera;break;case i.Camera:this.pushToPinchTouches(t),this.handleTouchEvents(this.pinchTouches)}},l.prototype.pushTouchMoveEvent=function(e){var t=this,r=e.touches;switch(this.refreshFirstPressedTouch(r),this.state){case i.Event:var n=r.findIndex((function(e){return e.identifier===t.firstPressedTouch.identifier}));this.blocker.pushBoundlessEvent(this.covertToSortedTouchEvent(e,n));break;case i.Camera:for(var o=function(e){var t=r.find((function(t){return t.identifier===e.identifier}));t&&(e.x=t.pointOnScreen.x,e.y=t.pointOnScreen.y)},a=0,s=this.pinchTouches;a<s.length;a++)o(s[a]);this.handleTouchEvents(this.pinchTouches)}},l.prototype.pushTouchEndOrCancelEvent=function(e){var t=this,r=e.touches;if(this.firstPressedTouch&&this.state!==i.Cancel){var n=r.findIndex((function(e){return e.identifier===t.firstPressedTouch.identifier}));-1!==n&&(this.blocker.pushBoundlessEvent(this.covertToSortedTouchEvent(e,n)),this.firstPressedTouch=null)}switch(this.state){case i.Event:this.blocker.assertSingleFinger(),this.completeOperation();break;case i.Camera:this.blocker.assertMultiFingers();for(var o=function(e){var t=a.pinchTouches.findIndex((function(t){return t.identifier===e.identifier}));-1!==t&&a.pinchTouches.splice(t,1)},a=this,s=0,c=r;s<c.length;s++)o(c[s]);this.firstPressedTouch&&1===this.pinchTouches.length?(this.state=i.Event,this.handleTouchEvents([]),this.pinchTouches=null):0===this.pinchTouches.length?(this.handleTouchEvents(this.pinchTouches),this.pinchTouches=null,this.completeOperation()):this.handleTouchEvents(this.pinchTouches)}},l.prototype.handleTouchEvents=function(e){try{0===this.previousTouchesCount&&0<e.length&&this.callbacks.onBeginTransformCamera(e),0<this.previousTouchesCount&&0===e.length?this.callbacks.onAfterTransformCamera():this.callbacks.onTransformCamera(e)}finally{this.previousTouchesCount=e.length}},l.prototype.pushToPinchTouches=function(e){if(this.pinchTouches)for(var t=function(e){r.pinchTouches.some((function(t){return t.identifier===e.identifier}))||r.pinchTouches.push({x:e.pointOnScreen.x,y:e.pointOnScreen.y,identifier:e.identifier})},r=this,n=0,i=e;n<i.length;n++)t(i[n])},l.prototype.refreshFirstPressedTouch=function(e){if(this.firstPressedTouch){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(n.identifier===this.firstPressedTouch.identifier){this.firstPressedTouch.x=n.pointOnScreen.x,this.firstPressedTouch.y=n.pointOnScreen.y;break}}if(this.blocker.unknownIsMultiFingers){var i=this.firstPressedTouch.x-this.firstPressedTouchBeginX,o=this.firstPressedTouch.y-this.firstPressedTouchBeginY;9<=i*i+o*o&&this.blocker.assertSingleFinger()}}},l.prototype.completeOperation=function(){this.state=i.None,this.blocker.unknownIsMultiFingers&&this.blocker.assertMultiFingers(),this.callbacks.onCompleteGroupOfEvents()},l.prototype.covertToSortedTouchEvent=function(e,t){var r,n=e.touches[t],i=n.identifier,o=n.pointOnScreen,s=n.pointOnScene;switch(e.kind){case a.BoundlessEventKind.TouchStart:r=a.BoundlessEventKind.SortedTouchStart;break;case a.BoundlessEventKind.TouchMove:r=a.BoundlessEventKind.SortedTouchMove;break;case a.BoundlessEventKind.TouchEnd:r=a.BoundlessEventKind.SortedTouchEnd;break;case a.BoundlessEventKind.TouchCancel:r=a.BoundlessEventKind.SortedTouchCancel;break;default:throw new Error("unexpected kind "+e.kind)}return{identifier:i,nativeEvent:e.nativeEvent,kind:r,pointOnScreen:o,pointOnScene:s}},l);function l(e){this.pressedTouches=new c.PressedTouches,this.state=i.None,this.pinchTouches=null,this.previousTouchesCount=0,this.firstPressedTouch=null,this.firstPressedTouchBeginX=0,this.firstPressedTouchBeginY=0,this.blocker=new s.MultiFingersToleranceBlocker(e.onReceivedSortedTouchEvent),this.callbacks=Object.freeze(n({},e))}t.EventAndCameraSorter=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"unknownIsMultiFingers",{get:function(){return this.willBlockOperation},enumerable:!0,configurable:!0}),i.prototype.startOperation=function(){this.willBlockOperation=!0,this.flushingOperationBufferTimer=setTimeout(this.flushOperationBuffer,300)},i.prototype.assertMultiFingers=function(){this.operationBuffer.splice(0,this.operationBuffer.length),this.willBlockOperation=!1,null!==this.flushingOperationBufferTimer&&(clearTimeout(this.flushingOperationBufferTimer),this.flushingOperationBufferTimer=null)},i.prototype.assertSingleFinger=function(){null!==this.flushingOperationBufferTimer&&clearTimeout(this.flushingOperationBufferTimer),this.flushOperationBuffer()},i.prototype.pushBoundlessEvent=function(e){var t=this;this.willBlockOperation?this.operationBuffer.push((function(){return t.onPushedBoundlessEvent(e)})):this.onPushedBoundlessEvent(e)},i);function i(e){var t=this;this.onPushedBoundlessEvent=e,this.operationBuffer=[],this.willBlockOperation=!1,this.flushingOperationBufferTimer=null,this.flushOperationBuffer=function(){if(t.operationBuffer){for(var e=0,r=t.operationBuffer;e<r.length;e++)(0,r[e])();t.operationBuffer.splice(0,t.operationBuffer.length),t.willBlockOperation=!1}t.flushingOperationBufferTimer=null}}t.MultiFingersToleranceBlocker=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.receiveTouchStartOrMoveEvent=function(e){for(var t=0,r=e.touches;t<r.length;t++){var n=r[t];n.identifier in this.pressedTouches||this.pressedTouchesCount++,this.pressedTouches[n.identifier]=n}},i.prototype.receiveTouchEndOrCancelEvent=function(e){for(var t=0,r=e.touches;t<r.length;t++){var n=r[t];if(n.identifier in this.pressedTouches&&(this.pressedTouchesCount--,delete this.pressedTouches[n.identifier],0===this.pressedTouchesCount))for(var i=0,o=this.emptyResolves.splice(0);i<o.length;i++)(0,o[i])()}},i.prototype.waitUntilNoPressedTouches=function(){var e=this;return 0===this.pressedTouchesCount?Promise.resolve():new Promise((function(t){return e.emptyResolves.push(t)}))},i);function i(){this.pressedTouches={},this.emptyResolves=[],this.pressedTouchesCount=0}t.PressedTouches=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(383);t.isCameraBorderEquals=n.isCameraBorderEquals,t.CameraBorderTransformer=n.CameraBorderTransformer;var i=r(384);t.CameraView=i.CameraView},function(e,t,r){"use strict";function n(e,t,r,n){if(t===1/0||n===1/0)return{center:0,scale:1/0};var i=t/n;return Number.isNaN(i)&&(i=1),{center:r-e,scale:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.isCameraBorderEquals=function(e,t){return e.centerX===t.centerX&&e.centerY===t.centerY&&e.damping===t.damping&&e.width===t.width&&e.height===t.height&&e.minScale===t.minScale&&e.maxScale===t.maxScale};var i=(Object.defineProperty(o.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"adaptOriginBorder",{get:function(){return this._adaptOriginBorder},enumerable:!0,configurable:!0}),o.prototype.setCurrentBorder=function(e){this.currentBorder=e;var t=n(this.originBorder.centerX,this.originBorder.width,this.currentBorder.centerX,this.currentBorder.width),r=t.center,i=t.scale,o=n(this.originBorder.centerY,this.originBorder.height,this.currentBorder.centerY,this.currentBorder.height),a=o.center,s=o.scale,c=Math.min(i,s);c===1/0&&(c=1),this._transform=Object.freeze({deltaX:r,deltaY:a,scale:c}),this._adaptOriginBorder=Object.freeze({damping:e.damping,centerX:e.centerX-r,centerY:e.centerY-a,width:e.width*c,height:e.height*c,maxScale:e.maxScale/c,minScale:e.minScale/c})},o);function o(e){this.originBorder=e,this.currentBorder=e,this._transform=Object.freeze({deltaX:0,deltaY:0,scale:1})}t.CameraBorderTransformer=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(385),i=r(6),o=r(386);function a(e,t){return{x:e.x-t.width/2,y:e.y-t.height/2}}function s(e,t,r){var n=e.x-t.width/2,i=e.y-t.height/2;return{x:r.centerX+n/r.scale,y:r.centerY+i/r.scale}}var c=(Object.defineProperty(u.prototype,"isHandingPinch",{get:function(){return!!this.pincher},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"screenSize",{get:function(){return this.domain.screenSize},set:function(e){this.domain.screenSize=e},enumerable:!0,configurable:!0}),u.prototype.setCameraBorder=function(e){this.damping=e.damping,this.domain.scaleStart=e.minScale,this.domain.scaleEnd=e.maxScale,this.domain.border.centerX=e.centerX,this.domain.border.centerY=e.centerY,this.domain.border.width=e.width,this.domain.border.height=e.height},u.prototype.beginWithCamera=function(e){this.pincher=new n.Pincker,this.camera=e},u.prototype.handleTouchesAndGetCameraMoving=function(e){this.pincher.handleTouches(e);var t=this.pincher.centroid,r=this.currentTargetCamera();return this.transformToCombinedCamera(r,t)},u.prototype.transformToCombinedCamera=function(e,t){var r=this.domain.screenSize,n=s(t,r,e);this.domain.pinPoint=n;var i,o=this.domain.findClosestValidCamera(e);if(this.lastValidCamera=o,0===this.damping)i=e;else if(1===this.damping)i=o;else if(function(e,t){return e.centerX===t.centerX&&e.centerY===t.centerY&&e.scale===t.scale}(e,o))i=e;else{var a=s(t,r,o);i=this.viewCamera(n,a,e,o,this.damping)}return{valid:o,view:i}},u.prototype.completeAndGetValidCamera=function(){var e=this.lastValidCamera;return this.pincher=null,this.camera=null,this.lastValidCamera=null,e},u.prototype.currentTargetCamera=function(){var e=this.camera,t=this.pincher,r=this.domain.screenSize,n=e.scale*t.scale,i=a(t.beginCentroid,r),o=a(t.centroid,r),s=i.x/e.scale-o.x/n,c=i.y/e.scale-o.y/n;return{centerX:e.centerX+s,centerY:e.centerY+c,scale:n}},u.prototype.viewCamera=function(e,t,r,n,o){var a=i.distance(r.centerX,r.centerY,e.x,e.y),s=i.midpoint(r.scale,n.scale,o),c=a*r.scale/s,u=i.midpoint(e.x,t.x,o),l=i.midpoint(e.y,t.y,o),p=i.unitVector(i.midpoint(r.centerX,n.centerX,o)-u,i.midpoint(r.centerY,n.centerY,o)-l);return{centerX:u+c*p.x,centerY:l+c*p.y,scale:s}},u);function u(e){this.pincher=null,this.damping=0,this.camera=null,this.lastValidCamera=null,this.domain=new o.ValidDomain(e)}t.CameraView=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"beginCentroid",{get:function(){return this.isHanding?{x:this.beginCentroidX,y:this.beginCentroidY}:i.zeroPoint},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"centroid",{get:function(){return this.isHanding?{x:this.centroidX,y:this.centroidY}:i.zeroPoint},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.isHanding?this._scale:1},enumerable:!0,configurable:!0}),i.prototype.handleTouches=function(e){var t=this.findTouchesExpression(e);this.isHanding?(this.previousTouchesCount!==e.length&&(this.centroidXOffset=this.centroidX-t.centroidX,this.centroidYOffset=this.centroidY-t.centroidY,this.eccentricityRate=this._scale/t.eccentricity,this.previousTouchesCount=e.length),this.centroidX=t.centroidX+this.centroidXOffset,this.centroidY=t.centroidY+this.centroidYOffset,this._scale=t.eccentricity*this.eccentricityRate):(this.centroidXOffset=0,this.centroidYOffset=0,this.eccentricityRate=1/t.eccentricity,this.beginCentroidX=t.centroidX,this.beginCentroidY=t.centroidY,this.centroidX=t.centroidX,this.centroidY=t.centroidY,this._scale=1,this.previousTouchesCount=e.length,this.isHanding=!0)},i.prototype.findTouchesExpression=function(e){for(var t=0,r=0,n=0,i=e;n<i.length;n++){var o=i[n];t+=o.x,r+=o.y}for(var a=t/e.length,s=r/e.length,c=0,u=0,l=e;u<l.length;u++){var p=l[u],h=p.x-a,d=p.y-s;c+=Math.sqrt(h*h+d*d)}return 0===c&&(c=1),{eccentricity:c,centroidX:a,centroidY:s}},i.zeroPoint=Object.freeze({x:0,y:0}),i);function i(){this.eccentricityRate=1,this.centroidXOffset=0,this.centroidYOffset=0,this.beginCentroidX=0,this.beginCentroidY=0,this.centroidX=0,this.centroidY=0,this._scale=1,this.isHanding=!1,this.previousTouchesCount=0}t.Pincker=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.findClosestValidCamera=function(e){var t=this.findClosestValidScale(e.scale),r=e.centerX,n=e.centerY;if(this.pinPoint&&e.scale!==t){var i=r-this.pinPoint.x,o=n-this.pinPoint.y,a=t/e.scale;r=this.pinPoint.x+i/a,n=this.pinPoint.y+o/a}return{centerX:r=this.findClosestValidCenter(r,t,this.screenSize.width,this.border.centerX,this.border.width),centerY:n=this.findClosestValidCenter(n,t,this.screenSize.height,this.border.centerY,this.border.height),scale:t}},i.prototype.findClosestValidScale=function(e){return this.scaleStart>e?e=this.scaleStart:this.scaleEnd<e&&(e=this.scaleEnd),e},i.prototype.findClosestValidCenter=function(e,t,r,n,i){if(t<=r/i)e=n;else{var o=r/t/2,a=i/2,s=n-a+o,c=n+a-o;e<s?e=s:c<e&&(e=c)}return e},i);function i(e){this.border={centerX:0,centerY:0,width:Number.POSITIVE_INFINITY,height:Number.POSITIVE_INFINITY},this.scaleStart=0,this.scaleEnd=Number.POSITIVE_INFINITY,this.screenSize=e}t.ValidDomain=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=(Object.defineProperty(o.prototype,"active",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"key",{get:function(){return this._key},set:function(e){this._key=e},enumerable:!0,configurable:!0}),o.prototype.isMoveEvent=function(e){return e.kind===n.BoundlessEventKind.MouseMove||e.kind===n.BoundlessEventKind.TouchMove||e.kind===n.BoundlessEventKind.SortedTouchMove},o.prototype.isMouseOrSortedTouch=function(e){var t=e.kind;return t===n.BoundlessEventKind.MouseDown||t===n.BoundlessEventKind.MouseUp||t===n.BoundlessEventKind.MouseLeave||t===n.BoundlessEventKind.MouseMove||t===n.BoundlessEventKind.SortedTouchStart||t===n.BoundlessEventKind.SortedTouchMove||t===n.BoundlessEventKind.SortedTouchEnd||t===n.BoundlessEventKind.SortedTouchCancel},o.prototype.needUpdatePrevious=function(e){return!(!e||(!this.previousPressEvent||e.kind!==n.BoundlessEventKind.MouseMove&&e.kind!==n.BoundlessEventKind.SortedTouchMove)&&e.kind!==n.BoundlessEventKind.MouseDown&&e.kind!==n.BoundlessEventKind.SortedTouchStart)},o.prototype.needReleasePrevious=function(e){return!!e&&(e.kind===n.BoundlessEventKind.MouseUp||e.kind===n.BoundlessEventKind.MouseLeave||e.kind===n.BoundlessEventKind.SortedTouchEnd||e.kind===n.BoundlessEventKind.SortedTouchCancel)},o.prototype.willInterruptEvent=function(e){return this.active&&!this.needReleasePrevious(e)},o.prototype.handlePreviousEvent=function(e){this.needUpdatePrevious(e)?this.previousPressEvent=e:this.needReleasePrevious(e)&&(this.previousPressEvent=null)},o.prototype.isKeyEvent=function(e){return!!e.nativeEvent&&e.nativeEvent instanceof KeyboardEvent&&e.nativeEvent.key===this.key},o.prototype.handleKeyEvent=function(e){var t=this.active;e.kind===n.BoundlessEventKind.KeyDown&&!0!==t?this.active=!0:e.kind===n.BoundlessEventKind.KeyUp&&!1!==t&&(this.active=!1),t!==this.active&&this.activeDispatch(this.active)},o.prototype.moveCameraByEvent=function(e){if(e&&this.previousPressEvent&&this.isMoveEvent(e)&&this.isMouseOrSortedTouch(this.previousPressEvent)&&this.isMouseOrSortedTouch(e)){var t=e.pointOnScreen.x-this.previousPressEvent.pointOnScreen.x,r=e.pointOnScreen.y-this.previousPressEvent.pointOnScreen.y,i=this.cameraman.screen.camera,o=i.centerX,a=i.centerY,s=i.scale,c={centerX:o-t/s,centerY:a-r/s,scale:s,animationMode:n.AnimationMode.Immediately};this.cameraman.transformCamera(c)}},o);function o(e){this._isActive=!1,this._key=void 0,this.previousPressEvent=null,this.cameraman=e.cameraman,this.activeDispatch=e.activeDispatch}t.HandTool=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(95),i=r(98),o=(a.prototype.convertPointToCamera=function(e){return{centerX:this.referPoint[0]+e[0],centerY:this.referPoint[1]+e[1],scale:(this.referPoint[2]+e[2])/a.kScale}},a.prototype.moveTo=function(e){var t=[this.referPoint[0]-e.centerX,this.referPoint[1]-e.centerY,this.referPoint[2]-e.scale*a.kScale];this.referPoint[0]=e.centerX,this.referPoint[1]=e.centerY,this.referPoint[2]=e.scale*a.kScale,this.spaceSpring.moveToAndChangeCoordinate(t,[0,0,0])},a.prototype.moveToRightNow=function(e){this.referPoint[0]=e.centerX,this.referPoint[1]=e.centerY,this.referPoint[2]=e.scale*a.kScale,this.spaceSpring.moveRightNow([0,0,0])},a.kScale=700,a.spaceSpringFactory=new n.SpaceSpringFactory({matchingDistance:2,zeroSpeed:.55,kDistance:.17,velocityDamping:.55,heavyDampingRadius:15,heavyDampingSpeed:.25,pedesisSpeedMean:0,pedesisSpeedVariance:0},{matchingDistance:2,zeroSpeed:.55,kDistance:.12,velocityDamping:.35,heavyDampingRadius:15,heavyDampingSpeed:.35,pedesisSpeedMean:0,pedesisSpeedVariance:0}),a);function a(e,t){var r=this;this.referPoint=[];var n=t&&function(e){t(r.convertPointToCamera(e))};this.referPoint[0]=e.centerX,this.referPoint[1]=e.centerY,this.referPoint[2]=e.scale*a.kScale,this.spaceSpring=a.spaceSpringFactory.create(i.AnimationPriority.CameraMoving,[0,0,0],n)}t.CameraAnimation=o},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(99),o=r(181),a=r(95),s=r(98),c=r(390),u=r(187),l=r(393),p=(Object.defineProperty(h.prototype,"momentCamera",{get:function(){return this._momentCamera},enumerable:!0,configurable:!0}),h.prototype.getVisibleComponents=function(){var e=this,t=[];return this.visibleComponentIds.forEachKeys((function(r){var n=e.screen.scene.component(r);n&&t.push(n)})),t},h.prototype.getLayoutComponent=function(e){for(var t in this.aspectUpdaters){var r=this.aspectUpdaters[t].getLayoutComponent(e);if(r)return r}},h.prototype.release=function(){this.screen.removeScreenUpdatedListener(this.onScreenUpdate),this.screen.removeScreenInformationUpdatedListener(this.onScreenInformationUpdate),this.screen.removeContextUpdateListener(this.onContextUpdate),this.screen.removeCameraUpdatedListener(this.onCameraUpdate),this.screen.scene.removeComponentUpdateListener(this.onComponentUpdate),this.screen.scene.removeComponentsStructListener(this.onComponentsStructUpdate),this.frameInvoker.release(),i.unmountComponentAtNode(this.divElement)},h.prototype.renderScreen=function(){var e={},t={};for(var r in this.aspectUpdaters)e[r]=this.aspectUpdaters[r].visibleComponentsOnAspect();for(var n=0,i=this.screen.scene.layouts;n<i.length;n++)t[r=i[n]]=this.screen.scene.layoutDescription(r);u.ScreenRender.render(this.wrappedComponents,this.divElement,{className:this.screen.className,layoutDescriptions:t,visibleComponents:e,context:this.screen.context,camera:this._momentCamera,width:this.screen.width,height:this.screen.height})},h);function h(e,t,r,i){var u=this;this.visibleComponentIds=new l.SharingKeysMap,this.frameInvoker=a.animation.createAnimationFrameInvoker(s.AnimationPriority.Rendering),this.willRefreshAll=!0,this.onScreenUpdate=function(e){u.screenState=e,u.willRefreshAll=!0,u.frameInvoker.invoke(u.handleFrame)},this.onScreenInformationUpdate=function(){u.frameInvoker.invoke(u.handleFrame)},this.onComponentsStructUpdate=function(){u.frameInvoker.invoke(u.handleFrame)},this.onContextUpdate=function(){u.frameInvoker.invoke(u.handleFrame)},this.onCameraUpdate=function(e){u._momentCamera=Object.freeze(n({},e)),u.frameInvoker.invoke(u.handleFrame)},this.onComponentUpdate=function(e){var t=e.component;switch(e.behavior){case o.ComponentUpdaterBehavior.Removed:for(var r in u.aspectUpdaters)u.aspectUpdaters[r].removeComponent(t);break;case o.ComponentUpdaterBehavior.Added:case o.ComponentUpdaterBehavior.Updated:if(!u.willRefreshAll)for(var r in u.aspectUpdaters)u.aspectUpdaters[r].refreshComponent(u.screenState,t)}u.frameInvoker.invoke(u.handleFrame)},this.handleFrame=function(){if(u.willRefreshAll){for(var e=0,t=u.screen.scene.components;e<t.length;e++){var r=t[e];for(var n in u.aspectUpdaters)u.aspectUpdaters[n].refreshComponent(u.screenState,r)}u.willRefreshAll=!1}for(var n in u.aspectUpdaters)u.aspectUpdaters[n].executeUpdating();u.renderScreen()};for(var p={},h=0,d=t;h<d.length;h++){var f=d[h],m=e.scene.layoutDescription(f).renderMode;p[f]=new c.AspectUpdater(e,f,m,this.visibleComponentIds)}this.screen=e,this.divElement=r,this.wrappedComponents=i,this._momentCamera=Object.freeze(n({},this.screen.camera)),this.aspectUpdaters=Object.freeze(n({},p)),this.screen.addScreenUpdatedListener(this.onScreenUpdate),this.screen.addScreenInformationUpdatedListener(this.onScreenInformationUpdate),this.screen.addContextUpdateListener(this.onContextUpdate),this.screen.addCameraUpdatedListener(this.onCameraUpdate),this.screen.scene.addComponentUpdateListener(this.onComponentUpdate),this.screen.scene.addComponentsStructListener(this.onComponentsStructUpdate),this.screenState={width:this.screen.width,height:this.screen.height,camera:this._momentCamera,visionRectangle:this.screen.visionRectangle},this.frameInvoker.invoke(this.handleFrame)}t.ScreenUpdater=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(64),o=r(100),a=(s.prototype.visibleComponentsOnAspect=function(){var e=[];return this.visibleComponents.forEach((function(t,r){e.push(r)})),e},s.prototype.getLayoutComponent=function(e){for(var t in this.componentElements){var r=this.componentElements[t],n=this.visibleComponents.get(t);if(r&&n&&(e===r||r.contains(e)))return{componentId:t,layout:this.layout}}},s.prototype.refreshComponent=function(e,t){this.isVisibleOnScreen(e,t)?(this.updatedComponents[t.id]=t,this.updatedLocations[t.id]=o.getLocationWithMode(t,this.mode,e.camera,e.width,e.height),delete this.removedRectangles[t.id]):this.removeComponent(t)},s.prototype.executeUpdating=function(){var e=this;for(var t in this.removedRectangles)this.visibleComponents.remove(t);for(var t in this.updatedLocations){var r=this.updatedLocations[t],n=this.visibleComponents.get(t);if(n){var i=this.updatedComponents[t];i&&(n.component=i),n.location=r}else this.visibleComponents.put(t,{component:this.updatedComponents[t],location:r,onSetElement:function(t,r){r?e.componentElements[t.id]=r:delete e.componentElements[t.id]}})}this.updatedComponents={},this.updatedLocations={},this.removedRectangles={}},s.prototype.removeComponent=function(e){this.visibleComponents.hasKey(e.id)&&(this.removedRectangles[e.id]=!0),delete this.updatedComponents[e.id],delete this.updatedLocations[e.id]},s.prototype.isVisibleOnScreen=function(e,t){if(t.isVisible(this.layout)){if(t.disableVisionTrim)return!0;var r=this.getVisionRectangle(e),n=o.getMarginOnScene(t,e.camera.scale);return i.RectangleTesting.testRectangle(r.originX,r.originY,r.width,r.height,t.originX-n.left,t.originY-n.top,t.width+n.left+n.right,t.height+n.top+n.bottom)!==i.RectangleTesting.Result.Disjoint}return!1},s.prototype.getVisionRectangle=function(e){switch(this.mode){case n.LayoutRenderMode.AbsoluteSize:case n.LayoutRenderMode.RelativeSize:return e.visionRectangle;case n.LayoutRenderMode.Screen:return{originX:-e.width/2,originY:-e.height/2,width:e.width,height:e.height}}},s);function s(e,t,r,n){this.screen=e,this.layout=t,this.mode=r,this.componentElements={},this.updatedComponents={},this.updatedLocations={},this.removedRectangles={},this.visibleComponents=n.createSubSharingMap()}t.AspectUpdater=a},function(e,t,r){"use strict";var n,i,o;function a(e,t,r,n){var o=r<e;if(o){var a=e,s=t;e=r,r=a,t=n,n=s}return t<r?i.Disjoint:t<n?i.Cross:o?i.IncludeByRectangle:i.IncludeRectangle}Object.defineProperty(t,"__esModule",{value:!0}),n=t.RectangleTesting||(t.RectangleTesting={}),(o=i=n.Result||(n.Result={}))[o.Disjoint=0]="Disjoint",o[o.Cross=1]="Cross",o[o.IncludeRectangle=2]="IncludeRectangle",o[o.IncludeByRectangle=3]="IncludeByRectangle",n.testPoint=function(e,t,r,n,i,o){return e<=i&&i<=e+r&&t<=o&&o<=t+n},n.testRectangle=function(e,t,r,n,o,s,c,u){var l=a(e,e+r,o,o+c),p=a(t,t+n,s,s+u);return l===i.Disjoint||p===i.Disjoint?i.Disjoint:l===i.Cross||p===i.Cross?i.Cross:l===i.IncludeRectangle&&p===i.IncludeRectangle?i.IncludeRectangle:l===i.IncludeByRectangle&&p===i.IncludeByRectangle?i.IncludeByRectangle:i.Cross},n.iterate=function(e,t,r,n,i){i(e,t),i(e+r,t),i(e+r,t+n),i(e,t+n)},n.allPoints=function(e,t,r,n){return[{x:e,y:t},{x:e+r,y:t},{x:e+r,y:t+n},{x:e,y:t+n}]}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=(i(c,o=a.Component),c.getDerivedStateFromError=function(e){return{error:e}},c.prototype.shouldComponentUpdate=function(e){return this.props.origin.x!==e.origin.x||this.props.origin.y!==e.origin.y||this.props.size.width!==e.size.width||this.props.size.height!==e.size.height||this.props.margin.left!==e.margin.left||this.props.margin.right!==e.margin.right||this.props.margin.top!==e.margin.top||this.props.margin.bottom!==e.margin.bottom||this.props.payload!==e.payload||this.props.context!==e.context||this.props.scale!==e.scale},c.prototype.render=function(){if(this.state.error)return null;var e=this.props,t=e.component,r=e.layout,n=e.context,i=e.origin,o=e.size,s=e.margin,c=e.scale,u=e.payload,l=t.render;return a.createElement(l,{id:t.id,layout:r,payload:u,context:n,size:o,origin:i,margin:s,scale:c})},c);function c(e){var t=o.call(this,e)||this;return t.state={},t}t.AspectComponentRender=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.createSubSharingMap=function(){return new o(this.sharingKeyCounts)},i.prototype.forEachKeys=function(e){for(var t in this.sharingKeyCounts)e(t)},i);function i(){this.sharingKeyCounts={}}t.SharingKeysMap=n;var o=(a.prototype.hasKey=function(e){return e in this.map},a.prototype.forEach=function(e){for(var t in this.map)e(t,this.map[t])},a.prototype.put=function(e,t){if(!(e in this.map)){var r=this.sharingKeyCounts[e];void 0===r&&(r=0),this.sharingKeyCounts[e]=r+1}return this.map[e]=t},a.prototype.get=function(e){return this.map[e]},a.prototype.remove=function(e){var t=delete this.map[e];return t&&0==this.sharingKeyCounts[e]-1&&delete this.sharingKeyCounts[e],t},a);function a(e){this.sharingKeyCounts=e,this.map={}}t.SharingMap=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s,c,u=r(1),l=r(189),p=r(6),h=r(395);(a=o=t.CNodeKind||(t.CNodeKind={}))[a.HTML=0]="HTML",a[a.SVG=1]="SVG",(c=s=t.CNodeCoordinates||(t.CNodeCoordinates={}))[c.Absolute=0]="Absolute",c[c.RelativeBounded=1]="RelativeBounded",c[c.RelativeBoundless=2]="RelativeBoundless";var d,f=(i(m,d=u.Component),m.prototype.render=function(){var e=this;return u.createElement(l.AspectLayoutConsumer,{children:function(t){if(t)switch(function(e,t){return void 0===e?t:e}(e.props.kind,o.HTML)){case o.HTML:return u.createElement("div",{key:t.aspectComponent.component.id,style:e.wrappedStyle(t),ref:function(e){return t.aspectComponent.onSetElement(t.aspectComponent.component,e)}},e.props.children);case o.SVG:return u.createElement("svg",{key:t.aspectComponent.component.id,style:e.wrappedStyle(t),ref:function(e){return t.aspectComponent.onSetElement(t.aspectComponent.component,e)},fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.props.children)}return null}})},m.prototype.wrappedStyle=function(e){var t,r=this.props.coordinates;void 0===r&&(r=s.RelativeBoundless);var n="100%",i="100%",o=e.aspectComponent.location.margin,a=void 0;switch(r){case s.Absolute:t=this.transformAbsolute(e);break;case s.RelativeBounded:var c=e.aspectComponent.location.wrapperSize;t=this.transformRelative(e),n=Math.ceil(c.width),i=Math.ceil(c.height),a=o;break;case s.RelativeBoundless:t=this.transformRelative(e),a=o;break;default:throw new Error("invalid coordinates "+JSON.stringify(r))}return{WebkitTransform:t,transform:t,WebkitTransformOrigin:"0px 0px 0px",transformOrigin:"0px 0px 0px",position:"absolute",overflow:"visible",width:n,height:i,margin:0,paddingLeft:a&&a.left,paddingRight:a&&a.right,paddingTop:a&&a.top,paddingBottom:a&&a.bottom,zIndex:e.zIndex}},m.prototype.transformAbsolute=function(e){var t=new h.LinearTransformation,r=e.screenSize,n=r.width,i=r.height,o=e.camera,a=o.centerX,s=o.centerY,c=o.scale;t.translate(-a,-s),t.scale(c,c),t.translate(n/2,i/2);var u=t.transformPoint(0,0);return"translate("+u.x+"px,"+u.y+"px) scale("+c+","+c+")"},m.prototype.transformRelative=function(e){var t=e.renderMode===p.LayoutRenderMode.AbsoluteSize?e.camera.scale:1;return"translate("+e.aspectComponent.location.originX+"px,"+e.aspectComponent.location.originY+"px) scale("+t+","+t+")"},m);function m(){return null!==d&&d.apply(this,arguments)||this}t.CNode=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(396),i=(Object.defineProperty(o.prototype,"matrix",{get:function(){return this._matrix},enumerable:!0,configurable:!0}),o.prototype.translate=function(e,t){return this._matrix=n.Matrix.multiply(this._matrix,function(e,t){return n.Matrix3D.create(1,0,e,0,1,t,0,0,1)}(e,t)),this},o.prototype.scale=function(e,t){return this._matrix=n.Matrix.multiply(this._matrix,function(e,t){return n.Matrix3D.create(e,0,0,0,t,0,0,0,1)}(e,t)),this},o.prototype.transformPoint=function(e,t){var r=n.Matrix.multiply(n.Vector3D.create(e,t,1),this._matrix),i=r.get(0,2);return{x:r.get(0,0)/i,y:r.get(0,1)/i}},o.link=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=void 0,i=0,a=e;i<a.length;i++){var s=a[i];r=r?n.Matrix.multiply(r,s._matrix):s._matrix}return new o(r)},o.prototype.standardize=function(){var e=this.getTransformationResult(),t=e.deltaX,r=e.deltaY,i=e.scaleX,o=e.scaleY;return this._matrix=n.Matrix3D.E(),this.scale(i,o),this.translate(t,r),this},o.prototype.getTransformationResult=function(){var e=n.Matrix.multiply(n.Vector3D.create(0,0,1),this._matrix),t=n.Matrix.multiply(n.Vector3D.create(1,1,1),this._matrix),r=e.get(0,2),i=t.get(0,2),o=e.get(0,0)/r,a=e.get(0,1)/r;return{deltaX:o,deltaY:a,scaleX:t.get(0,0)/i-o,scaleY:t.get(0,1)/i-a}},o);function o(e){void 0===e&&(e=n.Matrix3D.E()),this._matrix=e}t.LinearTransformation=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.create=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(e.length>this.contentLength&&(e=e.splice(0,this.contentLength));e.length<this.contentLength;)e.push(0);return new o(this.width,this.height,e)},i.prototype.createByGenerator=function(e){for(var t=0,r=[],n=0;n<this.height;++n)for(var i=0;i<this.width;++i)r[t]=e(t,i,n),t++;return new o(this.width,this.height,r)},i.prototype.E=function(){if(this.width!==this.height)throw new Error("width is not equals to height");return this.createByGenerator((function(e,t,r){return t===r?1:0}))},i);function i(e,t){this.width=e,this.height=t,this.contentLength=e*t}t.MatrixFactory=n,t.Matrix2D=new n(2,2),t.Matrix3D=new n(3,3),t.Vector2D=new n(1,2),t.Vector3D=new n(1,3);var o=(a.prototype.clone=function(){if(this.content.find((function(e){return Number.isNaN(e)})))throw new Error("find value who isn't a number in matrix");return new a(this.width,this.height,this.content.slice())},a.prototype.get=function(e,t){return this.isOutOfRange(e,t)?NaN:this.content[e+t*this.width]},a.prototype.set=function(e,t,r){if(Number.isNaN(r))throw Error("can't set not number value at ("+e+", "+t+")");this.isOutOfRange(e,t)||(this.content[e+t*this.width]=r)},a.prototype.toArray=function(){return this.content.slice()},a.prototype.forEach=function(e){for(var t=0,r=0;r<this.height;++r)for(var n=0;n<this.width;++n)e(this.content[t],t,n,r),t++},a.prototype.isOutOfRange=function(e,t){return e<0||e>this.width||t<0||t>this.height},a.plus=function(e,t){if(e.width!==t.width||e.height!==t.height)throw new Error("Matrix size not match");var r=[];return e.forEach((function(e,n,i,o){return r[n]=e+t.get(i,o)})),new a(e.width,e.height,r)},a.inverseOf3D=function(e){var r=t.Matrix3D.create(),n=1/(e.get(0,0)*(e.get(1,1)*e.get(2,2)-e.get(2,1)*e.get(1,2))-e.get(0,1)*(e.get(1,0)*e.get(2,2)-e.get(2,0)*e.get(1,2))+e.get(0,2)*(e.get(1,0)*e.get(2,1)-e.get(2,0)*e.get(1,1)));if(n==1/0)throw new Error("matrix doesn't have inverse");return r.set(0,0,n*(e.get(1,1)*e.get(2,2)-e.get(2,1)*e.get(1,2))),r.set(0,1,n*(e.get(2,1)*e.get(0,2)-e.get(0,1)*e.get(2,2))),r.set(0,2,n*(e.get(0,1)*e.get(1,2)-e.get(1,1)*e.get(0,2))),r.set(1,0,n*(e.get(2,0)*e.get(1,2)-e.get(1,0)*e.get(2,2))),r.set(1,1,n*(e.get(0,0)*e.get(2,2)-e.get(2,0)*e.get(0,2))),r.set(1,2,n*(e.get(1,0)*e.get(0,2)-e.get(0,0)*e.get(1,2))),r.set(2,0,n*(e.get(1,0)*e.get(2,1)-e.get(2,0)*e.get(1,1))),r.set(2,1,n*(e.get(0,1)*e.get(2,0)-e.get(0,0)*e.get(2,1))),r.set(2,2,n*(e.get(0,0)*e.get(1,1)-e.get(0,1)*e.get(1,0))),r},a.multiply=function(e,t){if(e.height!==t.width)throw new Error("matrix1's height is not match matrix2's width");var r=e.width,i=t.height,o=e.height;return new n(r,i).createByGenerator((function(r,n,i){for(var a=0,s=0;s<o;++s)a+=e.get(n,s)*t.get(s,i);return a}))},a.prototype.toString=function(){for(var e=[],t=0,r=0;r<this.height;++r)for(var n=e[r]=[],i=0;i<this.width;++i)n.push(this.content[t]),t++;return"{\n"+e.map((function(e){return"\t"+e.map((function(e){return Math.ceil(100*e)/100})).join("\t")})).join("\n")+"\n}"},a);function a(e,t,r){this.width=e,this.height=t,this.content=r}t.Matrix=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(64),o=r(100),a=r(187),s=r(188);function c(e,t,r,n){if(r.isVisible(e)){if(r.disableVisionTrim)return!0;var a=o.getMarginOnScene(r,n);return i.RectangleTesting.testRectangle(t.originX,t.originY,t.width,t.height,r.originX-a.left,r.originY-a.top,r.width+a.left+a.right,r.height+a.top+a.bottom)!==i.RectangleTesting.Result.Disjoint}return!1}t.renderScreenshot=function(e,t){for(var r={},i=0,u=e.layouts;i<u.length;i++){var l=u[i];r[l]=e.layoutDescription(l)}var p=n.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},n.createElement(a.ScreenRender,{layoutDescriptions:r,visibleComponents:function(e,t){for(var r={},n=o.convertVisionRectangle(t.camera,t.width,t.height),i=function(){},a=0,s=e.layouts;a<s.length;a++){for(var u=s[a],l=[],p=e.layoutDescription(u).renderMode,h=0,d=e.components;h<d.length;h++){var f=d[h];c(u,n,f,t.camera.scale)&&l.push({onSetElement:i,component:f,location:o.getLocationWithMode(f,p,t.camera,t.width,t.height)})}r[u]=l}return r}(e,t),context:t.context,camera:t.camera,width:t.width,height:t.height}));return t.wrappedComponents&&(p=s.wrapContent(t.wrappedComponents,p)),p}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.LayoutRenderMode||(t.LayoutRenderMode={}))[n.AbsoluteSize=0]="AbsoluteSize",n[n.RelativeSize=1]="RelativeSize",n[n.Screen=2]="Screen"},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.RectangleAdapterMode||(t.RectangleAdapterMode={})).Centering="centering",n.Tailor="tailor"},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.CameraTransformation||(t.CameraTransformation={})).Begin="Begin",n.End="End"},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.AnimationMode||(t.AnimationMode={})).Continuous="continuous",n.Immediately="immediately"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.midpoint=function(e,t,r){return e+(t-e)*r},t.unitVector=function(e,t){var r=Math.sqrt(e*e+t*t);return 0===r?{x:1,y:0}:{x:e/r,y:t/r}},t.distance=function(e,t,r,n){var i=e-r,o=t-n;return Math.sqrt(i*i+o*o)}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s,c,u=r(1),l=r(8),p=r(0),h=r(5),d=r(20),f=r(15),m=r(33),y=r(102),A=(i(g,s=u.Component),g.hitTest=function(e,t,r,n,i){var o=t.payload;if(o.selectable){r-=o.originX,n-=o.originY;var a=Math.max(o.hitTestingBoxMargin,i);if(!this.outerEllipseTester(o,a).pointHitTest(r,n))return!1;var s=this.innerEllipseTester(o,a);return!s||!s.pointHitTest(r,n)}return!1},g.outerEllipseTester=function(e,t){var r=e.width+2*t,n=e.height+2*t,i=e.width/2,o=e.height/2;return new y.EllipseTester(i,o,r,n)},g.innerEllipseTester=function(e,t){var r=e.width-2*t,n=e.height-2*t;if(!(r<=0||n<=0)){var i=e.width/2,o=e.height/2;return new y.EllipseTester(i,o,r,n)}},g.prototype.render=function(){if(this.props.layout===f.WhiteLayouts.Component)return u.createElement(m.EditableComponent,o({},this.props));var e=this.props.payload;if(!p.isAkkoWrappedObjectAccessible(e))return null;var t=e.state,r=t.strokeColor,n=t.strokeWidth,i=this.props.size,a=i.width,s=i.height,c=r[0],l=r[1],d=r[2],y=a/2,A=s/2;return u.createElement(h.CNode,{coordinates:e.isPainting?h.CNodeCoordinates.RelativeBoundless:h.CNodeCoordinates.RelativeBounded,kind:h.CNodeKind.SVG},u.createElement("ellipse",{key:this.props.id,cx:y,cy:A,rx:y,ry:A,style:{stroke:"rgb("+c+","+l+","+d+")",fill:"none",strokeWidth:n}}))},g.layouts=Object.freeze(((c={})[f.WhiteLayouts.Graphics]={isVisible:!0},c[f.WhiteLayouts.Component]={isVisible:!0},c)),g=a([d.register.classId(l.EllipseShape)],g));function g(){return null!==s&&s.apply(this,arguments)||this}t.EllipseComponent=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(191);var n=r(0),i=r(192),o=r(405),a=(s.prototype.refreshSceneComponents=function(){this.container.refreshSceneComponents()},s.prototype.findTargetsMap=function(e,t,r){var n,i=this.container.findApplianceComponent(e);if(i){var o=this.findClassRender(i);if(o.findTarget){var a=o.findTarget(i,t,r);if(void 0!==a)return(n={})[e]=a,n}}},s.prototype.release=function(){this.container.release()},s);function s(e,t,r){var a=this;this.findClassRender=function(e){return a.pluginsManager.isPluginAppliance(e)?a.pluginsManager.pluginComponentClass:i.register.findApplianceClass(n.findClassId(e))},this.pluginsManager=t,this.container=new o.ApplianceContainer(e,r,this.findClassRender)}t.WhiteboardRender=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(19),o=(a.prototype.refreshSceneComponents=function(){for(var e=this.applianceManager.scene.components,t={},r=[],i=0;i<e.length;++i){var o=e[i],a=n.findIdentifierWith(o);(l=this.applianceNodes[a])&&l.appliance===o?delete this.applianceNodes[a]:(l=new s(this,a,o),r.push(l)),l.setOrderIndex(i),t[a]=l}for(var a in this.applianceNodes)this.applianceNodes[a].remove();for(var c=0,u=r;c<u.length;c++){var l;(l=u[c]).addToScene()}this.applianceNodes=t},a.prototype.findApplianceComponent=function(e){var t=this.applianceNodes[e];return t?t.appliance:void 0},a.prototype.release=function(){for(var e in this.applianceNodes)this.applianceNodes[e].remove()},a);function a(e,t,r){this.applianceNodes={},this.screen=e,this.findClassRender=r,this.applianceManager=t}t.ApplianceContainer=o;var s=(c.prototype.setOrderIndex=function(e){this.component?this.component.orderIndex=e:this.orderIndex=e},c.prototype.addToScene=function(){var e=this;this.disposer=i.autorun((function(){if(e.component)n.isAkkoWrappedObjectAccessible(e.appliance)&&(e.component.setRectangle(e.appliance.originX,e.appliance.originY,e.appliance.width,e.appliance.height),e.component.setSceneMargin(e.appliance.hitTestingBoxMargin));else if(!e.didRemoved){var t=e.container.findClassRender(e.appliance);e.component=e.container.screen.scene.addComponent({id:e.identifier,originX:e.appliance.originX,originY:e.appliance.originY,width:e.appliance.width,height:e.appliance.height,sceneMargin:e.appliance.hitTestingBoxMargin,disableVisionTrim:t.disableVisionTrim,payload:e.appliance,orderIndex:e.orderIndex,render:t}),delete e.orderIndex}}))},c.prototype.remove=function(){!this.didRemoved&&this.component&&(this.container.screen.scene.removeComponent(this.component),this.disposer&&this.disposer(),this.didRemoved=!0)},c);function c(e,t,r){this.didRemoved=!1,this.container=e,this.identifier=t,this.appliance=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(195),i=r(194),o=r(193),a=(s.prototype.pushPoint=function(e){this.points.push(e)},s.prototype.hitTest=function(e,t,r){return this.hitAnySegments(e,t,r)||this.hitAnyNodeCircles(e,t,r)},s.prototype.hitAnySegments=function(e,t,r){for(var o=e/2,a=1;a<this.points.length;++a){var s=this.points[a-1],c=this.points[a],u={x:c.x-s.x,y:c.y-s.y};if(!n.isZero(u.x)||!n.isZero(u.y)){var l=n.unitVector(n.verticalVector(u)),p=new i.ConvexPolygonTester,h=n.multiply(-o,l),d=n.multiply(o,l);if(p.pushPoint(n.plus(s,d)),p.pushPoint(n.plus(s,h)),p.pushPoint(n.plus(c,h)),p.pushPoint(n.plus(c,d)),p.pointHitTest(t,r))return!0}}return!1},s.prototype.hitAnyNodeCircles=function(e,t,r){for(var n=0;n<this.points.length;++n){var i=this.points[n];if(o.inCircle(i,e/2,t,r))return!0}return!1},s);function s(){this.points=[]}t.PolylineTester=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=(o.prototype.pointHitTest=function(e,t){return(e=(e-this.circleCenterX)/this.width*2)*e+(t=(t-this.circleCenterY)/this.height*2)*t<=1},o.prototype.rectHitTest=function(e,t,r,i){var o=this,a=!1,s=!1;if(n.RectangleTesting.iterate(e,t,r,i,(function(e,t){o.pointHitTest(e,t)?a=!0:s=!0})),a&&s)return n.RectangleTesting.Result.Cross;if(a)return n.RectangleTesting.Result.IncludeRectangle;if(s){for(var c=n.RectangleTesting.allPoints(e,t,r,i),u=0;u<c.length;++u){var l=c[u],p=c[(u+1)%c.length];if(l.x===p.x){if(this.checkCrossVertical(l.x,l.y,p.y))return n.RectangleTesting.Result.Cross}else if(this.checkCrossHorizontal(l.y,l.x,p.x))return n.RectangleTesting.Result.Cross}if(n.RectangleTesting.testPoint(e,t,r,i,this.circleCenterX,this.circleCenterY))return n.RectangleTesting.Result.IncludeByRectangle}return n.RectangleTesting.Result.Disjoint},o.prototype.checkCrossVertical=function(e,t,r){return e=(e-this.circleCenterX)/this.width*2,t=(t-this.circleCenterY)/this.height*2,r=(r-this.circleCenterY)/this.height*2,this.checkCrossGeometrical(Math.abs(e),t,r)},o.prototype.checkCrossHorizontal=function(e,t,r){return e=(e-this.circleCenterY)/this.height*2,t=(t-this.circleCenterX)/this.width*2,r=(r-this.circleCenterX)/this.width*2,this.checkCrossGeometrical(Math.abs(e),t,r)},o.prototype.checkCrossGeometrical=function(e,t,r){if(1<e)return!1;var n=Math.sqrt(1-e*e),i=Math.max(t,r),o=Math.min(t,r);return n<=i&&o<=n||-n<=i&&o<=-n},o);function o(e,t,r,n){this.circleCenterX=e,this.circleCenterY=t,this.width=r,this.height=n}t.EllipseTester=i},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s,c,u=r(1),l=r(0),p=r(8),h=r(5),d=r(20),f=r(15),m=r(33),y=r(102),A=(i(g,s=u.Component),g.hitTest=function(e,t,r,n,i){var o=t.payload;if(o.selectable){var a=Math.max(o.hitTestingBoxMargin,i),s=this.innerRectangleTester(o,a);return!s||!s.pointHitTest(r-o.originX,n-o.originY)}return!1},g.innerRectangleTester=function(e,t){var r=new y.ConvexPolygonTester,n=t,i=t,o=e.width-2*t,a=e.height-2*t;if(!(o<=0||a<=0))return r.pushPoint({x:n,y:i}),r.pushPoint({x:n+o,y:i}),r.pushPoint({x:n+o,y:i+a}),r.pushPoint({x:n,y:i+a}),r},g.prototype.render=function(){if(this.props.layout===f.WhiteLayouts.Component)return u.createElement(m.EditableComponent,o({},this.props));var e=this.props.payload;if(!l.isAkkoWrappedObjectAccessible(e))return null;var t=e.state,r=t.strokeColor,n=t.strokeWidth,i=this.props.size,a=i.width,s=i.height,c=r[0],p=r[1],d=r[2];return u.createElement(h.CNode,{coordinates:e.isPainting?h.CNodeCoordinates.RelativeBoundless:h.CNodeCoordinates.RelativeBounded,kind:h.CNodeKind.SVG},u.createElement("rect",{key:this.props.id,x:0,y:0,width:a,height:s,style:{stroke:"rgb("+c+","+p+","+d+")",fill:"none",strokeWidth:n,strokeLinejoin:"round",strokeLinecap:"round"}}))},g.layouts=Object.freeze(((c={})[f.WhiteLayouts.Graphics]={isVisible:!0},c[f.WhiteLayouts.Component]={isVisible:!0},c)),g=a([d.register.classId(p.RectangleShape)],g));function g(){return null!==s&&s.apply(this,arguments)||this}t.RectangleComponent=A},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s,c,u=r(1),l=r(0),p=r(5),h=r(8),d=r(20),f=r(15),m=r(33),y=r(102),A=(i(g,s=u.Component),g.hitTest=function(e,t,r,n,i){var o=t.payload;if(o.selectable){for(var a=new y.PolylineTester,s=0,c=o.displayPoints();s<c.length;s++){var u=c[s];a.pushPoint(u)}var l=Math.max(o.hitTestingBoxMargin,i),p=o.state.strokeWidth+l;return a.hitTest(p,r-o.originX,n-o.originY)}return!1},g.prototype.render=function(){if(this.props.layout===f.WhiteLayouts.Component)return u.createElement(m.EditableComponent,o({},this.props));var e=this.props.payload;if(!l.isAkkoWrappedObjectAccessible(e))return null;var t=e.state,r=t.strokeColor,n=t.strokeWidth,i=r[0],a=r[1],s=r[2],c=e.isPainting?p.CNodeCoordinates.Absolute:p.CNodeCoordinates.RelativeBounded;return u.createElement(p.CNode,{kind:p.CNodeKind.SVG,coordinates:c},u.createElement("path",{d:e.getPathDefinition(),key:this.props.id,style:{stroke:"rgb("+i+","+a+","+s+")",strokeWidth:n,fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}}))},g.layouts=Object.freeze(((c={})[f.WhiteLayouts.Graphics]={isVisible:!0},c[f.WhiteLayouts.Component]={isVisible:!0},c)),g=a([d.register.classId(h.CurveShape)],g));function g(){return null!==s&&s.apply(this,arguments)||this}t.PencilComponent=A},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s,c=r(1),u=r(0),l=r(8),p=r(5),h=r(20),d=r(15),f=(i(m,a=c.Component),m.hitTest=function(){return!1},m.prototype.render=function(){var e=this.props.payload;if(!u.isAkkoWrappedObjectAccessible(e))return null;var t=this.props.size,r=t.width,n=t.height,i=e.context.getMemberState(e.belongsTo).strokeColor,o=i[0],a=i[1],s=i[2],l={left:0,top:0,width:r,height:n,boxShadow:"0 0 1px 0 #FFFFFF, inset 0 0 1px 0 #FFFFFF",border:"1px solid",borderColor:"rgb("+o+", "+a+", "+s+")",backgroundColor:"rgba("+o+", "+a+", "+s+", 0.15)"};return c.createElement(p.CNode,{kind:p.CNodeKind.HTML},c.createElement("div",{key:this.props.id,className:"selected-group",style:l}))},m.layouts=Object.freeze(((s={})[d.WhiteLayouts.Component]={isVisible:!0},s)),m=o([h.register.classId(l.SelectedGroupRectangleSpace)],m));function m(){return null!==a&&a.apply(this,arguments)||this}t.SelectorComponent=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s,c=r(1),u=r(0),l=r(8),p=r(5),h=r(20),d=r(15),f="operation-point",m=(i(y,a=c.Component),y.hitTest=function(){return!1},y.findTarget=function(e,t,r){if(r.target&&r.target instanceof HTMLElement){var n=r.target;if(n.className.includes(f)){var i=n.className.split(" ");return i[i.length-1]}}},y.prototype.refreshCursorClassIfNeed=function(){var e=this.props.context;if(e.updateCursorClass){var t,r=this.props.payload.draggingContext;t=r?this.mapTargetIdToCursorClass(r.targetId):"cursor-selector",e.updateCursorClass(t)}},y.prototype.render=function(){var e=this.props.payload;if(!u.isAkkoWrappedObjectAccessible(e))return null;this.refreshCursorClassIfNeed();var t=this.props.margin,r=t.left,n=t.right,i=t.top,o=t.bottom,a=e.isUniformScale,s=e.belongsToUserId===this.props.context.observerId?l.BelongsTo.Me:l.BelongsTo.Others,h=e.context.getMemberState(e.belongsToUserId);if(!h)return null;var d=h.strokeColor,f=d[0],m=d[1],y=d[2],A=this.props.size.width-r-n,g=this.props.size.height-i-o,v="rgb("+f+", "+m+", "+y+")",b=this.props.context.deviceType!==l.DeviceType.Touch?4.5:17.5,P=null;return s===l.BelongsTo.Me&&(P=c.createElement(c.Fragment,null,this.renderOperationPoint("left-top cursor-nwse","LT",v),this.renderOperationPoint("right-top cursor-nesw","RT",v),this.renderOperationPoint("left-bottom cursor-nesw","LB",v),this.renderOperationPoint("right-bottom cursor-nwse","RB",v),!a&&this.renderOperationPoint("top cursor-ns","T",v,{left:r+A/2-b}),!a&&this.renderOperationPoint("right cursor-ew","R",v,{top:i+g/2-b}),!a&&this.renderOperationPoint("bottom cursor-ns","B",v,{left:r+A/2-b}),!a&&this.renderOperationPoint("left cursor-ew","L",v,{top:i+g/2-b}))),c.createElement(p.CNode,{kind:p.CNodeKind.HTML},c.createElement("div",{key:this.props.id,className:"editor-box",style:{position:"absolute",top:0,left:0,width:A,height:g,borderColor:v}},P))},y.prototype.mapTargetIdToCursorClass=function(e){switch(e){case"LT":case"RB":return"cursor-nwse";case"LB":case"RT":return"cursor-nesw";case"T":case"B":return"cursor-ns";case"L":case"R":return"cursor-ew"}return""},y.prototype.renderOperationPoint=function(e,t,r,n){return void 0===n&&(n={}),this.props.context.deviceType===l.DeviceType.Touch?c.createElement("div",{className:f+"-touch "+e+" "+t,style:n},c.createElement("div",{style:{backgroundColor:r}})):(n.backgroundColor=r,c.createElement("div",{className:f+"-desktop "+e+" "+t,style:n}))},y.layouts=Object.freeze(((s={})[d.WhiteLayouts.Component]={isVisible:!0},s)),y=o([h.register.classId(l.EditorRectangleSpace)],y));function y(){return null!==a&&a.apply(this,arguments)||this}t.EditorComponent=m},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var s,c,u=r(1),l=r(0),p=r(8),h=r(5),d=r(20),f=r(19),m=r(15),y=r(33),A=(i(g,s=u.Component),g.hitTest=function(){return!0},g.willInterruptEvent=function(e,t,r,n){var i=t.payload;return!(!i||!l.isAkkoWrappedObjectAccessible(i))&&i.editedBy===e.context.observerId},g.prototype.createTextareaBox=function(e){return{scale:this.props.payload.currentScale,width:Math.max(this.shadowTextareaRef.scrollWidth,this.miniWidth),height:Math.max(this.shadowTextareaRef.scrollHeight,this.miniHeight),textLines:[],originalText:e}},g.prototype.componentWillUnmount=function(){this.disposer()},g.prototype.refreshSize=function(e){var t=e.textareaBox;void 0!==t.originalText&&(this.latestTextareaWidth=t.width,this.latestTextareaHeight=t.height)},g.prototype.render=function(){var e=this.props.payload;if(!l.isAkkoWrappedObjectAccessible(e))return null;var t=e.editedBy===this.props.context.observerId;if(this.props.layout===m.WhiteLayouts.Component)return t?null:u.createElement(y.EditableComponent,o({},this.props));this.refreshSize(e);var r=void 0!==e.editedBy,n=e.textareaBox.originalText,i=e.textColor,a="rgb("+i[0]+","+i[1]+","+i[2]+")",s=e.textSize,c=r?"textarea-border":"textarea-layout",p=r?"editable-textarea":"readonly-textarea";t&&(p+=" my-textarea");var d={transform:"scale("+e.currentScale+")",transformOrigin:"top left"},f=e.hitTestingBoxMargin;return r&&(f-=1),u.createElement(h.CNode,{kind:h.CNodeKind.HTML},u.createElement("div",{className:c,style:{borderColor:a,padding:f,width:this.props.size.width+2*f,height:this.props.size.height+2*f,boxSizing:"border-box"}},u.createElement("div",{className:"textarea-container",style:{width:this.latestTextareaWidth,height:this.latestTextareaHeight}},u.createElement("textarea",{className:p,value:n,readOnly:!t,spellCheck:!1,style:o({position:"absolute",width:this.latestTextareaWidth+20,height:this.latestTextareaHeight,color:a,fontSize:s},d),wrap:"off",ref:this.setupTextarea,onChange:this.onTextAreaChange})),t&&u.createElement("div",{style:{width:0,height:0,overflow:"hidden"}},u.createElement("textarea",{className:p,style:{width:0,height:0,visibility:"hidden",fontSize:s},spellCheck:!1,wrap:"off",ref:this.setupShadowTextarea}))))},g.disableVisionTrim=!0,g.layouts=Object.freeze(((c={})[m.WhiteLayouts.Component]={isVisible:!0},c[m.WhiteLayouts.Graphics]={isVisible:!0},c)),g=a([d.register.classId(p.TextareaShape)],g));function g(e){var t=s.call(this,e)||this;return t.shadowTextareaRef=null,t.textareaRef=null,t.miniWidth=0,t.miniHeight=0,t.latestTextareaWidth=0,t.latestTextareaHeight=0,t.onTextAreaChange=function(e){var r=e.target.value;if(t.shadowTextareaRef.value=r,t.props.context.updateTextarea){var n=t.createTextareaBox(r);t.props.context.updateTextarea(n)}},t.setupShadowTextarea=function(e){t.shadowTextareaRef=e;var r=t.props.payload;if(r&&l.isAkkoWrappedObjectAccessible(r)&&t.shadowTextareaRef&&(t.shadowTextareaRef.value=" ",t.miniWidth=t.shadowTextareaRef.scrollWidth,t.miniHeight=t.shadowTextareaRef.scrollHeight,t.shadowTextareaRef.value=r.textareaBox.originalText,t.props.context.updateTextarea)){var n=t.createTextareaBox(t.shadowTextareaRef.value);t.props.context.updateTextarea(n)}},t.setupTextarea=function(e){var r=t.props.payload;r&&l.isAkkoWrappedObjectAccessible(r)&&(t.props.context.observerId===r.editedBy&&e?e.focus():e&&e.blur()),t.textareaRef=e},t.disposer=f.autorun((function(){t.props.payload.editedBy===t.props.context.observerId&&t.textareaRef?(t.textareaRef.readOnly=!1,t.textareaRef.focus()):t.textareaRef&&(t.textareaRef.readOnly=!0,t.textareaRef.blur())})),t}t.TextareaComponent=A},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a,s,c=r(1),u=r(0),l=r(8),p=r(5),h=r(20),d=r(15),f=r(103),m=(i(y,a=c.Component),y.hitTest=function(){return!1},y.prototype.render=function(){var e=this.props.payload;if(!u.isAkkoWrappedObjectAccessible(e))return null;var t=this.props.context,r=t.dynamicPpt,n=t.forcePPTLandscape,i=f.SlideUrl.parse(e.src),o=this.props.size,a=o.width,s=o.height;if(n){var l=a,h=s;a=Math.max(l,h),s=Math.min(l,h)}if(i)return c.createElement(p.CNode,{kind:p.CNodeKind.HTML},c.createElement(f.DynamicComponent,{url:i,dynamicPpt:r}));var d=e.src;return this.props.context.convertIdToUrl&&(d=this.props.context.convertIdToUrl(d)),c.createElement(p.CNode,{kind:p.CNodeKind.HTML},c.createElement("img",{key:this.props.id,src:d,width:a,height:s}))},y.disableVisionTrim=!0,y.layouts=Object.freeze(((s={})[d.WhiteLayouts.Background]={isVisible:!0},s)),y=o([h.register.classId(l.BackgroundImage)],y));function y(){return null!==a&&a.apply(this,arguments)||this}t.BackgroundComponent=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(415);t.createDynamicPpt=function(e){return new n.DynamicPptImplement(e)}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(196),o=r(46),a=r(487),s=r(489),c=(u.prototype.updateSlideState=function(e){if(this.globalStateUpdater){var t=this.globalStateWithSliderState(n({},e));this.globalStateUpdater(t)}},u.prototype.jumpPpt=function(e,t){this.pptJumper&&this.pptJumper(e,t)},u.prototype.setDisableInteractive=function(e){this.slideStateAdapter.setDisableInteractive(e)},u.prototype.equalSlideUrl=function(e){var t=e.uuid,r=e.index;return!!this.dynamicPptState&&this.dynamicPptState.uuid===t&&this.dynamicPptState.pageIndex===r},u.prototype.progressIndexWithSlideUrl=function(e){return this.dynamicPptState&&this.equalSlideUrl(e)?this.dynamicPptState.progressIndex:0},Object.defineProperty(u.prototype,"sliderKey",{get:function(){return this.dynamicPptState?this.dynamicPptState.uuid+"-"+this.dynamicPptState.pageIndex:""},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"progressIndex",{get:function(){if(this.dynamicPptState){var e=this.dynamicPptState[this.sliderKey];return e?e[o.sequenceIndexesKey][o.mainSequenceEventSourceId]:void 0!==this.dynamicPptState.progressIndex?this.dynamicPptState.progressIndex:0}return 0},enumerable:!0,configurable:!0}),u.prototype.globalStateWithSliderState=function(e){return(t={})[u.StateKey]=n({},this.dynamicPptState,e),t;var t},u.prototype.globalStateWith=function(e,t){var r,a,s,c=e&&i.SlideUrl.parse(e);if(c){var l=c.uuid+"-"+c.index,p=this.dynamicPptState&&this.dynamicPptState[l]?this.dynamicPptState[l]:{};p[o.sequenceIndexesKey]=n({},p[o.sequenceIndexesKey],t[o.sequenceIndexesKey]);var h=((r={})[l]=n({},p),r);return(a={})[u.StateKey]=n({},this.dynamicPptState,h,{uuid:c.uuid,pageIndex:c.index}),a}return(s={})[u.StateKey]=n({},this.dynamicPptState,t),s},u.prototype.setGlobalState=function(e){var t,r=e[u.StateKey];if(r){this.dynamicPptState=n({},r);for(var i=0,a=this.nodes;i<a.length;i++){var s=a[i];if(s.url.uuid===r.uuid&&s.url.index===r.pageIndex){var c=r.progressIndex,l=r[this.sliderKey]?r[this.sliderKey]:{},p=n(((t={})[o.mainSequenceEventSourceId]=c,t),l[o.sequenceIndexesKey]),h=n({},l,{sequenceIndexes:p});s.delegate.onSilderStateUpdate(h)}}}else this.dynamicPptState=void 0},u.prototype.getSliderState=function(e){if(this.dynamicPptState){var t=e.uuid+"-"+e.index;return this.dynamicPptState[t]}return{}},u.prototype.addDynamicPptDelegate=function(e,t){if(!this.nodes.some((function(e){return e.delegate===t}))){var r={url:e,delegate:t};this.nodes.push(r)}},u.prototype.removeDynamicPptDelegate=function(e){var t=this.nodes.findIndex((function(t){return t.delegate===e}));-1!==t&&this.nodes.splice(t,1)},u.prototype.getPptState=function(e){var t=i.SlideUrl.parse(e);return t?this.loader.getPptStateWithSlideUrl(t):void 0},u.prototype.getPptStateWithSlideUrl=function(e){return this.loader.getPptStateWithSlideUrl(e)},u.StateKey="__pptState",u);function u(e){var t=e.globalStateUpdater,r=e.userFonts,n=e.preload,i=e.onPPTLoadProgress,o=e.pptJumper,c=this;this.slideStateAdapter=new s.MySlideStateAdapter((function(e){return c.updateSlideState(e)}),(function(e,t){return c.jumpPpt(e,t)})),this.nodes=[],this.onSlideReady=function(e,t){for(var r=0,n=c.nodes;r<n.length;r++){var i=n[r];i.url.uuid===e&&i.url.index===t&&i.delegate.onSlideReady()}},this.globalStateUpdater=t,this.pptJumper=o,this.loader=new a.SlideLoader(r,n,this.onSlideReady,i)}t.DynamicPptImplement=c},function(e,t){e.exports=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),s=r(47),c=r(418),u=r(199),l=r(65),p=r(66);t.sequenceIndexesKey="sequenceIndexes";var h,d=(i(f,h=a.Component),f.prototype.initSequenctIndexes=function(){var e=this.props.data.animations.sequences,t={};if(e.forEach((function(r){var n=r.key;n===p.mainSequenceEventSourceId&&e.get(n).autoPlayFirstSequence?t[n]=1:t[n]=0})),this.props.state&&void 0!==this.props.state.sequenceIndexes){t=o({},t,this.props.state.sequenceIndexes);var r=this.props.state.sequenceIndexes[p.mainSequenceEventSourceId];r<0&&(r=this.props.data.animations.sequenceAnimesCounts[p.mainSequenceEventSourceId]+1+r),t[p.mainSequenceEventSourceId]=r}this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,{sequenceIndexes:t}),this.state={sequenceIndexes:t}},f.prototype.componentWillReceiveProps=function(e){this.setState({sequenceIndexes:e.state.sequenceIndexes})},f.prototype.sequenceIndex=function(){var e=this,t=this.state.sequenceIndexes,r=this.props.data.animations.sequences,n={};return void 0===t?{}:(r.forEach((function(r){var i=r.key;void 0!==t[i]&&(n[i]=Math.min(t[i],e.props.data.animations.sequenceAnimesCounts[i]),n[i]=Math.max(n[i],0))})),n)},f.prototype.onHyperLinkClick=function(e){var t=this.props.data.slideRefIndex[e];if(t&&t.endsWith(".xml")){var r=t.match(/slide(\S*).xml/);null!==r&&this.props.stateAdapter.onPageJumpTo&&this.props.stateAdapter.onPageJumpTo(this.props.data.uuid,parseInt(r[1]))}},f.prototype.onEventSourceClick=function(e){var t,r,n=this.props.data.animations.sequences.get(e);r=void 0!==n&&e!==p.mainSequenceEventSourceId&&this.state.sequenceIndexes[e]>=n.sequencesCount?0:this.state.sequenceIndexes[e]+1;var i=this.state.sequenceIndexes;this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,{sequenceIndexes:o({},i,(t={},t[e]=r,t))})},f.prototype.componentDidUpdate=function(e,t){var r;for(var n in t.sequenceIndexes)if(n!==p.mainSequenceEventSourceId&&void 0!==t.sequenceIndexes[n]&&0!==t.sequenceIndexes[n]&&0===this.state.sequenceIndexes[n])return void this.props.stateAdapter.setState(this.props.data.uuid,this.props.data.index,{sequenceIndexes:o({},t.sequenceIndexes,(r={},r[n]=this.state.sequenceIndexes[n]+1,r))})},f.prototype.render=function(){var e=this.props.data,t=e.slideXML.childElement("p:sld","p:cSld","p:spTree"),r=e.masterXML.childElement("p:sldMaster","p:cSld","p:spTree"),n=e.layoutXML.childElement("p:sldLayout","p:cSld","p:spTree"),i=e.slideXML.childElement("p:sld","p:cSld"),o={uuid:e.uuid,resourceLoader:e.resourceLoader,slideWidth:e.width,slideHeight:e.height,slideIndex:e.index+1};return a.createElement(s.SlideContextProvider,{value:o},a.createElement(c.Background,{className:this.props.className,cSld:i,resourceLoader:e.resourceLoader},a.createElement(u.ShapeGroup,{shapeGroupXML:r,resourceType:"master",zIndex:0}),a.createElement(u.ShapeGroup,{shapeGroupXML:n,resourceType:"layout",zIndex:1}),a.createElement(l.AnimationProvider,{slideAnimations:e.animations,sequenceIndexes:this.sequenceIndex(),disableAnimation:this.props.disableAnimation},a.createElement(u.ShapeGroup,{shapeGroupXML:t,resourceType:"slide",zIndex:2,onEventSourceClick:this.onEventSourceClick.bind(this),onHyperLinkClick:this.onHyperLinkClick.bind(this),sequences:e.animations.sequences}))))},f);function f(e){var t=h.call(this,e)||this;return t.initSequenctIndexes(),t}t.Slide=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(7),c=r(47),u=r(11),l=(i(p,o=a.Component),p.prototype.render=function(){var e=this;return a.createElement(c.SlideContextConsumer,{children:function(t){var r={position:"relative",width:s.toPt(t.slideWidth),height:s.toPt(t.slideHeight),overflow:"hidden"};return a.createElement("div",{className:e.props.className,style:r},e.renderImage(t.slideWidth,t.slideHeight),e.props.children)}})},p.prototype.renderImage=function(e,t){var r=this.props.cSld.extraAttr.getStringOptional("backgroundResId"),n=this.props.cSld.extraAttr.getStringOptional("backgroundImageResourceType");if(r&&n){var i=this.props.cSld.extraElementWithName("backgroundImage").childElementOptional("a:alphaModFix"),o=1;i&&(o=s.parseSTPercentage(i.attr.getNumber("amt")));var c={position:"absolute",left:0,top:0,width:s.toPt(e),height:s.toPt(t),opacity:o},l=this.props.resourceLoader.loadURL(n,r);return a.createElement("img",{src:l,style:c,alt:""})}var p=this.props.cSld.extraAttr.getColorOptional("backgroundColor");return p?a.createElement("div",{style:{position:"absolute",left:0,top:0,width:s.toPt(e),height:s.toPt(t),backgroundColor:u.ensureColor(p)}}):null},p);function p(){return null!==o&&o.apply(this,arguments)||this}t.Background=l},function(e,t){e.exports=u},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function i(e,t){var r=[];e.attr.forEach((function(t){var n=e.attr.getOptional(t);"string"==typeof n?r.push(t+"="+JSON.stringify(n)):r.push(t+"="+n)}));var n="";return t&&(n+="["+e.index+"] "),n+="<"+e.name,0<r.length&&(n+=" "+r.join(" ")),n+">"}Object.defineProperty(t,"__esModule",{value:!0}),t.createXMLNodeDisplayer=function(e,t){var r;return void 0===t&&(t=!1),(r={})[i(e,t)]=function e(t,r){var o=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r].name||"";if(i in t)return!0;t[i]=!0}return!1}(t.elements)||r;if(0<t.elements.length){for(var a={},s=o&&1<t.elements.length,c=0,u=t.elements;c<u.length;c++){var l=u[c],p=i(l,s),h=e(l,r);void 0===l.text?a[p]=h:a[p]=n({},h,{body:l.text})}return a}return null}(e,t),r}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=(a.prototype.get=function(e,t){return this.assignDefaultValue(e,this.getOptional(e),t)},a.prototype.getString=function(e,t){return this.assignDefaultValue(e,this.getStringOptional(e),t)},a.prototype.getNumber=function(e,t){return this.assignDefaultValue(e,this.getNumberOptional(e),t)},a.prototype.getBoolean=function(e,t){return this.assignDefaultValue(e,this.getBooleanOptional(e),t)},a.prototype.getColor=function(e,t){return this.assignDefaultValue(e,this.getColorOptional(e),t)},a.prototype.getColorOptional=function(e){return this.getOptional(e)},a.prototype.getStringOptional=function(e){var t=this.getOptional(e);return"number"==typeof t&&(t=""+t),t},a.prototype.getNumberOptional=function(e){var t=this.getOptional(e);if("string"!=typeof t||(t=parseInt(t),!Number.isNaN(t)))return t},a.prototype.getBooleanOptional=function(e){var t=this.getOptional(e);return"true"===t||"1"===t||"on"===t?t=!0:"false"===t||"0"===t||"off"===t?t=!1:void 0!==t&&(t=!!t),t},a.prototype.assignDefaultValue=function(e,t,r){if(void 0===t&&(t=r),void 0===t)throw new Error("can't find attribute "+JSON.stringify(e)+" from "+this.tagName);return t},a);function a(e){this.tagName=e}var s,c=(i(u,s=o),u.prototype.length=function(){return 0},u.prototype.forEach=function(e){},u.prototype.getOptional=function(e){},u.prototype.has=function(e){return!1},u);function u(e){return s.call(this,e)||this}t.EmptyAttributes=c;var l,p=(i(h,l=o),h.prototype.length=function(){return Object.keys(this.attributes).length},h.prototype.forEach=function(e){for(var t in this.attributes)e(t)},h.prototype.has=function(e){return e in this.attributes},h.prototype.getOptional=function(e){return this.attributes[e]},h);function h(e,t){var r=l.call(this,e)||this;return r.attributes=t,r}t.LocalAttributes=p;var d,f=(i(m,d=o),m.prototype.length=function(){return-1},m.prototype.forEach=function(e){void 0!==this.tagName&&this.picker.forEachAttributes(this.tagName,e)},m.prototype.has=function(e){return void 0!==this.getOptional(e)},m.prototype.getOptional=function(e){var t;return this.cachedValues&&e in this.cachedValues?t=this.cachedValues[e]:void 0!==this.tagName&&(this.cachedXMLMap||(this.cachedXMLMap={}),t=this.picker.getAttribute(this.tagName,e,this.xml,this.cachedXMLMap,this.resourceType),this.cachedValues||(this.cachedValues={}),this.cachedValues[e]=t),t},m);function m(e,t,r){var n=d.call(this,e.name)||this;return n.xml=e,n.picker=t,n.resourceType=r,n}t.ExtraAttributes=f},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c,u=[],l=!1,p=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):p=-1,u.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||l||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){function r(){}e.super_=t,r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(426),i=(Object.defineProperty(o.prototype,"state",{get:function(){return{progressTimestamp:this._progressTimestamp,loopTimestamp:this._loopTimestamp,hasLoopAnimation:this.player.isPlayingLoop}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"progressTimestamp",{get:function(){return this._progressTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"loopTimestamp",{get:function(){return this._loopTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sequenceIndex",{get:function(){return this._sequenceIndex},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isPlayingLoop",{get:function(){return this.player.isPlayingLoop},set:function(e){this.player.isPlayingLoop=e},enumerable:!0,configurable:!0}),o.prototype.pause=function(){for(var e in this.player.isPlayingSequence)this.player.setPlayingSequence(!1,e);this.player.isPlayingLoop=!1},o.prototype.seekToIndex=function(e,t,r){e===this.sequence.get(t).sequencesCount?(this._progressTimestamp[t]=this.sequence.get(t).endAt,this.playToTimestamp[t]=this.sequence.get(t).endAt):0===e?(this._progressTimestamp[t]=this.sequence.get(t).range(e).beginAt,this.playToTimestamp[t]=this.sequence.get(t).range(e).beginAt):(this._progressTimestamp[t]=this.sequence.get(t).range(e-1).endAt,this.playToTimestamp[t]=this.sequence.get(t).range(e-1).endAt),this._sequenceIndex[t]=e,this.player.setPlayingSequence(!1,t),r||this.onAnimationFrame()},o.prototype.playToIndex=function(e,t){if(0===e)this.seekToIndex(e,t);else{var r=this.sequence.get(t).range(e-1);this._progressTimestamp[t]=r.beginAt,this._sequenceIndex[t]=e,this.deviceTimestamp[t]=Date.now(),this.playToTimestamp[t]=r.endAt,this.player.setPlayingSequence(!0,t)}},o);function o(e){var t=this;this._loopTimestamp=Date.now(),this.onTick=function(e){for(var r in t._loopTimestamp=e,t.player.isPlayingSequence){var n=e-t.deviceTimestamp[r],i=t._progressTimestamp[r]+n;i>=t.playToTimestamp[r]?(t._progressTimestamp[r]=t.playToTimestamp[r],t.player.setPlayingSequence(!1,r)):t._progressTimestamp[r]=i,t.deviceTimestamp[r]=e}t.onAnimationFrame()},this.sequence=e.sequence,this.onAnimationFrame=e.onAnimationFrame,this.player=new a(e.sequence,this.onTick);var r={},n={},i={},o={};e.sequence.forEach((function(e){var t=e.key;r[t]=0,n[t]=0,i[t]=0,o[t]=0})),this._progressTimestamp=r,this.playToTimestamp=n,this._sequenceIndex=i,this.deviceTimestamp=o}t.SlidePlayer=i;var a=(Object.defineProperty(s.prototype,"isPlayingSequence",{get:function(){return this._isPlayingSequence},set:function(e){this._isPlayingSequence=e,this.refreshPlayingState()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isPlayingLoop",{get:function(){return this._isPlayingLoop},set:function(e){this._isPlayingLoop=e,this.refreshPlayingState()},enumerable:!0,configurable:!0}),s.prototype.setPlayingSequence=function(e,t){this._isPlayingSequence[t]=e,this.refreshPlayingState()},s.prototype.refreshPlayingState=function(){var e=!1;for(var t in this._isPlayingSequence)if(!0===this._isPlayingSequence[t]||!0===this._isPlayingLoop){e=!0;break}!this.isPlaying&&e?n.addAnimation(s.priority,this.invoker):this.isPlaying&&!e&&n.removeAnimation(s.priority,this.invoker),this.isPlaying=e},s.priority=0,s);function s(e,t){this.isPlaying=!1,this._isPlayingLoop=!1;var r={},n={};e.forEach((function(e){var t=e.key;r[t]=!1,n[t]=!1})),this.playingSequence=r,this._isPlayingSequence=n,this.invoker=t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(427);t.addAnimation=n.addAnimation,t.removeAnimation=n.removeAnimation,t.addAfterAnimationsInvoker=n.addAfterAnimationsInvoker,t.removeAfterAnimationsInvoker=n.removeAfterAnimationsInvoker},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(428);t.addAnimation=n.addAnimation,t.removeAnimation=n.removeAnimation,t.removeAfterAnimationsInvoker=n.removeAfterAnimationsInvoker,t.addAfterAnimationsInvoker=n.addAfterAnimationsInvoker},function(e,t,r){"use strict";function n(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}function i(e,t){-1===e.indexOf(t)&&e.push(t)}function o(){var e=this;this.animationPriorities=[],this.animations={},this.afterAnimationsInvokers=[],this.animationId=null,this.isInAnimationFrame=!1,this.onAnimationFrame=function(){try{var t=Date.now();e.isInAnimationFrame=!0;for(var r=0,n=e.animationPriorities;r<n.length;r++)for(var i=n[r],o=0,a=e.animations[i].slice();o<a.length;o++)(0,a[o])(t);for(var s=0,c=e.afterAnimationsInvokers.slice();s<c.length;s++)(0,c[s])(t);0<e.animationPriorities.length?e.animationId=window.requestAnimationFrame(e.onAnimationFrame):e.animationId=null}finally{e.isInAnimationFrame=!1}}}Object.defineProperty(t,"__esModule",{value:!0}),t.addAnimation=function(e,t){a.addAnimation(e,t)},t.removeAnimation=function(e,t){a.removeAnimation(e,t)},t.addAfterAnimationsInvoker=function(e){a.addAfterAnimationsInvoker(e)},t.removeAfterAnimationsInvoker=function(e){a.removeAfterAnimationsInvoker(e)};var a=new(o.prototype.addAnimation=function(e,t){var r=this.animations[e],n=!1;r||(r=this.animations[e]=[],this.animationPriorities.push(e),this.animationPriorities.sort(),n=1===this.animationPriorities.length),i(r,t),n&&null===this.animationId&&(this.animationId=window.requestAnimationFrame(this.onAnimationFrame))},o.prototype.removeAnimation=function(e,t){var r=this.animations[e];r&&(n(r,t),0===r.length&&(delete this.animations[e],n(this.animationPriorities,e),0!==this.animationPriorities.length||this.isInAnimationFrame||null===this.animationId||(window.cancelAnimationFrame(this.animationId),this.animationId=null)))},o.prototype.addAfterAnimationsInvoker=function(e){i(this.afterAnimationsInvokers,e)},o.prototype.removeAfterAnimationsInvoker=function(e){n(this.afterAnimationsInvokers,e)},o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(106),i=(o.prototype.createMergerCreator=function(e){var t=this;return this.currentShapeState=this.presetStyle,function(r,n,i){return new e(r,Object.assign({},t.presetStyle,n),i)}},o.prototype.animeState=function(e){for(var t in this.animes)this.filterSequenceIntoExecutionStacks(this.animes[t],this.sequences.get(t),e,t);function r(e){var t=[];if(i.executionStacks[e].isEmpty())return"continue";i.executionStacks[e].forEach((function(e){t=t.concat(e.value)})),n[e]=t}var n={},i=this;for(var o in this.executionStacks)r(o);return this.currentShapeState=this.createMerger(n,this.currentShapeState,this.setPlayingLoop.bind(this)).state(e),Object.assign({},this.presetStyle,this.currentShapeState)},o.prototype.setPlayingLoop=function(e){this.playingLoop=e},o.prototype.filterSequenceIntoExecutionStacks=function(e,t,r,n){var i,o=t.sequenceIndexOfTimestamp(r.progressTimestamp[n]);if(void 0!==o)for(i in e){var a=e[i],s=a.getPointerNode();if(void 0!==s)if(s.key===""+o)this.pushIntoExcutionStack(a.getByPointer(),i,parseInt(s.key),n);else{if(!(parseInt(s.key)<o)){if(void 0===s.prevKey)continue;if(parseInt(s.prevKey)>o){this.popOutofExcutionStack(i,parseInt(s.prevKey),n),a.setPointer(s.prevKey);continue}continue}for(;this.pushIntoExcutionStack(a.getByPointer(),i,parseInt(s.key),n),void 0!==(s=a.getPointerNode())&&parseInt(s.key)<=o;);}else{var c=a.tail;if(void 0===c)continue;if(parseInt(c.key)>o){this.popOutofExcutionStack(i,parseInt(c.key),n),a.setPointer(c.key);continue}}}},o.prototype.popOutofExcutionStack=function(e,t,r){var n=r+"_"+t;if(void 0!==this.executionStacks[e]){var i=this.executionStacks[e].get(n);void 0!==i&&i.forEach((function(e){return e.resetCache()})),this.executionStacks[e].remove(n)}},o.prototype.pushIntoExcutionStack=function(e,t,r,i){var o=i+"_"+r;void 0===this.executionStacks[t]?this.executionStacks[t]=new n.LinkedMap([{key:o,value:e}]):this.executionStacks[t].put(o,e)},o);function o(e){this.playingLoop=!1,this.executionStacks={},this.id=e.id,this.animes=e.animes,this.sequences=e.sequences,this.presetStyle=e.presetStyle,this.createMerger=this.createMergerCreator(e.mergerConstructor)}t.AnimationManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.createRanges=function(e){for(var t=[],r=0,n=0;n<e.length;++n){var i=r+e[n];t.push(Object.freeze({beginAt:r,endAt:i,index:n})),r=i}return t},i.prototype.countEndAt=function(){return 0<this.ranges.length?this.ranges[this.ranges.length-1].endAt:0},i.prototype.range=function(e){return this.ranges[e]},i.prototype.sequenceIndexOfTimestamp=function(e){if(0===e)return-1;for(var t=0;t<this.ranges.length;++t){var r=this.ranges[t];if(r.beginAt<e&&e<=r.endAt)return t}},Object.defineProperty(i.prototype,"sequencesCount",{get:function(){return this.ranges.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stepCount",{get:function(){return this.ranges.length},enumerable:!0,configurable:!0}),i);function i(e){var t=e.durationList,r=e.autoPlayFirstSequence;this.autoPlayFirstSequence=r,this.ranges=this.createRanges(t),this.endAt=this.countEndAt()}t.Sequence=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.state=function(e){var t,r=this,n={},i=!1,o=void 0;for(t in this.atomAnimes){var a=this.atomAnimes[t].map((function(t){"indefinite"===t.repeatCount&&(i=!0);var n=t.state(e.progressTimestamp[t.eventSourceId],r._from,e.loopTimestamp);return void 0!==n.soundEffectId&&(o=n.soundEffectId),n})),s=this.merge(t,a);void 0!==s&&(n[t]=s)}return this.mergePPTAttributeToScale(n),this.playingLoopCallback&&this.playingLoopCallback(i),n.soundEffectId=o,n},i.prototype.mergePPTAttributeToScale=function(e){return void 0!==e.ppt_w&&(void 0===e.scaleX?e.scaleX=e.ppt_w:e.scaleX=e.scaleX*e.ppt_w),void 0!==e.ppt_h&&(void 0===e.scaleY?e.scaleY=e.ppt_h:e.scaleY=e.scaleY*e.ppt_h),e},i.prototype.merge=function(e,t){switch(e){case"scaleX":case"scaleY":case"ppt_w":case"ppt_h":var r;return t.forEach((function(e){void 0!==e.value&&(void 0===r?r=e.value:"absolute"===e.animeType?r=e.value:r*=e.value)})),void 0===r?void 0:r;case"translateX":case"translateY":var n;return t.forEach((function(e){void 0!==e.value&&(void 0===n||e.startTimestamp>=n.startTimestamp)&&(n=e)})),void 0===n?void 0:n.value;case"rotate":var i;return t.forEach((function(e){void 0!==e.value&&(void 0===i?i=e.value:i+=e.value)})),void 0===i?void 0:i;case"opacity":var o;return t.forEach((function(e){void 0!==e.value&&(void 0===o||e.startTimestamp>=o.startTimestamp)&&(o=e)})),void 0===o?void 0:o.value;case"fillcolor":var a;return t.forEach((function(e){void 0!==e.value&&(void 0===a||e.startTimestamp>=a.startTimestamp)&&(a=e)})),void 0===a?void 0:a.value;case"visible":var s;return t.forEach((function(e){void 0!==e.value&&(s=e)})),void 0===s?void 0:s.value;case"play":case"stop":var c;return t.forEach((function(e){void 0!==e.value&&(void 0===c||e.startTimestamp>=c.startTimestamp)&&(c=e)})),void 0===c?void 0:c.value;default:return}},i);function i(e,t,r){this.atomAnimes=e,this.playingLoopCallback=r,void 0!==t&&(this._from=t)}t.ShapeAnimeMerger=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=(o.prototype.collect=function(){var e=this.slideXML.childElementOptional("p:sld","p:timing","p:tnLst","p:par","p:cTn","p:childTnLst");if(e)for(var t=e.elementsWithName("p:seq"),r=0;r<t.length;++r){var n=t[r],i=n.childElement("p:cTn").attr.getString("nodeType");this.searchAndIndexParXMLs(n,i,[r],0,void 0)}return this.animations},o.prototype.searchAndIndexParXMLs=function(e,t,r,n,i){var o,a=e.childElement("p:cTn","p:childTnLst").elementsWithName("p:par"),s=e.childElementOptional("p:cTn","p:stCondLst","p:cond");if(s){var c=s.attr.getOptional("delay"),u=s.childElementOptional("p:tgtEl","p:spTgt");u&&(i=u.attr.getString("spid")),o=c?"number"==typeof c?c:parseInt(c)||0:0}else o=0;if(0===a.length)this.handleLeafParXML(e,t,r,n,i);else for(var l=0;l<a.length;++l)this.searchAndIndexParXMLs(a[l],t,r.concat([l]),o+n,i)},o.prototype.handleLeafParXML=function(e,t,r,i,o){var a=e.childElement("p:cTn","p:childTnLst"),s=e.childElement("p:cTn"),c=e.childElement("p:cTn","p:stCondLst","p:cond"),u=a.element.childElement("p:cBhvr","p:tgtEl","p:spTgt").attr.getString("spid"),l=a.elements,p=Number.MIN_SAFE_INTEGER;l.forEach((function(e){var t=0,r=e.childElementOptional("p:cBhvr","p:cTn","p:stCondLst","p:cond");r&&(t=r.attr.getNumber("delay"));var n=e.childElement("p:cBhvr","p:cTn").attr.getNumberOptional("dur");void 0===n&&(n=1),p<n+t&&(p=n+t)}));var h=a.element.childElementOptional("p:cBhvr","p:tgtEl","p:spTgt","p:txEl",new n.TagOrExpr("p:pRg","charRg")),d=h&&h.attr.getStringOptional("st"),f=h&&h.attr.getStringOptional("end"),m=h&&("p:pRg"===h.name?"paragraph":"char"),y=void 0,A=s.childElementOptional("p:endCondLst");void 0!==A&&"onNext"===A.childElement("p:cond").attr.getStringOptional("evt")&&(y="onNext");var g=s.attr.get("repeatCount","none");"indefinite"!==g&&"none"!==g&&0==(g/=1e3)&&(g="none");var v=Object.freeze({eventSourceShapeId:o,spId:u,sequenceType:t,animationXML:a,sequenceIndex:r[1],parallelIndex:r[3],start:d,end:f,textElement:m,isLoop:s.attr.has("repeatCount"),id:s.attr.getString("id"),presetClass:s.attr.getString("presetClass"),presetID:s.attr.getString("presetID"),presetSubtype:s.attr.getString("presetSubtype"),repeatCount:g,repeatEndCondition:y,nodeType:s.attr.getString("nodeType"),delay:c.attr.getNumber("delay")+i,duration:p,autoRev:s.attr.getBoolean("autoRev",!1),soundEffectId:this.parseAnimeSoundEffect(e)});this.animations.push(v)},o.prototype.parseAnimeSoundEffect=function(e){var t=e.childElementOptional("p:cTn","p:subTnLst","p:audio");return void 0===t?void 0:t.childElement("p:cMediaNode","p:tgtEl","p:sndTgt").attr.getString("r:embed")},o);function o(e){this.slideXML=e,this.animations=[]}t.AnimationsCollector=i},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(48),o=r(434),a=r(67);function s(e,t){var r=[];return e.forEach((function(e){var n={animeProps:e,atomAnimeProps:function(e,t){var r=[];return e.animationXML.elements.forEach((function(n){if(o.AnimeRegistry[n.name]){var i=o.AnimeRegistry[n.name](n,e,t);void 0!==i&&r.push(i)}else console.error("unsupport "+n.name+" animation")})),r}(e,t)};void 0===r[e.sequenceIndex]?r[e.sequenceIndex]=[n]:r[e.sequenceIndex].push(n)})),r}t.decomposeSlideAnimations=function(e,t){return function(e,t){var r,n={};for(var i in e)for(var o in e[i]){var a=s(e[i][o],t);void 0===n[i]?n[i]=((r={})[o]=a,r):n[i][o]=a}return n}(function(e){var t={},r={};function n(e){t[e]={},r[e].forEach((function(r){var n,i;if("mainSeq"===r.sequenceType)i=a.mainSequenceEventSourceId;else{if("interactiveSeq"!==r.sequenceType)return console.error("not support sequenceType :",r.sequenceType),t;if(void 0===r.eventSourceShapeId)return console.error("interactiveSeq anime "+r.id+" dont have eventSourceShapeId"),t;i=r.eventSourceShapeId}void 0===t[e]?t[e]=((n={})[i]=[r],n):void 0===t[e][i]?t[e][i]=[r]:t[e][i].push(r)}))}for(var i in e.forEach((function(e){void 0===r[e.spId]?r[e.spId]=[e]:r[e.spId].push(e)})),r)n(i);return t}(e),t)},t.getPresetShapeStyle=function(e,t,r){function o(o){var s;s=void 0===r.shapeParamsIndex[parseInt(o)]?{translateX:0,translateY:0,scaleX:1,scaleY:1,opacity:1,visible:!0,rotate:0,fillcolor:i({r:0,g:0,b:0}),play:0,stop:0}:{translateX:0,translateY:0,scaleX:1,scaleY:1,opacity:void 0===r.shapeParamsIndex[parseInt(o)].opacity?1:r.shapeParamsIndex[parseInt(o)].opacity,visible:!0,rotate:0,fillcolor:r.shapeParamsIndex[parseInt(o)].fillColor||i({r:0,g:0,b:0}),play:0,stop:0};var c={},u=void 0,l=void 0;t.forEach((function(t,r){if(void 0===u){var n=t.key;if(u=e[o][n])for(var i=0,a=u;i<a.length;i++){var s=a[i];if(void 0===l&&void 0!==s){l=s[0];break}}}})),void 0!==l&&"entr"===l.animeProps.presetClass&&(c={visible:!1}),a[o]=n({},s,c)}var a={};for(var s in e)o(s);return a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16);t.AnimeRegistry={"p:animMotion":function(e,t,r){return new n.AnimMotionParser(t,r).parse(e)},"p:set":function(e,t,r){return new n.AnimSetParser(t,r).parse(e)},"p:animEffect":function(e,t,r){return new n.AnimEffectParser(t,r).parse(e)},"p:anim":function(e,t,r){return new n.AnimParser(t,r).parse(e)},"p:animClr":function(e,t,r){return new n.AnimColorParser(t,r).parse(e)},"p:animRot":function(e,t,r){return new n.AnimRotateParser(t,r).parse(e)},"p:animScale":function(e,t,r){return new n.AnimScaleParser(t,r).parse(e)},"p:cmd":function(e,t,r){return new n.AnimCmdParser(t,r).parse(e)}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(201),a=r(16),s=r(7),c=r(49),u={"style.rotation":"rotate","style.visibility":"opacity"};t.AnimePropMap={ppt_x:"translateX",ppt_y:"translateY",rotateX:"rotateX",rotateY:"rotateY",opacity:"opacity"};var l,p=(i(h,l=a.Parser),h.prototype.parse=function(e){var r,n,i=e.childElement("p:cBhvr","p:cTn").attr.getNumber("id"),s=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),l=e.childElement("p:cBhvr"),p=a.parseBehaviorAttr(l),h=e.attr.getString("calcmode"),d=e.attr.getString("valueType"),f=a.getValueHolderOptional(e.childElementOptional("p:from"),d,this.context),m=a.getValueHolderOptional(e.childElementOptional("p:to"),d,this.context),y=a.getValueHolderOptional(e.childElementOptional("p:by"),d,this.context),A=e.attr.getStringOptional("from")||(f?f.attrValue:void 0),g=e.attr.getStringOptional("to")||(m?m.attrValue:void 0),v=e.attr.getStringOptional("by")||(y?y.attrValue:void 0),b=void 0;p.timeFilter&&(b=(new c.TimeFilterResolver).resolve(p.timeFilter));var P=t.AnimePropMap[p.animationAttrNames[0]]||p.animationAttrNames[0];if(u[P]&&(P=u[P]),A||g||v)return(r={})[P]={animeId:""+i,type:"lin"===h?"linear":"discrete",from:this.translateAttrValue(A,P,this.context),to:this.translateAttrValue(g,P,this.context),by:this.translateAttrValue(v,P,this.context),duration:p.duration,delay:this.animation.delay+p.delay,fill:p.fill,timeFilter:b,autoRev:s},r;var w=e.childElementOptional("p:tavLst");if(w){var S,x,C=this.parseAnimatedValueAttr(w,d,this.context),k=C[0],O=C[C.length-1];return S=void 0!==k.formula?o.parse(k.formula).compile():k.attrValueType===a.AnimatedAttrValueType.formulaType?o.parse(k.attrValue).compile():this.translateAttrValue(k.attrValue,P,this.context),x=void 0!==O.formula?o.parse(O.formula).compile():O.attrValueType===a.AnimatedAttrValueType.formulaType?o.parse(O.attrValue).compile():this.translateAttrValue(O.attrValue,P,this.context),(n={})[P]={animeId:i,type:"lin"===h?"linear":"discrete",from:S,to:x,duration:p.duration,delay:this.animation.delay+ +p.delay,fill:p.fill,timeFilter:b,animatedValueAttrs:C,autoRev:s},n}throw console.warn("anime has not even attr driver"),new Error("anime has not even attr driver")},h.prototype.translateAttrValue=function(e,t,r){if(!e)return e;var n=r.shapeParamsIndex[parseInt(this.animation.spId)];if(!n)throw new Error("not found shape "+this.animation.spId+" data");switch(t){case"translateX":return e*r.slideWidth-n.rectangle.x;case"translateY":return e*r.slideHeight-n.rectangle.y;case"scaleX":return e*r.slideWidth/n.rectangle.width;case"scaleY":return e*r.slideHeight/n.rectangle.height;default:return e}},h.prototype.parseAnimatedValueAttr=function(e,t,r){return e.elementsWithName("p:tav").map((function(e){var n=e.childElement("p:val"),i=a.getValueHolder(n,t,r),o=i.attrValue,c=i.attrValueType,u=e.attr.getStringOptional("fmla");return{time:s.parseSTPercentage(e.attr.getNumber("tm")),formula:u?u.replace(/#/g,"$"):u,attrValueType:c,attrValue:o}}))},h);function h(){return null!==l&&l.apply(this,arguments)||this}t.AnimParser=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(16),s=r(49),c=(i(u,o=a.Parser),u.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumber("id"),r=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),n=a.getValueHolderOptional(e.childElementOptional("p:by"),"num",this.context),i=e.attr.getStringOptional("by")||(n?n.attrValue:void 0),o=e.childElement("p:cBhvr"),c=a.parseBehaviorAttr(o),u=void 0;return c.timeFilter&&(u=(new s.TimeFilterResolver).resolve(c.timeFilter)),{rotate:{animeId:""+t,type:"linear",by:i.toString(),duration:c.duration,delay:this.animation.delay+c.delay,timeFilter:u,fill:c.fill,autoRev:r}}},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.AnimRotateParser=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(16),s=r(7),c=r(49),u=(i(l,o=a.Parser),l.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumber("id"),r=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),n=this.resolveAttrDriver(e.childElementOptional("p:from")),i=this.resolveAttrDriver(e.childElementOptional("p:to")),o=this.resolveAttrDriver(e.childElementOptional("p:by")),s=e.childElement("p:cBhvr"),u=a.parseBehaviorAttr(s),l=void 0;return u.timeFilter&&(l=(new c.TimeFilterResolver).resolve(u.timeFilter)),{scaleX:{animeId:""+t,type:"linear",from:n?this.resolveScaleAttrValue(n.x):void 0,to:i?this.resolveScaleAttrValue(i.x):void 0,by:o?this.resolveScaleAttrValue(o.x):void 0,duration:u.duration,delay:this.animation.delay+u.delay,timeFilter:l,fill:u.fill,autoRev:r},scaleY:{animeId:""+t,type:"linear",from:n?this.resolveScaleAttrValue(n.y):void 0,to:i?this.resolveScaleAttrValue(i.y):void 0,by:o?this.resolveScaleAttrValue(o.y):void 0,duration:u.duration,delay:this.animation.delay+u.delay,timeFilter:l,fill:u.fill,autoRev:r}}},l.prototype.resolveScaleAttrValue=function(e){return parseFloat(e)/s.STPercentage100},l.prototype.resolveAttrDriver=function(e){return e?{x:e.attr.getString("x"),y:e.attr.getString("y")}:void 0},l);function l(){return null!==o&&o.apply(this,arguments)||this}t.AnimScaleParser=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(16),s=r(49),c=(i(u,o=a.Parser),u.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),r=e.childElement("p:cBhvr","p:cTn").attr.getNumber("id"),n=e.childElement("p:cBhvr"),i=a.parseBehaviorAttr(n),o=e.attr.getStringOptional("transition"),c=void e.attr.getStringOptional("filter");return i.timeFilter&&(c=(new s.TimeFilterResolver).resolve(i.timeFilter)),o?"in"===o?{opacity:{animeId:""+r,type:"linear",from:0,to:1,fill:i.fill,duration:i.duration,delay:this.animation.delay+i.delay,timeFilter:c,autoRev:t}}:{opacity:{animeId:""+r,type:"linear",from:1,to:0,fill:i.fill,duration:i.duration,delay:this.animation.delay+i.delay,timeFilter:c,autoRev:t}}:void 0},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.AnimEffectParser=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(48),s=r(16),c=r(11),u=r(29),l=r(7),p=r(10),h=(i(d,o=s.Parser),d.prototype.parse=function(e){var t,r,n=e.childElement("p:cBhvr","p:cTn").attr.getNumber("id"),i=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),o=e.attr.getString("clrSpc"),a=(e.attr.getStringOptional("dir"),this.resolveColorBy(o,this.context.slideContext,e.childElementOptional("p:by"))),c=this.resolveColor(this.context.slideContext,e.childElementOptional("p:to")),u=e.childElement("p:cBhvr"),l=s.parseBehaviorAttr(u),p=l.animationAttrNames[0];if("fillcolor"===p)return a?((t={})[p]={animeId:""+n,by:a,duration:l.duration,delay:this.animation.delay+l.delay,fill:l.fill,type:"colorByLinear",autoRev:i},t):c?((r={})[p]={animeId:""+n,to:c,duration:l.duration,delay:this.animation.delay+l.delay,fill:l.fill,type:"colorLinear",autoRev:i},r):void 0},d.prototype.resolveColor=function(e,t){if(t){var r=t.childElementOptional(new p.TagOrExpr("p:rgb","p:hsl"));if(!r){var n=t.childElement(new(p.TagOrExpr.bind.apply(p.TagOrExpr,[void 0].concat(u.ALL_COLOR_TYPE))));return c.getColor(n,e)}switch(r.name){case"p:rgb":return a({r:r.attr.getNumber("r"),g:r.attr.getNumber("g"),b:r.attr.getNumber("b")});case"p:hsl":return a({h:r.attr.getNumber("h")/l.Degree,s:r.attr.getNumber("s")/l.STPercentage100*100,l:r.attr.getNumber("l")/l.STPercentage100*100})}}},d.prototype.resolveColorBy=function(e,t,r){if(r){var n=r.childElementOptional(new p.TagOrExpr("p:rgb","p:hsl"));if(!n){var i=r.childElement(new(p.TagOrExpr.bind.apply(p.TagOrExpr,[void 0].concat(u.ALL_COLOR_TYPE))));return this.colorToColorPatch(c.getColor(i,t))}switch(n.name){case"p:rgb":return{r:n.attr.getNumber("r"),g:n.attr.getNumber("g"),b:n.attr.getNumber("b"),clrSpc:"rgb"};case"p:hsl":return{h:n.attr.getNumber("h")/l.Degree,s:n.attr.getNumber("s")/l.STPercentage100*100,l:n.attr.getNumber("l")/l.STPercentage100*100,clrSpc:"hsl"}}}},d.prototype.colorToColorPatch=function(e){if(e){var t=e.rgb().object();return{r:t.r,g:t.g,b:t.b,clrSpc:"rgb"}}},d);function d(){return null!==o&&o.apply(this,arguments)||this}t.AnimColorParser=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(16),s=(i(c,o=a.Parser),c.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumber("id"),r=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),n=e.childElement("p:cBhvr"),i=a.parseBehaviorAttr(n),o=a.getValueHolderOptional(e.childElementOptional("p:to"),"str",this.context);switch(i.animationAttrNames[0]){case"style.visibility":return{visible:{animeId:""+t,type:"discrete",from:void 0,to:!o||"hidden"!==o.attrValue,fill:i.fill,duration:i.duration,delay:this.animation.delay+i.delay,autoRev:r}};case"style.opacity":return{opacity:{animeId:""+t,type:"discrete",from:void 0,to:parseFloat(o.attrValue.toString()),fill:i.fill,duration:i.duration,delay:this.animation.delay+i.delay,autoRev:r}};default:return}},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.AnimSetParser=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(16),s=(i(c,o=a.Parser),c.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumber("id"),r=(e.attr.getString("type"),e.attr.getString("cmd"),e.childElement("p:cBhvr")),n=a.parseBehaviorAttr(r);return{play:{animeId:""+t,type:"discrete",duration:1,delay:this.animation.delay+n.delay,from:0,to:1,fill:n.fill},stop:{animeId:""+t,type:"discrete",duration:1===n.duration?9999999:n.duration,delay:this.animation.delay+n.delay,from:0,to:1,fill:n.fill}}},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.AnimCmdParser=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(16),s=r(443),c=(i(u,o=a.Parser),u.prototype.parse=function(e){var t=e.childElement("p:cBhvr","p:cTn").attr.getNumber("id"),r=e.childElement("p:cBhvr","p:cTn").attr.getBooleanOptional("autoRev"),n=e.attr.getString("path"),i=e.childElement("p:cBhvr","p:cTn").attr.getNumber("dur"),o=e.childElement("p:cBhvr"),c=a.parseBehaviorAttr(o),u=s.createCurve(n);return{translateX:{animeId:""+t,type:"linear",duration:i,delay:this.animation.delay+c.delay,fill:c.fill,curve:u,autoRev:r},translateY:{animeId:""+t,type:"linear",duration:i,delay:this.animation.delay+c.delay,fill:c.fill,curve:u,autoRev:r}}},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.AnimMotionParser=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(444);t.createCurve=n.createCurve},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(445),i=r(446),o=r(447),a=r(448);function s(e){var t=e.controller,r=e.end,n=r.x-t.x,i=r.y-t.y;return{x:r.x+n,y:r.y+i}}function c(e,t,r){if(t.length!==r)throw new Error("invalid path: sign "+e+" should have "+r+" points ("+2*r+" number)")}function u(e){if(!e)throw new Error("invalid path: expect M")}t.createCurve=function(e){for(var t=[],r=void 0,l=void 0,p=void 0,h=0,d=n.parsePathToNodes(e);h<d.length;h++){var f=d[h],m=f.sign,y=f.points;switch(m){case"M":c(m,y,1),r=y[0],l=y[0],p=void 0;break;case"L":c(m,y,1),u(l),t.push(new o.Straight(l,y[0])),l=y[0],p=void 0;break;case"Z":c(m,y,0),u(l),t.push(new o.Straight(l,r)),l=r,p=void 0;break;case"C":c(m,y,3),u(l),t.push(new a.BezierCurve(l,y[0],y[1],y[2])),p={controller:y[1],end:y[2]},l=y[2];break;case"S":if(!p)throw new Error("invalid path: expect C or S before S");c(m,y,2),u(l);var A=s(p);t.push(new a.BezierCurve(l,A,y[0],y[1])),p={controller:y[0],end:y[1]},l=y[1];break;case"Q":c(m,y,2),u(l),t.push(new a.BezierCurve(l,y[0],y[1])),p={controller:y[0],end:y[1]},l=y[1];break;case"T":if(!p)throw new Error("invalid path: expect Q or T before T");c(m,y,1),u(l),p={controller:A=s(p),end:y[0]},p={controller:A,end:y[0]},l=y[0];break;case"E":break;default:throw new Error("invalid path: unrecognized sign "+JSON.stringify(m))}}return new(i.CurveGroup.bind.apply(i.CurveGroup,[void 0].concat(t)))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePathToNodes=function(e){for(var t=[],r=void 0,n=void 0,i=void 0,o=0,a=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];if(""===i);else if(1===i.length)t.push(i);else{var o=i[0];/[a-zA-Z]/.test(o)?(t.push(o),t.push(i.substring(1))):t.push(i)}}return t}(e.split(/,|\s/i));o<a.length;o++){var s=a[o];if(/^[a-zA-Z]$/.test(s)){if(void 0!==i)throw new Error("invalid path: lack of number");void 0!==r&&t.push({sign:r,points:n}),r=s,n=[]}else{var c=parseFloat(s);if(Number.isNaN(c))throw new Error("invalid path: unrecognized number "+JSON.stringify(s));i=void 0===i?c:void n.push({x:i,y:c})}}if(void 0!==i)throw new Error("invalid path: lack of number");return void 0!==r&&t.push({sign:r,points:n}),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.get=function(e){for(var t,r=0,n=0,i=0,o=this.curves;i<o.length;i++){var a=o[i];if(e<(n=r)+(t=a).length)break;r+=a.length}return t.get(e-n)},i.unionRectangles=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=0,a=e;o<a.length;o++){var s=a[o];s.left<t&&(t=s.left),s.right>r&&(r=s.right),s.top<n&&(n=s.top),s.bottom>i&&(i=s.bottom)}return Object.freeze({left:t,right:r,top:n,bottom:i})},i);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("expect 1 curve minimum");for(var r=[],n=0,o=0,a=e;o<a.length;o++){var s=a[o];r.push(s.rectangle),n+=s.length}this.curves=Object.freeze(e),this.length=n,this.rectangle=i.unionRectangles(r)}t.CurveGroup=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.get=function(e){var t=e/this.length;return t=Math.max(0,t),t=Math.min(1,t),{x:this.beginX+t*this.deltaX,y:this.beginY+t*this.deltaY}},i);function i(e,t){this.beginX=e.x,this.beginY=e.y,this.deltaX=t.x-e.x,this.deltaY=t.y-e.y,this.length=Math.sqrt(this.deltaX*this.deltaX+this.deltaY*this.deltaY),this.rectangle=Object.freeze({left:Math.min(e.x,t.x),right:Math.max(e.x,t.x),top:Math.min(e.y,t.y),bottom:Math.max(e.y,t.y)})}t.Straight=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(449),i=(o.prototype.createRectangle=function(){var e=this.bezier.bbox();return Object.freeze({left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max})},o.prototype.get=function(e){var t=e/this.length;return t=Math.max(0,t),t=Math.min(1,t),this.bezier.get(t)},o);function o(e,t,r,i){this.bezier=new n([e,t,r,i]),this.length=this.bezier.length(),this.rectangle=this.createRectangle()}t.BezierCurve=i},function(e,t){e.exports=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(203);t.CacheTimingAnime=n.CacheTimingAnime;var i=r(24);t.AtomTimingAnime=i.AtomTimingAnime;var o=r(451);t.ColorTimingAnime=o.ColorTimingAnime;var a=r(452);t.MediaTimingAnime=a.MediaTimingAnime;var s=r(453);t.RotateTimeAnime=s.RotateTimeAnime;var c=r(454);t.ScaleTimingAnime=c.ScaleTimingAnime;var u=r(455);t.VisibleTimingAnime=u.VisibleTimingAnime;var l=r(456);t.OpacityTimingAnime=l.OpacityTimingAnime;var p=r(457);t.TranslateTimingAnime=p.TranslateTimingAnime},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(48),s=r(24),c=r(30),u=(i(l,o=s.AtomTimingAnime),l.prototype.getState=function(e,t){var r,n,i=this.rateCaculator.caclulate(e).rate;if("number"!=typeof i)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0};if(r=i,void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom[this.attrName]&&(this.tempFrom[this.attrName]=t[this.attrName]),(n=void 0!==this.tempFrom?this.tempFrom.fillcolor:a({r:0,g:0,b:0}))instanceof a||(n=a({r:0,g:0,b:0})),void 0!==this.to){var o=n.rgb().object(),s=this.to.rgb().object(),c=o.r+r*(s.r-o.r),u=o.g+r*(s.g-o.g),l=o.b+r*(s.b-o.b);return{value:a({r:c,g:u,b:l}),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}}if(n instanceof a||(n=a({r:0,g:0,b:0})),"rgb"===this.by.clrSpc)return c=(o=n.rgb().object()).r+r*this.by.r,u=o.g+r*this.by.g,l=o.b+r*this.by.b,{value:a({r:c,g:u,b:l}),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0};var p=(o=n.hsl().object()).h+r*this.by.h,h=o.s+r*this.by.s,d=o.l+r*this.by.l;return{value:a({h:p,s:h,l:d}),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}},l);function l(e,t,r,n,i){var a=o.call(this,e,t,r,n,i)||this;return a.tempFrom=void 0,a.to=e.props.to,a.by=e.props.by,a.timeFilter=e.props.timeFilter,a.animeType="relative",a.rateCaculator=new c.LinearRateCaculator(a.delay,a.duration,a.timeFilter,a.fill),a}t.ColorTimingAnime=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(24),s=r(30),c=(i(u,o=a.AtomTimingAnime),u.prototype.getState=function(e){var t=this.rateCaculator.caclulate(e).rate;return"number"!=typeof t?{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay}:{value:1===t?this.to:this.from,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay}},u);function u(e,t,r,n,i){var a=o.call(this,e,t,r,n,i)||this;return a.attrName=t,a.from=e.props.from,a.to=e.props.to,a.animeType="absolute",a.rateCaculator=new s.DiscreteRateCaculator(a.delay,a.duration,a.fill),a}t.MediaTimingAnime=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(24),s=r(30),c=(i(u,o=a.AtomTimingAnime),u.prototype.getState=function(e){var t,r=this.rateCaculator.caclulate(e).rate;if("number"!=typeof r)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(r)?this.soundEffectId:void 0};if(t=r,void 0===this.formulas)return{value:t*this.by,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(r)?this.soundEffectId:void 0};var n=this.getExcutingFormula(t,this.formulas),i=void 0;if(void 0!==n){var o=(t-n.startProcessRate)/(n.endProcessRate-n.startProcessRate),a=n.from;i=a+(n.to-a)*o}else i=void 0;return{value:i,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(r)?this.soundEffectId:void 0}},u);function u(e,t,r,n,i){var a=o.call(this,e,t,r,n,i)||this;return a.timeFilter=e.props.timeFilter,a.by=e.props.by,a.animeType="relative",a.rateCaculator=new s.LinearRateCaculator(a.delay,a.duration,a.timeFilter,a.fill),a}t.RotateTimeAnime=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(24),s=r(30),c=(i(u,o=a.AtomTimingAnime),u.prototype.getState=function(e,t){var r,n=this.rateCaculator.caclulate(e).rate;if("number"!=typeof n)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(n)?this.soundEffectId:void 0};if(r=n,void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom[this.attrName]&&(this.tempFrom[this.attrName]=t[this.attrName]),void 0!==this.formulas){void 0===this.currentShapeParams&&void 0!==this.tempFrom&&(this.currentShapeParams={ppt_w:void 0===this.tempFrom.scaleX?this.shapeAnimationParams.ppt_w:this.tempFrom.scaleX*this.shapeAnimationParams.ppt_w,ppt_h:void 0===this.tempFrom.scaleY?this.shapeAnimationParams.ppt_h:this.tempFrom.scaleY*this.shapeAnimationParams.ppt_h,ppt_x:this.shapeAnimationParams.ppt_x,ppt_y:this.shapeAnimationParams.ppt_y});var i=this.getExcutingFormula(r,this.formulas),o=this.cacluateAttr(i,r,this.currentShapeParams);if(void 0===o)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(n)?this.soundEffectId:void 0};var a=void 0;return"ppt_w"===this.attrName?a=o/this.shapeAnimationParams.ppt_w:"scaleX"===this.attrName?a=o:"ppt_h"===this.attrName?a=o/this.shapeAnimationParams.ppt_h:"scaleY"===this.attrName&&(a=o),{value:a,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(n)?this.soundEffectId:void 0}}if(void 0!==this.by)return{value:(s=1)+r*(this.by-s),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(n)?this.soundEffectId:void 0};var s=void 0;return{value:(s=void 0!==this.from?this.from:void 0!==this.tempFrom?"scaleX"===this.attrName?this.tempFrom.scaleX:"scaleY"===this.attrName?this.tempFrom.scaleY:1:1)+r*(this.to-s),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(n)?this.soundEffectId:void 0}},u);function u(e,t,r,n,i){var a=o.call(this,e,t,r,n,i)||this;return a.tempFrom=void 0,a.attrName=t,a.timeFilter=e.props.timeFilter,a.from=e.props.from,a.to=e.props.to,a.by=e.props.by,a.context=r,void 0!==e.props.to?a.animeType="absolute":a.animeType="relative",a.rateCaculator=new s.LinearRateCaculator(a.delay,a.duration,a.timeFilter,a.fill),a}t.ScaleTimingAnime=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(24),s=r(30),c=(i(u,o=a.AtomTimingAnime),u.prototype.getState=function(e,t){void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom.visible&&(this.tempFrom.visible=t.visible);var r=this.rateCaculator.caclulate(e).rate;if(void 0===this.formulas)return"number"==typeof r?{value:0<r?this.to:this.tempFrom.visible,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(r)?this.soundEffectId:void 0}:{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(r)?this.soundEffectId:void 0};if("number"!=typeof r)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(r)?this.soundEffectId:void 0};var n=this.getExcutingFormula(r,this.formulas);return{value:void 0!==n?r<n.endProcessRate?"hidden"!==n.from:"hidden"!==n.to:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(r)?this.soundEffectId:void 0}},u);function u(e,t,r,n,i){var a=o.call(this,e,t,r,n,i)||this;return a.tempFrom=void 0,a.animeType="absolute",a.to=e.props.to,a.rateCaculator=new s.LinearRateCaculator(a.delay,a.duration,void 0,a.fill),a}t.VisibleTimingAnime=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(24),s=r(30),c=(i(u,o=a.AtomTimingAnime),u.prototype.getState=function(e,t){var r,n,i=this.rateCaculator.caclulate(e).rate;return"number"!=typeof i?{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}:(r=i,void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom.opacity&&(this.tempFrom.opacity=t.opacity),"discrete"===this.type?{value:1===r?this.to:this.tempFrom.opacity,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}:{value:(n=void 0!==this.from?this.from:void 0!==this.tempFrom?this.tempFrom.opacity:1)+r*(this.to-n),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0})},u);function u(e,t,r,n,i){var a=o.call(this,e,t,r,n,i)||this;return a.tempFrom=void 0,a.timeFilter=e.props.timeFilter,a.type=e.props.type,a.from=e.props.from,a.to=e.props.to,a.animeType="absolute","discrete"===a.type?a.rateCaculator=new s.DiscreteRateCaculator(a.delay,a.duration,a.fill):a.rateCaculator=new s.LinearRateCaculator(a.delay,a.duration,a.timeFilter,a.fill),a}t.OpacityTimingAnime=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(24),s=r(30),c=(i(u,o=a.AtomTimingAnime),u.prototype.getState=function(e,t){var r,n,i=this.rateCaculator.caclulate(e).rate;if("number"!=typeof i)return{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0};if(r=i,void 0===this.tempFrom?this.tempFrom=t:void 0===this.tempFrom[this.attrName]&&(this.tempFrom[this.attrName]=t[this.attrName]),void 0!==this.curve){var o=this.curve.get(r*this.curve.length);return"translateX"===this.attrName?{value:o.x*this.slideWidth,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}:{value:o.y*this.slideHeight,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}}if(void 0!==this.formulas){void 0===this.currentShapeParams&&void 0!==this.tempFrom&&(this.currentShapeParams={ppt_w:this.shapeAnimationParams.ppt_w,ppt_h:this.shapeAnimationParams.ppt_h,ppt_x:void 0===this.tempFrom.translateX?this.shapeAnimationParams.ppt_x:this.tempFrom.translateX/this.slideWidth+this.shapeAnimationParams.ppt_x,ppt_y:void 0===this.tempFrom.translateY?this.shapeAnimationParams.ppt_y:this.tempFrom.translateY/this.slideHeight+this.shapeAnimationParams.ppt_y});var a=this.getExcutingFormula(r,this.formulas),s=this.cacluateAttr(a,r,this.currentShapeParams);return void 0===s?{value:void 0,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}:"translateX"===this.attrName?{value:s*this.slideWidth-this.shapeParam.rectangle.x,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}:{value:s*this.slideHeight-this.shapeParam.rectangle.y,animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}}return{value:(n=void 0!==this.from?this.from:void 0!==this.tempFrom?"translateX"===this.attrName?this.tempFrom.translateX:this.tempFrom.translateY:0)+r*(this.to-n),animeType:this.animeType,fill:this.fill,presetClass:this.presetClass,startTimestamp:this.delay,soundEffectId:this.playingSoundEffecting(i)?this.soundEffectId:void 0}},u);function u(e,t,r,n,i){var a=o.call(this,e,t,r,n,i)||this;return a.tempFrom=void 0,a.slideWidth=r.slideWidth,a.slideHeight=r.slideHeight,a.attrName=t,a.timeFilter=e.props.timeFilter,a.from=e.props.from,a.to=e.props.to,a.curve=e.props.curve,a.animeType="absolute",a.rateCaculator=new s.LinearRateCaculator(a.delay,a.duration,a.timeFilter,a.fill),a}t.TranslateTimingAnime=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(204),c=(i(u,o=a.Component),u.prototype.render=function(){return this.manager?this.props.children(this.manager.animeState(this.props)):this.props.children(void 0)},u);function u(e){var t=o.call(this,e)||this;return t.manager=e.animationManagers[e.id],t}t.ShapeAnimation=function(e){return a.createElement(s.AnimeContextConsumer,{children:function(t){return t?a.createElement(c,{id:e.spId,animationManagers:t.animationManagers,progressTimestamp:t.progressTimestamp,loopTimestamp:t.loopTimestamp,hasLoopAnimation:t.hasLoopAnimation,children:function(t){return e.children(t)}}):e.children(void 0)}})},t.TextAnimation=function(e){return a.createElement(s.AnimeContextConsumer,{children:function(t){return t?a.createElement(c,{id:e.spId+":"+e.textElement+":"+e.start+":"+e.end,animationManagers:t.animationManagers,progressTimestamp:t.progressTimestamp,loopTimestamp:t.loopTimestamp,hasLoopAnimation:t.hasLoopAnimation,children:function(t){return e.children(t)}}):e.children(void 0)}})}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(1),c=r(460),u=r(464),l=r(465),p=r(466),h=(i(d,a=s.Component),d.prototype.render=function(){var e=d.subGraphClassWithURI(this.uri);return s.createElement(e,o({},this.props))},d.subGraphClassWithURI=function(e){switch(e){case"http://schemas.openxmlformats.org/drawingml/2006/table":return c.TableGraph;case"http://schemas.openxmlformats.org/drawingml/2006/chart":return u.ChartGraph;case"http://schemas.openxmlformats.org/drawingml/2006/diagram":return l.DiagramGraph;default:return console.debug("Unsupported graph",e),p.Unsupported}},d);function d(e){var t=a.call(this,e)||this;return t.uri=t.props.graphXML.childElement("a:graphic","a:graphicData").attr.getString("uri"),t}t.Graph=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(11),c=r(7),u=r(207),l=(i(p,o=a.Component),p.prototype.render=function(){var e=this,t=this.props.graphXML.childElement("a:graphic","a:graphicData","a:tbl"),r=t.childElement("a:tblGrid").elementsWithName("a:gridCol"),n=t.elementsWithName("a:tr"),i=n.map((function(e,t){return e.attr.getNumber("h")})),o=n.map((function(t,n){var o=t.attr.getNumber("h"),s=t.elementsWithName("a:tc").map((function(e,t){return r[t].attr.getNumber("w")})),c=t.elementsWithName("a:tc").map((function(t,a){var c=r[a].attr.getNumber("w");return e.renderCol(t,n,a,c,o,s,i)}));return a.createElement("tr",{key:"tr-"+n},c)}));return a.createElement("table",{style:{borderCollapse:"collapse"}},a.createElement("tbody",null,o))},p.prototype.renderCol=function(e,t,r,n,i,o,l){var p=e.childElement("a:tcPr"),h=p.extraAttr.getColor(t+"-"+r+"-fillColor",s.UNDEFINED),d=(p.extraAttr.getColorOptional(t+"-"+r+"-fontColor"),p.extraAttr.getStringOptional(t+"-"+r+"-fontFamily")),f=p.extraAttr.getBoolean(t+"-"+r+"-isBold",!1),m=p.extraAttr.getBoolean(t+"-"+r+"-isItalic",!1),y=p.extraAttr.getString(t+"-"+r+"-bottomBorderStyle","none"),A=p.extraAttr.getNumber(t+"-"+r+"-bottomBorderWidth",0),g=p.extraAttr.getColorOptional(t+"-"+r+"-bottomBorderColor",s.UNDEFINED),v=p.extraAttr.getString(t+"-"+r+"-topBorderStyle","none"),b=p.extraAttr.getNumber(t+"-"+r+"-topBorderWidth",0),P=p.extraAttr.getColorOptional(t+"-"+r+"-topBorderColor",s.UNDEFINED),w=p.extraAttr.getString(t+"-"+r+"-leftBorderStyle","none"),S=p.extraAttr.getNumber(t+"-"+r+"-leftBorderWidth",0),x=p.extraAttr.getColorOptional(t+"-"+r+"-leftBorderColor",s.UNDEFINED),C=p.extraAttr.getString(t+"-"+r+"-rightBorderStyle","none"),k=p.extraAttr.getNumber(t+"-"+r+"-rightBorderWidth",0),O=p.extraAttr.getColorOptional(t+"-"+r+"-rightBorderColor",s.UNDEFINED),_=e.childElementOptional("a:txBody");if(void 0===_)return null;var T=e.attr.getNumber("gridSpan",1),E=e.attr.getNumber("rowSpan",1),M=e.attr.getBoolean("hMerge",!1),I=e.attr.getBoolean("vMerge",!1),j=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return[].concat.apply([],e).reduce((function(e,t){return e+t}),0)}(o.slice(r,r+T));return M||I?null:a.createElement("td",{colSpan:T,rowSpan:E,style:{position:"relative",fontFamily:d&&d,fontWeight:f?"bold":"normal",fontStyle:m?"italic":"normal",borderBottomStyle:y,borderTopStyle:v,borderLeftStyle:w,borderRightStyle:C,borderBottomWidth:c.toPt(A),borderTopWidth:c.toPt(b),borderLeftWidth:c.toPt(S),borderRightWidth:c.toPt(k),borderBottomColor:s.ensureColor(g),borderTopColor:s.ensureColor(P),borderLeftColor:s.ensureColor(x),borderRightColor:s.ensureColor(O),maxWidth:c.toPt(j),height:c.toPt(i),backgroundColor:s.ensureColor(h),boxSizing:"border-box"},key:"tc-"+t+"-"+r,className:"tc-"+t+"-"+r},a.createElement(u.TxBody,{insideTable:!0,width:j,height:i,txBodyXML:_,resourceType:"slide"}))},p);function p(){return null!==o&&o.apply(this,arguments)||this}t.TableGraph=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(11),c=r(208),u=r(7),l=r(47),p=r(462),h=r(463),d=(i(f,o=a.Component),f.prototype.render=function(){var e,t=this,r=this.props.paragraphXML.extraAttr.getBoolean("placeHolderType");if("slide"!==this.props.resourceType&&r)return a.createElement("div",{key:""+this.props.paragraphIndex});var n=this.runElements.map((function(r,n){var i=t.renderRunOrBrOrEnd(r,t.props.paragraphIndex,n,t.fontScale,t.lineHeightInXml,t.indent,t.props.firstRangeXML,e);return e=r,i})),i=0;if(this.props.firstRangeXML){if(this.buChar&&"a:buNone"!==this.buChar.name){var o=this.props.firstRangeXML.extraAttr.getNumber("sz"),l=this.props.firstRangeXML.extraAttr.getString("fontType");n.unshift(a.createElement("span",{key:"bu-"+ ++i,style:{display:"inline-block",position:"absolute",color:void 0!==this.buClr?s.ensureColor(this.buClr):s.ensureColor(this.props.firstRangeXML.extraAttr.getColorOptional("color")),fontSize:o*this.fontScale+"pt",lineHeight:this.lineHeight,fontFamily:l,textIndent:u.toPt(this.indent)}},a.createElement(p.Bullet,{paragraphXML:this.props.paragraphXML,firstRangeXML:this.props.firstRangeXML,buXML:this.buChar,buIndexCounter:this.props.buIndexCounter})))}}else{o=0;var h=this.props.paragraphXML.childElementOptional("a:endParaRPr");o=h?h.extraAttr.getNumber("sz"):this.props.paragraphXML.extraAttr.getNumber("sz",0),n.push(a.createElement("span",{key:"end-"+ ++i,style:{display:"block",lineHeight:this.lineHeight,fontSize:o*this.fontScale+"pt"}},a.createElement("br",null)))}return this.buChar&&"a:buNone"===this.buChar.name&&this.props.buIndexCounter.reset(),a.createElement("li",{key:""+this.props.paragraphIndex,className:"Paragraph-"+this.props.paragraphIndex,style:{whiteSpace:this.props.isTextWrap?"normal":"nowrap",paddingTop:this.paddingTop,paddingBottom:this.paddingBottom,marginLeft:u.toPt(this.props.paragraphXML.extraAttr.getNumber("marL")),marginRight:u.toPt(this.props.paragraphXML.extraAttr.getNumber("marR",0)),lineHeight:"1pt",listStyleType:"none",textAlign:c.toTextAlign(this.align)}},n)},f.prototype.getPaddingBottom=function(e,t){return this.props.isLast&&!this.props.spcFirstLastPara?"0pt":this.getPadding(e,t)},f.prototype.getPaddingTop=function(e,t){return this.props.isFirst&&!this.props.spcFirstLastPara?"0pt":this.getPadding(e,t)},f.prototype.getPadding=function(e,t){if(e){if(-1!==e.indexOf("pt"))return e;if(t)return t*parseFloat(e)/100+"pt"}return"0pt"},f.prototype.renderRunOrBrOrEnd=function(e,t,r,n,i,o,s,c){var u=this;return a.createElement(l.SlideContextConsumer,{key:"ctx-"+t+"-"+r,children:function(l){return a.createElement(h.Run,{key:t+"-"+r,isTextWrap:u.props.isTextWrap,paragraphHasRange:void 0!==s,rNodeOrBrNode:e,fontScale:n,runIndex:r,indent:0===r&&u.noneBuChar?o:void 0,slideIndex:l.slideIndex,prevElement:c,lineHeight:i,align:u.align})}})},f.prototype.getBigestLineHeight=function(e,t,r){var n=void 0;return e.forEach((function(e,i){switch(e.name){case"a:fld":case"a:r":case"a:br":case"a:endParaRPr":var o=1.2*e.extraAttr.getNumber("sz",0)*t*r;(void 0===n||n<o)&&(n=o)}})),n},f);function f(e){var t=o.call(this,e)||this;t.runElements=e.paragraphXML.elements.filter((function(e){return["a:fld","a:r","a:br","a:endParaRPr"].includes(e.name)})),t.biggestFontSize=t.runElements.slice().filter((function(e){return"a:r"===e.name})).map((function(e){return e.extraAttr.getNumber("sz",0)})).sort((function(e,t){return e-t}))[0],t.fontScale=.01;var r=t.props.bodyPrXML.childElementOptional("a:normAutofit");if(r&&(t.fontScale=u.parseSTPercentage(r.attr.getNumber("fontScale",u.STPercentage100))/100),t.buChar=t.props.paragraphXML.extraElementWithName("bu"),t.indent=t.props.paragraphXML.extraAttr.getNumber("indent"),t.lineHeightInXml=t.props.paragraphXML.extraAttr.get("lineHeight"),"number"!=typeof t.lineHeightInXml)t.lineHeight=parseFloat(t.lineHeightInXml)*t.fontScale*100+"pt";else{var n=t.getBigestLineHeight(t.runElements.slice(),t.lineHeightInXml,t.fontScale);t.lineHeight=void 0===n?void 0:n+"pt"}return t.buClr=t.props.paragraphXML.extraAttr.getColorOptional("buClr"),t.noneBuChar=void 0===t.buChar||"a:buNone"===t.buChar.name,t.paddingBottom=t.getPaddingBottom(t.props.paragraphXML.extraAttr.getStringOptional("a:spcAft"),t.biggestFontSize),t.paddingBottom=t.getPaddingTop(t.props.paragraphXML.extraAttr.getStringOptional("a:spcBef"),t.biggestFontSize),t.align=t.props.paragraphXML.extraAttr.getString("algn"),t}t.Paragraph=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=(i(c,o=a.Component),c.prototype.render=function(){switch(this.props.buXML.name){case"a:buChar":return this.props.buIndexCounter.reset(),this.renderBuChar(this.props.buXML.attr.getString("char"));case"a:buAutoNum":return this.renderAutoNum(this.props.buXML);case"a:buNone":case"a:buBlip":return this.props.buIndexCounter.reset(),""}},c.prototype.renderAutoNum=function(e){var t=e.attr.getString("type"),r=e.attr.getNumber("startAt",1),n=this.props.buIndexCounter.get(this.props.paragraphXML,r,this.props.firstRangeXML)+r;switch(t){case"alphaLcParenBoth":return"("+(n+9).toString(36)+")";case"alphaLcParenR":return(n+9).toString(36)+")";case"alphaLcPeriod":return(n+9).toString(36)+".";case"alphaUcParenBoth":return"("+(n+9).toString(36).toUpperCase()+")";case"alphaUcParenR":return(n+9).toString(36).toUpperCase()+")";case"alphaUcPeriod":return(n+9).toString(36).toUpperCase()+".";case"arabicParenBoth":return"("+n+")";case"arabicParenR":return n+")";case"arabicPeriod":return n+".";case"arabicPlain":return""+n;case"ea1JpnChsDbParenBoth":return"("+n.toLocaleString("zh-Hans-CN-u-nu-hanidec")+")";case"ea1JpnChsDbParenR":return n.toLocaleString("zh-Hans-CN-u-nu-hanidec")+")";case"ea1JpnChsDbPeriod":return n.toLocaleString("zh-Hans-CN-u-nu-hanidec")+".";case"ea1JpnChsDbPlain":return""+n.toLocaleString("zh-Hans-CN-u-nu-hanidec");case"romanLcParenBoth":return"("+this.romanize(n).toLowerCase()+")";case"romanLcParenR":return this.romanize(n).toLowerCase()+")";case"romanLcPeriod":return this.romanize(n).toLowerCase()+".";case"romanUcParenBoth":return"("+this.romanize(n)+")";case"romanUcParenR":return this.romanize(n)+")";case"romanUcPeriod":return this.romanize(n)+".";default:return n+"."}},c.prototype.romanize=function(e){var t={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},r="";for(var n in t)for(;t[n]<=e;)r+=n,e-=t[n];return r},c.prototype.renderBuChar=function(e){switch(e){case"l":return"";case"":return"";case"":return"";case"":return"";case"v":return"";case"u":return"";case"&":return"";default:return e}},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.Bullet=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(11),c=r(7),u=(i(l,o=a.Component),l.prototype.hasUnderLine=function(e){switch(e){case"none":return"none";default:return"underline"}},l.prototype.render=function(){var e=this;return this.props.text?a.createElement("span",{style:{display:"inline-flex",justifyContent:"space-between",backgroundColor:s.ensureColor(this.props.highlightColor),textDecoration:this.hasUnderLine(this.props.underLineStyle),width:"100%"}},Array.from(this.props.text).map((function(t,r){return 0===r&&e.props.indent?a.createElement("span",{key:"run-text-"+r,style:{display:e.props.indent?"inline-block":"inline",lineHeight:e.props.lineHeight,whiteSpace:e.props.isTextWrap?"pre-wrap":"pre",fontSize:e.props.fontSize+"pt",fontFamily:e.props.fontFamily,fontWeight:e.props.isBold?"bold":"normal",color:s.ensureColor(e.props.color),fontStyle:e.props.isItalic?"italic":"normal",letterSpacing:e.props.letterSpacing/100+"pt",textIndent:e.props.indent?c.toPt(e.props.indent):0}},t):a.createElement("span",{key:"run-text-"+r,style:{display:"inline",lineHeight:e.props.lineHeight,whiteSpace:e.props.isTextWrap?"pre-wrap":"pre",fontSize:e.props.fontSize+"pt",fontFamily:e.props.fontFamily,fontWeight:e.props.isBold?"bold":"normal",color:s.ensureColor(e.props.color),fontStyle:e.props.isItalic?"italic":"normal",letterSpacing:e.props.letterSpacing/100+"pt"}},t)}))):null},l);function l(e){return o.call(this,e)||this}var p,h=(i(d,p=a.Component),d.prototype.render=function(){switch(this.props.rNodeOrBrNode.name){case"a:fld":case"a:r":return this.renderText();case"a:br":return a.createElement("span",{key:"br-"+this.props.runIndex,style:{lineHeight:this.lineHeight,fontSize:this.fontSize}},a.createElement("br",null));case"a:endParaRPr":if(this.props.prevElement&&"a:br"===this.props.prevElement.name)return a.createElement("span",{key:"endParaRPr-"+this.props.runIndex,style:{lineHeight:this.lineHeight,display:"inline",fontSize:this.fontSize}},a.createElement("br",null));default:return null}},d.prototype.hasUnderLine=function(e){switch(e){case"none":return"none";default:return"underline"}},d.prototype.renderText=function(){var e=void 0,t=this.props.rNodeOrBrNode,r=t.attr.getStringOptional("type");if(r)switch(r){case"slidenum":e=this.props.slideIndex;break;default:e=new Date(Date.now()).toLocaleDateString()}var n,i,o,l=t.childElement("a:t"),p=t.extraAttr.getBoolean("b",!1),h=t.extraAttr.getString("u","none"),d=t.extraAttr.getNumber("spc",0),f=t.extraAttr.getBoolean("i",!1),m=t.extraAttr.getColorOptional("color"),y=t.extraAttr.getNumber("sz")*this.props.fontScale,A=t.extraAttr.getString("fontType"),g=t.extraAttr.getColorOptional("highlight"),v=t.childElementOptional("a:rPr");if(void 0!==v&&(n=v.attr.getNumberOptional("baseline")),void 0===n)i=e||l.text;else{var b=void 0;i=0<n?(b=40,a.createElement("sup",{style:{fontSize:"small",verticalAlign:b+n/c.STPercentage100*100+"%"}},e||l.text)):n<0?(b=0,a.createElement("sub",{style:{fontSize:"small",verticalAlign:b+n/c.STPercentage100*100+"%"}},e||l.text)):e||l.text}return o="string"==typeof this.props.lineHeight?this.props.lineHeight:1.2*y*this.props.lineHeight+"pt","dist"===this.props.align?a.createElement(u,{fontSize:y,text:""+i,lineHeight:o,indent:this.props.indent,isTextWrap:this.props.isTextWrap,isBold:p,isItalic:f,underLineStyle:h,fontFamily:A,letterSpacing:d,color:m,highlightColor:g}):a.createElement("span",{key:"run-"+this.props.runIndex,style:{display:this.props.indent?"inline-block":"inline",lineHeight:o,whiteSpace:this.props.isTextWrap?"pre-wrap":"pre",backgroundColor:s.ensureColor(g),fontSize:y+"pt",textDecoration:this.hasUnderLine(h),fontFamily:A,fontWeight:p?"bold":"normal",color:s.ensureColor(m),fontStyle:f?"italic":"normal",letterSpacing:d/100+"pt",overflowWrap:"break-word",textIndent:this.props.indent?c.toPt(this.props.indent):0}},i)},d);function d(e){var t=p.call(this,e)||this;return"string"==typeof t.props.lineHeight?t.lineHeight=t.props.lineHeight:t.lineHeight=t.props.rNodeOrBrNode.extraAttr.getNumber("sz")*t.props.fontScale*1.2*t.props.lineHeight+"pt",t.fontSize=t.props.rNodeOrBrNode.extraAttr.getNumber("sz")*t.props.fontScale+"pt",t}t.Run=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=(i(c,o=a.Component),c.prototype.render=function(){return a.createElement("div",null)},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.ChartGraph=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=(i(c,o=a.Component),c.prototype.render=function(){return a.createElement("div",null)},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.DiagramGraph=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=(i(c,o=a.Component),c.prototype.render=function(){return a.createElement("div",null)},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.Unsupported=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(7),c=(i(u,o=a.Component),u.prototype.componentWillReceiveProps=function(e){!1===this.props.play&&!0===e.play&&this.player.current&&(!0===e.stop?this.player.current.pause():(e.startTime?this.player.current.currentTime=this.props.startTimePerfix+e.startTime:this.player.current.currentTime=this.props.startTimePerfix,this.player.current.play())),!1===this.props.stop&&!0===e.stop&&this.player.current&&this.player.current.pause()},u.prototype.render=function(){return a.createElement("audio",{src:this.props.audioURL,ref:this.player,controls:!0,style:{width:s.toPt(this.props.width),height:s.toPt(this.props.height)}})},u);function u(e){var t=o.call(this,e)||this;return t.player=a.createRef(),t}t.Audio=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s,c=r(1),u=r(7),l=r(10),p=r(469),h=r(107),d=r(104),f=(i(m,s=c.Component),m.prototype.identification=function(){return this.props.slideIndex+"-"+this.spId+"-"},m.prototype.componentWillMount=function(){return o(this,void 0,void 0,(function(){var e,t,r,n,i,o,s;return a(this,(function(a){switch(a.label){case 0:return e=this.props,t=e.uuid,r=e.resourceType,n=e.slideIndex,i=e.resId,o=h.ResourcePreLoader.buildCacheKey(t,n,r,i),[4,d.get(o)];case 1:return void 0!==(s=a.sent())?this.setState({imageURL:URL.createObjectURL(s)}):console.warn(o+" can't cached"),[2]}}))}))},m.prototype.render=function(){var e=this.props.imageXML.childElementOptional("p:blipFill","a:stretch","a:fillRect"),t=(e?e.attr.getNumber("l",0)/u.STPercentage100:0)*this.props.width,r=(e?e.attr.getNumber("b",0)/u.STPercentage100:0)*this.props.height,n=(e?e.attr.getNumber("r",0)/u.STPercentage100:0)*this.props.width,i=(e?e.attr.getNumber("t",0)/u.STPercentage100:0)*this.props.height;return void 0===this.props.imageXML.childElementOptional("p:spPr",new l.TagOrExpr("a:prstGeom","a:custGeom"))?c.createElement("img",{src:this.state.imageURL,style:{width:u.toPt(this.props.width),height:u.toPt(this.props.height)},alt:""}):c.createElement(p.LumiaClipping,{slideIndex:this.props.slideIndex,borderStyle:this.props.borderStyle,width:this.props.width-this.props.margin.left-this.props.margin.right,height:this.props.height-this.props.margin.top-this.props.margin.bottom,shapeXML:this.props.imageXML,spId:this.spId},c.createElement("image",{preserveAspectRatio:"none",href:this.state.imageURL,x:u.toPt(-this.props.margin.left+t),y:u.toPt(-this.props.margin.top+i),width:u.toPt(this.props.width-t-n),height:u.toPt(this.props.height-i-r),clipPath:"url(#clippath-"+this.identification()+")"}))},m);function m(e){var t=s.call(this,e)||this;return t.spId="",t.spId=e.imageXML.extraAttr.getString("spId"),t.state={imageURL:""},t}t.Image=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(68),c=r(7),u=r(11),l=(i(p,o=a.Component),p.prototype.identification=function(){return this.props.slideIndex+"-"+this.props.spId+"-"},p.prototype.render=function(){var e,t=this,r=this.props.shapeXML.childElementOptional("p:spPr","a:prstGeom"),n=this.props.shapeXML.childElementOptional("p:spPr","a:custGeom"),i=new s.LumiaContext({w:this.props.width,h:this.props.height}),o="";if(r){var l=r.attr.getString("prst");this.injectAdjustValue(r,i),e=s.getPresetShapeDefinition(l)}else{if(!n)return console.error("Lumia can not render this clipping",this.props.shapeXML.displayer()),null;console.debug("Lumia custom shape is render "),e=n,o="a:"}var p=(new s.LumiaFactory).renderLumiaPath(e,i,o).map((function(e,r){return a.createElement("path",{key:"path"+r,d:e,fill:u.ensureColor(t.props.fillColor),height:c.toPt(t.props.height),width:c.toPt(t.props.width),stroke:u.ensureColor(t.props.borderStyle.color),strokeWidth:c.toPt(t.props.borderStyle.width),strokeDasharray:t.props.borderStyle.strokeDashArray})}));return a.createElement("svg",{style:{position:"absolute",width:c.toPt(this.props.width),height:c.toPt(this.props.height),overflow:"visible"}},a.createElement("defs",null,a.createElement("clipPath",{id:"clippath-"+this.identification()},p)),this.props.children,p)},p.prototype.injectAdjustValue=function(e,t){e.childElement("a:avLst").elementsWithName("a:gd").forEach((function(e){var r=e.attr.getString("fmla"),n=new s.FormulaEval(r).eval(t),i=e.attr.getString("name");t.setVariable(i,n)}))},p);function p(){return null!==o&&o.apply(this,arguments)||this}t.LumiaClipping=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(209),i=r(7),o=r(107),a=(s.prototype.injectConstant=function(){this.setVariable("3cd4",162e5),this.setVariable("3cd8",81e5),this.setVariable("5cd8",135e5),this.setVariable("7cd8",189e5),this.setVariable("b",new n.FormulaEval("val h").eval(this)),this.setVariable("cd2",108e5),this.setVariable("cd4",54e5),this.setVariable("cd8",27e5),this.setVariable("hc",new n.FormulaEval("*/ w 1.0 2.0").eval(this)),this.setVariable("hd2",new n.FormulaEval("*/ h 1.0 2.0").eval(this)),this.setVariable("hd3",new n.FormulaEval("*/ h 1.0 3.0").eval(this)),this.setVariable("hd4",new n.FormulaEval("*/ h 1.0 4.0").eval(this)),this.setVariable("hd5",new n.FormulaEval("*/ h 1.0 5.0").eval(this)),this.setVariable("hd6",new n.FormulaEval("*/ h 1.0 6.0").eval(this)),this.setVariable("hd8",new n.FormulaEval("*/ h 1.0 8.0").eval(this)),this.setVariable("l",0),this.setVariable("ls",new n.FormulaEval("max w h").eval(this)),this.setVariable("r",new n.FormulaEval("val w").eval(this)),this.setVariable("ss",new n.FormulaEval("min w h").eval(this)),this.setVariable("ssd2",new n.FormulaEval("*/ ss 1.0 2.0").eval(this)),this.setVariable("ssd4",new n.FormulaEval("*/ ss 1.0 4.0").eval(this)),this.setVariable("ssd6",new n.FormulaEval("*/ ss 1.0 6.0").eval(this)),this.setVariable("ssd8",new n.FormulaEval("*/ ss 1.0 8.0").eval(this)),this.setVariable("ssd16",new n.FormulaEval("*/ ss 1.0 16.0").eval(this)),this.setVariable("ssd32",new n.FormulaEval("*/ ss 1.0 32.0").eval(this)),this.setVariable("t",0),this.setVariable("vc",new n.FormulaEval("*/ h 1.0 2.0").eval(this)),this.setVariable("wd2",new n.FormulaEval("*/ w 1.0 2.0").eval(this)),this.setVariable("wd3",new n.FormulaEval("*/ w 1.0 3.0").eval(this)),this.setVariable("wd4",new n.FormulaEval("*/ w 1.0 4.0").eval(this)),this.setVariable("wd5",new n.FormulaEval("*/ w 1.0 5.0").eval(this)),this.setVariable("wd6",new n.FormulaEval("*/ w 1.0 6.0").eval(this)),this.setVariable("wd8",new n.FormulaEval("*/ w 1.0 8.0").eval(this)),this.setVariable("wd10",new n.FormulaEval("*/ w 1.0 10.0").eval(this)),this.setVariable("wd12",new n.FormulaEval("*/ w 1.0 12.0").eval(this)),this.setVariable("wd32",new n.FormulaEval("*/ w 1.0 32.0").eval(this))},s.prototype.getVariable=function(e,t){return void 0!==this.variablesMap[e]?this.variablesMap[e]:t},s.prototype.getRequiredVariable=function(e){if(void 0!==this.variablesMap[e])return this.variablesMap[e];throw new Error(e+" is required")},s.prototype.setVariable=function(e,t){this.variablesMap[e]=t},s.prototype.setVariableIfNotExist=function(e,t){void 0===this.variablesMap[e]&&(this.variablesMap[e]=t)},s.prototype.isNumeric=function(e){return/^-{0,1}\d+$/.test(e)},s.prototype.accessValue=function(e){return this.isNumeric(e)?parseInt(e):this.getRequiredVariable(e)},s.prototype.setLatestPostion=function(e,t){this.latestPostionX=e,this.latestPostionY=t,this.foundStartPostion||(this.startPostionX=e,this.startPostionY=t,this.foundStartPostion=!0)},s.prototype.getLatestPostion=function(){return{x:this.latestPostionX,y:this.latestPostionY}},s.prototype.getStartPostion=function(){return{x:this.startPostionX,y:this.startPostionY}},s.prototype.inspect=function(){console.debug(JSON.stringify(this.variablesMap))},s);function s(e){this.foundStartPostion=!1,this.variablesMap=e,this.injectConstant()}t.LumiaContext=a;var c=(u.prototype.renderLumiaPath=function(e,t,r){var i=this;void 0===r&&(r="");var o=e.childElementOptional(r+"avLst");o&&o.elementsWithName(r+"gd").forEach((function(e){var r=e.attr.getString("fmla"),i=new n.FormulaEval(r).eval(t),o=e.attr.getString("name");t.setVariableIfNotExist(o,i)}));var a=e.childElementOptional(r+"gdLst");a&&a.elementsWithName(r+"gd").forEach((function(e){var r=e.attr.getString("fmla"),i=new n.FormulaEval(r).eval(t),o=e.attr.getString("name");t.setVariable(o,i)})),e.childElementOptional(r+"ahLst"),e.childElementOptional(r+"cxnLst");var s=e.childElementOptional(r+"rect");s?(t.setVariable("rectLeft",t.accessValue(s.attr.getString("l"))),t.setVariable("rectTop",t.accessValue(s.attr.getString("t"))),t.setVariable("rectRight",t.accessValue(s.attr.getString("r"))),t.setVariable("rectBottom",t.accessValue(s.attr.getString("b")))):(t.setVariable("rectLeft",t.accessValue("l")),t.setVariable("rectTop",t.accessValue("t")),t.setVariable("rectRight",t.accessValue("r")),t.setVariable("rectBottom",t.accessValue("b")));var c=e.childElement(r+"pathLst").elementsWithName(r+"path"),u=[];return c.forEach((function(e){if(!1!==e.attr.getBooleanOptional("stroke")){var n=i.calcPathScale(e,t),o=n.pathWidthScale,a=n.pathHeightScale,s=e.elements.map((function(e){return new l(e,r,o,a).generate(t)}));u.push(s.join(" "))}})),u},u.prototype.calcPathScale=function(e,t){var r=e.attr.getNumberOptional("w"),n=e.attr.getNumberOptional("h"),i=1,o=1;return r&&(i=t.accessValue("w")/r),n&&(o=t.accessValue("h")/n),{pathWidthScale:i,pathHeightScale:o}},u);function u(){}t.LumiaFactory=c;var l=(p.prototype.xUnitTransformAndPathScale=function(e){return e*this.pathWidthScale/i.EmuToPx},p.prototype.yUnitTransformAndPathScale=function(e){return e*this.pathHeightScale/i.EmuToPx},p.prototype.generate=function(e){var t=this,r=this.actionXML.elementsWithName(this.namespace+"pt").map((function(e){return{x:e.attr.getString("x"),y:e.attr.getString("y")}})).map((function(r){return{x:t.getPtValue(r,e,"x"),y:t.getPtValue(r,e,"y")}})),n=0<r.length?r[0].x:0,o=0<r.length?r[0].y:0,a=1<r.length?r[1].x:0,s=1<r.length?r[1].y:0,c=2<r.length?r[2].x:0,u=2<r.length?r[2].y:0;switch(this.actionXML.name){case this.namespace+"moveTo":return e.setLatestPostion(n,o),["M",this.xUnitTransformAndPathScale(n),this.yUnitTransformAndPathScale(o)].join(" ");case this.namespace+"lnTo":return e.setLatestPostion(n,o),["L",this.xUnitTransformAndPathScale(n),this.yUnitTransformAndPathScale(o)].join(" ");case this.namespace+"arcTo":var l=e.accessValue(this.actionXML.attr.getString("wR")),p=e.accessValue(this.actionXML.attr.getString("hR")),h=e.accessValue(this.actionXML.attr.getString("stAng"))/i.Degree,d=e.accessValue(this.actionXML.attr.getString("swAng"))/i.Degree,f=e.getLatestPostion(),m=f.x,y=f.y,A=this.getSvgArc(l,p,h,d,m,y);return 360<=d?(e.setLatestPostion(A.endX,A.endY),["A",this.xUnitTransformAndPathScale(A.radiusX),this.yUnitTransformAndPathScale(A.radiusY),A.xAxisRotation,A.largeArcFlag,A.sweepFlag,this.xUnitTransformAndPathScale(A.endX)+2*this.xUnitTransformAndPathScale(A.radiusX),this.yUnitTransformAndPathScale(A.endY),"A",this.xUnitTransformAndPathScale(A.radiusX),this.yUnitTransformAndPathScale(A.radiusY),A.xAxisRotation,A.largeArcFlag,A.sweepFlag,this.xUnitTransformAndPathScale(A.endX),this.yUnitTransformAndPathScale(A.endY)].join(" ")):(e.setLatestPostion(A.endX,A.endY),["A",this.xUnitTransformAndPathScale(A.radiusX),this.yUnitTransformAndPathScale(A.radiusY),A.xAxisRotation,A.largeArcFlag,A.sweepFlag,this.xUnitTransformAndPathScale(A.endX),this.yUnitTransformAndPathScale(A.endY)].join(" "));case this.namespace+"cubicBezTo":return e.setLatestPostion(c,u),["C",this.xUnitTransformAndPathScale(n),this.yUnitTransformAndPathScale(o),this.xUnitTransformAndPathScale(a),this.yUnitTransformAndPathScale(s),this.xUnitTransformAndPathScale(c),this.yUnitTransformAndPathScale(u)].join(" ");case this.namespace+"quadBezTo":return e.setLatestPostion(r[1].x,r[1].y),["Q",this.xUnitTransformAndPathScale(n),this.yUnitTransformAndPathScale(o),this.xUnitTransformAndPathScale(a),this.yUnitTransformAndPathScale(s)].join(" ");case this.namespace+"close":return e.setLatestPostion(e.getStartPostion().x,e.getStartPostion().y),"Z";default:throw new Error("unknow "+this.actionXML.name)}},p.prototype.getPtValue=function(e,t,r){return t.accessValue(e[r])},p.prototype.getSvgArc=function(e,t,r,n,i,o){var a,s,c,u=e,l=t;if(0===n)a=i,s=o,c=0;else if(360===n)a=i,s=o,c=1;else{var p=-r,h=-(r+n),d=this.getCoordinateOnEllipse(p,u,l),f=i-d.x,m=o+d.y,y=this.getCoordinateOnEllipse(h,u,l);a=y.x+f,s=m-y.y,c=-360<=n&&n<-180?1:-180<=n&&n<0?0:0<n&&n<180?0:1}return{radiusX:u,radiusY:l,xAxisRotation:0,largeArcFlag:c,sweepFlag:0<n?1:0,endX:a,endY:s}},p.prototype.getCoordinateOnEllipse=function(e,t,r){var n,i,o=e%360;if(o%180==0)n=Math.cos(o*(Math.PI/180))*t,i=0;else if(o%90==0)n=0,i=Math.sin(o*(Math.PI/180))*r;else{var a=this.getTanDeg(o);n=t*r/Math.sqrt(Math.pow(r,2)+Math.pow(t*a,2)),(90<o&&o<270||o<-90&&-270<o)&&(n=-n),i=a*n}return{x:n,y:i}},p.prototype.getTanDeg=function(e){var t=e*Math.PI/180;return Math.tan(t)},p);function p(e,t,r,n){this.actionXML=e,this.namespace=t,this.pathWidthScale=r,this.pathHeightScale=n}t.getPresetShapeDefinition=function(e){return o.ResourcePreLoader.presetShapeDefinitons.childElementOptional(e)||(console.warn(e+" not include preset shape."),o.ResourcePreLoader.presetShapeDefinitons.childElement("rect"))}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(68),c=r(46),u=r(472),l=r(11),p=(i(h,o=a.Component),h.prototype.identification=function(){return this.props.slideIndex+"-"+this.props.spId+"-"},h.prototype.render=function(){var e,t=this,r=new s.LumiaContext({w:this.props.width,h:this.props.height}),n="";if(this.prestGeomXML){var i=this.prestGeomXML.attr.getString("prst");this.injectAdjustValue(this.prestGeomXML,r),e=s.getPresetShapeDefinition(i)}else{if(!this.custGeomXML)return console.error("Lumia can not render this shape",this.props.shapeXML.displayer()),null;e=this.custGeomXML,n="a:"}var o,p=u.ArrowStyle.none,h=u.ArrowStyle.none,d=this.props.shapeXML.childElementOptional("p:spPr","a:ln","a:headEnd"),f=this.props.shapeXML.childElementOptional("p:spPr","a:ln","a:tailEnd");if(d){var m=d.attr.getString("type","none");p=u.fromString(m)}f&&(m=f.attr.getString("type","none"),h=u.fromString(m));var y=[],A=0,g=void 0,v=void 0;this.props.fillColor instanceof l.GradientColor?(y=this.props.fillColor.getColors(),A=this.props.fillColor.getRotation(),g=this.props.fillColor.getGradientPath(),o="url(#"+this.identification()+"-gradient-fill)"):this.props.fillColor instanceof l.ImageFill?v=this.props.fillColor.getResId():o=this.props.fillColor instanceof l.GroupFill?l.ensureColor(this.props.groupFillColor):l.ensureColor(this.props.fillColor);var b=null;0<y.length&&(b=g?a.createElement("radialGradient",{id:this.identification()+"-gradient-fill",gradientTransform:"rotate("+A+")"},y.map((function(e,t){return a.createElement("stop",{key:"index-"+e.stop,offset:e.stop,stopColor:l.ensureColor(e.color)})}))):a.createElement("linearGradient",{id:this.identification()+"-gradient-fill",gradientTransform:"rotate("+A+")"},y.map((function(e,t){return a.createElement("stop",{key:"index-"+e.stop,offset:e.stop,stopColor:l.ensureColor(e.color)})}))));var P=(new s.LumiaFactory).renderLumiaPath(e,r,n).map((function(e,r){return a.createElement("path",{key:"path"+r,d:e,fill:void 0!==v?"none":o,height:c.toPt(t.props.height),width:c.toPt(t.props.width),stroke:l.ensureColor(t.props.borderStyle.color),strokeWidth:c.toPt(t.props.borderStyle.width),strokeDasharray:t.props.borderStyle.strokeDashArray,markerStart:"url(#"+t.identification()+"-"+u.ArrowStyle[p]+"-start)",markerEnd:"url(#"+t.identification()+"-"+u.ArrowStyle[h]+"-end)"})})),w=r.accessValue("rectLeft"),S=r.accessValue("rectTop"),x=r.accessValue("rectRight")-r.accessValue("rectLeft"),C=r.accessValue("rectBottom")-r.accessValue("rectTop"),k=a.Children.map(this.props.children,(function(e){return a.cloneElement(e,{left:w,right:S,width:x,height:C})}));return a.createElement(a.Fragment,null,k,this.renderSVG(P,b,v))},h.prototype.renderSVG=function(e,t,r){var n=null,i=null;if(r){var o=this.props.fillColor.getAlphaModFix();n=a.createElement("clipPath",{id:"clippath-"+this.identification()},e),i=a.createElement("image",{href:this.props.resourceLoader.loadURL(this.props.resourceType,r),width:c.toPt(this.props.width),height:c.toPt(this.props.height),opacity:o,clipPath:"url(#clippath-"+this.identification()+")",preserveAspectRatio:"none"})}var s,u,p="connection"===this.graphType&&this.props.borderStyle.color||"shape"===this.graphType;return s=c.toNumber(this.props.height)/c.EmuToPx<1?"1px":c.toPt(this.props.height),u=c.toNumber(this.props.width)/c.EmuToPx<1?"1px":c.toPt(this.props.width),p?a.createElement("svg",{style:{position:"absolute",width:u,height:s,overflow:"visible"}},a.createElement("defs",null,n,t,a.createElement("marker",{id:this.identification()+"-arrow-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",stroke:l.ensureColor(this.props.borderStyle.color),orient:"auto"},a.createElement("path",{d:"M 5 2.5 L 10 5 L 5 7.5 ",fill:"none"})),a.createElement("marker",{id:this.identification()+"-arrow-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",stroke:l.ensureColor(this.props.borderStyle.color),orient:"auto"},a.createElement("path",{d:"M 5 2.5 L 0 5 L 5 7.5 ",fill:"none"})),a.createElement("marker",{id:this.identification()+"-triangle-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto"},a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:l.ensureColor(this.props.borderStyle.color)})),a.createElement("marker",{id:this.identification()+"-triangle-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto"},a.createElement("path",{d:"M 10 0 L 0 5 L 10 10 z",fill:l.ensureColor(this.props.borderStyle.color)})),a.createElement("marker",{id:this.identification()+"-stealth-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto"},a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:l.ensureColor(this.props.borderStyle.color)})),a.createElement("marker",{id:this.identification()+"-stealth-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto"},a.createElement("path",{d:"M 10 0 L 0 5 L 10 10 z",fill:l.ensureColor(this.props.borderStyle.color)})),a.createElement("marker",{id:this.identification()+"-diamond-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto"},a.createElement("path",{d:"M 5 0 L 10 5 L 5 10 L 0 5 z",fill:l.ensureColor(this.props.borderStyle.color)})),a.createElement("marker",{id:this.identification()+"-diamond-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto"},a.createElement("path",{d:"M 5 0 L 10 5 L 5 10 L 0 5 z",fill:l.ensureColor(this.props.borderStyle.color)})),a.createElement("marker",{id:this.identification()+"-oval-end",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto"},a.createElement("ellipse",{cx:"5",cy:"5",rx:"5",ry:"5",fill:l.ensureColor(this.props.borderStyle.color)})),a.createElement("marker",{id:this.identification()+"-oval-start",viewBox:"0 0 10 10",refX:"0",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto"},a.createElement("ellipse",{cx:"5",cy:"5",rx:"5",ry:"5",fill:l.ensureColor(this.props.borderStyle.color)})),a.createElement("marker",{id:this.identification()+"-none"})),i,e):null},h.prototype.injectAdjustValue=function(e,t){e.childElement("a:avLst").elementsWithName("a:gd").forEach((function(e){var r=e.attr.getString("fmla"),n=new s.FormulaEval(r).eval(t),i=e.attr.getString("name");t.setVariable(i,n)}))},h);function h(e){var t=o.call(this,e)||this;return t.spId=e.spId,t.graphType="p:sp"===e.shapeXML.name?"shape":"connection",t.prestGeomXML=t.props.shapeXML.extraElementWithName("a:prstGeom"),t.custGeomXML=t.props.shapeXML.extraElementWithName("a:custGeom"),t}t.Lumia=p},function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=n=t.ArrowStyle||(t.ArrowStyle={}))[i.none=0]="none",i[i.triangle=1]="triangle",i[i.stealth=2]="stealth",i[i.diamond=3]="diamond",i[i.oval=4]="oval",i[i.arrow=5]="arrow",t.fromString=function(e){switch(e){case"none":return n.none;case"triangle":return n.triangle;case"stealth":return n.stealth;case"diamond":return n.diamond;case"oval":return n.oval;case"arrow":return n.arrow;default:return n.none}}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(7),c=(i(u,o=a.Component),u.prototype.componentWillReceiveProps=function(e){!1===this.props.play&&!0===e.play&&this.player.current&&(e.startTime?this.player.current.currentTime=this.props.startTimePerfix+e.startTime:this.player.current.currentTime=this.props.startTimePerfix,this.player.current.play()),!1===this.props.stop&&!0===e.stop&&this.player.current&&this.player.current.pause()},u.prototype.render=function(){return a.createElement("video",{src:this.props.videoURL,ref:this.player,style:{width:s.toPt(this.props.width),height:s.toPt(this.props.height)},preload:"auto",controls:!0})},u);function u(e){var t=o.call(this,e)||this;return t.player=a.createRef(),t}t.Video=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.indexBySpId=function(){for(var e={},t=0,r=0,n=this.spTreeXML.elements;r<n.length;r++){var i=n[r].extraAttr.getStringOptional("spId");"string"==typeof i&&(e[i]=t,t++)}return e},i);function i(e){this.spTreeXML=e}t.ZOrderIndexer=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(68),c=r(207),u=(i(l,o=a.Component),l.prototype.render=function(){var e=this.props.shapeXML.childElementOptional("p:txBody");return this.renderShape(this.props.shapeXML,e)},l.prototype.renderTextBody=function(e){return a.createElement(c.TxBody,{txBodyXML:e,shapeGroupTransform:this.props.shapeGroupTransform,width:this.props.width,height:this.props.height,resourceType:this.props.resourceType})},l.prototype.renderShape=function(e,t){var r,n;return n=this.props.shapeGroupTransform?(r=this.props.width*this.props.shapeGroupTransform.scaleX,this.props.height*this.props.shapeGroupTransform.scaleY):(r=this.props.width,this.props.height),a.createElement(s.Lumia,{fillColor:this.props.fillColor,groupFillColor:this.props.groupFillColor,spId:e.extraAttr.getString("spId"),borderStyle:this.props.borderStyle,width:r,height:n,slideIndex:this.props.slideIndex,resourceLoader:this.props.resourceLoader,resourceType:this.props.resourceType,shapeXML:e},t?this.renderTextBody(t):null)},l);function l(){return null!==o&&o.apply(this,arguments)||this}t.Shape=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(477))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(210),a=r(211),s=r(478),c=r(479),u=r(481),l=r(65),p=r(7),h=r(197),d=r(107);t.loadPPT=function(e,t,r,a,s){return void 0===r&&(r=!1),n(this,void 0,void 0,(function(){var n,c,u,l,p;return i(this,(function(i){switch(i.label){case 0:return e=e.replace(/\/$/i,""),n=new d.ResourcePreLoader,[4,Promise.all([o.fetchJSON(e+"/info.json"),o.fetchText(e+"/pptxml/ppt.xml"),o.fetchText(e+"/table/tableStyles.xml")])];case 1:return c=i.sent(),u=c[0],l=c[1],p=c[2],r&&n.preLoad(t,e,u.totalPageSize,a),[4,n.preloadLumiaPSD()];case 2:return i.sent(),[2,new f({uuid:t,url:e,width:u.width,height:u.height,slidesCount:u.totalPageSize,mainXMLContent:l,tableStylesXMLContent:p,userFonts:s})]}}))}))};var f=(m.prototype.loadSlide=function(e){return n(this,void 0,void 0,(function(){var t,r,n,u,p,h,f,m,y,A,g,v,b,P,w,S,x,C,k,O,_,T,E,M;return i(this,(function(i){switch(i.label){case 0:if(e<0||e>=this.slidesCount)throw new Error("index should be in 0 ~ "+(this.slidesCount-1));return r=(t=e+1)===this.slidesCount,n=t+1,u=[o.fetchText(this.url+"/slide/slide"+t+".xml"),o.fetchText(this.url+"/slideRef/slideRef"+t+".xml").catch((function(e){return console.log("error ",e),""})),o.fetchText(this.url+"/layout/layout"+t+".xml"),o.fetchText(this.url+"/master/master"+t+".xml"),o.fetchText(this.url+"/theme/theme"+t+".xml"),o.fetchJSON(this.url+"/resources/resource"+t+".json")],r||u.push(o.fetchJSON(this.url+"/resources/resource"+(t+1)+".json")),[4,Promise.all(u)];case 1:return p=i.sent(),h=p[0],f=p[1],m=p[2],y=p[3],A=p[4],g=p[5],v=p[6],[4,(b=new d.ResourcePreLoader).preloadOnePage(this.uuid,t,g)];case 2:return i.sent(),void 0!==v&&b.preloadOnePage(this.uuid,n,v),P=new a.XMLNodeRuntime("layout",this.attributesPicker).parse(m),w=s.createLayoutIndex(P.childElement("p:sldLayout","p:cSld","p:spTree")),S=new a.XMLNodeRuntime("master",this.attributesPicker).parse(y),x=s.createLayoutIndex(S.childElement("p:sldMaster","p:cSld","p:spTree"),S.childElement("p:sldMaster","p:txStyles")),C=new a.XMLNodeRuntime("theme",this.attributesPicker).parse(A),k=new c.ResourceLoader(g),O=new a.XMLNodeRuntime("slide",this.attributesPicker).parse(h),_=new a.XMLNodeRuntime("slideRef",this.attributesPicker).parse(f),T={},void 0!==_.element&&_.element.elements.forEach((function(e){T[e.attr.getString("Id")]=e.attr.getStringOptional("Target")})),console.debug("[main]",this.mainXML.displayer()),console.debug("[slide]",O.displayer()),console.debug("[slideRef]",T),console.debug("[layout]",P.displayer()),console.debug("[master]",S.displayer()),console.debug("[theme]",C.displayer()),console.debug("[tableStyles]",this.tableStylesXML.displayer()),E={slide:O,layout:P,layoutIndex:w,master:S,masterIndex:x,masterThemeColorMapping:S.childElement("p:sldMaster","p:clrMap").originXmlElement.attributes,theme:C,main:this.mainXML,tableStyles:this.tableStylesXML,userFonts:this.userFonts},this.attributesPicker.context=Object.freeze(E),M=l.createSlideAnimations(O,Object.freeze({slideContext:E,slideWidth:this.width,slideHeight:this.height,shapeParamsIndex:this.getShapeIndexMap(O.childElement("p:sld","p:cSld","p:spTree"))})),[2,Object.freeze({uuid:this.uuid,url:this.url,index:e,width:this.width,height:this.height,masterXML:S,masterIndex:x,layoutXML:P,layoutIndex:w,mainXML:this.mainXML,themeXML:C,slideXML:O,slideRefIndex:T,resourceLoader:k,animations:M,tableStylesXML:this.tableStylesXML})]}}))}))},m.prototype.getShapeIndexMap=function(e){var t={},r=e.extraAttr.getNumber("spId"),n=h.parsingShapeGroupXML(e);return this.getShapeGroupIndexMap(e,t,r,n.transform),t},m.prototype.getShapeGroupIndexMap=function(e,t,r,n){var i=this,o=e.elementsWithName("p:sp");this.getChildShapesIndexMap(o,t,r,n);var a=e.elementsWithName("p:cxnSp");this.getChildShapesIndexMap(a,t,r,n);var s=e.elementsWithName("p:pic");this.getChildShapesIndexMap(s,t,r,n);var c=e.elementsWithName("p:grpSp");0<c.length&&c.forEach((function(e){var o=e.extraAttr.getNumber("spId"),a=h.parsingShapeGroupXML(e,void 0,r,n);i.getShapeGroupIndexMap(e,t,o,a.transform),t[o]=a}))},m.prototype.getChildShapesIndexMap=function(e,t,r,n){e.forEach((function(e){var i=e.extraAttr.getNumber("spId"),o=h.parsingShapeXML(e,void 0,r,n);t[i]=o}))},m);function m(e){this.attributesPicker=u.createSlidePickers(),this.url=e.url,this.uuid=e.uuid,this.width=e.width*p.EmuToPt,this.height=e.height*p.EmuToPt,this.slidesCount=e.slidesCount,this.userFonts=e.userFonts,this.mainXML=new a.XMLNodeRuntime("main",this.attributesPicker).parse(e.mainXMLContent),this.tableStylesXML=new a.XMLNodeRuntime("main",this.attributesPicker).parse(e.tableStylesXMLContent)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);t.createLayoutIndex=function(e,t){for(var r={},i={},o={},a=0,s=e.elements;a<s.length;a++){var c=s[a],u=c.childElementOptional(new n.TagOrExpr("p:nvSpPr","p:nvCxnSpPr"));if(u){var l=u.childElement("p:cNvPr").attr.getStringOptional("id"),p=u.childElementOptional("p:nvPr","p:ph"),h=p&&p.attr.getStringOptional("idx"),d=p&&p.attr.getStringOptional("type");void 0!==l&&(r[l]=c),void 0!==h?i[h]=c:"title"!==d&&"ctrTitle"!==d||(i[0]=c),"title"===d||"ctrTitle"===d?(o.title=c,o.ctrTitle=c):void 0!==d&&(o[d]=c)}}return t?Object.freeze({idIndex:Object.freeze(r),idxIndex:Object.freeze(i),typeIndex:Object.freeze(o),txStyle:Object.freeze(function(e){var t={},r=e.elementWithName("p:bodyStyle");r&&(t.body=r);var n=e.elementWithName("p:titleStyle");n&&(t.title=n,t.subTitle=n,t.ctrTitle=n);var i=e.elementWithName("p:otherStyle");return i&&(t.other=i),t}(t))}):Object.freeze({idIndex:Object.freeze(r),idxIndex:Object.freeze(i),typeIndex:Object.freeze(o)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(480))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.loadURL=function(e,t){return this.resource[e]&&this.resource[e][t]},i);function i(e){this.resource=e}t.ResourceLoader=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(482),i=r(483),o=r(484),a=r(212),s=r(485),c=r(486);e=new a.PickersModule,n.bindTextPickers(e),i.bindShapeCommonPickers(e),o.bindShapeLayoutPickers(e),s.bindTablePickers(e),c.bindBackgroundPickers(e),t.createSlidePickers=function(){return e.createPickers()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(29),o=r(7),a=r(198),s=r(108),c=r(11);t.bindTextPickers=function(e){e.bindAttributePicker("a:p","*",l),e.bindAttributePicker("a:p","indent",p(-342900,0)),e.bindAttributePicker("a:p","marL",p(342900,0)),e.bindAttributePicker("a:p","level",h),e.bindAttributePicker("a:bodyPr","*",u),e.bindAttributePicker(["a:r","a:br","a:endParaRPr","a:fld"],"*",f),e.bindAttributePicker(["a:r","a:br","a:endParaRPr","a:fld","a:p"],"sz",y),e.bindAttributePicker(["a:r"],"highlight",m),e.bindAttributePicker(["a:r","a:fld"],"color",g),e.bindAttributePicker(["a:r","a:fld"],"fontType",v),e.bindAttributePicker("a:p","placeHolderType",b),e.bindChildPicker("a:p","bu",P),e.bindAttributePicker("a:p","buClr",w),e.bindAttributePicker("a:p","lineHeight",x),e.bindAttributePicker("a:p",["a:spcBef","a:spcAft"],C)};var u=function(e,t,r,i,o){for(var a=0,c=function(e,t,r,i){var o=r.bodyPrXMlList;return o=o||(r.bodyPrXMlList=Object.freeze(function(e,t,r){for(var i=[],o=e.parentElement(new n.TagOrExpr("p:sp","p:graphicFrame")),a=s.getRelationshipPlaceHolder(o,t,r),c=a.allShape,u=a.hasPlaceHolder,l=0,p=c;l<p.length;l++){var h=p[l].childElementOptional("p:txBody","a:bodyPr");h&&i.push(h)}return{pPrXMLList:i,hasPlaceHolder:u}}(e,t,i)))}(e,t,i,o).pPrXMLList;a<c.length;a++){var u=c[a].attr.getOptional(r);if(void 0!==u)return u}},l=function(e,t,r,n,i){for(var o=0,a=d(e,t,n,i).pPrXMLList;o<a.length;o++){var s=a[o].attr.getOptional(r);if(void 0!==s)return s}},p=function(e,t){return function(r,n,i,o,a){for(var s=d(r,n,o,a),c=s.pPrXMLList,u=s.hasPlaceHolder,l=0,p=c;l<p.length;l++){var h=p[l].attr.getOptional(i);if(void 0!==h)return h}return u?e:t}},h=function(e,t,r,n,i){return d(e,t,n,i).level};function d(e,t,r,i){var o=r.pPrXMlList;return o||(r.pPrXMlList=Object.freeze(function(e,t,r){var i,o=[],a=e.parentElement(new n.TagOrExpr("p:sp","p:graphicFrame")),c=e.childElementOptional("a:pPr"),u=0;c&&(o.push(c),u=c.attr.getNumber("lvl",0));for(var l="a:lvl"+(u+1)+"pPr",p=s.getRelationshipPlaceHolder(a,t,r),h=p.allShape,d=p.placeHolderType,f=p.masterStyleXML,m=(p.isTextBox,p.hasPlaceHolder),y=0,A=h;y<A.length;y++)(i=A[y].childElementOptional("p:txBody","a:lstStyle",l))&&o.push(i);return f&&(i=f.childElementOptional(l))&&o.push(i),{pPrXMLList:o,placeHolderType:d,level:u,hasPlaceHolder:m}}(e,t,i)))}var f=function(e,t,r,n,i){for(var o=0,a=A(e,t,n,i).pPrXMLList;o<a.length;o++){var s=a[o].attr.getOptional(r);if(void 0!==s)return s}},m=function(e,t,r,o,a){var s=e.childElementOptional("a:rPr","a:highlight",new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(i.ALL_COLOR_TYPE))));return s?c.getColor(s,t):void 0},y=function(e,t,r,n,i){var o=f(e,t,"sz",n,i),a=f(e,t,"kern",n,i);return o||a};function A(e,t,r,o){var a=r.rangeXMlList;return a||(r.rangeXMlList=Object.freeze(function(e,t,r){var o=e.elementWithName("a:rPr"),a=function(e,t,r){var o,a=[],c=e.parentElement(new n.TagOrExpr("p:sp","p:graphicFrame")),u=e.childElementOptional("a:pPr"),l=0;if(u){l=u.attr.getNumber("lvl",0);var p=u.childElementOptional("a:defRPr");p&&a.push(p)}for(var h="a:lvl"+(l+1)+"pPr",d=s.getRelationshipPlaceHolder(c,t,r),f=d.allShape,m=d.placeHolderType,y=d.masterStyleXML,A=d.hasPlaceHolder,g=0,v=f;g<v.length;g++){var b=v[g];(o=b.childElementOptional("p:txBody","a:lstStyle",h,"a:defRPr"))&&a.push(o);var P=b.childElementOptional("p:style");if(P){var w=i.mergeShapeStyle(P,t);a.push(w.font.fontRef),w.font.xml&&a.push(w.font.xml)}}return y&&(o=y.childElement(h,"a:defRPr"))&&a.push(o),{pPrXMLList:a,placeHolderType:m,level:l,hasPlaceHolder:A}}("a:p"===e.name?e:e.parentElement("a:p"),t,r),c=a.placeHolderType,u=a.pPrXMLList,l=a.level,p=a.hasPlaceHolder;return o?{placeHolderType:c,pPrXMLList:[e,o].concat(u),level:l,hasPlaceHolder:p}:{placeHolderType:c,pPrXMLList:[e].concat(u),level:l,hasPlaceHolder:p}}(e,t,o)))}var g=function(e,t,r,o,a){for(var s=0,u=A(e,t,o,a).pPrXMLList;s<u.length;s++){var l=u[s],p=l.childElementOptional(new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(i.ALL_FILL_TYPE))));if(p)return(new c.FillOrLineFillReader).read(p,t);var h=l.childElementOptional(new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(i.ALL_COLOR_TYPE))));if(h)return c.getColor(h,t)}},v=function(e,t,r,n,o){for(var c=A(e,t,n,o),u=[],l=0,p=c.pPrXMLList;l<p.length;l++){var h,d=p[l],f=d.childElementOptional("a:latin"),m=d.childElementOptional("a:ea");f&&"string"==typeof(h=f.attr.getOptional("typeface"))&&u.push(h),m&&"string"==typeof(h=m.attr.getOptional("typeface"))&&u.push(h)}u=(u=s.isMajor(c.placeHolderType)?u.concat(i.getFontList(i.getMajorFont(t))):u.concat(i.getFontList(i.getMinorFont(t)))).filter((function(e){return""!==e}));var y=[],g=i.getMajorFont(t),v=i.getMinorFont(t);return u.forEach((function(e){switch(e){case"+mj-lt":y=g.latin?y.concat(g.latin):y;break;case"+mj-ea":y=g.ea?y.concat(g.ea):y;break;case"+mj-cs":y=g.cs?y.concat(g.cs):y;break;case"+mn-lt":y=v.latin?y.concat(v.latin):y;break;case"+mn-ea":y=v.ea?y.concat(v.ea):y;break;case"+mn-cs":y=g.cs?y.concat(g.cs):y;break;default:y.push(e)}})),y.forEach((function(e){return a.loadFont(e,t.userFonts)})),y.join(",")},b=function(e,t,r,i,o){var a=e.parentElement(new n.TagOrExpr("p:sp","p:graphicFrame")).childElementOptional(new n.TagOrExpr("p:nvSpPr","p:nvCxnSpPr"));return a&&a.childElementOptional("p:nvPr","p:ph")?"true":"false"},P=function(e,t,r,i,o){for(var a=0,s=d(e,t,i,o).pPrXMLList;a<s.length;a++){var c=s[a].childElementOptional(new n.TagOrExpr("a:buChar","a:buNone","a:buAutoNum","a:buBlip"));if(void 0!==c)return c}},w=function(e,t,r,o,a){for(var s=0,u=d(e,t,o,a).pPrXMLList;s<u.length;s++){var l=u[s].childElementOptional("a:buClr");if(l)return c.getColor(l.childElement(new(n.TagOrExpr.bind.apply(n.TagOrExpr,[void 0].concat(i.ALL_COLOR_TYPE)))),t)}};function S(e){var t=e.childElementOptional("a:lnSpc",new n.TagOrExpr("a:spcPct","a:spcPts"));if(t){var r=0,i=e.parentElementOptional("p:txBody");if(i){var a=i.childElementOptional("a:bodyPr","a:normAutofit");a&&(r=o.parseSTPercentage(a.attr.getNumber("lnSpcReduction",0)))}switch(t.name){case"a:spcPct":return o.parseSTPercentage(t.attr.getString("val"))-r;case"a:spcPts":return t.attr.getNumber("val")/100*(1-r)+"pt";default:return}}}var x=function(e,t,r,n,i){for(var a=0,s=d(e,t,n,i).pPrXMLList;a<s.length;a++){var c=S(s[a]);if(void 0!==c)return c}return o.DefatultHeightLine},C=function(e,t,r,n,i){for(var o=0,a=d(e,t,n,i).pPrXMLList;o<a.length;o++){var s=k(a[o],r);if(void 0!==s)return s}};function k(e,t){var r=e.childElementOptional(t,new n.TagOrExpr("a:spcPct","a:spcPts"));if(r)switch(r.name){case"a:spcPct":return o.parseSTPercentage(r.attr.getString("val"));case"a:spcPts":return r.attr.getNumber("val")/100+"pt";default:return}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(108),o=r(29),a=r(7),s=r(10);function c(e){var t="";return"master"===e?t="m":"layout"===e&&(t="l"),t}function u(e,t,r,n){var a=r.lnStyleXMLDescription;return a||(r.lnStyleXMLDescription=Object.freeze(function(e,t,r){for(var n,a=[],c=i.getRelationshipPlaceHolder(e,t,r),u=c.allShape,l=c.placeHolderType,p=(c.masterStyleXML,0),h=u;p<h.length;p++){var d=h[p],f=d.childElementOptional(new s.TagOrExpr("p:spPr","p:grpSpPr"));if(f){var m=f.childElementOptional("a:ln");m&&a.push(m)}var y=d.childElementOptional("p:style");if(y){var A=o.mergeShapeStyle(y,t);A.ln.xml&&a.push(A.ln.xml),n=A.ln.phClr}}return{shapeStyleXMLList:a,placeHolderType:l,placeHolderColor:n}}(e,t,n)))}t.bindShapeCommonPickers=function(e){e.bindChildPicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"a:prstGeom",l),e.bindChildPicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"a:custGeom",l),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"fillColor",p),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"borderWidth",d),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"borderType",f),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"borderColor",h),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:grpSp"],"borderStrokeDashArray",m),e.bindAttributePicker("p:sp","spId",(function(e,t,r,n,i){return c(i)+e.childElement("p:nvSpPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:cxnSp","spId",(function(e,t,r,n,i){return c(i)+e.childElement("p:nvCxnSpPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:pic","spId",(function(e,t,r,n,i){return c(i)+e.childElement("p:nvPicPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:grpSp","spId",(function(e,t,r,n,i){return c(i)+e.childElement("p:nvGrpSpPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:spTree","spId",(function(e,t,r,n,i){return c(i)+e.childElement("p:nvGrpSpPr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:graphicFrame","spId",(function(e,t,r,n,i){return c(i)+e.childElement("p:nvGraphicFramePr","p:cNvPr").attr.getOptional("id")})),e.bindAttributePicker("p:graphicFrame","borderWidth",(function(e){return 0})),e.bindAttributePicker("p:graphicFrame","borderType",(function(e){return"none"})),e.bindAttributePicker("p:graphicFrame","borderColor",(function(e){return"black"})),e.bindAttributePicker("p:graphicFrame","borderStrokeDashArray",(function(e){return"0"}))};var l=function(e,t,r,n,o){for(var a=i.getRelationshipPlaceHolder(e,t,o),s=a.allShape,c=(a.placeHolderType,a.masterStyleXML,0),u=s;c<u.length;c++){var l=u[c].childElementOptional("p:spPr",r);if(l)return l}},p=function(e,t,r,a,c){for(var u=function(e,t,r,n){var a=r.fillStyleXMLDescription;return a||(r.fillStyleXMLDescription=Object.freeze(function(e,t,r){for(var n,a=[],c=i.getRelationshipPlaceHolder(e,t,r),u=c.allShape,l=c.placeHolderType,p=(c.masterStyleXML,0),h=u;p<h.length;p++){var d=h[p],f=d.childElementOptional(new s.TagOrExpr("p:spPr","p:grpSpPr"),new(s.TagOrExpr.bind.apply(s.TagOrExpr,[void 0].concat(o.ALL_FILL_TYPE))));f&&a.push(f);var m=d.childElementOptional("p:style");if(m){var y=o.mergeShapeStyle(m,t);y.fill.xml&&a.push(y.fill.xml),n=y.fill.phClr}}return{shapeStyleXMLList:a,placeHolderType:l,placeHolderColor:n}}(e,t,n)))}(e,t,a,c),l=0,p=u.shapeStyleXMLList;l<p.length;l++){var h=p[l];return new n.FillOrLineFillReader(u.placeHolderColor).read(h,t)||void 0}},h=function(e,t,r,i,a){for(var c=u(e,t,i,a),l=0,p=c.shapeStyleXMLList;l<p.length;l++){var h=p[l].childElementOptional(new(s.TagOrExpr.bind.apply(s.TagOrExpr,[void 0].concat(o.ALL_FILL_TYPE))));if(h){var d=new n.FillOrLineFillReader(c.placeHolderColor).read(h,t);if(d)return d}}return n.UNDEFINED},d=function(e,t,r,n,i){for(var o=0,a=u(e,t,n,i).shapeStyleXMLList;o<a.length;o++){var s=a[o];if(s&&s.attr.has("w")){var c=s.attr.getNumber("w");return 12700<c?c:6350}}return 6350},f=function(e,t,r,n,i){for(var o=0,a=u(e,t,n,i).shapeStyleXMLList;o<a.length;o++){var s=a[o].childElementOptional("a:prstDash");if(s&&s.attr.has("val"))return s.attr.getString("val")}return"solid"},m=function(e,t,r,n,i){var o=d(e,t,r,n,i)/a.EmuToPt;switch(f(e,t,r,n,i)){case"solid":return"0";case"dash":return""+5*o;case"dashDot":return" "+5*o+", "+5*o+", "+o+", "+5*o;case"dot":return o+",  "+5*o;case"lgDash":return 2*o+", "+o;case"lgDashDot":return 10*o+", "+5*o+", "+o+", "+5*o+", "+o+", "+5*o;case"sysDash":return 5*o+", "+2*o;case"sysDashDot":return 5*o+", "+2*o+", "+o+", "+5*o;case"sysDashDotDot":return 5*o+", "+2*o+", "+o+", "+5*o+", "+o+", "+5*o;case"sysDot":return 2*o+", "+5*o;default:return"0"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(108),i=r(10);function o(e,t,r){for(var i=0,o=n.getRelationshipPlaceHolder(e,t,r).allShape;i<o.length;i++){var a=o[i],s=a.childElementOptional("p:spPr","a:xfrm","a:off");if(void 0!==s)return s;if(void 0!==(s=a.childElementOptional("p:xfrm","a:off")))return s}}function a(e,t,r){for(var i=0,o=n.getRelationshipPlaceHolder(e,t,r).allShape;i<o.length;i++){var a=o[i],s=a.childElementOptional("p:spPr","a:xfrm","a:ext");if(void 0!==s)return s;if(void 0!==(s=a.childElementOptional("p:xfrm","a:ext")))return s}}t.bindShapeLayoutPickers=function(e){e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"x",(function(e,t,r,n,i){var a=o(e,t,i);return a?a.attr.getOptional("x"):0})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"y",(function(e,t,r,n,i){var a=o(e,t,i);return a?a.attr.getOptional("y"):0})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"width",(function(e,t,r,n,i){var o=a(e,t,i);return o?o.attr.getOptional("cx"):0})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"height",(function(e,t,r,n,i){var o=a(e,t,i);return o?o.attr.getOptional("cy"):0})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"flipV",(function(e,t){var r=e.childElementOptional("p:spPr","a:xfrm");return void 0===r?"false":r.attr.getOptional("flipV")?r.attr.getOptional("flipV"):"false"})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"flipH",(function(e,t){var r=e.childElementOptional("p:spPr","a:xfrm");return void 0===r?"false":r.attr.getOptional("flipH")?r.attr.getOptional("flipH"):"false"})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp","p:graphicFrame"],"hidden",(function(e,t,r,n,o){var a=e.childElementOptional(new i.TagOrExpr("p:nvGraphicFramePr","p:nvSpPr","p:nvCxnSpPr","p:nvPicPr"),"p:cNvPr");return a?a.attr.get("hidden","false"):"false"})),e.bindAttributePicker(["p:sp","p:pic","p:cxnSp"],"rot",(function(e,t){var r=e.childElementOptional("p:spPr","a:xfrm");return r?r.attr.getOptional("rot"):0}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(29),o=r(10);t.bindTablePickers=function(e){e.bindAttributePicker("a:tcPr","*",a)};var a=function(e,t,r,a,u){var l=function(e,t,r,n){var i=n.tableStyleXML;return i=i||(n.tableStyleXML=Object.freeze(function(e,t){var r=e.parentElement("a:tbl").childElement("a:tblPr");if(r.hasChildElementWithName("a:tableStyleId")){var n=r.childElement("a:tableStyleId").text;return{tableStyle:t.tableStyles.childElement("a:tblStyleLst").elementsWithName("a:tblStyle").filter((function(e){return e.attr.getString("styleId")===n}))[0],bandCol:r.attr.getBoolean("bandCol",!1),bandRow:r.attr.getBoolean("bandRow",!1),firstCol:r.attr.getBoolean("firstCol",!1),firstRow:r.attr.getBoolean("firstRow",!1),lastCol:r.attr.getBoolean("lastCol",!1),lastRow:r.attr.getBoolean("lastRow",!1),rtl:r.attr.getBoolean("rtl",!1)}}return{tableStyle:void 0,bandCol:!1,bandRow:!1,firstCol:!1,firstRow:!1,lastCol:!1,lastRow:!1,rtl:!1}}(e,t)))}(e,t,0,a),h=r.split("-"),d=parseInt(h[0]),f=parseInt(h[1]);r=h[2];var m=e.parentElement("a:tbl"),y=function(e,t,r,a){switch(r){case"isBold":case"isItalic":return;case"fillColor":var s=e.childElementOptional(new(o.TagOrExpr.bind.apply(o.TagOrExpr,[void 0].concat(i.ALL_FILL_TYPE))));return s?(new n.FillOrLineFillReader).read(s,t):(new n.FillOrLineFillReader).read(a,t);case"fontFamily":case"fontColor":return;case"bottomBorderWidth":return new p(e,"a:lnB").getBorderWidth();case"bottomBorderColor":return new p(e,"a:lnB").getBorderColor(t);case"bottomBorderStyle":return new p(e,"a:lnB").getBorderType();case"bottomBorderStrokeDashArray":return new p(e,"a:lnB").getBorderStrokeDashArray();case"topBorderWidth":return new p(e,"a:lnT").getBorderWidth();case"topBorderColor":return new p(e,"a:lnT").getBorderColor(t);case"topBorderStyle":return new p(e,"a:lnT").getBorderType();case"topBorderStrokeDashArray":return new p(e,"a:lnT").getBorderStrokeDashArray();case"leftBorderWidth":return new p(e,"a:lnL").getBorderWidth();case"leftBorderColor":return new p(e,"a:lnL").getBorderColor(t);case"leftBorderStyle":return new p(e,"a:lnL").getBorderType();case"leftBorderStrokeDashArray":return new p(e,"a:lnL").getBorderStrokeDashArray();case"rightBorderWidth":return new p(e,"a:lnR").getBorderWidth();case"rightBorderColor":return new p(e,"a:lnR").getBorderColor(t);case"rightBorderStyle":return new p(e,"a:lnR").getBorderType();case"rightBorderStrokeDashArray":return new p(e,"a:lnR").getBorderStrokeDashArray();default:return}}(e,t,r,m.childElement("a:tblPr"));if(void 0!==y&&y!==n.UNDEFINED)return y;if(l.tableStyle){var A=l.tableStyle.childElementOptional("a:band1H"),g=l.tableStyle.childElementOptional("a:band2H"),v=l.tableStyle.childElementOptional("a:band1V"),b=l.tableStyle.childElementOptional("a:band2V"),P=l.tableStyle.childElementOptional("a:firstRow"),w=l.tableStyle.childElementOptional("a:firstCol"),S=(l.tableStyle.childElementOptional("a:lastRow"),l.tableStyle.childElementOptional("a:lastCol"),l.tableStyle.childElement("a:wholeTbl")),x=(d+1)%2==1,C=(f+1)%2==1,k=0===d,O=0===d;return l.firstRow&&k?s(P,t,r,S):l.firstCol&&O?s(w,t,r,S):l.bandRow?l.firstRow?s(x?g:A,t,r,S):s(x?A:g,t,r,S):l.bandCol?l.firstCol?s(C?b:v,t,r,S):s(C?v:b,t,r,S):c(S,t,r)}};function s(e,t,r,n){if(e){var i=c(e,t,r);return void 0===i?c(n,t,r):i}return c(n,t,r)}function c(e,t,r){switch(r){case"isBold":var a=e.childElementOptional("a:tcTxStyle");return a?a.attr.getString("b","off"):"false";case"isItalic":var s=e.childElementOptional("a:tcTxStyle");return s?s.attr.getString("i","off"):"false";case"fillColor":var c=e.childElementOptional("a:tcStyle","a:fill",new(o.TagOrExpr.bind.apply(o.TagOrExpr,[void 0].concat(i.ALL_FILL_TYPE))));return c?(new n.FillOrLineFillReader).read(c,t):void 0;case"fontFamily":var l=e.childElementOptional("a:tcTxStyle","a:fontRef");return l?i.parseAndLoadThemeFont(l.attr.getString("idx","none"),t).join(","):void 0;case"fontColor":var p=e.childElementOptional("a:tcTxStyle",new(o.TagOrExpr.bind.apply(o.TagOrExpr,[void 0].concat(i.ALL_COLOR_TYPE))));return p?n.getColor(p,t):void 0;case"bottomBorderWidth":return new u(e,"a:bottom").getBorderWidth();case"bottomBorderColor":return new u(e,"a:bottom").getBorderColor(t);case"bottomBorderStyle":return new u(e,"a:bottom").getBorderType();case"topBorderWidth":return new u(e,"a:top").getBorderWidth();case"topBorderColor":return new u(e,"a:top").getBorderColor(t);case"topBorderStyle":return new u(e,"a:top").getBorderType();case"leftBorderWidth":return new u(e,"a:left").getBorderWidth();case"leftBorderColor":return new u(e,"a:left").getBorderColor(t);case"leftBorderStyle":return new u(e,"a:left").getBorderType();case"rightBorderWidth":return new u(e,"a:right").getBorderWidth();case"rightBorderColor":return new u(e,"a:right").getBorderColor(t);case"rightBorderStyle":return new u(e,"a:right").getBorderType();default:return}}var u=(l.prototype.getBorderColor=function(e){var t=this.tcStyle.childElementOptional("a:tcStyle","a:tcBdr",this.lnKey,"a:ln",new(o.TagOrExpr.bind.apply(o.TagOrExpr,[void 0].concat(i.ALL_FILL_TYPE))));return t?(new n.FillOrLineFillReader).read(t,e):void 0},l.prototype.getBorderWidth=function(){var e=this.tcStyle.childElementOptional("a:tcStyle","a:tcBdr",this.lnKey,"a:ln");return e?e.attr.getNumberOptional("w"):void 0},l.prototype.getBorderType=function(){var e=this.tcStyle.childElementOptional("a:tcStyle","a:tcBdr",this.lnKey,"a:ln");if(e){var t=e.childElementOptional("a:prstDash");if(t&&t.attr.has("val"))return t.attr.getString("val")}return"solid"},l);function l(e,t){this.tcStyle=e,this.lnKey=t}var p=(h.prototype.getBorderColor=function(e){var t=this.tcPrXMl.childElementOptional(this.lnKey);return t?(new n.FillOrLineFillReader).read(t.childElement(new(o.TagOrExpr.bind.apply(o.TagOrExpr,[void 0].concat(i.ALL_FILL_TYPE)))),e):void 0},h.prototype.getBorderWidth=function(){var e=this.tcPrXMl.childElementOptional(this.lnKey);return e?e.attr.getNumber("w"):void 0},h.prototype.getBorderType=function(){var e=this.tcPrXMl.childElementOptional(this.lnKey);if(e){var t=e.childElementOptional("a:prstDash");if(t&&t.attr.has("val"))return t.attr.getString("val")}},h.prototype.getBorderStrokeDashArray=function(){var e=this.getBorderWidth(),t=this.getBorderType();if(void 0!==e&&void 0!==t)switch(t){case"solid":return"0";case"dash":return""+5*e;case"dashDot":return" "+5*e+", "+5*e+", "+e+", "+5*e;case"dot":return e+",  "+5*e;case"lgDash":return 2*e+", "+e;case"lgDashDot":return 10*e+", "+5*e+", "+e+", "+5*e+", "+e+", "+5*e;case"sysDash":return 5*e+", "+2*e;case"sysDashDot":return 5*e+", "+2*e+", "+e+", "+5*e;case"sysDashDotDot":return 5*e+", "+2*e+", "+e+", "+5*e+", "+e+", "+5*e;case"sysDot":return 2*e+", "+5*e;default:return"0"}},h);function h(e,t){this.tcPrXMl=e,this.lnKey=t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(10),o=r(29);t.bindBackgroundPickers=function(e){e.bindChildPicker(["p:cSld"],"backgroundImage",a),e.bindAttributePicker(["p:cSld"],"backgroundResId",c),e.bindAttributePicker(["p:cSld"],"backgroundImageResourceType",l),e.bindAttributePicker(["p:cSld"],"backgroundColor",p)};var a=function(e,t,r,n,i){var o=h(e,t,0,n);if(!o.bgXML.hasChildElementWithName("p:bgRef"))return s(o.bgXML.childElementOptional("p:bgPr","a:blipFill"));var a=o.bgXML.childElement("p:bgRef").attr.getNumber("idx"),c=t.theme.childElement("a:theme","a:themeElements","a:fmtScheme","a:bgFillStyleLst").elements[a-1e3-1];return"a:blipFill"===c.name?s(c):void 0};function s(e){return e?e.childElement("a:blip"):void 0}var c=function(e,t,r,n,i){var o=h(e,t,0,n);if(!o.bgXML.hasChildElementWithName("p:bgRef"))return u(o.bgXML.childElementOptional("p:bgPr","a:blipFill"));var a=o.bgXML.childElement("p:bgRef").attr.getNumber("idx"),s=t.theme.childElement("a:theme","a:themeElements","a:fmtScheme","a:bgFillStyleLst").elements[a-1e3-1];return"a:blipFill"===s.name?u(s):void 0};function u(e){return e?e.childElement("a:blip").attr.getStringOptional("r:embed"):void 0}var l=function(e,t,r,n,i){var o=h(e,t,0,n);return o.bgXML.hasChildElementWithName("p:bgRef")?"theme":o.resourceType},p=function(e,t,r,a,s){var c=h(e,t,0,a);if(c.bgXML.hasChildElementWithName("p:bgRef")){var u=c.bgXML.childElement("p:bgRef").attr.getNumber("idx"),l=t.theme.childElement("a:theme","a:themeElements","a:fmtScheme","a:bgFillStyleLst").elements[u-1e3-1];return new n.FillOrLineFillReader(c.bgXML.childElement("p:bgRef").childElementOptional("a:schemeClr")).read(l,t)}return(new n.FillOrLineFillReader).read(c.bgXML.childElement("p:bgPr",new(i.TagOrExpr.bind.apply(i.TagOrExpr,[void 0].concat(o.ALL_FILL_TYPE)))),t)};function h(e,t,r,n){var i=n.bgXML;return i||(n.bgXML=Object.freeze(function(e,t){return e.hasChildElementWithName("p:bg")?{bgXML:e.childElement("p:bg"),resourceType:"slide"}:t.layout.childElementOptional("p:sldLayout","p:cSld","p:bg")?{bgXML:t.layout.childElement("p:sldLayout","p:cSld","p:bg"),resourceType:"layout"}:{bgXML:t.master.childElement("p:sldMaster","p:cSld","p:bg"),resourceType:"master"}}(e,t)))}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(46),s=r(488),c=(u.prototype.getPptStateWithSlideUrl=function(e){var t=e.uuid,r=e.index;return this.getPptStateRightNow(t,r)||void this.pptFetcher.getTarget(t).then((function(e){return e.slideFetcher.getTarget(r)}))},u.prototype.getPptStateRightNow=function(e,t){var r=this.pptFetcher.getTargetRightNow(e);if(r){var i=r.slideFetcher.getTargetRightNow(t);if(i)return n({},r.definition,i)}},u.prototype.fetchSlideDefinition=function(e,t,r){return i(this,void 0,void 0,(function(){var n,i,a,s=this;return o(this,(function(o){switch(o.label){case 0:return[4,t.loadSlide(r)];case 1:return n=o.sent(),i=n.animations.sequenceAnimesCounts[-1]||0,a=Object.freeze({index:r,data:n,progressCount:i+1}),setTimeout((function(){return s.onSlideReady(e,r)}),0),[2,a]}}))}))},u);function u(e,t,r,n){var c=this;this.userFonts=e,this.preload=t,this.onSlideReady=r,this.onPPTLoadProgress=n,this.fetchPPTDefinition=function(e){return i(c,void 0,void 0,(function(){var t,r,n,i,c,u=this;return o(this,(function(o){switch(o.label){case 0:return t="https://white-cn-doc-convert.oss-cn-hangzhou.aliyuncs.com/dynamicConvert/"+e,r=this.onPPTLoadProgress&&function(t){u.onPPTLoadProgress(e,parseFloat(t))},[4,a.loadPPT(t,e,this.preload,r,this.userFonts)];case 1:return n=o.sent(),i=Object.freeze({uuid:e,width:n.width,height:n.height,slidesCount:n.slidesCount}),c=new s.FetcherHub((function(t){return u.fetchSlideDefinition(e,n,t)})),[2,Object.freeze({slideFetcher:c,definition:i})]}}))}))},this.pptFetcher=new s.FetcherHub(this.fetchPPTDefinition)}t.SlideLoader=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.getTargetRightNow=function(e){return this.targets[e]},i.prototype.getTarget=function(e){var t=this,r=this.targets[e];if(r)return Promise.resolve(r);var n=this.fetching[e];return n||(n=this.fetching[e]=this.fetcher(e)).then((function(r){t.targets[e]=r,delete t.fetching[e]})).catch((function(){delete t.fetching[e]})),n},i);function i(e){this.fetcher=e,this.targets={},this.fetching={}}t.FetcherHub=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"disableInteractive",{get:function(){return this._disableInteractive},enumerable:!0,configurable:!0}),i.prototype.setSlideStateAdapterCallbacks=function(e){this.callbacks=e},i.prototype.setState=function(e,t,r){var n;this._disableInteractive||this.onUpdateSlideState(((n={})[e+"-"+t]=r,n.uuid=e,n.pageIndex=t,n))},i.prototype.onPageJumpTo=function(e,t){this.jumpPpt(e,t)},i.prototype.setDisableInteractive=function(e){this._disableInteractive=e},i);function i(e,t){this.onUpdateSlideState=e,this.jumpPpt=t,this._disableInteractive=!0}t.MySlideStateAdapter=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(1),s=r(46),c=(i(u,o=a.Component),u.prototype.componentWillMount=function(){this.dynamicPpt.addDynamicPptDelegate(this.url,this),this.setState({pptState:this.dynamicPpt.getPptStateWithSlideUrl(this.url),slideState:this.dynamicPpt.getSliderState(this.url)})},u.prototype.componentWillUnmount=function(){this.dynamicPpt.removeDynamicPptDelegate(this)},u.prototype.onSilderStateUpdate=function(e){this.setState({slideState:e})},u.prototype.onSlideReady=function(){if(!this.state.pptState){var e=this.dynamicPpt.getPptStateWithSlideUrl(this.url);this.setState({pptState:e})}},u.prototype.render=function(){if(this.state.pptState){var e=this.state.slideState,t=this.state.pptState.data;return a.createElement(s.Slide,{data:t,state:e,stateAdapter:this.props.dynamicPpt.slideStateAdapter})}return null},u);function u(e){var t=o.call(this,e)||this;return t.dynamicPpt=e.dynamicPpt,t.url=e.url,t}t.DynamicComponent=c},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(8),o=r(0),a=r(5),s=r(15),c=r(20),u=r(103),l=(p.prototype.addApplianceComponents=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t],i=o.findIdentifierWith(n),a=this.findClassRender(n);this.scene.addComponent({id:i,originX:n.originX,originY:n.originY,width:n.width,height:n.height,sceneMargin:n.hitTestingBoxMargin,payload:n,render:a})}},p.prototype.render=function(e){var t=this.scene.createScreen({width:this.width,height:this.height});t.adaptRectangle(n({},this.createRectangleIncludesAllComponents(),{adapterMode:a.RectangleAdapterMode.Centering,animationMode:a.AnimationMode.Immediately}));var r={deviceType:a.DeviceType.Desktop,observerId:o.AdminObserverId,forcePPTLandscape:!1,pluginOperator:this.pluginOperator,disalbeImageHit:!1,dynamicPpt:u.createDynamicPpt({preload:!1,userFonts:this.userFonts})},i=e||t.camera;return this.scene.renderScreenshot({width:this.width,height:this.height,camera:i,context:r,wrappedComponents:this.wrappedComponents})},p.prototype.createRectangleIncludesAllComponents=function(){if(0<this.scene.components.length){for(var e=Number.MAX_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,a=0,s=this.scene.components;a<s.length;a++){var c=s[a],u=c.originX,l=c.originY,p=c.width,h=c.height,d=o.isInstanceOf(c,i.Editable)?c.hitTestingBoxMargin:0;e=Math.min(e,u-d),t=Math.min(t,l-d),r=Math.max(r,u+p+d),n=Math.max(n,l+h+d)}return{originX:e,originY:t,width:r-e,height:n-t}}return{originX:0,originY:0,width:0,height:0}},p);function p(e){var t=this;this.findClassRender=function(e){return t.pluginsManager.isPluginAppliance(e)?t.pluginsManager.pluginComponentClass:c.register.findApplianceClass(o.findClassId(e))},this.pluginsManager=e.pluginsManager;var r=new a.Boundless(a.DeviceType.Desktop);this.scene=r.createScene.apply(r,s.createLayoutDescriptions()),this.width=e.width,this.height=e.height,this.pluginOperator=e.pluginOperator,this.userFonts=e.userFonts,this.wrappedComponents=e.wrappedComponents;var n=e.path&&e.path.slice(),i=e.applianceManager.scenes,u=n?i.getScene(n):i.currentScene;u&&this.addApplianceComponents(u.components)}t.WhiteScreenshotRender=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(493);t.PluginsManager=n.PluginsManager;var i=r(214);t.createSrc=i.createSrc,t.updateSrcBySetProps=i.updateSrcBySetProps,t.getProtocolWith=i.getProtocolWith,t.getPropsWith=i.getPropsWith},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(101),a=r(0),s=r(8),c=r(494),u=(l.prototype.isPluginAppliance=function(e){return a.isInstanceOf(e,s.ImageShape)},l.prototype.pluginWith=function(e){return this.plugins[e]},l.prototype.standardizeProps=function(e){var t={};for(var r in e){var n=e[r];void 0!==n&&(t[r]=n)}return Object.freeze(t)},l);function l(e){var t,r={},n=(t=c.PluginComponent,i(a,t),a);function a(){return null!==t&&t.apply(this,arguments)||this}(n.pluginsManager=this).pluginComponentClass=o.observer(n);for(var s=0,u=e;s<u.length;s++){var l=u[s];if(/^https?$/.test(l.protocol))throw new Error("find invalid plugin name "+JSON.stringify(l.protocol));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(l);Object.defineProperties(p,{name:{enumerable:!1,writable:!1,value:l.name||"plugin"},protocol:{writable:!1,value:l.protocol},backgroundProps:{writable:!1,value:l.backgroundProps&&this.standardizeProps(l.backgroundProps)}}),r[l.protocol]=p}this.plugins=Object.freeze(r)}t.PluginsManager=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a,s,c=r(1),u=r(0),l=r(5),p=r(15),h=r(33),d=r(214),f=(i(m,a=c.Component),m.prototype.getPluginsManager=function(){return this.constructor.pluginsManager},m.hitTest=function(e,t,r,n,i){var o=t.payload,a=d.getProtocolWith(o);if(a&&!/^https?/.test(a)){var s=this.pluginsManager.pluginWith(a);if(s)return this.hitTestPlugin(s,o,t,r,n,i)}return!e.context.disalbeImageHit},m.hitTestPlugin=function(e,t,r,n,i,o){if(e.hitTest){var a=d.getPropsWith(t),s=n-r.originX,c=i-r.originY;return e.hitTest(a||{},s,c,o)}return!0},m.willInterruptEvent=function(e,t,r,n){var i=t.payload,o=d.getProtocolWith(i);if(o&&!/^https?/.test(o)){var a=this.pluginsManager.pluginWith(o);if(a&&a.willInterruptEvent)return a.willInterruptEvent(d.getPropsWith(i),n)}return!1},m.prototype.render=function(){if(this.props.layout===p.WhiteLayouts.Component)return c.createElement(h.EditableComponent,o({},this.props));var e=this.props.payload;if(!u.isAkkoWrappedObjectAccessible(e))return null;var t=this.props.size,r=t.width,n=t.height;if(!e.imageSrc)return this.renderLoadingShape(r,n);var i=d.getProtocolWith(e);if(i){var a=this.getPluginsManager().pluginWith(i),s=this.props.context.pluginOperator;if(a)return c.createElement(a,o({},o({},a.backgroundProps,d.getPropsWith(e),{operator:s,uuid:e.uuid,width:this.props.size.width,height:this.props.size.height})))}return this.renderImageShape(e.imageSrc,r,n)},m.prototype.renderLoadingShape=function(e,t){return c.createElement(l.CNode,{kind:l.CNodeKind.SVG,coordinates:l.CNodeCoordinates.RelativeBounded},c.createElement("rect",{strokeDasharray:"5,5",key:this.props.id,x:0,y:0,width:e,height:t,style:{stroke:"#EEEEEE",strokeWidth:3,fill:"#F5F5F5",strokeLinejoin:"round",strokeLinecap:"round"}}))},m.prototype.renderImageShape=function(e,t,r){return this.props.context.convertIdToUrl&&(e=this.props.context.convertIdToUrl(e)),c.createElement(l.CNode,{kind:l.CNodeKind.HTML,coordinates:l.CNodeCoordinates.RelativeBounded},c.createElement("img",{key:this.props.id,src:e,width:t,height:r}))},m.layouts=Object.freeze(((s={})[p.WhiteLayouts.Graphics]={isVisible:!0},s[p.WhiteLayouts.Component]={isVisible:!0},s)),m);function m(){return null!==a&&a.apply(this,arguments)||this}t.PluginComponent=f},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this;Object.defineProperty(t,"__esModule",{value:!0});var a=r(41);t.fetchRoomOrigin=function(e){return n(o,void 0,void 0,(function(){var t,r,n,o,s,c;return i(this,(function(i){switch(i.label){case 0:return n="https://cdncloudroomv2.herewhite.com",[3,1];case 1:return o=a.stringify({roomToken:e}),[4,window.fetch("https://cloudcapiv4.herewhite.com/room/url?"+o,{method:"get",headers:{"content-type":"application/json",Accept:"application/json"}})];case 2:if(200!==(s=i.sent()).status)throw new Error("fetch room origin failed with status "+s.status);return[4,s.json()];case 3:c=i.sent(),t=c.msg.realTime,r=c.msg.storage,i.label=4;case 4:return t=t.replace(/\*/i,(function(){return""+window.location.hostname})),[2,Object.freeze({socket:t,persistence:r,assets:n})]}}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(Object.defineProperty(i.prototype,"isOnline",{get:function(){return navigator.onLine},enumerable:!0,configurable:!0}),i.prototype.addListener=function(e){var t={origin:e,onOffline:function(){return e.onOffline()},onOnline:function(){return e.onOnline()}};this.listenerNodes.push(t),window.addEventListener("online",t.onOnline),window.addEventListener("offline",t.onOffline)},i.prototype.removeListener=function(e){var t=this.listenerNodes.findIndex((function(t){return t.origin===e}));if(-1!==t){var r=this.listenerNodes.splice(t,1)[0];window.removeEventListener("online",r.onOnline),window.removeEventListener("offline",r.onOffline)}},i);function i(){this.listenerNodes=[]}t.NetState=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=r(41);(a=o=t.PptKind||(t.PptKind={})).Dynamic="dynamic",a.Static="static";var c=(u.prototype.convert=function(e){return n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:return[4,this.createPptTask(e)];case 1:return t=n.sent(),[4,this.checkUtilHasResult(t,e)];case 2:return r=n.sent(),[2,u.wrapPptDescriptions(t,e.kind,r)]}}))}))},u.prototype.createPptTask=function(e){return n(this,void 0,void 0,(function(){var t,r,n,o,a,c;return i(this,(function(i){switch(i.label){case 0:return t=s.stringify({roomToken:this.roomToken}),[4,window.fetch("https://cloudcapiv4.herewhite.com/services/conversion/tasks?"+t,{method:"post",headers:{"content-type":"application/json",Accept:"application/json"},body:JSON.stringify({sourceUrl:e.url,serviceType:u.convertPptKindToServiceType(e.kind)})})];case 1:if(200!==(r=i.sent()).status)throw new Error("failed to convert "+JSON.stringify(e.url)+" with status "+r.status);return[4,r.json()];case 2:if(n=i.sent().msg,o=n.succeed,a=n.reason,c=n.taskUUID,!o)throw new Error("create ppt task failed: "+a);return[2,c]}}))}))},u.prototype.checkUtilHasResult=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,a,s,c,l;return i(this,(function(p){switch(p.label){case 0:r=!1,n=Date.now(),o=t.checkProgressInterval||u.defaultCheckProgressInterval,a=t.checkProgressTimeout||u.defaultCheckProgressTimeout,s=function(){var s,u,l,p,h,d,f;return i(this,(function(i){switch(i.label){case 0:return s=Date.now(),[4,c.fetchProgress(e,t.kind)];case 1:switch((u=i.sent()).convertStatus){case"Finished":return t.onProgressUpdated&&!r&&t.onProgressUpdated(1),[2,{value:u.convertedFileList.map((function(e){return{width:e.width,height:e.height,src:u.prefix+e.conversionFileUrl}}))}];case"Fail":case"NotFound":throw new Error("failed to convert "+JSON.stringify(t.url)+": "+u.reason)}if(l=u.convertedPageSize,p=u.totalPageSize,h=0===p?0:l/p,n+a<=(d=s+o))throw new Error("failed to convert "+JSON.stringify(t.url)+": timeout");return t.onProgressUpdated&&t.onProgressUpdated(h),1==h&&(r=!0),0<(f=d-Date.now())?[4,new Promise((function(e){return setTimeout(e,f)}))]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))},c=this,p.label=1;case 1:return[5,s()];case 2:return"object"==typeof(l=p.sent())?[2,l.value]:[3,1];case 3:return[2]}}))}))},u.prototype.fetchProgress=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o;return i(this,(function(i){switch(i.label){case 0:return r="https://cloudcapiv4.herewhite.com/services/conversion/tasks/"+e+"/progress",n=s.stringify({roomToken:this.roomToken,serviceType:u.convertPptKindToServiceType(t)}),[4,window.fetch(r+"?"+n,{headers:{"content-type":"application/json",Accept:"application/json"}})];case 1:if(200!==(o=i.sent()).status)throw new Error("failed to fetch progress of "+JSON.stringify(r));return[4,o.json()];case 2:return[2,i.sent().msg.task]}}))}))},u.wrapPptDescriptions=function(e,t,r){for(var n=[],i=[],o=0,a=0,s=0;s<r.length;++s){var c=r[s],u=c.src,l=c.width,p=c.height;n[s]=u,i[s]={name:""+(s+1),ppt:{src:u,width:l,height:p}},o=l,a=p}return{uuid:e,kind:t,width:o,height:a,slideURLs:n,scenes:i}},u.convertPptKindToServiceType=function(e){switch(e){case o.Dynamic:return"dynamic_conversion";case o.Static:return"static_conversion";default:throw new Error("invalid kind "+JSON.stringify(e))}},u.defaultCheckProgressInterval=1500,u.defaultCheckProgressTimeout=3e5,u);function u(e){this.roomToken=e}t.PptConverterImplement=c},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(499),o=r(0),a=(s.prototype.createLoggerHub=function(e){return void 0===e&&(e={}),e.disableReportLog?i.createDefaultLoggerHub({prefix:"[White]",levelMask:e.printLevelMask}):i.createRemoteLoggerHub({reportOrigin:"https://edgesdkreport.herewhite.com",prefix:"[White]",reportInterval:1e4,reportCountOnce:200,bufferMaxCount:2e3,reportLevelMask:e.reportLevelMask,printLevelMask:e.printLevelMask})},s.prototype.createRealtimeLoggerContext=function(e){return new i.LoggerContext(this.loggerHub,Object.freeze(n({},this.tags,{uuid:e})))},s.prototype.createPlayerLoggerContext=function(){return new i.LoggerContext(this.loggerHub,this.tags)},s);function s(e,t){this.loggerHub=this.createLoggerHub(t),this.tags=Object.freeze({appIdentifier:e.appIdentifier,appHash:e.appHash,appVersion:e.appVersion,akkoVersion:o.AkkoVersion,sdkVersion:"2.3.17"})}t.WhiteLoggerFactory=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(500),i=r(216),o=r(504);t.LoggerContext=o.LoggerContext,t.createRemoteLoggerHub=function(e){return new n.RemoteLoggerHub(e)},t.createDefaultLoggerHub=function(e){return void 0===e&&(e={}),new i.DefaultLoggerHub(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(501);t.RemoteLoggerHub=n.RemoteLoggerHub},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(502),a=r(216),s=r(503),c=(u.prototype.log=function(e,t,r){if(this.logger.log(e,t),a.DefaultLoggerHub.indexOfLevel(e)>=this.reportLevelMaskIndex){var n={level:e,tags:r,message:t,timestamp:Date.now()};for(this.logNodesBuffer.push(n);this.logNodesBuffer.length>this.bufferMaxCount;)this.logNodesBuffer.shift();this.reportLimiter.invoke()}},u.prototype.reportLogNodes=function(e){return void 0===e&&(e=this.logNodesBuffer.length),n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.reporter.report(this.logNodesBuffer.splice(0,e))];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),console.warn(t.message),[3,3];case 3:return[2]}}))}))},u);function u(e){var t=this;this.logNodesBuffer=[],this.reportAndCleanBuffer=function(){return n(t,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:e.trys.push([0,,6,7]),this.reportLimiter.freeze(),e.label=1;case 1:return this.logNodesBuffer.length>this.reportCountOnce?[4,this.reportLogNodes(this.reportCountOnce)]:[3,3];case 2:return e.sent(),[3,1];case 3:return 0<this.logNodesBuffer.length?[4,this.reportLogNodes()]:[3,5];case 4:e.sent(),e.label=5;case 5:return[3,7];case 6:return this.reportLimiter.unfreeze(),[7];case 7:return[2]}}))}))},this.reporter=new o.RemoteLoggerReporter(e.reportOrigin),this.reportLimiter=new s.FrequencyLimiter(e.reportInterval,this.reportAndCleanBuffer),this.logger=new a.DefaultLoggerHub({prefix:e.prefix,levelMask:e.printLevelMask}),this.reportCountOnce=e.reportCountOnce,this.bufferMaxCount=e.bufferMaxCount,this.reportLevelMaskIndex=a.DefaultLoggerHub.indexOfLevel(e.reportLevelMask)}t.RemoteLoggerHub=c},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=(a.prototype.report=function(e){return n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:return t=this.origin+"/rest/log",[4,window.fetch(t,{method:"post",body:JSON.stringify({log:e}),headers:{"content-type":"application/json"}})];case 1:if(200!==(r=n.sent()).status)throw new Error("report failed with status code "+r.status);return[2]}}))}))},a);function a(e){this.origin=e}t.RemoteLoggerReporter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.invoke=function(){if(this.isFreezed)this.shouldInvokeAfterFreeze=!0;else if(-1===this.timer){var e=this.nextInvokeTimeDuration();this.timer=setTimeout(this.invokeWhenTimeout,e)}},i.prototype.nextInvokeTimeDuration=function(){var e=Date.now(),t=this.latestInvokeTimestamp+this.limitDuration-e;return Math.max(0,t)},i.prototype.invokeWhenTimeout=function(){this.timer=-1,this.latestInvokeTimestamp=Date.now(),this.invoker()},i.prototype.freeze=function(){this.isFreezed||(-1!==this.timer&&(clearTimeout(this.timer),this.timer=-1,this.shouldInvokeAfterFreeze=!0),this.isFreezed=!0)},i.prototype.unfreeze=function(){this.isFreezed&&(this.isFreezed=!1,this.shouldInvokeAfterFreeze&&(this.shouldInvokeAfterFreeze=!1,this.invoke()))},i);function i(e,t){this.isFreezed=!1,this.shouldInvokeAfterFreeze=!1,this.latestInvokeTimestamp=0,this.timer=-1,this.limitDuration=e,this.invoker=t,this.invokeWhenTimeout=this.invokeWhenTimeout.bind(this)}t.FrequencyLimiter=n},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function i(e){return"string"==typeof e?e:e.stack||e.message}Object.defineProperty(t,"__esModule",{value:!0});var o=(Object.defineProperty(a.prototype,"context",{get:function(){return this._context},set:function(e){this._context=e&&Object.freeze(n({},e))},enumerable:!0,configurable:!0}),a.prototype.createLogger=function(){var e=this,t={debug:function(t){return e.loggser.log("debug",i(t),e._context)},info:function(t){return e.loggser.log("info",i(t),e._context)},warn:function(t){return e.loggser.log("warn",i(t),e._context)},error:function(t){return e.loggser.log("error",i(t),e._context)}};return Object.freeze(t)},a);function a(e,t){this.loggser=e,this.context=t}t.LoggerContext=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(506),i=(o.prototype.dispatchMagixEvent=function(e){var t=this.listeners[e.event];if(t)for(var r=0,n=t;r<n.length;r++){var i=n[r];try{i(e)}catch(t){console.error(t)}}var o=this.waitingNodes.findIndex((function(t){return!!t.filter(e)&&(t.resolve(e),!0)}));-1!==o&&this.waitingNodes.splice(o,1)},o.prototype.addMagixEventsListener=function(e,t,r){var i=n.createEventsMerger(t,r),o=this.eventsMergers[e];o||(o=[],this.eventsMergers[e]=o),o.push(i),this.addMagixEventListener(e,i)},o.prototype.addMagixEventListener=function(e,t){var r=this.listeners[e];r||(r=[],this.listeners[e]=r),r.push(t)},o.prototype.removeMagixEventListener=function(e,t){if(t){var r=this.removeFromEventMerges(e,t);r?this.removeFromListeners(e,r):this.removeFromListeners(e,t)}else delete this.listeners[e],delete this.eventsMergers[e]},o.prototype.removeFromEventMerges=function(e,t){var r=this.eventsMergers[e];if(r){for(var n=-1,i=0;i<r.length;++i)if(r[i].proxyListener===t){n=i;break}if(-1!==n){var o=r[n];return r.splice(n,1),0===r.length&&delete this.eventsMergers[e],o}}},o.prototype.removeFromListeners=function(e,t){var r=this.listeners[e];if(r){var n=r.indexOf(t);-1!==n&&(r.splice(n,1),0===r.length&&delete this.listeners[e])}},o.prototype.waitMagixEvent=function(e){var t=this;return new Promise((function(r){t.waitingNodes.push({resolve:r,filter:e})}))},o);function o(){this.listeners={},this.eventsMergers={},this.waitingNodes=[]}t.MagixEventsManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(70);t.createEventsMerger=function(e,t){var r=[],i=new n.InvokeFrequencyLimiter(t,(function(){0<r.length&&e(r.splice(0,r.length))}));function o(e){r.push(e),i.invoke()}return Object.defineProperty(o,"proxyListener",{writable:!1,value:e}),o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(508);t.CursorsManager=n.CursorsManager},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(19),o=r(8),a=r(509),s=(c.prototype.updateObserverId=function(e){this.observerId=e},c.prototype.updateScreenSize=function(){for(var e in this.cursorStateNodes)this.cursorStateNodes[e].updateScreenSize()},c.prototype.release=function(){this.disposer()},c.prototype.isFollowerFixedOnScreen=function(e){for(var t=void 0,r=0;r<e.length;++r){var n=e[r];if(n.memberId===this.observerId){t=n;break}}return!!t&&(t.mode===o.ViewMode.Broadcaster||t.mode===o.ViewMode.Follower)},n([i.observable],c.prototype,"observerId",void 0),c);function c(e){var t=this;this.cursorStateNodes={},this.autoUpdateCursors=function(){for(var e=t.applianceManager.getMemberDisplayers(),r=t.isFollowerFixedOnScreen(e),n={},i=t.cursorStateNodes,o=0;o<e.length;++o){var s=e[o],c=s.memberId;if(!t.willHideObserver||s.memberId!==t.observerId){var u=i[c];u?(u.updateDisplayer(s,r),n[c]=u,delete i[c]):n[c]=new a.CursorStateNode(t.applianceManager,t.screen,s,r,t.adapter)}}for(var c in i)i[c].remove();t.cursorStateNodes=n},this.applianceManager=e.applianceManager,this.screen=e.screen,this.willHideObserver=e.willHideObserver,this.adapter=e.adapter,this.observerId=e.observerId,this.disposer=i.autorun(this.autoUpdateCursors)}t.CursorsManager=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(45),o=r(5),a=r(110),s=r(510),c=(Object.defineProperty(u.prototype,"isVisible",{get:function(){return this.isCursorInScene&&this.isKeepVisible},enumerable:!0,configurable:!0}),u.prototype.updateDisplayer=function(e,t){this.setPositionProperties(e,t),this.setVisibleProperties(e),this.refreshComponentPosition(),this.cursor.updateDisplayer(e)},u.prototype.updateScreenSize=function(){this.refreshComponentPosition()},u.prototype.remove=function(){this.cleanInactivityDelayer(),this.screen.scene.removeComponent(this.cursor.component),this.cursor.release()},u.prototype.setPositionProperties=function(e,t){if(this.mode=e.mode,this.originX=e.originX,this.originY=e.originY,this.cursorX=e.cursorX,this.cursorY=e.cursorY,this.width=e.width,this.height=e.height,this.isFollowerFixedOnScreen=t,this.didMouseCursorMoved)this.latestCheckedCursorX=this.cursorX,this.latestCheckedCursorY=this.cursorY;else{var r=a.KeepActiveMaxDistance,n=0===this.width?1:this.screen.width/this.width,i=0===this.height?1:this.screen.height/this.height,o=(this.cursorX-this.latestCheckedCursorX)*this.width*n,s=(this.cursorY-this.latestCheckedCursorY)*this.height*i;r*r<=o*o+s*s&&(this.didMouseCursorMoved=!0)}},u.prototype.setVisibleProperties=function(e){var t=this.isActivity;this.isCursorInScene=e.isCursorInScene,this.isPressed=e.isPressed,this.isActivity=e.isActivity,t&&!this.isActivity?this.delayInactivity():!t&&this.isActivity?(this.cleanInactivityDelayer(),this.isKeepVisible=!0):!this.isActivity&&this.checkMouseCursorMoved()&&this.delayInactivity(),this.refreshIsVisible()},u.prototype.refreshComponentPosition=function(){if(this.isVisible){var e=this.getCurrentComponentPosition(),t=this.getNextAnimationMode();this.cursor.component.moveTo(e.x-this.cursor.x,e.y-this.cursor.y,t)}},u.prototype.getNextAnimationMode=function(){return this.shouldAppearNextFrame?(this.shouldAppearNextFrame=!1,o.AnimationMode.Immediately):this.isPressed?o.AnimationMode.Immediately:o.AnimationMode.Continuous},u.prototype.getCurrentComponentPosition=function(){var e,t;if(this.isFollowerFixedOnScreen&&this.mode!==n.ViewMode.Freedom){var r=0===this.width?1:this.screen.width/this.width,i=0===this.height?1:this.screen.height/this.height,o=Math.min(r,i),a=(this.screen.width-o*this.width)/2,s=(this.screen.height-o*this.height)/2;e=this.cursorX*this.width*o+a-this.screen.width/2,t=this.cursorY*this.height*o+s-this.screen.height/2}else{var c=this.screen.camera,u=c.centerX,l=c.centerY;o=c.scale,e=((e=this.cursorX*this.width+this.originX)-u)*o,t=((t=this.cursorY*this.height+this.originY)-l)*o}return{x:e,y:t}},u.prototype.checkMouseCursorMoved=function(){return!!this.didMouseCursorMoved&&!(this.didMouseCursorMoved=!1)},u.prototype.cleanInactivityDelayer=function(){null!==this.inactivityTimer&&(clearTimeout(this.inactivityTimer),this.inactivityTimer=null)},u.prototype.delayInactivity=function(){var e=this;null!==this.inactivityTimer&&(clearTimeout(this.inactivityTimer),this.inactivityTimer=null),this.isActivity||(this.isKeepVisible=!0,this.refreshIsVisible(),this.inactivityTimer=setTimeout((function(){e.isKeepVisible=!1,e.inactivityTimer=null,e.refreshIsVisible()}),a.BecomeInactivityDuration))},u.prototype.refreshIsVisible=function(){var e=this.isVisible;e||(this.shouldAppearNextFrame=!0),this.cursor.component.setVisible(i.WhiteLayouts.MouseCursor,e)},u);function u(e,t,r,n,i){this.didMouseCursorMoved=!1,this.inactivityTimer=null,this.shouldAppearNextFrame=!0,this.applianceManager=e,this.screen=t,this.isCursorInScene=r.isCursorInScene,this.isPressed=r.isPressed,this.isActivity=r.isActivity,this.isKeepVisible=r.isActivity,this.adapter=i,this.setPositionProperties(r,n),this.latestCheckedCursorX=this.cursorX,this.latestCheckedCursorY=this.cursorY,this.cursor=new s.CursorImplement(this.applianceManager,r,t,i,this.getCurrentComponentPosition()),this.refreshIsVisible()}t.CursorStateNode=c},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(19),a=r(511),s=r(219),c=(Object.defineProperty(u.prototype,"cursorMember",{get:function(){return this._cursorMember},enumerable:!0,configurable:!0}),u.prototype.updateDisplayer=function(e){this._cursorMember&&!s.isEquals(this._cursorMember.information,e.information)&&(this._cursorMember=Object.freeze(n({},this._cursorMember,{information:e.information})),this.onCursorMemberChanged&&this.onCursorMemberChanged(this._cursorMember))},u.prototype.release=function(){this.disposer()},Object.defineProperty(u.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"divElement",{get:function(){if(!this.cursorComponent)throw new Error("cursor isn't added");return this.cursorComponent.divElement},enumerable:!0,configurable:!0}),u.prototype.setReactNode=function(e){this.reactNode=e,this.component.payload={reactNode:e,onCursorComponentChanged:this.onCursorComponentChanged}},u.prototype.setCursorDescription=function(e){var t=n({x:this._x,y:this._y,width:this._width,height:this._height},e),r=t.x-this._x,i=t.y-this._y;this.component.setRectangle(this.component.originX+r,this.component.originY+i,t.width,t.height),this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height},u.prototype.cleanDivElement=function(e){for(;0<e.childElementCount;)e.childNodes.item(0).remove()},u);function u(e,t,r,s,c){var u=this;this.reactNode=null,this.onCursorComponentChanged=function(e){var t=u.cursorComponent;(u.cursorComponent=e)?u.adapter.onAddedCursor&&u.adapter.onAddedCursor(u):u.adapter.onRemovedCursor&&(u.adapter.onRemovedCursor(u),t&&u.cleanDivElement(t.divElement))},this.applianceManager=e,this.adapter=s,this.memberId=t.memberId;var l=this.adapter.createCursor(t.memberId);this._x=l.x,this._y=l.y,this._width=l.width,this._height=l.height,this.reactNode=l.reactNode||null,this.component=r.scene.addComponent({id:"cursor-"+t.memberId,originX:c.x-this._x,originY:c.y-this._y,width:l.width,height:l.height,render:a.CursorComponent,orderIndex:this.memberId,payload:{reactNode:this.reactNode,onCursorComponentChanged:this.onCursorComponentChanged}}),this.disposer=o.autorun((function(){var e=u.applianceManager.getMemberState(t.memberId);if(e){var r=e.currentApplianceName,o=i.copy(e.strokeColor);u._cursorMember?(u._cursorMember=Object.freeze(n({},u._cursorMember,{color:o,appliance:r})),u.onCursorMemberChanged&&u.onCursorMemberChanged(u._cursorMember)):u._cursorMember=Object.freeze({color:o,appliance:r,information:t.information})}}))}t.CursorImplement=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=r(1),c=r(5),u=r(45),l=(i(p,o=s.Component),Object.defineProperty(p.prototype,"divElement",{get:function(){return this._divElement},enumerable:!0,configurable:!0}),p.prototype.render=function(){var e,t=this.props.payload.reactNode;return e=t?s.createElement("div",{ref:this.onUpdateRef,style:{width:this.props.size.width,height:this.props.size.height}},t):s.createElement("div",{ref:this.onUpdateRef,style:{width:this.props.size.width,height:this.props.size.height}}),s.createElement(c.CNode,{kind:c.CNodeKind.HTML},e)},p.layouts=Object.freeze(((a={})[u.WhiteLayouts.MouseCursor]={isVisible:!1},a)),p);function p(){var e=null!==o&&o.apply(this,arguments)||this;return e.onUpdateRef=function(t){!e._divElement&&t?(e._divElement=t,e.props.payload.onCursorComponentChanged(e)):e._divElement&&!t&&e.props.payload.onCursorComponentChanged(null)},e}t.CursorComponent=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(513),o=r(110),a=(s.prototype.isHitTestIdentifiesDifferent=function(e){var t=this.latestHitTestIdentifies.length!==e.length;if(!t)for(var r=0;r<e.length&&!(t=e[r]!==this.latestHitTestIdentifies[r]);++r);return t},s);function s(e){var t=this;this.delegate=e,this.invoker=new i.UnderclockingInvoker(o.HoverMouseEventLimitTimeInterval),this.isHover=!0,this.latestHitTestIdentifies=[],this.pushBoundlessEvent=function(e){var r=t.delegate.getHitTestIdentifies(e.pointOnScreen);switch(e.kind){case n.BoundlessEventKind.MouseDown:t.isHover=!1;break;case n.BoundlessEventKind.MouseUp:t.isHover=!0}t.isHover&&e.kind===n.BoundlessEventKind.MouseMove&&!t.isHitTestIdentifiesDifferent(r)?t.invoker.invoke((function(){return t.delegate.pushBoundlessMouseEventKind(e,r)})):(t.invoker.cancel(),t.delegate.pushBoundlessMouseEventKind(e,r)),t.latestHitTestIdentifies=r}}t.HoverEventLimiter=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(70),i=(o.prototype.invoke=function(e){this.nextInvoker=e,this.limiter.invoke()},o.prototype.cancel=function(){this.nextInvoker=void 0,this.limiter.cancel()},o);function o(e){var t=this;this.onLimiterInvoke=function(){if(t.nextInvoker)try{t.nextInvoker()}finally{t.nextInvoker=void 0}},this.limiter=new n.InvokeFrequencyLimiter(e,this.onLimiterInvoke)}t.UnderclockingInvoker=i},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(19),o=r(70),a=r(219),s=(Object.defineProperty(c.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),c.prototype.release=function(){for(var e=0,t=this.disposers;e<t.length;e++)(0,t[e])()},c.prototype.activeUpdate=function(e,t){try{this.activeUpdateKey=e;var r=t();return this._state=Object.freeze(n({},this._state,((i={})[e]=r,i))),this.onStateChanged&&!this.disableActiveCallback&&this.onStateChanged(((o={})[e]=r,o)),r}finally{this.activeUpdateKey=null}var i,o},c.prototype.createAutoRun=function(e){function t(t){var o=e[t],s=i.autorun((function(){if(r.didStateReady){var e=o(),n=t in r.updatedState?r.updatedState[t]:r._state[t];r.activeUpdateKey===t||a.isEquals(e,n)||(r.updatedState[t]=e,r.updateLimiter.invoke())}else r.updatedState[t]=o()}));n.push(s)}var r=this,n=[];for(var o in e)t(o);return this._state=Object.freeze(this.updatedState),this.updatedState={},this.didStateReady=!0,n},c);function c(e){var t=e.disableMaskKey,r=e.propertyGetters,n=e.onStateChanged,i=this;this.didStateReady=!1,this.updatedState={},this.activeUpdateKey=null,this.updateState=function(){var e=i.updatedState;i._state=Object.freeze(Object.assign({},i._state,e)),i.updatedState={},i.onStateChanged&&i.onStateChanged(e)},this.disableActiveCallback=t,this.updateLimiter=new o.InvokeFrequencyLimiter(0,this.updateState),this.onStateChanged=n,this.disposers=this.createAutoRun(r)}t.StateTrigger=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(113);t.basePixelWidth=function(e){switch(e){case n.ScreenType.Desktop:case n.ScreenType.Phone:case n.ScreenType.Pad:case n.ScreenType.TV:return 2.42;default:return 1}}},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(517);t.videoJSID="white-sdk-video-js";var a=(s.prototype.createVideojsPlayer=function(){var e=document.createElement("video");e.setAttribute("x5-video-player-type","h5-page"),e.setAttribute("id",t.videoJSID),e.setAttribute("playsInline",""),e.setAttribute("style","display:none;"),e.setAttribute("class","video-js"),document.body.appendChild(e),this.videoJSWrapper=o.default(e,{preload:"auto",controls:!1})},s.prototype.bindEvents=function(){var e=this;this.videoJSWrapper.ready((function(){e.isReady=!0,0!==e.seekTime&&(this.currentTime(e.seekTime),e.seekTime=0,e.callbacks.onSeeked()),this.on("canplay",(function(){e.isCanPlay=!0,e.callbacks.onCanPlay()})),this.on("waiting",(function(){e.isCanPlay=!1,e.callbacks.onBuffering()})),this.on("ended",(function(){e.isCanPlay=!1,e.callbacks.onEnded()})),this.on("seeked",(function(){e.isCanPlay=!0,e.callbacks.onSeeked()}))}))},s.prototype.pause=function(){this.videoJSWrapper.pause()},s.prototype.play=function(){return this.videoJSWrapper.play(),this.isCanPlay?i.OperationResult.Success:i.OperationResult.Padding},s.prototype.seek=function(e){var t=e/1e3;return this.videoJSWrapper.currentTime()===t?(this.seekTime=0,i.OperationResult.Success):this.isReady?(this.videoJSWrapper.currentTime(t),this.seekTime=this.videoJSWrapper.currentTime()===t?0:t,this.isCanPlay&&this.videoJSWrapper.currentTime()===t?i.OperationResult.Success:i.OperationResult.Padding):(this.seekTime=t,i.OperationResult.Padding)},s.prototype.stop=function(){this.videoJSWrapper.pause(),this.videoJSWrapper.dispose()},s);function s(e,r){if(this.mediaURL=e,this.isCanPlay=!1,this.isReady=!1,this.seekTime=0,!document)throw new Error("MediaPlayer can only work in browser");this.callbacks=Object.freeze(n({},r)),this.videoJSWrapper=o.default.getPlayer(t.videoJSID);var i=document.getElementById(t.videoJSID);this.videoJSWrapper?this.videoJSWrapper.src(this.mediaURL):i?(i.classList.add("video-js"),i.setAttribute("x5-video-player-type","h5-page"),this.videoJSWrapper=o.default(t.videoJSID,{preload:"auto",controls:!1}),this.videoJSWrapper.src(this.mediaURL)):(this.createVideojsPlayer(),this.videoJSWrapper.src(this.mediaURL)),this.bindEvents()}t.VideoJSPlayer=a},function(e,t){e.exports=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var c,u=r(184),l=r(8),p=r(5),h=r(0),d=r(46),f=r(45),m=r(109),y=r(221),A=r(70),g=r(222),v=r(110),b=r(111),P=r(69),w=r(220),S=r(112),x=(i(C,c=m.DisplayerImplement),Object.defineProperty(C.prototype,"applianceManager",{get:function(){return this.magix.trigger},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"isWritable",{get:function(){return this.magix.isWritable},enumerable:!0,configurable:!0}),C.prototype.setWritable=function(e){return this.logger.info("set writable "+e),e?this.magix.setWritable(e,this.deviceType):this.magix.setWritable(e)},Object.defineProperty(C.prototype,"disableDeviceInputs",{get:function(){return this._disableDeviceInputs},set:function(e){this._disableDeviceInputs=e,this.refreshDisableSyncOperations(),this.refreshCursorClass()},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"disableOperations",{get:function(){return this._disableDeviceInputs&&this.disableCameraTransform},set:function(e){this.disableDeviceInputs=e,this.disableCameraTransform=e},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"disableEraseImage",{get:function(){return this._disableEraseImage},set:function(e){this._disableEraseImage=e,this.refreshShouldDisableImageHit()},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"uuid",{get:function(){return this._uuid},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"session",{get:function(){return this.magix.session},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"slice",{get:function(){return this.magix.slice},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"roomToken",{get:function(){return this._roomToken},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"state",{get:function(){return this.stateTrigger.state},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"timeDelay",{get:function(){return this.magix.timeDelay},set:function(e){this.magix.timeDelay=e},enumerable:!0,configurable:!0}),C.prototype.getHitTestIdentifies=function(e){switch(this.state.memberState.currentApplianceName){case"selector":case"eraser":return c.prototype.getHitTestIdentifies.call(this,e);default:return[]}},C.prototype.setup=function(){var e=this;c.prototype.setup.call(this);var t=this.applianceManager;this.viewStateObserver=new g.ViewStateObserver({applianceManager:t,screen:this.cameraman.screen}),this.stateTrigger=new b.StateTrigger({disableMaskKey:this.onlyCallbackRemoteStateModify,onStateChanged:this.onRoomStateChanged,propertyGetters:{globalState:function(){return h.copy(t.getGlobalState())},memberState:function(){return h.copy(t.getMemberState())},roomMembers:function(){return t.getMemberDisplayers().map(e.covertMemberDisplayerToMember)},sceneState:function(){return e.getCurrentSceneState()},broadcastState:function(){return e.viewStateObserver.getBroadcastState()},zoomScale:function(){return e.viewStateObserver.getZoomScale()}}}),this.isEraser="eraser"===this.stateTrigger.state.memberState.currentApplianceName,this.cameraman.addHandToolActiveListener(this.onHandToolActive),this.cameraman.addBoundlessEventListener(this.onBoundlessEvent),this.cameraman.addCameraTransformationListener(this.onCameraTransform),this.cameraman.screen.addCameraUpdatedListener(this.onCameraUpdated),this.dynamicPpt.setGlobalState(h.copy(t.getGlobalState())),this.refreshCursorClass(),this.refreshShouldDisableImageHit()},C.prototype.dispose=function(){c.prototype.dispose.call(this),this.cameraman.removeBoundlessEventListener(this.onBoundlessEvent),this.cameraman.removeCameraTransformationListener(this.onCameraTransform),this.cameraman.screen.removeCameraUpdatedListener(this.onCameraUpdated),this.viewStateObserver&&this.viewStateObserver.release(),this.stateTrigger&&this.stateTrigger.release()},C.prototype.pushBoundlessMouseEvent=function(e,t){if(this.enableToSendAction()){var r={x:e.pointOnScene.x,y:e.pointOnScene.y,targetsMap:this.findTargetMapWithBoundlessEvent(e),hitTestIdentifies:t};switch(e.kind){case p.BoundlessEventKind.MouseDown:case p.BoundlessEventKind.SortedTouchStart:this.applianceManager.onMouseDown(r);break;case p.BoundlessEventKind.MouseMove:case p.BoundlessEventKind.SortedTouchMove:this.applianceManager.onMouseMove(r);break;case p.BoundlessEventKind.MouseUp:case p.BoundlessEventKind.SortedTouchEnd:case p.BoundlessEventKind.SortedTouchCancel:this.applianceManager.onMouseUp(r);break;case p.BoundlessEventKind.MouseLeave:this.applianceManager.onMouseLeave(r)}}},C.prototype.pushBoundlessKeyEvent=function(e){var t={key:e.key,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey};switch(e.kind){case p.BoundlessEventKind.KeyDown:this.applianceManager.onKeyDown(t),this.callbacks.onKeyDown&&this.callbacks.onKeyDown(e.nativeEvent);break;case p.BoundlessEventKind.KeyUp:this.applianceManager.onKeyUp(t),this.callbacks.onKeyUp&&this.callbacks.onKeyUp(e.nativeEvent)}},C.prototype.findTargetMapWithBoundlessEvent=function(e){var t=e.nativeEvent,r=void 0;if(t&&t.target){var n=this.cameraman.screen.layoutComponentWithTarget(t.target);n&&(r=this.findTargetsMap(n.componentId,n.layout,t))}return r||{}},C.prototype.willInterruptEvent=function(e){return!!(this.callbacks.willInterceptKeyboardEvent&&e instanceof KeyboardEvent)&&this.callbacks.willInterceptKeyboardEvent(e)},C.prototype.refreshDisableSyncOperations=function(){var e=!this._isWritable||this._disableDeviceInputs||this._phase===y.RoomPhase.Reconnecting||this._phase===y.RoomPhase.Disconnecting||this._phase===y.RoomPhase.Disconnected;this.cameraman.disableBoundlessEvent=e,this.dynamicPpt.setDisableInteractive(e)},C.prototype.connect=function(e){return a(this,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),void 0!==(t=function(e){if("object"==typeof e){var t=e.userId;switch(typeof t){case"string":return t;case"number":case"boolean":return""+t}}}(e.userPayload))&&(this.loggerContext.context=o({},this.loggerContext.context,{userId:t})),this._uuid=e.uuid,this._roomToken=e.roomToken,[4,this.magix.connect({uuid:e.uuid,roomToken:e.roomToken,connectedPayload:e.deviceType,isWritable:!0})];case 1:return n.sent(),this.setup(),this.magix.isWritable&&this.updateSelfUserId(this.magix.selfUserId),e.disableBezier&&this.applianceManager.setMemberState({__disableBezier:!0}),this.logger.info("join room success"),this.loggerContext.context=o({},this.loggerContext.context,{session:this.magix.session}),[3,3];case 2:throw r=n.sent(),this.logger.error("join room fail"),this.logger.error(r),r;case 3:return[2]}}))}))},C.prototype.refreshViewSize=function(){c.prototype.refreshViewSize.call(this),this.stateTrigger.state.broadcastState.mode!==l.ViewMode.Follower&&this.syncCameraToRemoteLimiter.invoke()},C.prototype.dispatchMagixEvent=function(e,t){this.magix.dispatch(e,t)},C.prototype.disconnect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.magix.disconnect()]}))}))},C.prototype.memberState=function(e){return h.copy(this.magix.trigger.getMemberState(e))},C.prototype.setGlobalState=function(e){var t=this;return this.stateTrigger.activeUpdate("globalState",(function(){var r=h.copy(t.applianceManager.setGlobalState(e));return t.dynamicPpt.setGlobalState(S.copyValue(r)),r}))},C.prototype.setMemberState=function(e){var t=this;return this.stateTrigger.activeUpdate("memberState",(function(){var r=h.copy(t.applianceManager.setMemberState(e));return t.refreshCursorClass(),r}))},C.prototype.setViewMode=function(e){var t=this;this.stateTrigger.activeUpdate("broadcastState",(function(){return t.applianceManager.setViewState({mode:e}),t.viewStateObserver.getBroadcastState()}))},C.prototype.jumpPpt=function(e,t){var r=e+"/"+t+".slide",n=this.state.sceneState.scenes.findIndex((function(e){return!!e.ppt&&e.ppt.src.endsWith(r)}));0<n&&this.setSceneIndex(n)},C.prototype.setScenePath=function(e){var t=this,r=this.applianceManager;this.stateTrigger.activeUpdate("sceneState",(function(){return r.changeScene(w.scenePathConverter.parse(e)),t.getCurrentSceneState()}))},C.prototype.setSceneIndex=function(e){var t=this,r=this.stateTrigger.state.sceneState.scenes[e];if(!r)throw new Error("index "+e+" is out of range");var n=this.applianceManager,i=n.getCurrentScenePath().slice();i.pop(),i.push(r.name),this.stateTrigger.activeUpdate("sceneState",(function(){return n.changeScene(i),t.getCurrentSceneState()}))},C.prototype.moveCamera=function(e){var t=this;"number"==typeof e.scale?this.stateTrigger.activeUpdate("zoomScale",(function(){return c.prototype.moveCamera.call(t,e),e.scale})):c.prototype.moveCamera.call(this,e)},C.prototype.moveCameraToContain=function(e){var t=this;this.stateTrigger.activeUpdate("zoomScale",(function(){return c.prototype.moveCameraToContain.call(t,e),t.cameraman.screen.camera.scale}))},C.prototype.putScenes=function(e,t,r){for(var n=this,i=[],o=0,a=t;o<a.length;o++){var s=a[o];void 0!==s.name?i.push(s):i.push({name:u().replace(/-/g,""),ppt:s.ppt})}this.stateTrigger.activeUpdate("sceneState",(function(){return n.applianceManager.putScenes(w.scenePathConverter.parse(e),i,r),n.getCurrentSceneState()}))},C.prototype.cleanCurrentScene=function(e){var t=this.state.sceneState,r={name:t.scenes[t.index].name,ppt:e?t.scenes[t.index].ppt:void 0},n=t.scenePath.replace("/"+r.name,"");this.putScenes(n,[r],t.index),this.setScenePath(t.scenePath)},C.prototype.removeScenes=function(e){var t=this;this.stateTrigger.activeUpdate("sceneState",(function(){return t.applianceManager.removeScenes(w.scenePathConverter.parse(e)),t.getCurrentSceneState()}))},C.prototype.moveScene=function(e,t){var r=this;this.stateTrigger.activeUpdate("sceneState",(function(){return r.applianceManager.moveScene(w.scenePathConverter.parse(e),w.scenePathConverter.parse(t)),r.getCurrentSceneState()}))},C.prototype.createWrappedComponents=function(){return c.prototype.createWrappedComponents.call(this).concat([P.createWrappedComponent(P.roomContext,this)])},C.prototype.createPluginOperator=function(){var e=this;return Object.freeze(o({},c.prototype.createPluginOperator.call(this),{insert:function(t){return e.insertPlugin(t)},setProps:function(t,r){return e.setPluginProps(t,r)}}))},C.prototype.insertPlugin=function(e){var t=u().replace(/\-/g,""),r=f.createSrc(e.protocal,e.props||{});return this.applianceManager.insertImage({uuid:t,centerX:e.centerX,centerY:e.centerY,width:e.width,height:e.height}),this.applianceManager.completeImageUpload(t,r),t},C.prototype.setPluginProps=function(e,t){var r=this.findImageShape(e);if(r){var n=f.updateSrcBySetProps(r,t);if(void 0!==n)return this.completeImageUpload(e,n),!0}return!1},C.prototype.insertImage=function(e){this.applianceManager.insertImage(e)},C.prototype.completeImageUpload=function(e,t){this.applianceManager.completeImageUpload(e,t)},C.prototype.pptNextStep=function(){this.pptMoveStep(1)},C.prototype.pptPreviousStep=function(){this.pptMoveStep(-1)},C.prototype.pptMoveStep=function(e){var t,r,n,i,o=this.stateTrigger.state.sceneState,a=o.scenes,s=o.index,c=a[s],u=c.ppt&&c.ppt.src,l=u&&this.dynamicPpt.getPptState(u);if(l){var p=this.dynamicPpt.progressIndex;if(p<0&&(p+=l.progressCount),0<=(p+=e)&&p<l.progressCount)this.setGlobalState(S.copyValue(this.dynamicPpt.globalStateWith(u,((t={})[d.sequenceIndexesKey]=((r={})[d.mainSequenceEventSourceId]=p,r),t))));else if(0<=(y=s+e)&&y<a.length){var h=a[y];if(h.ppt){var f=0<e?0:-1,m=this.dynamicPpt.globalStateWith(h.ppt.src,((n={})[d.sequenceIndexesKey]=((i={})[d.mainSequenceEventSourceId]=f,i),n));this.setGlobalState(S.copyValue(m))}this.setSceneIndex(y)}}else{var y;0<=(y=s+e)&&y<a.length&&this.setSceneIndex(y)}},C.prototype.refreshCursorClass=function(){var e=this.stateTrigger.state.memberState;this.magix.isWritable&&!this._disableDeviceInputs&&e?this.updateCursorClass("cursor-"+e.currentApplianceName):this.updateCursorClass(null)},C.prototype.enableToSendAction=function(){return this.magix.phase===h.MagixPhase.Connected&&this.magix.imagePhase!==h.ImagePhase.Persistence},C.prototype.refreshShouldDisableImageHit=function(){var e=this._disableEraseImage&&this.isEraser;this.screen.context.disalbeImageHit!==e&&(this.screen.context=o({},this.screen.context,{disalbeImageHit:e}))},C);function C(e){var t=c.call(this,{logger:e.loggerContext.createLogger(),screenType:e.screenType,boundless:e.boundless,cameraBound:e.cameraBound,pluginsManager:e.pluginsManager,preloadDynamicPPT:e.preloadDynamicPPT,userFonts:e.userFonts,handToolKey:e.handToolKey,onlyCallbackRemoteStateModify:e.onlyCallbackRemoteStateModify,pptJumper:function(e,r){return t.jumpPpt(e,r)},globalStateUpdater:function(e){return t.setGlobalState(e)},disableOperations:!1,willHideSelfCursor:!0,cursorAdapter:e.cursorAdapter,eventInterrupter:function(e){return t.willInterruptEvent(e)},urlInterrupter:e.urlInterrupter,onTextareaUpdate:function(e){return t.applianceManager.updateTextarea(e)},completeImageUpload:function(e,r){return t.applianceManager.completeImageUpload(e,r)},callbacks:e.callbacks})||this;return t._phase=y.RoomPhase.Connecting,t._isWritable=!1,t.isEraser=!1,t.onRoomStateChanged=function(e){e.globalState&&t.dynamicPpt.setGlobalState(S.copyValue(e.globalState)),e.memberState&&(t.isEraser="eraser"===e.memberState.currentApplianceName,t.refreshShouldDisableImageHit(),t.refreshCursorClass()),t.callbacks.onRoomStateChanged&&t.callbacks.onRoomStateChanged(e)},t.onBoundlessEvent=function(e){switch(e.kind){case p.BoundlessEventKind.MouseDown:case p.BoundlessEventKind.MouseMove:case p.BoundlessEventKind.MouseUp:case p.BoundlessEventKind.MouseLeave:case p.BoundlessEventKind.SortedTouchStart:case p.BoundlessEventKind.SortedTouchMove:case p.BoundlessEventKind.SortedTouchEnd:case p.BoundlessEventKind.SortedTouchCancel:t.hoverEventLimiter.pushBoundlessEvent(e);break;case p.BoundlessEventKind.KeyDown:case p.BoundlessEventKind.KeyUp:t.pushBoundlessKeyEvent(e)}},t.onModified=function(){var e=t.applianceManager.getViewState();e.mode===l.ViewMode.Follower&&t.viewStateObserver.refreshCameraRectangleWithViewState(e),t.refreshRender()},t.onDisconnectWithError=function(e){t.callbacks.onDisconnectWithError?t.callbacks.onDisconnectWithError(e):t.logger.error(e)},t.onSetStateByDynamicPPT=function(e){},t.updateSelfUserId=function(e){void 0===e?(t.setObserverId(h.AdminObserverId),t._isWritable=!1):(t.setObserverId(e),t._isWritable=!0),t.refreshCursorClass(),t.refreshDisableSyncOperations()},t.onCameraTransform=function(e){t._isWritable&&e===p.CameraTransformation.Begin&&t.stateTrigger.state.broadcastState.mode===l.ViewMode.Follower&&t.applianceManager.setViewState({mode:l.ViewMode.Freedom})},t.onCameraUpdated=function(){switch(t.stateTrigger.state.broadcastState.mode){case l.ViewMode.Broadcaster:case l.ViewMode.Freedom:t.syncCameraToRemoteLimiter.invoke()}},t.syncCameraToRemote=function(){if(t._isWritable){var e=t.cameraman.screen,r=e.visionRectangle,n=e.camera.scale*b.basePixelWidth(t.screenType);t.applianceManager.setViewState({originX:r.originX,originY:r.originY,width:r.width,height:r.height,pixelWidth:n})}},t.updateSession=function(e){t.loggerContext.context=o({},t.loggerContext.context,{session:e})},t.onImagePhaseChanged=function(e){e===h.ImagePhase.Persistence&&t.magix.reconnectWithError(new Error("image's phase become Persistence"))},t.onPhaseChanged=function(e){t.logger.info("change room phase to "+e),e===h.MagixPhase.Disconnected&&t.dispose();var r=y.RoomPhase.Connecting;switch(e){case h.MagixPhase.Ready:case h.MagixPhase.Connecting:r=y.RoomPhase.Connecting;break;case h.MagixPhase.Connected:r=y.RoomPhase.Connected;break;case h.MagixPhase.Reconnecting:r=y.RoomPhase.Reconnecting;break;case h.MagixPhase.Disconnecting:r=y.RoomPhase.Disconnecting;break;case h.MagixPhase.Disconnected:r=y.RoomPhase.Disconnected}var n=t._phase!==r;t._phase=r,t.refreshDisableSyncOperations(),t.callbacks.onPhaseChanged&&n&&t.callbacks.onPhaseChanged(r)},t.magix=e.akkoApp.createMagix({logger:t.logger,userPayload:e.userPayload,callbacks:{onImagePhaseChanged:t.onImagePhaseChanged,onPhaseChanged:t.onPhaseChanged,onDisconnectWithError:t.onDisconnectWithError,onKickedWithReason:t.callbacks.onKickedWithReason,onCatchErrorWhenAppendFrame:t.callbacks.onCatchErrorWhenAppendFrame,onSliceChanged:t.callbacks.onSliceChanged,onModified:t.onModified,onSelfUserIdUpdate:t.updateSelfUserId,onSessionChanged:t.updateSession,onEventFire:function(e){return t.dispatchMagixEventWithObject(e)}}}),t.loggerContext=e.loggerContext,t.hoverEventLimiter=new b.HoverEventLimiter({getHitTestIdentifies:function(e){return t.getHitTestIdentifies(e)},pushBoundlessMouseEventKind:function(e,r){return t.pushBoundlessMouseEvent(e,r)}}),t._disableDeviceInputs=e.disableDeviceInputs,t._disableEraseImage=e.disableEraseImage,t.syncCameraToRemoteLimiter=new A.InvokeFrequencyLimiter(v.TransformLimitTimeInterval,t.syncCameraToRemote),t}t.RoomImplement=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(223),i=(o.createBy=function(e){var t=e.deltaX,r=e.deltaY,n=e.scaleX,i=e.scaleY;return(new o).scale(n,i).translate(t,r)},o.prototype.clone=function(){return new o(this._matrix.clone())},Object.defineProperty(o.prototype,"matrix",{get:function(){return this._matrix},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inverse",{get:function(){return new o(n.Matrix.inverseOf3D(this._matrix))},enumerable:!0,configurable:!0}),o.prototype.translate=function(e,t){return this._matrix=n.Matrix.multiply(this._matrix,function(e,t){return n.Matrix3D.create(1,0,e,0,1,t,0,0,1)}(e,t)),this},o.prototype.scale=function(e,t){return this._matrix=n.Matrix.multiply(this._matrix,function(e,t){return n.Matrix3D.create(e,0,0,0,t,0,0,0,1)}(e,t)),this},o.link=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=void 0,i=0,a=e;i<a.length;i++){var s=a[i];r=r?n.Matrix.multiply(r,s._matrix):s._matrix}return new o(r)},o.prototype.transformPoint=function(e,t){var r=n.Matrix.multiply(n.Vector3D.create(e,t,1),this._matrix),i=r.get(0,2);return{x:r.get(0,0)/i,y:r.get(0,1)/i}},Object.defineProperty(o.prototype,"transformationResult",{get:function(){var e=n.Matrix.multiply(n.Vector3D.create(0,0,1),this._matrix),t=n.Matrix.multiply(n.Vector3D.create(1,1,1),this._matrix),r=e.get(0,2),i=t.get(0,2),o=e.get(0,0)/r,a=e.get(0,1)/r;return{deltaX:o,deltaY:a,scaleX:t.get(0,0)/i-o,scaleY:t.get(0,1)/i-a}},enumerable:!0,configurable:!0}),o.prototype.standardize=function(){var e=this.transformationResult,t=e.deltaX,r=e.deltaY,i=e.scaleX,o=e.scaleY;return this._matrix=n.Matrix3D.E(),this.scale(i,o),this.translate(t,r),this},o);function o(e){void 0===e&&(e=n.Matrix3D.E()),this._matrix=e}t.LinearTransformation=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneToPlaneObject=function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Array){for(var r=[],n=0;n<t.length;++n)r[n]=e(t[n]);return r}var i={};for(var o in t)i[o]=e(t[o]);return i},t.commitModify=function(e,t){var r={};for(var n in e)r[n]=n in t?t[n]:e[n];return r},t.copyValue=function e(t){if("object"!=typeof t)return"function"==typeof t?void 0:t;if(null===t)return null;if(t instanceof Array)return t.map((function(t){return e(t)}));var r={};for(var n in t){var i=e(t[n]);void 0!==i&&(r[n]=i)}return r},t.checkValueIsEquals=function e(t,r){if(t===r)return!0;var n=typeof t;if(n!=typeof r||"object"!=n)return!1;if(t instanceof Array&&r instanceof Array){if(t.length!==r.length)return!1;for(var i=0;i<t.length;++i)if(!e(t[i],r[i]))return!1}else if(t.constructor===Object&&r.constructor===Object){for(var o in t)if(!e(t[o],r[o]))return!1;for(var o in r)if(!(o in t))return!1}return!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(112),i=(Object.defineProperty(o.prototype,"bundle",{get:function(){return this._bundle},enumerable:!0,configurable:!0}),o.prototype.setAndCompare=function(e){var t={};for(var r in e){var i=this._bundle[r],o=e[r];this._bundle[r]=o,n.checkValueIsEquals(i,o)||(t[r]={origin:i,target:o})}return t},o);function o(e){this._bundle=Object.assign({},e)}t.DiffBundle=i},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a},s=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}c((n=n.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var u,l=r(19),p=r(5),h=r(0),d=r(109),f=r(224),m=r(222),y=r(69),A=r(111),g=r(112),v=new Date("2019-06-23Z00:00:00").getTime(),b=(i(P,u=d.DisplayerImplement),Object.defineProperty(P.prototype,"applianceManager",{get:function(){return this.reconstructor.trigger},enumerable:!0,configurable:!0}),P.prototype.setupReconstructor=function(e){return s(this,void 0,void 0,(function(){var t,r,n=this;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this._mediaURL=e.mediaURL,t=this,[4,e.akkoApp.createReconstructor({logger:this.logger,slice:e.slice,roomToken:e.roomToken,room:e.room,beginTimestamp:e.beginTimestamp,duration:e.duration,callbacks:this.createReconstructorCallbacks(),thirdPartyReconstructorFactory:this._mediaURL?function(e){return new A.VideoJSPlayer(n._mediaURL,e)}:void 0})];case 1:return t.reconstructor=i.sent(),this._phase=P.covertPhase(this.reconstructor.phase),this.logger.info("setup player success"),this.loggerContext.context=o({},this.loggerContext.context,{uuid:this.reconstructor.roomUUID,slice:this.reconstructor.slice&&this.reconstructor.slice.uuid}),[3,3];case 2:throw r=i.sent(),this.logger.error("setup player fail"),this.logger.error(r),r;case 3:return[2]}}))}))},P.prototype.createReconstructorCallbacks=function(){var e=this;return{onSliceChanged:function(t){return e.onSliceChanged(t)},onEventFire:function(t){return e.dispatchMagixEventWithObject(t)},onPhaseChanged:this.onPhaseChanged,onScheduleTimeChanged:this.callbacks.onScheduleTimeChanged,onStoppedWithError:this.callbacks.onStoppedWithError,onModified:this.onModified,onCatchErrorWhenAppendFrame:this.callbacks.onCatchErrorWhenAppendFrame}},P.prototype.setup=function(){var e=this;u.prototype.setup.call(this);var t=this.applianceManager;this.viewStateObserver=new m.ViewStateObserver({applianceManager:t,screen:this.cameraman.screen}),this.stateTrigger=new A.StateTrigger({disableMaskKey:this.onlyCallbackRemoteStateModify,onStateChanged:this.onPlayerStateChanged,propertyGetters:{observerMode:function(){return e.observerMode},globalState:function(){return h.copy(t.getGlobalState())},roomMembers:function(){return t.getMemberDisplayers().map(e.covertMemberDisplayerToMember)},sceneState:function(){return e.getCurrentSceneState()}}}),this.cameraman.addHandToolActiveListener(this.onHandToolActive),this.cameraman.addCameraTransformationListener(this.onCameraTransform)},P.prototype.dispose=function(){u.prototype.dispose.call(this),this.cameraman.removeCameraTransformationListener(this.onCameraTransform),this.viewStateObserver&&this.viewStateObserver.release(),this.stateTrigger&&this.stateTrigger.release()},P.prototype.createWrappedComponents=function(){return u.prototype.createWrappedComponents.call(this).concat([y.createWrappedComponent(y.playerContext,this)])},P.prototype.refreshForcePPTLandscapeWithSlice=function(e){e.beginTimestamp<=v?this.setForcePPTLandscape(!0):this.setForcePPTLandscape(!1)},P.prototype.onSliceChanged=function(e){this.loggerContext.context=o({},this.loggerContext.context,{slice:e&&e.uuid}),this.refreshForcePPTLandscapeWithSlice(e),this.callbacks.onSliceChanged&&this.callbacks.onSliceChanged(e.uuid)},P.prototype.setObserverMode=function(e){var t=this;this.stateTrigger.activeUpdate("observerMode",(function(){return t.observerMode=e}))},P.prototype.memberState=function(e){return h.copy(this.reconstructor.trigger.getMemberState(e))},Object.defineProperty(P.prototype,"state",{get:function(){if(!this.didLoadFirstFrame)throw new Error("can't read state before load first frame");return this.stateTrigger.state},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"roomUUID",{get:function(){return this.reconstructor.roomUUID},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"slice",{get:function(){return this.reconstructor.slice&&this.reconstructor.slice.uuid},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"phase",{get:function(){return this._phase},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"mediaURL",{get:function(){return this._mediaURL},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"scheduleTime",{get:function(){return this.reconstructor.scheduleTime},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"timeDuration",{get:function(){return this.reconstructor.duration},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"framesCount",{get:function(){return this.reconstructor.framesCount},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"beginTimestamp",{get:function(){return this.reconstructor.beginTimestamp},enumerable:!0,configurable:!0}),P.prototype.play=function(){this.reconstructor.play()},P.prototype.pause=function(){this.reconstructor.pause()},P.prototype.stop=function(){this.reconstructor.stop(),this.dispose()},P.prototype.seekToScheduleTime=function(e){this.reconstructor.seekToScheduleTime(e)},P.covertPhase=function(e){switch(e){case h.ReconstructorPhase.WaitingFirstFrame:return f.PlayerPhase.WaitingFirstFrame;case h.ReconstructorPhase.Playing:return f.PlayerPhase.Playing;case h.ReconstructorPhase.Pause:return f.PlayerPhase.Pause;case h.ReconstructorPhase.Stopped:return f.PlayerPhase.Stopped;case h.ReconstructorPhase.Ended:return f.PlayerPhase.Ended;case h.ReconstructorPhase.Buffering:case h.ReconstructorPhase.Seeking:return f.PlayerPhase.Buffering}},a([l.observable],P.prototype,"observerMode",void 0),P);function P(e){var t=u.call(this,{logger:e.loggerContext.createLogger(),screenType:e.screenType,boundless:e.boundless,cameraBound:e.cameraBound,pluginsManager:e.pluginsManager,preloadDynamicPPT:e.preloadDynamicPPT,userFonts:e.userFonts,handToolKey:e.handToolKey,onlyCallbackRemoteStateModify:e.onlyCallbackRemoteStateModify,disableOperations:!0,willHideSelfCursor:!1,cursorAdapter:e.cursorAdapter,urlInterrupter:e.urlInterrupter,callbacks:e.callbacks})||this;return t.didLoadFirstFrame=!1,t.observerMode=f.ObserverMode.Directory,t.onPhaseChanged=function(e){t.logger.info("change player phase to "+e);var r=!1;t.didLoadFirstFrame||e===h.ReconstructorPhase.WaitingFirstFrame||(t.setup(),r=t.didLoadFirstFrame=!0,t.reconstructor.slice&&t.refreshForcePPTLandscapeWithSlice(t.reconstructor.slice));var n=t._phase;t._phase=P.covertPhase(t.reconstructor.phase),t.dynamicPpt.setGlobalState(h.copy(t.applianceManager.getGlobalState())),t.callbacks.onPhaseChanged&&n!==t._phase&&t.callbacks.onPhaseChanged(t._phase),t.callbacks.onLoadFirstFrame&&r&&t.callbacks.onLoadFirstFrame()},t.onPlayerStateChanged=function(e){e.globalState&&t.dynamicPpt.setGlobalState(g.copyValue(e.globalState)),t.callbacks.onPlayerStateChanged&&t.callbacks.onPlayerStateChanged(e)},t.onCameraTransform=function(e){e===p.CameraTransformation.Begin&&t.observerMode===f.ObserverMode.Directory&&(t.observerMode=f.ObserverMode.Freedom)},t.onModified=function(){var e=t.applianceManager.getViewState();t.observerMode===f.ObserverMode.Directory&&t.viewStateObserver.refreshCameraRectangleWithViewState(e),t.refreshRender()},t.loggerContext=e.loggerContext,t}t.PlayerImplement=b}],h.c=f,h.d=function(e,t,r){h.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},h.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.t=function(e,t){if(1&t&&(e=h(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(h.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)h.d(r,n,function(t){return e[t]}.bind(null,n));return r},h.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return h.d(t,"a",t),t},h.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},h.p="",h(h.s=225);function h(e){if(f[e])return f[e].exports;var t=f[e]={i:e,l:!1,exports:{}};return d[e].call(t.exports,t,t.exports,h),t.l=!0,t.exports}var d,f}(r("q1tI"),r("2vnA"),r("cr+I"),r("aSns"),r("i8i4"),r("okNM"),r("aaBP"),r("acA/"),r("GBY4"),r("xRo1"),r("tK0H"),r("8OJ3"))},gjgJ:function(e,t,r){}}]);