"use strict";(self.webpackChunkwhiteboard_bridge=self.webpackChunkwhiteboard_bridge||[]).push([[83],{19418:function(t,e,n){n.r(e)},17562:function(t,e,n){function r(t){var e="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return i(t,arguments,y(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)},r(t)}function i(t,e,n){return i=m()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i},i.apply(null,arguments)}function o(t){return function(t){if(Array.isArray(t))return M(t)}(t)||a(t)||S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){s(o,r,i,a,u,"next",t)}function u(t){s(o,r,i,a,u,"throw",t)}a(void 0)}))}}function l(t,e){return h(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||S(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t){if(Array.isArray(t))return t}function d(t,e,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},d(t,e,n||t)}function A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function p(t){var e=m();return function(){var n,r=y(t);if(e){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),t}function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=S(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){throw t})),f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){a=!0,i=t})),f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function S(t,e){if(t){if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var C=Object.defineProperty,I=Object.defineProperties,N=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,D=function(t,e,n){return e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},L=function(t,e){for(var n in e||(e={}))k.call(e,n)&&D(t,n,e[n]);if(B){var r,i=E(B(e));try{for(i.s();!(r=i.n()).done;){n=r.value;P.call(e,n)&&D(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t};Object.defineProperties(e,T({__esModule:{value:!0}},Symbol.toStringTag,{value:"Module"}));var O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},R=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e||4&e&&"object"==_(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=225)}([function(t,e,n){
/*!
* @pixi/constants - v6.4.2
* Compiled Thu, 02 Jun 2022 15:39:26 UTC
*
* @pixi/constants is licensed under the MIT License.
* http://www.opensource.org/licenses/mit-license
*/
var r,i,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y,b,w,x;n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return w})),n.d(e,"e",(function(){return g})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return r})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return y})),n.d(e,"k",(function(){return f})),n.d(e,"l",(function(){return b})),n.d(e,"m",(function(){return m})),n.d(e,"n",(function(){return i})),n.d(e,"o",(function(){return h})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return l})),n.d(e,"r",(function(){return c})),n.d(e,"s",(function(){return A})),(x=r||(r={}))[x.WEBGL_LEGACY=0]="WEBGL_LEGACY",x[x.WEBGL=1]="WEBGL",x[x.WEBGL2=2]="WEBGL2",function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(i||(i={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(o||(o={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(a||(a={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(s||(s={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(u||(u={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(c||(c={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(h||(h={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(d||(d={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(A||(A={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(p||(p={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(m||(m={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(b||(b={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(w||(w={}))},function(t,e,n){n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return A})),n.d(e,"i",(function(){return a})),n.d(e,"j",(function(){return c})),n.d(e,"k",(function(){return f})),n.d(e,"l",(function(){return r})),n.d(e,"m",(function(){return E})),n.d(e,"n",(function(){return T}));
/*!
 * @pixi/math - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var r,i,o=2*Math.PI,a=180/Math.PI,s=Math.PI/180;(i=r||(r={}))[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC";var u=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),l=[new u,new u,new u,new u],c=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(i),this.type=r.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.intersects=function(t,e){if(!e){var n=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=n)return!1;var r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}var i=this.left,o=this.right,a=this.top,s=this.bottom;if(o<=i||s<=a)return!1;var u=l[0].set(t.left,t.top),c=l[1].set(t.left,t.bottom),h=l[2].set(t.right,t.top),d=l[3].set(t.right,t.bottom);if(h.x<=u.x||c.y<=u.y)return!1;var A=Math.sign(e.a*e.d-e.b*e.c);if(0===A||(e.apply(u,u),e.apply(c,c),e.apply(h,h),e.apply(d,d),Math.max(u.x,c.x,h.x,d.x)<=i||Math.min(u.x,c.x,h.x,d.x)>=o||Math.max(u.y,c.y,h.y,d.y)<=a||Math.min(u.y,c.y,h.y,d.y)>=s))return!1;var f=A*(c.y-u.y),p=A*(u.x-c.x),g=f*i+p*a,v=f*o+p*a,m=f*i+p*s,y=f*o+p*s;if(Math.max(g,v,m,y)<=f*u.x+p*u.y||Math.min(g,v,m,y)>=f*d.x+p*d.y)return!1;var b=A*(u.y-h.y),w=A*(h.x-u.x),x=b*i+w*a,_=b*o+w*a,T=b*i+w*s,E=b*o+w*s;return!(Math.max(x,_,T,E)<=b*u.x+w*u.y||Math.min(x,_,T,E)>=b*d.x+w*d.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(i-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=r,this.height=i-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),h=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.radius=n,this.type=r.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-t,i=this.y-e;return(r*=r)+(i*=i)<=n},t.prototype.getBounds=function(){return new c(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),d=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.width=n,this.height=i,this.type=r.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return(n*=n)+(r*=r)<=1},t.prototype.getBounds=function(){return new c(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),A=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var o=[],a=0,s=i.length;a<s;a++)o.push(i[a].x,i[a].y);i=o}this.points=i,this.type=r.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1];s>e!=l>e&&t<(e-s)/(l-s)*(u-a)+a&&(n=!n)}return n},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),f=function(){function t(t,e,n,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=20),this.x=t,this.y=e,this.width=n,this.height=i,this.radius=o,this.type=r.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+n&&e<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;var r=t-(this.x+n),i=e-(this.y+n),o=n*n;if(r*r+i*i<=o||(r=t-(this.x+this.width-n))*r+i*i<=o||r*r+(i=e-(this.y+this.height-n))*i<=o||(r=t-(this.x+n))*r+i*i<=o)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),p=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),g=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new u;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new u;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,a=t.pivot,s=-Math.atan2(-r,i),u=Math.atan2(n,e),l=Math.abs(s+u);return l<1e-5||Math.abs(o-l)<1e-5?(t.rotation=u,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=u),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx+(a.x*e+a.y*r),t.position.y=this.ty+(a.x*n+a.y*i),t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),v=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],m=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],y=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],b=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],w=[],x=[],_=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];w.push(e);for(var n=0;n<16;n++)for(var r=_(v[t]*v[n]+y[t]*m[n]),i=_(m[t]*v[n]+b[t]*m[n]),o=_(v[t]*y[n]+y[t]*b[n]),a=_(m[t]*y[n]+b[t]*b[n]),s=0;s<16;s++)if(v[s]===r&&m[s]===i&&y[s]===o&&b[s]===a){e.push(s);break}}for(t=0;t<16;t++){var u=new g;u.set(v[t],m[t],y[t],b[t],0,0),x.push(u)}}();var T={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return v[t]},uY:function(t){return m[t]},vX:function(t){return y[t]},vY:function(t){return b[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return w[t][e]},sub:function(t,e){return w[t][T.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?T.S:T.N:2*Math.abs(e)<=Math.abs(t)?t>0?T.E:T.W:e>0?t>0?T.SE:T.SW:t>0?T.NE:T.NW},matrixAppendRotationInv:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=x[T.inv(e)];i.tx=n,i.ty=r,t.append(i)}},E=function(){function t(){this.worldTransform=new g,this.localTransform=new g,this.position=new p(this.onChange,this,0,0),this.scale=new p(this.onChange,this,1,1),this.pivot=new p(this.onChange,this,0,0),this.skew=new p(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},function(t,e,n){n.d(e,"a",(function(){return re})),n.d(e,"b",(function(){return I})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return ce})),n.d(e,"e",(function(){return pe})),n.d(e,"f",(function(){return me})),n.d(e,"g",(function(){return he})),n.d(e,"h",(function(){return F})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return w})),n.d(e,"k",(function(){return kt})),n.d(e,"l",(function(){return Q})),n.d(e,"m",(function(){return J})),n.d(e,"n",(function(){return It})),n.d(e,"o",(function(){return V})),n.d(e,"p",(function(){return D})),n.d(e,"q",(function(){return ae})),n.d(e,"r",(function(){return Nt})),n.d(e,"s",(function(){return Bt})),n.d(e,"t",(function(){return P})),n.d(e,"u",(function(){return Dt})),n.d(e,"v",(function(){return Y})),n.d(e,"w",(function(){return E})),n.d(e,"x",(function(){return de})),n.d(e,"y",(function(){return se})),n.d(e,"z",(function(){return le})),n.d(e,"A",(function(){return ue}));var r=n(4),i=n(0),o=n(3),a=n(12),s=n(7),u=n(1);
/*!
 * @pixi/core - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */r.b.PREFER_ENV=o.isMobile.any?i.g.WEBGL:i.g.WEBGL2,r.b.STRICT_TEXTURE_CACHE=!1;var l=[];function c(t,e){if(!t)return null;var n="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(var i=l.length-1;i>=0;--i){var o=l[i];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function d(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var A=function(){return(A=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},f=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new a.a("setRealSize"),this.onUpdate=new a.a("update"),this.onError=new a.a("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),p=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,a)||this).data=e,r}return d(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(f),g={scaleMode:i.p.NEAREST,format:i.h.RGBA,alphaMode:i.a.NPM},v=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var a=t.call(this)||this,s=(n=n||{}).alphaMode,u=n.mipmap,l=n.anisotropicLevel,h=n.scaleMode,d=n.width,A=n.height,p=n.wrapMode,g=n.format,v=n.type,m=n.target,y=n.resolution,b=n.resourceOptions;return!e||e instanceof f||((e=c(e,b)).internal=!0),a.resolution=y||r.b.RESOLUTION,a.width=Math.round((d||0)*a.resolution)/a.resolution,a.height=Math.round((A||0)*a.resolution)/a.resolution,a._mipmap=void 0!==u?u:r.b.MIPMAP_TEXTURES,a.anisotropicLevel=void 0!==l?l:r.b.ANISOTROPIC_LEVEL,a._wrapMode=p||r.b.WRAP_MODE,a._scaleMode=void 0!==h?h:r.b.SCALE_MODE,a.format=g||i.h.RGBA,a.type=v||i.r.UNSIGNED_BYTE,a.target=m||i.q.TEXTURE_2D,a.alphaMode=void 0!==s?s:i.a.UNPACK,a.uid=Object(o.uid)(),a.touched=0,a.isPowerOfTwo=!1,a._refreshPOT(),a._glTextures={},a.dirtyId=0,a.dirtyStyleId=0,a.cacheId=null,a.valid=d>0&&A>0,a.textureCacheIds=[],a.destroyed=!1,a.resource=null,a._batchEnabled=0,a._batchLocation=0,a.parentTextureArray=null,a.setResource(e),a}return d(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(o.isPow2)(this.realWidth)&&Object(o.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete o.BaseTextureCache[this.cacheId],delete o.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,i){void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var a="string"==typeof t,s=null;if(a)s=t;else{if(!t._pixiId){var u=n&&n.pixiIdPrefix||"pixiid";t._pixiId=u+"_"+Object(o.uid)()}s=t._pixiId}var l=o.BaseTextureCache[s];if(a&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return l||((l=new e(t,n)).cacheId=s,e.addToCache(l,s)),l},e.fromBuffer=function(t,n,r,o){t=t||new Float32Array(n*r*4);var a=new p(t,{width:n,height:r}),s=t instanceof Float32Array?i.r.FLOAT:i.r.UNSIGNED_BYTE;return new e(a,Object.assign(g,o||{width:n,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),o.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.BaseTextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete o.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete o.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(o.EventEmitter),m=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;(r=t.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<e;s++){var u=new v;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return d(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof f?this.addResourceAt(t[n],n):this.addResourceAt(c(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],n=e.realWidth,r=e.realHeight;return t.resize(n,r),Promise.resolve(t)})),this._load},e}(f),y=function(t){function e(e,n){var r,i,o=this,a=n||{},s=a.width,u=a.height;return Array.isArray(e)?(r=e,i=e.length):i=e,o=t.call(this,i,{width:s,height:u})||this,r&&o.initFromArray(r,n),o}return d(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var r=this.length,i=this.itemDirtyIds,o=this.items,a=t.gl;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,e.format,n.type,null);for(var s=0;s<r;s++){var u=o[s];i[s]<u.dirtyId&&(i[s]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,s,u.resource.width,u.resource.height,1,e.format,n.type,u.resource.source))}return!0},e}(m),b=function(t){function e(e){var n=this,r=e,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=t.call(this,i,o)||this).source=e,n.noSubImage=!1,n}return d(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=Object(o.determineCrossOrigin)(e):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,r){var o=t.gl,a=e.realWidth,s=e.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||n.width!==a||n.height!==s?(n.width=a,n.height=s,o.texImage2D(e.target,0,n.internalFormat,e.format,n.type,r)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,n.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(f),w=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(b),x=function(t){function e(n,r){var o=this,a=r||{},s=a.width,u=a.height,l=a.autoLoad,c=a.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");o=t.call(this,6,{width:s,height:u})||this;for(var h=0;h<e.SIDES;h++)o.items[h].target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+h;return o.linkBaseTexture=!1!==c,n&&o.initFromArray(n,r),!1!==l&&o.load(),o}return d(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,r){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,r),i[o]=a.dirtyId):i[o]<-1&&(t.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(m),_=function(t){function e(e,n){var i=this;if(n=n||{},!(e instanceof HTMLImageElement)){var o=new Image;b.crossOrigin(o,e,n.crossorigin),o.src=e,e=o}return i=t.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==n.createBitmap?n.createBitmap:r.b.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,i.bitmap=null,i._load=null,!1!==n.autoLoad&&i.load(),i}return d(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,n){var r=e.source;e.url=r.src;var i=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return n(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===i.a.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(b),T=function(t){function e(e,n){var r=this;return n=n||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return d(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;b.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*t.scale,a=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/r*n,a=t._overrideHeight||t._overrideWidth/n*r),i=Math.round(i),a=Math.round(a);var s=t.source;s.width=i,s.height=a,s._pixiId="canvas_"+Object(o.uid)(),s.getContext("2d").drawImage(e,0,0,n,r,0,0,i,a),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return"svg"===n||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(b),E=function(t){function e(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var a=n[0].src||n[0];b.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),l=n[s],c=l.src,h=l.mime,d=(c=c||n[s]).split("?").shift().toLowerCase(),A=d.slice(d.lastIndexOf(".")+1);h=h||e.MIME_TYPES[A]||"video/"+A,u.src=c,u.type=h,o.appendChild(u)}n=o}return(i=t.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return d(e,t),e.prototype.update=function(e){if(!this.destroyed){var n=s.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){t.valid?n(t):(t._resolve=n,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(s.a.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(s.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(b),S=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&t instanceof ImageBitmap},e}(b);l.push(_,S,w,E,T,p,x,y);var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e}(p),C=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new a.a("disposeFramebuffer"),this.multisample=i.l.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new v(null,{scaleMode:i.p.NEAREST,resolution:1,mipmap:i.k.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new v(new M(null,{width:this.width,height:this.height}),{scaleMode:i.p.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:i.k.OFF,format:i.h.DEPTH_COMPONENT,type:i.r.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(t/i,e/i)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(t/i,e/i))}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),I=function(t){function e(e){void 0===e&&(e={});var n=this;if("number"==typeof e){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e={width:r,height:o,scaleMode:a,resolution:s}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:i.l.NONE,(n=t.call(this,null,e)||this).mipmap=i.k.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new C(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=e.multisample,n.maskStack=[],n.filterStack=[{}],n}return d(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(v),N=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var o=t.width/2/r,a=t.height/2/i,s=t.x/r+o,l=t.y/i+a;n=u.n.add(n,u.n.NW),this.x0=s+o*u.n.uX(n),this.y0=l+a*u.n.uY(n),n=u.n.add(n,2),this.x1=s+o*u.n.uX(n),this.y1=l+a*u.n.uY(n),n=u.n.add(n,2),this.x2=s+o*u.n.uX(n),this.y2=l+a*u.n.uY(n),n=u.n.add(n,2),this.x3=s+o*u.n.uX(n),this.y3=l+a*u.n.uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),B=new N;function k(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var P=function(t){function e(n,r,i,o,a,s){var l=t.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new u.j(0,0,1,1)),n instanceof e&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=o,l.valid=!1,l._uvs=B,l.uvMatrix=null,l.orig=i||r,l._rotate=Number(a||0),!0===a)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=s?new u.g(s.x,s.y):new u.g(0,0),l._updateID=0,l.textureCacheIds=[],n.valid?l.noFrame?n.valid&&l.onBaseTextureUpdated(n):l.frame=r:n.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&n.on("update",l.onBaseTextureUpdated,l),l}return d(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&o.TextureCache[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===B&&(this._uvs=new N),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var a="string"==typeof t,s=null;if(a)s=t;else if(t instanceof v){if(!t.cacheId){var u=n&&n.pixiIdPrefix||"pixiid";t.cacheId=u+"-"+Object(o.uid)(),v.addToCache(t,t.cacheId)}s=t.cacheId}else t._pixiId||(u=n&&n.pixiIdPrefix||"pixiid",t._pixiId=u+"_"+Object(o.uid)()),s=t._pixiId;var l=o.TextureCache[s];if(a&&i&&!l)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return l||t instanceof v?!l&&t instanceof v&&(l=new e(t),e.addToCache(l,s)):(n.resolution||(n.resolution=Object(o.getResolutionOfUrl)(t)),(l=new e(new v(t,n))).baseTexture.cacheId=s,v.addToCache(l.baseTexture,s),e.addToCache(l,s)),l},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=e.from(t,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},e.fromBuffer=function(t,n,r,i){return new e(v.fromBuffer(t,n,r,i))},e.fromLoader=function(t,n,i,a){var s=new v(t,Object.assign({scaleMode:r.b.SCALE_MODE,resolution:Object(o.getResolutionOfUrl)(n)},a)),u=s.resource;u instanceof _&&(u.url=n);var l=new e(s);return i||(i=n),v.addToCache(l.baseTexture,i),e.addToCache(l,i),i!==n&&(v.addToCache(l.baseTexture,n),e.addToCache(l,n)),l.baseTexture.valid?Promise.resolve(l):new Promise((function(t){l.baseTexture.once("loaded",(function(){return t(l)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),o.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.TextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete o.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)o.TextureCache[t.textureCacheIds[r]]===t&&delete o.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+l)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new v),k(e._EMPTY),k(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=16,t.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),e._WHITE=new e(new v(new w(t))),k(e._WHITE),k(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(o.EventEmitter),D=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return d(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"==typeof t&&(Object(o.deprecation)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new I(t))},e}(P),L=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,n){void 0===n&&(n=i.l.NONE);var r=new I(Object.assign({width:t,height:e,resolution:1,multisample:n},this.textureOptions));return new D(r)},t.prototype.getOptimalTexture=function(t,e,n,r){var a;void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),t=Math.ceil(t*n-1e-6),e=Math.ceil(e*n-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?a=r>1?-r:-1:(a=((65535&(t=Object(o.nextPow2)(t)))<<16|65535&(e=Object(o.nextPow2)(e)))>>>0,r>1&&(a+=4294967296*r)),this.texturePool[a]||(this.texturePool[a]=[]);var s=this.texturePool[a].pop();return s||(s=this.createTexture(t,e,r)),s.filterPoolKey=a,s.setResolution(n),s},t.prototype.getFilterTexture=function(t,e,n){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),O=function(){function t(t,e,n,r,o,a,s){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=i.r.FLOAT),this.buffer=t,this.size=e,this.normalized=n,this.type=r,this.stride=o,this.start=a,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,r,i,o){return new t(e,n,r,i,o)},t}(),R=0,F=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=R++,this.disposeRunner=new a.a("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===i.d.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?i.d.ELEMENT_ARRAY_BUFFER:i.d.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),U={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},j={5126:4,5123:2,5121:1},z=0,H={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Q=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=z++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new a.a("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,r,i,o,a,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof F||(e instanceof Array&&(e=new Float32Array(e)),e=new F(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,n,r,i);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new O(c,n,r,i,o,a,s),this.instanced=this.instanced||s,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof F||(t instanceof Array&&(t=new Uint16Array(t)),t=new F(t)),t.type=i.d.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],r=new F;for(t in this.attributes){var i=this.attributes[t],a=this.buffers[i.buffer];e.push(a.data),n.push(i.size*j[i.type]/4),i.buffer=0}for(r.data=function(t,e){for(var n=0,r=0,i={},a=0;a<t.length;a++)r+=e[a],n+=t[a].length;var s=new ArrayBuffer(4*n),u=null,l=0;for(a=0;a<t.length;a++){var c=e[a],h=t[a],d=Object(o.getBufferType)(h);i[d]||(i[d]=new U[d](s)),u=i[d];for(var A=0;A<h.length;A++)u[(A/c|0)*r+l+A%c]=h[A];l+=c}return new Float32Array(s)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new F(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];e.attributes[n]=new O(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var n,r=new t,a=[],s=[],u=[],l=0;l<e.length;l++){n=e[l];for(var c=0;c<n.buffers.length;c++)s[c]=s[c]||0,s[c]+=n.buffers[c].data.length,u[c]=0}for(l=0;l<n.buffers.length;l++)a[l]=new(H[Object(o.getBufferType)(n.buffers[l].data)])(s[l]),r.buffers[l]=new F(a[l]);for(l=0;l<e.length;l++)for(n=e[l],c=0;c<n.buffers.length;c++)a[c].set(n.buffers[c].data,u[c]),u[c]+=n.buffers[c].data.length;if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER;var h=0,d=0,A=0,f=0;for(l=0;l<n.buffers.length;l++)if(n.buffers[l]!==n.indexBuffer){f=l;break}for(var l in n.attributes){var p=n.attributes[l];(0|p.buffer)===f&&(d+=p.size*j[p.type]/4)}for(l=0;l<e.length;l++){var g=e[l].indexBuffer.data;for(c=0;c<g.length;c++)r.indexBuffer.data[c+A]+=h;h+=e[l].buffers[f].data.length/d,A+=g.length}}return r},t}(),G=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return d(e,t),e}(Q),V=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new F(e.vertices),e.uvBuffer=new F(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return d(e,t),e.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Q),W=0,Y=function(){function t(t,e,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=W++,this.static=!!e,this.ubo=!!n,t instanceof F?(this.buffer=t,this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new F(new Float32Array(1)),this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(n,r)},t.from=function(e,n,r){return new t(e,n,r)},t.uboFrom=function(e,n){return new t(e,null==n||n,!0)},t}(),X=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=i.l.NONE,this.sourceFrame=new u.j,this.destinationFrame=new u.j,this.bindingSourceFrame=new u.j,this.bindingDestinationFrame=new u.j,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),q=[new u.g,new u.g,new u.g,new u.g],K=new u.d,Z=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new L,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new G,this.quadUv=new V,this.tempRect=new u.j,this.activeState={},this.globalUniforms=new Y({outputFrame:new u.j,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var n,r,i=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new X,s=this.renderer.renderTexture,u=e[0].resolution,l=e[0].multisample,c=e[0].padding,h=e[0].autoFit,d=null===(n=e[0].legacy)||void 0===n||n,A=1;A<e.length;A++){var f=e[A];u=Math.min(u,f.resolution),l=Math.min(l,f.multisample),c=this.useMaxPadding?Math.max(c,f.padding):c+f.padding,h=h&&f.autoFit,d=d||null===(r=f.legacy)||void 0===r||r}1===o.length&&(this.defaultFilterStack[0].renderTexture=s.current),o.push(a),a.resolution=u,a.multisample=l,a.legacy=d,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(c);var p=this.tempRect.copyFrom(s.sourceFrame);i.projection.transform&&this.transformAABB(K.copyFrom(i.projection.transform).invert(),p),h?(a.sourceFrame.fit(p),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(p)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,u,l),a.filters=e,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=a.sourceFrame.width,g.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(s.sourceFrame),a.bindingDestinationFrame.copyFrom(s.destinationFrame),a.transform=i.projection.transform,i.projection.transform=null,s.bind(a.renderTexture,a.sourceFrame,g),i.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var o=r.inputSize,a=r.inputPixel,s=r.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*e.resolution),a[1]=Math.round(o[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=e.sourceFrame.width*o[2]-.5*a[2],s[3]=e.sourceFrame.height*o[3]-.5*a[3],e.legacy){var u=r.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,l.renderTexture,i.e.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var c=e.renderTexture,h=this.getOptimalFilterTexture(c.width,c.height,e.resolution);h.filterFrame=c.filterFrame;var d=0;for(d=0;d<n.length-1;++d){1===d&&e.multisample>1&&((h=this.getOptimalFilterTexture(c.width,c.height,e.resolution)).filterFrame=c.filterFrame),n[d].apply(this,c,h,i.e.CLEAR,e);var A=c;c=h,h=A}n[d].apply(this,c,l.renderTexture,i.e.BLEND,e),d>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=i.e.CLEAR);var n=this.renderer,r=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,r.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=1&o.stateId||this.forceClear;(e===i.e.CLEAR||e===i.e.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,n,r){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(i.f.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(i.f.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=e._texture.orig,a=t.set(i.width,0,0,i.height,r.x,r.y),s=e.worldTransform.copyTo(u.d.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(e.anchor.x,e.anchor.y),a},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,n,r){return void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),this.texturePool.getOptimalTexture(t,e,n,r)},t.prototype.getFilterTexture=function(t,e,n){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return o.filterFrame=t.filterFrame,o},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var n=q[0],r=q[1],i=q[2],o=q[3];n.set(e.left,e.top),r.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(n,n),t.apply(r,r),t.apply(i,i),t.apply(o,o);var a=Math.min(n.x,r.x,i.x,o.x),s=Math.min(n.y,r.y,i.y,o.y),u=Math.max(n.x,r.x,i.x,o.x),l=Math.max(n.y,r.y,i.y,o.y);e.x=a,e.y=s,e.width=u-a,e.height=l-s},t.prototype.roundFrame=function(t,e,n,r,i){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(i){var o=i.a,a=i.b,s=i.c,u=i.d;if((Math.abs(a)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(i=i?K.copyFrom(i):K.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}},t}(),J=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),$=function(){function t(t){this.renderer=t,this.emptyRenderer=new J(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,n,r){for(var i=t.elements,o=t.ids,a=t.count,s=0,u=0;u<a;u++){var l=i[u],c=l._batchLocation;if(c>=0&&c<r&&e[c]===l)o[u]=c;else for(;s<r;){var h=e[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[u]=s,l._batchLocation=s,e[s]=l;break}s++}}},t.prototype.destroy=function(){this.renderer=null},t}(),tt=0,et=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=tt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=tt++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var n;if(r.b.PREFER_ENV>=i.g.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),nt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=i.l.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},rt=new u.j,it=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new C(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new u.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,n){void 0===n&&(n=0);var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=n),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var s=e.width>>n,u=e.height>>n,l=s/e.width;this.setViewport(e.x*l,e.y*l,s,u)}else s=t.width>>n,u=t.height>>n,this.setViewport(0,0,s,u)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,n,r){var i=this.viewport;t=Math.round(t),e=Math.round(e),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=n,i.height=r,this.gl.viewport(t,e,n,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,n,r,o){void 0===o&&(o=i.c.COLOR|i.c.DEPTH);var a=this.gl;a.clearColor(t,e,n,r),a.clear(o)},t.prototype.initFramebuffer=function(t){var e=this.gl,n=new nt(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height)),n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),n.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,i=r.length;e.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var a=r[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var n=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],s=0;s<o;s++){var u=i[s],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),0===s&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,u.target,l._glTextures[this.CONTEXT_UID].texture,e),a.push(n.COLOR_ATTACHMENT0+s))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){var c=t.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,n=i.l.NONE;if(t<=1||null===e)return n;for(var r=0;r<e.length;r++)if(e[r]<=t){n=e[r];break}return 1===n&&(n=i.l.NONE),n},t.prototype.blit=function(t,e,n){var r=this.current,i=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2===i.context.webGLVersion&&r){var s=r.glFramebuffers[a];if(s){if(!t){if(!s.msaaBuffer)return;var u=r.colorTextures[0];if(!u)return;s.blitFramebuffer||(s.blitFramebuffer=new C(r.width,r.height),s.blitFramebuffer.addColorTexture(0,u)),(t=s.blitFramebuffer).colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=rt).width=r.width,e.height=r.height),n||(n=e);var l=e.width===n.width&&e.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var n=t.width,r=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new u.j},t.prototype.destroy=function(){this.renderer=null},t}(),ot={5126:4,5123:2,5121:1},at=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,r,i){return o.drawElementsInstancedANGLE(t,e,n,r,i)},t.drawArraysInstanced=function(t,e,n,r){return o.drawArraysInstancedANGLE(t,e,n,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,n=0;n<t.buffers.length;n++){var r=t.buffers[n];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var n=t.attributes,r=e.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(t,e){var n=t.attributes,r=e.attributeData,i=["g",t.id];for(var o in n)r[o]&&i.push(o,r[o].location);return i.join("-")},t.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);var s=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[s];if(l)return u[a.id]=l,l;var c=t.buffers,h=t.attributes,d={},A={};for(var f in c)d[f]=0,A[f]=0;for(var f in h)!h[f].size&&a.attributeData[f]?h[f].size=a.attributeData[f].size:h[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[h[f].buffer]+=h[f].size*ot[h[f].type];for(var f in h){var p=h[f],g=p.size;void 0===p.stride&&(d[p.buffer]===g*ot[p.type]?p.stride=0:p.stride=d[p.buffer]),void 0===p.start&&(p.start=A[p.buffer],A[p.buffer]+=g*ot[p.type])}l=r.createVertexArray(),r.bindVertexArray(l);for(var v=0;v<c.length;v++){var m=c[v];o.bind(m),n&&m._glBuffers[i].refCount++}return this.activateVao(t,a),this._activeVao=l,u[a.id]=l,u[s]=l,l},t.prototype.disposeGeometry=function(t,e){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=t.buffers,a=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(t.disposeRunner.remove(this),r){if(a)for(var s=0;s<o.length;s++){var u=o[s]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||e||a.dispose(o[s],e))}if(!e)for(var l in r)if("g"===l[0]){var c=r[l];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t)},t.prototype.activateVao=function(t,e){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);var s=null;for(var u in a){var l=a[u],c=o[l.buffer],h=c._glBuffers[r];if(e.attributeData[u]){s!==h&&(i.bind(c),s=h);var d=e.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,l.size,l.type||n.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,1)}}}},t.prototype.draw=function(t,e,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(t,e||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,n,e||o.getSize(),r||1):i.drawArrays(t,n,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),st=function(){function t(t){void 0===t&&(t=null),this.type=i.j.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.b.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=i.j.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ut(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function lt(t,e){var n=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),i=r.split("\n"),o={},a=i.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t]||(o[t]=!0,0))})),s=[""];a.forEach((function(t){n[t-1]="%c"+n[t-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=n.join("\n");s[0]=u,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function ct(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function ht(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ct(2*e);case"bvec3":return ct(3*e);case"bvec4":return ct(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var dt,At={},ft=At;function pt(t,e,n){if("precision"!==t.substring(0,9)){var r=e;return e===i.m.HIGH&&n!==i.m.HIGH&&(r=i.m.MEDIUM),"precision "+r+" float;\n"+t}return n!==i.m.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var gt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function vt(t){return gt[t]}var mt=null,yt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function bt(t,e){if(!mt){var n=Object.keys(yt);mt={};for(var r=0;r<n.length;++r){var i=n[r];mt[t[i]]=yt[i]}}return mt[e]}var wt,xt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],_t={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Tt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Et=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function St(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}var Mt=0,Ct={},It=function(){function t(e,n,o){void 0===o&&(o="pixi-shader"),this.id=Mt++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),Ct[o]?(Ct[o]++,o+="-"+Ct[o]):Ct[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=pt(this.vertexSrc,r.b.PRECISION_VERTEX,i.m.HIGH),this.fragmentSrc=pt(this.fragmentSrc,r.b.PRECISION_FRAGMENT,function(){if(!dt){dt=i.m.MEDIUM;var t=function(){if(ft===At||ft&&ft.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.b.PREFER_ENV>=i.g.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),ft=e}return ft}();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);dt=e.precision?i.m.HIGH:i.m.MEDIUM}}return dt}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,r){var i=e+n,a=o.ProgramCache[i];return a||(o.ProgramCache[i]=a=new t(e,n,r)),a},t}(),Nt=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof Y?e:new Y(e):new Y({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var r=e.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,r){return new t(It.from(e,n),r)},t}(),Bt=function(){function t(){this.data=0,this.blendMode=i.b.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==i.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),kt=function(t){function e(n,i,o){var a=this,s=It.from(n||e.defaultVertexSrc,i||e.defaultFragmentSrc);return(a=t.call(this,s,o)||this).padding=0,a.resolution=r.b.FILTER_RESOLUTION,a.multisample=r.b.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Bt,a}return d(e,t),e.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Nt),Pt=new u.d,Dt=function(){function t(t,e){this._texture=t,this.mapCoord=new u.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(Pt.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Pt));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+s+u)/o.width,a[1]=(e._frame.y+s+u)/o.height,a[2]=(e._frame.x+e._frame.width-s+u)/o.width,a[3]=(e._frame.y+e._frame.height-s+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Lt=function(t){function e(e,n,r){var i=this,o=null;return"string"!=typeof e&&void 0===n&&void 0===r&&(o=e,e=void 0,n=void 0,r=void 0),(i=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,i.maskMatrix=new u.d,i}return d(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,n,r){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Dt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,r))},e}(kt),Ot=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var r=this.maskDataPool.pop()||new st;r.pooled=!0,r.maskObject=e,n=r}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n.autoDetect&&this.detect(n),n._target=t,n.type!==i.j.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case i.j.SCISSOR:this.renderer.scissor.push(n);break;case i.j.STENCIL:this.renderer.stencil.push(n);break;case i.j.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===i.j.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case i.j.SCISSOR:this.renderer.scissor.pop();break;case i.j.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case i.j.SPRITE:this.popSpriteMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===i.j.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(t){t.maskObject.isSprite?t.type=i.j.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=i.j.SCISSOR:t.type=i.j.STENCIL},t.prototype.pushSpriteMask=function(t){var e,n,r=t.maskObject,i=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Lt]);var a,s,u=this.renderer,l=u.renderTexture;if(l.current){var c=l.current;a=t.resolution||c.resolution,s=null!==(e=t.multisample)&&void 0!==e?e:c.multisample}else a=t.resolution||u.resolution,s=null!==(n=t.multisample)&&void 0!==n?n:u.multisample;o[0].resolution=a,o[0].multisample=s,o[0].maskSprite=r;var h=i.filterArea;i.filterArea=r.getBounds(!0),u.filter.push(i,o),i.filterArea=h,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Rt=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==n&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Ft=new u.d,Ut=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var e=t._scissorRect,n=t.maskObject,r=this.renderer,i=r.renderTexture;n.renderable=!0;var o=n.getBounds();this.roundFrameToPixels(o,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),n.renderable=!1,e&&o.fit(e),t._scissorRectLocal=o}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,n=t.b,r=t.c,i=t.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)},e.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect()||e.isMatrixRotated(n.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,n,r,i,o){e.isMatrixRotated(o)||((o=o?Ft.copyFrom(o):Ft.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Rt),jt=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Rt),zt=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new u.d,this.transform=null}return t.prototype.update=function(t,e,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),Ht=new u.j,Qt=new u.j,Gt=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new u.j,this.destinationFrame=new u.j,this.viewportFrame=new u.j}return t.prototype.bind=function(t,e,n){void 0===t&&(t=null);var r,i,o,a=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(Ht.width=t.frame.width,Ht.height=t.frame.height,e=Ht),n||(Qt.x=t.frame.x,Qt.y=t.frame.y,Qt.width=e.width,Qt.height=e.height,n=Qt),i=r.framebuffer):(o=a.resolution,e||(Ht.width=a.screen.width,Ht.height=a.screen.height,e=Ht),n||((n=Ht).width=e.width,n.height=e.height));var s=this.viewportFrame;s.x=n.x*o,s.y=n.y*o,s.width=n.width*o,s.height=n.height*o,t||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(i,s),this.renderer.projection.update(n,e,o,!i),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var o=this.viewportFrame,a=o.x,s=o.y,u=o.width,l=o.height;a=Math.round(a),s=Math.round(s),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,s,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function Vt(t,e,n,r,i){n.buffer.update(i)}var Wt={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Yt={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var Xt=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();var qt=0,Kt={textureCount:0,uboCount:0},Zt=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=qt++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof wt)return wt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");wt=!0===t({a:"b"},"a","b")}catch(t){wt=!1}return wt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),e||(Kt.textureCount=0,Kt.uboCount=0,this.syncUniformGroup(t.uniformGroup,Kt)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var n=this.getGlProgram();t.static&&t.dirtyId===n.uniformDirtyGroups[t.id]||(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},t.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in t.uniforms){var o=e[i];if(o){for(var a=t.uniforms[i],s=!1,u=0;u<xt.length;u++)if(xt[u].test(o,a)){r.push(xt[u].code(i,a)),s=!0;break}if(!s){var l=(1===o.size?_t:Tt)[o.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+l+";")}}else null!==(n=t.uniforms[i])&&void 0!==n&&n.group&&(t.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var n=this.getGlProgram();if(!t.static||0!==t.dirtyId||!n.uniformGroups[t.id]){t.dirtyId=0;var r=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,e);t.buffer.update(),r(n.uniformData,t.uniforms,this.renderer,Kt,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,n){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var i=this.gl.getUniformBlockIndex(e.program,n);e.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=function(t,e){if(!t.autoManage)return{size:0,syncFunc:Vt};for(var n=function(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,o=0;o<e.length;o++){var a=e[o];if(n=Yt[a.data.type],a.data.size>1&&(n=Math.max(n,16)*a.data.size),a.dataLen=n,r%n!=0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),a.offset=i,i+=n,r=n):(a.offset=i,r+=n,i+=n)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}(function(t,e){var n=[];for(var r in t)e[r]&&n.push(e[r]);return n.sort((function(t,e){return t.index-e.index})),n}(t.uniforms,e)),r=n.uboElements,i=n.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],a=0;a<r.length;a++){for(var s=r[a],u=t.uniforms[s.data.name],l=s.data.name,c=!1,h=0;h<xt.length;h++){var d=xt[h];if(d.codeUbo&&d.test(s.data,u)){o.push("offset = "+s.offset/4+";",xt[h].codeUbo(s.data.name,u)),c=!0;break}}if(!c)if(s.data.size>1){var A=vt(s.data.type),f=Math.max(Yt[s.data.type]/16,1),p=A/f,g=(4-p%4)%4;o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+s.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+s.data.size*f+"; i++)\n                {\n                    for(var j = 0; j < "+p+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+g+";\n                }\n\n                ")}else{var v=Wt[s.data.type];o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+s.offset/4+";\n                "+v+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}(t,this.shader.program.uniformData)),t.autoManage){var s=new Float32Array(a.size/4);t.buffer.update(s)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,n){var r=t.uniforms,i=[n+"-"];for(var o in r)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,n=t.program,r=function(t,e){var n,r,i,o,a=ut(t,t.VERTEX_SHADER,e.vertexSrc),s=ut(t,t.FRAGMENT_SHADER,e.fragmentSrc),u=t.createProgram();if(t.attachShader(u,a),t.attachShader(u,s),t.linkProgram(u),t.getProgramParameter(u,t.LINK_STATUS)||(r=u,i=a,o=s,(n=t).getProgramParameter(r,n.LINK_STATUS)||(n.getShaderParameter(i,n.COMPILE_STATUS)||lt(n,i),n.getShaderParameter(o,n.COMPILE_STATUS)||lt(n,o),console.error("PixiJS Error: Could not initialize shader."),""!==n.getProgramInfoLog(r)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(r)))),e.attributeData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i);if(0!==o.name.indexOf("gl_")){var a=bt(e,o.type),s={type:a,name:o.name,size:vt(a),location:e.getAttribLocation(t,o.name)};n[o.name]=s}}return n}(u,t),e.uniformData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=e.getActiveUniform(t,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),u=bt(e,o.type);n[a]={name:a,index:i,type:u,size:o.size,isArray:s,value:ht(u,o.size)}}return n}(u,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var l=Object.keys(e.attributeData);l.sort((function(t,e){return t>e?1:-1}));for(var c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(u,c,l[c]);t.linkProgram(u)}t.deleteShader(a),t.deleteShader(s);var h={};for(var c in e.uniformData){var d=e.uniformData[c];h[c]={location:t.getUniformLocation(u,c),value:ht(d.type,d.size)}}return new Xt(u,h)}(e,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}(),Jt=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=i.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Bt,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){var e,n;this.gl=t,this.blendModes=(e=t,void 0===n&&(n=[]),n[i.b.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.ADD]=[e.ONE,e.ONE],n[i.b.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.NONE]=[0,0],n[i.b.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],n[i.b.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.SRC_IN]=[e.DST_ALPHA,e.ZERO],n[i.b.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],n[i.b.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],n[i.b.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],n[i.b.DST_IN]=[e.ZERO,e.SRC_ALPHA],n[i.b.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],n[i.b.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],n[i.b.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],n[i.b.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],n),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),$t=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.b.GC_MAX_IDLE,this.checkCountMax=r.b.GC_MAX_CHECK_COUNT,this.mode=r.b.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==i.i.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}(),te=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=i.r.UNSIGNED_BYTE,this.internalFormat=i.h.RGBA,this.samplerType=0},ee=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new v,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t,e,n,r,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y,b,w,x,_,T,E=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=(t=E,"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[i.r.UNSIGNED_BYTE]=((n={})[i.h.RGBA]=t.RGBA8,n[i.h.RGB]=t.RGB8,n[i.h.RG]=t.RG8,n[i.h.RED]=t.R8,n[i.h.RGBA_INTEGER]=t.RGBA8UI,n[i.h.RGB_INTEGER]=t.RGB8UI,n[i.h.RG_INTEGER]=t.RG8UI,n[i.h.RED_INTEGER]=t.R8UI,n[i.h.ALPHA]=t.ALPHA,n[i.h.LUMINANCE]=t.LUMINANCE,n[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,n),e[i.r.BYTE]=((r={})[i.h.RGBA]=t.RGBA8_SNORM,r[i.h.RGB]=t.RGB8_SNORM,r[i.h.RG]=t.RG8_SNORM,r[i.h.RED]=t.R8_SNORM,r[i.h.RGBA_INTEGER]=t.RGBA8I,r[i.h.RGB_INTEGER]=t.RGB8I,r[i.h.RG_INTEGER]=t.RG8I,r[i.h.RED_INTEGER]=t.R8I,r),e[i.r.UNSIGNED_SHORT]=((o={})[i.h.RGBA_INTEGER]=t.RGBA16UI,o[i.h.RGB_INTEGER]=t.RGB16UI,o[i.h.RG_INTEGER]=t.RG16UI,o[i.h.RED_INTEGER]=t.R16UI,o[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,o),e[i.r.SHORT]=((a={})[i.h.RGBA_INTEGER]=t.RGBA16I,a[i.h.RGB_INTEGER]=t.RGB16I,a[i.h.RG_INTEGER]=t.RG16I,a[i.h.RED_INTEGER]=t.R16I,a),e[i.r.UNSIGNED_INT]=((s={})[i.h.RGBA_INTEGER]=t.RGBA32UI,s[i.h.RGB_INTEGER]=t.RGB32UI,s[i.h.RG_INTEGER]=t.RG32UI,s[i.h.RED_INTEGER]=t.R32UI,s[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,s),e[i.r.INT]=((u={})[i.h.RGBA_INTEGER]=t.RGBA32I,u[i.h.RGB_INTEGER]=t.RGB32I,u[i.h.RG_INTEGER]=t.RG32I,u[i.h.RED_INTEGER]=t.R32I,u),e[i.r.FLOAT]=((l={})[i.h.RGBA]=t.RGBA32F,l[i.h.RGB]=t.RGB32F,l[i.h.RG]=t.RG32F,l[i.h.RED]=t.R32F,l[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[i.r.HALF_FLOAT]=((c={})[i.h.RGBA]=t.RGBA16F,c[i.h.RGB]=t.RGB16F,c[i.h.RG]=t.RG16F,c[i.h.RED]=t.R16F,c),e[i.r.UNSIGNED_SHORT_5_6_5]=((h={})[i.h.RGB]=t.RGB565,h),e[i.r.UNSIGNED_SHORT_4_4_4_4]=((d={})[i.h.RGBA]=t.RGBA4,d),e[i.r.UNSIGNED_SHORT_5_5_5_1]=((A={})[i.h.RGBA]=t.RGB5_A1,A),e[i.r.UNSIGNED_INT_2_10_10_10_REV]=((f={})[i.h.RGBA]=t.RGB10_A2,f[i.h.RGBA_INTEGER]=t.RGB10_A2UI,f),e[i.r.UNSIGNED_INT_10F_11F_11F_REV]=((p={})[i.h.RGB]=t.R11F_G11F_B10F,p),e[i.r.UNSIGNED_INT_5_9_9_9_REV]=((g={})[i.h.RGB]=t.RGB9_E5,g),e[i.r.UNSIGNED_INT_24_8]=((v={})[i.h.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,v),e[i.r.FLOAT_32_UNSIGNED_INT_24_8_REV]=((m={})[i.h.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,m),T=e):((y={})[i.r.UNSIGNED_BYTE]=((b={})[i.h.RGBA]=t.RGBA,b[i.h.RGB]=t.RGB,b[i.h.ALPHA]=t.ALPHA,b[i.h.LUMINANCE]=t.LUMINANCE,b[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,b),y[i.r.UNSIGNED_SHORT_5_6_5]=((w={})[i.h.RGB]=t.RGB,w),y[i.r.UNSIGNED_SHORT_4_4_4_4]=((x={})[i.h.RGBA]=t.RGBA,x),y[i.r.UNSIGNED_SHORT_5_5_5_1]=((_={})[i.h.RGBA]=t.RGBA,_),T=y),T);var S=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=S;for(var M=0;M<S;M++)this.boundTextures[M]=null;this.emptyTextures={};var C=new te(E.createTexture());for(E.bindTexture(E.TEXTURE_2D,C.texture),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[E.TEXTURE_2D]=C,this.emptyTextures[E.TEXTURE_CUBE_MAP]=new te(E.createTexture()),E.bindTexture(E.TEXTURE_CUBE_MAP,this.emptyTextures[E.TEXTURE_CUBE_MAP].texture),M=0;M<6;M++)E.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+M,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,null);for(E.texParameteri(E.TEXTURE_CUBE_MAP,E.TEXTURE_MAG_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_CUBE_MAP,E.TEXTURE_MIN_FILTER,E.LINEAR),M=0;M<this.boundTextures.length;M++)this.bind(null,M)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this.boundTextures,n=this.hasIntegerTextures,r=this.CONTEXT_UID;if(n)for(var o=t-1;o>=0;--o){var a=e[o];a&&a._glTextures[r].samplerType!==i.o.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new te(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var n,r;e.internalFormat=null!==(r=null===(n=this.internalFormats[t.type])||void 0===n?void 0:n[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===i.r.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e))e.samplerType!==i.o.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,o=t.realHeight,a=n.gl;(e.width!==r||e.height!==o||e.dirtyId<0)&&(e.width=r,e.height=o,a.texImage2D(t.target,0,e.internalFormat,r,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&Object(o.removeItems)(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==i.k.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=i.s.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&t.mipmap!==i.k.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===i.p.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),ne=new u.d,re=function(t){function e(e,n){void 0===e&&(e=i.n.UNKNOWN);var a=t.call(this)||this;return n=Object.assign({},r.b.RENDER_OPTIONS,n),a.options=n,a.type=e,a.screen=new u.j(0,0,n.width,n.height),a.view=n.view||document.createElement("canvas"),a.resolution=n.resolution||r.b.RESOLUTION,a.useContextAlpha=n.useContextAlpha,a.autoDensity=!!n.autoDensity,a.preserveDrawingBuffer=n.preserveDrawingBuffer,a.clearBeforeRender=n.clearBeforeRender,a._backgroundColor=0,a._backgroundColorRgba=[0,0,0,1],a._backgroundColorString="#000000",a.backgroundColor=n.backgroundColor||a._backgroundColor,a.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(Object(o.deprecation)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),a.useContextAlpha=n.transparent,a.backgroundAlpha=n.transparent?0:1),a._lastObjectRendered=null,a.plugins={},a}return d(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},e.prototype.generateTexture=function(t,e,n,r){void 0===e&&(e={}),"number"==typeof e&&(Object(o.deprecation)("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:n,region:r});var i=e.region,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}(e,["region"]);0===(r=i||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var s=D.create(A({width:r.width,height:r.height},a));return ne.tx=-r.x,ne.ty=-r.y,this.render(t,{renderTexture:s,clear:!1,transform:ne,skipUpdateTransform:!!t.parent}),s},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=i.n.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Object(o.hex2string)(t),Object(o.hex2rgb)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(o.EventEmitter),ie=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},oe=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var i=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,i.buffer)}},t.prototype.bindBufferRange=function(t,e,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var o=t._glBuffers[i]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*n,256)},t.prototype.update=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(e||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.dispose(this.managedBuffers[e[n]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,n=this.gl;return t._glBuffers[e]=new ie(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),ae=function(t){function e(n){var r=t.call(this,i.n.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new a.a("destroy"),contextChange:new a.a("contextChange"),reset:new a.a("reset"),update:new a.a("update"),postrender:new a.a("postrender"),prerender:new a.a("prerender"),resize:new a.a("resize")},r.runners.contextChange.add(r),r.globalUniforms=new Y({projectionMatrix:new u.d},!0),r.addSystem(Ot,"mask").addSystem(et,"context").addSystem(Jt,"state").addSystem(Zt,"shader").addSystem(ee,"texture").addSystem(oe,"buffer").addSystem(at,"geometry").addSystem(it,"framebuffer").addSystem(Ut,"scissor").addSystem(jt,"stencil").addSystem(zt,"projection").addSystem($t,"textureGC").addSystem(Z,"filter").addSystem(Gt,"renderTexture").addSystem($,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,Object(o.sayHello)(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return d(e,t),e.create=function(t){if(Object(o.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n);t>=i.l.HIGH?this.multisample=i.l.HIGH:t>=i.l.MEDIUM?this.multisample=i.l.MEDIUM:t>=i.l.LOW?this.multisample=i.l.LOW:this.multisample=i.l.NONE},e.prototype.addSystem=function(t,e){var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=n,this.runners)this.runners[r].add(n);return this},e.prototype.render=function(t,e){var n,r,i,a;if(e&&(e instanceof D?(Object(o.deprecation)("6.0.0","Renderer#render arguments changed, use options instead."),n=e,r=arguments[2],i=arguments[3],a=arguments[4]):(n=e.renderTexture,r=e.clear,i=e.transform,a=e.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=t),!a){var s=t.enableTempParent();t.updateTransform(),t.disableTempParent(s)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,n,r,i){void 0===n&&(n={});var o=t.prototype.generateTexture.call(this,e,n,r,i);return this.framebuffer.blit(),o},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Object(o.deprecation)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(re);function se(t){return ae.create(t)}var ue="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",le="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ce=function(){this.texArray=null,this.blend=0,this.type=i.f.TRIANGLES,this.start=0,this.size=0,this.data=null},he=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),de=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),Ae=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Bt.for2d(),n.size=4*r.b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return d(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.b.PREFER_ENV===i.g.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var r=Et.replace(/%forloop%/gi,St(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new ce);for(;n.length<i;)n.push(new he);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++v._globalBatch,u=0,l=r[0],c=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var d=t[h];t[h]=null,d._batchEnabled!==s&&(l.count>=n&&(i.boundArray(l,o,s,n),this.buildDrawCalls(l,c,h),c=h,l=r[++u],++s),d._batchEnabled=s,d.touched=a,l.elements[l.count++]=d)}for(l.count>0&&(i.boundArray(l,o,s,n),this.buildDrawCalls(l,c,this._bufferSize),++u,++s),h=0;h<o.length;h++)o[h]=null;v._globalBatch=s},e.prototype.buildDrawCalls=function(t,n,r){var i=this._bufferedElements,a=this._attributeBuffer,s=this._indexBuffer,u=this.vertexSize,l=e._drawCallPool,c=this._dcIndex,h=this._aIndex,d=this._iIndex,A=l[c];A.start=this._iIndex,A.texArray=t;for(var f=n;f<r;++f){var p=i[f],g=p._texture.baseTexture,v=o.premultiplyBlendMode[g.alphaMode?1:0][p.blendMode];i[f]=null,n<f&&A.blend!==v&&(A.size=d-A.start,n=f,(A=l[++c]).texArray=t,A.start=d),this.packInterleavedGeometry(p,a,s,h,d),h+=p.vertexData.length/2*u,d+=p.indices.length,A.blend=v}n<r&&(A.size=d-A.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,n=this._indexBuffer;r.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=e._drawCallPool,a=null,s=0;s<t;s++){var u=o[s],l=u.texArray,c=u.type,h=u.size,d=u.start,A=u.blend;a!==l&&(a=l,this.bindAndClearTexArray(l)),this.state.blendMode=A,i.set(this.state),r.drawElements(c,h,r.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Object(o.nextPow2)(Math.ceil(t/8)),n=Object(o.log2)(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new de(r*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=Object(o.nextPow2)(Math.ceil(t/12)),n=Object(o.log2)(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},e.prototype.packInterleavedGeometry=function(t,e,n,r,i){for(var a=e.uint32View,s=e.float32View,u=r/this.vertexSize,l=t.uvs,c=t.indices,h=t.vertexData,d=t._texture.baseTexture._batchLocation,A=Math.min(t.worldAlpha,1),f=A<1&&t._texture.baseTexture.alphaMode?Object(o.premultiplyTint)(t._tintRGB,A):t._tintRGB+(255*A<<24),p=0;p<h.length;p+=2)s[r++]=h[p],s[r++]=h[p+1],s[r++]=l[p],s[r++]=l[p+1],a[r++]=f,s[r++]=d;for(p=0;p<c.length;p++)n[i++]=u+c[p]},e._drawCallPool=[],e._textureArrayPool=[],e}(J),fe=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=Y.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new It(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new u.d,default:this.defaultGroupCache[t]};return new Nt(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),pe=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new F(null,e,!1),n._indexBuffer=new F(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,i.r.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,i.r.FLOAT).addAttribute("aColor",n._buffer,4,!0,i.r.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,i.r.FLOAT).addIndex(n._indexBuffer),n}return d(e,t),e}(Q),ge="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",ve="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",me=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:ge,fragment:ve,geometryClass:pe,vertexSize:6},t),n=e.vertex,r=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var a=t.call(this,e)||this;return a.shaderGenerator=new fe(n,r),a.geometryClass=o,a.vertexSize=i,a}return d(e,t),e}(Ae)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return ge},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return ve},enumerable:!1,configurable:!0}),t}().create()},function(t,e,n){n.r(e),n.d(e,"BaseTextureCache",(function(){return z})),n.d(e,"CanvasRenderTarget",(function(){return G})),n.d(e,"DATA_URI",(function(){return Y})),n.d(e,"ProgramCache",(function(){return U})),n.d(e,"TextureCache",(function(){return j})),n.d(e,"clearTextureCache",(function(){return Q})),n.d(e,"correctBlendMode",(function(){return x})),n.d(e,"createIndicesForQuads",(function(){return S})),n.d(e,"decomposeDataUri",(function(){return X})),n.d(e,"deprecation",(function(){return F})),n.d(e,"destroyTextureCache",(function(){return H})),n.d(e,"determineCrossOrigin",(function(){return q})),n.d(e,"getBufferType",(function(){return M})),n.d(e,"getResolutionOfUrl",(function(){return K})),n.d(e,"hex2rgb",(function(){return v})),n.d(e,"hex2string",(function(){return m})),n.d(e,"interleaveTypedArrays",(function(){return I})),n.d(e,"isPow2",(function(){return B})),n.d(e,"isWebGLSupported",(function(){return p})),n.d(e,"log2",(function(){return k})),n.d(e,"nextPow2",(function(){return N})),n.d(e,"premultiplyBlendMode",(function(){return w})),n.d(e,"premultiplyRgba",(function(){return _})),n.d(e,"premultiplyTint",(function(){return T})),n.d(e,"premultiplyTintToRgba",(function(){return E})),n.d(e,"removeItems",(function(){return P})),n.d(e,"rgb2hex",(function(){return b})),n.d(e,"sayHello",(function(){return f})),n.d(e,"sign",(function(){return D})),n.d(e,"skipHello",(function(){return A})),n.d(e,"string2hex",(function(){return y})),n.d(e,"trimCanvas",(function(){return V})),n.d(e,"uid",(function(){return O})),n.d(e,"url",(function(){return c}));var r=n(4);n.d(e,"isMobile",(function(){return r.a}));var i=n(50),o=n.n(i);n.d(e,"EventEmitter",(function(){return o.a}));var a=n(51),s=n.n(a);n.d(e,"earcut",(function(){return s.a}));var u=n(35),l=n(0),c={parse:u.parse,format:u.format,resolve:u.resolve};r.b.RETINA_PREFIX=/@([0-9\.]+)x/,r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var h,d=!1;function A(){d=!0}function f(t){var e;if(!d){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.4.2 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,n)}else globalThis.console&&globalThis.console.log("PixiJS 6.4.2 - "+t+" - http://www.pixijs.com/");d=!0}}function p(){return void 0===h&&(h=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!n||!n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch(t){return!1}}()),h}var g={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function v(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function m(t){var e=t.toString(16);return"#"+("000000".substring(0,6-e.length)+e)}function y(t){return"string"==typeof t&&"#"===(t=g[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),parseInt(t,16)}function b(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var w=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[l.b.NORMAL_NPM]=l.b.NORMAL,t[l.b.ADD_NPM]=l.b.ADD,t[l.b.SCREEN_NPM]=l.b.SCREEN,e[l.b.NORMAL]=l.b.NORMAL_NPM,e[l.b.ADD]=l.b.ADD_NPM,e[l.b.SCREEN]=l.b.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function x(t,e){return w[e?1:0][t]}function _(t,e,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}function T(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i*e+.5|0)}function E(t,e,n,r){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(r||void 0===r)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function S(t,e){void 0===e&&(e=null);var n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function M(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var C={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function I(t,e){for(var n=0,r=0,i={},o=0;o<t.length;o++)r+=e[o],n+=t[o].length;var a=new ArrayBuffer(4*n),s=null,u=0;for(o=0;o<t.length;o++){var l=e[o],c=t[o],h=M(c);i[h]||(i[h]=new C[h](a)),s=i[h];for(var d=0;d<c.length;d++)s[(d/l|0)*r+u+d%l]=c[d];u+=l}return new Float32Array(a)}function N(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function B(t){return!(t&t-1||!t)}function k(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}function P(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}function D(t){return 0===t?0:t<0?-1:1}var L=0;function O(){return++L}var R={};function F(t,e,n){if(void 0===n&&(n=3),!R[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),R[e]=!0}}var U={},j=Object.create(null),z=Object.create(null);function H(){var t;for(t in j)j[t].destroy();for(t in z)z[t].destroy()}function Q(){var t;for(t in j)delete j[t];for(t in z)delete z[t]}var G=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||r.b.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function V(t){var e,n,r,i=t.width,o=t.height,a=t.getContext("2d"),s=a.getImageData(0,0,i,o).data,u=s.length,l={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<u;e+=4)0!==s[e+3]&&(n=e/4%i,r=~~(e/4/i),null===l.top&&(l.top=r),(null===l.left||n<l.left)&&(l.left=n),(null===l.right||l.right<n)&&(l.right=n+1),(null===l.bottom||l.bottom<r)&&(l.bottom=r));return null!==l.top&&(i=l.right-l.left,o=l.bottom-l.top+1,c=a.getImageData(l.left,l.top,i,o)),{height:o,width:i,data:c}}var W,Y=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function X(t){var e=Y.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function q(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,W||(W=document.createElement("a")),W.href=t;var n=c.parse(W.href),r=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&r&&n.protocol===e.protocol?"":"anonymous"}function K(t,e){var n=r.b.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}},function(t,e,n){n.d(e,"a",(function(){return U})),n.d(e,"b",(function(){return j}));var r,i,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y,b,w,x,_=/iPhone/i,T=/iPod/i,E=/iPad/i,S=/\biOS-universal(?:.+)Mac\b/i,M=/\bAndroid(?:.+)Mobile\b/i,C=/Android/i,I=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,N=/Silk/i,B=/Windows Phone/i,k=/\bWindows(?:.+)ARM\b/i,P=/BlackBerry/i,D=/BB10/i,L=/Opera Mini/i,O=/\b(CriOS|Chrome)(?:.+)Mobile/i,R=/Mobile(?:.+)Firefox\b/i,F=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},U=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i,o=(i=n,function(t){return t.test(i)}),a={apple:{phone:o(_)&&!o(B),ipod:o(T),tablet:!o(_)&&(o(E)||F(e))&&!o(B),universal:o(S),device:(o(_)||o(T)||o(E)||o(S)||F(e))&&!o(B)},amazon:{phone:o(I),tablet:!o(I)&&o(N),device:o(I)||o(N)},android:{phone:!o(B)&&o(I)||!o(B)&&o(M),tablet:!o(B)&&!o(I)&&!o(M)&&(o(N)||o(C)),device:!o(B)&&(o(I)||o(N)||o(M)||o(C))||o(/\bokhttp\b/i)},windows:{phone:o(B),tablet:o(k),device:o(B)||o(k)},other:{blackberry:o(P),blackberry10:o(D),opera:o(L),firefox:o(R),chrome:o(O),device:o(P)||o(D)||o(L)||o(R)||o(O)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}(globalThis.navigator);
/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */(x=r||(r={}))[x.WEBGL_LEGACY=0]="WEBGL_LEGACY",x[x.WEBGL=1]="WEBGL",x[x.WEBGL2=2]="WEBGL2",function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(i||(i={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(o||(o={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(a||(a={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(s||(s={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(u||(u={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(c||(c={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(h||(h={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(d||(d={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(A||(A={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(p||(p={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(m||(m={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(b||(b={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(w||(w={}));var j={MIPMAP_TEXTURES:f.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:b.NONE,SPRITE_MAX_TEXTURES:function(t){var e,n=!0;(U.tablet||U.phone)&&(U.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(n=!1),U.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(n=!1));return n?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:v.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:A.CLAMP,SCALE_MODE:d.LINEAR,PRECISION_VERTEX:m.HIGH,PRECISION_FRAGMENT:U.apple.device?m.HIGH:m.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!U.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(t,e,n){n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return I})),n.d(e,"d",(function(){return N}));var r=n(4),i=n(1),o=n(3);
/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */r.b.SORTABLE_CHILDREN=!1;var a=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.j.EMPTY:((t=t||new i.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,u=n*e.x+i*e.y+a,l=r*e.x+o*e.y+s;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],a=t[1];e=o<e?o:e,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[2])<e?o:e,n=(a=t[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[4])<e?o:e,n=(a=t[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[6])<e?o:e,n=(a=t[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){this.addFrameMatrix(t.worldTransform,e,n,r,i)},t.prototype.addFrameMatrix=function(t,e,n,r,i){var o=t.a,a=t.b,s=t.c,u=t.d,l=t.tx,c=t.ty,h=this.minX,d=this.minY,A=this.maxX,f=this.maxY,p=o*e+s*n+l,g=a*e+u*n+c;h=p<h?p:h,d=g<d?g:d,A=p>A?p:A,f=g>f?g:f,h=(p=o*r+s*n+l)<h?p:h,d=(g=a*r+u*n+c)<d?g:d,A=p>A?p:A,f=g>f?g:f,h=(p=o*e+s*i+l)<h?p:h,d=(g=a*e+u*i+c)<d?g:d,A=p>A?p:A,f=g>f?g:f,h=(p=o*r+s*i+l)<h?p:h,d=(g=a*r+u*i+c)<d?g:d,A=p>A?p:A,f=g>f?g:f,this.minX=h,this.minY=d,this.maxX=A,this.maxY=f},t.prototype.addVertexData=function(t,e,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=e;s<n;s+=2){var u=t[s],l=t[s+1];r=u<r?u:r,i=l<i?l:i,o=u>o?u:o,a=l>a?l:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a},t.prototype.addVertices=function(t,e,n,r){this.addVerticesMatrix(t.worldTransform,e,n,r)},t.prototype.addVerticesMatrix=function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var a=t.a,s=t.b,u=t.c,l=t.d,c=t.tx,h=t.ty,d=this.minX,A=this.minY,f=this.maxX,p=this.maxY,g=n;g<r;g+=2){var v=e[g],m=e[g+1],y=a*v+u*m+c,b=l*m+s*v+h;d=Math.min(d,y-i),f=Math.max(f,y+i),A=Math.min(A,b-o),p=Math.max(p,b+o)}this.minX=d,this.minY=A,this.maxX=f,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,r,i,o){t-=i,e-=o,n+=i,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function u(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var l,c,h,d,A,f,p,g,v,m,y,b,w,x,_,T,E,S,M,C,I=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new i.m,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new a,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return u(e,t),e.mixin=function(t){for(var n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new i.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new i.j),t=this._localBoundsRect),this._localBounds||(this._localBounds=new a);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-o,s},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new N),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*i.i},set:function(t){this.transform.rotation=t*i.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask!==t&&(this._mask&&((e=this._mask.maskObject||this._mask)._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1)),this._mask=t,this._mask&&(0===(e=this._mask.maskObject||this._mask)._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++))},enumerable:!1,configurable:!0}),e}(o.EventEmitter),N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return u(e,t),e}(I);function B(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}I.prototype.displayObjectUpdateTransform=I.prototype.updateTransform,(C=l||(l={}))[C.WEBGL_LEGACY=0]="WEBGL_LEGACY",C[C.WEBGL=1]="WEBGL",C[C.WEBGL2=2]="WEBGL2",function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(c||(c={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(h||(h={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(d||(d={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(A||(A={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(f||(f={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(p||(p={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(g||(g={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(v||(v={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(m||(m={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(y||(y={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(b||(b={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(w||(w={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(x||(x={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(_||(_={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(T||(T={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(E||(E={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(S||(S={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(M||(M={}));var k=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=r.b.SORTABLE_CHILDREN,e.sortDirty=!1,e}return u(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Object(o.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var i=e[0],a=this.children.indexOf(i);if(-1===a)return null;i.parent=null,i.transform._parentID=-1,Object(o.removeItems)(this.children,a,1),this._boundsID++,this.onChildrenChange(a),i.emit("removed",this),this.emit("childRemoved",i,this,a)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,r=t,i=e-r;if(i>0&&i<=e){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(B),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!n)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var n=t.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var r,i;if(this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(r=this.getBounds(!0)),r&&n.intersects(r,i))this._render(t);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o],u=s.cullable;s.cullable=u||!this.cullArea,s.render(t),s.cullable=u}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var i=e&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==E.NONE));if(i&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),r=0;for(var o=this.children.length;r<o;++r)this.children[r].render(t)}i&&t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(I);k.prototype.containerUpdateTransform=k.prototype.updateTransform},function(t,e,n){var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},l.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,o),!0;case 6:return c.fn.call(c.context,e,n,r,o,a),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,A=c.length;for(l=0;l<A;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,l=[],c=a.length;s<c;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:u(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},function(t,e,n){n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return r}));var r,i,o=n(4);
/*!
 * @pixi/ticker - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */o.b.TARGET_FPMS=.06,(i=r||(r={}))[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY";var a=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=n,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),s=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new a(null,null,1/0),this.deltaMS=1/o.b.TARGET_FPMS,this.elapsedMS=1/o.b.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=r.NORMAL),this._addListener(new a(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=r.NORMAL),this._addListener(new a(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*o.b.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,o.b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),u=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,r.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?s.shared:new s,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},function(t,e,n){n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return p}));var r=n(2),i=n(1),o=n(0),a=n(5),s=n(4),u=n(3),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var h=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),d=new i.g,A=new i.h,f=function(t){function e(e,n,i,a){void 0===a&&(a=o.f.TRIANGLES);var u=t.call(this)||this;return u.geometry=e,u.shader=n,u.state=i||r.s.for2d(),u.drawMode=a,u.start=0,u.size=0,u.uvs=null,u.indices=null,u.vertexData=new Float32Array(1),u.vertexDirty=-1,u._transformID=-1,u._roundPixels=s.b.ROUND_PIXELS,u.batchUvs=null,u}return c(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===o.f.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,n=t._updateID;if(n!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,u=r.d,l=r.tx,c=r.ty,h=this.vertexData,d=0;d<h.length/2;d++){var A=e[2*d],f=e[2*d+1];h[2*d]=i*A+a*f+l,h[2*d+1]=o*A+u*f+c}if(this._roundPixels){var p=s.b.RESOLUTION;for(d=0;d<h.length;++d)h[d]=Math.round((h[d]*p|0)/p)}this.vertexDirty=n}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new h(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,d);for(var e=this.geometry.getBuffer("aVertexPosition").data,n=A.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1,a=0;a+2<i;a+=o){var s=2*r[a],u=2*r[a+1],l=2*r[a+2];if(n[0]=e[s],n[1]=e[s+1],n[2]=e[u],n[3]=e[u+1],n[4]=e[l],n[5]=e[l+1],A.contains(d.x,d.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(a.b),p=function(t){function e(e,n){var o=this,a={uSampler:e,alpha:1,uTextureMatrix:i.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(a,n.uniforms),(o=t.call(this,n.program||r.n.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),a)||this)._colorDirty=!1,o.uvMatrix=new r.u(e),o.batchable=void 0===n.program,o.pluginName=n.pluginName,o.tint=n.tint,o.alpha=n.alpha,o}return c(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Object(u.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(r.r),g=function(t){function e(e,n,i){var a=t.call(this)||this,s=new r.h(e),u=new r.h(n,!0),l=new r.h(i,!0,!0);return a.addAttribute("aVertexPosition",s,2,!1,o.r.FLOAT).addAttribute("aTextureCoord",u,2,!1,o.r.FLOAT).addIndex(l),a._updateId=-1,a}return c(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(r.l)},function(t,e){t.exports="precision mediump float;\nattribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord() {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tfilterCoord = aVertexPosition * outputFrame.zw;\n}\n"},function(t,e,n){n.d(e,"a",(function(){return A})),n.d(e,"b",(function(){return f}));var r=n(2),i=n(3),o=n(1),a=n(0),s=n(4),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},l=function(){function t(t){this._foundShapes=[],this.renderer=t}return t.prototype.pushMask=function(t){var e=this.renderer,n=t.maskObject||t;e.context.save();var r=this._foundShapes;if(this.recursiveFindShapes(n,r),r.length>0){var i=e.context;i.beginPath();for(var o=0;o<r.length;o++){var a=r[o],s=a.transform.worldTransform;this.renderer.setContextTransform(s),this.renderGraphicsShape(a)}r.length=0,i.clip()}},t.prototype.recursiveFindShapes=function(t,e){t.geometry&&t.geometry.graphicsData&&e.push(t);var n=t.children;if(n)for(var r=0;r<n.length;r++)this.recursiveFindShapes(n[r],e)},t.prototype.renderGraphicsShape=function(t){t.finishPoly();var e=this.renderer.context,n=t.geometry.graphicsData,r=n.length;if(0!==r)for(var i=0;i<r;i++){var a=n[i],s=a.shape;if(s.type===o.l.POLY){var u=s.points,l=a.holes,c=void 0,h=void 0,d=void 0,A=void 0;e.moveTo(u[0],u[1]);for(var f=1;f<u.length/2;f++)e.lineTo(u[2*f],u[2*f+1]);if(l.length>0){for(c=0,d=u[0],A=u[1],f=2;f+2<u.length;f+=2)c+=(u[f]-d)*(u[f+3]-A)-(u[f+2]-d)*(u[f+1]-A);for(var p=0;p<l.length;p++)if(u=l[p].shape.points){for(h=0,d=u[0],A=u[1],f=2;f+2<u.length;f+=2)h+=(u[f]-d)*(u[f+3]-A)-(u[f+2]-d)*(u[f+1]-A);if(h*c<0)for(e.moveTo(u[0],u[1]),f=2;f<u.length;f+=2)e.lineTo(u[f],u[f+1]);else for(e.moveTo(u[u.length-2],u[u.length-1]),f=u.length-4;f>=0;f-=2)e.lineTo(u[f],u[f+1]);l[p].shape.closeStroke&&e.closePath()}}u[0]===u[u.length-2]&&u[1]===u[u.length-1]&&e.closePath()}else if(s.type===o.l.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(s.type===o.l.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(s.type===o.l.ELIP){var g=2*s.width,v=2*s.height,m=s.x-g/2,y=s.y-v/2,b=g/2*.5522848,w=v/2*.5522848,x=m+g,_=y+v,T=m+g/2,E=y+v/2;e.moveTo(m,E),e.bezierCurveTo(m,E-w,T-b,y,T,y),e.bezierCurveTo(T+b,y,x,E-w,x,E),e.bezierCurveTo(x,E+w,T+b,_,T,_),e.bezierCurveTo(T-b,_,m,E+w,m,E),e.closePath()}else if(s.type===o.l.RREC){var S=s.x,M=s.y,C=s.width,I=s.height,N=s.radius,B=Math.min(C,I)/2;N=N>B?B:N,e.moveTo(S,M+N),e.lineTo(S,M+I-N),e.quadraticCurveTo(S,M+I,S+N,M+I),e.lineTo(S+C-N,M+I),e.quadraticCurveTo(S+C,M+I,S+C,M+I-N),e.lineTo(S+C,M+N),e.quadraticCurveTo(S+C,M,S+C-N,M),e.lineTo(S+N,M),e.quadraticCurveTo(S,M,S,M+N),e.closePath()}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();function c(t){var e=document.createElement("canvas");e.width=6,e.height=1;var n=e.getContext("2d");return n.fillStyle=t,n.fillRect(0,0,6,1),e}function h(){if("undefined"==typeof document)return!1;var t=c("#ff00ff"),e=c("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var r=n.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var i=r.getImageData(2,0,1,1);if(!i)return!1;var o=i.data;return 255===o[0]&&0===o[1]&&0===o[2]}var d=new o.d,A=function(t){function e(n){var r,o=t.call(this,a.n.CANVAS,n)||this;if(o.refresh=!0,o.maskManager=new l(o),o.smoothProperty="imageSmoothingEnabled",o.blendModes=(void 0===r&&(r=[]),h()?(r[a.b.NORMAL]="source-over",r[a.b.ADD]="lighter",r[a.b.MULTIPLY]="multiply",r[a.b.SCREEN]="screen",r[a.b.OVERLAY]="overlay",r[a.b.DARKEN]="darken",r[a.b.LIGHTEN]="lighten",r[a.b.COLOR_DODGE]="color-dodge",r[a.b.COLOR_BURN]="color-burn",r[a.b.HARD_LIGHT]="hard-light",r[a.b.SOFT_LIGHT]="soft-light",r[a.b.DIFFERENCE]="difference",r[a.b.EXCLUSION]="exclusion",r[a.b.HUE]="hue",r[a.b.SATURATION]="saturate",r[a.b.COLOR]="color",r[a.b.LUMINOSITY]="luminosity"):(r[a.b.NORMAL]="source-over",r[a.b.ADD]="lighter",r[a.b.MULTIPLY]="source-over",r[a.b.SCREEN]="source-over",r[a.b.OVERLAY]="source-over",r[a.b.DARKEN]="source-over",r[a.b.LIGHTEN]="source-over",r[a.b.COLOR_DODGE]="source-over",r[a.b.COLOR_BURN]="source-over",r[a.b.HARD_LIGHT]="source-over",r[a.b.SOFT_LIGHT]="source-over",r[a.b.DIFFERENCE]="source-over",r[a.b.EXCLUSION]="source-over",r[a.b.HUE]="source-over",r[a.b.SATURATION]="source-over",r[a.b.COLOR]="source-over",r[a.b.LUMINOSITY]="source-over"),r[a.b.NORMAL_NPM]=r[a.b.NORMAL],r[a.b.ADD_NPM]=r[a.b.ADD],r[a.b.SCREEN_NPM]=r[a.b.SCREEN],r[a.b.SRC_IN]="source-in",r[a.b.SRC_OUT]="source-out",r[a.b.SRC_ATOP]="source-atop",r[a.b.DST_OVER]="destination-over",r[a.b.DST_IN]="destination-in",r[a.b.DST_OUT]="destination-out",r[a.b.DST_ATOP]="destination-atop",r[a.b.XOR]="xor",r[a.b.SUBTRACT]="source-over",r),o.renderingToScreen=!1,o._activeBlendMode=null,o._projTransform=null,o._outerBlend=!1,o.rootContext=o.view.getContext("2d",{alpha:o.useContextAlpha}),o.context=o.rootContext,!o.rootContext.imageSmoothingEnabled){var s=o.rootContext;s.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":s.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":s.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":s.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")}return o.initPlugins(e.__plugins),Object(i.sayHello)("Canvas"),o.resize(o.options.width,o.options.height),o}return function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.addSystem=function(){return this},e.prototype.render=function(t,e){if(this.view){var n,o,s,u;e&&(e instanceof r.p||e instanceof r.b?(Object(i.deprecation)("6.0.0","CanvasRenderer#render arguments changed, use options instead."),n=e,o=arguments[2],s=arguments[3],u=arguments[4]):(n=e.renderTexture,o=e.clear,s=e.transform,u=e.skipUpdateTransform)),this.renderingToScreen=!n,this.emit("prerender");var l=this.resolution;n?((n=n.castToBaseTexture())._canvasRenderTarget||(n._canvasRenderTarget=new i.CanvasRenderTarget(n.width,n.height,n.resolution),n.resource=new r.j(n._canvasRenderTarget.canvas),n.valid=!0),this.context=n._canvasRenderTarget.context,this.resolution=n._canvasRenderTarget.resolution):this.context=this.rootContext;var c=this.context;if(this._projTransform=s||null,n||(this._lastObjectRendered=t),!u){var h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}if(c.save(),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,this._activeBlendMode=a.b.NORMAL,this._outerBlend=!1,c.globalCompositeOperation=this.blendModes[a.b.NORMAL],void 0!==o?o:this.clearBeforeRender)if(this.renderingToScreen)c.clearRect(0,0,this.width,this.height),this.backgroundAlpha>0&&(c.globalAlpha=this.useContextAlpha?this.backgroundAlpha:1,c.fillStyle=this._backgroundColorString,c.fillRect(0,0,this.width,this.height),c.globalAlpha=1);else{(n=n)._canvasRenderTarget.clear();var d=n.clearColor;d[3]>0&&(c.globalAlpha=this.useContextAlpha?d[3]:1,c.fillStyle=Object(i.hex2string)(Object(i.rgb2hex)(d)),c.fillRect(0,0,n.realWidth,n.realHeight),c.globalAlpha=1)}var A=this.context;this.context=c,t.renderCanvas(this),this.context=A,c.restore(),this.resolution=l,this._projTransform=null,this.emit("postrender")}},e.prototype.setContextTransform=function(t,e,n){var r=t,i=this._projTransform,o=this.resolution;n=n||o,i&&((r=d).copyFrom(t),r.prepend(i)),e?this.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*o|0,r.ty*o|0):this.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*o,r.ty*o)},e.prototype.clear=function(t,e){void 0===t&&(t=this._backgroundColorString),void 0===e&&(e=this.backgroundAlpha);var n=this.context;n.clearRect(0,0,this.width,this.height),t&&(n.globalAlpha=this.useContextAlpha?e:1,n.fillStyle=t,n.fillRect(0,0,this.width,this.height),n.globalAlpha=1)},e.prototype.setBlendMode=function(t,e){var n=t===a.b.SRC_IN||t===a.b.SRC_OUT||t===a.b.DST_IN||t===a.b.DST_ATOP;!e&&n&&(t=a.b.NORMAL),this._activeBlendMode!==t&&(this._activeBlendMode=t,this._outerBlend=n,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=s.b.SCALE_MODE===a.p.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(r.a),f={canvas:null,getTintedCanvas:function(t,e){var n=t.texture,r="#"+("00000"+(0|(e=f.roundColor(e))).toString(16)).slice(-6);n.tintCache=n.tintCache||{};var i,o=n.tintCache[r];if(o){if(o.tintId===n._updateID)return n.tintCache[r];i=n.tintCache[r]}else i=document.createElement("canvas");if(f.tintMethod(n,e,i),i.tintId=n._updateID,f.convertTintToImage){var a=new Image;a.src=i.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=i;return i},getTintedPattern:function(t,e){var n="#"+("00000"+(0|(e=f.roundColor(e))).toString(16)).slice(-6);t.patternCache=t.patternCache||{};var r=t.patternCache[n];return r&&r.tintId===t._updateID||(f.canvas||(f.canvas=document.createElement("canvas")),f.tintMethod(t,e,f.canvas),(r=f.canvas.getContext("2d").createPattern(f.canvas,"repeat")).tintId=t._updateID,t.patternCache[n]=r),r},tintWithMultiply:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).slice(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply";var a=t.baseTexture.getDrawableSource();r.drawImage(a,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(a,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).slice(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.getDrawableSource(),i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:function(t,e,n){var r=n.getContext("2d"),o=t._frame.clone(),a=t.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.getDrawableSource(),o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.restore();for(var s=Object(i.hex2rgb)(e),u=s[0],l=s[1],c=s[2],h=r.getImageData(0,0,o.width,o.height),d=h.data,A=0;A<d.length;A+=4)d[A+0]*=u,d[A+1]*=l,d[A+2]*=c;r.putImageData(h,0,0)},roundColor:function(t){var e=f.cacheStepsPerColorChannel,n=Object(i.hex2rgb)(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),Object(i.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:h(),tintMethod:null};f.tintMethod=f.canUseMultiply?f.tintWithMultiply:f.tintWithPerPixel;var p=r.q.create;r.q.create=function(t){if(!t||!t.forceCanvas)try{return p(t)}catch(t){}return new A(t)},r.c.prototype.getDrawableSource=function(){var t=this.resource;return t?t.bitmap||t.source:null},r.b.prototype._canvasRenderTarget=null,r.t.prototype.patternCache=null,r.t.prototype.tintCache=null},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){n.d(e,"a",(function(){return r}));
/*!
 * @pixi/runner - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var r=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,l=u.name,c=u.items;this._aliasCount++;for(var h=0,d=c.length;h<d;h++)c[h][l](t,e,n,r,i,o,a,s);return c===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(r.prototype,{dispatch:{value:r.prototype.emit},run:{value:r.prototype.emit}})},function(t,e,n){var r=n(20),i=n(15);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},function(t,e,n){var r=n(49),i="object"==("undefined"==typeof self?"undefined":_(self))&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){return null!=t&&"object"==_(t)}},function(t,e,n){n.d(e,"a",(function(){return A})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return c}));var r=n(8),i=n(0),o=n(2),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function s(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(t){function e(e,n,r,i){void 0===e&&(e=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===i&&(i=10);var o=t.call(this)||this;return o.segWidth=r,o.segHeight=i,o.width=e,o.height=n,o.build(),o}return s(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],n=[],r=[],i=this.segWidth-1,o=this.segHeight-1,a=this.width/i,s=this.height/o,u=0;u<t;u++){var l=u%this.segWidth,c=u/this.segWidth|0;e.push(l*a,c*s),n.push(l/i,c/o)}var h=i*o;for(u=0;u<h;u++){var d=u%i,A=u/i|0,f=A*this.segWidth+d,p=A*this.segWidth+d+1,g=(A+1)*this.segWidth+d,v=(A+1)*this.segWidth+d+1;r.push(f,p,g,p,v,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(r.b),l=function(t){function e(e,n,r){void 0===e&&(e=200),void 0===r&&(r=0);var i=t.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return i.points=n,i._width=e,i.textureScale=r,i.build(),i}return s(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var i=n.data,o=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var a=0,s=t[0],u=this._width*this.textureScale,l=t.length,c=0;c<l;c++){var h=4*c;if(this.textureScale>0){var d=s.x-t[c].x,A=s.y-t[c].y,f=Math.sqrt(d*d+A*A);s=t[c],a+=f/u}else a=c/(l-1);i[h]=a,i[h+1]=0,i[h+2]=a,i[h+3]=1}var p=0;for(c=0;c<l-1;c++)h=2*c,o[p++]=h,o[p++]=h+1,o[p++]=h+2,o[p++]=h+2,o[p++]=h+1,o[p++]=h+3;n.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,n=t[0],r=0,i=0,o=this.buffers[0].data,a=t.length,s=0;s<a;s++){var u=t[s],l=4*s;i=-((e=s<t.length-1?t[s+1]:u).x-n.x),r=e.y-n.y;var c=Math.sqrt(r*r+i*i),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=c,i/=c,r*=h,i*=h,o[l]=u.x+r,o[l+1]=u.y+i,o[l+2]=u.x-r,o[l+3]=u.y-i,n=u}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(r.b),c=function(t){function e(e,n,o){void 0===o&&(o=0);var a=this,s=new l(e.height,n,o),u=new r.c(e);return o>0&&(e.baseTexture.wrapMode=i.s.REPEAT),(a=t.call(this,s,u)||this).autoUpdate=!0,a}return s(e,t),e.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,e)},e}(r.a),h=function(t){function e(e,n,i){var a=this,s=new u(e.width,e.height,n,i),l=new r.c(o.t.WHITE);return(a=t.call(this,s,l)||this).texture=e,a.autoResize=!0,a}return s(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,n=e.width,r=e.height;!this.autoResize||t.width===n&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(r.a),d=function(t){function e(e,n,i,a,s){void 0===e&&(e=o.t.EMPTY);var u=this,l=new r.b(n,i,a);l.getBuffer("aVertexPosition").static=!1;var c=new r.c(e);return(u=t.call(this,l,c,null,s)||this).autoUpdate=!0,u}return s(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(r.a),A=function(t){function e(e,n,r,i,a){void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===a&&(a=10);var s=t.call(this,o.t.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=i,s._topHeight=r,s._bottomHeight=a,s.texture=e,s}return s(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(h)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":_(window))&&(n=window)}t.exports=n},function(t,e,n){var r;!function(i){function o(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function a(t,e,n,r,i,a){return o((s=o(o(e,t),o(r,a)))<<(u=i)|s>>>32-u,n);var s,u}function s(t,e,n,r,i,o,s){return a(e&n|~e&r,t,e,i,o,s)}function u(t,e,n,r,i,o,s){return a(e&r|n&~r,t,e,i,o,s)}function l(t,e,n,r,i,o,s){return a(e^n^r,t,e,i,o,s)}function c(t,e,n,r,i,o,s){return a(n^(e|~r),t,e,i,o,s)}function h(t,e){var n,r,i,a,h;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var d=1732584193,A=-271733879,f=-1732584194,p=271733878;for(n=0;n<t.length;n+=16)r=d,i=A,a=f,h=p,d=s(d,A,f,p,t[n],7,-680876936),p=s(p,d,A,f,t[n+1],12,-389564586),f=s(f,p,d,A,t[n+2],17,606105819),A=s(A,f,p,d,t[n+3],22,-1044525330),d=s(d,A,f,p,t[n+4],7,-176418897),p=s(p,d,A,f,t[n+5],12,1200080426),f=s(f,p,d,A,t[n+6],17,-1473231341),A=s(A,f,p,d,t[n+7],22,-45705983),d=s(d,A,f,p,t[n+8],7,1770035416),p=s(p,d,A,f,t[n+9],12,-1958414417),f=s(f,p,d,A,t[n+10],17,-42063),A=s(A,f,p,d,t[n+11],22,-1990404162),d=s(d,A,f,p,t[n+12],7,1804603682),p=s(p,d,A,f,t[n+13],12,-40341101),f=s(f,p,d,A,t[n+14],17,-1502002290),d=u(d,A=s(A,f,p,d,t[n+15],22,1236535329),f,p,t[n+1],5,-165796510),p=u(p,d,A,f,t[n+6],9,-1069501632),f=u(f,p,d,A,t[n+11],14,643717713),A=u(A,f,p,d,t[n],20,-373897302),d=u(d,A,f,p,t[n+5],5,-701558691),p=u(p,d,A,f,t[n+10],9,38016083),f=u(f,p,d,A,t[n+15],14,-660478335),A=u(A,f,p,d,t[n+4],20,-405537848),d=u(d,A,f,p,t[n+9],5,568446438),p=u(p,d,A,f,t[n+14],9,-1019803690),f=u(f,p,d,A,t[n+3],14,-187363961),A=u(A,f,p,d,t[n+8],20,1163531501),d=u(d,A,f,p,t[n+13],5,-1444681467),p=u(p,d,A,f,t[n+2],9,-51403784),f=u(f,p,d,A,t[n+7],14,1735328473),d=l(d,A=u(A,f,p,d,t[n+12],20,-1926607734),f,p,t[n+5],4,-378558),p=l(p,d,A,f,t[n+8],11,-2022574463),f=l(f,p,d,A,t[n+11],16,1839030562),A=l(A,f,p,d,t[n+14],23,-35309556),d=l(d,A,f,p,t[n+1],4,-1530992060),p=l(p,d,A,f,t[n+4],11,1272893353),f=l(f,p,d,A,t[n+7],16,-155497632),A=l(A,f,p,d,t[n+10],23,-1094730640),d=l(d,A,f,p,t[n+13],4,681279174),p=l(p,d,A,f,t[n],11,-358537222),f=l(f,p,d,A,t[n+3],16,-722521979),A=l(A,f,p,d,t[n+6],23,76029189),d=l(d,A,f,p,t[n+9],4,-640364487),p=l(p,d,A,f,t[n+12],11,-421815835),f=l(f,p,d,A,t[n+15],16,530742520),d=c(d,A=l(A,f,p,d,t[n+2],23,-995338651),f,p,t[n],6,-198630844),p=c(p,d,A,f,t[n+7],10,1126891415),f=c(f,p,d,A,t[n+14],15,-1416354905),A=c(A,f,p,d,t[n+5],21,-57434055),d=c(d,A,f,p,t[n+12],6,1700485571),p=c(p,d,A,f,t[n+3],10,-1894986606),f=c(f,p,d,A,t[n+10],15,-1051523),A=c(A,f,p,d,t[n+1],21,-2054922799),d=c(d,A,f,p,t[n+8],6,1873313359),p=c(p,d,A,f,t[n+15],10,-30611744),f=c(f,p,d,A,t[n+6],15,-1560198380),A=c(A,f,p,d,t[n+13],21,1309151649),d=c(d,A,f,p,t[n+4],6,-145523070),p=c(p,d,A,f,t[n+11],10,-1120210379),f=c(f,p,d,A,t[n+2],15,718787259),A=c(A,f,p,d,t[n+9],21,-343485551),d=o(d,r),A=o(A,i),f=o(f,a),p=o(p,h);return[d,A,f,p]}function d(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function A(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function f(t){var e,n,r="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return r}function p(t){return unescape(encodeURIComponent(t))}function g(t){return d(h(A(e=p(t)),8*e.length));var e}function v(t,e){return function(t,e){var n,r,i=A(t),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=h(i,8*t.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=h(o.concat(A(e)),512+8*e.length),d(h(a.concat(r),640))}(p(t),p(e))}function m(t,e,n){return e?n?v(e,t):f(v(e,t)):n?g(t):f(g(t))}void 0===(r=function(){return m}.call(e,n,e,t))||(t.exports=r)}()},function(t,e){t.exports="precision mediump float;\nattribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord() {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tfilterCoord = aVertexPosition * outputFrame.zw;\n}\n"},function(t,e,n){var r=n(24),i=n(133),o=n(134),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t){var e=_(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(158),i=n(161);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){(function(e){t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return i(e[a][1][t]||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,n,r){(function(t){var e,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),e=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var u=new t.MessageChannel;u.port1.onmessage=c,e=function(){u.port2.postMessage(0)}}var l=[];function c(){var t,e;r=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}r=!1}n.exports=function(t){1!==l.push(t)||r||e()}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){var r=t(1);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&A(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){r((function(){var r;try{r=e(n)}catch(e){return o.reject(t,e)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)}))}function d(t){var e=t&&t.then;if(t&&("object"==_(t)||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function A(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}var a=f((function(){e(i,r)}));"error"===a.status&&r(a.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}e.exports=l,l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(i);return this.state!==u?h(n,this.state===s?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=f(d,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)A(t,r);else{t.state=s,t.outcome=e;for(var i=-1,a=t.queue.length;++i<a;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},l.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},l.reject=function(t){var e=new this(i);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,u=-1,l=new this(i);++u<n;)c(t[u],u);return l;function c(t,i){e.resolve(t).then((function(t){a[i]=t,++s!==n||r||(r=!0,o.resolve(l,a))}),(function(t){r||(r=!0,o.reject(l,t))}))}},l.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<e;)r=t[a],this.resolve(r).then((function(t){n||(n=!0,o.resolve(s,t))}),(function(t){n||(n=!0,o.reject(s,t))}));return s}},{1:1}],3:[function(t,n,r){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){var r="function"==typeof Symbol&&"symbol"==_(Symbol.iterator)?function(t){return _(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_(t)},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function o(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var a=Promise;function s(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function u(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function l(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h=void 0,d={},A=Object.prototype.toString;function f(t){var e=d[t.name],n={};n.promise=new a((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function p(t){var e=d[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function g(t,e){var n=d[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function v(t,e){return new a((function(n,r){if(d[t.name]=d[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);f(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var a=i.open.apply(i,o);e&&(a.onupgradeneeded=function(e){var n=a.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(t){t.preventDefault(),r(a.error)},a.onsuccess=function(){var e=a.result;e.onversionchange=function(t){t.target.close()},n(e),p(t)}}))}function m(t){return v(t,!1)}function y(t){return v(t,!0)}function b(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,i=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function w(t){return o([function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}(atob(t.data))],{type:t.type})}function x(t){return t&&t.__local_forage_encoded_blob}function T(t){var e=this,n=e._initReady().then((function(){var t=d[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return u(n,t,t),n}function E(t,e,n,r){void 0===r&&(r=1);try{var i=t.db.transaction(t.storeName,e);n(null,i)}catch(i){if(r>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),y(t)})).then((function(){return function(t){f(t);for(var e=d[t.name],n=e.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return t.db=null,m(t).then((function(e){return t.db=e,b(t)?y(t):e})).then((function(r){t.db=e.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(e){throw g(t,e),e}))}(t).then((function(){E(t,e,n,r-1)}))})).catch(n);n(i)}}var S={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var i=d[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},d[n.name]=i),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=T);var o=[];function s(){return a.resolve()}for(var u=0;u<i.forages.length;u++){var l=i.forages[u];l!==e&&o.push(l._initReady().catch(s))}var c=i.forages.slice(0);return a.all(o).then((function(){return n.db=i.db,m(n)})).then((function(t){return n.db=t,b(n,e._defaultConfig.version)?y(n):t})).then((function(t){n.db=i.db=t,e._dbInfo=n;for(var r=0;r<c.length;r++){var o=c[r];o!==e&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!i||!i.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=new a((function(e,r){n.ready().then((function(){E(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;x(r)&&(r=w(r));var i=t(r,n.key,s++);void 0!==i?e(i):n.continue()}else e()},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},getItem:function(t,e){var n=this;t=l(t);var r=new a((function(e,r){n.ready().then((function(){E(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),x(t)&&(t=w(t)),e(t)},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},setItem:function(t,e,n){var r=this;t=l(t);var i=new a((function(n,i){var s;r.ready().then((function(){return s=r._dbInfo,"[object Blob]"===A.call(e)?function(t){return"boolean"==typeof h?a.resolve(h):(e=t,new a((function(t){var n=e.transaction("local-forage-detect-blob-support","readwrite"),r=o([""]);n.objectStore("local-forage-detect-blob-support").put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))).then((function(t){return h=t}));var e}(s.db).then((function(t){return t?e:(n=e,new a((function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){var r=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):e})).then((function(e){E(r._dbInfo,"readwrite",(function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var u=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=u.error?u.error:u.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return s(i,n),i},removeItem:function(t,e){var n=this;t=l(t);var r=new a((function(e,r){n.ready().then((function(){E(n._dbInfo,"readwrite",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){r(a.error)},o.onabort=function(){var t=a.error?a.error:a.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){E(e._dbInfo,"readwrite",(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){E(e._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).count();o.onsuccess=function(){t(o.result)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,r=new a((function(e,r){t<0?e(null):n.ready().then((function(){E(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,u=a.openKeyCursor();u.onsuccess=function(){var n=u.result;n?0===t||s?e(n.key):(s=!0,n.advance(t)):e(null)},u.onerror=function(){r(u.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){E(e._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var e=o.result;e?(a.push(e.key),e.continue()):t(a)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;if(t.name){var u=t.name===n.name&&o._dbInfo.db,l=u?a.resolve(o._dbInfo.db):m(t).then((function(e){var n=d[t.name],r=n.forages;n.db=e;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=e;return e}));r=t.storeName?l.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;f(t);var r=d[t.name],o=r.forages;e.close();for(var s=0;s<o.length;s++){var u=o[s];u._dbInfo.db=null,u._dbInfo.version=n}return new a((function(e,r){var o=i.open(t.name,n);o.onerror=function(t){o.result.close(),r(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,p(n._dbInfo)}})).catch((function(e){throw(g(t,e)||a.resolve()).catch((function(){})),e}))}})):l.then((function(e){f(t);var n=d[t.name],r=n.forages;e.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new a((function(e,n){var r=i.deleteDatabase(t.name);r.onerror=function(){var t=r.result;t&&t.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<r.length;e++)p(r[e]._dbInfo)})).catch((function(e){throw(g(t,e)||a.resolve()).catch((function(){})),e}))}))}else r=a.reject("Invalid arguments");return s(r,e),r}},M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=/^~~local_forage_type~([^~]+)~/,I=Object.prototype.toString;function N(t){var e,n,r,i,o,a=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),c=new Uint8Array(l);for(e=0;e<s;e+=4)n=M.indexOf(t[e]),r=M.indexOf(t[e+1]),i=M.indexOf(t[e+2]),o=M.indexOf(t[e+3]),c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&o;return l}function B(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=M[n[e]>>2],r+=M[(3&n[e])<<4|n[e+1]>>4],r+=M[(15&n[e+1])<<2|n[e+2]>>6],r+=M[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var k={serialize:function(t,e){var n="";if(t&&(n=I.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===I.call(t.buffer))){var r,i="__lfsc__:";t instanceof ArrayBuffer?(r=t,i+="arbf"):(r=t.buffer,"[object Int8Array]"===n?i+="si08":"[object Uint8Array]"===n?i+="ui08":"[object Uint8ClampedArray]"===n?i+="uic8":"[object Int16Array]"===n?i+="si16":"[object Uint16Array]"===n?i+="ur16":"[object Int32Array]"===n?i+="si32":"[object Uint32Array]"===n?i+="ui32":"[object Float32Array]"===n?i+="fl32":"[object Float64Array]"===n?i+="fl64":e(new Error("Failed to get type for BinaryArray"))),e(i+B(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+t.type+"~"+B(this.result);e("__lfsc__:blob"+n)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if("__lfsc__:"!==t.substring(0,9))return JSON.parse(t);var e,n=t.substring(13),r=t.substring(9,13);if("blob"===r&&C.test(n)){var i=n.match(C);e=i[1],n=n.substring(i[0].length)}var a=N(n);switch(r){case"arbf":return a;case"blob":return o([a],{type:e});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:N,bufferToString:B};function P(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function D(t,e,n,r,i,o){t.executeSql(n,r,i,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?o(t,a):P(t,e,(function(){t.executeSql(n,r,i,o)}),o)}),o):o(t,a)}),o)}function L(t,e,n,r){var i=this;t=l(t);var o=new a((function(o,a){i.ready().then((function(){void 0===e&&(e=null);var s=e,u=i._dbInfo;u.serializer.serialize(e,(function(e,l){l?a(l):u.db.transaction((function(n){D(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){o(s)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void o(L.apply(i,[t,s,n,r-1]));a(e)}}))}))})).catch(a)}));return s(o,n),o}function O(t){return new a((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);e({db:t,storeNames:i})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}var R={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var i=new a((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction((function(i){P(i,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=k,i},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,r=new a((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){D(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var u=o.item(s),l=u.value;if(l&&(l=i.serializer.deserialize(l)),void 0!==(l=t(l,u.key,s+1)))return void e(l)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},getItem:function(t,e){var n=this;t=l(t);var r=new a((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){D(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},setItem:function(t,e,n){return L.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=l(t);var r=new a((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){D(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){D(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){D(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,r=new a((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){D(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){D(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,i=this;return s(r=t.name?new a((function(e){var r;r=t.name===n.name?i._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(O(r))})).then((function(t){return new a((function(e,n){t.db.transaction((function(r){function i(t){return new a((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var o=[],s=0,u=t.storeNames.length;s<u;s++)o.push(i(t.storeNames[s]));a.all(o).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):a.reject("Invalid arguments"),e),r}};function F(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}var U={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=F(t,this._defaultConfig),!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0?(this._dbInfo=e,e.serializer=k,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var l=localStorage.getItem(u);if(l&&(l=e.serializer.deserialize(l)),void 0!==(l=t(l,u.substring(i),a++)))return l}}}));return s(r,e),r},getItem:function(t,e){var n=this;t=l(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return s(r,e),r},setItem:function(t,e,n){var r=this;t=l(t);var i=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new a((function(i,o){var a=r._dbInfo;a.serializer.serialize(e,(function(e,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+t,e),i(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return s(i,n),i},removeItem:function(t,e){var n=this;t=l(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return s(r,e),r},clear:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return s(n,t),n},length:function(t){var e=this.keys().then((function(t){return t.length}));return s(e,t),e},key:function(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return s(r,e),r},keys:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(t.keyPrefix)&&r.push(o.substring(t.keyPrefix.length))}return r}));return s(n,t),n},dropInstance:function(t,e){if(e=c.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return s(r=t.name?new a((function(e){t.storeName?e(F(t,i._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),e),r}},j=function(t,e){for(var n,r,i=t.length,o=0;o<i;){if((n=t[o])===(r=e)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;o++}return!1},z=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},H={},Q={},G={INDEXEDDB:S,WEBSQL:R,LOCALSTORAGE:U},V=[G.INDEXEDDB._driver,G.WEBSQL._driver,G.LOCALSTORAGE._driver],W=["dropInstance"],Y=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(W),X={description:"",driver:V.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function q(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function K(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(z(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var Z=new(function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),G)if(G.hasOwnProperty(n)){var r=G[n],i=r._driver;this[n]=i,H[i]||this.defineDriver(r)}this._defaultConfig=K({},X),this._config=K({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new a((function(e,n){try{var r=t._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(i);for(var o=Y.concat("_initStorage"),u=0,l=o.length;u<l;u++){var c=o[u];if((!j(W,c)||t[c])&&"function"!=typeof t[c])return void n(i)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=a.reject(e);return s(n,arguments[arguments.length-1]),n}},n=0,r=W.length;n<r;n++){var i=W[n];t[i]||(t[i]=e(i))}}();var h=function(n){H[r]&&console.info("Redefining LocalForage driver: "+r),H[r]=t,Q[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,n):h(!!t._support):h(!0)}catch(t){n(t)}}));return u(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=H[t]?a.resolve(H[t]):a.reject(new Error("Driver not found."));return u(r,e,n),r},t.prototype.getSerializer=function(t){var e=a.resolve(k);return u(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return u(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;z(t)||(t=[t]);var i=this._getSupportedDrivers(t);function o(){r._config.driver=r.driver()}function s(t){return r._extend(t),o(),r._ready=r._initStorage(r._config),r._ready}var l=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=l.then((function(){var t=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){var e;r._driver=t._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=(e=i,function(){var t=0;return function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(s).catch(n)}o();var u=new Error("No available storage method found.");return r._driverSet=a.reject(u),r._driverSet}()})}))})).catch((function(){o();var t=new Error("No available storage method found.");return r._driverSet=a.reject(t),r._driverSet})),u(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!Q[t]},t.prototype._extend=function(t){K(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=Y.length;t<e;t++)q(this,Y[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=Z},{3:3}]},{},[4])(4)}).call(this,n(17))},function(t,e,n){var r=n(14).Symbol;t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(148),i=n(149),o=n(150),a=n(151),s=n(152);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(36);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(22)(Object,"create");t.exports=r},function(t,e,n){var r=n(170);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(192),i=n(37),o=n(193),a=n(194),s=n(195),u=n(20),l=n(53),c=l(r),h=l(i),d=l(o),A=l(a),f=l(s),p=u;(r&&"[object DataView]"!=p(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=p(new i)||o&&"[object Promise]"!=p(o.resolve())||a&&"[object Set]"!=p(new a)||s&&"[object WeakMap]"!=p(new s))&&(p=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case h:return"[object Map]";case d:return"[object Promise]";case A:return"[object Set]";case f:return"[object WeakMap]"}return e}),t.exports=p},function(t,e,n){var r=n(66),i=n(67);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=o?o(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),a?i(n,l,c):r(n,l,c)}return n}},function(t,e,n){var r=n(20),i=n(21);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){(function(t){n.d(e,"a",(function(){return En}));var r=n(4),i=n(0),o=n(10),a=n(8),s=n(16),u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function l(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var c=l((function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=arguments,u=n?n+t:t;if(!this._events[u])return!1;var l,c,h=this._events[u],d=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,i),!0;case 5:return h.fn.call(h.context,e,r,i,o),!0;case 6:return h.fn.call(h.context,e,r,i,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=s[c];h.fn.apply(h.context,l)}else{var A,f=h.length;for(c=0;c<f;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),d){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,r);break;case 4:h[c].fn.call(h[c].context,e,r,i);break;default:if(!l)for(A=1,l=new Array(d-1);A<d;A++)l[A-1]=s[A];h[c].fn.apply(h[c].context,l)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})),h=l((function(t,e){!function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,o="object"==_(u)&&u;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var a,s,l=2147483647,c=/^xn--/,h=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function g(t){throw RangeError(A[t])}function v(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+v((t=t.replace(d,".")).split("."),e).join(".")}function y(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return v(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+p(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,n){var r=0;for(t=n?f(t/700):t>>1,t+=f(t/e);t>455;r+=36)t=f(t/35);return f(r+36*t/(t+38))}function T(t){var e,n,r,i,o,a,s,u,c,h,d,A=[],p=t.length,v=0,m=128,y=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&g("not-basic"),A.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<p;){for(o=v,a=1,s=36;i>=p&&g("invalid-input"),((u=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||u>f((l-v)/a))&&g("overflow"),v+=u*a,!(u<(c=s<=y?1:s>=y+26?26:s-y));s+=36)a>f(l/(h=36-c))&&g("overflow"),a*=h;y=x(v-o,e=A.length+1,0==o),f(v/e)>l-m&&g("overflow"),m+=f(v/e),v%=e,A.splice(v++,0,m)}return b(A)}function E(t){var e,n,r,i,o,a,s,u,c,h,d,A,v,m,b,_=[];for(A=(t=y(t)).length,e=128,n=0,o=72,a=0;a<A;++a)(d=t[a])<128&&_.push(p(d));for(r=i=_.length,i&&_.push("-");r<A;){for(s=l,a=0;a<A;++a)(d=t[a])>=e&&d<s&&(s=d);for(s-e>f((l-n)/(v=r+1))&&g("overflow"),n+=(s-e)*v,e=s,a=0;a<A;++a)if((d=t[a])<e&&++n>l&&g("overflow"),d==e){for(u=n,c=36;!(u<(h=c<=o?1:c>=o+26?26:c-o));c+=36)b=u-h,m=36-h,_.push(p(w(h+b%m,0))),u=f(b/m);_.push(p(w(u,0))),o=x(n,v,r==i),n=0,++r}++n,++e}return _.join("")}if(a={version:"1.3.2",ucs2:{decode:y,encode:b},decode:T,encode:E,toASCII:function(t){return m(t,(function(t){return h.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return m(t,(function(t){return c.test(t)?T(t.slice(4).toLowerCase()):t}))}},r&&i)if(t.exports==r)i.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(u)})),d=function(t){return"string"==typeof t},A=function(t){return"object"==_(t)&&null!==t},f=function(t){return null===t};function p(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var g=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var l,c,h,d,A=t[u].replace(o,"%20"),f=A.indexOf(n);f>=0?(l=A.substr(0,f),c=A.substr(f+1)):(l=A,c=""),h=decodeURIComponent(l),d=decodeURIComponent(c),p(i,h)?Array.isArray(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i},v=function(t){switch(_(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},m=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==_(t)?Object.keys(t).map((function(r){var i=encodeURIComponent(v(r))+n;return Array.isArray(t[r])?t[r].map((function(t){return i+encodeURIComponent(v(t))})).join(e):i+encodeURIComponent(v(t[r]))})).join(e):r?encodeURIComponent(v(r))+n+encodeURIComponent(v(t)):""},y=l((function(t,e){e.decode=e.parse=g,e.encode=e.stringify=m})),b=L;function w(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var x=/^([a-z0-9.+-]+:)/i,T=/:[0-9]*$/,E=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,S=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),M=["'"].concat(S),C=["%","/","?",";","#"].concat(M),I=["/","?","#"],N=/^[+a-z0-9A-Z_-]{0,63}$/,B=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},P={javascript:!0,"javascript:":!0},D={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function L(t,e,n){if(t&&A(t)&&t instanceof w)return t;var r=new w;return r.parse(t,e,n),r}w.prototype.parse=function(t,e,n){if(!d(t))throw new TypeError("Parameter 'url' must be a string, not "+_(t));var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(i);if(a=a.trim(),!n&&1===t.split("#").length){var s=E.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=x.exec(a);if(u){var l=(u=u[0]).toLowerCase();this.protocol=l,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===a.substr(0,2);!c||u&&P[u]||(a=a.substr(2),this.slashes=!0)}if(!P[u]&&(c||u&&!D[u])){for(var A,f,p=-1,g=0;g<I.length;g++)-1!==(v=a.indexOf(I[g]))&&(-1===p||v<p)&&(p=v);for(-1!==(f=-1===p?a.lastIndexOf("@"):a.lastIndexOf("@",p))&&(A=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(A)),p=-1,g=0;g<C.length;g++){var v;-1!==(v=a.indexOf(C[g]))&&(-1===p||v<p)&&(p=v)}-1===p&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var b=this.hostname.split(/\./),w=(g=0,b.length);g<w;g++){var T=b[g];if(T&&!T.match(N)){for(var S="",L=0,O=T.length;L<O;L++)T.charCodeAt(L)>127?S+="x":S+=T[L];if(!S.match(N)){var R=b.slice(0,g),F=b.slice(g+1),U=T.match(B);U&&(R.push(U[1]),F.unshift(U[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=h.toASCII(this.hostname));var j=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+j,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!k[l])for(g=0,w=M.length;g<w;g++){var H=M[g];if(-1!==a.indexOf(H)){var Q=encodeURIComponent(H);Q===H&&(Q=escape(H)),a=a.split(H).join(Q)}}var G=a.indexOf("#");-1!==G&&(this.hash=a.substr(G),a=a.slice(0,G));var V=a.indexOf("?");if(-1!==V?(this.search=a.substr(V),this.query=a.substr(V+1),e&&(this.query=y.parse(this.query)),a=a.slice(0,V)):e&&(this.search="",this.query={}),a&&(this.pathname=a),D[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var W=this.search||"";this.path=j+W}return this.href=this.format(),this},w.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&A(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||D[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},w.prototype.resolve=function(t){return this.resolveObject(L(t,!1,!0)).format()},w.prototype.resolveObject=function(t){if(d(t)){var e=new w;e.parse(t,!1,!0),t=e}for(var n=new w,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(n[u]=t[u])}return D[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!D[t.protocol]){for(var l=Object.keys(t),c=0;c<l.length;c++){var h=l[c];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||P[t.protocol])n.pathname=t.pathname;else{for(var A=(t.pathname||"").split("/");A.length&&!(t.host=A.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==A[0]&&A.unshift(""),A.length<2&&A.unshift(""),n.pathname=A.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",g=n.search||"";n.path=p+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=m||v||n.host&&t.pathname,b=y,x=n.pathname&&n.pathname.split("/")||[],_=(A=t.pathname&&t.pathname.split("/")||[],n.protocol&&!D[n.protocol]);if(_&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===A[0]?A[0]=t.host:A.unshift(t.host)),t.host=null),y=y&&(""===A[0]||""===x[0])),m)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,x=A;else if(A.length)x||(x=[]),x.pop(),x=x.concat(A),n.search=t.search,n.query=t.query;else if(!function(t){return null==t}(t.search))return _&&(n.hostname=n.host=x.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),n.search=t.search,n.query=t.query,f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=x.slice(-1)[0],E=(n.host||t.host||x.length>1)&&("."===T||".."===T)||""===T,S=0,M=x.length;M>=0;M--)"."===(T=x[M])?x.splice(M,1):".."===T?(x.splice(M,1),S++):S&&(x.splice(M,1),S--);if(!y&&!b)for(;S--;S)x.unshift("..");!y||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),E&&"/"!==x.join("/").substr(-1)&&x.push("");var C,I=""===x[0]||x[0]&&"/"===x[0].charAt(0);return _&&(n.hostname=n.host=I?"":x.length?x.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),(y=y||n.host&&x.length)&&!I&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),f(n.pathname)&&f(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},w.prototype.parseHost=function(){var t=this.host,e=T.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};
/*!
 * @pixi/utils - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var O={parse:b,format:function(t){return d(t)&&(t=L(t)),t instanceof w?t.format():w.prototype.format.call(t)},resolve:function(t,e){return L(t,!1,!0).resolve(e)}};r.b.RETINA_PREFIX=/@([0-9\.]+)x/,r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var R,F=!1,U=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[i.b.NORMAL_NPM]=i.b.NORMAL,t[i.b.ADD_NPM]=i.b.ADD,t[i.b.SCREEN_NPM]=i.b.SCREEN,e[i.b.NORMAL]=i.b.NORMAL_NPM,e[i.b.ADD]=i.b.ADD_NPM,e[i.b.SCREEN]=i.b.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function j(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}function z(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function H(t){return!(t&t-1||!t)}function Q(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}var G=0;function V(){return++G}var W={};function Y(t,e,n){if(void 0===n&&(n=3),!W[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),W[e]=!0}}var X,q={},K=Object.create(null),Z=Object.create(null);function J(t,e){var n=r.b.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}
/*!
 * @pixi/runner - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */!function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||r.b.RESOLUTION,this.resize(t,e)}t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0})}();var $,tt,et=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,l=u.name,c=u.items;this._aliasCount++;for(var h=0,d=c.length;h<d;h++)c[h][l](t,e,n,r,i,o,a,s);return c===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(et.prototype,{dispatch:{value:et.prototype.emit},run:{value:et.prototype.emit}}),r.b.TARGET_FPMS=.06,(tt=$||($={}))[tt.INTERACTION=50]="INTERACTION",tt[tt.HIGH=25]="HIGH",tt[tt.NORMAL=0]="NORMAL",tt[tt.LOW=-25]="LOW",tt[tt.UTILITY=-50]="UTILITY";var nt,rt=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=n,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),it=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new rt(null,null,1/0),this.deltaMS=1/r.b.TARGET_FPMS,this.elapsedMS=1/r.b.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=$.NORMAL),this._addListener(new rt(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=$.NORMAL),this._addListener(new rt(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*r.b.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,r.b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),ot=2*Math.PI;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(nt||(nt={}));var at=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),st=[new at,new at,new at,new at],ut=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(r),this.type=nt.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.intersects=function(t,e){if(!e){var n=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=n)return!1;var r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}var i=this.left,o=this.right,a=this.top,s=this.bottom;if(o<=i||s<=a)return!1;var u=st[0].set(t.left,t.top),l=st[1].set(t.left,t.bottom),c=st[2].set(t.right,t.top),h=st[3].set(t.right,t.bottom);if(c.x<=u.x||l.y<=u.y)return!1;var d=Math.sign(e.a*e.d-e.b*e.c);if(0===d||(e.apply(u,u),e.apply(l,l),e.apply(c,c),e.apply(h,h),Math.max(u.x,l.x,c.x,h.x)<=i||Math.min(u.x,l.x,c.x,h.x)>=o||Math.max(u.y,l.y,c.y,h.y)<=a||Math.min(u.y,l.y,c.y,h.y)>=s))return!1;var A=d*(l.y-u.y),f=d*(u.x-l.x),p=A*i+f*a,g=A*o+f*a,v=A*i+f*s,m=A*o+f*s;if(Math.max(p,g,v,m)<=A*u.x+f*u.y||Math.min(p,g,v,m)>=A*h.x+f*h.y)return!1;var y=d*(u.y-c.y),b=d*(c.x-u.x),w=y*i+b*a,x=y*o+b*a,_=y*i+b*s,T=y*o+b*s;return!(Math.max(w,x,_,T)<=y*u.x+b*u.y||Math.min(w,x,_,T)>=y*h.x+b*h.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(i-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=r,this.height=i-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),lt=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),ct=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new at;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new at;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=t.pivot,a=-Math.atan2(-r,i),s=Math.atan2(n,e),u=Math.abs(a+s);return u<1e-5||Math.abs(ot-u)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=s),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*n+o.y*i),t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),ht=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],dt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],At=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ft=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],pt=[],gt=[],vt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];pt.push(e);for(var n=0;n<16;n++)for(var r=vt(ht[t]*ht[n]+At[t]*dt[n]),i=vt(dt[t]*ht[n]+ft[t]*dt[n]),o=vt(ht[t]*At[n]+At[t]*ft[n]),a=vt(dt[t]*At[n]+ft[t]*ft[n]),s=0;s<16;s++)if(ht[s]===r&&dt[s]===i&&At[s]===o&&ft[s]===a){e.push(s);break}}for(t=0;t<16;t++){var u=new ct;u.set(ht[t],dt[t],At[t],ft[t],0,0),gt.push(u)}}();var mt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return ht[t]},uY:function(t){return dt[t]},vX:function(t){return At[t]},vY:function(t){return ft[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return pt[t][e]},sub:function(t,e){return pt[t][mt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?mt.S:mt.N:2*Math.abs(e)<=Math.abs(t)?t>0?mt.E:mt.W:e>0?t>0?mt.SE:mt.SW:t>0?mt.NE:mt.NW},matrixAppendRotationInv:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=gt[mt.inv(e)];i.tx=n,i.ty=r,t.append(i)}};(function(){function t(){this.worldTransform=new ct,this.localTransform=new ct,this.position=new lt(this.onChange,this,0,0),this.scale=new lt(this.onChange,this,1,1),this.pivot=new lt(this.onChange,this,0,0),this.skew=new lt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t})(),r.b.PREFER_ENV=r.a.any?i.g.WEBGL:i.g.WEBGL2,r.b.STRICT_TEXTURE_CACHE=!1;var yt=[];function bt(t,e){if(!t)return null;var n="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(var i=yt.length-1;i>=0;--i){var o=yt[i];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var wt=function(t,e){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function xt(t,e){function n(){this.constructor=t}wt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var _t=function(){return(_t=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Tt=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new et("setRealSize"),this.onUpdate=new et("update"),this.onError=new et("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),Et=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,a)||this).data=e,r}return xt(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(Tt),St={scaleMode:i.p.NEAREST,format:i.h.RGBA,alphaMode:i.a.NPM},Mt=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var o=t.call(this)||this,a=(n=n||{}).alphaMode,s=n.mipmap,u=n.anisotropicLevel,l=n.scaleMode,c=n.width,h=n.height,d=n.wrapMode,A=n.format,f=n.type,p=n.target,g=n.resolution,v=n.resourceOptions;return!e||e instanceof Tt||((e=bt(e,v)).internal=!0),o.resolution=g||r.b.RESOLUTION,o.width=Math.round((c||0)*o.resolution)/o.resolution,o.height=Math.round((h||0)*o.resolution)/o.resolution,o._mipmap=void 0!==s?s:r.b.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==u?u:r.b.ANISOTROPIC_LEVEL,o._wrapMode=d||r.b.WRAP_MODE,o._scaleMode=void 0!==l?l:r.b.SCALE_MODE,o.format=A||i.h.RGBA,o.type=f||i.r.UNSIGNED_BYTE,o.target=p||i.q.TEXTURE_2D,o.alphaMode=void 0!==a?a:i.a.UNPACK,o.uid=V(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=c>0&&h>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(e),o}return xt(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=H(this.realWidth)&&H(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Z[this.cacheId],delete K[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,i){void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else{if(!t._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+V()}a=t._pixiId}var u=Z[a];if(o&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return u||((u=new e(t,n)).cacheId=a,e.addToCache(u,a)),u},e.fromBuffer=function(t,n,r,o){t=t||new Float32Array(n*r*4);var a=new Et(t,{width:n,height:r}),s=t instanceof Float32Array?i.r.FLOAT:i.r.UNSIGNED_BYTE;return new e(a,Object.assign(St,o||{width:n,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Z[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Z[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=Z[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Z[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete Z[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(c),Ct=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;(r=t.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<e;s++){var u=new Mt;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return xt(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof Tt?this.addResourceAt(t[n],n):this.addResourceAt(bt(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],n=e.realWidth,r=e.realHeight;return t.resize(n,r),Promise.resolve(t)})),this._load},e}(Tt),It=function(t){function e(e,n){var r,i,o=this,a=n||{},s=a.width,u=a.height;return Array.isArray(e)?(r=e,i=e.length):i=e,o=t.call(this,i,{width:s,height:u})||this,r&&o.initFromArray(r,n),o}return xt(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var r=this.length,i=this.itemDirtyIds,o=this.items,a=t.gl;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,e.format,n.type,null);for(var s=0;s<r;s++){var u=o[s];i[s]<u.dirtyId&&(i[s]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,s,u.resource.width,u.resource.height,1,e.format,n.type,u.resource.source))}return!0},e}(Ct),Nt=function(t){function e(e){var n=this,r=e,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=t.call(this,i,o)||this).source=e,n.noSubImage=!1,n}return xt(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,X||(X=document.createElement("a")),X.href=t;var n=O.parse(X.href),r=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&r&&n.protocol===e.protocol?"":"anonymous"}(e):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,r){var o=t.gl,a=e.realWidth,s=e.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||n.width!==a||n.height!==s?(n.width=a,n.height=s,o.texImage2D(e.target,0,n.internalFormat,e.format,n.type,r)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,n.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Tt),Bt=function(t){function e(e){return t.call(this,e)||this}return xt(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(Nt),kt=function(t){function e(n,r){var o=this,a=r||{},s=a.width,u=a.height,l=a.autoLoad,c=a.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");o=t.call(this,6,{width:s,height:u})||this;for(var h=0;h<e.SIDES;h++)o.items[h].target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+h;return o.linkBaseTexture=!1!==c,n&&o.initFromArray(n,r),!1!==l&&o.load(),o}return xt(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,r){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,r),i[o]=a.dirtyId):i[o]<-1&&(t.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(Ct),Pt=function(t){function e(e,n){var i=this;if(n=n||{},!(e instanceof HTMLImageElement)){var o=new Image;Nt.crossOrigin(o,e,n.crossorigin),o.src=e,e=o}return i=t.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==n.createBitmap?n.createBitmap:r.b.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,i.bitmap=null,i._load=null,!1!==n.autoLoad&&i.load(),i}return xt(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,n){var r=e.source;e.url=r.src;var i=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return n(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===i.a.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(Nt),Dt=function(t){function e(e,n){var r=this;return n=n||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return xt(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;Nt.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/r*n,o=t._overrideHeight||t._overrideWidth/n*r),i=Math.round(i),o=Math.round(o);var a=t.source;a.width=i,a.height=o,a._pixiId="canvas_"+V(),a.getContext("2d").drawImage(e,0,0,n,r,0,0,i,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return"svg"===n||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Nt),Lt=function(t){function e(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var a=n[0].src||n[0];Nt.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),l=n[s],c=l.src,h=l.mime,d=(c=c||n[s]).split("?").shift().toLowerCase(),A=d.slice(d.lastIndexOf(".")+1);h=h||e.MIME_TYPES[A]||"video/"+A,u.src=c,u.type=h,o.appendChild(u)}n=o}return(i=t.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return xt(e,t),e.prototype.update=function(e){if(!this.destroyed){var n=it.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){t.valid?n(t):(t._resolve=n,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(it.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(it.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(it.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(it.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(it.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Nt),Ot=function(t){function e(e){return t.call(this,e)||this}return xt(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&t instanceof ImageBitmap},e}(Nt);yt.push(Pt,Ot,Bt,Lt,Dt,Et,kt,It);var Rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xt(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e}(Et),Ft=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new et("disposeFramebuffer"),this.multisample=i.l.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new Mt(null,{scaleMode:i.p.NEAREST,resolution:1,mipmap:i.k.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Mt(new Rt(null,{width:this.width,height:this.height}),{scaleMode:i.p.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:i.k.OFF,format:i.h.DEPTH_COMPONENT,type:i.r.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(t/i,e/i)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(t/i,e/i))}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),Ut=function(t){function e(e){void 0===e&&(e={});var n=this;if("number"==typeof e){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e={width:r,height:o,scaleMode:a,resolution:s}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:i.l.NONE,(n=t.call(this,null,e)||this).mipmap=i.k.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new Ft(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=e.multisample,n.maskStack=[],n.filterStack=[{}],n}return xt(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Mt),jt=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var o=t.width/2/r,a=t.height/2/i,s=t.x/r+o,u=t.y/i+a;n=mt.add(n,mt.NW),this.x0=s+o*mt.uX(n),this.y0=u+a*mt.uY(n),n=mt.add(n,2),this.x1=s+o*mt.uX(n),this.y1=u+a*mt.uY(n),n=mt.add(n,2),this.x2=s+o*mt.uX(n),this.y2=u+a*mt.uY(n),n=mt.add(n,2),this.x3=s+o*mt.uX(n),this.y3=u+a*mt.uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),zt=new jt;function Ht(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var Qt=function(t){function e(n,r,i,o,a,s){var u=t.call(this)||this;if(u.noFrame=!1,r||(u.noFrame=!0,r=new ut(0,0,1,1)),n instanceof e&&(n=n.baseTexture),u.baseTexture=n,u._frame=r,u.trim=o,u.valid=!1,u._uvs=zt,u.uvMatrix=null,u.orig=i||r,u._rotate=Number(a||0),!0===a)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=s?new at(s.x,s.y):new at(0,0),u._updateID=0,u.textureCacheIds=[],n.valid?u.noFrame?n.valid&&u.onBaseTextureUpdated(n):u.frame=r:n.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&n.on("update",u.onBaseTextureUpdated,u),u}return xt(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&K[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===zt&&(this._uvs=new jt),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else if(t instanceof Mt){if(!t.cacheId){var s=n&&n.pixiIdPrefix||"pixiid";t.cacheId=s+"-"+V(),Mt.addToCache(t,t.cacheId)}a=t.cacheId}else t._pixiId||(s=n&&n.pixiIdPrefix||"pixiid",t._pixiId=s+"_"+V()),a=t._pixiId;var u=K[a];if(o&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return u||t instanceof Mt?!u&&t instanceof Mt&&(u=new e(t),e.addToCache(u,a)):(n.resolution||(n.resolution=J(t)),(u=new e(new Mt(t,n))).baseTexture.cacheId=a,Mt.addToCache(u.baseTexture,a),e.addToCache(u,a)),u},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=e.from(t,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},e.fromBuffer=function(t,n,r,i){return new e(Mt.fromBuffer(t,n,r,i))},e.fromLoader=function(t,n,i,o){var a=new Mt(t,Object.assign({scaleMode:r.b.SCALE_MODE,resolution:J(n)},o)),s=a.resource;s instanceof Pt&&(s.url=n);var u=new e(a);return i||(i=n),Mt.addToCache(u.baseTexture,i),e.addToCache(u,i),i!==n&&(Mt.addToCache(u.baseTexture,n),e.addToCache(u,n)),u.baseTexture.valid?Promise.resolve(u):new Promise((function(t){u.baseTexture.once("loaded",(function(){return t(u)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),K[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),K[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=K[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete K[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)K[t.textureCacheIds[r]]===t&&delete K[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+l)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new Mt),Ht(e._EMPTY),Ht(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=16,t.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),e._WHITE=new e(new Mt(new Bt(t))),Ht(e._WHITE),Ht(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(c),Gt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return xt(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"==typeof t&&(Y("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new Ut(t))},e}(Qt),Vt=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,n){void 0===n&&(n=i.l.NONE);var r=new Ut(Object.assign({width:t,height:e,resolution:1,multisample:n},this.textureOptions));return new Gt(r)},t.prototype.getOptimalTexture=function(t,e,n,r){var o;void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),t=Math.ceil(t*n-1e-6),e=Math.ceil(e*n-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?o=r>1?-r:-1:(o=((65535&(t=z(t)))<<16|65535&(e=z(e)))>>>0,r>1&&(o+=4294967296*r)),this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(t,e,r)),a.filterPoolKey=o,a.setResolution(n),a},t.prototype.getFilterTexture=function(t,e,n){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),Wt=function(){function t(t,e,n,r,o,a,s){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=i.r.FLOAT),this.buffer=t,this.size=e,this.normalized=n,this.type=r,this.stride=o,this.start=a,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,r,i,o){return new t(e,n,r,i,o)},t}(),Yt=0,Xt=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=Yt++,this.disposeRunner=new et("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===i.d.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?i.d.ELEMENT_ARRAY_BUFFER:i.d.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),qt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},Kt={5126:4,5123:2,5121:1},Zt=0,Jt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},$t=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Zt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new et("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,r,i,o,a,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Xt||(e instanceof Array&&(e=new Float32Array(e)),e=new Xt(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,n,r,i);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new Wt(c,n,r,i,o,a,s),this.instanced=this.instanced||s,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof Xt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Xt(t)),t.type=i.d.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],r=new Xt;for(t in this.attributes){var i=this.attributes[t],o=this.buffers[i.buffer];e.push(o.data),n.push(i.size*Kt[i.type]/4),i.buffer=0}for(r.data=function(t,e){for(var n=0,r=0,i={},o=0;o<t.length;o++)r+=e[o],n+=t[o].length;var a=new ArrayBuffer(4*n),s=null,u=0;for(o=0;o<t.length;o++){var l=e[o],c=t[o],h=j(c);i[h]||(i[h]=new qt[h](a)),s=i[h];for(var d=0;d<c.length;d++)s[(d/l|0)*r+u+d%l]=c[d];u+=l}return new Float32Array(a)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new Xt(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];e.attributes[n]=new Wt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var n,r=new t,o=[],a=[],s=[],u=0;u<e.length;u++){n=e[u];for(var l=0;l<n.buffers.length;l++)a[l]=a[l]||0,a[l]+=n.buffers[l].data.length,s[l]=0}for(u=0;u<n.buffers.length;u++)o[u]=new(Jt[j(n.buffers[u].data)])(a[u]),r.buffers[u]=new Xt(o[u]);for(u=0;u<e.length;u++)for(n=e[u],l=0;l<n.buffers.length;l++)o[l].set(n.buffers[l].data,s[l]),s[l]+=n.buffers[l].data.length;if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER;var c=0,h=0,d=0,A=0;for(u=0;u<n.buffers.length;u++)if(n.buffers[u]!==n.indexBuffer){A=u;break}for(var u in n.attributes){var f=n.attributes[u];(0|f.buffer)===A&&(h+=f.size*Kt[f.type]/4)}for(u=0;u<e.length;u++){var p=e[u].indexBuffer.data;for(l=0;l<p.length;l++)r.indexBuffer.data[l+d]+=c;c+=e[u].buffers[A].data.length/h,d+=p.length}}return r},t}(),te=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return xt(e,t),e}($t),ee=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Xt(e.vertices),e.uvBuffer=new Xt(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return xt(e,t),e.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}($t),ne=0,re=function(){function t(t,e,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ne++,this.static=!!e,this.ubo=!!n,t instanceof Xt?(this.buffer=t,this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Xt(new Float32Array(1)),this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(n,r)},t.from=function(e,n,r){return new t(e,n,r)},t.uboFrom=function(e,n){return new t(e,null==n||n,!0)},t}(),ie=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=i.l.NONE,this.sourceFrame=new ut,this.destinationFrame=new ut,this.bindingSourceFrame=new ut,this.bindingDestinationFrame=new ut,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),oe=[new at,new at,new at,new at],ae=new ct,se=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Vt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new te,this.quadUv=new ee,this.tempRect=new ut,this.activeState={},this.globalUniforms=new re({outputFrame:new ut,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var n,r,i=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new ie,s=this.renderer.renderTexture,u=e[0].resolution,l=e[0].multisample,c=e[0].padding,h=e[0].autoFit,d=null===(n=e[0].legacy)||void 0===n||n,A=1;A<e.length;A++){var f=e[A];u=Math.min(u,f.resolution),l=Math.min(l,f.multisample),c=this.useMaxPadding?Math.max(c,f.padding):c+f.padding,h=h&&f.autoFit,d=d||null===(r=f.legacy)||void 0===r||r}1===o.length&&(this.defaultFilterStack[0].renderTexture=s.current),o.push(a),a.resolution=u,a.multisample=l,a.legacy=d,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(c);var p=this.tempRect.copyFrom(s.sourceFrame);i.projection.transform&&this.transformAABB(ae.copyFrom(i.projection.transform).invert(),p),h?(a.sourceFrame.fit(p),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(p)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,u,l),a.filters=e,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=a.sourceFrame.width,g.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(s.sourceFrame),a.bindingDestinationFrame.copyFrom(s.destinationFrame),a.transform=i.projection.transform,i.projection.transform=null,s.bind(a.renderTexture,a.sourceFrame,g),i.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var o=r.inputSize,a=r.inputPixel,s=r.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*e.resolution),a[1]=Math.round(o[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=e.sourceFrame.width*o[2]-.5*a[2],s[3]=e.sourceFrame.height*o[3]-.5*a[3],e.legacy){var u=r.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,l.renderTexture,i.e.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var c=e.renderTexture,h=this.getOptimalFilterTexture(c.width,c.height,e.resolution);h.filterFrame=c.filterFrame;var d=0;for(d=0;d<n.length-1;++d){1===d&&e.multisample>1&&((h=this.getOptimalFilterTexture(c.width,c.height,e.resolution)).filterFrame=c.filterFrame),n[d].apply(this,c,h,i.e.CLEAR,e);var A=c;c=h,h=A}n[d].apply(this,c,l.renderTexture,i.e.BLEND,e),d>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=i.e.CLEAR);var n=this.renderer,r=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,r.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=1&o.stateId||this.forceClear;(e===i.e.CLEAR||e===i.e.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,n,r){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(i.f.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(i.f.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=e._texture.orig,a=t.set(i.width,0,0,i.height,r.x,r.y),s=e.worldTransform.copyTo(ct.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(e.anchor.x,e.anchor.y),a},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,n,r){return void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),this.texturePool.getOptimalTexture(t,e,n,r)},t.prototype.getFilterTexture=function(t,e,n){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return o.filterFrame=t.filterFrame,o},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var n=oe[0],r=oe[1],i=oe[2],o=oe[3];n.set(e.left,e.top),r.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(n,n),t.apply(r,r),t.apply(i,i),t.apply(o,o);var a=Math.min(n.x,r.x,i.x,o.x),s=Math.min(n.y,r.y,i.y,o.y),u=Math.max(n.x,r.x,i.x,o.x),l=Math.max(n.y,r.y,i.y,o.y);e.x=a,e.y=s,e.width=u-a,e.height=l-s},t.prototype.roundFrame=function(t,e,n,r,i){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(i){var o=i.a,a=i.b,s=i.c,u=i.d;if((Math.abs(a)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(i=i?ae.copyFrom(i):ae.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}},t}(),ue=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),le=function(){function t(t){this.renderer=t,this.emptyRenderer=new ue(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,n,r){for(var i=t.elements,o=t.ids,a=t.count,s=0,u=0;u<a;u++){var l=i[u],c=l._batchLocation;if(c>=0&&c<r&&e[c]===l)o[u]=c;else for(;s<r;){var h=e[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[u]=s,l._batchLocation=s,e[s]=l;break}s++}}},t.prototype.destroy=function(){this.renderer=null},t}(),ce=0,he=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ce++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ce++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var n;if(r.b.PREFER_ENV>=i.g.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),de=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=i.l.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},Ae=new ut,fe=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Ft(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ut,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,n){void 0===n&&(n=0);var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=n),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var s=e.width>>n,u=e.height>>n,l=s/e.width;this.setViewport(e.x*l,e.y*l,s,u)}else s=t.width>>n,u=t.height>>n,this.setViewport(0,0,s,u)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,n,r){var i=this.viewport;t=Math.round(t),e=Math.round(e),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=n,i.height=r,this.gl.viewport(t,e,n,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,n,r,o){void 0===o&&(o=i.c.COLOR|i.c.DEPTH);var a=this.gl;a.clearColor(t,e,n,r),a.clear(o)},t.prototype.initFramebuffer=function(t){var e=this.gl,n=new de(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height)),n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),n.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,i=r.length;e.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var a=r[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var n=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],s=0;s<o;s++){var u=i[s],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),0===s&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,u.target,l._glTextures[this.CONTEXT_UID].texture,e),a.push(n.COLOR_ATTACHMENT0+s))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){var c=t.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,n=i.l.NONE;if(t<=1||null===e)return n;for(var r=0;r<e.length;r++)if(e[r]<=t){n=e[r];break}return 1===n&&(n=i.l.NONE),n},t.prototype.blit=function(t,e,n){var r=this.current,i=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2===i.context.webGLVersion&&r){var s=r.glFramebuffers[a];if(s){if(!t){if(!s.msaaBuffer)return;var u=r.colorTextures[0];if(!u)return;s.blitFramebuffer||(s.blitFramebuffer=new Ft(r.width,r.height),s.blitFramebuffer.addColorTexture(0,u)),(t=s.blitFramebuffer).colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=Ae).width=r.width,e.height=r.height),n||(n=e);var l=e.width===n.width&&e.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var n=t.width,r=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ut},t.prototype.destroy=function(){this.renderer=null},t}(),pe={5126:4,5123:2,5121:1},ge=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,r,i){return o.drawElementsInstancedANGLE(t,e,n,r,i)},t.drawArraysInstanced=function(t,e,n,r){return o.drawArraysInstancedANGLE(t,e,n,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,n=0;n<t.buffers.length;n++){var r=t.buffers[n];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var n=t.attributes,r=e.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(t,e){var n=t.attributes,r=e.attributeData,i=["g",t.id];for(var o in n)r[o]&&i.push(o,r[o].location);return i.join("-")},t.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);var s=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[s];if(l)return u[a.id]=l,l;var c=t.buffers,h=t.attributes,d={},A={};for(var f in c)d[f]=0,A[f]=0;for(var f in h)!h[f].size&&a.attributeData[f]?h[f].size=a.attributeData[f].size:h[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[h[f].buffer]+=h[f].size*pe[h[f].type];for(var f in h){var p=h[f],g=p.size;void 0===p.stride&&(d[p.buffer]===g*pe[p.type]?p.stride=0:p.stride=d[p.buffer]),void 0===p.start&&(p.start=A[p.buffer],A[p.buffer]+=g*pe[p.type])}l=r.createVertexArray(),r.bindVertexArray(l);for(var v=0;v<c.length;v++){var m=c[v];o.bind(m),n&&m._glBuffers[i].refCount++}return this.activateVao(t,a),this._activeVao=l,u[a.id]=l,u[s]=l,l},t.prototype.disposeGeometry=function(t,e){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=t.buffers,a=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(t.disposeRunner.remove(this),r){if(a)for(var s=0;s<o.length;s++){var u=o[s]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||e||a.dispose(o[s],e))}if(!e)for(var l in r)if("g"===l[0]){var c=r[l];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t)},t.prototype.activateVao=function(t,e){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);var s=null;for(var u in a){var l=a[u],c=o[l.buffer],h=c._glBuffers[r];if(e.attributeData[u]){s!==h&&(i.bind(c),s=h);var d=e.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,l.size,l.type||n.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,1)}}}},t.prototype.draw=function(t,e,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(t,e||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,n,e||o.getSize(),r||1):i.drawArrays(t,n,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),ve=function(){function t(t){void 0===t&&(t=null),this.type=i.j.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.b.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=i.j.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function me(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function ye(t,e){var n=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),i=r.split("\n"),o={},a=i.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t]||(o[t]=!0,0))})),s=[""];a.forEach((function(t){n[t-1]="%c"+n[t-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=n.join("\n");s[0]=u,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function be(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function we(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return be(2*e);case"bvec3":return be(3*e);case"bvec4":return be(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var xe,_e={},Te=_e;function Ee(t,e,n){if("precision"!==t.substring(0,9)){var r=e;return e===i.m.HIGH&&n!==i.m.HIGH&&(r=i.m.MEDIUM),"precision "+r+" float;\n"+t}return n!==i.m.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Se={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Me(t){return Se[t]}var Ce=null,Ie={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ne(t,e){if(!Ce){var n=Object.keys(Ie);Ce={};for(var r=0;r<n.length;++r){var i=n[r];Ce[t[i]]=Ie[i]}}return Ce[e]}var Be,ke=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Pe={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},De={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Le=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Oe(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}var Re=0,Fe={},Ue=function(){function t(e,n,o){void 0===o&&(o="pixi-shader"),this.id=Re++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),Fe[o]?(Fe[o]++,o+="-"+Fe[o]):Fe[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=Ee(this.vertexSrc,r.b.PRECISION_VERTEX,i.m.HIGH),this.fragmentSrc=Ee(this.fragmentSrc,r.b.PRECISION_FRAGMENT,function(){if(!xe){xe=i.m.MEDIUM;var t=function(){if(Te===_e||Te&&Te.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.b.PREFER_ENV>=i.g.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Te=e}return Te}();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);xe=e.precision?i.m.HIGH:i.m.MEDIUM}}return xe}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,r){var i=e+n,o=q[i];return o||(q[i]=o=new t(e,n,r)),o},t}(),je=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof re?e:new re(e):new re({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var r=e.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,r){return new t(Ue.from(e,n),r)},t}(),ze=function(){function t(){this.data=0,this.blendMode=i.b.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==i.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),He=function(t){function e(n,i,o){var a=this,s=Ue.from(n||e.defaultVertexSrc,i||e.defaultFragmentSrc);return(a=t.call(this,s,o)||this).padding=0,a.resolution=r.b.FILTER_RESOLUTION,a.multisample=r.b.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new ze,a}return xt(e,t),e.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(je),Qe=new ct,Ge=function(){function t(t,e){this._texture=t,this.mapCoord=new ct,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(Qe.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Qe));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+s+u)/o.width,a[1]=(e._frame.y+s+u)/o.height,a[2]=(e._frame.x+e._frame.width-s+u)/o.width,a[3]=(e._frame.y+e._frame.height-s+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Ve=function(t){function e(e,n,r){var i=this,o=null;return"string"!=typeof e&&void 0===n&&void 0===r&&(o=e,e=void 0,n=void 0,r=void 0),(i=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,i.maskMatrix=new ct,i}return xt(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,n,r){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Ge(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,r))},e}(He),We=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var r=this.maskDataPool.pop()||new ve;r.pooled=!0,r.maskObject=e,n=r}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n.autoDetect&&this.detect(n),n._target=t,n.type!==i.j.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case i.j.SCISSOR:this.renderer.scissor.push(n);break;case i.j.STENCIL:this.renderer.stencil.push(n);break;case i.j.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===i.j.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case i.j.SCISSOR:this.renderer.scissor.pop();break;case i.j.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case i.j.SPRITE:this.popSpriteMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===i.j.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(t){t.maskObject.isSprite?t.type=i.j.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=i.j.SCISSOR:t.type=i.j.STENCIL},t.prototype.pushSpriteMask=function(t){var e,n,r=t.maskObject,i=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Ve]);var a,s,u=this.renderer,l=u.renderTexture;if(l.current){var c=l.current;a=t.resolution||c.resolution,s=null!==(e=t.multisample)&&void 0!==e?e:c.multisample}else a=t.resolution||u.resolution,s=null!==(n=t.multisample)&&void 0!==n?n:u.multisample;o[0].resolution=a,o[0].multisample=s,o[0].maskSprite=r;var h=i.filterArea;i.filterArea=r.getBounds(!0),u.filter.push(i,o),i.filterArea=h,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Ye=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==n&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Xe=new ct,qe=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return xt(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var e=t._scissorRect,n=t.maskObject,r=this.renderer,i=r.renderTexture;n.renderable=!0;var o=n.getBounds();this.roundFrameToPixels(o,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),n.renderable=!1,e&&o.fit(e),t._scissorRectLocal=o}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,n=t.b,r=t.c,i=t.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)},e.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect()||e.isMatrixRotated(n.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,n,r,i,o){e.isMatrixRotated(o)||((o=o?Xe.copyFrom(o):Xe.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Ye),Ke=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return xt(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Ye),Ze=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ct,this.transform=null}return t.prototype.update=function(t,e,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),Je=new ut,$e=new ut,tn=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ut,this.destinationFrame=new ut,this.viewportFrame=new ut}return t.prototype.bind=function(t,e,n){void 0===t&&(t=null);var r,i,o,a=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(Je.width=t.frame.width,Je.height=t.frame.height,e=Je),n||($e.x=t.frame.x,$e.y=t.frame.y,$e.width=e.width,$e.height=e.height,n=$e),i=r.framebuffer):(o=a.resolution,e||(Je.width=a.screen.width,Je.height=a.screen.height,e=Je),n||((n=Je).width=e.width,n.height=e.height));var s=this.viewportFrame;s.x=n.x*o,s.y=n.y*o,s.width=n.width*o,s.height=n.height*o,t||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(i,s),this.renderer.projection.update(n,e,o,!i),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var o=this.viewportFrame,a=o.x,s=o.y,u=o.width,l=o.height;a=Math.round(a),s=Math.round(s),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,s,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function en(t,e,n,r,i){n.buffer.update(i)}var nn={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},rn={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var on=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();var an=0,sn={textureCount:0,uboCount:0},un=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=an++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Be)return Be;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Be=!0===t({a:"b"},"a","b")}catch(t){Be=!1}return Be}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),e||(sn.textureCount=0,sn.uboCount=0,this.syncUniformGroup(t.uniformGroup,sn)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var n=this.getGlProgram();t.static&&t.dirtyId===n.uniformDirtyGroups[t.id]||(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},t.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in t.uniforms){var o=e[i];if(o){for(var a=t.uniforms[i],s=!1,u=0;u<ke.length;u++)if(ke[u].test(o,a)){r.push(ke[u].code(i,a)),s=!0;break}if(!s){var l=(1===o.size?Pe:De)[o.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+l+";")}}else null!==(n=t.uniforms[i])&&void 0!==n&&n.group&&(t.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var n=this.getGlProgram();if(!t.static||0!==t.dirtyId||!n.uniformGroups[t.id]){t.dirtyId=0;var r=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,e);t.buffer.update(),r(n.uniformData,t.uniforms,this.renderer,sn,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,n){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var i=this.gl.getUniformBlockIndex(e.program,n);e.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=function(t,e){if(!t.autoManage)return{size:0,syncFunc:en};for(var n=function(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,o=0;o<e.length;o++){var a=e[o];if(n=rn[a.data.type],a.data.size>1&&(n=Math.max(n,16)*a.data.size),a.dataLen=n,r%n!=0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),a.offset=i,i+=n,r=n):(a.offset=i,r+=n,i+=n)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}(function(t,e){var n=[];for(var r in t)e[r]&&n.push(e[r]);return n.sort((function(t,e){return t.index-e.index})),n}(t.uniforms,e)),r=n.uboElements,i=n.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],a=0;a<r.length;a++){for(var s=r[a],u=t.uniforms[s.data.name],l=s.data.name,c=!1,h=0;h<ke.length;h++){var d=ke[h];if(d.codeUbo&&d.test(s.data,u)){o.push("offset = "+s.offset/4+";",ke[h].codeUbo(s.data.name,u)),c=!0;break}}if(!c)if(s.data.size>1){var A=Me(s.data.type),f=Math.max(rn[s.data.type]/16,1),p=A/f,g=(4-p%4)%4;o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+s.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+s.data.size*f+"; i++)\n                {\n                    for(var j = 0; j < "+p+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+g+";\n                }\n\n                ")}else{var v=nn[s.data.type];o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+s.offset/4+";\n                "+v+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}(t,this.shader.program.uniformData)),t.autoManage){var s=new Float32Array(a.size/4);t.buffer.update(s)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,n){var r=t.uniforms,i=[n+"-"];for(var o in r)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,n=t.program,r=function(t,e){var n,r,i,o,a=me(t,t.VERTEX_SHADER,e.vertexSrc),s=me(t,t.FRAGMENT_SHADER,e.fragmentSrc),u=t.createProgram();if(t.attachShader(u,a),t.attachShader(u,s),t.linkProgram(u),t.getProgramParameter(u,t.LINK_STATUS)||(r=u,i=a,o=s,(n=t).getProgramParameter(r,n.LINK_STATUS)||(n.getShaderParameter(i,n.COMPILE_STATUS)||ye(n,i),n.getShaderParameter(o,n.COMPILE_STATUS)||ye(n,o),console.error("PixiJS Error: Could not initialize shader."),""!==n.getProgramInfoLog(r)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(r)))),e.attributeData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i);if(0!==o.name.indexOf("gl_")){var a=Ne(e,o.type),s={type:a,name:o.name,size:Me(a),location:e.getAttribLocation(t,o.name)};n[o.name]=s}}return n}(u,t),e.uniformData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=e.getActiveUniform(t,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),u=Ne(e,o.type);n[a]={name:a,index:i,type:u,size:o.size,isArray:s,value:we(u,o.size)}}return n}(u,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var l=Object.keys(e.attributeData);l.sort((function(t,e){return t>e?1:-1}));for(var c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(u,c,l[c]);t.linkProgram(u)}t.deleteShader(a),t.deleteShader(s);var h={};for(var c in e.uniformData){var d=e.uniformData[c];h[c]={location:t.getUniformLocation(u,c),value:we(d.type,d.size)}}return new on(u,h)}(e,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}(),ln=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=i.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new ze,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){var e,n;this.gl=t,this.blendModes=(e=t,void 0===n&&(n=[]),n[i.b.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.ADD]=[e.ONE,e.ONE],n[i.b.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.NONE]=[0,0],n[i.b.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],n[i.b.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],n[i.b.SRC_IN]=[e.DST_ALPHA,e.ZERO],n[i.b.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],n[i.b.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],n[i.b.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],n[i.b.DST_IN]=[e.ZERO,e.SRC_ALPHA],n[i.b.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],n[i.b.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],n[i.b.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],n[i.b.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],n),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),cn=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.b.GC_MAX_IDLE,this.checkCountMax=r.b.GC_MAX_CHECK_COUNT,this.mode=r.b.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==i.i.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}(),hn=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=i.r.UNSIGNED_BYTE,this.internalFormat=i.h.RGBA,this.samplerType=0},dn=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Mt,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t,e,n,r,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y,b,w,x,_,T,E=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=(t=E,"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[i.r.UNSIGNED_BYTE]=((n={})[i.h.RGBA]=t.RGBA8,n[i.h.RGB]=t.RGB8,n[i.h.RG]=t.RG8,n[i.h.RED]=t.R8,n[i.h.RGBA_INTEGER]=t.RGBA8UI,n[i.h.RGB_INTEGER]=t.RGB8UI,n[i.h.RG_INTEGER]=t.RG8UI,n[i.h.RED_INTEGER]=t.R8UI,n[i.h.ALPHA]=t.ALPHA,n[i.h.LUMINANCE]=t.LUMINANCE,n[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,n),e[i.r.BYTE]=((r={})[i.h.RGBA]=t.RGBA8_SNORM,r[i.h.RGB]=t.RGB8_SNORM,r[i.h.RG]=t.RG8_SNORM,r[i.h.RED]=t.R8_SNORM,r[i.h.RGBA_INTEGER]=t.RGBA8I,r[i.h.RGB_INTEGER]=t.RGB8I,r[i.h.RG_INTEGER]=t.RG8I,r[i.h.RED_INTEGER]=t.R8I,r),e[i.r.UNSIGNED_SHORT]=((o={})[i.h.RGBA_INTEGER]=t.RGBA16UI,o[i.h.RGB_INTEGER]=t.RGB16UI,o[i.h.RG_INTEGER]=t.RG16UI,o[i.h.RED_INTEGER]=t.R16UI,o[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,o),e[i.r.SHORT]=((a={})[i.h.RGBA_INTEGER]=t.RGBA16I,a[i.h.RGB_INTEGER]=t.RGB16I,a[i.h.RG_INTEGER]=t.RG16I,a[i.h.RED_INTEGER]=t.R16I,a),e[i.r.UNSIGNED_INT]=((s={})[i.h.RGBA_INTEGER]=t.RGBA32UI,s[i.h.RGB_INTEGER]=t.RGB32UI,s[i.h.RG_INTEGER]=t.RG32UI,s[i.h.RED_INTEGER]=t.R32UI,s[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,s),e[i.r.INT]=((u={})[i.h.RGBA_INTEGER]=t.RGBA32I,u[i.h.RGB_INTEGER]=t.RGB32I,u[i.h.RG_INTEGER]=t.RG32I,u[i.h.RED_INTEGER]=t.R32I,u),e[i.r.FLOAT]=((l={})[i.h.RGBA]=t.RGBA32F,l[i.h.RGB]=t.RGB32F,l[i.h.RG]=t.RG32F,l[i.h.RED]=t.R32F,l[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[i.r.HALF_FLOAT]=((c={})[i.h.RGBA]=t.RGBA16F,c[i.h.RGB]=t.RGB16F,c[i.h.RG]=t.RG16F,c[i.h.RED]=t.R16F,c),e[i.r.UNSIGNED_SHORT_5_6_5]=((h={})[i.h.RGB]=t.RGB565,h),e[i.r.UNSIGNED_SHORT_4_4_4_4]=((d={})[i.h.RGBA]=t.RGBA4,d),e[i.r.UNSIGNED_SHORT_5_5_5_1]=((A={})[i.h.RGBA]=t.RGB5_A1,A),e[i.r.UNSIGNED_INT_2_10_10_10_REV]=((f={})[i.h.RGBA]=t.RGB10_A2,f[i.h.RGBA_INTEGER]=t.RGB10_A2UI,f),e[i.r.UNSIGNED_INT_10F_11F_11F_REV]=((p={})[i.h.RGB]=t.R11F_G11F_B10F,p),e[i.r.UNSIGNED_INT_5_9_9_9_REV]=((g={})[i.h.RGB]=t.RGB9_E5,g),e[i.r.UNSIGNED_INT_24_8]=((v={})[i.h.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,v),e[i.r.FLOAT_32_UNSIGNED_INT_24_8_REV]=((m={})[i.h.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,m),T=e):((y={})[i.r.UNSIGNED_BYTE]=((b={})[i.h.RGBA]=t.RGBA,b[i.h.RGB]=t.RGB,b[i.h.ALPHA]=t.ALPHA,b[i.h.LUMINANCE]=t.LUMINANCE,b[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,b),y[i.r.UNSIGNED_SHORT_5_6_5]=((w={})[i.h.RGB]=t.RGB,w),y[i.r.UNSIGNED_SHORT_4_4_4_4]=((x={})[i.h.RGBA]=t.RGBA,x),y[i.r.UNSIGNED_SHORT_5_5_5_1]=((_={})[i.h.RGBA]=t.RGBA,_),T=y),T);var S=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=S;for(var M=0;M<S;M++)this.boundTextures[M]=null;this.emptyTextures={};var C=new hn(E.createTexture());for(E.bindTexture(E.TEXTURE_2D,C.texture),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[E.TEXTURE_2D]=C,this.emptyTextures[E.TEXTURE_CUBE_MAP]=new hn(E.createTexture()),E.bindTexture(E.TEXTURE_CUBE_MAP,this.emptyTextures[E.TEXTURE_CUBE_MAP].texture),M=0;M<6;M++)E.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X+M,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,null);for(E.texParameteri(E.TEXTURE_CUBE_MAP,E.TEXTURE_MAG_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_CUBE_MAP,E.TEXTURE_MIN_FILTER,E.LINEAR),M=0;M<this.boundTextures.length;M++)this.bind(null,M)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this.boundTextures,n=this.hasIntegerTextures,r=this.CONTEXT_UID;if(n)for(var o=t-1;o>=0;--o){var a=e[o];a&&a._glTextures[r].samplerType!==i.o.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new hn(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var n,r;e.internalFormat=null!==(r=null===(n=this.internalFormats[t.type])||void 0===n?void 0:n[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===i.r.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e))e.samplerType!==i.o.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,o=t.realHeight,a=n.gl;(e.width!==r||e.height!==o||e.dirtyId<0)&&(e.width=r,e.height=o,a.texImage2D(t.target,0,e.internalFormat,r,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&function(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==i.k.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=i.s.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&t.mipmap!==i.k.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===i.p.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),An=new ct,fn=function(t){function e(e,n){void 0===e&&(e=i.n.UNKNOWN);var o=t.call(this)||this;return n=Object.assign({},r.b.RENDER_OPTIONS,n),o.options=n,o.type=e,o.screen=new ut(0,0,n.width,n.height),o.view=n.view||document.createElement("canvas"),o.resolution=n.resolution||r.b.RESOLUTION,o.useContextAlpha=n.useContextAlpha,o.autoDensity=!!n.autoDensity,o.preserveDrawingBuffer=n.preserveDrawingBuffer,o.clearBeforeRender=n.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=n.backgroundColor||o._backgroundColor,o.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(Y("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=n.transparent,o.backgroundAlpha=n.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return xt(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},e.prototype.generateTexture=function(t,e,n,r){void 0===e&&(e={}),"number"==typeof e&&(Y("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:n,region:r});var i=e.region,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}(e,["region"]);0===(r=i||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var a=Gt.create(_t({width:r.width,height:r.height},o));return An.tx=-r.x,An.ty=-r.y,this.render(t,{renderTexture:a,clear:!1,transform:An,skipUpdateTransform:!!t.parent}),a},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=i.n.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e,n,r;this._backgroundColor=t,this._backgroundColorString=(e=t.toString(16),"#"+(e="000000".substring(0,6-e.length)+e)),n=t,void 0===(r=this._backgroundColorRgba)&&(r=[]),r[0]=(n>>16&255)/255,r[1]=(n>>8&255)/255,r[2]=(255&n)/255},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(c),pn=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},gn=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var i=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,i.buffer)}},t.prototype.bindBufferRange=function(t,e,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var o=t._glBuffers[i]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*n,256)},t.prototype.update=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(e||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.dispose(this.managedBuffers[e[n]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,n=this.gl;return t._glBuffers[e]=new pn(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}();!function(t){function e(n){var r=t.call(this,i.n.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new et("destroy"),contextChange:new et("contextChange"),reset:new et("reset"),update:new et("update"),postrender:new et("postrender"),prerender:new et("prerender"),resize:new et("resize")},r.runners.contextChange.add(r),r.globalUniforms=new re({projectionMatrix:new ct},!0),r.addSystem(We,"mask").addSystem(he,"context").addSystem(ln,"state").addSystem(un,"shader").addSystem(dn,"texture").addSystem(gn,"buffer").addSystem(ge,"geometry").addSystem(fe,"framebuffer").addSystem(qe,"scissor").addSystem(Ke,"stencil").addSystem(Ze,"projection").addSystem(cn,"textureGC").addSystem(se,"filter").addSystem(tn,"renderTexture").addSystem(le,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(t){var e;if(!F){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.4.2 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,n)}else globalThis.console&&globalThis.console.log("PixiJS 6.4.2 - "+t+" - http://www.pixijs.com/");F=!0}}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}xt(e,t),e.create=function(t){if(void 0===R&&(R=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!n||!n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch(t){return!1}}()),R)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n);t>=i.l.HIGH?this.multisample=i.l.HIGH:t>=i.l.MEDIUM?this.multisample=i.l.MEDIUM:t>=i.l.LOW?this.multisample=i.l.LOW:this.multisample=i.l.NONE},e.prototype.addSystem=function(t,e){var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=n,this.runners)this.runners[r].add(n);return this},e.prototype.render=function(t,e){var n,r,i,o;if(e&&(e instanceof Gt?(Y("6.0.0","Renderer#render arguments changed, use options instead."),n=e,r=arguments[2],i=arguments[3],o=arguments[4]):(n=e.renderTexture,r=e.clear,i=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=t),!o){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,n,r,i){void 0===n&&(n={});var o=t.prototype.generateTexture.call(this,e,n,r,i);return this.framebuffer.blit(),o},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Y("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n}}(fn);var vn=function(){this.texArray=null,this.blend=0,this.type=i.f.TRIANGLES,this.start=0,this.size=0,this.data=null},mn=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),yn=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),bn=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=ze.for2d(),n.size=4*r.b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return xt(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.b.PREFER_ENV===i.g.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var r=Le.replace(/%forloop%/gi,Oe(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new vn);for(;n.length<i;)n.push(new mn);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++Mt._globalBatch,u=0,l=r[0],c=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var d=t[h];t[h]=null,d._batchEnabled!==s&&(l.count>=n&&(i.boundArray(l,o,s,n),this.buildDrawCalls(l,c,h),c=h,l=r[++u],++s),d._batchEnabled=s,d.touched=a,l.elements[l.count++]=d)}for(l.count>0&&(i.boundArray(l,o,s,n),this.buildDrawCalls(l,c,this._bufferSize),++u,++s),h=0;h<o.length;h++)o[h]=null;Mt._globalBatch=s},e.prototype.buildDrawCalls=function(t,n,r){var i=this._bufferedElements,o=this._attributeBuffer,a=this._indexBuffer,s=this.vertexSize,u=e._drawCallPool,l=this._dcIndex,c=this._aIndex,h=this._iIndex,d=u[l];d.start=this._iIndex,d.texArray=t;for(var A=n;A<r;++A){var f=i[A],p=f._texture.baseTexture,g=U[p.alphaMode?1:0][f.blendMode];i[A]=null,n<A&&d.blend!==g&&(d.size=h-d.start,n=A,(d=u[++l]).texArray=t,d.start=h),this.packInterleavedGeometry(f,o,a,c,h),c+=f.vertexData.length/2*s,h+=f.indices.length,d.blend=g}n<r&&(d.size=h-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=h},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,n=this._indexBuffer;r.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=e._drawCallPool,a=null,s=0;s<t;s++){var u=o[s],l=u.texArray,c=u.type,h=u.size,d=u.start,A=u.blend;a!==l&&(a=l,this.bindAndClearTexArray(l)),this.state.blendMode=A,i.set(this.state),r.drawElements(c,h,r.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=z(Math.ceil(t/8)),n=Q(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new yn(r*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=z(Math.ceil(t/12)),n=Q(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},e.prototype.packInterleavedGeometry=function(t,e,n,r,i){for(var o=e.uint32View,a=e.float32View,s=r/this.vertexSize,u=t.uvs,l=t.indices,c=t.vertexData,h=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),A=d<1&&t._texture.baseTexture.alphaMode?function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i*e+.5|0)}(t._tintRGB,d):t._tintRGB+(255*d<<24),f=0;f<c.length;f+=2)a[r++]=c[f],a[r++]=c[f+1],a[r++]=u[f],a[r++]=u[f+1],o[r++]=A,a[r++]=h;for(f=0;f<l.length;f++)n[i++]=s+l[f]},e._drawCallPool=[],e._textureArrayPool=[],e}(ue),wn=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=re.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ue(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ct,default:this.defaultGroupCache[t]};return new je(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),xn=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new Xt(null,e,!1),n._indexBuffer=new Xt(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,i.r.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,i.r.FLOAT).addAttribute("aColor",n._buffer,4,!0,i.r.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,i.r.FLOAT).addIndex(n._indexBuffer),n}return xt(e,t),e}($t),_n="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Tn="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";(function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:_n,fragment:Tn,geometryClass:xn,vertexSize:6},t),n=e.vertex,r=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var a=t.call(this,e)||this;return a.shaderGenerator=new wn(n,r),a.geometryClass=o,a.vertexSize=i,a}return xt(e,t),e}(bn)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return _n},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Tn},enumerable:!1,configurable:!0}),t})().create();var En=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=this.renderer,n=t.worldTransform;e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),e.setContextTransform(n,t.roundPixels),t.drawMode!==i.f.TRIANGLES?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.geometry.buffers[0].data.length,n=0;n<e-2;n++){var r=2*n;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.geometry.getIndex().data,n=e.length,r=0;r<n;r+=3){var i=2*e[r],o=2*e[r+1],a=2*e[r+2];this._renderDrawTriangle(t,i,o,a)}},t.prototype._renderDrawTriangle=function(t,e,n,r){var i=this.renderer.context,a=t.geometry.buffers[0].data,s=t.uvs,u=t.texture;if(u.valid){var l=16777215!==t.tint,c=u.baseTexture,h=c.width,d=c.height;l&&t._cachedTint!==t.tint&&(t._cachedTint=t.tint,t._cachedTexture=t._cachedTexture||new Qt(c),t._tintedCanvas=o.b.getTintedCanvas({texture:t._cachedTexture},t.tint));var A=l?t._tintedCanvas:c.getDrawableSource(),f=s[e]*c.width,p=s[n]*c.width,g=s[r]*c.width,v=s[e+1]*c.height,m=s[n+1]*c.height,y=s[r+1]*c.height,b=a[e],w=a[n],x=a[r],_=a[e+1],T=a[n+1],E=a[r+1],S=t.canvasPadding/this.renderer.resolution;if(S>0){var M=t.worldTransform,C=M.a,I=M.b,N=M.c,B=M.d,k=(b+w+x)/3,P=(_+T+E)/3,D=b-k,L=_-P,O=C*D+N*L,R=I*D+B*L,F=Math.sqrt(O*O+R*R),U=1+S/F;b=k+D*U,_=P+L*U,O=C*(D=w-k)+N*(L=T-P),R=I*D+B*L,w=k+D*(U=1+S/(F=Math.sqrt(O*O+R*R))),T=P+L*U,O=C*(D=x-k)+N*(L=E-P),R=I*D+B*L,x=k+D*(U=1+S/(F=Math.sqrt(O*O+R*R))),E=P+L*U}i.save(),i.beginPath(),i.moveTo(b,_),i.lineTo(w,T),i.lineTo(x,E),i.closePath(),i.clip();var j=f*m+v*g+p*y-m*g-v*p-f*y,z=b*m+v*x+w*y-m*x-v*w-b*y,H=f*w+b*g+p*x-w*g-b*p-f*x,Q=f*m*x+v*w*g+b*p*y-b*m*g-v*p*x-f*w*y,G=_*m+v*E+T*y-m*E-v*T-_*y,V=f*T+_*g+p*E-T*g-_*p-f*E,W=f*m*E+v*T*g+_*p*y-_*m*g-v*p*E-f*T*y;i.transform(z/j,G/j,H/j,V/j,Q/j,W/j),i.drawImage(A,0,0,h*c.resolution,d*c.resolution,0,0,h,d),i.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,n=t.geometry.getBuffer("aVertexPosition").data,r=n.length/2;e.beginPath();for(var i=1;i<r-2;++i){var o=2*i,a=n[o],s=n[o+1],u=n[o+2],l=n[o+3],c=n[o+4],h=n[o+5];e.moveTo(a,s),e.lineTo(u,l),e.lineTo(c,h)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.b.MESH_CANVAS_PADDING=0,a.c.prototype._renderCanvas=function(t,e){t.plugins.mesh.render(e)},s.a.prototype._cachedTint=16777215,s.a.prototype._tintedCanvas=null,s.a.prototype._canvasUvs=null,s.a.prototype._renderCanvas=function(t){var e=t.context,n=this.worldTransform,r=16777215!==this.tint,i=this.texture;if(i.valid){r&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedCanvas=o.b.getTintedCanvas(this,this.tint));var a=r?this._tintedCanvas:i.baseTexture.getDrawableSource();this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var s=this.vertices,u=this._canvasUvs,l=r?0:i.frame.x,c=r?0:i.frame.y,h=l+i.frame.width,d=c+i.frame.height;u[0]=l,u[1]=l+this._leftWidth,u[2]=h-this._rightWidth,u[3]=h,u[4]=c,u[5]=c+this._topHeight,u[6]=d-this._bottomHeight,u[7]=d;for(var A=0;A<8;A++)u[A]*=i.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.setContextTransform(n,this.roundPixels);for(var f=0;f<3;f++)for(var p=0;p<3;p++){var g=2*p+8*f,v=Math.max(1,u[p+1]-u[p]),m=Math.max(1,u[f+5]-u[f+4]),y=Math.max(1,s[g+10]-s[g]),b=Math.max(1,s[g+11]-s[g+1]);e.drawImage(a,u[p],u[f+4],v,m,s[g],s[g+1],y,b)}}};var Sn=!1;a.a.prototype._cachedTint=16777215,a.a.prototype._tintedCanvas=null,a.a.prototype._cachedTexture=null,a.a.prototype._renderCanvas=function(t){this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.material._renderCanvas?this.material._renderCanvas(t,this):Sn||(Sn=!0,globalThis.console&&console.warn("Mesh with custom shaders are not supported in CanvasRenderer."))},a.a.prototype._canvasPadding=null,Object.defineProperty(a.a.prototype,"canvasPadding",{get:function(){return null!==this._canvasPadding?this._canvasPadding:r.b.MESH_CANVAS_PADDING},set:function(t){this._canvasPadding=t}}),s.b.prototype._renderCanvas=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)},s.c.prototype._renderCanvas=function(t){(this.autoUpdate||this.geometry._width!==this.shader.texture.height)&&(this.geometry._width=this.shader.texture.height,this.geometry.update()),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)}}).call(this,n(17))},function(t,e,n){var r=n(139),i=n(140);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){return i.isString(t)&&(t=y(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),h=["%","/","?",";","#"].concat(c),d=["/","?","#"],A=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(141);function y(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+_(t));var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(s);l[0]=l[0].replace(/\\/g,"/");var y=t=l.join(s);if(y=y.trim(),!n&&1===t.split("#").length){var b=u.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(y);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,y=y.substr(w.length)}if(n||w||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===y.substr(0,2);!T||w&&g[w]||(y=y.substr(2),this.slashes=!0)}if(!g[w]&&(T||w&&!v[w])){for(var E,S,M=-1,C=0;C<d.length;C++)-1!==(I=y.indexOf(d[C]))&&(-1===M||I<M)&&(M=I);for(-1!==(S=-1===M?y.lastIndexOf("@"):y.lastIndexOf("@",M))&&(E=y.slice(0,S),y=y.slice(S+1),this.auth=decodeURIComponent(E)),M=-1,C=0;C<h.length;C++){var I;-1!==(I=y.indexOf(h[C]))&&(-1===M||I<M)&&(M=I)}-1===M&&(M=y.length),this.host=y.slice(0,M),y=y.slice(M),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var B=this.hostname.split(/\./),k=(C=0,B.length);C<k;C++){var P=B[C];if(P&&!P.match(A)){for(var D="",L=0,O=P.length;L<O;L++)P.charCodeAt(L)>127?D+="x":D+=P[L];if(!D.match(A)){var R=B.slice(0,C),F=B.slice(C+1),U=P.match(f);U&&(R.push(U[1]),F.unshift(U[2])),F.length&&(y="/"+F.join(".")+y),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+j,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!p[x])for(C=0,k=c.length;C<k;C++){var H=c[C];if(-1!==y.indexOf(H)){var Q=encodeURIComponent(H);Q===H&&(Q=escape(H)),y=y.split(H).join(Q)}}var G=y.indexOf("#");-1!==G&&(this.hash=y.substr(G),y=y.slice(0,G));var V=y.indexOf("?");if(-1!==V?(this.search=y.substr(V),this.query=y.substr(V+1),e&&(this.query=m.parse(this.query)),y=y.slice(0,V)):e&&(this.search="",this.query={}),y&&(this.pathname=y),v[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var W=this.search||"";this.path=j+W}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=m.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=t[c])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var A=h[d];n[A]=t[A]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||g[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var p=n.pathname||"",m=n.search||"";n.path=p+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||y||n.host&&t.pathname,x=w,_=n.pathname&&n.pathname.split("/")||[],T=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),w=w&&(""===f[0]||""===_[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return T&&(n.hostname=n.host=_.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=_.slice(-1)[0],S=(n.host||t.host||_.length>1)&&("."===E||".."===E)||""===E,M=0,C=_.length;C>=0;C--)"."===(E=_[C])?_.splice(C,1):".."===E?(_.splice(C,1),M++):M&&(_.splice(C,1),M--);if(!w&&!x)for(;M--;M)_.unshift("..");!w||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),S&&"/"!==_.join("/").substr(-1)&&_.push("");var I,N=""===_[0]||_[0]&&"/"===_[0].charAt(0);return T&&(n.hostname=n.host=N?"":_.length?_.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),(w=w||n.host&&_.length)&&!N&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(22)(n(14),"Map");t.exports=r},function(t,e,n){var r=n(183),i=n(60),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},function(t,e,n){var r=n(61),i=n(190),o=n(65);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){(function(t){var r=n(14),i=n(187),o=e&&!e.nodeType&&e,a=o&&"object"==_(t)&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(25)(t))},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(49),i=e&&!e.nodeType&&e,o=i&&"object"==_(t)&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(25)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(61),i=n(206),o=n(65);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(56);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(144);t.exports=function(t,e){e=e||{};var n=new r,i=e.inPlace||!1,o=t.map((function(t){return i?t:{width:t.width,height:t.height,item:t}}));o=o.sort((function(t,e){return e.width*e.height-t.width*t.height})),n.fit(o);var a={width:o.reduce((function(t,e){return Math.max(t,e.x+e.width)}),0),height:o.reduce((function(t,e){return Math.max(t,e.y+e.height)}),0)};return i||(a.items=o),a}},function(t,e,n){var r=n(21),i=n(196),o=n(197),a=Math.max,s=Math.min;t.exports=function(t,e,n){var u,l,c,h,d,A,f=0,p=!1,g=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=u,r=l;return u=l=void 0,f=e,h=t.apply(r,n)}function y(t){return f=t,d=setTimeout(w,e),p?m(t):h}function b(t){var n=t-A;return void 0===A||n>=e||n<0||g&&t-f>=c}function w(){var t,n,r=i();if(b(r))return x(r);d=setTimeout(w,(n=e-((t=r)-A),g?s(n,c-(t-f)):n))}function x(t){return d=void 0,v&&u?m(t):(u=l=void 0,h)}function _(){var t=i(),n=b(t);if(u=arguments,l=this,A=t,n){if(void 0===d)return y(A);if(g)return clearTimeout(d),d=setTimeout(w,e),m(A)}return void 0===d&&(d=setTimeout(w,e)),h}return e=o(e)||0,r(n)&&(p=!!n.leading,c=(g="maxWait"in n)?a(o(n.maxWait)||0,e):c,v="trailing"in n?!!n.trailing:v),_.cancel=function(){void 0!==d&&clearTimeout(d),f=0,u=A=l=d=void 0},_.flush=function(){return void 0===d?h:x(i())},_}},function(t,e,n){var r=n(201);t.exports=function(t){return r(t,5)}},function(t,e,n){(function(e){var n="object"==_(e)&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(17))},function(t,e,n){var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},l.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,o),!0;case 6:return c.fn.call(c.context,e,n,r,o,a),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,A=c.length;for(l=0;l<A;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,l=[],c=a.length;s<c;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:u(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},function(t,e,n){function r(t,e,n){n=n||2;var r,o,s,u,l,c,A,f=e&&e.length,g=f?e[0]*n:t.length,v=i(t,0,g,n,!0),m=[];if(!v||v.next===v.prev)return m;if(f&&(v=function(t,e,n,r){var o,a,s,u=[];for(o=0,a=e.length;o<a;o++)(s=i(t,e[o]*r,o<a-1?e[o+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),u.push(p(s));for(u.sort(h),o=0;o<u.length;o++)n=d(u[o],n);return n}(t,e,v,n)),t.length>80*n){r=s=t[0],o=u=t[1];for(var y=n;y<g;y+=n)(l=t[y])<r&&(r=l),(c=t[y+1])<o&&(o=c),l>s&&(s=l),c>u&&(u=c);A=0!==(A=Math.max(s-r,u-o))?32767/A:0}return a(v,m,n,r,o,A,0),m}function i(t,e,n,r,i){var o,a;if(i===C(t,e,n,r)>0)for(o=e;o<n;o+=r)a=E(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=E(o,t[o],t[o+1],a);return a&&y(a,a.next)&&(S(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,h,d){if(t){!d&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=f(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,h);for(var A,p,g=t;t.prev!==t.next;)if(A=t.prev,p=t.next,h?u(t,r,i,h):s(t))e.push(A.i/n|0),e.push(t.i/n|0),e.push(p.i/n|0),S(t),t=p.next,g=p.next;else if((t=p)===g){d?1===d?a(t=l(o(t),e,n),e,n,r,i,h,2):2===d&&c(t,e,n,r,i,h):a(o(t),e,n,r,i,h,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,u=n.y,l=r.y,c=i<o?i<a?i:a:o<a?o:a,h=s<u?s<l?s:l:u<l?u:l,d=i>o?i>a?i:a:o>a?o:a,A=s>u?s>l?s:l:u>l?u:l,f=r.next;f!==e;){if(f.x>=c&&f.x<=d&&f.y>=h&&f.y<=A&&g(i,s,o,u,a,l,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(m(i,o,a)>=0)return!1;for(var s=i.x,u=o.x,l=a.x,c=i.y,h=o.y,d=a.y,A=s<u?s<l?s:l:u<l?u:l,p=c<h?c<d?c:d:h<d?h:d,v=s>u?s>l?s:l:u>l?u:l,y=c>h?c>d?c:d:h>d?h:d,b=f(A,p,e,n,r),w=f(v,y,e,n,r),x=t.prevZ,_=t.nextZ;x&&x.z>=b&&_&&_.z<=w;){if(x.x>=A&&x.x<=v&&x.y>=p&&x.y<=y&&x!==i&&x!==a&&g(s,c,u,h,l,d,x.x,x.y)&&m(x.prev,x,x.next)>=0||(x=x.prevZ,_.x>=A&&_.x<=v&&_.y>=p&&_.y<=y&&_!==i&&_!==a&&g(s,c,u,h,l,d,_.x,_.y)&&m(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;x&&x.z>=b;){if(x.x>=A&&x.x<=v&&x.y>=p&&x.y<=y&&x!==i&&x!==a&&g(s,c,u,h,l,d,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=w;){if(_.x>=A&&_.x<=v&&_.y>=p&&_.y<=y&&_!==i&&_!==a&&g(s,c,u,h,l,d,_.x,_.y)&&m(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function l(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!y(i,a)&&b(i,r,r.next,a)&&_(i,a)&&_(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),S(r),S(r.next),r=t=a),r=r.next}while(r!==t);return o(r)}function c(t,e,n,r,i,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&v(u,l)){var c=T(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,r,i,s,0),void a(c,e,n,r,i,s,0)}l=l.next}u=u.next}while(u!==t)}function h(t,e){return t.x-e.x}function d(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var u,l=n,c=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&g(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),_(r,t)&&(u<d||u===d&&(r.x>n.x||r.x===n.x&&A(n,r)))&&(n=r,d=u)),r=r.next}while(r!==l);return n}(t,e);if(!n)return e;var r=T(n,t);return o(r,r.next),o(n,n.next)}function A(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function f(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function g(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(_(t,e)&&_(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||y(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){var i=x(m(t,e,n)),o=x(m(t,e,r)),a=x(m(n,r,t)),s=x(m(n,r,e));return i!==o&&a!==s||!(0!==i||!w(t,n,e))||!(0!==o||!w(t,r,e))||!(0!==a||!w(n,t,r))||!(0!==s||!w(n,e,r))}function w(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function x(t){return t>0?1:t<0?-1:0}function _(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function T(t,e){var n=new M(t.i,t.x,t.y),r=new M(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function E(t,e,n,r){var i=new M(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function M(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(C(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(C(t,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,A=r[s+1]*n,f=r[s+2]*n;h+=Math.abs((t[d]-t[f])*(t[A+1]-t[d+1])-(t[d]-t[A])*(t[f+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){var r=n(26),i=n(153),o=n(154),a=n(155),s=n(156),u=n(157);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(162),i=n(169),o=n(171),a=n(172),s=n(173);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(174),i=n(177),o=n(178);t.exports=function(t,e,n,a,s,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var d=u.get(t),A=u.get(e);if(d&&A)return d==e&&A==t;var f=-1,p=!0,g=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++f<c;){var v=t[f],m=e[f];if(a)var y=l?a(m,v,f,e,t,u):a(v,m,f,t,e,u);if(void 0!==y){if(y)continue;p=!1;break}if(g){if(!i(e,(function(t,e){if(!o(g,e)&&(v===t||s(v,t,n,a,u)))return g.push(e)}))){p=!1;break}}else if(v!==m&&!s(v,m,n,a,u)){p=!1;break}}return u.delete(t),u.delete(e),p}},function(t,e,n){var r=n(14).Uint8Array;t.exports=r},function(t,e,n){var r=n(58),i=n(38),o=n(39);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(59),i=n(30);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(184),i=n(185),o=n(30),a=n(40),s=n(188),u=n(62),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),h=!n&&!c&&a(t),d=!n&&!c&&!h&&u(t),A=n||c||h||d,f=A?r(t.length,String):[],p=f.length;for(var g in t)!e&&!l.call(t,g)||A&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,p))||f.push(g);return f}},function(t,e,n){var r=n(189),i=n(41),o=n(42),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(33),i=n(63);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(67),i=n(36),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(203);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(59),i=n(69),o=n(38),a=n(60),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,n){var r=n(64)(Object.getPrototypeOf,Object);t.exports=r},function(t,e){t.exports="varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform float lines[26];\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float direction;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat middleAlpha = 0.0;\n\tfloat endAlpha = 0.0;\n\tfloat headLength = 0.0;\n\tif (timePercent < 0.5) {\n\t\tmiddleAlpha = 1.0;\n\t\tendAlpha = 1.0 - (timePercent / 0.5);\n\t}\n\telse {\n\t\tmiddleAlpha = 1.0 - ((timePercent - 0.5) / 0.5);\n\t\tendAlpha = 0.0;\n\t}\n\tfor (int i = 0; i < 26; i++) {\n\t\tfloat halfDis = lines[i] / 2.0;\n\t\tfloat middle = headLength + halfDis;\n\t\theadLength += lines[i];\n\t\tif ((direction > 0.9) && (direction < 1.1)) {\n\t\t\tif (abs(vUv.y - middle) <= halfDis) {\n\t\t\t\tsrcColor.a = endAlpha + (((halfDis - abs(vUv.y - middle)) / halfDis) * (middleAlpha - endAlpha));\n\t\t\t\tgl_FragColor = blendSrcOver(srcColor, distColor);\n\t\t\t\treturn ;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (abs(vUv.x - middle) <= halfDis) {\n\t\t\t\tsrcColor.a = endAlpha + (((halfDis - abs(vUv.x - middle)) / halfDis) * (middleAlpha - endAlpha));\n\t\t\t\tgl_FragColor = blendSrcOver(srcColor, distColor);\n\t\t\t\treturn ;\n\t\t\t}\n\t\t}\n\t}\n\tgl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nvarying vec2 vUv;\nvec2 transform(vec2 uv) {\n\tuv.y = (uv.y * height) / width;\n\treturn uv - vec2(0.5, (0.5 * height) / width);\n}\nvoid main() {\n\tfloat maxR;\n\tfloat ringR;\n\tfloat radiusMin;\n\tfloat radiusMax;\n\tfloat dist;\n\tvec2 uv = vec2(vUv.x, vUv.y);\n\tmaxR = length(transform(vec2(1.0, 1.0)));\n\tringR = 1.0 / 6.0;\n\tradiusMin = timePercent * maxR;\n\tradiusMax = radiusMin + ringR;\n\tdist = length(transform(uv));\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tif (dist < radiusMin) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if ((dist >= radiusMin) && (dist <= radiusMax)) {\n\t\tsrcColor.a = (dist - radiusMin) / ringR;\n\t}\n\telse {\n\t\tsrcColor.a = 1.0;\n\t}\n\tif (timePercent >= 1.0) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if (timePercent == 0.0) {\n\t\tsrcColor.a = 1.0;\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nuniform int option;\nvarying vec2 vUv;\nvec2 transformTo(vec2 uv, vec2 origin) {\n\tuv.y = (uv.y * height) / width;\n\treturn uv - vec2(origin.x, (origin.y * height) / width);\n}\nvec2 offset(float progress[4], float band, float amp, float radius, vec2 centerPosition) {\n\tvec2 tc = vUv.xy;\n\tvec2 uv = vec2(0.0, 0.0);\n\tvec2 p;\n\tfloat len;\n\tvec2 uv_offset;\n\tfloat wave_width = band * radius;\n\tfor (int i = 0; i < 4; i += 1) {\n\t\tif (progress[i] == -1.0) {\n\t\t\tcontinue;\n\t\t}\n\t\tp = tc - centerPosition;\n\t\tp.x = (p.x * width) / height;\n\t\tlen = length(p);\n\t\tfloat current_progress = progress[i];\n\t\tfloat current_radius = radius * current_progress;\n\t\tfloat damp_factor = 1.0;\n\t\tif (current_progress > .5) {\n\t\t\tdamp_factor = (1.0 - current_progress) * 2.0;\n\t\t}\n\t\tfloat cut_factor = clamp((wave_width * damp_factor) - abs(current_radius - len), 0.0, 1.0);\n\t\tfloat waves_factor = (4.0 * len) / radius;\n\t\tuv_offset = (((p / len) * cos((waves_factor - (current_progress * 10.0)) * 3.14)) * amp) * cut_factor;\n\t\tuv += uv_offset;\n\t}\n\treturn uv;\n}\nvoid main() {\n\tfloat maxR;\n\tfloat ringR;\n\tfloat radiusMin;\n\tfloat radiusMax;\n\tfloat dist;\n\tfloat progress[4];\n\tvec2 uv = vUv.xy;\n\tvec2 uvOffset = vec2(0.0, 0.0);\n\tvec2 startPosition = vec2(0.5, 0.5);\n\tfloat redius = 2.0;\n\tif (option == 1) {\n\t\tstartPosition = vec2(0.0, 0.0);\n\t}\n\telse if (option == 2) {\n\t\tstartPosition = vec2(1.0, 0.0);\n\t}\n\telse if (option == 3) {\n\t\tstartPosition = vec2(1.0, 1.0);\n\t}\n\telse if (option == 4) {\n\t\tstartPosition = vec2(0.0, 1.0);\n\t}\n\tmaxR = length(transformTo(vec2(1.0, 1.0), vec2(0.0, 0.0)));\n\tif (option == 0) {\n\t\tmaxR = maxR / 2.0;\n\t\tredius = redius / 2.0;\n\t}\n\tdist = length(transformTo(uv, startPosition));\n\tringR = 1.0 / 6.0;\n\tradiusMin = timePercent * maxR;\n\tradiusMax = radiusMin + ringR;\n\tfor (int i = 0; i < 4; i++) {\n\t\tprogress[i] = timePercent + (0.1 * float(i));\n\t\tif (progress[i] < 0.0) {\n\t\t\tprogress[i] = 0.0;\n\t\t}\n\t}\n\tuvOffset = offset(progress, 0.2, 0.3, redius, startPosition);\n\tvec4 srcColor = texture2D(texturePrev, fract(vUv + uvOffset));\n\tvec4 distColor = texture2D(textureNext, fract(vUv + uvOffset));\n\tif (dist < radiusMin) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if ((dist >= radiusMin) && (dist <= radiusMax)) {\n\t\tsrcColor.a = (dist - radiusMin) / ringR;\n\t}\n\telse {\n\t\tsrcColor.a = 1.0;\n\t}\n\tif (timePercent >= 1.0) {\n\t\tsrcColor.a = 0.0;\n\t}\n\telse if (timePercent == 0.0) {\n\t\tsrcColor.a = 1.0;\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat alphaStart;\n\tfloat alphaEnd;\n\tfloat rectStart;\n\tfloat rectEnd;\n\tbool isRevert = option > 1 ? true : false;\n\tif (timePercent <= 0.33) {\n\t\talphaStart = isRevert ? 1.0 - (timePercent / 0.33) : 1.0;\n\t\talphaEnd = isRevert ? 1.0 : 1.0 - (timePercent / 0.33);\n\t\trectStart = isRevert ? 0.0 : 0.5;\n\t\trectEnd = isRevert ? 0.5 : 1.0;\n\t}\n\telse if ((timePercent > 0.33) && (timePercent <= 0.66)) {\n\t\talphaStart = isRevert ? 0.0 : 1.0;\n\t\talphaEnd = isRevert ? 1.0 : 0.0;\n\t\trectEnd = isRevert ? (((timePercent - 0.33) / 0.33) * 0.5) + 0.5 : 1.0 - (((timePercent - 0.33) / 0.33) * 0.5);\n\t\trectStart = rectEnd - 0.5;\n\t}\n\telse {\n\t\talphaStart = isRevert ? 0.0 : (1.0 - timePercent) / (1.0 - 0.66);\n\t\talphaEnd = isRevert ? (1.0 - timePercent) / (1.0 - 0.66) : 0.0;\n\t\trectStart = isRevert ? 0.5 : 0.0;\n\t\trectEnd = isRevert ? 1.0 : 0.5;\n\t}\n\tfloat changAxis = (option % 2) == 0 ? vUv.x : vUv.y;\n\tif (changAxis >= rectEnd) {\n\t\tsrcColor.a = isRevert ? 1.0 : 0.0;\n\t}\n\telse if (changAxis <= rectStart) {\n\t\tsrcColor.a = isRevert ? 0.0 : 1.0;\n\t}\n\telse {\n\t\tsrcColor.a = alphaStart + (((changAxis - rectStart) / 0.5) * (alphaEnd - alphaStart));\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform sampler2D dissolveTexture;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 dissolveColor = texture2D(dissolveTexture, vUv);\n\tif (dissolveColor.r == 0.0) {\n\t\tresult = srcColor;\n\t}\n\telse {\n\t\tresult = distColor;\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tif (timePercent < 0.5) {\n\t\tfloat stagePercent = timePercent / 0.5;\n\t\tresult = srcColor + (stagePercent * (1.0 - srcColor));\n\t}\n\telse {\n\t\tfloat stagePercent = (timePercent - 0.5) / 0.5;\n\t\tresult = 1.0 - (stagePercent * (1.0 - distColor));\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tif (option == 1) {\n\t\tif (timePercent < 0.5) {\n\t\t\tsrcColor.rgb *= (1.0 - (timePercent * 2.0));\n\t\t\tgl_FragColor = srcColor;\n\t\t}\n\t\telse {\n\t\t\tdistColor.rgb *= ((timePercent - 0.5) * 2.0);\n\t\t\tgl_FragColor = distColor;\n\t\t}\n\t}\n\telse {\n\t\tsrcColor.a = 1.0 - timePercent;\n\t\tgl_FragColor = blendSrcOver(srcColor, distColor);\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat changeAxis = (option % 2) == 1 ? vUv.x : vUv.y;\n\tbool changeAxisX = (option % 2) == 1;\n\tbool isRevert = option > 1;\n\tfloat line;\n\tif (isRevert) {\n\t\tline = interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 3);\n\t}\n\telse {\n\t\tline = interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 3);\n\t}\n\tvec2 uv = vUv.xy;\n\tif (changeAxis > line) {\n\t\tif (changeAxisX) {\n\t\t\tuv.x -= line;\n\t\t}\n\t\telse {\n\t\t\tuv.y -= line;\n\t\t}\n\t}\n\telse {\n\t\tif (changeAxisX) {\n\t\t\tuv.x += (1.0 - line);\n\t\t}\n\t\telse {\n\t\t\tuv.y += (1.0 - line);\n\t\t}\n\t}\n\tif (isRevert) {\n\t\tresult = changeAxis > line ? texture2D(textureNext, uv) : texture2D(texturePrev, uv);\n\t}\n\telse {\n\t\tresult = changeAxis > line ? texture2D(texturePrev, uv) : texture2D(textureNext, uv);\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform bool direction;\nuniform bool orient;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec2 rectLeft = direction ? vec2(0.25, 0.0) : vec2(0.25, 0.5);\n\tvec2 rectRight = direction ? vec2(1, 0.75) : vec2(0.5, 0.75);\n\tvec2 alphaLeft = vec2(1.0, 1.0);\n\tvec2 alphaRight = vec2(1.0, 1.0);\n\tif (timePercent <= 0.333) {\n\t\talphaLeft.y = 1.0 - (timePercent / 0.333);\n\t\talphaRight.x = 1.0 - (timePercent / 0.333);\n\t}\n\telse if ((timePercent <= 0.666) && (timePercent > 0.333)) {\n\t\trectLeft.x = direction ? (((timePercent - 0.333) / 0.333) * 0.25) + rectLeft.x : rectLeft.x - (((timePercent - 0.333) / 0.333) * 0.25);\n\t\trectLeft.y = direction ? rectLeft.x - 0.25 : rectLeft.x + 0.25;\n\t\trectRight.y = direction ? rectRight.y - (((timePercent - 0.333) / 0.333) * 0.25) : rectRight.y + (((timePercent - 0.333) / 0.333) * 0.25);\n\t\trectRight.x = direction ? rectRight.y + 0.25 : rectRight.y - 0.25;\n\t\talphaLeft.y = 0.0;\n\t\talphaRight.x = 0.0;\n\t}\n\telse {\n\t\trectLeft = direction ? vec2(0.5, 0.25) : vec2(0.0, 0.25);\n\t\trectRight = direction ? vec2(0.75, 0.5) : vec2(0.75, 1.0);\n\t\talphaLeft.y = 0.0;\n\t\talphaRight.x = 0.0;\n\t\talphaLeft.x = 1.0 - ((timePercent - 0.666) / (1.0 - 0.666));\n\t\talphaRight.y = 1.0 - ((timePercent - 0.666) / (1.0 - 0.666));\n\t}\n\tfloat axis = orient ? vUv.x : vUv.y;\n\tif (direction) {\n\t\tif ((axis < rectLeft.y) || (axis > rectRight.x)) {\n\t\t\tsrcColor.a = 0.0;\n\t\t}\n\t\telse if ((axis > rectLeft.x) && (axis < rectRight.y)) {\n\t\t\tsrcColor.a = 1.0;\n\t\t}\n\t\telse {\n\t\t\tif ((axis < rectLeft.x) && (axis > rectLeft.y)) {\n\t\t\t\tsrcColor.a = alphaLeft.y - (((axis - rectLeft.y) / (rectLeft.x - rectLeft.y)) * (alphaLeft.y - alphaLeft.x));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsrcColor.a = alphaRight.x - (((rectRight.x - axis) / (rectLeft.x - rectLeft.y)) * (alphaRight.x - alphaRight.y));\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tif ((axis < rectLeft.x) || (axis > rectRight.y)) {\n\t\t\tsrcColor.a = 1.0;\n\t\t}\n\t\telse if ((axis > rectLeft.y) && (axis < rectRight.x)) {\n\t\t\tsrcColor.a = 0.0;\n\t\t}\n\t\telse {\n\t\t\tif ((axis >= rectLeft.x) && (axis <= rectLeft.y)) {\n\t\t\t\tsrcColor.a = alphaLeft.x - (((axis - rectLeft.x) / (rectLeft.y - rectLeft.x)) * (alphaLeft.x - alphaLeft.y));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsrcColor.a = alphaRight.y - (((rectRight.y - axis) / (rectLeft.y - rectLeft.x)) * (alphaRight.y - alphaRight.x));\n\t\t\t}\n\t\t}\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform bool direction;\nuniform bool thruBlk;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 uv4 = vec4(vUv.xy, 1.0, 1.0);\n\tfloat scale;\n\tfloat transform;\n\tif (timePercent < 0.5) {\n\t\tscale = 1.0 - ((timePercent / 0.5) * 0.05);\n\t\ttransform = (1.0 - scale) * 0.5;\n\t}\n\telse {\n\t\tscale = 0.95 + (((timePercent - 0.5) / 0.5) * 0.05);\n\t\ttransform = (1.0 - scale) * 0.5;\n\t}\n\tmat4 matrix = mat4(scale, 0.0, 0.0, 0.0, 0.0, scale, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, transform, transform, 0.0, 1.0);\n\tvec4 uv = matrix * uv4;\n\tvec4 srcColor = texture2D(texturePrev, uv.xy);\n\tvec4 distColor = texture2D(textureNext, uv.xy);\n\tvec4 result = timePercent < 0.5 ? srcColor : distColor;\n\tvec3 start;\n\tvec3 end;\n\tvec3 middleColor = thruBlk ? vec3(0.0, 0.0, 0.0) : vec3(1.0, 1.0, 1.0);\n\tif ((timePercent < 0.25) || (timePercent > 0.75)) {\n\t\tresult *= 1.0;\n\t}\n\telse if ((timePercent >= 0.25) && (timePercent <= 0.5)) {\n\t\tif (timePercent <= 0.375) {\n\t\t\tstart = result.rgb;\n\t\t\tend = start + (((timePercent - 0.25) / 0.125) * (middleColor - result.rgb));\n\t\t}\n\t\telse {\n\t\t\tstart = result.rgb + (((timePercent - 0.375) / 0.125) * (middleColor - result.rgb));\n\t\t\tend = middleColor;\n\t\t}\n\t\tresult = direction ? vec4(end - (vUv.x * (end - start)), result.a) : vec4(start - (vUv.x * (start - end)), result.a);\n\t}\n\telse if ((timePercent > 0.5) && (timePercent <= 0.75)) {\n\t\tif (timePercent < 0.625) {\n\t\t\tstart = middleColor - (((timePercent - 0.5) / 0.125) * (middleColor - result.rgb));\n\t\t\tend = middleColor;\n\t\t}\n\t\telse {\n\t\t\tstart = result.rgb;\n\t\t\tend = middleColor - (((timePercent - 0.625) / 0.125) * (middleColor - result.rgb));\n\t\t}\n\t\tresult = direction ? vec4(end - (vUv.x * (end - start)), result.a) : vec4(start - (vUv.x * (start - end)), result.a);\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int optionX;\nuniform int optionY;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat lineX = optionX > 0 ? interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 1) : interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 1);\n\tfloat lineY = optionY > 0 ? interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 1) : interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 1);\n\tvec2 uv = vUv.xy;\n\tif ((optionX < 0) && (vUv.x <= lineX)) {\n\t\tuv.x += (1.0 - lineX);\n\t}\n\tif ((optionX > 0) && (vUv.x >= lineX)) {\n\t\tuv.x -= lineX;\n\t}\n\tif ((optionY < 0) && (vUv.y <= lineY)) {\n\t\tuv.y += (1.0 - lineY);\n\t}\n\tif ((optionY > 0) && (vUv.y >= lineY)) {\n\t\tuv.y -= lineY;\n\t}\n\tif ((optionX != 0) && (optionY == 0)) {\n\t\tif (optionX > 0) {\n\t\t\tresult = vUv.x > lineX ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse {\n\t\t\tresult = vUv.x > lineX ? texture2D(textureNext, vUv) : texture2D(texturePrev, uv);\n\t\t}\n\t}\n\tif ((optionX == 0) && (optionY != 0)) {\n\t\tif (optionY > 0) {\n\t\t\tresult = vUv.y > lineY ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse {\n\t\t\tresult = vUv.y > lineY ? texture2D(textureNext, vUv) : texture2D(texturePrev, uv);\n\t\t}\n\t}\n\tif ((optionX != 0) && (optionY != 0)) {\n\t\tif ((optionX > 0) && (optionY > 0)) {\n\t\t\tresult = (vUv.x > lineX) && (vUv.y > lineY) ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse if ((optionX > 0) && (optionY < 0)) {\n\t\t\tresult = (vUv.x > lineX) && (vUv.y < lineY) ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse if ((optionX < 0) && (optionY > 0)) {\n\t\t\tresult = (vUv.x < lineX) && (vUv.y > lineY) ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t\telse {\n\t\t\tresult = (vUv.x < lineX) && (vUv.y < lineY) ? texture2D(texturePrev, uv) : texture2D(textureNext, vUv);\n\t\t}\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int optionX;\nuniform int optionY;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat lineX = optionX > 0 ? interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 1) : interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 1);\n\tfloat lineY = optionY > 0 ? interpolationFloat(0.0, 1.0, 0.0, 1.0, timePercent, 1) : interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 1);\n\tvec2 uv = vUv.xy;\n\tif ((optionX < 0) && (vUv.x > lineX)) {\n\t\tuv.x -= lineX;\n\t}\n\tif ((optionX > 0) && (vUv.x < lineX)) {\n\t\tuv.x += (1.0 - lineX);\n\t}\n\tif ((optionY < 0) && (vUv.y > lineY)) {\n\t\tuv.y -= lineY;\n\t}\n\tif ((optionY > 0) && (vUv.y < lineY)) {\n\t\tuv.y += (1.0 - lineY);\n\t}\n\tif ((optionX != 0) && (optionY == 0)) {\n\t\tif (optionX > 0) {\n\t\t\tresult = vUv.x > lineX ? texture2D(texturePrev, vUv) : texture2D(textureNext, uv);\n\t\t}\n\t\telse {\n\t\t\tresult = vUv.x > lineX ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t}\n\tif ((optionX == 0) && (optionY != 0)) {\n\t\tif (optionY > 0) {\n\t\t\tresult = vUv.y > lineY ? texture2D(texturePrev, vUv) : texture2D(textureNext, uv);\n\t\t}\n\t\telse {\n\t\t\tresult = vUv.y > lineY ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t}\n\tif ((optionX != 0) && (optionY != 0)) {\n\t\tif ((optionX > 0) && (optionY > 0)) {\n\t\t\tresult = (vUv.x < lineX) && (vUv.y < lineY) ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t\telse if ((optionX > 0) && (optionY < 0)) {\n\t\t\tresult = (vUv.x < lineX) && (vUv.y > lineY) ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t\telse if ((optionX < 0) && (optionY > 0)) {\n\t\t\tresult = (vUv.x > lineX) && (vUv.y < lineY) ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t\telse {\n\t\t\tresult = (vUv.x > lineX) && (vUv.y > lineY) ? texture2D(textureNext, uv) : texture2D(texturePrev, vUv);\n\t\t}\n\t}\n\tgl_FragColor = result;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nmat3 yuv2rgb = mat3(1.0, 0.0, 1.13983, 1.0, -0.39465, -0.58060, 1.0, 2.03211, 0.0);\nmat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722, -0.09991, -0.33609, 0.43600, 0.615, -0.5586, -0.05639);\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec3 result;\n\tfloat resultAlpha;\n\tif (timePercent < 0.5) {\n\t\tresult = srcColor.rgb * rgb2yuv;\n\t\tresult.r += interpolationFloat(0.0, 1.0, 0.0, 0.5, timePercent, 0);\n\t\tresultAlpha = srcColor.a;\n\t}\n\telse {\n\t\tresult = distColor.rgb * rgb2yuv;\n\t\tresult.r += interpolationFloat(1.0, 0.0, 0.5, 1.0, timePercent, 0);\n\t\tresultAlpha = distColor.a;\n\t}\n\tresult *= yuv2rgb;\n\tgl_FragColor = vec4(result.rgb, resultAlpha);\n}\n"},function(t,e){t.exports="uniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segmentHeight;\nattribute vec2 segment;\nattribute float times;\nattribute int option;\nvarying vec2 vUv;\nvarying float fakePercent;\nvoid main() {\n\tvUv = uv;\n\tfloat width = segmentWidth * horizontalSegments;\n\tfloat height = segmentHeight * verticalSegments;\n\tvec4 newPosition = vec4(position, 1.0);\n\tvec2 segmentOrigin = vec2(((segment.x + 0.5) * segmentWidth) - (width * 0.5), (height * 0.5) - ((1.0 * (segment.y + 0.5)) * segmentHeight));\n\tif (timePercent > times) {\n\t\tfloat percent = (timePercent - times) / 0.7;\n\t\tif (percent > 1.0) {\n\t\t\tpercent = 1.0;\n\t\t}\n\t\tif (percent > 0.5) {\n\t\t\tpercent += 1.0;\n\t\t}\n\t\tmat4 matrix = mat4(cos((-1.0 * percent) * 3.14), 0.0, sin((-1.0 * percent) * 3.14), 0.0, 0.0, 1.0, 0.0, 0.0, -sin((-1.0 * percent) * 3.14), 0.0, cos((-1.0 * percent) * 3.14), 0.0, 0.0, 0.0, 0.0, 1.0);\n\t\tif (option == 1) {\n\t\t\tmatrix = mat4(1.0, 0.0, 0.0, 0.0, 0.0, cos(percent * 3.14), -sin(percent * 3.14), 0.0, 0.0, sin(percent * 3.13), cos(percent * 3.14), 0.0, 0.0, 0.0, 0.0, 1.0);\n\t\t}\n\t\tnewPosition.x -= segmentOrigin.x;\n\t\tnewPosition.y -= segmentOrigin.y;\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += segmentOrigin.x;\n\t\tnewPosition.y += segmentOrigin.y;\n\t\tif (segment.x < (horizontalSegments / 2.0)) {\n\t\t\tfakePercent = percent - (abs((horizontalSegments / 2.0) - segment.x) * (0.25 / horizontalSegments));\n\t\t}\n\t\telse {\n\t\t\tfakePercent = percent + (abs((horizontalSegments / 2.0) - segment.x) * (0.25 / horizontalSegments));\n\t\t}\n\t}\n\tif ((timePercent < 0.0001) || (timePercent > 0.9999)) {\n\t\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n\t\treturn ;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying float fakePercent;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 color = srcColor;\n\tif (fakePercent > 0.5) {\n\t\tcolor = distColor;\n\t}\n\tif ((fakePercent < 0.5) && (fakePercent > 0.35)) {\n\t\tcolor.a = 0.5;\n\t}\n\tgl_FragColor = color;\n}\n"},function(t,e){t.exports="#define PI 3.14159265\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform float duration;\nattribute vec2 segment;\nattribute float times;\nvarying vec2 vUv;\nmat4 rotateY(float angle) {\n\treturn mat4(cos(angle), 0.0, sin(angle), 0.0, 0.0, 1.0, 0.0, 0.0, -sin(angle), 0.0, cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tvUv = uv;\n\tfloat width = segmentWidth * horizontalSegments;\n\tfloat height = segmentHeight * verticalSegments;\n\tmat4 matrix;\n\tfloat stagePercent;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat selfTimePercent = (timePercent - times) / (4.0 / 5.0);\n\tif (selfTimePercent < 0.0) {\n\t\tselfTimePercent = 0.0;\n\t}\n\telse if (selfTimePercent > 1.0) {\n\t\tselfTimePercent = 1.0;\n\t}\n\tif (selfTimePercent < (2.0 / 5.0)) {\n\t\tstagePercent = selfTimePercent / (2.0 / 5.0);\n\t\tnewPosition.x -= (0.5 * width);\n\t\tmatrix = rotateY(((-1.0 * stagePercent) * PI) * 0.5);\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += (0.5 * width);\n\t}\n\telse if ((selfTimePercent >= (2.0 / 5.0)) && (selfTimePercent < (3.0 / 5.0))) {\n\t\tstagePercent = (selfTimePercent - (2.0 / 5.0)) / (1.0 / 5.0);\n\t\tnewPosition.x -= (0.5 * width);\n\t\tnewPosition = rotateY((-1.0 * PI) * 0.5) * newPosition;\n\t\tmatrix = rotateY(((-1.0 * stagePercent) * PI) * 2.0);\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += (0.5 * width);\n\t\tnewPosition.x -= (width * stagePercent);\n\t}\n\telse {\n\t\tfloat offset = (((newPosition.x + (0.5 * width)) / width) * 2.0) / 5.0;\n\t\tstagePercent = (selfTimePercent - (1.0 / 5.0)) / ((2.0 / 5.0) + offset);\n\t\tif (stagePercent > 1.0) {\n\t\t\tstagePercent = 1.0;\n\t\t}\n\t\tvec4 vvUvv = vec4(vUv.x - 0.5, vUv.y - 0.5, 0.0, 1.0);\n\t\tvvUvv = rotateY(-1.0 * PI) * vvUvv;\n\t\tvUv = vvUvv.xy + 0.5;\n\t\tnewPosition.x -= (0.5 * width);\n\t\tmatrix = rotateY((((-1.0 * stagePercent) * PI) * 0.5) - (PI * 2.5));\n\t\tnewPosition = matrix * newPosition;\n\t\tnewPosition.x += (0.5 * width);\n\t\tnewPosition.x -= width;\n\t}\n\tif ((timePercent < 0.0001) || (timePercent > 0.9999)) {\n\t\tvUv = uv;\n\t\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(position, 1.0);\n\t\treturn ;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 color = srcColor;\n\tif (timePercent > 0.5) {\n\t\tcolor = distColor;\n\t}\n\tif (timePercent < 0.0001) {\n\t\tcolor = srcColor;\n\t}\n\telse if (timePercent > 0.9999) {\n\t\tcolor = distColor;\n\t}\n\tgl_FragColor = color;\n}\n"},function(t,e){t.exports="#define PI 3.14159265\nattribute float index;\nattribute float type;\nattribute float delay;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segments;\nvarying vec2 vUv;\nvarying float vType;\nvarying float rotatePercent;\nmat4 rotateY(float angle) {\n\treturn mat4(cos(angle), 0.0, sin(angle), 0.0, 0.0, 1.0, 0.0, 0.0, -sin(angle), 0.0, cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tvUv = uv;\n\tvType = type;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat selfPercent = (timePercent - delay) / 0.7;\n\trotatePercent = selfPercent;\n\tif (selfPercent < 0.0) {\n\t\tselfPercent = 0.0;\n\t}\n\telse if (selfPercent > 1.0) {\n\t\tselfPercent = 1.0;\n\t}\n\tfloat offsetX = ((segments * segmentWidth) * 0.5) - ((index + 0.5) * segmentWidth);\n\tfloat offsetZ = segmentWidth * 0.5;\n\tnewPosition.x += offsetX;\n\tnewPosition.z += offsetZ;\n\tnewPosition.x *= (0.9 + ((abs(timePercent - 0.5) / 0.5) * 0.1));\n\tnewPosition.z *= (0.9 + ((abs(timePercent - 0.5) / 0.5) * 0.1));\n\tnewPosition = rotateY((PI * 0.5) * selfPercent) * newPosition;\n\tnewPosition.x -= offsetX;\n\tnewPosition.z -= offsetZ;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying float vType;\nvarying float rotatePercent;\nmat3 yuv2rgb = mat3(1.0, 0.0, 1.13983, 1.0, -0.39465, -0.58060, 1.0, 2.03211, 0.0);\nmat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722, -0.09991, -0.33609, 0.43600, 0.615, -0.5586, -0.05639);\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec3 srcYuv;\n\tvec3 distYuv;\n\tif (rotatePercent < 0.5) {\n\t\tdistYuv = distColor.rgb * rgb2yuv;\n\t\tdistYuv.r *= (1.0 - (abs(rotatePercent - 0.5) / 0.5));\n\t\tdistColor = vec4(distYuv * yuv2rgb, distColor.a);\n\t}\n\telse {\n\t\tsrcYuv = distColor.rgb * rgb2yuv;\n\t\tsrcYuv.r *= (abs(rotatePercent - 0.5) / 0.5);\n\t\tsrcColor = vec4(srcYuv * yuv2rgb, srcColor.a);\n\t}\n\tvec4 color = vType < 0.5 ? srcColor : distColor;\n\tgl_FragColor = color;\n}\n"},function(t,e){t.exports="float easeInFloat(float t, float b, float c, float d) {\n\tt = t / d;\n\treturn ((c * t) * t) + b;\n}\nfloat interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.141592653\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float timePercent;\nuniform float segmentWidth;\nuniform float segmentHeight;\nattribute float isLeft;\nvarying vec2 vUv;\nvarying vec4 shadow;\nvoid main() {\n\tvUv = uv;\n\tfloat scaleX;\n\tfloat transform;\n\tfloat displacement;\n\tvec4 newPosition = vec4(position, 1.0);\n\tvec4 glPosition = (projectionMatrix * modelViewMatrix) * newPosition;\n\tfloat crestCount = 24.0;\n\tfloat width = horizontalSegments * segmentWidth;\n\tfloat height = verticalSegments * segmentHeight;\n\tfloat heightFactor = (newPosition.y + (height * 0.5)) / height;\n\tfloat scaleY = interpolationFloat(1.0, 1.05, 0.0, 0.11, timePercent, 0);\n\tnewPosition.y += (height * 0.5);\n\tnewPosition.y *= scaleY;\n\tnewPosition.y -= (height * 0.5);\n\tnewPosition.y += 10.0;\n\tif ((timePercent > 0.0) && (timePercent < 0.333)) {\n\t\tfloat delay = (1.0 - heightFactor) * 0.1;\n\t\tscaleX = interpolationFloat(1.0, 0.5, 0.0 + delay, 0.333, timePercent, 1);\n\t}\n\telse if ((timePercent >= 0.333) && (timePercent < 0.5)) {\n\t\tfloat scaleTop = 0.5;\n\t\tfloat scaleBottom = interpolationFloat(0.5, 0.25, 0.333, 0.5, timePercent, 2);\n\t\tfloat incr = easeInFloat(1.0 - heightFactor, 0.0, abs(scaleBottom - scaleTop), 1.0);\n\t\tscaleX = scaleTop - incr;\n\t}\n\telse if ((timePercent >= 0.5) && (timePercent < 0.583)) {\n\t\tfloat scaleTop = 0.5;\n\t\tfloat scaleBottom = interpolationFloat(0.25, 0.5, 0.5, 0.583, timePercent, 1);\n\t\tfloat incr = easeInFloat(1.0 - heightFactor, 0.0, abs(scaleBottom - scaleTop), 1.0);\n\t\tscaleX = scaleTop - incr;\n\t}\n\telse if (timePercent >= 0.583) {\n\t\tfloat scaleTop = 0.5;\n\t\tfloat scaleBottom = interpolationFloat(0.5, 0.75, 0.583, 0.666, timePercent, 2);\n\t\tfloat incr = easeInFloat(1.0 - heightFactor, 0.0, abs(scaleBottom - scaleTop), 1.0);\n\t\tscaleX = scaleTop + incr;\n\t}\n\tif (timePercent > 0.583) {\n\t\tdisplacement = (isLeft < 0.5 ? 1.0 : -1.0) * interpolationFloat(0.0, width / 2.0, 0.583, 1.0, timePercent, 0);\n\t}\n\tfloat ampTop = interpolationFloat(0.0, 1.0, 0.0, 0.11, timePercent, 0);\n\tfloat ampBottom = interpolationFloat(0.0, 1.0, 0.11, 0.22, timePercent, 0);\n\tfloat amp = ampBottom + (heightFactor * abs(ampBottom - ampTop));\n\tfloat foo = newPosition.x * ((crestCount * PI) / width);\n\tnewPosition.z = (amp * cos(foo + (PI / 2.0))) * 20.0;\n\ttransform = (isLeft < 0.5 ? -1.0 : 1.0) * (width * 0.5);\n\tnewPosition.x += transform;\n\tnewPosition.x *= scaleX;\n\tnewPosition.x -= transform;\n\tnewPosition.x += displacement;\n\tshadow = vec4(0.0, 0.0, 0.0, 0.0);\n\tif (newPosition.z < 15.0) {\n\t\tfloat alpha = 0.3 * (1.0 - ((newPosition.z + 20.0) / 35.0));\n\t\tshadow.a = alpha * amp;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying vec4 shadow;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 color = blendSrcOver(shadow, srcColor);\n\tgl_FragColor = color;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265\nuniform float timePercent;\nuniform float aCoefficient;\nuniform float zCurveLimit;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat curve;\n\tfloat progress = option == 1 ? halfWidth - newPosition.x : newPosition.x + halfWidth;\n\tfloat aStart = interpolationFloat(0.00000009, aCoefficient, 0.0, 0.5, timePercent, 0);\n\tfloat aEnd = 0.0000009;\n\tfloat zStart = interpolationFloat(0.0, zCurveLimit, 0.0, 0.5, timePercent, 0);\n\tfloat zEnd = 0.0;\n\tfloat a = interpolationFloat(aStart, aEnd, 0.0, halfWidth * 2.0, progress, 0);\n\tfloat z = interpolationFloat(zStart, zEnd, 0.0, halfWidth * 2.0, progress, 0);\n\tnewPosition.z -= (((-a * newPosition.y) * newPosition.y) + z);\n\tfloat scaleYStart = interpolationFloat(1.0, 0.8, 0.0, 0.5, timePercent, 0);\n\tfloat scaleYEnd = 1.0;\n\tfloat scaleY = interpolationFloat(scaleYStart, scaleYEnd, 0.0, halfWidth * 2.0, progress, 0);\n\tnewPosition.y += halfHeight;\n\tnewPosition.y *= scaleY;\n\tfloat angle = interpolationFloat(0.0, -((2.0 * PI) / 3.0), 0.111, 1.0, timePercent, 1);\n\tmat4 rotateX = mat4(1.0, 0.0, 0.0, 0.0, 0.0, cos(angle), sin(angle), 0.0, 0.0, -sin(angle), cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n\tnewPosition = rotateX * newPosition;\n\tnewPosition.y -= halfHeight;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat alpha = interpolationFloat(0.0, 0.6, 0.5, 1.0, timePercent, 0);\n\tvec4 shadow = vec4(0.0, 0.0, 0.0, alpha);\n\tgl_FragColor = blendSrcOver(shadow, srcColor);\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform float timePercent;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform int option;\nvarying vec2 vUv;\nvarying float shadowAlpha;\nmat2 rotateOrigin(float angle) {\n\treturn mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n}\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec2 shadowPosition = vec2(position.xy);\n\tfloat presetAngle = option == 1 ? 0.77 : 0.27;\n\tfloat rotateAngle = PI * presetAngle;\n\tfloat min_r = halfWidth * 0.05;\n\tshadowPosition = rotateOrigin(rotateAngle) * shadowPosition;\n\tvec4 newPosition = vec4(shadowPosition.xy, position.z, 1.0);\n\tfloat line = interpolationFloat(0.0, halfWidth * 2.8, 0.0, 1.0, timePercent, 1);\n\tfloat dis2BaseLine = halfWidth - newPosition.x;\n\tfloat dis2Line = line - dis2BaseLine;\n\tfloat L = line <= (halfWidth * 2.0) ? line : halfWidth * 2.0;\n\tfloat r = L / PI;\n\tr = r < min_r ? min_r : r;\n\tfloat angle = dis2Line / r;\n\tif (((dis2Line > 0.0) && (dis2Line < (line * 0.5))) && (r > min_r)) {\n\t\tshadowAlpha = interpolationFloat(0.0, 0.3, 0.0, line * 0.5, dis2Line, 0);\n\t}\n\telse {\n\t\tshadowAlpha = 0.0;\n\t}\n\tif (dis2BaseLine < line) {\n\t\tnewPosition.x = ((sin(angle) * r) + halfWidth) - line;\n\t\tnewPosition.z = (r - (cos(angle) * r)) * 0.5;\n\t}\n\tvec2 finalPosition = vec2(newPosition.xy);\n\tfinalPosition = rotateOrigin(-rotateAngle) * finalPosition;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * vec4(finalPosition.xy, newPosition.z, 1.0);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvarying float shadowAlpha;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec4 shadow = vec4(0.0, 0.0, 0.0, shadowAlpha);\n\tgl_FragColor = blendSrcOver(shadow, srcColor);\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform float timePercent;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform int option;\nvarying vec2 vUv;\nmat4 rotateX(float angle) {\n\treturn mat4(1.0, 0.0, 0.0, 0.0, 0.0, cos(angle), sin(angle), 0.0, 0.0, -sin(angle), cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat progress = option == 0 ? halfWidth - newPosition.x : halfWidth + newPosition.x;\n\tfloat delay = interpolationFloat(0.0, 0.08, 0.0, halfWidth * 2.0, progress, 0);\n\tfloat arc = halfHeight - newPosition.y;\n\tfloat L;\n\tif (timePercent < 0.8) {\n\t\tL = interpolationFloat(halfHeight * 4.0, halfHeight * 22.0, 0.3 + delay, 0.8, timePercent, 0);\n\t}\n\telse {\n\t\tL = interpolationFloat(halfHeight * 22.0, halfHeight * 300.0, 0.8, 1.0, timePercent, 0);\n\t}\n\tfloat r = L / (2.0 * PI);\n\tfloat angle = PI - (arc / r);\n\tfloat y = sin(angle) * r;\n\tfloat z = cos(angle) * r;\n\tnewPosition.y = halfHeight - y;\n\tnewPosition.z = (z + r) * 0.45;\n\tfloat rotateAngle = interpolationFloat(-PI * 0.5, 0.0, 0.0 + delay, 0.4, timePercent, 0);\n\tnewPosition.y -= halfHeight;\n\tnewPosition = rotateX(rotateAngle) * newPosition;\n\tnewPosition.y += halfHeight;\n\tfloat backRotate1 = interpolationFloat(0.0, PI * 0.03, 0.75, 0.9, timePercent, 0);\n\tnewPosition.y -= halfHeight;\n\tnewPosition = rotateX(backRotate1) * newPosition;\n\tnewPosition.y += halfHeight;\n\tfloat backRotate2 = interpolationFloat(0.0, -PI * 0.03, 0.8, 1.0, timePercent, 0);\n\tnewPosition.y -= halfHeight;\n\tnewPosition = rotateX(backRotate2) * newPosition;\n\tnewPosition.y += halfHeight;\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat alpha = interpolationFloat(0.0, 0.6, 0.5, 1.0, timePercent, 0);\n\tvec4 shadow = vec4(0.0, 0.0, 0.0, 0.0);\n\tgl_FragColor = blendSrcOver(shadow, distColor);\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nfloat interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nvarying vec2 vUv;\nvec2 transform(vec2 uv) {\n\tuv.y = (uv.y * height) / width;\n\treturn uv - vec2(0.5, (0.5 * height) / width);\n}\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tfloat shadowAngle = PI / 6.0;\n\tfloat clockAngle;\n\tvec2 a;\n\tvec2 b = transform(vUv);\n\tfloat angle;\n\tif (timePercent < 0.5) {\n\t\ta = vec2(0.0, 0.5);\n\t\tclockAngle = interpolationFloat(0.0, PI, 0.0, 0.5, timePercent, 0);\n\t\tif (b.x > 0.0) {\n\t\t\tangle = acos(((a.x * b.x) + (a.y * b.y)) / (sqrt((a.x * a.x) + (a.y * a.y)) * sqrt((b.x * b.x) + (b.y * b.y))));\n\t\t\tif (angle < clockAngle) {\n\t\t\t\tif (angle > (clockAngle - shadowAngle)) {\n\t\t\t\t\tfloat shadowAlpha = interpolationFloat(1.0, 0.0, 0.0, 1.0, abs(clockAngle - angle) / shadowAngle, 0);\n\t\t\t\t\tsrcColor.a = shadowAlpha;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsrcColor.a = 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = 1.0;\n\t\t}\n\t}\n\telse {\n\t\ta = vec2(0.0, -0.5);\n\t\tclockAngle = interpolationFloat(0.0, PI + shadowAngle, 0.5, 1.0, timePercent, 0);\n\t\tif (b.x <= 0.0) {\n\t\t\tangle = acos(((a.x * b.x) + (a.y * b.y)) / (sqrt((a.x * a.x) + (a.y * a.y)) * sqrt((b.x * b.x) + (b.y * b.y))));\n\t\t\tif (angle < clockAngle) {\n\t\t\t\tif (angle > (clockAngle - shadowAngle)) {\n\t\t\t\t\tfloat shadowAlpha = interpolationFloat(1.0, 0.0, 0.0, 1.0, abs(clockAngle - angle) / shadowAngle, 0);\n\t\t\t\t\tsrcColor.a = shadowAlpha;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsrcColor.a = 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = 0.0;\n\t\t}\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec2 uv = vUv;\n\tbool useSrc = false;\n\tvec2 row;\n\tfloat delay = 0.02;\n\tbool isVert = bool(option);\n\tint segmentCount = isVert ? 10 : 7;\n\tfloat axis = isVert ? uv.y : uv.x;\n\tfloat compareAxis = isVert ? uv.x : uv.y;\n\tfor (int i = 0; i < segmentCount; i++) {\n\t\tfloat fi = float(i);\n\t\trow.r = (fi * 1.0) / float(segmentCount);\n\t\trow.g = (float(i + 1) * 1.0) / float(segmentCount);\n\t\tif ((compareAxis <= row.g) && (compareAxis > row.r)) {\n\t\t\tif ((i % 2) == 0) {\n\t\t\t\tfloat line = interpolationFloat(0.0, 1.0, delay * fi, (delay * fi) + 0.86, timePercent, 1);\n\t\t\t\tif (axis < line) {\n\t\t\t\t\tuseSrc = false;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\taxis -= line;\n\t\t\t\t\tuseSrc = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat line = interpolationFloat(1.0, 0.0, delay * fi, (delay * fi) + 0.86, timePercent, 1);\n\t\t\t\tif (axis < line) {\n\t\t\t\t\taxis = (1.0 - line) + axis;\n\t\t\t\t\tuseSrc = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tuseSrc = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (isVert) {\n\t\tuv.y = axis;\n\t}\n\telse {\n\t\tuv.x = axis;\n\t}\n\tvec4 srcColor = texture2D(texturePrev, uv);\n\tvec4 distColor = texture2D(textureNext, uv);\n\tgl_FragColor = useSrc ? srcColor : distColor;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nfloat interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform float width;\nuniform float height;\nuniform int option;\nvarying vec2 vUv;\nvoid main() {\n\tvec2 uvSrc = vUv;\n\tvec2 uvDist = vUv;\n\tfloat scaleSrc = option == 1 ? interpolationFloat(1.0, 2.0, 0.0, 1.0, timePercent, 0) : interpolationFloat(1.0, 0.1, 0.0, 1.0, timePercent, 0);\n\tfloat scaleDist = option == 1 ? interpolationFloat(0.1, 1.0, 0.0, 1.0, timePercent, 0) : interpolationFloat(2.0, 1.0, 0.0, 1.0, timePercent, 0);\n\tuvSrc -= 0.5;\n\tuvSrc *= scaleSrc;\n\tuvSrc += 0.5;\n\tuvDist -= 0.5;\n\tuvDist *= scaleDist;\n\tuvDist += 0.5;\n\tvec4 srcColor = texture2D(texturePrev, uvSrc);\n\tsrcColor.a = interpolationFloat(1.0, 0.0, 0.0, 1.0, timePercent, 0);\n\tvec4 distColor;\n\tif ((((uvDist.x > 1.0) || (uvDist.x < 0.0)) || (uvDist.y > 1.0)) || (uvDist.y < 0.0)) {\n\t\tdistColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t}\n\telse {\n\t\tdistColor = texture2D(textureNext, uvDist);\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\n#define PI 3.14159265358\nuniform float timePercent;\nuniform float horizontalSegments;\nuniform float verticalSegments;\nuniform float segmentWidth;\nuniform float segmentHeight;\nuniform int option;\nvarying vec2 vUv;\nmat4 rotateY(float angle) {\n\tif (option == 1) {\n\t\tangle *= -1.0;\n\t}\n\treturn mat4(cos(angle), 0.0, sin(angle), 0.0, 0.0, 1.0, 0.0, 0.0, -sin(angle), 0.0, cos(angle), 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvoid main() {\n\tfloat halfWidth = (segmentWidth * horizontalSegments) * 0.5;\n\tfloat halfHeight = (segmentHeight * verticalSegments) * 0.5;\n\tvUv = uv;\n\tvec4 newPosition = vec4(position, 1.0);\n\tfloat stageOneAngle = PI / 14.0;\n\tfloat stageTwoAngle = (PI * 12.0) / 14.0;\n\tfloat stage_1 = 0.1;\n\tfloat stage_2 = 0.8;\n\tif (timePercent < 0.5) {\n\t\tnewPosition.z = interpolationFloat(0.0, -100.0, 0.0, 0.5, timePercent, 0);\n\t}\n\telse {\n\t\tnewPosition.z = interpolationFloat(-100.0, 0.0, 0.5, 1.0, timePercent, 0);\n\t}\n\tif (timePercent < stage_1) {\n\t\tfloat angle = interpolationFloat(0.0, stageOneAngle, 0.0, stage_1, timePercent, 0);\n\t\tnewPosition.x += halfWidth;\n\t\tnewPosition *= rotateY(angle);\n\t\tnewPosition.x -= halfWidth;\n\t}\n\telse if ((timePercent >= stage_1) && (timePercent < stage_2)) {\n\t\tif (timePercent > 0.5) {\n\t\t\tnewPosition *= rotateY(PI);\n\t\t}\n\t\tfloat offset = halfWidth - (sin((PI * 0.5) - stageOneAngle) * halfWidth);\n\t\tfloat angle = interpolationFloat(0.0, stageTwoAngle, stage_1, stage_2, timePercent, 0);\n\t\tnewPosition *= rotateY(angle);\n\t\tnewPosition.x += halfWidth;\n\t\tnewPosition *= rotateY(stageOneAngle);\n\t\tnewPosition.x -= halfWidth;\n\t\tnewPosition.x += interpolationFloat(0.0, 2.0 * offset, stage_1, stage_2, timePercent, 0);\n\t}\n\telse {\n\t\tfloat angle = interpolationFloat(-stageOneAngle, 0.0, stage_2, 1.0, timePercent, 0);\n\t\tnewPosition.x -= halfWidth;\n\t\tnewPosition *= rotateY(angle);\n\t\tnewPosition.x += halfWidth;\n\t}\n\tgl_Position = (projectionMatrix * modelViewMatrix) * newPosition;\n}\n"},function(t,e){t.exports="uniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tgl_FragColor = timePercent < 0.5 ? srcColor : distColor;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\n#define PI 3.14159265358\nuniform sampler2D texturePrev;\nuniform sampler2D textureNext;\nuniform float timePercent;\nuniform int option;\nvarying vec2 vUv;\nmat2 rotateOrigin(float angle) {\n\treturn mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n}\nvoid main() {\n\tfloat alphaStart;\n\tfloat alphaEnd;\n\tfloat rectStart;\n\tfloat rectEnd;\n\tbool isRevert = (option == 3) || (option == 2);\n\tbool rotateParam = (option == 3) || (option == 1);\n\tif (timePercent <= 0.33) {\n\t\talphaStart = isRevert ? 1.0 - (timePercent / 0.33) : 1.0;\n\t\talphaEnd = isRevert ? 1.0 : 1.0 - (timePercent / 0.33);\n\t\trectStart = isRevert ? 0.0 : 1.5;\n\t\trectEnd = isRevert ? 0.5 : 2.0;\n\t}\n\telse if ((timePercent > 0.33) && (timePercent <= 0.66)) {\n\t\talphaStart = isRevert ? 0.0 : 1.0;\n\t\talphaEnd = isRevert ? 1.0 : 0.0;\n\t\trectEnd = isRevert ? (((timePercent - 0.33) / 0.33) * 1.5) + 0.5 : 2.0 - (((timePercent - 0.33) / 0.33) * 1.5);\n\t\trectStart = rectEnd - 0.5;\n\t}\n\telse {\n\t\talphaStart = isRevert ? 0.0 : (1.0 - timePercent) / (1.0 - 0.66);\n\t\talphaEnd = isRevert ? (1.0 - timePercent) / (1.0 - 0.66) : 0.0;\n\t\trectStart = isRevert ? 1.5 : 0.0;\n\t\trectEnd = isRevert ? 2.0 : 0.5;\n\t}\n\tif (!rotateParam) {\n\t\trectStart -= 1.0;\n\t\trectEnd -= 1.0;\n\t}\n\tfloat rotate = rotateParam ? PI * 0.25 : PI * 0.75;\n\tvec2 rotateUv = vUv * rotateOrigin(rotate);\n\tvec4 srcColor = texture2D(texturePrev, vUv);\n\tvec4 distColor = texture2D(textureNext, vUv);\n\tvec2 startPoint = vec2(rectStart, 0.0) * rotateOrigin(rotate);\n\tvec2 endPoint = vec2(rectEnd, 0.0) * rotateOrigin(rotate);\n\tif (rotateParam) {\n\t\tif (rotateUv.x >= endPoint.x) {\n\t\t\tsrcColor.a = isRevert ? 1.0 : 0.0;\n\t\t}\n\t\telse if (rotateUv.x <= startPoint.x) {\n\t\t\tsrcColor.a = isRevert ? 0.0 : 1.0;\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = alphaStart + (((rotateUv.x - startPoint.x) / (0.5 / sqrt(2.0))) * (alphaEnd - alphaStart));\n\t\t}\n\t}\n\telse {\n\t\tif (rotateUv.x <= endPoint.x) {\n\t\t\tsrcColor.a = isRevert ? 1.0 : 0.0;\n\t\t}\n\t\telse if (rotateUv.x >= startPoint.x) {\n\t\t\tsrcColor.a = isRevert ? 0.0 : 1.0;\n\t\t}\n\t\telse {\n\t\t\tsrcColor.a = alphaStart + (((startPoint.x - rotateUv.x) / (0.5 / sqrt(2.0))) * (alphaEnd - alphaStart));\n\t\t}\n\t}\n\tgl_FragColor = blendSrcOver(srcColor, distColor);\n}\n"},function(t,e,n){(function(t){var r=n(105),i=n(106),o=setTimeout;function a(t){return Boolean(t&&void 0!==t.length)}function s(){}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function l(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void h(e.promise,t)}c(e.promise,r)}else(1===t._state?c:h)(e.promise,t._value)}))):t._deferreds.push(e)}function c(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==_(e)||"function"==typeof e)){var n=e.then;if(e instanceof u)return t._state=3,t._value=e,void d(t);if("function"==typeof n)return void f((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,d(t)}catch(e){h(t,e)}var r,i}function h(t,e){t._state=2,t._value=e,d(t)}function d(t){2===t._state&&0===t._deferreds.length&&u._immediateFn((function(){t._handled||u._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)l(t,t._deferreds[e]);t._deferreds=null}function A(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function f(t,e){var n=!1;try{t((function(t){n||(n=!0,c(e,t))}),(function(t){n||(n=!0,h(e,t))}))}catch(t){if(n)return;n=!0,h(e,t)}}u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){var n=new this.constructor(s);return l(this,new A(t,e,n)),n},u.prototype.finally=r.a,u.all=function(t){return new u((function(e,n){if(!a(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==_(a)||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(e){o(t,e)}),n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var s=0;s<r.length;s++)o(s,r[s])}))},u.allSettled=i.a,u.resolve=function(t){return t&&"object"==_(t)&&t.constructor===u?t:new u((function(e){e(t)}))},u.reject=function(t){return new u((function(e,n){n(t)}))},u.race=function(t){return new u((function(e,n){if(!a(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)u.resolve(t[r]).then(e,n)}))},u._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){o(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=u}).call(this,n(136).setImmediate)},function(t,e,n){e.a=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}},function(t,e,n){e.a=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(_(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"==_(n)||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--i&&e(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))}},function(t,e,n){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){var r=n(20),i=n(15);t.exports=function(t){return!0===t||!1===t||i(t)&&"[object Boolean]"==r(t)}},function(t,e){t.exports="precision mediump float;\nattribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord() {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tfilterCoord = aVertexPosition * outputFrame.zw;\n}\n"},function(t,e){t.exports="vec4 blendSrcOver(vec4 src, vec4 dist) {\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tsrc.r *= src.a;\n\tsrc.g *= src.a;\n\tsrc.b *= src.a;\n\tresult.a = src.a + (dist.a * (1.0 - src.a));\n\tresult.r = (src.r + (dist.r * (1.0 - src.a))) / result.a;\n\tresult.g = (src.g + (dist.g * (1.0 - src.a))) / result.a;\n\tresult.b = (src.b + (dist.b * (1.0 - src.a))) / result.a;\n\treturn result;\n}\nprecision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 uShapeFilterArea;\nuniform sampler2D uSampler;\nuniform sampler2D uSdfSampler;\nuniform float uSdfIsReady;\nuniform float uSdfMaxDis;\nuniform float uRad;\nuniform vec4 uGlowColor;\nuniform vec2 uSdfPosition;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvoid main() {\n\tvec4 texColor = texture2D(uSampler, vTextureCoord);\n\tvec4 glowColor = vec4(uGlowColor.rgb * uGlowColor.a, uGlowColor.a);\n\tfloat a = 1.0;\n\tif (uSdfIsReady > 0.0) {\n\t\tvec2 cod = vec2(filterCoord.x / uShapeFilterArea.z, filterCoord.y / uShapeFilterArea.w);\n\t\tvec4 sdfColor = texture2D(uSdfSampler, cod + uSdfPosition);\n\t\tfloat dis = sdfColor.a * uSdfMaxDis;\n\t\tif ((sdfColor.r <= 0.0) && (dis >= (uRad * 0.5))) {\n\t\t\ta = 1.0 - smoothstep(uRad * 0.5, uRad, dis);\n\t\t}\n\t}\n\tvec4 resultColor = blendSrcOver(texColor, glowColor);\n\tresultColor.rgb *= resultColor.a;\n\tresultColor.rgb *= a;\n\tresultColor.a *= a;\n\tgl_FragColor = resultColor;\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec2 filterCoord;\nuniform vec4 uShapeFilterArea;\nuniform sampler2D uSampler;\nuniform sampler2D uSdfSampler;\nuniform float uSdfIsReady;\nuniform float uSdfMaxDis;\nuniform float uRad;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nvoid main() {\n\tvec4 texColor = texture2D(uSampler, vTextureCoord);\n\tif (uSdfIsReady > 0.0) {\n\t\tfloat dx = uShapeFilterArea.x < 0.0 ? -uShapeFilterArea.x : 0.0;\n\t\tfloat dy = uShapeFilterArea.y < 0.0 ? -uShapeFilterArea.y : 0.0;\n\t\tvec2 cod = vec2((filterCoord.x + dx) / uShapeFilterArea.z, (filterCoord.y + dy) / uShapeFilterArea.w);\n\t\tvec4 sdfColor = texture2D(uSdfSampler, cod);\n\t\tfloat dis = sdfColor.a * uSdfMaxDis;\n\t\tif (texColor.a > 0.0392156862745098) {\n\t\t\tif (dis <= (uRad / 2.0)) {\n\t\t\t\tfloat a = smoothstep(0.0, uRad / 2.0, dis) * 0.1;\n\t\t\t\ttexColor.rgb *= a;\n\t\t\t\ttexColor.a = a;\n\t\t\t}\n\t\t\telse if ((dis > (uRad / 2.0)) && (dis < (uRad * 1.2))) {\n\t\t\t\tfloat a = (smoothstep(uRad / 2.0, uRad * 1.2, dis) * 0.9) + 0.1;\n\t\t\t\ttexColor.rgb *= a;\n\t\t\t\ttexColor.a = a;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\ttexColor.rgba *= 0.0;\n\t\t}\n\t}\n\tgl_FragColor = texColor;\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nvoid main() {\n\tvec4 sourceColor = texture2D(uSampler, vTextureCoord);\n\tif (sourceColor.a == 0.0) {\n\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t}\n\telse {\n\t\tgl_FragColor = uColor * sourceColor.a;\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform vec4 inputSize;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform float uStartAlpha;\nuniform float uEndAlpha;\nuniform float uStartPos;\nuniform float uEndPos;\nuniform float uHeight;\nvoid main() {\n\tvec4 sourceColor = texture2D(uSampler, vTextureCoord);\n\tvec2 cod = vTextureCoord * inputSize.xy;\n\tfloat startY = uStartPos * uHeight;\n\tfloat endY = uEndPos * uHeight;\n\tif ((cod.y >= startY) && (cod.y <= endY)) {\n\t\tfloat alpha = uStartAlpha - (((cod.y - startY) / (endY - startY)) * (uStartAlpha - uEndAlpha));\n\t\tgl_FragColor = sourceColor * alpha;\n\t}\n\telse {\n\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t}\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 vTextureCoord;\nuniform vec4 inputSize;\nvarying vec2 filterCoord;\nuniform vec4 uShapeFilterArea;\nuniform sampler2D uSampler;\nvoid main() {\n\tvec4 texColor = texture2D(uSampler, vTextureCoord);\n\tif (texColor.r > 0.0) {\n\t\tvec2 translateCoord = vec2(filterCoord.x + 10.0, filterCoord.y);\n\t\tvec4 translateColor = texture2D(uSampler, translateCoord * inputSize.zw);\n\t\tif (translateColor.a > 0.0) {\n\t\t\tgl_FragColor = texColor;\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n\t\t}\n\t}\n\telse {\n\t\tgl_FragColor = texColor;\n\t}\n}\n"},function(t,e,n){(function(n){var r;
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){var i=function(){this.init()};i.prototype={init:function(){var t=this||o;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||A(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=e._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||A(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=e._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},stop:function(){for(var t=this||o,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,A()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator?t._navigator.userAgent:"",i=r.match(/OPR\/([0-6].)/g),a=i&&parseInt(i[0].split("/")[1],10)<33,s=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),u=r.match(/Version\/(.*?) /),l=s&&u&&parseInt(u[1],10)<15;return t._codecs={mp3:!(a||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||o;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function e(n){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,t._releaseHtml5Audio(r)}catch(e){t.noAudio=!0;break}for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var o=t._howls[i]._getSoundIds(),a=0;a<o.length;a++){var s=t._howls[i]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}t._autoResume();var u=t.ctx.createBufferSource();u.buffer=t._scratchBuffer,u.connect(t.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),u.onended=function(){u.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||o;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||o;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new i,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return o.ctx||A(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=o.usingWebAudio&&!e._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var n,r;if(this._format&&this._format[e])n=this._format[e];else{if("string"!=typeof(r=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&l(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);1===i?t=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!t&&(t=s._sprite||"__default"),"loaded"!==n._state){s._sprite=t,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return e||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var l=Math.max(0,s._seek>0?s._seek:n._sprite[t][0]/1e3),c=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-l),h=1e3*c/Math.abs(s._rate),d=n._sprite[t][0]/1e3,A=(n._sprite[t][0]+n._sprite[t][1])/1e3;s._sprite=t,s._ended=!1;var f=function(){s._paused=!1,s._seek=l,s._start=d,s._stop=A,s._loop=!(!s._loop&&!n._sprite[t][2])};if(!(l>=A)){var p=s._node;if(n._webAudio){var g=function(){n._playLock=!1,f(),n._refreshBuffer(s);var t=s._muted||n._muted?0:s._volume;p.gain.setValueAtTime(t,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===p.bufferSource.start?s._loop?p.bufferSource.noteGrainOn(0,l,86400):p.bufferSource.noteGrainOn(0,l,c):s._loop?p.bufferSource.start(0,l,86400):p.bufferSource.start(0,l,c),h!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h)),e||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===o.state&&"interrupted"!==o.ctx.state?g():(n._playLock=!0,n.once("resume",g),n._clearTimer(s._id))}else{var v=function(){p.currentTime=l,p.muted=s._muted||n._muted||o._muted||p.muted,p.volume=s._volume*o.volume(),p.playbackRate=s._rate;try{var r=p.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,f(),r.then((function(){n._playLock=!1,p._unlocked=!0,e?n._loadQueue():n._emit("play",s._id)})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):e||(n._playLock=!1,f(),n._emit("play",s._id)),p.playbackRate=s._rate,p.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h):(n._endTimers[s._id]=function(){n._ended(s),p.removeEventListener("ended",n._endTimers[s._id],!1)},p.addEventListener("ended",n._endTimers[s._id],!1))}catch(t){n._emit("playerror",s._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===p.src&&(p.src=n._src,p.load());var m=window&&window.ejecta||!p.readyState&&o._navigator.isCocoonJS;if(p.readyState>=3||m)v();else{n._playLock=!0,n._state="loading";p.addEventListener(o._canPlayEvent,(function t(){n._state="loaded",v(),p.removeEventListener(o._canPlayEvent,t,!1)}),!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),r=0;r<n.length;r++){e._clearTimer(n[r]);var i=e._soundById(n[r]);if(i&&!i._paused&&(i._seek=e.seek(n[r]),i._rateSeek=0,i._paused=!0,e._stopFade(n[r]),i._node))if(e._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),e._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||e._emit("pause",i?i._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),e||n._emit("stop",o._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=t,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||t),n._emit("mute",a._id))}return n},volume:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else i.length>=2&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var u=0;u<e.length;u++)(n=r._soundById(e[u]))&&(n._volume=t,i[2]||r._stopFade(e[u]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*o.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(t,e,n,r)}}),i;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),i.volume(t,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if(r||i._stopFade(a[s]),i._webAudio&&!u._muted){var l=o.ctx.currentTime,c=l+n/1e3;u._volume=t,u._node.gain.setValueAtTime(t,l),u._node.gain.linearRampToValueAtTime(e,c)}i._startFadeInterval(u,t,e,n,a[s],void 0===r)}}return i},_startFadeInterval:function(t,e,n,r,i,o){var a=this,s=e,u=n-e,l=Math.abs(u/.01),c=Math.max(4,l>0?r/l:r),h=Date.now();t._fadeTo=n,t._interval=setInterval((function(){var i=(Date.now()-h)/r;h=Date.now(),s+=u*i,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),a._webAudio?t._volume=s:a.volume(s,t._id,!0),o&&(a._volume=s),(n<e&&s<=n||n>e&&s>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(n,t._id),a._emit("fade",t._id))}),c)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;t=i[0],r._loop=t}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=r._getSoundIds(e),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(o[a])&&(r.pause(o[a],!0),r.play(o[a],!0)))));return r},rate:function(){var t,e,n,r=this,i=arguments;if(0===i.length)e=r._sounds[0]._id;else if(1===i.length){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if("number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var u=0;u<e.length;u++)if(n=r._soundById(e[u])){r.playing(e[u])&&(n._rateSeek=r.seek(e[u]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,o.ctx.currentTime):n._node&&(n._node.playbackRate=t);var l=r.seek(e[u]),c=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-l,h=1e3*c/Math.abs(n._rate);!r._endTimers[e[u]]&&n._paused||(r._clearTimer(e[u]),r._endTimers[e[u]]=setTimeout(r._ended.bind(r,n),h)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)n._sounds.length&&(e=n._sounds[0]._id);else if(1===r.length){var i=n._getSoundIds(),a=i.indexOf(r[0]);a>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var s=n._soundById(e);if(s){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var u=n.playing(e)?o.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+u*Math.abs(s._rate))}return s._node.currentTime}var c=n.playing(e);c&&n.pause(e,!0),s._seek=t,s._ended=!1,n._clearTimer(e),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=t);var h=function(){c&&n.play(e,!0),n._emit("seek",e)};if(c&&!n._webAudio){var d=function t(){n._playLock?setTimeout(t,0):h()};setTimeout(d,0)}else h()}return n},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this._duration,n=this._soundById(t);return n&&(e=this._sprite[n._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(o._canPlayEvent,e[n]._loadFn,!1),e[n]._node.removeEventListener("ended",e[n]._endFn,!1),o._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);var r=o._howls.indexOf(t);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===t._src||t._src.indexOf(o._howls[n]._src)>=0){i=!1;break}return u&&i&&delete u[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var i=this["_on"+t];return"function"==typeof e&&i.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this["_on"+t],i=0;if("number"==typeof e&&(n=e,e=null),e||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(e===r[i].fn&&o||!e&&o){r.splice(i,1);break}}else if(t)this["_on"+t]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this["_on"+t],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(t,r[i].fn,r[i].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var n=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&n&&this.stop(t._id,!0).play(t._id),this._webAudio&&n){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),r)}return this._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),o._autoSuspend()),this._webAudio||n||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new s(this)},_drain:function(){var t=this._pool,e=0,n=0;if(!(this._sounds.length<t)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&e++;for(n=this._sounds.length-1;n>=0;n--){if(e<=t)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=u[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,o.ctx.currentTime),this},_cleanBuffer:function(t){var e=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=o._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(t){this._parent=t,this.init()};s.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=o._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(e,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=t._src,this._node.preload=!0===t._preload?"auto":t._preload,this._node.volume=e*o.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this._parent;t._duration===1/0&&(t._duration=Math.ceil(10*this._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var u={},l=function(t){var e=t._src;if(u[e])return t._duration=u[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);h(r.buffer,t)}else{var o=new XMLHttpRequest;o.open(t._xhr.method,e,!0),o.withCredentials=t._xhr.withCredentials,o.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){o.setRequestHeader(e,t._xhr.headers[e])})),o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?h(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete u[e],t.load())},c(o)}},c=function(t){try{t.send()}catch(e){t.onerror()}},h=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(u[e._src]=t,d(e,t)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(t).then(r).catch(n):o.ctx.decodeAudioData(t,r,n)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},A=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(t){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),e=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!r&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(r=function(){return{Howler:o,Howl:a}}.apply(e,[]))||(t.exports=r),e.Howler=o,e.Howl=a,void 0!==n?(n.HowlerGlobal=i,n.Howler=o,n.Howl=a,n.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=o,window.Howl=a,window.Sound=s)})(),function(){var t,e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,n){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof t?this._pos:(this._pos=[t,e,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof t?a:(this._orientation=[t,e,n,r,i,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,n,r,i,o),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,e){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,e)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===e){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(e),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||n(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,e,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,e,r,i)}}),o;if(e="number"!=typeof e?0:e,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof t)return o._pos;o._pos=[t,e,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,e,r],u._node&&(u._panner&&!u._panner.pan||n(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(t,e,r)),o._emit("pos",u._id)}}return o},Howl.prototype.orientation=function(t,e,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,e,r,i)}}),o;if(e="number"!=typeof e?o._orientation[1]:e,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof t)return o._orientation;o._orientation=[t,e,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,e,r],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),n(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,e,r)),o._emit("orientation",u._id)}}return o},Howl.prototype.pannerAttr=function(){var t,e,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=_(o[0]))return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;t=o[0],void 0===e&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(t=o[0],e=parseInt(o[1],10));for(var a=i._getSoundIds(e),s=0;s<a.length;s++)if(r=i._soundById(a[s])){var u=r._pannerAttr;u={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:u.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:u.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:u.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:u.panningModel};var l=r._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),n(r,"spatial"))}return i},Sound.prototype.init=(e=Sound.prototype.init,function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var n=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,n(17))},function(t,e){t.exports="varying vec2 vTextureCoord;\nvarying vec2 vVertexPosition;\nvarying float vPercent;\nvarying float vDirection;\nvarying float vTransition;\nuniform sampler2D uSampler;\nvoid main() {\n\tvec4 outputColor;\n\tfloat percent = vPercent;\n\tfloat direction = vDirection;\n\tif (vTransition < 0.0) {\n\t\tpercent = 1.0 - percent;\n\t\tif ((vDirection > 1.5) && (vDirection < 2.5)) {\n\t\t\tdirection = 1.0;\n\t\t}\n\t\telse if ((vDirection > 0.5) && (vDirection < 1.5)) {\n\t\t\tdirection = 2.0;\n\t\t}\n\t\telse if ((vDirection > 2.5) && (vDirection < 3.5)) {\n\t\t\tdirection = 4.0;\n\t\t}\n\t\telse {\n\t\t\tdirection = 3.0;\n\t\t}\n\t}\n\tif ((direction > 1.5) && (direction < 2.5)) {\n\t\tif (vVertexPosition.y >= (1.0 - percent)) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.y >= (1.0 - percent)) && (vVertexPosition.y <= ((1.0 - percent) + 0.2))) {\n\t\t\toutputColor = outputColor * ((vVertexPosition.y - (1.0 - percent)) / 0.2);\n\t\t}\n\t}\n\telse if ((direction > 0.5) && (direction < 1.5)) {\n\t\tif (vVertexPosition.y <= percent) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.y <= percent) && (vVertexPosition.y >= (percent - 0.2))) {\n\t\t\toutputColor = outputColor * (1.0 - ((vVertexPosition.y - (percent - 0.2)) / 0.2));\n\t\t}\n\t}\n\telse if ((direction > 2.5) && (direction < 3.5)) {\n\t\tif (vVertexPosition.x <= percent) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.x <= percent) && (vVertexPosition.x >= (percent - 0.2))) {\n\t\t\toutputColor = outputColor * (1.0 - ((vVertexPosition.x - (percent - 0.2)) / 0.2));\n\t\t}\n\t}\n\telse {\n\t\tif (vVertexPosition.x >= (1.0 - percent)) {\n\t\t\toutputColor = texture2D(uSampler, vTextureCoord);\n\t\t}\n\t\telse {\n\t\t\toutputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\tif ((vVertexPosition.x >= (1.0 - percent)) && (vVertexPosition.x <= ((1.0 - percent) + 0.2))) {\n\t\t\toutputColor = outputColor * ((vVertexPosition.x - (1.0 - percent)) / 0.2);\n\t\t}\n\t}\n\tgl_FragColor = outputColor;\n}\n"},function(t,e){t.exports="attribute vec2 aVertexPosition;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vVertexPosition;\nvarying float vPercent;\nvarying float vDirection;\nvarying float vTransition;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\nuniform float percent;\nuniform float direction;\nuniform float transition;\nvec4 filterVertexPosition() {\n\tvec2 position = (aVertexPosition * max(outputFrame.zw, vec2(0.))) + outputFrame.xy;\n\treturn vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\nvec2 filterTextureCoord(vec2 aVertexPosition) {\n\treturn aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\nvoid main() {\n\tvTransition = transition;\n\tvDirection = direction;\n\tvPercent = percent;\n\tvVertexPosition = aVertexPosition;\n\tvec2 localVertexPosition = aVertexPosition;\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord(localVertexPosition);\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nuniform float transition;\nvoid main() {\n\tfloat alpha = (transition * (percent - 0.5)) + 0.5;\n\tvec4 color1 = texture2D(uSampler, vTextureCoord);\n\tgl_FragColor = color1 * alpha;\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 position = vec2(uBoundRect.z - filterCoord.x, uBoundRect.w - filterCoord.y);\n\tfloat timePercent = transition > 0.0 ? percent : 1.0 - percent;\n\tfloat barCount = 6.0;\n\tfloat barWidth = (option < 0.5 ? uBoundRect.w : uBoundRect.z) / barCount;\n\tfloat alphaWidthPercent = 0.03;\n\tfloat alphaWidth = alphaWidthPercent * (option < 0.5 ? uBoundRect.w : uBoundRect.z);\n\tfloat selectAxis = option < 0.5 ? -position.y : -position.x;\n\tfloat countAxis = floor(selectAxis / barWidth);\n\tfloat modAxis = mod(selectAxis, barWidth);\n\tfloat timePosition = barWidth * timePercent;\n\tif (modAxis < timePosition) {\n\t\toutputColor = outputColor;\n\t}\n\telse if (modAxis < (timePosition + alphaWidth)) {\n\t\toutputColor = (outputColor * ((alphaWidth - modAxis) + timePosition)) / alphaWidth;\n\t}\n\telse {\n\t\toutputColor = outputColor * 0.0;\n\t}\n\tgl_FragColor = outputColor;\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 position = vec2(uBoundRect.z - filterCoord.x, uBoundRect.w - filterCoord.y);\n\tfloat timePercent = transition > 0.0 ? percent : 1.0 - percent;\n\tfloat barCount = 6.0;\n\tfloat horizontalBarWidth = uBoundRect.z / barCount;\n\tfloat verticalBarWidth = uBoundRect.w / barCount;\n\tfloat alphaWidthPercent = 0.01;\n\tfloat alphaWidth = alphaWidthPercent * (option < 0.5 ? uBoundRect.z : uBoundRect.w);\n\tfloat timePosition = horizontalBarWidth * timePercent;\n\tfloat countAxisY = floor(-position.y / verticalBarWidth);\n\tfloat modAxisY = mod(-position.y, verticalBarWidth);\n\tfloat countAxisX = floor(-position.x / horizontalBarWidth);\n\tfloat modAxisX = mod(-position.x, horizontalBarWidth);\n\tfloat modAxis = modAxisX;\n\tif (option < 0.5) {\n\t\tif (mod(countAxisY, 2.0) > 0.5) {\n\t\t\tcountAxisX = floor(((horizontalBarWidth * 0.5) - position.x) / horizontalBarWidth);\n\t\t\tmodAxisX = mod((horizontalBarWidth * 0.5) - position.x, horizontalBarWidth);\n\t\t}\n\t\tmodAxis = modAxisX;\n\t}\n\telse {\n\t\tif (mod(countAxisX, 2.0) > 0.5) {\n\t\t\tcountAxisY = floor(((verticalBarWidth * 0.5) - position.y) / verticalBarWidth);\n\t\t\tmodAxisY = mod((verticalBarWidth * 0.5) - position.y, verticalBarWidth);\n\t\t}\n\t\tmodAxis = modAxisY;\n\t}\n\tif (modAxis < timePosition) {\n\t\toutputColor = outputColor;\n\t}\n\telse if (modAxis < (timePosition + alphaWidth)) {\n\t\toutputColor = (outputColor * ((alphaWidth - modAxis) + timePosition)) / alphaWidth;\n\t}\n\telse {\n\t\toutputColor = outputColor * 0.0;\n\t}\n\tgl_FragColor = outputColor;\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 inputSize;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform sampler2D dissolveSampler;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tfloat splitWidth = max(uBoundRect.z, uBoundRect.w) / 3.0;\n\tvec2 position = mod(filterCoord.xy, splitWidth);\n\tvec2 loopTime = floor(filterCoord.xy / splitWidth);\n\tif (loopTime.x > 0.5) {\n\t\tposition.x = splitWidth - position.x;\n\t}\n\tif (loopTime.y > 0.5) {\n\t\tposition.y = splitWidth - position.y;\n\t}\n\tvec4 dissolveColor = texture2D(dissolveSampler, position.xy / splitWidth);\n\tfloat timePercent = transition > 0.0 ? percent : 1.0 - percent;\n\tif (dissolveColor.r < percent) {\n\t\tgl_FragColor = outputColor;\n\t}\n\telse {\n\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform sampler2D dissolveSampler;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 position = vec2(uBoundRect.z - filterCoord.x, uBoundRect.w - filterCoord.y);\n\tvec4 dissolveColor;\n\tif (option > 0.5) {\n\t\tdissolveColor = texture2D(dissolveSampler, vec2(vTextureCoord.x, 0.0));\n\t}\n\telse {\n\t\tdissolveColor = texture2D(dissolveSampler, vec2(0.0, vTextureCoord.y));\n\t}\n\tif (dissolveColor.r < percent) {\n\t\tgl_FragColor = outputColor * min(percent + dissolveColor.r, 1.0);\n\t}\n\telse {\n\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvarying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tfloat timePercent = interpolationFloat(0.0, 1.0, 0.0, 1.0, percent, 2);\n\tfloat radius = sqrt(pow(uBoundRect.z, 2.0) + pow(uBoundRect.w, 2.0)) / 2.0;\n\tfloat alphaWidth = 0.1;\n\tfloat pointDistance = sqrt(pow(point.x, 2.0) + pow(point.y, 2.0));\n\tfloat alphaRadiusFormula;\n\tif (option > 0.5) {\n\t\tif (transition > 0.0) {\n\t\t\talphaRadiusFormula = 1.0 - ((pointDistance - (radius * timePercent)) / (alphaWidth * radius));\n\t\t}\n\t\telse {\n\t\t\talphaRadiusFormula = (pointDistance - (radius * timePercent)) / (alphaWidth * radius);\n\t\t}\n\t}\n\telse {\n\t\tif (transition > 0.0) {\n\t\t\talphaRadiusFormula = (pointDistance - (radius * (1.0 - timePercent))) / (alphaWidth * radius);\n\t\t}\n\t\telse {\n\t\t\talphaRadiusFormula = 1.0 - ((pointDistance - (radius * (1.0 - timePercent))) / (alphaWidth * radius));\n\t\t}\n\t}\n\tif (option > 0.5) {\n\t\tif (pointDistance < (radius * timePercent)) {\n\t\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t\t}\n\t\telse if (pointDistance < (radius * (timePercent + alphaWidth))) {\n\t\t\tgl_FragColor = outputColor * alphaRadiusFormula;\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t\t}\n\t}\n\telse {\n\t\tif (pointDistance < (radius * (1.0 - timePercent))) {\n\t\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t\t}\n\t\telse if (pointDistance < (radius * ((1.0 - timePercent) + alphaWidth))) {\n\t\t\tgl_FragColor = outputColor * alphaRadiusFormula;\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t\t}\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvarying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tfloat timePercent = interpolationFloat(0.0, 1.0, 0.0, 1.0, percent, 2);\n\tif (option < 0.5) {\n\t\ttimePercent = 1.0 - timePercent;\n\t}\n\tfloat alphaWidth = 0.2;\n\tvec2 halfRect = uBoundRect.zw / 2.0;\n\tvec2 absPoint = abs(point.xy);\n\tvec2 alphaFormula = vec2(((halfRect.x * (timePercent + alphaWidth)) - absPoint.x) / (halfRect.x * alphaWidth), ((halfRect.y * (timePercent + alphaWidth)) - absPoint.y) / (halfRect.y * alphaWidth));\n\tif (option < 0.5) {\n\t\tif ((absPoint.x < (halfRect.x * timePercent)) && (absPoint.y < (halfRect.y * timePercent))) {\n\t\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t\t}\n\t\telse if ((absPoint.x < (halfRect.x * (timePercent + alphaWidth))) && (absPoint.y < (halfRect.y * (timePercent + alphaWidth)))) {\n\t\t\tif (absPoint.x > absPoint.y) {\n\t\t\t\tgl_FragColor = outputColor * (transition > 0.0 ? 1.0 - alphaFormula.x : alphaFormula.x);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor * (transition > 0.0 ? 1.0 - alphaFormula.y : alphaFormula.y);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t\t}\n\t}\n\telse {\n\t\tif ((absPoint.x < (halfRect.x * timePercent)) && (absPoint.y < (halfRect.y * timePercent))) {\n\t\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t\t}\n\t\telse if ((absPoint.x < (halfRect.x * (timePercent + alphaWidth))) && (absPoint.y < (halfRect.y * (timePercent + alphaWidth)))) {\n\t\t\tif (absPoint.x > absPoint.y) {\n\t\t\t\tgl_FragColor = outputColor * (transition > 0.0 ? alphaFormula.x : 1.0 - alphaFormula.x);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor * (transition > 0.0 ? alphaFormula.y : 1.0 - alphaFormula.y);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t\t}\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvarying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), (uBoundRect.w / 2.0) - filterCoord.y);\n\tfloat timePercent = interpolationFloat(0.0, 1.0, 0.0, 1.0, percent, 2);\n\tif (option < 0.5) {\n\t\ttimePercent = 1.0 - timePercent;\n\t}\n\tfloat alphaWidth = 0.1;\n\tfloat rightTop = (((2.0 * uBoundRect.w) * timePercent) - ((uBoundRect.w * point.x) / uBoundRect.z)) - point.y;\n\tfloat rightBottom = (((uBoundRect.w * point.x) / uBoundRect.z) - ((2.0 * uBoundRect.w) * timePercent)) - point.y;\n\tfloat leftTop = (((2.0 * uBoundRect.w) * timePercent) + ((uBoundRect.w * point.x) / uBoundRect.z)) - point.y;\n\tfloat leftBottom = (((-uBoundRect.w * point.x) / uBoundRect.z) - ((2.0 * uBoundRect.w) * timePercent)) - point.y;\n\tif (((option < 0.5) && (transition > 0.0)) || ((option > 0.5) && (transition < 0.0))) {\n\t\tif ((point.x >= 0.0) && (point.y >= 0.0)) {\n\t\t\tif (rightTop < (-alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t\telse if (rightTop < 0.0) {\n\t\t\t\tgl_FragColor = outputColor * (-rightTop / (alphaWidth * uBoundRect.w));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t}\n\t\tif ((point.x >= 0.0) && (point.y <= 0.0)) {\n\t\t\tif (rightBottom < 0.0) {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t\telse if (rightBottom < (alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = (outputColor * rightBottom) / (alphaWidth * uBoundRect.w);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t}\n\t\tif ((point.x <= 0.0) && (point.y >= 0.0)) {\n\t\t\tif (leftTop < (-alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t\telse if (leftTop < 0.0) {\n\t\t\t\tgl_FragColor = outputColor * (-leftTop / (alphaWidth * uBoundRect.w));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t}\n\t\tif ((point.x <= 0.0) && (point.y <= 0.0)) {\n\t\t\tif (leftBottom < 0.0) {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t\telse if (leftBottom < (alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = (outputColor * leftBottom) / (alphaWidth * uBoundRect.w);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tif ((point.x >= 0.0) && (point.y >= 0.0)) {\n\t\t\tif (rightTop < (-alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t\telse if (rightTop < 0.0) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 + (rightTop / (alphaWidth * uBoundRect.w)));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t}\n\t\tif ((point.x >= 0.0) && (point.y <= 0.0)) {\n\t\t\tif (rightBottom < 0.0) {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t\telse if (rightBottom < (alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - (rightBottom / (alphaWidth * uBoundRect.w)));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t}\n\t\tif ((point.x <= 0.0) && (point.y >= 0.0)) {\n\t\t\tif (leftTop < (-alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t\telse if (leftTop < 0.0) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 + (leftTop / (alphaWidth * uBoundRect.w)));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t}\n\t\tif ((point.x <= 0.0) && (point.y <= 0.0)) {\n\t\t\tif (leftBottom < 0.0) {\n\t\t\t\tgl_FragColor = outputColor;\n\t\t\t}\n\t\t\telse if (leftBottom < (alphaWidth * uBoundRect.w)) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - (leftBottom / (alphaWidth * uBoundRect.w)));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\t}\n\t\t}\n\t}\n}\n"},function(t,e){t.exports="float interpolationFloat(float from, float to, float start, float end, float timePercent, int timing) {\n\tfloat pi = 3.14159265358;\n\tfloat current;\n\tfloat duration = 1.0;\n\tif (timePercent < start) {\n\t\tcurrent = 0.0;\n\t}\n\telse if (timePercent > end) {\n\t\tcurrent = 1.0;\n\t}\n\telse {\n\t\tcurrent = (timePercent - start) / (end - start);\n\t}\n\tif (timing == 0) {\n\t\treturn ((current / duration) * (to - from)) + from;\n\t}\n\telse if (timing == 1) {\n\t\tcurrent = current / duration;\n\t\treturn (((to - from) * current) * current) + from;\n\t}\n\telse if (timing == 2) {\n\t\tcurrent = current / duration;\n\t\treturn (((-1.0 * (to - from)) * current) * (current - 2.0)) + from;\n\t}\n\telse {\n\t\tcurrent /= (duration / 2.0);\n\t\tif (current < 1.0) {\n\t\t\treturn ((((to - from) / 2.0) * current) * current) + from;\n\t\t}\n\t\tcurrent--;\n\t\treturn ((-(to - from) / 2.0) * ((current * (current - 2.0)) - 1.0)) + from;\n\t}\n}\nvarying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tfloat timePercent = interpolationFloat(0.0, 1.0, 0.0, 1.0, percent, 2);\n\tif (option < 0.5) {\n\t\ttimePercent = 1.0 - timePercent;\n\t}\n\tfloat alphaWidth = 0.1;\n\tvec2 absPoint = abs(point);\n\tvec2 halfRect = uBoundRect.zw / 2.0;\n\tvec2 alphaFormula = vec2(((halfRect.x * (timePercent + alphaWidth)) - absPoint.x) / (halfRect.x * alphaWidth), ((halfRect.y * (timePercent + alphaWidth)) - absPoint.y) / (halfRect.y * alphaWidth));\n\tif (((option < 0.5) && (transition > 0.0)) || ((option > 0.5) && (transition < 0.0))) {\n\t\tif ((absPoint.x < ((uBoundRect.z * 0.5) * timePercent)) || (absPoint.y < ((uBoundRect.w * 0.5) * timePercent))) {\n\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t}\n\t\telse if ((absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) || (absPoint.y < ((uBoundRect.w * 0.5) * (timePercent + alphaWidth)))) {\n\t\t\tif ((absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) && (absPoint.y < ((uBoundRect.w * 0.5) * (timePercent + alphaWidth)))) {\n\t\t\t\tgl_FragColor = (outputColor * (1.0 - alphaFormula.x)) * (1.0 - alphaFormula.y);\n\t\t\t}\n\t\t\telse if (absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - alphaFormula.x);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - alphaFormula.y);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = outputColor;\n\t\t}\n\t}\n\telse {\n\t\tif ((absPoint.x < ((uBoundRect.z * 0.5) * timePercent)) || (absPoint.y < ((uBoundRect.w * 0.5) * timePercent))) {\n\t\t\tgl_FragColor = outputColor;\n\t\t}\n\t\telse if ((absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) || (absPoint.y < ((uBoundRect.w * 0.5) * (timePercent + alphaWidth)))) {\n\t\t\tif ((absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) && (absPoint.y < ((uBoundRect.w * 0.5) * (timePercent + alphaWidth)))) {\n\t\t\t\tgl_FragColor = outputColor * (1.0 - ((1.0 - alphaFormula.x) * (1.0 - alphaFormula.y)));\n\t\t\t}\n\t\t\telse if (absPoint.x < ((uBoundRect.z * 0.5) * (timePercent + alphaWidth))) {\n\t\t\t\tgl_FragColor = outputColor * alphaFormula.x;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor = outputColor * alphaFormula.y;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t}\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tvec2 absPoint = abs(point);\n\tvec2 halfRect = uBoundRect.zw / 2.0;\n\tfloat alphaWidth = 0.1;\n\tfloat timePercent = percent;\n\tif (option < 1.5) {\n\t\ttimePercent = 1.0 - timePercent;\n\t}\n\tfloat axis = (option > 0.5) && (option < 2.5) ? absPoint.y : absPoint.x;\n\tfloat compareAxis = (option > 0.5) && (option < 2.5) ? halfRect.y : halfRect.x;\n\tfloat alphaColor = abs(((timePercent * compareAxis) - axis) / (alphaWidth * compareAxis));\n\tvec4 beginColor;\n\tvec4 endColor;\n\tif ((option > 1.5) && (option < 3.5)) {\n\t\tif (transition < 0.0) {\n\t\t\tbeginColor = vec4(0, 0, 0, 0);\n\t\t\tendColor = outputColor;\n\t\t}\n\t\telse {\n\t\t\tbeginColor = outputColor;\n\t\t\tendColor = vec4(0, 0, 0, 0);\n\t\t\talphaColor = 1.0 - alphaColor;\n\t\t}\n\t}\n\telse {\n\t\tif (transition < 0.0) {\n\t\t\tbeginColor = outputColor;\n\t\t\tendColor = vec4(0, 0, 0, 0);\n\t\t\talphaColor = 1.0 - alphaColor;\n\t\t}\n\t\telse {\n\t\t\tbeginColor = vec4(0, 0, 0, 0);\n\t\t\tendColor = outputColor;\n\t\t}\n\t}\n\tif (axis < (timePercent * compareAxis)) {\n\t\tgl_FragColor = beginColor;\n\t}\n\telse if (axis < ((timePercent + alphaWidth) * compareAxis)) {\n\t\tgl_FragColor = outputColor * alphaColor;\n\t}\n\telse {\n\t\tgl_FragColor = endColor;\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x, filterCoord.y);\n\tif ((option > 0.5) && (option < 1.5)) {\n\t\tpoint = filterCoord.xy;\n\t}\n\telse if ((option > 1.5) && (option < 2.5)) {\n\t\tpoint = uBoundRect.zw - point.xy;\n\t}\n\telse if ((option > 2.5) && (option < 3.5)) {\n\t\tpoint = vec2(uBoundRect.z - filterCoord.x, filterCoord.y);\n\t}\n\telse {\n\t\tpoint = vec2(filterCoord.x, uBoundRect.w - filterCoord.y);\n\t}\n\tfloat squareCount = 16.0;\n\tfloat horzBarWidth = uBoundRect.z / squareCount;\n\tfloat verticalBarWidth = uBoundRect.w / squareCount;\n\tfloat horzCount = floor(point.x / horzBarWidth);\n\tfloat verticalCount = floor(point.y / verticalBarWidth);\n\tfloat timePercent = (percent * squareCount) * 2.5;\n\tvec4 alphaStage;\n\tif (transition > 0.0) {\n\t\talphaStage = vec4(0.2, 0.4, 0.6, 0.8);\n\t}\n\telse {\n\t\talphaStage = vec4(0.8, 0.6, 0.4, 0.2);\n\t}\n\tif ((horzCount + verticalCount) < (timePercent - 4.0)) {\n\t\tgl_FragColor = transition > 0.0 ? outputColor : vec4(0, 0, 0, 0);\n\t}\n\telse if ((horzCount + verticalCount) < (timePercent - 3.0)) {\n\t\tgl_FragColor = outputColor * alphaStage.w;\n\t}\n\telse if ((horzCount + verticalCount) < (timePercent - 2.0)) {\n\t\tgl_FragColor = outputColor * alphaStage.z;\n\t}\n\telse if ((horzCount + verticalCount) < (timePercent - 1.0)) {\n\t\tgl_FragColor = outputColor * alphaStage.y;\n\t}\n\telse if ((horzCount + verticalCount) < timePercent) {\n\t\tgl_FragColor = outputColor * alphaStage.x;\n\t}\n\telse {\n\t\tgl_FragColor = transition > 0.0 ? vec4(0, 0, 0, 0) : outputColor;\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\n#define PI 3.1415926538\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tvec2 start = vec2(0.0, -1.0);\n\tfloat arc = acos((dot(point.xy, start) / length(point)) / length(start));\n\tif ((point.x == 0.0) && (point.y < 0.0)) {\n\t\tarc = 0.0;\n\t}\n\tif ((point.x == 0.0) && (point.y > 0.0)) {\n\t\tarc = PI;\n\t}\n\tfloat alphaBarArcWidth = 0.3;\n\tfloat timePercent = (percent * PI) * (1.0 + alphaBarArcWidth);\n\tvec3 colorAlpha = transition > 0.0 ? vec3(1.0, (timePercent - arc) / alphaBarArcWidth, 0.0) : vec3(0.0, 1.0 - ((timePercent - arc) / alphaBarArcWidth), 1.0);\n\tif ((arc + alphaBarArcWidth) <= timePercent) {\n\t\tgl_FragColor = outputColor * colorAlpha.x;\n\t}\n\telse if (arc <= timePercent) {\n\t\tgl_FragColor = outputColor * colorAlpha.y;\n\t}\n\telse {\n\t\tgl_FragColor = outputColor * colorAlpha.z;\n\t}\n}\n"},function(t,e){t.exports="varying vec2 vTextureCoord;\nuniform float percent;\nuniform sampler2D uSampler;\nvarying vec2 filterCoord;\nuniform vec4 uBoundRect;\nuniform float transition;\nuniform float option;\n#define PI 3.1415926538\nvoid main() {\n\tvec4 outputColor = texture2D(uSampler, vTextureCoord);\n\tvec2 point = vec2(filterCoord.x - (uBoundRect.z / 2.0), filterCoord.y - (uBoundRect.w / 2.0));\n\tvec2 start = vec2(0.0, -1.0);\n\tfloat arc = acos((dot(point.xy, start) / length(point)) / length(start));\n\tif ((point.x == 0.0) && (point.y < 0.0)) {\n\t\tarc = 0.0;\n\t}\n\tif ((point.x == 0.0) && (point.y > 0.0)) {\n\t\tarc = PI;\n\t}\n\tif (point.x < 0.0) {\n\t\tarc = (2.0 * PI) - arc;\n\t}\n\tarc = arc == 0.0 ? arc : mod(arc, (2.0 * PI) / option);\n\tfloat totalAlphaBarArcWidth = 0.75;\n\tfloat alphaBarArcWidth = totalAlphaBarArcWidth / option;\n\tfloat timePercent = ((percent * PI) * (2.0 + totalAlphaBarArcWidth)) / option;\n\tvec3 colorAlpha = transition > 0.0 ? vec3(1.0, (timePercent - arc) / alphaBarArcWidth, 0.0) : vec3(0.0, 1.0 - ((timePercent - arc) / alphaBarArcWidth), 1.0);\n\tif ((arc + alphaBarArcWidth) <= timePercent) {\n\t\tgl_FragColor = outputColor * colorAlpha.x;\n\t}\n\telse if (arc <= timePercent) {\n\t\tgl_FragColor = outputColor * colorAlpha.y;\n\t}\n\telse {\n\t\tgl_FragColor = outputColor * colorAlpha.z;\n\t}\n}\n"},function(t,e,n){var r;!function(i,o){var a="model",s="name",u="type",l="vendor",c="version",h="mobile",d="tablet",A="smarttv",f=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].toUpperCase()]=t[n];return e},p=function(t,e){return"string"==typeof t&&-1!==g(e).indexOf(g(t))},g=function(t){return t.toLowerCase()},v=function(t,e){if("string"==typeof t)return t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,""),void 0===e?t:t.substring(0,255)},m=function(t,e){for(var n,r,i,o,a,s,u=0;u<e.length&&!a;){var l=e[u],c=e[u+1];for(n=r=0;n<l.length&&!a;)if(a=l[n++].exec(t))for(i=0;i<c.length;i++)s=a[++r],"object"==_(o=c[i])&&o.length>0?2===o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3===o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4===o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},y=function(t,e){for(var n in e)if("object"==_(e[n])&&e[n].length>0){for(var r=0;r<e[n].length;r++)if(p(e[n][r],t))return"?"===n?void 0:n}else if(p(e[n],t))return"?"===n?void 0:n;return t},b={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},w={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[c,[s,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[c,[s,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[s,c],[/opios[\/ ]+([\w\.]+)/i],[c,[s,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[c,[s,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[s,c],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[c,[s,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[c,[s,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[c,[s,"WeChat"]],[/konqueror\/([\w\.]+)/i],[c,[s,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[c,[s,"IE"]],[/yabrowser\/([\w\.]+)/i],[c,[s,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[s,/(.+)/,"$1 Secure Browser"],c],[/\bfocus\/([\w\.]+)/i],[c,[s,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[c,[s,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[c,[s,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[c,[s,"Dolphin"]],[/coast\/([\w\.]+)/i],[c,[s,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[c,[s,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[s,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[s,/(.+)/,"$1 Browser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[s,c],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[s],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[s,"Facebook"],c],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[s,c],[/\bgsa\/([\w\.]+) .*safari\//i],[c,[s,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[c,[s,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[s,"Chrome WebView"],c],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[c,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[s,c],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[c,s],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[s,[c,y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[s,"Netscape"],c],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[c,[s,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",g]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",g]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",g]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[a,[l,"Samsung"],[u,d]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[a,[l,"Samsung"],[u,h]],[/\((ip(?:hone|od)[\w ]*);/i],[a,[l,"Apple"],[u,h]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[a,[l,"Apple"],[u,d]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[a,[l,"Huawei"],[u,d]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[a,[l,"Huawei"],[u,h]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[a,/_/g," "],[l,"Xiaomi"],[u,h]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[a,/_/g," "],[l,"Xiaomi"],[u,d]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[a,[l,"OPPO"],[u,h]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[a,[l,"Vivo"],[u,h]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[a,[l,"Realme"],[u,h]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[a,[l,"Motorola"],[u,h]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[a,[l,"Motorola"],[u,d]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[a,[l,"LG"],[u,d]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[a,[l,"LG"],[u,h]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[a,[l,"Lenovo"],[u,d]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[a,/_/g," "],[l,"Nokia"],[u,h]],[/(pixel c)\b/i],[a,[l,"Google"],[u,d]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[a,[l,"Google"],[u,h]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[l,"Sony"],[u,h]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[a,"Xperia Tablet"],[l,"Sony"],[u,d]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[a,[l,"OnePlus"],[u,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[a,[l,"Amazon"],[u,d]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[a,/(.+)/g,"Fire Phone $1"],[l,"Amazon"],[u,h]],[/(playbook);[-\w\),; ]+(rim)/i],[a,l,[u,d]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[a,[l,"BlackBerry"],[u,h]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[a,[l,"ASUS"],[u,d]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[a,[l,"ASUS"],[u,h]],[/(nexus 9)/i],[a,[l,"HTC"],[u,d]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[l,[a,/_/g," "],[u,h]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[a,[l,"Acer"],[u,d]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[a,[l,"Meizu"],[u,h]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[a,[l,"Sharp"],[u,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,a,[u,h]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,a,[u,d]],[/(surface duo)/i],[a,[l,"Microsoft"],[u,d]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[a,[l,"Fairphone"],[u,h]],[/(u304aa)/i],[a,[l,"AT&T"],[u,h]],[/\bsie-(\w*)/i],[a,[l,"Siemens"],[u,h]],[/\b(rct\w+) b/i],[a,[l,"RCA"],[u,d]],[/\b(venue[\d ]{2,7}) b/i],[a,[l,"Dell"],[u,d]],[/\b(q(?:mv|ta)\w+) b/i],[a,[l,"Verizon"],[u,d]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[a,[l,"Barnes & Noble"],[u,d]],[/\b(tm\d{3}\w+) b/i],[a,[l,"NuVision"],[u,d]],[/\b(k88) b/i],[a,[l,"ZTE"],[u,d]],[/\b(nx\d{3}j) b/i],[a,[l,"ZTE"],[u,h]],[/\b(gen\d{3}) b.+49h/i],[a,[l,"Swiss"],[u,h]],[/\b(zur\d{3}) b/i],[a,[l,"Swiss"],[u,d]],[/\b((zeki)?tb.*\b) b/i],[a,[l,"Zeki"],[u,d]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],a,[u,d]],[/\b(ns-?\w{0,9}) b/i],[a,[l,"Insignia"],[u,d]],[/\b((nxa|next)-?\w{0,9}) b/i],[a,[l,"NextBook"],[u,d]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],a,[u,h]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],a,[u,h]],[/\b(ph-1) /i],[a,[l,"Essential"],[u,h]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[a,[l,"Envizen"],[u,d]],[/\b(trio[-\w\. ]+) b/i],[a,[l,"MachSpeed"],[u,d]],[/\btu_(1491) b/i],[a,[l,"Rotor"],[u,d]],[/(shield[\w ]+) b/i],[a,[l,"Nvidia"],[u,d]],[/(sprint) (\w+)/i],[l,a,[u,h]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,"Microsoft"],[u,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[a,[l,"Zebra"],[u,d]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[a,[l,"Zebra"],[u,h]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,a,[u,"console"]],[/droid.+; (shield) bui/i],[a,[l,"Nvidia"],[u,"console"]],[/(playstation [345portablevi]+)/i],[a,[l,"Sony"],[u,"console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[a,[l,"Microsoft"],[u,"console"]],[/smart-tv.+(samsung)/i],[l,[u,A]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,"Samsung"],[u,A]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,"LG"],[u,A]],[/(apple) ?tv/i],[l,[a,"Apple TV"],[u,A]],[/crkey/i],[[a,"Chromecast"],[l,"Google"],[u,A]],[/droid.+aft(\w)( bui|\))/i],[a,[l,"Amazon"],[u,A]],[/\(dtv[\);].+(aquos)/i],[a,[l,"Sharp"],[u,A]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[l,v],[a,v],[u,A]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,A]],[/((pebble))app/i],[l,a,[u,"wearable"]],[/droid.+; (glass) \d/i],[a,[l,"Google"],[u,"wearable"]],[/droid.+; (wt63?0{2,3})\)/i],[a,[l,"Zebra"],[u,"wearable"]],[/(quest( 2)?)/i],[a,[l,"Facebook"],[u,"wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[u,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[a,[u,h]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[a,[u,d]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,d]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[u,h]],[/(android[-\w\. ]{0,9});.+buil/i],[a,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[c,s]],os:[[/microsoft (windows) (vista|xp)/i],[s,c],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[s,[c,y,b]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[s,"Windows"],[c,y,b]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[c,s],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[s,c],[/\(bb(10);/i],[c,[s,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[c,[s,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[c,[s,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[c,[s,"webOS"]],[/crkey\/([\d\.]+)/i],[c,[s,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[s,c],[/(sunos) ?([\w\.\d]*)/i],[[s,"Solaris"],c],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[s,c]]},x=function t(e,n){if("object"==_(e)&&(n=e,e=void 0),!(this instanceof t))return new t(e,n).getResult();var r=e||(void 0!==i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),o=n?function(t,e){var n={};for(var r in t)e[r]&&e[r].length%2==0?n[r]=e[r].concat(t[r]):n[r]=t[r];return n}(w,n):w;return this.getBrowser=function(){var t,e={name:void 0,version:void 0};return m.call(e,r,o.browser),e.major="string"==typeof(t=e.version)?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0,e},this.getCPU=function(){var t={architecture:void 0};return m.call(t,r,o.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return m.call(t,r,o.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return m.call(t,r,o.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return m.call(t,r,o.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(t){return r="string"==typeof t&&t.length>255?v(t,255):t,this},this.setUA(r),this};x.VERSION="1.0.2",x.BROWSER=f([s,c,"major"]),x.CPU=f(["architecture"]),x.DEVICE=f([a,l,u,"console",h,A,d,"wearable","embedded"]),x.ENGINE=x.OS=f([s,c]),void 0!==e?(void 0!==t&&t.exports&&(e=t.exports=x),e.UAParser=x):n(145)?void 0===(r=function(){return x}.call(e,n,e,t))||(t.exports=r):void 0!==i&&(i.UAParser=x);var T=void 0!==i&&(i.jQuery||i.Zepto);if(T&&!T.ua){var E=new x;T.ua=E.getResult(),T.ua.get=function(){return E.getUA()},T.ua.set=function(t){E.setUA(t);var e=E.getResult();for(var n in e)T.ua[n]=e[n]}}}("object"==("undefined"==typeof window?"undefined":_(window))?window:this)},function(t,e,n){var r=n(146);t.exports=function(t,e){return r(t,e)}},function(t,e,n){var r=n(24),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){(function(t){var e=n(104),r=n(107),i=n.n(r);
/*!
 * @pixi/polyfill - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */if("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:void 0!==t&&(t.globalThis=t)),globalThis.Promise||(globalThis.Promise=e.a),Object.assign||(Object.assign=i.a),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var o=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-o}}for(var a=Date.now(),s=["ms","moz","webkit","o"],u=0;u<s.length&&!globalThis.requestAnimationFrame;++u){var l=s[u];globalThis.requestAnimationFrame=globalThis[l+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[l+"CancelAnimationFrame"]||globalThis[l+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+a-e;return n<0&&(n=0),a=e,globalThis.self.setTimeout((function(){a=Date.now(),t(performance.now())}),n)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array)}).call(this,n(17))},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(137),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(17))},function(t,e,n){(function(t,e){!function(t,n){if(!t.setImmediate){var r,i,o,a,s,u=1,l={},c=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){f(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&f(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(f,0,t)},d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[u]=i,r(u),u++},d.clearImmediate=A}function A(t){delete l[t]}function f(t){if(c)setTimeout(f,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{A(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(17),n(138))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,h=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&A())}function A(){if(!c){var t=s(d);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||c||s(A)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==_(r)&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,l=/^xn--/,c=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=Math.floor,f=String.fromCharCode;function p(t){throw new RangeError(d[t])}function g(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function v(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+g((t=t.replace(h,".")).split("."),e).join(".")}function m(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function y(t){return g(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,n){var r=0;for(t=n?A(t/700):t>>1,t+=A(t/e);t>455;r+=36)t=A(t/35);return A(r+36*t/(t+38))}function x(t){var e,n,r,i,o,a,s,l,c,h,d,f=[],g=t.length,v=0,m=128,b=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&p("not-basic"),f.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=v,a=1,s=36;i>=g&&p("invalid-input"),((l=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||l>A((u-v)/a))&&p("overflow"),v+=l*a,!(l<(c=s<=b?1:s>=b+26?26:s-b));s+=36)a>A(u/(h=36-c))&&p("overflow"),a*=h;b=w(v-o,e=f.length+1,0==o),A(v/e)>u-m&&p("overflow"),m+=A(v/e),v%=e,f.splice(v++,0,m)}return y(f)}function T(t){var e,n,r,i,o,a,s,l,c,h,d,g,v,y,x,_=[];for(g=(t=m(t)).length,e=128,n=0,o=72,a=0;a<g;++a)(d=t[a])<128&&_.push(f(d));for(r=i=_.length,i&&_.push("-");r<g;){for(s=u,a=0;a<g;++a)(d=t[a])>=e&&d<s&&(s=d);for(s-e>A((u-n)/(v=r+1))&&p("overflow"),n+=(s-e)*v,e=s,a=0;a<g;++a)if((d=t[a])<e&&++n>u&&p("overflow"),d==e){for(l=n,c=36;!(l<(h=c<=o?1:c>=o+26?26:c-o));c+=36)x=l-h,y=36-h,_.push(f(b(h+x%y,0))),l=A(x/y);_.push(f(b(l,0))),o=w(n,v,r==i),n=0,++r}++n,++e}return _.join("")}s={version:"1.4.1",ucs2:{decode:m,encode:y},decode:x,encode:T,toASCII:function(t){return v(t,(function(t){return c.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return v(t,(function(t){return l.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(25)(t),n(17))},function(t,e,n){t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==_(t)&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){e.decode=e.parse=n(142),e.encode=e.stringify=n(143)},function(t,e,n){function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,d,A,f,p=t[c].replace(s,"%20"),g=p.indexOf(n);g>=0?(h=p.substr(0,g),d=p.substr(g+1)):(h=p,d=""),A=decodeURIComponent(h),f=decodeURIComponent(d),r(a,A)?i(a[A])?a[A].push(f):a[A]=[a[A],f]:a[A]=f}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){var r=function(t){switch(_(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==_(t)?o(a(t),(function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],(function(t){return s+encodeURIComponent(r(t))})).join(e):s+encodeURIComponent(r(t[a]))})).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e){var n=function(){};n.prototype={fit:function(t){var e,n,r,i,o=t.length,a=o>0?t[0].width:0,s=o>0?t[0].height:0;for(this.root={x:0,y:0,width:a,height:s},e=0;e<o;e++)r=t[e],(n=this.findNode(this.root,r.width,r.height))?(i=this.splitNode(n,r.width,r.height),r.x=i.x,r.y=i.y):(i=this.growNode(r.width,r.height),r.x=i.x,r.y=i.y)},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.width&&n<=t.height?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,width:t.width,height:t.height-n},t.right={x:t.x+e,y:t.y,width:t.width-e,height:n},t},growNode:function(t,e){var n=t<=this.root.width,r=e<=this.root.height,i=r&&this.root.height>=this.root.width+t,o=n&&this.root.width>=this.root.height+e;return i?this.growRight(t,e):o?this.growDown(t,e):r?this.growRight(t,e):n?this.growDown(t,e):null},growRight:function(t,e){var n;return this.root={used:!0,x:0,y:0,width:this.root.width+t,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:t,height:this.root.height}},(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null},growDown:function(t,e){var n;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+e,down:{x:0,y:this.root.height,width:this.root.width,height:e},right:this.root},(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null}},t.exports=n},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){var r=n(147),i=n(15);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},function(t,e,n){var r=n(52),i=n(55),o=n(179),a=n(182),s=n(31),u=n(30),l=n(40),c=n(62),h="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,A,f,p){var g=u(t),v=u(e),m=g?"[object Array]":s(t),y=v?"[object Array]":s(e),b=(m="[object Arguments]"==m?h:m)==h,w=(y="[object Arguments]"==y?h:y)==h,x=m==y;if(x&&l(t)){if(!l(e))return!1;g=!0,b=!1}if(x&&!b)return p||(p=new r),g||c(t)?i(t,e,n,A,f,p):o(t,e,m,n,A,f,p);if(!(1&n)){var _=b&&d.call(t,"__wrapped__"),T=w&&d.call(e,"__wrapped__");if(_||T){var E=_?t.value():t,S=T?e.value():e;return p||(p=new r),f(E,S,n,A,p)}}return!!x&&(p||(p=new r),a(t,e,n,A,f,p))}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(27),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(27);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(27);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(27);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(26);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(26),i=n(37),o=n(54);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(33),i=n(159),o=n(21),a=n(53),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,d=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?d:s).test(a(t))}},function(t,e,n){var r,i=n(160),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(14)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(163),i=n(26),o=n(37);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(164),i=n(165),o=n(166),a=n(167),s=n(168);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(28);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(28),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(28),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(28);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(29);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=_(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(29);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(29);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(29);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(54),i=n(175),o=n(176);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(24),i=n(56),o=n(36),a=n(55),s=n(180),u=n(181),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var A=s;case"[object Set]":var f=1&r;if(A||(A=u),t.size!=e.size&&!f)return!1;var p=d.get(t);if(p)return p==e;r|=2,d.set(t,e);var g=a(A(t),A(e),r,l,h,d);return d.delete(t),g;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(57),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var d=l[h];if(!(u?d in e:i.call(e,d)))return!1}var A=s.get(t),f=s.get(e);if(A&&f)return A==e&&f==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=u;++h<c;){var v=t[d=l[h]],m=e[d];if(o)var y=u?o(m,v,d,e,t,s):o(v,m,d,t,e,s);if(!(void 0===y?v===m||a(v,m,n,o,s):y)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(p=!1)}return s.delete(t),s.delete(e),p}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(186),i=n(15),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){var r=n(20),i=n(15);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=_(t);return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(20),i=n(63),o=n(15),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(43),i=n(191),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(64)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(22)(n(14),"DataView");t.exports=r},function(t,e,n){var r=n(22)(n(14),"Promise");t.exports=r},function(t,e,n){var r=n(22)(n(14),"Set");t.exports=r},function(t,e,n){var r=n(22)(n(14),"WeakMap");t.exports=r},function(t,e,n){var r=n(14);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(198),i=n(21),o=n(200),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(199),i=/^\s+/;t.exports=function(t){return t&&t.slice(0,r(t)+1).replace(i,"")}},function(t,e){var n=/\s/;t.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}},function(t,e,n){var r=n(20),i=n(15);t.exports=function(t){return"symbol"==_(t)||i(t)&&"[object Symbol]"==r(t)}},function(t,e,n){var r=n(52),i=n(202),o=n(66),a=n(204),s=n(205),u=n(208),l=n(209),c=n(210),h=n(211),d=n(57),A=n(212),f=n(31),p=n(213),g=n(214),v=n(219),m=n(30),y=n(40),b=n(221),w=n(21),x=n(223),_=n(39),T=n(44),E={};E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E["[object Function]"]=E["[object WeakMap]"]=!1,t.exports=function t(e,n,S,M,C,I){var N,B=1&n,k=2&n,P=4&n;if(S&&(N=C?S(e,M,C,I):S(e)),void 0!==N)return N;if(!w(e))return e;var D=m(e);if(D){if(N=p(e),!B)return l(e,N)}else{var L=f(e),O="[object Function]"==L||"[object GeneratorFunction]"==L;if(y(e))return u(e,B);if("[object Object]"==L||"[object Arguments]"==L||O&&!C){if(N=k||O?{}:v(e),!B)return k?h(e,s(N,e)):c(e,a(N,e))}else{if(!E[L])return C?e:{};N=g(e,L,B)}}I||(I=new r);var R=I.get(e);if(R)return R;I.set(e,N),x(e)?e.forEach((function(r){N.add(t(r,n,S,r,e,I))})):b(e)&&e.forEach((function(r,i){N.set(i,t(r,n,S,i,e,I))}));var F=D?void 0:(P?k?A:d:k?T:_)(e);return i(F||e,(function(r,i){F&&(r=e[i=r]),o(N,i,t(r,n,S,i,e,I))})),N}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(22),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){var r=n(32),i=n(39);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(32),i=n(44);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(21),i=n(43),o=n(207),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){(function(t){var r=n(14),i=e&&!e.nodeType&&e,o=i&&"object"==_(t)&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(25)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(32),i=n(38);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(32),i=n(68);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(58),i=n(68),o=n(44);t.exports=function(t){return r(t,o,i)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(45),i=n(215),o=n(216),a=n(217),s=n(218);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(45);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(24),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(45);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(220),i=n(69),o=n(43);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e,n){var r=n(21),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(222),i=n(41),o=n(42),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(31),i=n(15);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(224),i=n(41),o=n(42),a=o&&o.isSet,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(31),i=n(15);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e,n){n.r(e),n.d(e,"ErrorType",(function(){return Sf})),n.d(e,"preloadResource",(function(){return Ob})),n.d(e,"delay",(function(){return Qb})),n.d(e,"waitUntil",(function(){return Gb})),n.d(e,"SLIDE_EVENTS",(function(){return Vb})),n.d(e,"Slide",(function(){return qb}));for(var i=[],s=0;s<256;s++)i[s]=(s<16?"0":"")+s.toString(16);function f(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(i[255&t]+i[t>>8&255]+i[t>>16&255]+i[t>>24&255]+"-"+i[255&e]+i[e>>8&255]+"-"+i[e>>16&15|64]+i[e>>24&255]+"-"+i[63&n|128]+i[n>>8&255]+"-"+i[n>>16&255]+i[n>>24&255]+i[255&r]+i[r>>8&255]+i[r>>16&255]+i[r>>24&255]).toUpperCase()}for(var m=n(23),w=function(){function t(){b(this,t)}return x(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}},{key:"hasEventListener",value:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t);t.target=null}}}}]),t}(),M=[],C=0
/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */;C<256;C++)M[C]=(C<16?"0":"")+C.toString(16);var I=Math.PI/180,N=180/Math.PI;function B(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(M[255&t]+M[t>>8&255]+M[t>>16&255]+M[t>>24&255]+"-"+M[255&e]+M[e>>8&255]+"-"+M[e>>16&15|64]+M[e>>24&255]+"-"+M[63&n|128]+M[n>>8&255]+"-"+M[n>>16&255]+M[n>>24&255]+M[255&r]+M[r>>8&255]+M[r>>16&255]+M[r>>24&255]).toUpperCase()}function k(t,e,n){return Math.max(e,Math.min(n,t))}function P(t,e,n){return(1-n)*t+n*e}function D(t){return 0==(t&t-1)&&0!==t}function O(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b(this,t),this.x=e,this.y=n}return x(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}}]),t}();R.prototype.isVector2=!0;var F,U=function(){function t(){b(this,t),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return x(t,[{key:"set",value:function(t,e,n,r,i,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],A=n[8],f=r[0],p=r[3],g=r[6],v=r[1],m=r[4],y=r[7],b=r[2],w=r[5],x=r[8];return i[0]=o*f+a*v+s*b,i[3]=o*p+a*m+s*w,i[6]=o*g+a*y+s*x,i[1]=u*f+l*v+c*b,i[4]=u*p+l*m+c*w,i[7]=u*g+l*y+c*x,i[2]=h*f+d*v+A*b,i[5]=h*p+d*m+A*w,i[8]=h*g+d*y+A*x,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-n*i*l+n*a*s+r*i*u-r*o*s}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=l*o-a*u,h=a*s-l*i,d=u*i-o*s,A=e*c+n*h+r*d;if(0===A)return this.set(0,0,0,0,0,0,0,0,0);var f=1/A;return t[0]=c*f,t[1]=(r*u-l*n)*f,t[2]=(a*n-r*o)*f,t[3]=h*f,t[4]=(l*e-r*s)*f,t[5]=(r*i-a*e)*f,t[6]=d*f,t[7]=(n*s-u*e)*f,t[8]=(o*e-n*i)*f,this}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1),this}},{key:"scale",value:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*l,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*l,this}},{key:"translate",value:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),t}();U.prototype.isMatrix3=!0;var j=function(){function t(){b(this,t)}return x(t,null,[{key:"getDataURL",value:function(t){if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;var e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===F&&(F=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),F.width=t.width,F.height=t.height;var n=F.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=F}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}]),t}(),z=0,H=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:3e3;return b(this,n),t=e.call(this),Object.defineProperty(v(t),"id",{value:z++}),t.uuid=B(),t.name="",t.image=r,t.mipmaps=[],t.mapping=i,t.wrapS=o,t.wrapT=a,t.magFilter=s,t.minFilter=u,t.anisotropy=h,t.format=l,t.internalFormat=null,t.type=c,t.offset=new R(0,0),t.repeat=new R(1,1),t.center=new R(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new U,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,t.encoding=d,t.version=0,t.onUpdate=null,t}return x(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=B()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)r[o].isDataTexture?i.push(Q(r[o].image)):i.push(Q(r[o]))}else i=Q(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(w);function Q(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?j.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}H.DEFAULT_IMAGE=void 0,H.DEFAULT_MAPPING=300,H.prototype.isTexture=!0;var G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;b(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return x(t,[{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"setAxisAngleFromQuaternion",value:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}},{key:"setAxisAngleFromRotationMatrix",value:function(t){var e,n,r,i,o=t.elements,a=o[0],s=o[4],u=o[8],l=o[1],c=o[5],h=o[9],d=o[2],A=o[6],f=o[10];if(Math.abs(s-l)<.01&&Math.abs(u-d)<.01&&Math.abs(h-A)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+d)<.1&&Math.abs(h+A)<.1&&Math.abs(a+c+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var p=(a+1)/2,g=(c+1)/2,v=(f+1)/2,m=(s+l)/4,y=(u+d)/4,b=(h+A)/4;return p>g&&p>v?p<.01?(n=0,r=.707106781,i=.707106781):(r=m/(n=Math.sqrt(p)),i=y/n):g>v?g<.01?(n=.707106781,r=0,i=.707106781):(n=m/(r=Math.sqrt(g)),i=b/r):v<.01?(n=.707106781,r=.707106781,i=0):(n=y/(i=Math.sqrt(v)),r=b/i),this.set(n,r,i,e),this}var w=Math.sqrt((A-h)*(A-h)+(u-d)*(u-d)+(l-s)*(l-s));return Math.abs(w)<.001&&(w=1),this.x=(A-h)/w,this.y=(u-d)/w,this.z=(l-s)/w,this.w=Math.acos((a+c+f-1)/2),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}}]),t}();G.prototype.isVector4=!0;var V=function(t){A(n,t);var e=p(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b(this,n),(i=e.call(this)).width=t,i.height=r,i.depth=1,i.scissor=new G(0,0,t,r),i.scissorTest=!1,i.viewport=new G(0,0,t,r),i.texture=new H(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),i.texture.image={width:t,height:r,depth:1},i.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,i.texture.minFilter=void 0!==o.minFilter?o.minFilter:1006,i.depthBuffer=void 0===o.depthBuffer||o.depthBuffer,i.stencilBuffer=void 0!==o.stencilBuffer&&o.stencilBuffer,i.depthTexture=void 0!==o.depthTexture?o.depthTexture:null,i}return x(n,[{key:"setTexture",value:function(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}},{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image=L({},this.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(w);V.prototype.isWebGLRenderTarget=!0,function(t){A(n,t);var e=p(n);function n(t,r,i){var o;b(this,n);var a=(o=e.call(this,t,r)).texture;o.texture=[];for(var s=0;s<i;s++)o.texture[s]=a.clone();return o}return x(n,[{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}},{key:"copy",value:function(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(var e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}]),n}(V).prototype.isWebGLMultipleRenderTargets=!0;var W=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).samples=4,o}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.samples=t.samples,this}}]),n}(V);W.prototype.isWebGLMultisampleRenderTarget=!0;var Y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;b(this,t),this._x=e,this._y=n,this._z=r,this._w=i}return x(t,[{key:"set",value:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),d=s(r/2),A=s(i/2);switch(o){case"XYZ":this._x=h*l*c+u*d*A,this._y=u*d*c-h*l*A,this._z=u*l*A+h*d*c,this._w=u*l*c-h*d*A;break;case"YXZ":this._x=h*l*c+u*d*A,this._y=u*d*c-h*l*A,this._z=u*l*A-h*d*c,this._w=u*l*c+h*d*A;break;case"ZXY":this._x=h*l*c-u*d*A,this._y=u*d*c+h*l*A,this._z=u*l*A+h*d*c,this._w=u*l*c-h*d*A;break;case"ZYX":this._x=h*l*c-u*d*A,this._y=u*d*c+h*l*A,this._z=u*l*A-h*d*c,this._w=u*l*c+h*d*A;break;case"YZX":this._x=h*l*c+u*d*A,this._y=u*d*c+h*l*A,this._z=u*l*A-h*d*c,this._w=u*l*c-h*d*A;break;case"XZY":this._x=h*l*c-u*d*A,this._y=u*d*c-h*l*A,this._z=u*l*A+h*d*c,this._w=u*l*c+h*d*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],u=e[2],l=e[6],c=e[10],h=n+a+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(l-s)*d,this._y=(i-u)*d,this._z=(o-r)*d}else if(n>a&&n>c){var A=2*Math.sqrt(1+n-a-c);this._w=(l-s)/A,this._x=.25*A,this._y=(r+o)/A,this._z=(i+u)/A}else if(a>c){var f=2*Math.sqrt(1+a-n-c);this._w=(i-u)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(s+l)/f}else{var p=2*Math.sqrt(1+c-n-a);this._w=(o-r)/p,this._x=(i+u)/p,this._y=(s+l)/p,this._z=.25*p}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(k(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-e)*c)/l,d=Math.sin(e*c)/l;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(t,e,n){this.copy(t).slerp(e,n)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}],[{key:"slerp",value:function(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}},{key:"slerpFlat",value:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],d=i[o+1],A=i[o+2],f=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=u,t[e+2]=l,void(t[e+3]=c);if(1===a)return t[e+0]=h,t[e+1]=d,t[e+2]=A,void(t[e+3]=f);if(c!==f||s!==h||u!==d||l!==A){var p=1-a,g=s*h+u*d+l*A+c*f,v=g>=0?1:-1,m=1-g*g;if(m>Number.EPSILON){var y=Math.sqrt(m),b=Math.atan2(y,g*v);p=Math.sin(p*b)/y,a=Math.sin(a*b)/y}var w=a*v;if(s=s*p+h*w,u=u*p+d*w,l=l*p+A*w,c=c*p+f*w,p===1-a){var x=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=x,u*=x,l*=x,c*=x}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}},{key:"multiplyQuaternionsFlat",value:function(t,e,n,r,i,o){var a=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[o],h=i[o+1],d=i[o+2],A=i[o+3];return t[e]=a*A+l*c+s*d-u*h,t[e+1]=s*A+l*h+u*c-a*d,t[e+2]=u*A+l*d+a*h-s*c,t[e+3]=l*A-a*c-s*h-u*d,t}}]),t}();Y.prototype.isQuaternion=!0;var X=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b(this,t),this.x=e,this.y=n,this.z=r}return x(t,[{key:"set",value:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(K.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(K.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}},{key:"applyQuaternion",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,l=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}},{key:"cross",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}},{key:"projectOnPlane",value:function(t){return q.copy(this).projectOnVector(t),this.sub(q)}},{key:"reflect",value:function(t){return this.sub(q.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(k(n,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),t}();X.prototype.isVector3=!0;var q=new X,K=new Y,Z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new X(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X(-1/0,-1/0,-1/0);b(this,t),this.min=e,this.max=n}return x(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromArray",value:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this}},{key:"setFromBufferAttribute",value:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=$.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"setFromObject",value:function(t){return this.makeEmpty(),this.expandByObject(t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),tt.copy(e.boundingBox),tt.applyMatrix4(t.matrixWorld),this.union(tt));for(var n=t.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,$),$.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(st),ut.subVectors(this.max,st),et.subVectors(t.a,st),nt.subVectors(t.b,st),rt.subVectors(t.c,st),it.subVectors(nt,et),ot.subVectors(rt,nt),at.subVectors(et,rt);var e=[0,-it.z,it.y,0,-ot.z,ot.y,0,-at.z,at.y,it.z,0,-it.x,ot.z,0,-ot.x,at.z,0,-at.x,-it.y,it.x,0,-ot.y,ot.x,0,-at.y,at.x,0];return!!ht(e,et,nt,rt,ut)&&(!!ht(e=[1,0,0,0,1,0,0,0,1],et,nt,rt,ut)&&(lt.crossVectors(it,ot),ht(e=[lt.x,lt.y,lt.z],et,nt,rt,ut)))}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return $.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"getBoundingSphere",value:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize($).length(),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(J[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),J[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),J[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),J[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),J[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),J[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),J[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),J[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(J)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();Z.prototype.isBox3=!0;var J=[new X,new X,new X,new X,new X,new X,new X,new X],$=new X,tt=new Z,et=new X,nt=new X,rt=new X,it=new X,ot=new X,at=new X,st=new X,ut=new X,lt=new X,ct=new X;function ht(t,e,n,r,i){for(var o=0,a=t.length-3;o<=a;o+=3){ct.fromArray(t,o);var s=i.x*Math.abs(ct.x)+i.y*Math.abs(ct.y)+i.z*Math.abs(ct.z),u=e.dot(ct),l=n.dot(ct),c=r.dot(ct);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var dt=new Z,At=new X,ft=new X,pt=new X,gt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new X,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;b(this,t),this.center=e,this.radius=n}return x(t,[{key:"set",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:"setFromPoints",value:function(t,e){var n=this.center;void 0!==e?n.copy(e):dt.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,e){var n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:"getBoundingBox",value:function(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){pt.subVectors(t,this.center);var e=pt.lengthSq();if(e>this.radius*this.radius){var n=Math.sqrt(e),r=.5*(n-this.radius);this.center.add(pt.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(t){return ft.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(At.copy(t.center).add(ft)),this.expandByPoint(At.copy(t.center).sub(ft)),this}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),vt=new X,mt=new X,yt=new X,bt=new X,wt=new X,xt=new X,_t=new X,Tt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new X,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X(0,0,-1);b(this,t),this.origin=e,this.direction=n}return x(t,[{key:"set",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,vt)),this}},{key:"closestPointToPoint",value:function(t,e){e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=vt.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(vt.copy(this.direction).multiplyScalar(e).add(this.origin),vt.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,e,n,r){mt.copy(t).add(e).multiplyScalar(.5),yt.copy(e).sub(t).normalize(),bt.copy(this.origin).sub(mt);var i,o,a,s,u=.5*t.distanceTo(e),l=-this.direction.dot(yt),c=bt.dot(this.direction),h=-bt.dot(yt),d=bt.lengthSq(),A=Math.abs(1-l*l);if(A>0)if(o=l*c-h,s=u*A,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var f=1/A;a=(i*=f)*(i+l*(o*=f)+2*c)+o*(l*i+o+2*h)+d}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+d:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+d):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+d;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(yt).multiplyScalar(o).add(mt),a}},{key:"intersectSphere",value:function(t,e){vt.subVectors(t.center,this.origin);var n=vt.dot(this.direction),r=vt.dot(vt)-n*n,i=t.radius*t.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}},{key:"intersectPlane",value:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}},{key:"intersectsPlane",value:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}},{key:"intersectBox",value:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,vt)}},{key:"intersectTriangle",value:function(t,e,n,r,i){wt.subVectors(e,t),xt.subVectors(n,t),_t.crossVectors(wt,xt);var o,a=this.direction.dot(_t);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}bt.subVectors(this.origin,t);var s=o*this.direction.dot(xt.crossVectors(bt,xt));if(s<0)return null;var u=o*this.direction.dot(wt.cross(bt));if(u<0||s+u>a)return null;var l=-o*bt.dot(_t);return l<0?null:this.at(l/a,i)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),Et=function(){function t(){b(this,t),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return x(t,[{key:"set",value:function(t,e,n,r,i,o,a,s,u,l,c,h,d,A,f,p){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=l,g[10]=c,g[14]=h,g[3]=d,g[7]=A,g[11]=f,g[15]=p,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}},{key:"setFromMatrix3",value:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,n=t.elements,r=1/St.setFromMatrixColumn(t,0).length(),i=1/St.setFromMatrixColumn(t,1).length(),o=1/St.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=o*l,d=o*c,A=a*l,f=a*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=d+A*u,e[5]=h-f*u,e[9]=-a*s,e[2]=f-h*u,e[6]=A+d*u,e[10]=o*s}else if("YXZ"===t.order){var p=s*l,g=s*c,v=u*l,m=u*c;e[0]=p+m*a,e[4]=v*a-g,e[8]=o*u,e[1]=o*c,e[5]=o*l,e[9]=-a,e[2]=g*a-v,e[6]=m+p*a,e[10]=o*s}else if("ZXY"===t.order){var y=s*l,b=s*c,w=u*l,x=u*c;e[0]=y-x*a,e[4]=-o*c,e[8]=w+b*a,e[1]=b+w*a,e[5]=o*l,e[9]=x-y*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){var _=o*l,T=o*c,E=a*l,S=a*c;e[0]=s*l,e[4]=E*u-T,e[8]=_*u+S,e[1]=s*c,e[5]=S*u+_,e[9]=T*u-E,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var M=o*s,C=o*u,I=a*s,N=a*u;e[0]=s*l,e[4]=N-M*c,e[8]=I*c+C,e[1]=c,e[5]=o*l,e[9]=-a*l,e[2]=-u*l,e[6]=C*c+I,e[10]=M-N*c}else if("XZY"===t.order){var B=o*s,k=o*u,P=a*s,D=a*u;e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=B*c+D,e[5]=o*l,e[9]=k*c-P,e[2]=P*c-k,e[6]=a*l,e[10]=D*c+B}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(Ct,t,It)}},{key:"lookAt",value:function(t,e,n){var r=this.elements;return kt.subVectors(t,e),0===kt.lengthSq()&&(kt.z=1),kt.normalize(),Nt.crossVectors(n,kt),0===Nt.lengthSq()&&(1===Math.abs(n.z)?kt.x+=1e-4:kt.z+=1e-4,kt.normalize(),Nt.crossVectors(n,kt)),Nt.normalize(),Bt.crossVectors(kt,Nt),r[0]=Nt.x,r[4]=Bt.x,r[8]=kt.x,r[1]=Nt.y,r[5]=Bt.y,r[9]=kt.y,r[2]=Nt.z,r[6]=Bt.z,r[10]=kt.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],A=n[2],f=n[6],p=n[10],g=n[14],v=n[3],m=n[7],y=n[11],b=n[15],w=r[0],x=r[4],_=r[8],T=r[12],E=r[1],S=r[5],M=r[9],C=r[13],I=r[2],N=r[6],B=r[10],k=r[14],P=r[3],D=r[7],L=r[11],O=r[15];return i[0]=o*w+a*E+s*I+u*P,i[4]=o*x+a*S+s*N+u*D,i[8]=o*_+a*M+s*B+u*L,i[12]=o*T+a*C+s*k+u*O,i[1]=l*w+c*E+h*I+d*P,i[5]=l*x+c*S+h*N+d*D,i[9]=l*_+c*M+h*B+d*L,i[13]=l*T+c*C+h*k+d*O,i[2]=A*w+f*E+p*I+g*P,i[6]=A*x+f*S+p*N+g*D,i[10]=A*_+f*M+p*B+g*L,i[14]=A*T+f*C+p*k+g*O,i[3]=v*w+m*E+y*I+b*P,i[7]=v*x+m*S+y*N+b*D,i[11]=v*_+m*M+y*B+b*L,i[15]=v*T+m*C+y*k+b*O,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],d=t[14];return t[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*d-n*s*d)+t[7]*(+e*s*d-e*u*h+i*o*h-r*o*d+r*u*l-i*s*l)+t[11]*(+e*u*c-e*a*d-i*o*c+n*o*d+i*a*l-n*u*l)+t[15]*(-r*a*l-e*s*c+e*a*h+r*o*c-n*o*h+n*s*l)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],d=t[11],A=t[12],f=t[13],p=t[14],g=t[15],v=c*p*u-f*h*u+f*s*d-a*p*d-c*s*g+a*h*g,m=A*h*u-l*p*u-A*s*d+o*p*d+l*s*g-o*h*g,y=l*f*u-A*c*u+A*a*d-o*f*d-l*a*g+o*c*g,b=A*c*s-l*f*s-A*a*h+o*f*h+l*a*p-o*c*p,w=e*v+n*m+r*y+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var x=1/w;return t[0]=v*x,t[1]=(f*h*i-c*p*i-f*r*d+n*p*d+c*r*g-n*h*g)*x,t[2]=(a*p*i-f*s*i+f*r*u-n*p*u-a*r*g+n*s*g)*x,t[3]=(c*s*i-a*h*i-c*r*u+n*h*u+a*r*d-n*s*d)*x,t[4]=m*x,t[5]=(l*p*i-A*h*i+A*r*d-e*p*d-l*r*g+e*h*g)*x,t[6]=(A*s*i-o*p*i-A*r*u+e*p*u+o*r*g-e*s*g)*x,t[7]=(o*h*i-l*s*i+l*r*u-e*h*u-o*r*d+e*s*d)*x,t[8]=y*x,t[9]=(A*c*i-l*f*i-A*n*d+e*f*d+l*n*g-e*c*g)*x,t[10]=(o*f*i-A*a*i+A*n*u-e*f*u-o*n*g+e*a*g)*x,t[11]=(l*a*i-o*c*i-l*n*u+e*c*u+o*n*d-e*a*d)*x,t[12]=b*x,t[13]=(l*f*r-A*c*r+A*n*h-e*f*h-l*n*p+e*c*p)*x,t[14]=(A*a*r-o*f*r-A*n*s+e*f*s+o*n*p-e*a*p)*x,t[15]=(o*c*r-l*a*r+l*n*s-e*c*s-o*n*h+e*a*h)*x,this}},{key:"scale",value:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}},{key:"makeTranslation",value:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,l=o+o,c=a+a,h=i*u,d=i*l,A=i*c,f=o*l,p=o*c,g=a*c,v=s*u,m=s*l,y=s*c,b=n.x,w=n.y,x=n.z;return r[0]=(1-(f+g))*b,r[1]=(d+y)*b,r[2]=(A-m)*b,r[3]=0,r[4]=(d-y)*w,r[5]=(1-(h+g))*w,r[6]=(p+v)*w,r[7]=0,r[8]=(A+m)*x,r[9]=(p-v)*x,r[10]=(1-(h+f))*x,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}},{key:"decompose",value:function(t,e,n){var r=this.elements,i=St.set(r[0],r[1],r[2]).length(),o=St.set(r[4],r[5],r[6]).length(),a=St.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Mt.copy(this);var s=1/i,u=1/o,l=1/a;return Mt.elements[0]*=s,Mt.elements[1]*=s,Mt.elements[2]*=s,Mt.elements[4]*=u,Mt.elements[5]*=u,Mt.elements[6]*=u,Mt.elements[8]*=l,Mt.elements[9]*=l,Mt.elements[10]*=l,e.setFromRotationMatrix(Mt),n.x=i,n.y=o,n.z=a,this}},{key:"makePerspective",value:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),l=(e+t)/(e-t),c=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}},{key:"makeOrthographic",value:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),l=1/(o-i),c=(e+t)*s,h=(n+r)*u,d=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}]),t}();Et.prototype.isMatrix4=!0;var St=new X,Mt=new Et,Ct=new X(0,0,0),It=new X(1,1,1),Nt=new X,Bt=new X,kt=new X,Pt=new Et,Dt=new Y,Lt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;b(this,t),this._x=e,this._y=n,this._z=r,this._order=i}return x(t,[{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(k(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-k(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(k(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-k(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(k(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-k(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(t,e,n){return Pt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Pt,e,n)}},{key:"setFromVector3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}},{key:"reorder",value:function(t){return Dt.setFromEuler(this),this.setFromQuaternion(Dt,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"toVector3",value:function(t){return t?t.set(this._x,this._y,this._z):new X(this._x,this._y,this._z)}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}]),t}();Lt.prototype.isEuler=!0,Lt.DefaultOrder="XYZ",Lt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Ot=function(){function t(){b(this,t),this.mask=1}return x(t,[{key:"set",value:function(t){this.mask=1<<t|0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!=(this.mask&t.mask)}}]),t}(),Rt=0,Ft=new X,Ut=new Y,jt=new Et,zt=new X,Ht=new X,Qt=new X,Gt=new Y,Vt=new X(1,0,0),Wt=new X(0,1,0),Yt=new X(0,0,1),Xt={type:"added"},qt={type:"removed"},Kt=function(t){A(n,t);var e=p(n);function n(){var t;b(this,n),t=e.call(this),Object.defineProperty(v(t),"id",{value:Rt++}),t.uuid=B(),t.name="",t.type="Object3D",t.parent=null,t.children=[],t.up=n.DefaultUp.clone();var r=new X,i=new Lt,o=new Y,a=new X(1,1,1);return i._onChange((function(){o.setFromEuler(i,!1)})),o._onChange((function(){i.setFromQuaternion(o,void 0,!1)})),Object.defineProperties(v(t),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Et},normalMatrix:{value:new U}}),t.matrix=new Et,t.matrixWorld=new Et,t.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,t.matrixWorldNeedsUpdate=!1,t.layers=new Ot,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.userData={},t}return x(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(t){return this.quaternion.premultiply(t),this}},{key:"setRotationFromAxisAngle",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:"setRotationFromEuler",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:"setRotationFromMatrix",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:"setRotationFromQuaternion",value:function(t){this.quaternion.copy(t)}},{key:"rotateOnAxis",value:function(t,e){return Ut.setFromAxisAngle(t,e),this.quaternion.multiply(Ut),this}},{key:"rotateOnWorldAxis",value:function(t,e){return Ut.setFromAxisAngle(t,e),this.quaternion.premultiply(Ut),this}},{key:"rotateX",value:function(t){return this.rotateOnAxis(Vt,t)}},{key:"rotateY",value:function(t){return this.rotateOnAxis(Wt,t)}},{key:"rotateZ",value:function(t){return this.rotateOnAxis(Yt,t)}},{key:"translateOnAxis",value:function(t,e){return Ft.copy(t).applyQuaternion(this.quaternion),this.position.add(Ft.multiplyScalar(e)),this}},{key:"translateX",value:function(t){return this.translateOnAxis(Vt,t)}},{key:"translateY",value:function(t){return this.translateOnAxis(Wt,t)}},{key:"translateZ",value:function(t){return this.translateOnAxis(Yt,t)}},{key:"localToWorld",value:function(t){return t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return t.applyMatrix4(jt.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(t,e,n){t.isVector3?zt.copy(t):zt.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Ht.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jt.lookAt(Ht,zt,this.up):jt.lookAt(zt,Ht,this.up),this.quaternion.setFromRotationMatrix(jt),r&&(jt.extractRotation(r.matrixWorld),Ut.setFromRotationMatrix(jt),this.quaternion.premultiply(Ut.invert()))}},{key:"add",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Xt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}},{key:"remove",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(qt)),this}},{key:"removeFromParent",value:function(){var t=this.parent;return null!==t&&t.remove(this),this}},{key:"clear",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.parent=null,e.dispatchEvent(qt)}return this.children.length=0,this}},{key:"attach",value:function(t){return this.updateWorldMatrix(!0,!1),jt.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),jt.multiply(t.parent.matrixWorld)),t.applyMatrix4(jt),this.add(t),t.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(t){return this.getObjectByProperty("id",t)}},{key:"getObjectByName",value:function(t){return this.getObjectByProperty("name",t)}},{key:"getObjectByProperty",value:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ht,t,Qt),t}},{key:"getWorldScale",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ht,Gt,t),t}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)}},{key:"traverseVisible",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}},{key:"updateWorldMatrix",value:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var l=a[s];i(t.shapes,l)}else i(t.shapes,a)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,d=this.material.length;h<d;h++)c.push(i(t.materials,this.material[h]));r.material=c}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(var A=0;A<this.children.length;A++)r.children.push(this.children[A].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(var f=0;f<this.animations.length;f++){var p=this.animations[f];r.animations.push(i(t.animations,p))}}if(e){var g=_(t.geometries),v=_(t.materials),m=_(t.textures),y=_(t.images),b=_(t.shapes),w=_(t.skeletons),x=_(t.animations);g.length>0&&(n.geometries=g),v.length>0&&(n.materials=v),m.length>0&&(n.textures=m),y.length>0&&(n.images=y),b.length>0&&(n.shapes=b),w.length>0&&(n.skeletons=w),x.length>0&&(n.animations=x)}return n.object=r,n;function _(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}},{key:"copy",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}]),n}(w);Kt.DefaultUp=new X(0,1,0),Kt.DefaultMatrixAutoUpdate=!0,Kt.prototype.isObject3D=!0;var Zt=new X,Jt=new X,$t=new X,te=new X,ee=new X,ne=new X,re=new X,ie=new X,oe=new X,ae=new X,se=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new X,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new X;b(this,t),this.a=e,this.b=n,this.c=r}return x(t,[{key:"set",value:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return Zt.subVectors(this.c,this.b),Jt.subVectors(this.a,this.b),.5*Zt.cross(Jt).length()}},{key:"getMidpoint",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return t.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)}},{key:"getUV",value:function(e,n,r,i,o){return t.getUV(e,this.a,this.b,this.c,n,r,i,o)}},{key:"containsPoint",value:function(e){return t.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return t.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(t,e){var n,r,i=this.a,o=this.b,a=this.c;ee.subVectors(o,i),ne.subVectors(a,i),ie.subVectors(t,i);var s=ee.dot(ie),u=ne.dot(ie);if(s<=0&&u<=0)return e.copy(i);oe.subVectors(t,o);var l=ee.dot(oe),c=ne.dot(oe);if(l>=0&&c<=l)return e.copy(o);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(i).addScaledVector(ee,n);ae.subVectors(t,a);var d=ee.dot(ae),A=ne.dot(ae);if(A>=0&&d<=A)return e.copy(a);var f=d*u-s*A;if(f<=0&&u>=0&&A<=0)return r=u/(u-A),e.copy(i).addScaledVector(ne,r);var p=l*A-d*c;if(p<=0&&c-l>=0&&d-A>=0)return re.subVectors(a,o),r=(c-l)/(c-l+(d-A)),e.copy(o).addScaledVector(re,r);var g=1/(p+f+h);return n=f*g,r=h*g,e.copy(i).addScaledVector(ee,n).addScaledVector(ne,r)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(t,e,n,r){r.subVectors(n,e),Zt.subVectors(t,e),r.cross(Zt);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(t,e,n,r,i){Zt.subVectors(r,e),Jt.subVectors(n,e),$t.subVectors(t,e);var o=Zt.dot(Zt),a=Zt.dot(Jt),s=Zt.dot($t),u=Jt.dot(Jt),l=Jt.dot($t),c=o*u-a*a;if(0===c)return i.set(-2,-1,-1);var h=1/c,d=(u*s-a*l)*h,A=(o*l-a*s)*h;return i.set(1-d-A,A,d)}},{key:"containsPoint",value:function(t,e,n,r){return this.getBarycoord(t,e,n,r,te),te.x>=0&&te.y>=0&&te.x+te.y<=1}},{key:"getUV",value:function(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,te),s.set(0,0),s.addScaledVector(i,te.x),s.addScaledVector(o,te.y),s.addScaledVector(a,te.z),s}},{key:"isFrontFacing",value:function(t,e,n,r){return Zt.subVectors(n,e),Jt.subVectors(t,e),Zt.cross(Jt).dot(r)<0}}]),t}(),ue=0,le=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),t=e.call(this),Object.defineProperty(v(t),"id",{value:ue++}),t.uuid=B(),t.name="",t.type="Material",t.fog=!0,t.blending=1,t.side=0,t.vertexColors=!1,t.opacity=1,t.transparent=!1,t.blendSrc=204,t.blendDst=205,t.blendEquation=100,t.blendSrcAlpha=null,t.blendDstAlpha=null,t.blendEquationAlpha=null,t.depthFunc=3,t.depthTest=!0,t.depthWrite=!0,t.stencilWriteMask=255,t.stencilFunc=519,t.stencilRef=0,t.stencilFuncMask=255,t.stencilFail=7680,t.stencilZFail=7680,t.stencilZPass=7680,t.stencilWrite=!1,t.clippingPlanes=null,t.clipIntersection=!1,t.clipShadows=!1,t.shadowSide=null,t.colorWrite=!0,t.precision=null,t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=0,t.dithering=!1,t.alphaTest=0,t.alphaToCoverage=!1,t.premultipliedAlpha=!1,t.visible=!0,t.toneMapped=!0,t.userData={},t.version=0,t}return x(n,[{key:"onBuild",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(w);le.prototype.isMaterial=!0;var ce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},he={h:0,s:0,l:0},de={h:0,s:0,l:0};function Ae(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function fe(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function pe(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var ge=function(){function t(e,n,r){return b(this,t),void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return x(t,[{key:"set",value:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}},{key:"setRGB",value:function(t,e,n){return this.r=t,this.g=e,this.b=n,this}},{key:"setHSL",value:function(t,e,n){if(t=function(t,e){return(t%e+e)%e}(t,1),e=k(e,0,1),n=k(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=Ae(i,r,t+1/3),this.g=Ae(i,r,t),this.b=Ae(i,r,t-1/3)}return this}},{key:"setStyle",value:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[4]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}},{key:"setColorName",value:function(t){var e=ce[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copyGammaToLinear",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}},{key:"copyLinearToGamma",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}},{key:"convertGammaToLinear",value:function(t){return this.copyGammaToLinear(this,t),this}},{key:"convertLinearToGamma",value:function(t){return this.copyLinearToGamma(this,t),this}},{key:"copySRGBToLinear",value:function(t){return this.r=fe(t.r),this.g=fe(t.g),this.b=fe(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=pe(t.r),this.g=pe(t.g),this.b=pe(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(t){var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:e=(i-o)/l+(i<o?6:0);break;case i:e=(o-r)/l+2;break;case o:e=(r-i)/l+4}e/=6}return t.h=e,t.s=n,t.l=u,t}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(t,e,n){return this.getHSL(he),he.h+=t,he.s+=e,he.l+=n,this.setHSL(he.h,he.s,he.l),this}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpColors",value:function(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(he),t.getHSL(de);var n=P(he.h,de.h,e),r=P(he.s,de.s,e),i=P(he.l,de.l,e);return this.setHSL(n,r,i),this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),t}();ge.NAMES=ce,ge.prototype.isColor=!0,ge.prototype.r=1,ge.prototype.g=1,ge.prototype.b=1;var ve=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="MeshBasicMaterial",r.color=new ge(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this}}]),n}(le);ve.prototype.isMeshBasicMaterial=!0;var me=new X,ye=new R,be=function(){function t(e,n,r){if(b(this,t),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=!0===r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}return x(t,[{key:"onUploadCallback",value:function(){}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"copyColorsArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ge),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this}},{key:"copyVector2sArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new R),e[n++]=o.x,e[n++]=o.y}return this}},{key:"copyVector3sArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new X),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this}},{key:"copyVector4sArray",value:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new G),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)ye.fromBufferAttribute(this,e),ye.applyMatrix3(t),this.setXY(e,ye.x,ye.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)me.fromBufferAttribute(this,r),me.applyMatrix3(t),this.setXYZ(r,me.x,me.y,me.z);return this}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.count;e<n;e++)me.x=this.getX(e),me.y=this.getY(e),me.z=this.getZ(e),me.applyMatrix4(t),this.setXYZ(e,me.x,me.y,me.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)me.x=this.getX(e),me.y=this.getY(e),me.z=this.getZ(e),me.applyNormalMatrix(t),this.setXYZ(e,me.x,me.y,me.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)me.x=this.getX(e),me.y=this.getY(e),me.z=this.getZ(e),me.transformDirection(t),this.setXYZ(e,me.x,me.y,me.z);return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"getX",value:function(t){return this.array[t*this.itemSize]}},{key:"setX",value:function(t,e){return this.array[t*this.itemSize]=e,this}},{key:"getY",value:function(t){return this.array[t*this.itemSize+1]}},{key:"setY",value:function(t,e){return this.array[t*this.itemSize+1]=e,this}},{key:"getZ",value:function(t){return this.array[t*this.itemSize+2]}},{key:"setZ",value:function(t,e){return this.array[t*this.itemSize+2]=e,this}},{key:"getW",value:function(t){return this.array[t*this.itemSize+3]}},{key:"setW",value:function(t,e){return this.array[t*this.itemSize+3]=e,this}},{key:"setXY",value:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),t}();be.prototype.isBufferAttribute=!0;var we=function(t){A(n,t);var e=p(n);function n(t,r,i){return b(this,n),e.call(this,new Uint16Array(t),r,i)}return n}(be),xe=function(t){A(n,t);var e=p(n);function n(t,r,i){return b(this,n),e.call(this,new Int32Array(t),r,i)}return n}(be),_e=function(t){A(n,t);var e=p(n);function n(t,r,i){return b(this,n),e.call(this,new Uint32Array(t),r,i)}return n}(be);(function(t){A(n,t);var e=p(n);function n(t,r,i){return b(this,n),e.call(this,new Uint16Array(t),r,i)}return n})(be).prototype.isFloat16BufferAttribute=!0;var Te=function(t){A(n,t);var e=p(n);function n(t,r,i){return b(this,n),e.call(this,new Float32Array(t),r,i)}return n}(be);function Ee(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}var Se=0,Me=new Et,Ce=new Kt,Ie=new X,Ne=new Z,Be=new Z,ke=new X,Pe=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),t=e.call(this),Object.defineProperty(v(t),"id",{value:Se++}),t.uuid=B(),t.name="",t.type="BufferGeometry",t.index=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return x(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return Array.isArray(t)?this.index=new(Ee(t)>65535?_e:we)(t,1):this.index=t,this}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"setAttribute",value:function(t,e){return this.attributes[t]=e,this}},{key:"deleteAttribute",value:function(t){return delete this.attributes[t],this}},{key:"hasAttribute",value:function(t){return void 0!==this.attributes[t]}},{key:"addGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"applyMatrix4",value:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new U).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(t){return Me.makeRotationFromQuaternion(t),this.applyMatrix4(Me),this}},{key:"rotateX",value:function(t){return Me.makeRotationX(t),this.applyMatrix4(Me),this}},{key:"rotateY",value:function(t){return Me.makeRotationY(t),this.applyMatrix4(Me),this}},{key:"rotateZ",value:function(t){return Me.makeRotationZ(t),this.applyMatrix4(Me),this}},{key:"translate",value:function(t,e,n){return Me.makeTranslation(t,e,n),this.applyMatrix4(Me),this}},{key:"scale",value:function(t,e,n){return Me.makeScale(t,e,n),this.applyMatrix4(Me),this}},{key:"lookAt",value:function(t){return Ce.lookAt(t),Ce.updateMatrix(),this.applyMatrix4(Ce.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ie).negate(),this.translate(Ie.x,Ie.y,Ie.z),this}},{key:"setFromPoints",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Te(e,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Z);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];Ne.setFromBufferAttribute(i),this.morphTargetsRelative?(ke.addVectors(this.boundingBox.min,Ne.min),this.boundingBox.expandByPoint(ke),ke.addVectors(this.boundingBox.max,Ne.max),this.boundingBox.expandByPoint(ke)):(this.boundingBox.expandByPoint(Ne.min),this.boundingBox.expandByPoint(Ne.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new gt);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new X,1/0);if(t){var n=this.boundingSphere.center;if(Ne.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var o=e[r];Be.setFromBufferAttribute(o),this.morphTargetsRelative?(ke.addVectors(Ne.min,Be.min),Ne.expandByPoint(ke),ke.addVectors(Ne.max,Be.max),Ne.expandByPoint(ke)):(Ne.expandByPoint(Be.min),Ne.expandByPoint(Be.max))}Ne.getCenter(n);for(var a=0,s=0,u=t.count;s<u;s++)ke.fromBufferAttribute(t,s),a=Math.max(a,n.distanceToSquared(ke));if(e)for(var l=0,c=e.length;l<c;l++)for(var h=e[l],d=this.morphTargetsRelative,A=0,f=h.count;A<f;A++)ke.fromBufferAttribute(h,A),d&&(Ie.fromBufferAttribute(t,A),ke.add(Ie)),a=Math.max(a,n.distanceToSquared(ke));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeFaceNormals",value:function(){}},{key:"computeTangents",value:function(){var t=this.index,e=this.attributes;if(null!==t&&void 0!==e.position&&void 0!==e.normal&&void 0!==e.uv){var n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,a=r.length/3;void 0===e.tangent&&this.setAttribute("tangent",new be(new Float32Array(4*a),4));for(var s=e.tangent.array,u=[],l=[],c=0;c<a;c++)u[c]=new X,l[c]=new X;var h=new X,d=new X,A=new X,f=new R,p=new R,g=new R,v=new X,m=new X,y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(var b=0,w=y.length;b<w;++b)for(var x=y[b],_=x.start,T=_,E=_+x.count;T<E;T+=3)O(n[T+0],n[T+1],n[T+2]);for(var S=new X,M=new X,C=new X,I=new X,N=0,B=y.length;N<B;++N)for(var k=y[N],P=k.start,D=P,L=P+k.count;D<L;D+=3)F(n[D+0]),F(n[D+1]),F(n[D+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function O(t,e,n){h.fromArray(r,3*t),d.fromArray(r,3*e),A.fromArray(r,3*n),f.fromArray(o,2*t),p.fromArray(o,2*e),g.fromArray(o,2*n),d.sub(h),A.sub(h),p.sub(f),g.sub(f);var i=1/(p.x*g.y-g.x*p.y);isFinite(i)&&(v.copy(d).multiplyScalar(g.y).addScaledVector(A,-p.y).multiplyScalar(i),m.copy(A).multiplyScalar(p.x).addScaledVector(d,-g.x).multiplyScalar(i),u[t].add(v),u[e].add(v),u[n].add(v),l[t].add(m),l[e].add(m),l[n].add(m))}function F(t){C.fromArray(i,3*t),I.copy(C);var e=u[t];S.copy(e),S.sub(C.multiplyScalar(C.dot(e))).normalize(),M.crossVectors(I,e);var n=M.dot(l[t])<0?-1:1;s[4*t]=S.x,s[4*t+1]=S.y,s[4*t+2]=S.z,s[4*t+3]=n}}},{key:"computeVertexNormals",value:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new be(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var o=new X,a=new X,s=new X,u=new X,l=new X,c=new X,h=new X,d=new X;if(t)for(var A=0,f=t.count;A<f;A+=3){var p=t.getX(A+0),g=t.getX(A+1),v=t.getX(A+2);o.fromBufferAttribute(e,p),a.fromBufferAttribute(e,g),s.fromBufferAttribute(e,v),h.subVectors(s,a),d.subVectors(o,a),h.cross(d),u.fromBufferAttribute(n,p),l.fromBufferAttribute(n,g),c.fromBufferAttribute(n,v),u.add(h),l.add(h),c.add(h),n.setXYZ(p,u.x,u.y,u.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(v,c.x,c.y,c.z)}else for(var m=0,y=e.count;m<y;m+=3)o.fromBufferAttribute(e,m+0),a.fromBufferAttribute(e,m+1),s.fromBufferAttribute(e,m+2),h.subVectors(s,a),d.subVectors(o,a),h.cross(d),n.setXYZ(m+0,h.x,h.y,h.z),n.setXYZ(m+1,h.x,h.y,h.z),n.setXYZ(m+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,o=t.attributes[r],a=o.array,s=o.itemSize*e,u=Math.min(a.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=a[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)}},{key:"normalizeNormals",value:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)ke.fromBufferAttribute(t,e),ke.normalize(),t.setXYZ(e,ke.x,ke.y,ke.z)}},{key:"toNonIndexed",value:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r),a=0,s=0,u=0,l=e.length;u<l;u++){a=t.isInterleavedBufferAttribute?e[u]*t.data.stride+t.offset:e[u]*r;for(var c=0;c<r;c++)o[s++]=n[a++]}return new be(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var e=new n,r=this.index.array,i=this.attributes;for(var o in i){var a=t(i[o],r);e.setAttribute(o,a)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,d=c.length;h<d;h++){var A=t(c[h],r);l.push(A)}e.morphAttributes[u]=l}e.morphTargetsRelative=this.morphTargetsRelative;for(var f=this.groups,p=0,g=f.length;p<g;p++){var v=f[p];e.addGroup(v.start,v.count,v.materialIndex)}return e}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var o in i){var a=i[o];t.data.attributes[o]=a.toJSON(t.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],d=0,A=c.length;d<A;d++){var f=c[d];h.push(f.toJSON(t.data))}h.length>0&&(s[l]=h,u=!0)}u&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var g=this.boundingSphere;return null!==g&&(t.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),t}},{key:"clone",value:function(){return(new n).copy(this)}},{key:"copy",value:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var r=t.attributes;for(var i in r){var o=r[i];this.setAttribute(i,o.clone(e))}var a=t.morphAttributes;for(var s in a){for(var u=[],l=a[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(e));this.morphAttributes[s]=u}this.morphTargetsRelative=t.morphTargetsRelative;for(var d=t.groups,A=0,f=d.length;A<f;A++){var p=d[A];this.addGroup(p.start,p.count,p.materialIndex)}var g=t.boundingBox;null!==g&&(this.boundingBox=g.clone());var v=t.boundingSphere;return null!==v&&(this.boundingSphere=v.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(w);Pe.prototype.isBufferGeometry=!0;var De=new Et,Le=new Tt,Oe=new gt,Re=new X,Fe=new X,Ue=new X,je=new X,ze=new X,He=new X,Qe=new X,Ge=new X,Ve=new X,We=new R,Ye=new R,Xe=new R,qe=new X,Ke=new X,Ze=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pe,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve;return b(this,n),(t=e.call(this)).type="Mesh",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(t,e){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Oe.copy(r.boundingSphere),Oe.applyMatrix4(o),!1!==t.ray.intersectsSphere(Oe))&&(De.copy(o).invert(),Le.copy(t.ray).applyMatrix4(De),null===r.boundingBox||!1!==Le.intersectsBox(r.boundingBox)))if(r.isBufferGeometry){var a=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,h=r.attributes.uv2,d=r.groups,A=r.drawRange;if(null!==a)if(Array.isArray(i))for(var f=0,p=d.length;f<p;f++)for(var g=d[f],v=i[g.materialIndex],m=Math.max(g.start,A.start),y=Math.min(g.start+g.count,A.start+A.count);m<y;m+=3){var b=a.getX(m),w=a.getX(m+1),x=a.getX(m+2);(n=Je(this,v,t,Le,s,u,l,c,h,b,w,x))&&(n.faceIndex=Math.floor(m/3),n.face.materialIndex=g.materialIndex,e.push(n))}else for(var _=Math.max(0,A.start),T=Math.min(a.count,A.start+A.count);_<T;_+=3){var E=a.getX(_),S=a.getX(_+1),M=a.getX(_+2);(n=Je(this,i,t,Le,s,u,l,c,h,E,S,M))&&(n.faceIndex=Math.floor(_/3),e.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var C=0,I=d.length;C<I;C++)for(var N=d[C],B=i[N.materialIndex],k=Math.max(N.start,A.start),P=Math.min(N.start+N.count,A.start+A.count);k<P;k+=3)(n=Je(this,B,t,Le,s,u,l,c,h,k,k+1,k+2))&&(n.faceIndex=Math.floor(k/3),n.face.materialIndex=N.materialIndex,e.push(n));else for(var D=Math.max(0,A.start),L=Math.min(s.count,A.start+A.count);D<L;D+=3)(n=Je(this,i,t,Le,s,u,l,c,h,D,D+1,D+2))&&(n.faceIndex=Math.floor(D/3),e.push(n))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(Kt);function Je(t,e,n,r,i,o,a,s,u,l,c,h){Re.fromBufferAttribute(i,l),Fe.fromBufferAttribute(i,c),Ue.fromBufferAttribute(i,h);var d=t.morphTargetInfluences;if(e.morphTargets&&o&&d){Qe.set(0,0,0),Ge.set(0,0,0),Ve.set(0,0,0);for(var A=0,f=o.length;A<f;A++){var p=d[A],g=o[A];0!==p&&(je.fromBufferAttribute(g,l),ze.fromBufferAttribute(g,c),He.fromBufferAttribute(g,h),a?(Qe.addScaledVector(je,p),Ge.addScaledVector(ze,p),Ve.addScaledVector(He,p)):(Qe.addScaledVector(je.sub(Re),p),Ge.addScaledVector(ze.sub(Fe),p),Ve.addScaledVector(He.sub(Ue),p)))}Re.add(Qe),Fe.add(Ge),Ue.add(Ve)}t.isSkinnedMesh&&(t.boneTransform(l,Re),t.boneTransform(c,Fe),t.boneTransform(h,Ue));var v=function(t,e,n,r,i,o,a,s){if(null===(1===e.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==e.side,s)))return null;Ke.copy(s),Ke.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(Ke);return u<n.near||u>n.far?null:{distance:u,point:Ke.clone(),object:t}}(t,e,n,r,Re,Fe,Ue,qe);if(v){s&&(We.fromBufferAttribute(s,l),Ye.fromBufferAttribute(s,c),Xe.fromBufferAttribute(s,h),v.uv=se.getUV(qe,Re,Fe,Ue,We,Ye,Xe,new R)),u&&(We.fromBufferAttribute(u,l),Ye.fromBufferAttribute(u,c),Xe.fromBufferAttribute(u,h),v.uv2=se.getUV(qe,Re,Fe,Ue,We,Ye,Xe,new R));var m={a:l,b:c,c:h,normal:new X,materialIndex:0};se.getNormal(Re,Fe,Ue,m.normal),v.face=m}return v}Ze.prototype.isMesh=!0;var $e=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;b(this,n),(t=e.call(this)).type="BoxGeometry",t.parameters={width:r,height:i,depth:o,widthSegments:a,heightSegments:s,depthSegments:u};var l=v(t);a=Math.floor(a),s=Math.floor(s),u=Math.floor(u);var c=[],h=[],d=[],A=[],f=0,p=0;function g(t,e,n,r,i,o,a,s,u,g,v){for(var m=o/u,y=a/g,b=o/2,w=a/2,x=s/2,_=u+1,T=g+1,E=0,S=0,M=new X,C=0;C<T;C++)for(var I=C*y-w,N=0;N<_;N++){var B=N*m-b;M[t]=B*r,M[e]=I*i,M[n]=x,h.push(M.x,M.y,M.z),M[t]=0,M[e]=0,M[n]=s>0?1:-1,d.push(M.x,M.y,M.z),A.push(N/u),A.push(1-C/g),E+=1}for(var k=0;k<g;k++)for(var P=0;P<u;P++){var D=f+P+_*k,L=f+P+_*(k+1),O=f+(P+1)+_*(k+1),R=f+(P+1)+_*k;c.push(D,L,R),c.push(L,O,R),S+=6}l.addGroup(p,S,v),p+=S,f+=E}return g("z","y","x",-1,-1,o,i,r,u,s,0),g("z","y","x",1,-1,o,i,-r,u,s,1),g("x","z","y",1,1,r,o,i,a,u,2),g("x","z","y",1,-1,r,o,-i,a,u,3),g("x","y","z",1,-1,r,i,o,a,s,4),g("x","y","z",-1,-1,r,i,-o,a,s,5),t.setIndex(c),t.setAttribute("position",new Te(h,3)),t.setAttribute("normal",new Te(d,3)),t.setAttribute("uv",new Te(A,2)),t}return x(n,null,[{key:"fromJSON",value:function(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}]),n}(Pe);function tn(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function en(t){for(var e={},n=0;n<t.length;n++){var r=tn(t[n]);for(var i in r)e[i]=r[i]}return e}var nn={clone:tn,merge:en},rn=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.morphTargets=!1,r.morphNormals=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(t)),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=tn(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}},{key:"toJSON",value:function(t){var e=d(y(n.prototype),"toJSON",this).call(this,t);for(var r in e.glslVersion=this.glslVersion,e.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(e.extensions=o),e}}]),n}(le);rn.prototype.isShaderMaterial=!0;var on=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this)).type="Camera",t.matrixWorldInverse=new Et,t.projectionMatrix=new Et,t.projectionMatrixInverse=new Et,t}return x(n,[{key:"copy",value:function(t,e){return d(y(n.prototype),"copy",this).call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}},{key:"updateMatrixWorld",value:function(t){d(y(n.prototype),"updateMatrixWorld",this).call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(t,e){d(y(n.prototype),"updateWorldMatrix",this).call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Kt);on.prototype.isCamera=!0;var an=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return b(this,n),(t=e.call(this)).type="PerspectiveCamera",t.fov=r,t.zoom=1,t.near=o,t.far=a,t.focus=10,t.aspect=i,t.view=null,t.filmGauge=35,t.filmOffset=0,t.updateProjectionMatrix(),t}return x(n,[{key:"copy",value:function(t,e){return d(y(n.prototype),"copy",this).call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}},{key:"setFocalLength",value:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*N*Math.atan(e),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var t=Math.tan(.5*I*this.fov);return.5*this.getFilmHeight()/t}},{key:"getEffectiveFOV",value:function(){return 2*N*Math.atan(Math.tan(.5*I*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=this.near,e=t*Math.tan(.5*I*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var e=d(y(n.prototype),"toJSON",this).call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}]),n}(on);an.prototype.isPerspectiveCamera=!0;var sn=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;if(b(this,n),(o=e.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return g(o,void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."));o.renderTarget=i;var a=new an(90,1,t,r);a.layers=o.layers,a.up.set(0,-1,0),a.lookAt(new X(1,0,0)),o.add(a);var s=new an(90,1,t,r);s.layers=o.layers,s.up.set(0,-1,0),s.lookAt(new X(-1,0,0)),o.add(s);var u=new an(90,1,t,r);u.layers=o.layers,u.up.set(0,0,1),u.lookAt(new X(0,1,0)),o.add(u);var l=new an(90,1,t,r);l.layers=o.layers,l.up.set(0,0,-1),l.lookAt(new X(0,-1,0)),o.add(l);var c=new an(90,1,t,r);c.layers=o.layers,c.up.set(0,-1,0),c.lookAt(new X(0,0,1)),o.add(c);var h=new an(90,1,t,r);return h.layers=o.layers,h.up.set(0,-1,0),h.lookAt(new X(0,0,-1)),o.add(h),g(o)}return x(n,[{key:"update",value:function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=l(this.children,6),i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],h=t.xr.enabled,d=t.getRenderTarget();t.xr.enabled=!1;var A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,o),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,u),n.texture.generateMipmaps=A,t.setRenderTarget(n,5),t.render(e,c),t.setRenderTarget(d),t.xr.enabled=h}}]),n}(Kt),un=function(t){A(n,t);var e=p(n);function n(t,r,i,o,a,s,u,l,c,h){var d;return b(this,n),(d=e.call(this,t=void 0!==t?t:[],r=void 0!==r?r:301,i,o,a,s,u=void 0!==u?u:1022,l,c,h))._needsFlipEnvMap=!0,d.flipY=!1,d}return x(n,[{key:"images",get:function(){return this.image},set:function(t){this.image=t}}]),n}(H);un.prototype.isCubeTexture=!0;var ln=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),o=e.call(this,t,t,r),r=r||{},o.texture=new un(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),o.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,o.texture.minFilter=void 0!==r.minFilter?r.minFilter:1006,o.texture._needsFlipEnvMap=!1,o}return x(n,[{key:"fromEquirectangularTexture",value:function(t,e){this.texture.type=e.type,this.texture.format=1023,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new $e(5,5,5),a=new rn({name:"CubemapFromEquirect",uniforms:tn(n),vertexShader:r,fragmentShader:i,side:1,blending:0});a.uniforms.tEquirect.value=e;var s=new Ze(o,a),u=e.minFilter;return 1008===e.minFilter&&(e.minFilter=1006),new sn(1,10,this).update(t,s),e.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(t,e,n,r){for(var i=t.getRenderTarget(),o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}]),n}(V);ln.prototype.isWebGLCubeRenderTarget=!0;var cn=new X,hn=new X,dn=new U,An=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new X(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b(this,t),this.normal=e,this.constant=n}return x(t,[{key:"set",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:"setComponents",value:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(t,e,n){var r=cn.subVectors(n,e).cross(hn.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:"intersectLine",value:function(t,e){var n=t.delta(cn),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;var i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}},{key:"intersectsLine",value:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,e){var n=e||dn.getNormalMatrix(t),r=this.coplanarPoint(cn).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();An.prototype.isPlane=!0;var fn=new gt,pn=new X,gn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new An,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new An,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new An,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new An,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new An,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new An;b(this,t),this.planes=[e,n,r,i,o,a]}return x(t,[{key:"set",value:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}},{key:"copy",value:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],d=n[9],A=n[10],f=n[11],p=n[12],g=n[13],v=n[14],m=n[15];return e[0].setComponents(a-r,c-s,f-h,m-p).normalize(),e[1].setComponents(a+r,c+s,f+h,m+p).normalize(),e[2].setComponents(a+i,c+u,f+d,m+g).normalize(),e[3].setComponents(a-i,c-u,f-d,m-g).normalize(),e[4].setComponents(a-o,c-l,f-A,m-v).normalize(),e[5].setComponents(a+o,c+l,f+A,m+v).normalize(),this}},{key:"intersectsObject",value:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),fn.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(fn)}},{key:"intersectsSprite",value:function(t){return fn.center.set(0,0,0),fn.radius=.7071067811865476,fn.applyMatrix4(t.matrixWorld),this.intersectsSphere(fn)}},{key:"intersectsSphere",value:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0}},{key:"intersectsBox",value:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(pn.x=r.normal.x>0?t.max.x:t.min.x,pn.y=r.normal.y>0?t.max.y:t.min.y,pn.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(pn)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();function vn(){var t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function mn(t,e){var n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){var o=r.get(e);(!o||o.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var a,s,u,l,c,h=r.get(e);void 0===h?r.set(e,function(e,r){var i=e.array,o=e.usage,a=t.createBuffer();t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):h.version<e.version&&(a=h.buffer,u=i,l=(s=e).array,c=s.updateRange,t.bindBuffer(u,a),-1===c.count?t.bufferSubData(u,0,l):(n?t.bufferSubData(u,c.offset*l.BYTES_PER_ELEMENT,l,c.offset,c.count):t.bufferSubData(u,c.offset*l.BYTES_PER_ELEMENT,l.subarray(c.offset,c.offset+c.count)),c.count=-1),h.version=e.version)}}}}var yn=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;b(this,n),(t=e.call(this)).type="PlaneGeometry",t.parameters={width:r,height:i,widthSegments:o,heightSegments:a};for(var s=r/2,u=i/2,l=Math.floor(o),c=Math.floor(a),h=l+1,d=c+1,A=r/l,f=i/c,p=[],g=[],v=[],m=[],y=0;y<d;y++)for(var w=y*f-u,x=0;x<h;x++){var _=x*A-s;g.push(_,-w,0),v.push(0,0,1),m.push(x/l),m.push(1-y/c)}for(var T=0;T<c;T++)for(var E=0;E<l;E++){var S=E+h*T,M=E+h*(T+1),C=E+1+h*(T+1),I=E+1+h*T;p.push(S,M,I),p.push(M,C,I)}return t.setIndex(p),t.setAttribute("position",new Te(g,3)),t.setAttribute("normal",new Te(v,3)),t.setAttribute("uv",new Te(m,2)),t}return x(n,null,[{key:"fromJSON",value:function(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}}]),n}(Pe),bn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tnormal, v, roughnessFactor, material.diffuseColor, totalSpecular,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},wn={common:{diffuse:{value:new ge(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new U},uv2Transform:{value:new U},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new R(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ge(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ge(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new U}},sprite:{diffuse:{value:new ge(16777215)},opacity:{value:1},center:{value:new R(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new U}}},xn={basic:{uniforms:en([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.fog]),vertexShader:bn.meshbasic_vert,fragmentShader:bn.meshbasic_frag},lambert:{uniforms:en([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.fog,wn.lights,{emissive:{value:new ge(0)}}]),vertexShader:bn.meshlambert_vert,fragmentShader:bn.meshlambert_frag},phong:{uniforms:en([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,wn.lights,{emissive:{value:new ge(0)},specular:{value:new ge(1118481)},shininess:{value:30}}]),vertexShader:bn.meshphong_vert,fragmentShader:bn.meshphong_frag},standard:{uniforms:en([wn.common,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.roughnessmap,wn.metalnessmap,wn.fog,wn.lights,{emissive:{value:new ge(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag},toon:{uniforms:en([wn.common,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.gradientmap,wn.fog,wn.lights,{emissive:{value:new ge(0)}}]),vertexShader:bn.meshtoon_vert,fragmentShader:bn.meshtoon_frag},matcap:{uniforms:en([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,{matcap:{value:null}}]),vertexShader:bn.meshmatcap_vert,fragmentShader:bn.meshmatcap_frag},points:{uniforms:en([wn.points,wn.fog]),vertexShader:bn.points_vert,fragmentShader:bn.points_frag},dashed:{uniforms:en([wn.common,wn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bn.linedashed_vert,fragmentShader:bn.linedashed_frag},depth:{uniforms:en([wn.common,wn.displacementmap]),vertexShader:bn.depth_vert,fragmentShader:bn.depth_frag},normal:{uniforms:en([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,{opacity:{value:1}}]),vertexShader:bn.normal_vert,fragmentShader:bn.normal_frag},sprite:{uniforms:en([wn.sprite,wn.fog]),vertexShader:bn.sprite_vert,fragmentShader:bn.sprite_frag},background:{uniforms:{uvTransform:{value:new U},t2D:{value:null}},vertexShader:bn.background_vert,fragmentShader:bn.background_frag},cube:{uniforms:en([wn.envmap,{opacity:{value:1}}]),vertexShader:bn.cube_vert,fragmentShader:bn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bn.equirect_vert,fragmentShader:bn.equirect_frag},distanceRGBA:{uniforms:en([wn.common,wn.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bn.distanceRGBA_vert,fragmentShader:bn.distanceRGBA_frag},shadow:{uniforms:en([wn.lights,wn.fog,{color:{value:new ge(0)},opacity:{value:1}}]),vertexShader:bn.shadow_vert,fragmentShader:bn.shadow_frag}};function _n(t,e,n,r,i){var o,a,s=new ge(0),u=0,l=null,c=0,h=null;function d(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return s},setClearColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(t),d(s,u=e)},getClearAlpha:function(){return u},setClearAlpha:function(t){d(s,u=t)},render:function(n,i){var A=!1,f=!0===i.isScene?i.background:null;f&&f.isTexture&&(f=e.get(f));var p=t.xr,g=p.getSession&&p.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?d(s,u):f&&f.isColor&&(d(f,1),A=!0),(t.autoClear||A)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),f&&(f.isCubeTexture||306===f.mapping)?(void 0===a&&((a=new Ze(new $e(1,1,1),new rn({name:"BackgroundCubeMaterial",uniforms:tn(xn.cube.uniforms),vertexShader:xn.cube.vertexShader,fragmentShader:xn.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a)),a.material.uniforms.envMap.value=f,a.material.uniforms.flipEnvMap.value=f.isCubeTexture&&f._needsFlipEnvMap?-1:1,l===f&&c===f.version&&h===t.toneMapping||(a.material.needsUpdate=!0,l=f,c=f.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):f&&f.isTexture&&(void 0===o&&((o=new Ze(new yn(2,2),new rn({name:"BackgroundMaterial",uniforms:tn(xn.background.uniforms),vertexShader:xn.background.vertexShader,fragmentShader:xn.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),l===f&&c===f.version&&h===t.toneMapping||(o.material.needsUpdate=!0,l=f,c=f.version,h=t.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Tn(t,e,n,r){var i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=d(null),l=u;function c(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function h(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function d(t){for(var e=[],n=[],r=[],o=0;o<i;o++)e[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function A(){for(var t=l.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function f(t){p(t,0)}function p(n,i){var o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){for(var e=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function v(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function m(){y(),l!==u&&c((l=u).object)}function y(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,m,y){var b=!1;if(a){var w=function(e,n,i){var a=!0===i.wireframe,u=s[e.id];void 0===u&&(u={},s[e.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[a];return void 0===c&&(c=d(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),l[a]=c),c}(m,h,u);l!==w&&c((l=w).object),(b=function(t,e){var n=l.attributes,r=t.attributes,i=0;for(var o in r){var a=n[o],s=r[o];if(void 0===a||a.attribute!==s||a.data!==s.data)return!0;i++}return l.attributesNum!==i||l.index!==e}(m,y))&&function(t,e){var n={},r=t.attributes,i=0;for(var o in r){var a=r[o],s={};s.attribute=a,a.data&&(s.data=a.data),n[o]=s,i++}l.attributes=n,l.attributesNum=i,l.index=e}(m,y)}else{var x=!0===u.wireframe;l.geometry===m.id&&l.program===h.id&&l.wireframe===x||(l.geometry=m.id,l.program=h.id,l.wireframe=x,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==y&&n.update(y,34963),b&&(function(i,o,a,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==e.get("ANGLE_instanced_arrays")){A();var u=s.attributes,l=a.getAttributes(),c=o.defaultAttributeValues;for(var h in l){var d=l[h];if(d>=0){var m=u[h];if(void 0!==m){var y=m.normalized,b=m.itemSize,w=n.get(m);if(void 0===w)continue;var x=w.buffer,_=w.type,T=w.bytesPerElement;if(m.isInterleavedBufferAttribute){var E=m.data,S=E.stride,M=m.offset;E&&E.isInstancedInterleavedBuffer?(p(d,E.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=E.meshPerAttribute*E.count)):f(d),t.bindBuffer(34962,x),v(d,b,_,y,S*T,M*T)}else m.isInstancedBufferAttribute?(p(d,m.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=m.meshPerAttribute*m.count)):f(d),t.bindBuffer(34962,x),v(d,b,_,y,0,0)}else if("instanceMatrix"===h){var C=n.get(i.instanceMatrix);if(void 0===C)continue;var I=C.buffer,N=C.type;p(d+0,1),p(d+1,1),p(d+2,1),p(d+3,1),t.bindBuffer(34962,I),t.vertexAttribPointer(d+0,4,N,!1,64,0),t.vertexAttribPointer(d+1,4,N,!1,64,16),t.vertexAttribPointer(d+2,4,N,!1,64,32),t.vertexAttribPointer(d+3,4,N,!1,64,48)}else if("instanceColor"===h){var B=n.get(i.instanceColor);if(void 0===B)continue;var k=B.buffer,P=B.type;p(d,1),t.bindBuffer(34962,k),t.vertexAttribPointer(d,3,P,!1,12,0)}else if(void 0!==c){var D=c[h];if(void 0!==D)switch(D.length){case 2:t.vertexAttrib2fv(d,D);break;case 3:t.vertexAttrib3fv(d,D);break;case 4:t.vertexAttrib4fv(d,D);break;default:t.vertexAttrib1fv(d,D)}}}}g()}}(i,u,h,m),null!==y&&t.bindBuffer(34963,n.get(y).buffer))},reset:m,resetDefaultState:y,dispose:function(){for(var t in m(),s){var e=s[t];for(var n in e){var r=e[n];for(var i in r)h(r[i].object),delete r[i];delete e[n]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0!==s[t.id]){var e=s[t.id];for(var n in e){var r=e[n];for(var i in r)h(r[i].object),delete r[i];delete e[n]}delete s[t.id]}},releaseStatesOfProgram:function(t){for(var e in s){var n=s[e];if(void 0!==n[t.id]){var r=n[t.id];for(var i in r)h(r[i].object),delete r[i];delete n[t.id]}}},initAttributes:A,enableAttribute:f,disableUnusedAttributes:g}}function En(t,e,n,r){var i,o=r.isWebGL2;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i,1)},this.renderInstances=function(r,a,s){if(0!==s){var u,l;if(o)u=t,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,a,s),n.update(a,i,s)}}}function Sn(t,e,n){var r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=o||e.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),A=t.getParameter(34076),f=t.getParameter(34921),p=t.getParameter(36347),g=t.getParameter(36348),v=t.getParameter(36349),m=h>0,y=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){var n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:A,maxAttributes:f,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:m,floatFragmentTextures:y,floatVertexTextures:m&&y,maxSamples:o?t.getParameter(36183):0}}function Mn(t){var e=this,n=null,r=0,i=!1,o=!1,a=new An,s=new U,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,n,r,i){var o=null!==t?t.length:0,l=null;if(0!==o){if(l=u.value,!0!==i||null===l){var c=r+4*o,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var d=0,A=r;d!==o;++d,A+=4)a.copy(t[d]).applyMatrix4(h,s),a.normal.toArray(l,A),l[A+3]=a.constant}u.value=l,u.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){var a=0!==t.length||e||0!==r||i;return i=e,n=c(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,l()},this.setState=function(e,a,s){var h=e.clippingPlanes,d=e.clipIntersection,A=e.clipShadows,f=t.get(e);if(!i||null===h||0===h.length||o&&!A)o?c(null):l();else{var p=o?0:r,g=4*p,v=f.clippingState||null;u.value=v,v=c(h,a,g,s);for(var m=0;m!==g;++m)v[m]=n[m];f.clippingState=v,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=p}}}function Cn(t){var e=new WeakMap;function n(t,e){return 303===e?t.mapping=301:304===e&&(t.mapping=302),t}function r(t){var n=t.target;n.removeEventListener("dispose",r);var i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var o=i.mapping;if(303===o||304===o){if(e.has(i))return n(e.get(i).texture,i.mapping);var a=i.image;if(a&&a.height>0){var s=t.getRenderTarget(),u=new ln(a.height/2);return u.fromEquirectangularTexture(t,i),e.set(i,u),t.setRenderTarget(s),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){e=new WeakMap}}}function In(t){var e={};function n(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(t){var e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Nn(t,e,n,r){var i={},o=new WeakMap;function a(t){var s=t.target;for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);s.removeEventListener("dispose",a),delete i[s.id];var l=o.get(s);l&&(e.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){var n=[],r=t.index,i=t.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],d=s[u+2];n.push(c,h,h,d,d,c)}}else{var A=i.array;a=i.version;for(var f=0,p=A.length/3-1;f<p;f+=3){var g=f+0,v=f+1,m=f+2;n.push(g,v,v,m,m,g)}}var y=new(Ee(n)>65535?_e:we)(n,1);y.version=a;var b=o.get(t);b&&e.remove(b),o.set(t,y)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e},update:function(t){var n=t.attributes;for(var r in n)e.update(n[r],34962);var i=t.morphAttributes;for(var o in i)for(var a=i[o],s=0,u=a.length;s<u;s++)e.update(a[s],34962)},getWireframeAttribute:function(t){var e=o.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function Bn(t,e,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(t){i=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,o,e*a),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(s)c=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,o,r*a,l),n.update(u,i,l)}}}function kn(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Pn(t,e){return t[0]-e[0]}function Dn(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ln(t){for(var e={},n=new Float32Array(8),r=[],i=0;i<8;i++)r[i]=[i,0];return{update:function(i,o,a,s){var u=i.morphTargetInfluences,l=void 0===u?0:u.length,c=e[o.id];if(void 0===c||c.length!==l){c=[];for(var h=0;h<l;h++)c[h]=[h,0];e[o.id]=c}for(var d=0;d<l;d++){var A=c[d];A[0]=d,A[1]=u[d]}c.sort(Dn);for(var f=0;f<8;f++)f<l&&c[f][1]?(r[f][0]=c[f][0],r[f][1]=c[f][1]):(r[f][0]=Number.MAX_SAFE_INTEGER,r[f][1]=0);r.sort(Pn);for(var p=a.morphTargets&&o.morphAttributes.position,g=a.morphNormals&&o.morphAttributes.normal,v=0,m=0;m<8;m++){var y=r[m],b=y[0],w=y[1];b!==Number.MAX_SAFE_INTEGER&&w?(p&&o.getAttribute("morphTarget"+m)!==p[b]&&o.setAttribute("morphTarget"+m,p[b]),g&&o.getAttribute("morphNormal"+m)!==g[b]&&o.setAttribute("morphNormal"+m,g[b]),n[m]=w,v+=w):(p&&!0===o.hasAttribute("morphTarget"+m)&&o.deleteAttribute("morphTarget"+m),g&&!0===o.hasAttribute("morphNormal"+m)&&o.deleteAttribute("morphNormal"+m),n[m]=0)}var x=o.morphTargetsRelative?1:1-v;s.getUniforms().setValue(t,"morphTargetBaseInfluence",x),s.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function On(t,e,n,r){var i=new WeakMap;function o(t){var e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){var a=r.render.frame,s=t.geometry,u=e.get(t,s);return i.get(u)!==a&&(e.update(u),i.set(u,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}xn.physical={uniforms:en([xn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new R(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new ge(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new R},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ge(0)}}]),vertexShader:bn.meshphysical_vert,fragmentShader:bn.meshphysical_frag};var Rn=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return b(this,n),(t=e.call(this,null)).image={data:r,width:i,height:o,depth:a},t.magFilter=1003,t.minFilter=1003,t.wrapR=1001,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t.needsUpdate=!0,t}return n}(H);Rn.prototype.isDataTexture2DArray=!0;var Fn=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return b(this,n),(t=e.call(this,null)).image={data:r,width:i,height:o,depth:a},t.magFilter=1003,t.minFilter=1003,t.wrapR=1001,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t.needsUpdate=!0,t}return n}(H);Fn.prototype.isDataTexture3D=!0;var Un=new H,jn=new Rn,zn=new Fn,Hn=new un,Qn=[],Gn=[],Vn=new Float32Array(16),Wn=new Float32Array(9),Yn=new Float32Array(4);function Xn(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=Qn[i];if(void 0===o&&(o=new Float32Array(i),Qn[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function qn(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Kn(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function Zn(t,e){var n=Gn[e];void 0===n&&(n=new Int32Array(e),Gn[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Jn(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function $n(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qn(n,e))return;t.uniform2fv(this.addr,e),Kn(n,e)}}function tr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(qn(n,e))return;t.uniform3fv(this.addr,e),Kn(n,e)}}function er(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qn(n,e))return;t.uniform4fv(this.addr,e),Kn(n,e)}}function nr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(qn(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Kn(n,e)}else{if(qn(n,r))return;Yn.set(r),t.uniformMatrix2fv(this.addr,!1,Yn),Kn(n,r)}}function rr(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(qn(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Kn(n,e)}else{if(qn(n,r))return;Wn.set(r),t.uniformMatrix3fv(this.addr,!1,Wn),Kn(n,r)}}function ir(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(qn(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Kn(n,e)}else{if(qn(n,r))return;Vn.set(r),t.uniformMatrix4fv(this.addr,!1,Vn),Kn(n,r)}}function or(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function ar(t,e){var n=this.cache;qn(n,e)||(t.uniform2iv(this.addr,e),Kn(n,e))}function sr(t,e){var n=this.cache;qn(n,e)||(t.uniform3iv(this.addr,e),Kn(n,e))}function ur(t,e){var n=this.cache;qn(n,e)||(t.uniform4iv(this.addr,e),Kn(n,e))}function lr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function cr(t,e){var n=this.cache;qn(n,e)||(t.uniform2uiv(this.addr,e),Kn(n,e))}function hr(t,e){var n=this.cache;qn(n,e)||(t.uniform3uiv(this.addr,e),Kn(n,e))}function dr(t,e){var n=this.cache;qn(n,e)||(t.uniform4uiv(this.addr,e),Kn(n,e))}function Ar(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Un,i)}function fr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||zn,i)}function pr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Hn,i)}function gr(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||jn,i)}function vr(t,e){t.uniform1fv(this.addr,e)}function mr(t,e){var n=Xn(e,this.size,2);t.uniform2fv(this.addr,n)}function yr(t,e){var n=Xn(e,this.size,3);t.uniform3fv(this.addr,n)}function br(t,e){var n=Xn(e,this.size,4);t.uniform4fv(this.addr,n)}function wr(t,e){var n=Xn(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function xr(t,e){var n=Xn(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function _r(t,e){var n=Xn(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Tr(t,e){t.uniform1iv(this.addr,e)}function Er(t,e){t.uniform2iv(this.addr,e)}function Sr(t,e){t.uniform3iv(this.addr,e)}function Mr(t,e){t.uniform4iv(this.addr,e)}function Cr(t,e){t.uniform1uiv(this.addr,e)}function Ir(t,e){t.uniform2uiv(this.addr,e)}function Nr(t,e){t.uniform3uiv(this.addr,e)}function Br(t,e){t.uniform4uiv(this.addr,e)}function kr(t,e,n){var r=e.length,i=Zn(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(e[o]||Un,i[o])}function Pr(t,e,n){var r=e.length,i=Zn(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(e[o]||Hn,i[o])}function Dr(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Jn;case 35664:return $n;case 35665:return tr;case 35666:return er;case 35674:return nr;case 35675:return rr;case 35676:return ir;case 5124:case 35670:return or;case 35667:case 35671:return ar;case 35668:case 35672:return sr;case 35669:case 35673:return ur;case 5125:return lr;case 36294:return cr;case 36295:return hr;case 36296:return dr;case 35678:case 36198:case 36298:case 36306:case 35682:return Ar;case 35679:case 36299:case 36307:return fr;case 35680:case 36300:case 36308:case 36293:return pr;case 36289:case 36303:case 36311:case 36292:return gr}}(e.type)}function Lr(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return vr;case 35664:return mr;case 35665:return yr;case 35666:return br;case 35674:return wr;case 35675:return xr;case 35676:return _r;case 5124:case 35670:return Tr;case 35667:case 35671:return Er;case 35668:case 35672:return Sr;case 35669:case 35673:return Mr;case 5125:return Cr;case 36294:return Ir;case 36295:return Nr;case 36296:return Br;case 35678:case 36198:case 36298:case 36306:case 35682:return kr;case 35680:case 36300:case 36308:case 36293:return Pr}}(e.type)}function Or(t){this.id=t,this.seq=[],this.map={}}Lr.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Kn(e,t)},Or.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var Rr=/(\w+)(\])?(\[|\.)?/g;function Fr(t,e){t.seq.push(e),t.map[e.id]=e}function Ur(t,e,n){var r=t.name,i=r.length;for(Rr.lastIndex=0;;){var o=Rr.exec(r),a=Rr.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){Fr(n,void 0===l?new Dr(s,t,e):new Lr(s,t,e));break}var c=n.map[s];void 0===c&&Fr(n,c=new Or(s)),n=c}}function jr(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r);Ur(i,t.getUniformLocation(e,i.name),this)}}function zr(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}jr.prototype.setValue=function(t,e,n,r){var i=this.map[e];void 0!==i&&i.setValue(t,n,r)},jr.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},jr.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},jr.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var Hr=0;function Qr(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Gr(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function Vr(t,e){var n=Qr(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Wr(t,e){var n=Qr(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Yr(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Xr(t){return""!==t}function qr(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Kr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Zr=/^[ \t]*#include +<([\w\d./]+)>/gm;function Jr(t){return t.replace(Zr,$r)}function $r(t,e){var n=bn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Jr(n)}var ti=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ei=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ni(t){return t.replace(ei,ii).replace(ti,ri)}function ri(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ii(t,e,n,r)}function ii(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function oi(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ai(t,e,n,r){var i,o,a=t.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(t){var e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),h=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),d=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(n),A=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),f=t.gammaFactor>0?t.gammaFactor:1,p=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission>0)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xr).join("\n")}(n),g=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(s),v=a.createProgram(),m=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[g].filter(Xr).join("\n")).length>0&&(i+="\n"),(o=[p,g].filter(Xr).join("\n")).length>0&&(o+="\n")):(i=[oi(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Xr).join("\n"),o=[p,oi(n),"#define SHADER_NAME "+n.shaderName,g,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+A:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?bn.tonemapping_pars_fragment:"",0!==n.toneMapping?Yr("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",bn.encodings_pars_fragment,n.map?Vr("mapTexelToLinear",n.mapEncoding):"",n.matcap?Vr("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Vr("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Vr("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Vr("lightMapTexelToLinear",n.lightMapEncoding):"",Wr("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Xr).join("\n")),u=Kr(u=qr(u=Jr(u),n),n),l=Kr(l=qr(l=Jr(l),n),n),u=ni(u),l=ni(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(m="#version 300 es\n",i=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,o=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);var y,b,w=m+o+l,x=zr(a,35633,m+i+u),_=zr(a,35632,w);if(a.attachShader(v,x),a.attachShader(v,_),void 0!==n.index0AttributeName?a.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v),t.debug.checkShaderErrors){var T=a.getProgramInfoLog(v).trim(),E=a.getShaderInfoLog(x).trim(),S=a.getShaderInfoLog(_).trim(),M=!0,C=!0;if(!1===a.getProgramParameter(v,35714)){M=!1;var I=Gr(a,x,"vertex"),N=Gr(a,_,"fragment");console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(v,35715),"gl.getProgramInfoLog",T,I,N)}else""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==E&&""!==S||(C=!1);C&&(this.diagnostics={runnable:M,programLog:T,vertexShader:{log:E,prefix:i},fragmentShader:{log:S,prefix:o}})}return a.deleteShader(x),a.deleteShader(_),this.getUniforms=function(){return void 0===y&&(y=new jr(a,v)),y},this.getAttributes=function(){return void 0===b&&(b=function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var o=t.getActiveAttrib(e,i).name;n[o]=t.getAttribLocation(e,o)}return n}(a,v)),b},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Hr++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=x,this.fragmentShader=_,this}function si(t,e,n,r,i,o){var a=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,l=r.floatVertexTextures,c=r.maxVertexUniforms,h=r.vertexTextures,d=r.precision,A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function p(t){var e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=3e3,e}return{getParameters:function(i,a,f,g,v){var m,y,b=g.fog,w=i.isMeshStandardMaterial?g.environment:null,x=e.get(i.envMap||w),_=A[i.type],T=v.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(l)return 1024;var n=c,r=Math.floor((n-20)/4),i=Math.min(r,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}(v):0;if(null!==i.precision&&((d=r.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),_){var E=xn[_];m=E.vertexShader,y=E.fragmentShader}else m=i.vertexShader,y=i.fragmentShader;var S=t.getRenderTarget();return{isWebGL2:s,shaderID:_,shaderName:i.type,vertexShader:m,fragmentShader:y,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:h,outputEncoding:null!==S?p(S.texture):t.outputEncoding,map:!!i.map,mapEncoding:p(i.map),matcap:!!i.matcap,matcapEncoding:p(i.matcap),envMap:!!x,envMapMode:x&&x.mapping,envMapEncoding:p(x),envMapCubeUV:!!x&&(306===x.mapping||307===x.mapping),lightMap:!!i.lightMap,lightMapEncoding:p(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:p(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmission:!!i.transmission,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&v.geometry&&v.geometry.attributes.color&&4===v.geometry.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap||i.thicknessMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission||i.transmissionMap||i.thicknessMap||!i.displacementMap),fog:!!b,useFog:i.fog,fogExp2:b&&b.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===v.isSkinnedMesh&&T>0,maxBones:T,useVertexTexture:l,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&f.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);if(!1===e.isRawShaderMaterial){for(var i=0;i<f.length;i++)n.push(e[f[i]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){var e,n=A[t.type];if(n){var r=xn[n];e=nn.clone(r.uniforms)}else e=t.uniforms;return e},acquireProgram:function(e,n){for(var r,o=0,s=a.length;o<s;o++){var u=a[o];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new ai(t,n,e,i),a.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){var e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},programs:a}}function ui(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function li(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ci(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function hi(t){var e=[],n=0,r=[],i=[],o=[],a={id:-1};function s(r,i,o,s,u,l){var c=e[n],h=t.get(o);return void 0===c?(c={id:r.id,object:r,geometry:i,material:o,program:h.program||a,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},e[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=o,c.program=h.program||a,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:i,transparent:o,init:function(){n=0,r.length=0,i.length=0,o.length=0},push:function(t,e,n,a,u,l){var c=s(t,e,n,a,u,l);n.transmission>0?i.push(c):!0===n.transparent?o.push(c):r.push(c)},unshift:function(t,e,n,a,u,l){var c=s(t,e,n,a,u,l);n.transmission>0?i.unshift(c):!0===n.transparent?o.unshift(c):r.unshift(c)},finish:function(){for(var t=n,r=e.length;t<r;t++){var i=e[t];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){r.length>1&&r.sort(t||li),i.length>1&&i.sort(e||ci),o.length>1&&o.sort(e||ci)}}}function di(t){var e=new WeakMap;return{get:function(n,r){var i;return!1===e.has(n)?(i=new hi(t),e.set(n,[i])):r>=e.get(n).length?(i=new hi(t),e.get(n).push(i)):i=e.get(n)[r],i},dispose:function(){e=new WeakMap}}}function Ai(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new X,color:new ge};break;case"SpotLight":n={position:new X,direction:new X,color:new ge,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new X,color:new ge,distance:0,decay:0};break;case"HemisphereLight":n={direction:new X,skyColor:new ge,groundColor:new ge};break;case"RectAreaLight":n={color:new ge,position:new X,halfWidth:new X,halfHeight:new X}}return t[e.id]=n,n}}}var fi=0;function pi(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function gi(t,e){for(var n,r=new Ai,i=(n={},{get:function(t){if(void 0!==n[t.id])return n[t.id];var e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new R};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new R,shadowCameraNear:1,shadowCameraFar:1e3}}return n[t.id]=e,e}}),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;a<9;a++)o.probe.push(new X);var s=new X,u=new Et,l=new Et;return{setup:function(n){for(var a=0,s=0,u=0,l=0;l<9;l++)o.probe[l].set(0,0,0);var c=0,h=0,d=0,A=0,f=0,p=0,g=0,v=0;n.sort(pi);for(var m=0,y=n.length;m<y;m++){var b=n[m],w=b.color,x=b.intensity,_=b.distance,T=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)a+=w.r*x,s+=w.g*x,u+=w.b*x;else if(b.isLightProbe)for(var E=0;E<9;E++)o.probe[E].addScaledVector(b.sh.coefficients[E],x);else if(b.isDirectionalLight){var S=r.get(b);if(S.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){var M=b.shadow,C=i.get(b);C.shadowBias=M.bias,C.shadowNormalBias=M.normalBias,C.shadowRadius=M.radius,C.shadowMapSize=M.mapSize,o.directionalShadow[c]=C,o.directionalShadowMap[c]=T,o.directionalShadowMatrix[c]=b.shadow.matrix,p++}o.directional[c]=S,c++}else if(b.isSpotLight){var I=r.get(b);if(I.position.setFromMatrixPosition(b.matrixWorld),I.color.copy(w).multiplyScalar(x),I.distance=_,I.coneCos=Math.cos(b.angle),I.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),I.decay=b.decay,b.castShadow){var N=b.shadow,B=i.get(b);B.shadowBias=N.bias,B.shadowNormalBias=N.normalBias,B.shadowRadius=N.radius,B.shadowMapSize=N.mapSize,o.spotShadow[d]=B,o.spotShadowMap[d]=T,o.spotShadowMatrix[d]=b.shadow.matrix,v++}o.spot[d]=I,d++}else if(b.isRectAreaLight){var k=r.get(b);k.color.copy(w).multiplyScalar(x),k.halfWidth.set(.5*b.width,0,0),k.halfHeight.set(0,.5*b.height,0),o.rectArea[A]=k,A++}else if(b.isPointLight){var P=r.get(b);if(P.color.copy(b.color).multiplyScalar(b.intensity),P.distance=b.distance,P.decay=b.decay,b.castShadow){var D=b.shadow,L=i.get(b);L.shadowBias=D.bias,L.shadowNormalBias=D.normalBias,L.shadowRadius=D.radius,L.shadowMapSize=D.mapSize,L.shadowCameraNear=D.camera.near,L.shadowCameraFar=D.camera.far,o.pointShadow[h]=L,o.pointShadowMap[h]=T,o.pointShadowMatrix[h]=b.shadow.matrix,g++}o.point[h]=P,h++}else if(b.isHemisphereLight){var O=r.get(b);O.skyColor.copy(b.color).multiplyScalar(x),O.groundColor.copy(b.groundColor).multiplyScalar(x),o.hemi[f]=O,f++}}A>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(o.rectAreaLTC1=wn.LTC_FLOAT_1,o.rectAreaLTC2=wn.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=wn.LTC_HALF_1,o.rectAreaLTC2=wn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=a,o.ambient[1]=s,o.ambient[2]=u;var R=o.hash;R.directionalLength===c&&R.pointLength===h&&R.spotLength===d&&R.rectAreaLength===A&&R.hemiLength===f&&R.numDirectionalShadows===p&&R.numPointShadows===g&&R.numSpotShadows===v||(o.directional.length=c,o.spot.length=d,o.rectArea.length=A,o.point.length=h,o.hemi.length=f,o.directionalShadow.length=p,o.directionalShadowMap.length=p,o.pointShadow.length=g,o.pointShadowMap.length=g,o.spotShadow.length=v,o.spotShadowMap.length=v,o.directionalShadowMatrix.length=p,o.pointShadowMatrix.length=g,o.spotShadowMatrix.length=v,R.directionalLength=c,R.pointLength=h,R.spotLength=d,R.rectAreaLength=A,R.hemiLength=f,R.numDirectionalShadows=p,R.numPointShadows=g,R.numSpotShadows=v,o.version=fi++)},setupView:function(t,e){for(var n=0,r=0,i=0,a=0,c=0,h=e.matrixWorldInverse,d=0,A=t.length;d<A;d++){var f=t[d];if(f.isDirectionalLight){var p=o.directional[n];p.direction.setFromMatrixPosition(f.matrixWorld),s.setFromMatrixPosition(f.target.matrixWorld),p.direction.sub(s),p.direction.transformDirection(h),n++}else if(f.isSpotLight){var g=o.spot[i];g.position.setFromMatrixPosition(f.matrixWorld),g.position.applyMatrix4(h),g.direction.setFromMatrixPosition(f.matrixWorld),s.setFromMatrixPosition(f.target.matrixWorld),g.direction.sub(s),g.direction.transformDirection(h),i++}else if(f.isRectAreaLight){var v=o.rectArea[a];v.position.setFromMatrixPosition(f.matrixWorld),v.position.applyMatrix4(h),l.identity(),u.copy(f.matrixWorld),u.premultiply(h),l.extractRotation(u),v.halfWidth.set(.5*f.width,0,0),v.halfHeight.set(0,.5*f.height,0),v.halfWidth.applyMatrix4(l),v.halfHeight.applyMatrix4(l),a++}else if(f.isPointLight){var m=o.point[r];m.position.setFromMatrixPosition(f.matrixWorld),m.position.applyMatrix4(h),r++}else if(f.isHemisphereLight){var y=o.hemi[c];y.direction.setFromMatrixPosition(f.matrixWorld),y.direction.transformDirection(h),y.direction.normalize(),c++}}},state:o}}function vi(t,e){var n=new gi(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function mi(t,e){var n=new WeakMap;return{get:function(r){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new vi(t,e),n.set(r,[i])):o>=n.get(r).length?(i=new vi(t,e),n.get(r).push(i)):i=n.get(r)[o],i},dispose:function(){n=new WeakMap}}}var yi=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.depthPacking=t.depthPacking,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}]),n}(le);yi.prototype.isMeshDepthMaterial=!0;var bi=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="MeshDistanceMaterial",r.referencePosition=new X,r.nearDistance=1,r.farDistance=1e3,r.morphTargets=!1,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}]),n}(le);function wi(t,e,n){var r=new gn,i=new R,o=new R,a=new G,s=[],u=[],l={},c=n.maxTextureSize,h={0:1,1:0,2:2},d=new rn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new R},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),A=d.clone();A.defines.HORIZONTAL_PASS=1;var f=new Pe;f.setAttribute("position",new be(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var p=new Ze(f,d),g=this;function v(n,r){var i=e.update(p);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,d,p,null),A.uniforms.shadow_pass.value=n.mapPass.texture,A.uniforms.resolution.value=n.mapSize,A.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,A,p,null)}function m(t){var e=t<<0,n=s[e];return void 0===n&&(n=new yi({depthPacking:3201,morphTargets:t}),s[e]=n),n}function y(t){var e=t<<0,n=u[e];return void 0===n&&(n=new bi({morphTargets:t}),u[e]=n),n}function b(e,n,r,i,o,a,s){var u=null,c=m,d=e.customDepthMaterial;if(!0===i.isPointLight&&(c=y,d=e.customDistanceMaterial),void 0===d){var A=!1;!0===r.morphTargets&&(A=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0),u=c(A)}else u=d;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var f=u.uuid,p=r.uuid,g=l[f];void 0===g&&(g={},l[f]=g);var v=g[p];void 0===v&&(v=u.clone(),g[p]=v),u=v}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=3===s?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=a),u}function w(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=e.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,d=c.length;h<d;h++){var A=c[h],f=l[A.materialIndex];if(f&&f.visible){var p=b(n,u,f,a,o.near,o.far,s);t.renderBufferDirect(o,null,u,p,n,A)}}else if(l.visible){var g=b(n,u,l,a,o.near,o.far,s);t.renderBufferDirect(o,null,u,g,n,null)}}for(var v=n.children,m=0,y=v.length;m<y;m++)w(v[m],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,s){if(!1!==g.enabled&&(!1!==g.autoUpdate||!1!==g.needsUpdate)&&0!==e.length){var u=t.getRenderTarget(),l=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var A=0,f=e.length;A<f;A++){var p=e[A],m=p.shadow;if(void 0!==m){if(!1!==m.autoUpdate||!1!==m.needsUpdate){i.copy(m.mapSize);var y=m.getFrameExtents();if(i.multiply(y),o.copy(m.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/y.x),i.x=o.x*y.x,m.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/y.y),i.y=o.y*y.y,m.mapSize.y=o.y)),null===m.map&&!m.isPointLightShadow&&3===this.type){var b={minFilter:1006,magFilter:1006,format:1023};m.map=new V(i.x,i.y,b),m.map.texture.name=p.name+".shadowMap",m.mapPass=new V(i.x,i.y,b),m.camera.updateProjectionMatrix()}if(null===m.map){m.map=new V(i.x,i.y,{minFilter:1003,magFilter:1003,format:1023}),m.map.texture.name=p.name+".shadowMap",m.camera.updateProjectionMatrix()}t.setRenderTarget(m.map),t.clear();for(var x=m.getViewportCount(),_=0;_<x;_++){var T=m.getViewport(_);a.set(o.x*T.x,o.y*T.y,o.x*T.z,o.y*T.w),d.viewport(a),m.updateMatrices(p,_),r=m.getFrustum(),w(n,s,m.camera,p,this.type)}m.isPointLightShadow||3!==this.type||v(m,s),m.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",p,"has no shadow.")}g.needsUpdate=!1,t.setRenderTarget(u,l,h)}}}function xi(t,e,n){var r=n.isWebGL2,i=new function(){var e=!1,n=new G,r=null,i=new G(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?R(2929):F(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},a=new function(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){e||(t?R(2960):F(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},s={},u=null,l={},c=null,h=!1,d=null,A=null,f=null,p=null,g=null,v=null,m=null,y=!1,b=null,w=null,x=null,_=null,T=null,E=t.getParameter(35661),S=!1,M=0,C=t.getParameter(7938);-1!==C.indexOf("WebGL")?(M=parseFloat(/^WebGL (\d)/.exec(C)[1]),S=M>=1):-1!==C.indexOf("OpenGL ES")&&(M=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),S=M>=2);var I=null,N={},B=t.getParameter(3088),k=t.getParameter(2978),P=(new G).fromArray(B),D=(new G).fromArray(k);function L(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var O={};function R(e){!0!==s[e]&&(t.enable(e),s[e]=!0)}function F(e){!1!==s[e]&&(t.disable(e),s[e]=!1)}O[3553]=L(3553,3553,1),O[34067]=L(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),R(2929),o.setFunc(3),Q(!1),V(1),R(2884),H(0);var U={100:32774,101:32778,102:32779};if(r)U[103]=32775,U[104]=32776;else{var j=e.get("EXT_blend_minmax");null!==j&&(U[103]=j.MIN_EXT,U[104]=j.MAX_EXT)}var z={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function H(e,n,r,i,o,a,s,u){if(0!==e){if(!1===h&&(R(3042),h=!0),5===e)o=o||n,a=a||r,s=s||i,n===A&&o===g||(t.blendEquationSeparate(U[n],U[o]),A=n,g=o),r===f&&i===p&&a===v&&s===m||(t.blendFuncSeparate(z[r],z[i],z[a],z[s]),f=r,p=i,v=a,m=s),d=e,y=null;else if(e!==d||u!==y){if(100===A&&100===g||(t.blendEquation(32774),A=100,g=100),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}f=null,p=null,v=null,m=null,d=e,y=u}}else!0===h&&(F(3042),h=!1)}function Q(e){b!==e&&(e?t.frontFace(2304):t.frontFace(2305),b=e)}function V(e){0!==e?(R(2884),e!==w&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):F(2884),w=e}function W(e,n,r){e?(R(32823),_===n&&T===r||(t.polygonOffset(n,r),_=n,T=r)):F(32823)}function Y(e){void 0===e&&(e=33984+E-1),I!==e&&(t.activeTexture(e),I=e)}return{buffers:{color:i,depth:o,stencil:a},enable:R,disable:F,bindFramebuffer:function(e,n){return null===n&&null!==u&&(n=u),l[e]!==n&&(t.bindFramebuffer(e,n),l[e]=n,r&&(36009===e&&(l[36160]=n),36160===e&&(l[36009]=n)),!0)},bindXRFramebuffer:function(e){e!==u&&(t.bindFramebuffer(36160,e),u=e)},useProgram:function(e){return c!==e&&(t.useProgram(e),c=e,!0)},setBlending:H,setMaterial:function(t,e){2===t.side?F(2884):R(2884);var n=1===t.side;e&&(n=!n),Q(n),1===t.blending&&!1===t.transparent?H(0):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);var r=t.stencilWrite;a.setTest(r),r&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),W(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?R(32926):F(32926)},setFlipSided:Q,setCullFace:V,setLineWidth:function(e){e!==x&&(S&&t.lineWidth(e),x=e)},setPolygonOffset:W,setScissorTest:function(t){t?R(3089):F(3089)},activeTexture:Y,bindTexture:function(e,n){null===I&&Y();var r=N[I];void 0===r&&(r={type:void 0,texture:void 0},N[I]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||O[e]),r.type=e,r.texture=n)},unbindTexture:function(){var e=N[I];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===P.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),P.copy(e))},viewport:function(e){!1===D.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),D.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),s={},I=null,N={},u=null,l={},c=null,h=!1,d=null,A=null,f=null,p=null,g=null,v=null,m=null,y=!1,b=null,w=null,x=null,_=null,T=null,P.set(0,0,t.canvas.width,t.canvas.height),D.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),a.reset()}}}function _i(t,e,n,r,i,o,a){var s,u=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,A=new WeakMap,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function p(t,e){return f?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?O:Math.floor,a=o(i*t.width),u=o(i*t.height);void 0===s&&(s=p(a,u));var l=n?p(a,u):s;return l.width=a,l.height=u,l.getContext("2d").drawImage(t,0,0,a,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+u+")."),l}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function v(t){return D(t.width)&&D(t.height)}function m(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function y(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log2(Math.max(i,o,a))}function b(n,r,i){if(!1===u)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function w(t){return 1003===t||1004===t||1005===t?9728:9729}function x(e){var n,i,o=e.target;o.removeEventListener("dispose",x),n=o,void 0!==(i=r.get(n)).__webglInit&&(t.deleteTexture(i.__webglTexture),r.remove(n)),o.isVideoTexture&&A.delete(o),a.memory.textures--}function _(e){var n=e.target;n.removeEventListener("dispose",_),function(e){var n=e.texture,i=r.get(e),o=r.get(n);if(e){if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)t.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[s]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=r.get(n[u]);c.__webglTexture&&(t.deleteTexture(c.__webglTexture),a.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(e)}}(n)}var T=0;function E(t,e){var i=r.get(t);if(t.isVideoTexture&&function(t){var e=a.render.frame;A.get(t)!==e&&(A.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void B(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function S(e,i){var a=r.get(e);e.version>0&&a.__version!==e.version?function(e,r,i){if(6===r.image.length){N(e,r),n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);for(var a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,l=[],h=0;h<6;h++)l[h]=a||s?s?r.image[h].image:r.image[h]:g(r.image[h],!1,!0,c);var d,A=l[0],f=v(A)||u,p=o.convert(r.format),w=o.convert(r.type),x=b(r.internalFormat,p,w);if(I(34067,r,f),a){for(var _=0;_<6;_++){d=l[_].mipmaps;for(var T=0;T<d.length;T++){var E=d[T];1023!==r.format&&1022!==r.format?null!==p?n.compressedTexImage2D(34069+_,T,x,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+_,T,x,E.width,E.height,0,p,w,E.data)}}e.__maxMipLevel=d.length-1}else{d=r.mipmaps;for(var S=0;S<6;S++)if(s){n.texImage2D(34069+S,0,x,l[S].width,l[S].height,0,p,w,l[S].data);for(var M=0;M<d.length;M++){var C=d[M].image[S].image;n.texImage2D(34069+S,M+1,x,C.width,C.height,0,p,w,C.data)}}else{n.texImage2D(34069+S,0,x,p,w,l[S]);for(var B=0;B<d.length;B++){var k=d[B];n.texImage2D(34069+S,B+1,x,p,w,k.image[S])}}e.__maxMipLevel=d.length}m(r,f)&&y(34067,r,A.width,A.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}}(a,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}var M={1e3:10497,1001:33071,1002:33648},C={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function I(n,o,a){if(a?(t.texParameteri(n,10242,M[o.wrapS]),t.texParameteri(n,10243,M[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,M[o.wrapR]),t.texParameteri(n,10240,C[o.magFilter]),t.texParameteri(n,10241,C[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,w(o.magFilter)),t.texParameteri(n,10241,w(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){var s=e.get("EXT_texture_filter_anisotropic");if(1015===o.type&&!1===e.has("OES_texture_float_linear")||!1===u&&1016===o.type&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function N(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",x),e.__webglTexture=t.createTexture(),a.memory.textures++)}function B(e,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),N(e,r),n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);var s,l=function(t){return!u&&(1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)}(r)&&!1===v(r.image),c=g(r.image,l,!1,h),d=v(c)||u,A=o.convert(r.format),f=o.convert(r.type),p=b(r.internalFormat,A,f);I(a,r,d);var w=r.mipmaps;if(r.isDepthTexture)p=6402,u?p=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===p&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,f=o.convert(r.type)),1027===r.format&&6402===p&&(p=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,f=o.convert(r.type))),n.texImage2D(3553,0,p,c.width,c.height,0,A,f,null);else if(r.isDataTexture)if(w.length>0&&d){for(var x=0,_=w.length;x<_;x++)s=w[x],n.texImage2D(3553,x,p,s.width,s.height,0,A,f,s.data);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,p,c.width,c.height,0,A,f,c.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(var T=0,E=w.length;T<E;T++)s=w[T],1023!==r.format&&1022!==r.format?null!==A?n.compressedTexImage2D(3553,T,p,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,T,p,s.width,s.height,0,A,f,s.data);e.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,p,c.width,c.height,c.depth,0,A,f,c.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,p,c.width,c.height,c.depth,0,A,f,c.data),e.__maxMipLevel=0;else if(w.length>0&&d){for(var S=0,M=w.length;S<M;S++)s=w[S],n.texImage2D(3553,S,p,A,f,s);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,p,A,f,c),e.__maxMipLevel=0;m(r,d)&&y(a,r,c.width,c.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function k(e,i,a,s,u){var l=o.convert(a.format),c=o.convert(a.type),h=b(a.internalFormat,l,c);32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null),n.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,s,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function P(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var a=n.depthTexture;a&&a.isDepthTexture&&(1015===a.type?i=36012:1014===a.type&&(i=33190));var s=L(n);t.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=L(n);t.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var l=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=o.convert(l.format),h=o.convert(l.type),d=b(l.internalFormat,c,h);if(r){var A=L(n);t.renderbufferStorageMultisample(36161,A,d,n.width,n.height)}else t.renderbufferStorage(36161,d,n.width,n.height)}t.bindRenderbuffer(36161,null)}function L(t){return u&&t.isWebGLMultisampleRenderTarget?Math.min(d,t.samples):0}var R=!1,F=!1;this.allocateTextureUnit=function(){var t=T;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),T+=1,t},this.resetTextureUnits=function(){T=0},this.setTexture2D=E,this.setTexture2DArray=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?B(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?B(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=S,this.setupRenderTarget=function(e){var s=e.texture,l=r.get(e),c=r.get(s);e.addEventListener("dispose",_),!0!==e.isWebGLMultipleRenderTargets&&(c.__webglTexture=t.createTexture(),c.__version=s.version,a.memory.textures++);var h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,A=!0===e.isWebGLMultisampleRenderTarget,f=s.isDataTexture3D||s.isDataTexture2DArray,p=v(e)||u;if(!u||1022!==s.format||1015!==s.type&&1016!==s.type||(s.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){l.__webglFramebuffer=[];for(var g=0;g<6;g++)l.__webglFramebuffer[g]=t.createFramebuffer()}else if(l.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers)for(var w=e.texture,x=0,T=w.length;x<T;x++){var S=r.get(w[x]);void 0===S.__webglTexture&&(S.__webglTexture=t.createTexture(),a.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(A)if(u){l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,l.__webglColorRenderbuffer);var M=o.convert(s.format),C=o.convert(s.type),N=b(s.internalFormat,M,C),B=L(e);t.renderbufferStorageMultisample(36161,B,N,e.width,e.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),P(l.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,c.__webglTexture),I(34067,s,p);for(var D=0;D<6;D++)k(l.__webglFramebuffer[D],e,s,36064,34069+D);m(s,p)&&y(34067,s,e.width,e.height),n.bindTexture(34067,null)}else if(d){for(var O=e.texture,R=0,F=O.length;R<F;R++){var U=O[R],j=r.get(U);n.bindTexture(3553,j.__webglTexture),I(3553,U,p),k(l.__webglFramebuffer,e,U,36064+R,3553),m(U,p)&&y(3553,U,e.width,e.height)}n.bindTexture(3553,null)}else{var z=3553;f&&(u?z=s.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(z,c.__webglTexture),I(z,s,p),k(l.__webglFramebuffer,e,s,36064,z),m(s,p)&&y(z,s,e.width,e.height,e.depth),n.bindTexture(z,null)}e.depthBuffer&&function(e){var i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),E(i.depthTexture,0);var o=r.get(i.depthTexture).__webglTexture;if(1026===i.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,o,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(var a=0;a<6;a++)n.bindFramebuffer(36160,i.__webglFramebuffer[a]),i.__webglDepthbuffer[a]=t.createRenderbuffer(),P(i.__webglDepthbuffer[a],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),P(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}(e)},this.updateRenderTargetMipmap=function(t){for(var e=v(t)||u,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=0,a=i.length;o<a;o++){var s=i[o];if(m(s,e)){var l=t.isWebGLCubeRenderTarget?34067:3553,c=r.get(s).__webglTexture;n.bindTexture(l,c),y(l,s,t.width,t.height),n.bindTexture(l,null)}}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(u){var i=e.width,o=e.height,a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024);var s=r.get(e);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===R&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),R=!0),t=t.texture),E(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),S(t,e)}}function Ti(t,e,n){var r=n.isWebGL2;return{convert:function(t){var n;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t)return r?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:36492===t?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:1020===t?r?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}bi.prototype.isMeshDistanceMaterial=!0;var Ei=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return b(this,n),(t=e.call(this)).cameras=r,t}return n}(an);Ei.prototype.isArrayCamera=!0;var Si=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this)).type="Group",t}return n}(Kt);Si.prototype.isGroup=!0;var Mi={type:"move"},Ci=function(){function t(){b(this,t),this._targetRay=null,this._grip=null,this._hand=null}return x(t,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Si,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Si,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Si,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}},{key:"dispatchEvent",value:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}},{key:"disconnect",value:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(t,e,n){var r=null,i=null,o=null,a=this._targetRay,s=this._grip,u=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(null!==(r=e.getPose(t.targetRaySpace,n))&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Mi))),u&&t.hand){o=!0;var l,c=E(t.hand.values());try{for(c.s();!(l=c.n()).done;){var h=l.value,d=e.getJointPose(h,n);if(void 0===u.joints[h.jointName]){var A=new Si;A.matrixAutoUpdate=!1,A.visible=!1,u.joints[h.jointName]=A,u.add(A)}var f=u.joints[h.jointName];null!==d&&(f.matrix.fromArray(d.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.jointRadius=d.radius),f.visible=null!==d}}catch(t){c.e(t)}finally{c.f()}var p=u.joints["index-finger-tip"],g=u.joints["thumb-tip"],v=p.position.distanceTo(g.position);u.inputState.pinching&&v>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&v<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(null!==(i=e.getPose(t.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}]),t}(),Ii=function(t){A(n,t);var e=p(n);function n(t,r){var i;b(this,n);var o=v(i=e.call(this)),a=t.state,s=null,l=1,c=null,h="local-floor",d=null,A=null,f=null,p=null,g=[],m=new Map,y=new an;y.layers.enable(1),y.viewport=new G;var w=new an;w.layers.enable(2),w.viewport=new G;var x=[y,w],_=new Ei;_.layers.enable(1),_.layers.enable(2);var T=null,E=null;function S(t){var e=m.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function M(){m.forEach((function(t,e){t.disconnect(e)})),m.clear(),T=null,E=null,a.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),P.stop(),o.isPresenting=!1,o.dispatchEvent({type:"sessionend"})}function C(t){for(var e=s.inputSources,n=0;n<g.length;n++)m.set(e[n],g[n]);for(var r=0;r<t.removed.length;r++){var i=t.removed[r],o=m.get(i);o&&(o.dispatchEvent({type:"disconnected",data:i}),m.delete(i))}for(var a=0;a<t.added.length;a++){var u=t.added[a],l=m.get(u);l&&l.dispatchEvent({type:"connected",data:u})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(t){var e=g[t];return void 0===e&&(e=new Ci,g[t]=e),e.getTargetRaySpace()},i.getControllerGrip=function(t){var e=g[t];return void 0===e&&(e=new Ci,g[t]=e),e.getGripSpace()},i.getHand=function(t){var e=g[t];return void 0===e&&(e=new Ci,g[t]=e),e.getHandSpace()},i.setFramebufferScaleFactor=function(t){l=t,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(t){h=t,!0===o.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return c},i.getSession=function(){return s},i.setSession=function(){var t=u(regeneratorRuntime.mark((function t(e){var n,i,a,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(s=e)){t.next=23;break}if(s.addEventListener("select",S),s.addEventListener("selectstart",S),s.addEventListener("selectend",S),s.addEventListener("squeeze",S),s.addEventListener("squeezestart",S),s.addEventListener("squeezeend",S),s.addEventListener("end",M),s.addEventListener("inputsourceschange",C),n=r.getContextAttributes(),t.t0=!0!==n.xrCompatible,!t.t0){t.next=7;break}return t.next=7,r.makeXRCompatible();case 7:if(void 0!==s.renderState.layers){t.next=12;break}i={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:l},a=new XRWebGLLayer(s,r,i),s.updateRenderState({baseLayer:a}),t.next=16;break;case 12:u=0,n.depth&&(u=n.stencil?34041:6402),d={colorFormat:n.alpha?6408:6407,depthFormat:u,scaleFactor:l},A=new XRWebGLBinding(s,r),p=A.createProjectionLayer(d),f=r.createFramebuffer(),s.updateRenderState({layers:[p]});case 16:return t.next=18,s.requestReferenceSpace(h);case 18:c=t.sent,P.setContext(s),P.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"});case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var I=new X,N=new X;function B(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}i.updateCamera=function(t){if(null!==s){_.near=w.near=y.near=t.near,_.far=w.far=y.far=t.far,T===_.near&&E===_.far||(s.updateRenderState({depthNear:_.near,depthFar:_.far}),T=_.near,E=_.far);var e=t.parent,n=_.cameras;B(_,e);for(var r=0;r<n.length;r++)B(n[r],e);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),t.position.copy(_.position),t.quaternion.copy(_.quaternion),t.scale.copy(_.scale),t.matrix.copy(_.matrix),t.matrixWorld.copy(_.matrixWorld);for(var i=t.children,o=0,a=i.length;o<a;o++)i[o].updateMatrixWorld(!0);2===n.length?function(t,e,n){I.setFromMatrixPosition(e.matrixWorld),N.setFromMatrixPosition(n.matrixWorld);var r=I.distanceTo(N),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*c,A=a*h,f=r/(-c+h),p=f*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(p),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();var g=a+f,v=s+f,m=d-p,y=A+(r-p),b=u*s/v*g,w=l*s/v*g;t.projectionMatrix.makePerspective(m,y,b,w,g,v)}(_,y,w):_.projectionMatrix.copy(y.projectionMatrix)}},i.getCamera=function(){return _};var k=null,P=new vn;return P.setAnimationLoop((function(t,e){if(null!==(d=e.getViewerPose(c))){var n=d.views,i=s.renderState.baseLayer;void 0===s.renderState.layers&&a.bindXRFramebuffer(i.framebuffer);var o=!1;n.length!==_.cameras.length&&(_.cameras.length=0,o=!0);for(var u=0;u<n.length;u++){var l=n[u],h=null;if(void 0===s.renderState.layers)h=i.getViewport(l);else{var v=A.getViewSubImage(p,l);a.bindXRFramebuffer(f),r.framebufferTexture2D(36160,36064,3553,v.colorTexture,0),void 0!==v.depthStencilTexture&&r.framebufferTexture2D(36160,36096,3553,v.depthStencilTexture,0),h=v.viewport}var m=x[u];m.matrix.fromArray(l.transform.matrix),m.projectionMatrix.fromArray(l.projectionMatrix),m.viewport.set(h.x,h.y,h.width,h.height),0===u&&_.matrix.copy(m.matrix),!0===o&&_.cameras.push(m)}}for(var y=s.inputSources,b=0;b<g.length;b++){var w=g[b],T=y[b];w.update(T,e,c)}k&&k(t,e)})),i.setAnimationLoop=function(t){k=t},i.dispose=function(){},i}return n}(w);function Ni(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);var r,i,o=t.get(n).envMap;if(o){e.envMap.value=o,e.flipEnvMap.value=o.isCubeTexture&&o._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;var a=t.get(o).__maxMipLevel;void 0!==a&&(e.maxMipLevel.value=a)}n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,o,a){var s,u;r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),s=t,(u=r).emissiveMap&&(s.emissiveMap.value=u.emissiveMap)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e,r){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),e.transmission>0&&(t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)}(t,r,a):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){var i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,o):r.isSpriteMaterial?function(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Bi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=void 0!==t.canvas?t.canvas:function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,d=null,A=[],f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var p=this,g=!1,v=0,m=0,y=null,b=-1,w=null,x=new G,_=new G,T=null,E=e.width,S=e.height,M=1,C=null,I=null,N=new G(0,0,E,S),B=new G(0,0,E,S),k=!1,P=[],D=new gn,L=!1,O=!1,R=null,F=new Et,U=new X,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function z(){return null===y?M:1}var H,Q,Y,q,K,Z,J,$,tt,et,nt,rt,it,ot,at,st,ut,lt,ct,ht,dt,At,ft=n;function pt(t,n){for(var r=0;r<t.length;r++){var i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{var gt={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(e.addEventListener("webglcontextlost",bt,!1),e.addEventListener("webglcontextrestored",wt,!1),null===ft){var vt=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&vt.shift(),null===(ft=pt(vt,gt)))throw pt(vt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ft.getShaderPrecisionFormat&&(ft.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(gt){throw console.error("THREE.WebGLRenderer: "+gt.message),gt}function mt(){H=new In(ft),Q=new Sn(ft,H,t),H.init(Q),dt=new Ti(ft,H,Q),Y=new xi(ft,H,Q),P[0]=1029,q=new kn,K=new ui,Z=new _i(ft,H,Y,K,Q,dt,q),J=new Cn(p),$=new mn(ft,Q),At=new Tn(ft,H,$,Q),tt=new Nn(ft,$,q,At),et=new On(ft,tt,$,q),lt=new Ln(ft),at=new Mn(K),nt=new si(p,J,H,Q,At,at),rt=new Ni(K),it=new di(K),ot=new mi(H,Q),ut=new _n(p,J,Y,et,s),st=new wi(p,et,Q),ct=new En(ft,H,q,Q),ht=new Bn(ft,H,q,Q),q.programs=nt.programs,p.capabilities=Q,p.extensions=H,p.properties=K,p.renderLists=it,p.shadowMap=st,p.state=Y,p.info=q}mt();var yt=new Ii(p,ft);function bt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function wt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;var t=q.autoReset,e=st.enabled,n=st.autoUpdate,r=st.needsUpdate,i=st.type;mt(),q.autoReset=t,st.enabled=e,st.autoUpdate=n,st.needsUpdate=r,st.type=i}function xt(t){var e,n,r,i=t.target;i.removeEventListener("dispose",xt),n=e=i,void 0!==(r=K.get(n).programs)&&r.forEach((function(t){nt.releaseProgram(t)})),K.remove(e)}this.xr=yt,this.getContext=function(){return ft},this.getContextAttributes=function(){return ft.getContextAttributes()},this.forceContextLoss=function(){var t=H.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=H.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(t){void 0!==t&&(M=t,this.setSize(E,S,!1))},this.getSize=function(t){return t.set(E,S)},this.setSize=function(t,n,r){yt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=t,S=n,e.width=Math.floor(t*M),e.height=Math.floor(n*M),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(E*M,S*M).floor()},this.setDrawingBufferSize=function(t,n,r){E=t,S=n,M=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(x)},this.getViewport=function(t){return t.copy(N)},this.setViewport=function(t,e,n,r){t.isVector4?N.set(t.x,t.y,t.z,t.w):N.set(t,e,n,r),Y.viewport(x.copy(N).multiplyScalar(M).floor())},this.getScissor=function(t){return t.copy(B)},this.setScissor=function(t,e,n,r){t.isVector4?B.set(t.x,t.y,t.z,t.w):B.set(t,e,n,r),Y.scissor(_.copy(B).multiplyScalar(M).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(t){Y.setScissorTest(k=t)},this.setOpaqueSort=function(t){C=t},this.setTransparentSort=function(t){I=t},this.getClearColor=function(t){return t.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor.apply(ut,arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha.apply(ut,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),ft.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",bt,!1),e.removeEventListener("webglcontextrestored",wt,!1),it.dispose(),ot.dispose(),K.dispose(),J.dispose(),et.dispose(),At.dispose(),yt.dispose(),yt.removeEventListener("sessionstart",Tt),yt.removeEventListener("sessionend",St),R&&(R.dispose(),R=null),Mt.stop()},this.renderBufferImmediate=function(t,e){At.initAttributes();var n=K.get(t);t.hasPositions&&!n.position&&(n.position=ft.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=ft.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=ft.createBuffer()),t.hasColors&&!n.color&&(n.color=ft.createBuffer());var r=e.getAttributes();t.hasPositions&&(ft.bindBuffer(34962,n.position),ft.bufferData(34962,t.positionArray,35048),At.enableAttribute(r.position),ft.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(ft.bindBuffer(34962,n.normal),ft.bufferData(34962,t.normalArray,35048),At.enableAttribute(r.normal),ft.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(ft.bindBuffer(34962,n.uv),ft.bufferData(34962,t.uvArray,35048),At.enableAttribute(r.uv),ft.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(ft.bindBuffer(34962,n.color),ft.bufferData(34962,t.colorArray,35048),At.enableAttribute(r.color),ft.vertexAttribPointer(r.color,3,5126,!1,0,0)),At.disableUnusedAttributes(),ft.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=j);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=kt(t,e,r,i);Y.setMaterial(r,a);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,h=1;!0===r.wireframe&&(u=tt.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&lt.update(i,n,r,s),At.setup(i,r,s,n,u);var d=ct;null!==u&&(c=$.get(u),(d=ht).setIndex(c));var A=null!==u?u.count:l.count,f=n.drawRange.start*h,p=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,m=Math.max(f,g),y=Math.min(A,f+p,g+v)-1,b=Math.max(0,y-m+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*z()),d.setMode(1)):d.setMode(4);else if(i.isLine){var w=r.linewidth;void 0===w&&(w=1),Y.setLineWidth(w*z()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(m,b,i.count);else if(n.isInstancedBufferGeometry){var x=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(m,b,x)}else d.render(m,b)}},this.compile=function(t,e){(d=ot.get(t)).init(),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))})),d.setupLights(),t.traverse((function(e){var n=e.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)Nt(n[r],t,e);else Nt(n,t,e)}))};var _t=null;function Tt(){Mt.stop()}function St(){Mt.start()}var Mt=new vn;function Ct(t,e,n){for(var r=!0===e.isScene?e.overrideMaterial:null,i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,l=null===r?a.material:r,c=a.group;if(n.isArrayCamera)for(var h=n.cameras,A=0,f=h.length;A<f;A++){var p=h[A];s.layers.test(p.layers)&&(Y.viewport(x.copy(p.viewport)),d.setupLightsView(p),It(s,e,p,u,l,c))}else It(s,e,n,u,l,c)}}function It(t,e,n,r,i,o){if(t.onBeforeRender(p,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=kt(n,e,i,t);Y.setMaterial(i),At.reset(),s=a,t.render((function(t){p.renderBufferImmediate(t,s)}))}else!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,p.renderBufferDirect(n,e,r,i,t,o),i.side=0,i.needsUpdate=!0,p.renderBufferDirect(n,e,r,i,t,o),i.side=2):p.renderBufferDirect(n,e,r,i,t,o);var s;t.onAfterRender(p,e,n,r,i,o)}function Nt(t,e,n){!0!==e.isScene&&(e=j);var r=K.get(t),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=nt.getParameters(t,i.state,o,e,n),u=nt.getProgramCacheKey(s),l=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=J.get(t.envMap||r.environment),void 0===l&&(t.addEventListener("dispose",xt),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Bt(t,s),c}else s.uniforms=nt.getUniforms(t),t.onBuild(s,p),t.onBeforeCompile(s,p),c=nt.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var h,A=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(A.clippingPlanes=at.uniform),Bt(t,s),r.needsLights=(h=t).isMeshLambertMaterial||h.isMeshToonMaterial||h.isMeshPhongMaterial||h.isMeshStandardMaterial||h.isShadowMaterial||h.isShaderMaterial&&!0===h.lights,r.lightsStateVersion=a,r.needsLights&&(A.ambientLightColor.value=i.state.ambient,A.lightProbe.value=i.state.probe,A.directionalLights.value=i.state.directional,A.directionalLightShadows.value=i.state.directionalShadow,A.spotLights.value=i.state.spot,A.spotLightShadows.value=i.state.spotShadow,A.rectAreaLights.value=i.state.rectArea,A.ltc_1.value=i.state.rectAreaLTC1,A.ltc_2.value=i.state.rectAreaLTC2,A.pointLights.value=i.state.point,A.pointLightShadows.value=i.state.pointShadow,A.hemisphereLights.value=i.state.hemi,A.directionalShadowMap.value=i.state.directionalShadowMap,A.directionalShadowMatrix.value=i.state.directionalShadowMatrix,A.spotShadowMap.value=i.state.spotShadowMap,A.spotShadowMatrix.value=i.state.spotShadowMatrix,A.pointShadowMap.value=i.state.pointShadowMap,A.pointShadowMatrix.value=i.state.pointShadowMatrix);var f=c.getUniforms(),g=jr.seqWithValue(f.seq,A);return r.currentProgram=c,r.uniformsList=g,c}function Bt(t,e){var n=K.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas}function kt(t,e,n,r){!0!==e.isScene&&(e=j),Z.resetTextureUnits();var i=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===y?p.outputEncoding:y.texture.encoding,s=J.get(n.envMap||o),u=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,l=K.get(n),c=d.state.lights;if(!0===L&&(!0===O||t!==w)){var h=t===w&&n.id===b;at.setState(n,t,h)}var A=!1;n.version===l.__version?l.needsLights&&l.lightsStateVersion!==c.state.version||l.outputEncoding!==a||r.isInstancedMesh&&!1===l.instancing?A=!0:r.isInstancedMesh||!0!==l.instancing?r.isSkinnedMesh&&!1===l.skinning?A=!0:r.isSkinnedMesh||!0!==l.skinning?l.envMap!==s||n.fog&&l.fog!==i?A=!0:void 0===l.numClippingPlanes||l.numClippingPlanes===at.numPlanes&&l.numIntersection===at.numIntersection?l.vertexAlphas!==u&&(A=!0):A=!0:A=!0:A=!0:(A=!0,l.__version=n.version);var f=l.currentProgram;!0===A&&(f=Nt(n,e,r));var g,v,m=!1,x=!1,_=!1,T=f.getUniforms(),E=l.uniforms;if(Y.useProgram(f.program)&&(m=!0,x=!0,_=!0),n.id!==b&&(b=n.id,x=!0),m||w!==t){if(T.setValue(ft,"projectionMatrix",t.projectionMatrix),Q.logarithmicDepthBuffer&&T.setValue(ft,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),w!==t&&(w=t,x=!0,_=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var C=T.map.cameraPosition;void 0!==C&&C.setValue(ft,U.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&T.setValue(ft,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&T.setValue(ft,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){T.setOptional(ft,r,"bindMatrix"),T.setOptional(ft,r,"bindMatrixInverse");var I=r.skeleton;I&&(Q.floatVertexTextures?(null===I.boneTexture&&I.computeBoneTexture(),T.setValue(ft,"boneTexture",I.boneTexture,Z),T.setValue(ft,"boneTextureSize",I.boneTextureSize)):T.setOptional(ft,I,"boneMatrices"))}return(x||l.receiveShadow!==r.receiveShadow)&&(l.receiveShadow=r.receiveShadow,T.setValue(ft,"receiveShadow",r.receiveShadow)),x&&(T.setValue(ft,"toneMappingExposure",p.toneMappingExposure),l.needsLights&&(v=_,(g=E).ambientLightColor.needsUpdate=v,g.lightProbe.needsUpdate=v,g.directionalLights.needsUpdate=v,g.directionalLightShadows.needsUpdate=v,g.pointLights.needsUpdate=v,g.pointLightShadows.needsUpdate=v,g.spotLights.needsUpdate=v,g.spotLightShadows.needsUpdate=v,g.rectAreaLights.needsUpdate=v,g.hemisphereLights.needsUpdate=v),i&&n.fog&&rt.refreshFogUniforms(E,i),rt.refreshMaterialUniforms(E,n,M,S,R),jr.upload(ft,l.uniformsList,E,Z)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(jr.upload(ft,l.uniformsList,E,Z),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&T.setValue(ft,"center",r.center),T.setValue(ft,"modelViewMatrix",r.modelViewMatrix),T.setValue(ft,"normalMatrix",r.normalMatrix),T.setValue(ft,"modelMatrix",r.matrixWorld),f}Mt.setAnimationLoop((function(t){_t&&_t(t)})),"undefined"!=typeof window&&Mt.setContext(window),this.setAnimationLoop=function(t){_t=t,yt.setAnimationLoop(t),null===t?Mt.stop():Mt.start()},yt.addEventListener("sessionstart",Tt),yt.addEventListener("sessionend",St),this.render=function(t,e){if(void 0===e||!0===e.isCamera){if(!0!==g){!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===yt.enabled&&!0===yt.isPresenting&&(!0===yt.cameraAutoUpdate&&yt.updateCamera(e),e=yt.getCamera()),!0===t.isScene&&t.onBeforeRender(p,t,e,y),(d=ot.get(t,f.length)).init(),f.push(d),F.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),D.setFromProjectionMatrix(F),O=this.localClippingEnabled,L=at.init(this.clippingPlanes,O,e),(h=it.get(t,A.length)).init(),A.push(h),function t(e,n,r,i){if(!1!==e.visible){if(e.layers.test(n.layers))if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||D.intersectsSprite(e)){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);var o=et.update(e),a=e.material;a.visible&&h.push(e,o,a,r,U.z,null)}}else if(e.isImmediateRenderObject)i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F),h.push(e,null,e.material,r,U.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==q.render.frame&&(e.skeleton.update(),e.skeleton.frame=q.render.frame),!e.frustumCulled||D.intersectsObject(e))){i&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);var s=et.update(e),u=e.material;if(Array.isArray(u))for(var l=s.groups,c=0,A=l.length;c<A;c++){var f=l[c],p=u[f.materialIndex];p&&p.visible&&h.push(e,s,p,r,U.z,f)}else u.visible&&h.push(e,s,u,r,U.z,null)}for(var g=e.children,v=0,m=g.length;v<m;v++)t(g[v],n,r,i)}}(t,e,0,p.sortObjects),h.finish(),!0===p.sortObjects&&h.sort(C,I),!0===L&&at.beginShadows();var n=d.state.shadowsArray;st.render(n,t,e),d.setupLights(),d.setupLightsView(e),!0===L&&at.endShadows(),!0===this.info.autoReset&&this.info.reset(),ut.render(h,t);var r=h.opaque,i=h.transmissive,o=h.transparent;r.length>0&&Ct(r,t,e),i.length>0&&function(t,e,n,r){if(null===R){var i=!0===a&&!0===Q.isWebGL2;R=new(i?W:V)(1024,1024,{generateMipmaps:!0,type:null!==dt.convert(1016)?1016:1009,minFilter:1008,magFilter:1003,wrapS:1001,wrapT:1001})}var o=p.getRenderTarget();p.setRenderTarget(R),p.clear();var s=p.toneMapping;p.toneMapping=0,Ct(t,n,r),p.toneMapping=s,Z.updateMultisampleRenderTarget(R),Z.updateRenderTargetMipmap(R),p.setRenderTarget(o),Ct(e,n,r)}(r,i,t,e),o.length>0&&Ct(o,t,e),null!==y&&(Z.updateMultisampleRenderTarget(y),Z.updateRenderTargetMipmap(y)),!0===t.isScene&&t.onAfterRender(p,t,e),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1),At.resetDefaultState(),b=-1,w=null,f.pop(),d=f.length>0?f[f.length-1]:null,A.pop(),h=A.length>0?A[A.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return y},this.setRenderTarget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;y=t,v=e,m=n,t&&void 0===K.get(t).__webglFramebuffer&&Z.setupRenderTarget(t);var r=null,i=!1,o=!1;if(t){var a=t.texture;(a.isDataTexture3D||a.isDataTexture2DArray)&&(o=!0);var s=K.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=s[e],i=!0):r=t.isWebGLMultisampleRenderTarget?K.get(t).__webglMultisampledFramebuffer:s,x.copy(t.viewport),_.copy(t.scissor),T=t.scissorTest}else x.copy(N).multiplyScalar(M).floor(),_.copy(B).multiplyScalar(M).floor(),T=k;if(Y.bindFramebuffer(36160,r)&&Q.drawBuffers){var u=!1;if(t)if(t.isWebGLMultipleRenderTargets){var l=t.texture;if(P.length!==l.length||36064!==P[0]){for(var c=0,h=l.length;c<h;c++)P[c]=36064+c;P.length=l.length,u=!0}}else 1===P.length&&36064===P[0]||(P[0]=36064,P.length=1,u=!0);else 1===P.length&&1029===P[0]||(P[0]=1029,P.length=1,u=!0);u&&(Q.isWebGL2?ft.drawBuffers(P):H.get("WEBGL_draw_buffers").drawBuffersWEBGL(P))}if(Y.viewport(x),Y.scissor(_),Y.setScissorTest(T),i){var d=K.get(t.texture);ft.framebufferTexture2D(36160,36064,34069+e,d.__webglTexture,n)}else if(o){var A=K.get(t.texture),f=e||0;ft.framebufferTextureLayer(36160,36064,A.__webglTexture,n||0,f)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(t&&t.isWebGLRenderTarget){var s=K.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){Y.bindFramebuffer(36160,s);try{var u=t.texture,l=u.format,c=u.type;if(1023!==l&&dt.convert(l)!==ft.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=1016===c&&(H.has("EXT_color_buffer_half_float")||Q.isWebGL2&&H.has("EXT_color_buffer_float"));if(!(1009===c||dt.convert(c)===ft.getParameter(35738)||1015===c&&(Q.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ft.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&ft.readPixels(e,n,r,i,dt.convert(l),dt.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var d=null!==y?K.get(y).__webglFramebuffer:null;Y.bindFramebuffer(36160,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=dt.convert(e.format);Q.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),Z.setTexture2D(e,0),ft.copyTexImage2D(3553,n,a,t.x,t.y,i,o,0),Y.unbindTexture()},this.copyTextureToTexture=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.image.width,o=e.image.height,a=dt.convert(n.format),s=dt.convert(n.type);Z.setTexture2D(n,0),ft.pixelStorei(37440,n.flipY),ft.pixelStorei(37441,n.premultiplyAlpha),ft.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ft.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?ft.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):ft.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&ft.generateMipmap(3553),Y.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(p.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var o,a=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,u=t.max.z-t.min.z+1,l=dt.convert(r.format),c=dt.convert(r.type);if(r.isDataTexture3D)Z.setTexture3D(r,0),o=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(r,0),o=35866}ft.pixelStorei(37440,r.flipY),ft.pixelStorei(37441,r.premultiplyAlpha),ft.pixelStorei(3317,r.unpackAlignment);var h=ft.getParameter(3314),d=ft.getParameter(32878),A=ft.getParameter(3316),f=ft.getParameter(3315),g=ft.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;ft.pixelStorei(3314,v.width),ft.pixelStorei(32878,v.height),ft.pixelStorei(3316,t.min.x),ft.pixelStorei(3315,t.min.y),ft.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?ft.texSubImage3D(o,i,e.x,e.y,e.z,a,s,u,l,c,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ft.compressedTexSubImage3D(o,i,e.x,e.y,e.z,a,s,u,l,v.data)):ft.texSubImage3D(o,i,e.x,e.y,e.z,a,s,u,l,c,v),ft.pixelStorei(3314,h),ft.pixelStorei(32878,d),ft.pixelStorei(3316,A),ft.pixelStorei(3315,f),ft.pixelStorei(32877,g),0===i&&r.generateMipmaps&&ft.generateMipmap(o),Y.unbindTexture()}},this.initTexture=function(t){Z.setTexture2D(t,0),Y.unbindTexture()},this.resetState=function(){v=0,m=0,y=null,Y.reset(),At.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return n})(Bi).prototype.isWebGL1Renderer=!0;var ki=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this)).type="Scene",t.background=null,t.environment=null,t.fog=null,t.overrideMaterial=null,t.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:v(t)})),t}return x(n,[{key:"copy",value:function(t,e){return d(y(n.prototype),"copy",this).call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}},{key:"toJSON",value:function(t){var e=d(y(n.prototype),"toJSON",this).call(this,t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}]),n}(Kt);ki.prototype.isScene=!0;var Pi=function(){function t(e,n){b(this,t),this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=B()}return x(t,[{key:"onUploadCallback",value:function(){}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"clone",value:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=B()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=B()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),t}();Pi.prototype.isInterleavedBuffer=!0;var Di=new X,Li=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];b(this,t),this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=!0===i}return x(t,[{key:"applyMatrix4",value:function(t){for(var e=0,n=this.data.count;e<n;e++)Di.x=this.getX(e),Di.y=this.getY(e),Di.z=this.getZ(e),Di.applyMatrix4(t),this.setXYZ(e,Di.x,Di.y,Di.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)Di.x=this.getX(e),Di.y=this.getY(e),Di.z=this.getZ(e),Di.applyNormalMatrix(t),this.setXYZ(e,Di.x,Di.y,Di.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)Di.x=this.getX(e),Di.y=this.getY(e),Di.z=this.getZ(e),Di.transformDirection(t),this.setXYZ(e,Di.x,Di.y,Di.z);return this}},{key:"setX",value:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}},{key:"setY",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}},{key:"setZ",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}},{key:"setW",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}},{key:"getX",value:function(t){return this.data.array[t*this.data.stride+this.offset]}},{key:"getY",value:function(t){return this.data.array[t*this.data.stride+this.offset+1]}},{key:"getZ",value:function(t){return this.data.array[t*this.data.stride+this.offset+2]}},{key:"getW",value:function(t){return this.data.array[t*this.data.stride+this.offset+3]}},{key:"setXY",value:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}},{key:"clone",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,o=0;o<this.itemSize;o++)n.push(this.data.array[i+o]);return new be(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)e.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}}]),t}();Li.prototype.isInterleavedBufferAttribute=!0;var Oi,Ri=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="SpriteMaterial",r.color=new ge(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}]),n}(le);Ri.prototype.isSpriteMaterial=!0;var Fi=new X,Ui=new X,ji=new X,zi=new R,Hi=new R,Qi=new Et,Gi=new X,Vi=new X,Wi=new X,Yi=new R,Xi=new R,qi=new R;function Ki(t,e,n,r,i,o){zi.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(Hi.x=o*zi.x-i*zi.y,Hi.y=i*zi.x+o*zi.y):Hi.copy(zi),t.copy(e),t.x+=Hi.x,t.y+=Hi.y,t.applyMatrix4(Qi)}(function(t){A(n,t);var e=p(n);function n(t){var r;if(b(this,n),(r=e.call(this)).type="Sprite",void 0===Oi){Oi=new Pe;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o=new Pi(i,5);Oi.setIndex([0,1,2,0,2,3]),Oi.setAttribute("position",new Li(o,3,0,!1)),Oi.setAttribute("uv",new Li(o,2,3,!1))}return r.geometry=Oi,r.material=void 0!==t?t:new Ri,r.center=new R(.5,.5),g(r)}return x(n,[{key:"raycast",value:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ui.setFromMatrixScale(this.matrixWorld),Qi.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ji.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ui.multiplyScalar(-ji.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;Ki(Gi.set(-.5,-.5,0),ji,o,Ui,n,r),Ki(Vi.set(.5,-.5,0),ji,o,Ui,n,r),Ki(Wi.set(.5,.5,0),ji,o,Ui,n,r),Yi.set(0,0),Xi.set(1,0),qi.set(1,1);var a=t.ray.intersectTriangle(Gi,Vi,Wi,!1,Fi);if(null!==a||(Ki(Vi.set(-.5,.5,0),ji,o,Ui,n,r),Xi.set(0,1),null!==(a=t.ray.intersectTriangle(Gi,Wi,Vi,!1,Fi)))){var s=t.ray.origin.distanceTo(Fi);s<t.near||s>t.far||e.push({distance:s,point:Fi.clone(),uv:se.getUV(Fi,Gi,Vi,Wi,Yi,Xi,qi,new R),face:null,object:this})}}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}]),n})(Kt).prototype.isSprite=!0;var Zi=new X,Ji=new G,$i=new G,to=new X,eo=new Et,no=function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),(i=e.call(this,t,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new Et,i.bindMatrixInverse=new Et,i}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}},{key:"bind",value:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var t=new G,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}},{key:"updateMatrixWorld",value:function(t){d(y(n.prototype),"updateMatrixWorld",this).call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(t,e){var n=this.skeleton,r=this.geometry;Ji.fromBufferAttribute(r.attributes.skinIndex,t),$i.fromBufferAttribute(r.attributes.skinWeight,t),Zi.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var i=0;i<4;i++){var o=$i.getComponent(i);if(0!==o){var a=Ji.getComponent(i);eo.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(to.copy(Zi).applyMatrix4(eo),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}]),n}(Ze);no.prototype.isSkinnedMesh=!0,function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this)).type="Bone",t}return n}(Kt).prototype.isBone=!0;var ro=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1003,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1003,A=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;return b(this,n),(t=e.call(this,null,u,l,c,h,d,a,s,A,f)).image={data:r,width:i,height:o},t.magFilter=h,t.minFilter=d,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t.needsUpdate=!0,t}return n}(H);ro.prototype.isDataTexture=!0;var io=new Et,oo=new Et,ao=[],so=new Ze;(function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r)).instanceMatrix=new be(new Float32Array(16*i),16),o.instanceColor=null,o.count=i,o.frustumCulled=!1,o}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}},{key:"getColorAt",value:function(t,e){e.fromArray(this.instanceColor.array,3*t)}},{key:"getMatrixAt",value:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)}},{key:"raycast",value:function(t,e){var n=this.matrixWorld,r=this.count;if(so.geometry=this.geometry,so.material=this.material,void 0!==so.material)for(var i=0;i<r;i++){this.getMatrixAt(i,io),oo.multiplyMatrices(n,io),so.matrixWorld=oo,so.raycast(t,ao);for(var o=0,a=ao.length;o<a;o++){var s=ao[o];s.instanceId=i,s.object=this,e.push(s)}ao.length=0}}},{key:"setColorAt",value:function(t,e){null===this.instanceColor&&(this.instanceColor=new be(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)}},{key:"setMatrixAt",value:function(t,e){e.toArray(this.instanceMatrix.array,16*t)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n})(Ze).prototype.isInstancedMesh=!0;var uo=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="LineBasicMaterial",r.color=new ge(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.morphTargets=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this}}]),n}(le);uo.prototype.isLineBasicMaterial=!0;var lo=new X,co=new X,ho=new Et,Ao=new Tt,fo=new gt,po=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pe,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uo;return b(this,n),(t=e.call(this)).type="Line",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)lo.fromBufferAttribute(e,r-1),co.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=lo.distanceTo(co);t.setAttribute("lineDistance",new Te(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),fo.copy(n.boundingSphere),fo.applyMatrix4(r),fo.radius+=i,!1!==t.ray.intersectsSphere(fo)){ho.copy(r).invert(),Ao.copy(t.ray).applyMatrix4(ho);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new X,l=new X,c=new X,h=new X,d=this.isLineSegments?2:1;if(n.isBufferGeometry){var A=n.index,f=n.attributes.position;if(null!==A)for(var p=Math.max(0,o.start),g=Math.min(A.count,o.start+o.count)-1;p<g;p+=d){var v=A.getX(p),m=A.getX(p+1);if(u.fromBufferAttribute(f,v),l.fromBufferAttribute(f,m),!(Ao.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var y=t.ray.origin.distanceTo(h);y<t.near||y>t.far||e.push({distance:y,point:c.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}else for(var b=Math.max(0,o.start),w=Math.min(f.count,o.start+o.count)-1;b<w;b+=d)if(u.fromBufferAttribute(f,b),l.fromBufferAttribute(f,b+1),!(Ao.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var x=t.ray.origin.distanceTo(h);x<t.near||x>t.far||e.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Kt);po.prototype.isLine=!0;var go=new X,vo=new X,mo=function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),(i=e.call(this,t,r)).type="LineSegments",i}return x(n,[{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],r=0,i=e.count;r<i;r+=2)go.fromBufferAttribute(e,r),vo.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+go.distanceTo(vo);t.setAttribute("lineDistance",new Te(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(po);mo.prototype.isLineSegments=!0,function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),(i=e.call(this,t,r)).type="LineLoop",i}return n}(po).prototype.isLineLoop=!0;var yo=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="PointsMaterial",r.color=new ge(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.morphTargets=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this}}]),n}(le);yo.prototype.isPointsMaterial=!0;var bo=new Et,wo=new Tt,xo=new gt,_o=new X,To=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pe,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yo;return b(this,n),(t=e.call(this)).type="Points",t.geometry=r,t.material=i,t.updateMorphTargets(),t}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),xo.copy(n.boundingSphere),xo.applyMatrix4(r),xo.radius+=i,!1!==t.ray.intersectsSphere(xo)){bo.copy(r).invert(),wo.copy(t.ray).applyMatrix4(bo);var a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,o.start),h=Math.min(u.count,o.start+o.count);c<h;c++){var d=u.getX(c);_o.fromBufferAttribute(l,d),Eo(_o,d,s,r,t,e,this)}else for(var A=Math.max(0,o.start),f=Math.min(l.count,o.start+o.count);A<f;A++)_o.fromBufferAttribute(l,A),Eo(_o,A,s,r,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,o=r.length;i<o;i++){var a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Kt);function Eo(t,e,n,r,i,o,a){var s=wo.distanceSqToPoint(t);if(s<n){var u=new X;wo.closestPointToPoint(t,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,object:a})}}To.prototype.isPoints=!0,function(t){A(n,t);var e=p(n);function n(t,r,i,o,a,s,u,l,c){var h;b(this,n),(h=e.call(this,t,r,i,o,a,s,u,l,c)).format=void 0!==u?u:1022,h.minFilter=void 0!==s?s:1006,h.magFilter=void 0!==a?a:1006,h.generateMipmaps=!1;var d=v(h);return"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){d.needsUpdate=!0,t.requestVideoFrameCallback(e)})),h}return x(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var t=this.image;!("requestVideoFrameCallback"in t)&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(H).prototype.isVideoTexture=!0,function(t){A(n,t);var e=p(n);function n(t,r,i,o,a,s,u,l,c,h,d,A){var f;return b(this,n),(f=e.call(this,null,s,u,l,c,h,o,a,d,A)).image={width:r,height:i},f.mipmaps=t,f.flipY=!1,f.generateMipmaps=!1,f}return n}(H).prototype.isCompressedTexture=!0,function(t){A(n,t);var e=p(n);function n(t,r,i,o,a,s,u,l,c){var h;return b(this,n),(h=e.call(this,t,r,i,o,a,s,u,l,c)).needsUpdate=!0,h}return n}(H).prototype.isCanvasTexture=!0,function(t){A(n,t);var e=p(n);function n(t,r,i,o,a,s,u,l,c,h){var d;if(b(this,n),1026!==(h=void 0!==h?h:1026)&&1027!==h)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&1026===h&&(i=1012),void 0===i&&1027===h&&(i=1020),(d=e.call(this,null,o,a,s,u,l,h,i,c)).image={width:t,height:r},d.magFilter=void 0!==u?u:1003,d.minFilter=void 0!==l?l:1003,d.flipY=!1,d.generateMipmaps=!1,d}return n}(H).prototype.isDepthTexture=!0,new X,new X,new X,new se;var So=function(){function t(){b(this,t),this.type="Curve",this.arcLengthDivisions=200}return x(t,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)}},{key:"getPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}},{key:"getLength",value:function(){var t=this.getLengths();return t[t.length-1]}},{key:"getLengths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],r=this.getPoint(0),i=0;n.push(0);for(var o=1;o<=t;o++)i+=(e=this.getPoint(o/t)).distanceTo(r),n.push(i),r=e;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)}},{key:"getTangent",value:function(t,e){var n=t-1e-4,r=t+1e-4;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=e||(i.isVector2?new R:new X);return a.copy(o).sub(i).normalize(),a}},{key:"getTangentAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)}},{key:"computeFrenetFrames",value:function(t,e){for(var n=new X,r=[],i=[],o=[],a=new X,s=new Et,u=0;u<=t;u++){var l=u/t;r[u]=this.getTangentAt(l,new X),r[u].normalize()}i[0]=new X,o[0]=new X;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),d=Math.abs(r[0].y),A=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),A<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(var f=1;f<=t;f++){if(i[f]=i[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();var p=Math.acos(k(r[f-1].dot(r[f]),-1,1));i[f].applyMatrix4(s.makeRotationAxis(a,p))}o[f].crossVectors(r[f],i[f])}if(!0===e){var g=Math.acos(k(i[0].dot(i[t]),-1,1));g/=t,r[0].dot(a.crossVectors(i[0],i[t]))>0&&(g=-g);for(var v=1;v<=t;v++)i[v].applyMatrix4(s.makeRotationAxis(r[v],g*v)),o[v].crossVectors(r[v],i[v])}return{tangents:r,normals:i,binormals:o}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}},{key:"fromJSON",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}]),t}(),Mo=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return b(this,n),(t=e.call(this)).type="EllipseCurve",t.aX=r,t.aY=i,t.xRadius=o,t.yRadius=a,t.aStartAngle=s,t.aEndAngle=u,t.aClockwise=l,t.aRotation=c,t}return x(n,[{key:"getPoint",value:function(t,e){for(var n=e||new R,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=u-this.aY;s=h*l-d*c+this.aX,u=h*c+d*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}},{key:"fromJSON",value:function(t){return d(y(n.prototype),"fromJSON",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}]),n}(So);Mo.prototype.isEllipseCurve=!0;var Co=function(t){A(n,t);var e=p(n);function n(t,r,i,o,a,s){var u;return b(this,n),(u=e.call(this,t,r,i,i,o,a,s)).type="ArcCurve",u}return n}(Mo);function Io(){var t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){var u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;i(e,n,u*=a,l*=a)},calc:function(i){var o=i*i;return t+e*i+n*o+r*(o*i)}}}Co.prototype.isArcCurve=!0;var No=new X,Bo=new Io,ko=new Io,Po=new Io,Do=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return b(this,n),(t=e.call(this)).type="CatmullRomCurve3",t.points=r,t.closed=i,t.curveType=o,t.tension=a,t}return x(n,[{key:"getPoint",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X,i=r,o=this.points,a=o.length,s=(a-(this.closed?0:1))*t,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/a)+1)*a:0===l&&u===a-1&&(u=a-2,l=1),this.closed||u>0?e=o[(u-1)%a]:(No.subVectors(o[0],o[1]).add(o[0]),e=No);var c=o[u%a],h=o[(u+1)%a];if(this.closed||u+2<a?n=o[(u+2)%a]:(No.subVectors(o[a-1],o[a-2]).add(o[a-1]),n=No),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,A=Math.pow(e.distanceToSquared(c),d),f=Math.pow(c.distanceToSquared(h),d),p=Math.pow(h.distanceToSquared(n),d);f<1e-4&&(f=1),A<1e-4&&(A=f),p<1e-4&&(p=f),Bo.initNonuniformCatmullRom(e.x,c.x,h.x,n.x,A,f,p),ko.initNonuniformCatmullRom(e.y,c.y,h.y,n.y,A,f,p),Po.initNonuniformCatmullRom(e.z,c.z,h.z,n.z,A,f,p)}else"catmullrom"===this.curveType&&(Bo.initCatmullRom(e.x,c.x,h.x,n.x,this.tension),ko.initCatmullRom(e.y,c.y,h.y,n.y,this.tension),Po.initCatmullRom(e.z,c.z,h.z,n.z,this.tension));return i.set(Bo.calc(l),ko.calc(l),Po.calc(l)),i}},{key:"copy",value:function(t){d(y(n.prototype),"copy",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}},{key:"fromJSON",value:function(t){d(y(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new X).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}]),n}(So);function Lo(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function Oo(t,e,n,r){return(i=1-t)*i*e+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r);var i}function Ro(t,e,n,r,i){return(o=1-t)*o*o*e+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i);var o}Do.prototype.isCatmullRomCurve3=!0;var Fo=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new R,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new R,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new R,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new R;return b(this,n),(t=e.call(this)).type="CubicBezierCurve",t.v0=r,t.v1=i,t.v2=o,t.v3=a,t}return x(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new R,n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ro(t,r.x,i.x,o.x,a.x),Ro(t,r.y,i.y,o.y,a.y)),n}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return d(y(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(So);Fo.prototype.isCubicBezierCurve=!0;var Uo=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new X,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new X,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new X;return b(this,n),(t=e.call(this)).type="CubicBezierCurve3",t.v0=r,t.v1=i,t.v2=o,t.v3=a,t}return x(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X,n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ro(t,r.x,i.x,o.x,a.x),Ro(t,r.y,i.y,o.y,a.y),Ro(t,r.z,i.z,o.z,a.z)),n}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return d(y(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(So);Uo.prototype.isCubicBezierCurve3=!0;var jo=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new R,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new R;return b(this,n),(t=e.call(this)).type="LineCurve",t.v1=r,t.v2=i,t}return x(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new R,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"getTangent",value:function(t,e){var n=e||new R;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return d(y(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(So);jo.prototype.isLineCurve=!0;var zo=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new R,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new R,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new R;return b(this,n),(t=e.call(this)).type="QuadraticBezierCurve",t.v0=r,t.v1=i,t.v2=o,t}return x(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new R,n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Oo(t,r.x,i.x,o.x),Oo(t,r.y,i.y,o.y)),n}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return d(y(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(So);zo.prototype.isQuadraticBezierCurve=!0;var Ho=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new X,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new X;return b(this,n),(t=e.call(this)).type="QuadraticBezierCurve3",t.v0=r,t.v1=i,t.v2=o,t}return x(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X,n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Oo(t,r.x,i.x,o.x),Oo(t,r.y,i.y,o.y),Oo(t,r.z,i.z,o.z)),n}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return d(y(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(So);Ho.prototype.isQuadraticBezierCurve3=!0;var Qo=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return b(this,n),(t=e.call(this)).type="SplineCurve",t.points=r,t}return x(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new R,n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Lo(a,s.x,u.x,l.x,c.x),Lo(a,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(t){d(y(n.prototype),"copy",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var i=this.points[e];t.points.push(i.toArray())}return t}},{key:"fromJSON",value:function(t){d(y(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var i=t.points[e];this.points.push((new R).fromArray(i))}return this}}]),n}(So);Qo.prototype.isSplineCurve=!0;var Go=Object.freeze({__proto__:null,ArcCurve:Co,CatmullRomCurve3:Do,CubicBezierCurve:Fo,CubicBezierCurve3:Uo,EllipseCurve:Mo,LineCurve:jo,LineCurve3:function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new X,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X;return b(this,n),(t=e.call(this)).type="LineCurve3",t.isLineCurve3=!0,t.v1=r,t.v2=i,t}return x(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new X,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return d(y(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(So),QuadraticBezierCurve:zo,QuadraticBezierCurve3:Ho,SplineCurve:Qo});function Vo(t,e,n,r,i){var o,a;if(i===function(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=da(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=da(o,t[o],t[o+1],a);return a&&aa(a,a.next)&&(Aa(a),a=a.next),a}function Wo(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!aa(r,r.next)&&0!==oa(r.prev,r,r.next))r=r.next;else{if(Aa(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Yo(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=ea(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?qo(t,r,i,o):Xo(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Aa(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Yo(t=Ko(Wo(t),e,n),e,n,r,i,o,2):2===a&&Zo(t,e,n,r,i,o):Yo(Wo(t),e,n,r,i,o,1);break}}}function Xo(t){var e=t.prev,n=t,r=t.next;if(oa(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(ra(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&oa(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function qo(t,e,n,r){var i=t.prev,o=t,a=t.next;if(oa(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=ea(s,u,e,n,r),d=ea(l,c,e,n,r),A=t.prevZ,f=t.nextZ;A&&A.z>=h&&f&&f.z<=d;){if(A!==t.prev&&A!==t.next&&ra(i.x,i.y,o.x,o.y,a.x,a.y,A.x,A.y)&&oa(A.prev,A,A.next)>=0||(A=A.prevZ,f!==t.prev&&f!==t.next&&ra(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&oa(f.prev,f,f.next)>=0))return!1;f=f.nextZ}for(;A&&A.z>=h;){if(A!==t.prev&&A!==t.next&&ra(i.x,i.y,o.x,o.y,a.x,a.y,A.x,A.y)&&oa(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&ra(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&oa(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Ko(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!aa(i,o)&&sa(i,r,r.next,o)&&ca(i,o)&&ca(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Aa(r),Aa(r.next),r=t=o),r=r.next}while(r!==t);return Wo(r)}function Zo(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&ia(a,s)){var u=ha(a,s);return a=Wo(a,a.next),u=Wo(u,u.next),Yo(a,e,n,r,i,o),void Yo(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Jo(t,e){return t.x-e.x}function $o(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&ra(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),ca(r,t)&&(u<d||u===d&&(r.x>n.x||r.x===n.x&&ta(n,r)))&&(n=r,d=u)),r=r.next}while(r!==l);return n}(t,e)){var n=ha(e,t);Wo(e,e.next),Wo(n,n.next)}}function ta(t,e){return oa(t.prev,t,e.prev)<0&&oa(e.next,t,t.next)<0}function ea(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function na(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function ra(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ia(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&sa(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(ca(t,e)&&ca(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(oa(t.prev,t,e.prev)||oa(t,e.prev,e))||aa(t,e)&&oa(t.prev,t,t.next)>0&&oa(e.prev,e,e.next)>0)}function oa(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function aa(t,e){return t.x===e.x&&t.y===e.y}function sa(t,e,n,r){var i=la(oa(t,e,n)),o=la(oa(t,e,r)),a=la(oa(n,r,t)),s=la(oa(n,r,e));return i!==o&&a!==s||!(0!==i||!ua(t,n,e))||!(0!==o||!ua(t,r,e))||!(0!==a||!ua(n,t,r))||!(0!==s||!ua(n,e,r))}function ua(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function la(t){return t>0?1:t<0?-1:0}function ca(t,e){return oa(t.prev,t,t.next)<0?oa(t,e,t.next)>=0&&oa(t,t.prev,e)>=0:oa(t,e,t.prev)<0||oa(t,t.next,e)<0}function ha(t,e){var n=new fa(t.i,t.x,t.y),r=new fa(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function da(t,e,n,r){var i=new fa(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Aa(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function fa(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var pa=function(){function t(){b(this,t)}return x(t,null,[{key:"area",value:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n}},{key:"isClockWise",value:function(e){return t.area(e)<0}},{key:"triangulateShape",value:function(t,e){var n=[],r=[],i=[];ga(t),va(n,t);var o=t.length;e.forEach(ga);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,va(n,e[a]);for(var s=function(t,e){var n,r,i,o,a,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=e&&e.length,h=c?e[0]*l:t.length,d=Vo(t,0,h,l,!0),A=[];if(!d||d.next===d.prev)return A;if(c&&(d=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Vo(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(na(a));for(s.sort(Jo),i=0;i<s.length;i++)$o(s[i],n),n=Wo(n,n.next);return n}(t,e,d,l)),t.length>80*l){n=i=t[0],r=o=t[1];for(var f=l;f<h;f+=l)(a=t[f])<n&&(n=a),(s=t[f+1])<r&&(r=s),a>i&&(i=a),s>o&&(o=s);u=0!==(u=Math.max(i-n,o-r))?1/u:0}return Yo(d,A,l,n,r,u),A}(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),t}();function ga(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function va(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var ma=function(t){A(n,t);var e=p(n);function n(t,r){var i;b(this,n),(i=e.call(this)).type="ExtrudeGeometry",i.parameters={shapes:t,options:r},t=Array.isArray(t)?t:[t];for(var o=v(i),a=[],s=[],u=0,l=t.length;u<l;u++)c(t[u]);function c(t){var e=[],n=void 0!==r.curveSegments?r.curveSegments:12,i=void 0!==r.steps?r.steps:1,u=void 0!==r.depth?r.depth:100,l=void 0===r.bevelEnabled||r.bevelEnabled,c=void 0!==r.bevelThickness?r.bevelThickness:6,h=void 0!==r.bevelSize?r.bevelSize:c-2,d=void 0!==r.bevelOffset?r.bevelOffset:0,A=void 0!==r.bevelSegments?r.bevelSegments:3,f=r.extrudePath,p=void 0!==r.UVGenerator?r.UVGenerator:ya;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=r.amount);var g,v,m,y,b,w=!1;f&&(g=f.getSpacedPoints(i),w=!0,l=!1,v=f.computeFrenetFrames(i,!1),m=new X,y=new X,b=new X),l||(A=0,c=0,h=0,d=0);var x=t.extractPoints(n),_=x.shape,T=x.holes;if(!pa.isClockWise(_)){_=_.reverse();for(var E=0,S=T.length;E<S;E++){var M=T[E];pa.isClockWise(M)&&(T[E]=M.reverse())}}for(var C=pa.triangulateShape(_,T),I=_,N=0,B=T.length;N<B;N++){var k=T[N];_=_.concat(k)}function P(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var D=_.length,L=C.length;function O(t,e,n){var r,i,o,a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),A=Math.sqrt(u*u+l*l),f=e.x-s/d,p=e.y+a/d,g=((n.x-l/A-f)*l-(n.y+u/A-p)*u)/(a*l-s*u),v=(r=f+a*g-t.x)*r+(i=p+s*g-t.y)*i;if(v<=2)return new R(r,i);o=Math.sqrt(v/2)}else{var m=!1;a>Number.EPSILON?u>Number.EPSILON&&(m=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(m=!0):Math.sign(s)===Math.sign(l)&&(m=!0),m?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new R(r/o,i/o)}for(var F=[],U=0,j=I.length,z=j-1,H=U+1;U<j;U++,z++,H++)z===j&&(z=0),H===j&&(H=0),F[U]=O(I[U],I[z],I[H]);for(var Q,G=[],V=F.concat(),W=0,Y=T.length;W<Y;W++){var q=T[W];Q=[];for(var K=0,Z=q.length,J=Z-1,$=K+1;K<Z;K++,J++,$++)J===Z&&(J=0),$===Z&&($=0),Q[K]=O(q[K],q[J],q[$]);G.push(Q),V=V.concat(Q)}for(var tt=0;tt<A;tt++){for(var et=tt/A,nt=c*Math.cos(et*Math.PI/2),rt=h*Math.sin(et*Math.PI/2)+d,it=0,ot=I.length;it<ot;it++){var at=P(I[it],F[it],rt);Pt(at.x,at.y,-nt)}for(var st=0,ut=T.length;st<ut;st++){var lt=T[st];Q=G[st];for(var ct=0,ht=lt.length;ct<ht;ct++){var dt=P(lt[ct],Q[ct],rt);Pt(dt.x,dt.y,-nt)}}}for(var At=h+d,ft=0;ft<D;ft++){var pt=l?P(_[ft],V[ft],At):_[ft];w?(y.copy(v.normals[0]).multiplyScalar(pt.x),m.copy(v.binormals[0]).multiplyScalar(pt.y),b.copy(g[0]).add(y).add(m),Pt(b.x,b.y,b.z)):Pt(pt.x,pt.y,0)}for(var gt=1;gt<=i;gt++)for(var vt=0;vt<D;vt++){var mt=l?P(_[vt],V[vt],At):_[vt];w?(y.copy(v.normals[gt]).multiplyScalar(mt.x),m.copy(v.binormals[gt]).multiplyScalar(mt.y),b.copy(g[gt]).add(y).add(m),Pt(b.x,b.y,b.z)):Pt(mt.x,mt.y,u/i*gt)}for(var yt=A-1;yt>=0;yt--){for(var bt=yt/A,wt=c*Math.cos(bt*Math.PI/2),xt=h*Math.sin(bt*Math.PI/2)+d,_t=0,Tt=I.length;_t<Tt;_t++){var Et=P(I[_t],F[_t],xt);Pt(Et.x,Et.y,u+wt)}for(var St=0,Mt=T.length;St<Mt;St++){var Ct=T[St];Q=G[St];for(var It=0,Nt=Ct.length;It<Nt;It++){var Bt=P(Ct[It],Q[It],xt);w?Pt(Bt.x,Bt.y+g[i-1].y,g[i-1].x+wt):Pt(Bt.x,Bt.y,u+wt)}}}function kt(t,e){for(var n=t.length;--n>=0;){var r=n,o=n-1;o<0&&(o=t.length-1);for(var a=0,s=i+2*A;a<s;a++){var u=D*a,l=D*(a+1);Lt(e+r+u,e+o+u,e+o+l,e+r+l)}}}function Pt(t,n,r){e.push(t),e.push(n),e.push(r)}function Dt(t,e,n){Ot(t),Ot(e),Ot(n);var r=a.length/3,i=p.generateTopUV(o,a,r-3,r-2,r-1);Rt(i[0]),Rt(i[1]),Rt(i[2])}function Lt(t,e,n,r){Ot(t),Ot(e),Ot(r),Ot(e),Ot(n),Ot(r);var i=a.length/3,s=p.generateSideWallUV(o,a,i-6,i-3,i-2,i-1);Rt(s[0]),Rt(s[1]),Rt(s[3]),Rt(s[1]),Rt(s[2]),Rt(s[3])}function Ot(t){a.push(e[3*t+0]),a.push(e[3*t+1]),a.push(e[3*t+2])}function Rt(t){s.push(t.x),s.push(t.y)}(function(){var t=a.length/3;if(l){for(var e=0,n=D*e,r=0;r<L;r++){var s=C[r];Dt(s[2]+n,s[1]+n,s[0]+n)}n=D*(e=i+2*A);for(var u=0;u<L;u++){var c=C[u];Dt(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<L;h++){var d=C[h];Dt(d[2],d[1],d[0])}for(var f=0;f<L;f++){var p=C[f];Dt(p[0]+D*i,p[1]+D*i,p[2]+D*i)}}o.addGroup(t,a.length/3-t,0)})(),function(){var t=a.length/3,e=0;kt(I,e),e+=I.length;for(var n=0,r=T.length;n<r;n++){var i=T[n];kt(i,e),e+=i.length}o.addGroup(t,a.length/3-t,1)}()}return i.setAttribute("position",new Te(a,3)),i.setAttribute("uv",new Te(s,2)),i.computeVertexNormals(),i}return x(n,[{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)}}],[{key:"fromJSON",value:function(t,e){for(var r=[],i=0,o=t.shapes.length;i<o;i++){var a=e[t.shapes[i]];r.push(a)}var s=t.options.extrudePath;return void 0!==s&&(t.options.extrudePath=(new Go[s.type]).fromJSON(s)),new n(r,t.options)}}]),n}(Pe),ya={generateTopUV:function(t,e,n,r,i){var o=e[3*n],a=e[3*n+1],s=e[3*r],u=e[3*r+1],l=e[3*i],c=e[3*i+1];return[new R(o,a),new R(s,u),new R(l,c)]},generateSideWallUV:function(t,e,n,r,i,o){var a=e[3*n],s=e[3*n+1],u=e[3*n+2],l=e[3*r],c=e[3*r+1],h=e[3*r+2],d=e[3*i],A=e[3*i+1],f=e[3*i+2],p=e[3*o],g=e[3*o+1],v=e[3*o+2];return Math.abs(s-c)<Math.abs(a-l)?[new R(a,1-u),new R(l,1-h),new R(d,1-f),new R(p,1-v)]:[new R(s,1-u),new R(c,1-h),new R(A,1-f),new R(g,1-v)]}},ba=function(t){A(n,t);var e=p(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;b(this,n),(r=e.call(this)).type="ShapeGeometry",r.parameters={shapes:t,curveSegments:i};var o=[],a=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(t))d(t);else for(var h=0;h<t.length;h++)d(t[h]),r.addGroup(l,c,h),l+=c,c=0;function d(t){var e=a.length/3,n=t.extractPoints(i),r=n.shape,l=n.holes;!1===pa.isClockWise(r)&&(r=r.reverse());for(var h=0,d=l.length;h<d;h++){var A=l[h];!0===pa.isClockWise(A)&&(l[h]=A.reverse())}for(var f=pa.triangulateShape(r,l),p=0,g=l.length;p<g;p++){var v=l[p];r=r.concat(v)}for(var m=0,y=r.length;m<y;m++){var b=r[m];a.push(b.x,b.y,0),s.push(0,0,1),u.push(b.x,b.y)}for(var w=0,x=f.length;w<x;w++){var _=f[w],T=_[0]+e,E=_[1]+e,S=_[2]+e;o.push(T,E,S),c+=3}}return r.setIndex(o),r.setAttribute("position",new Te(a,3)),r.setAttribute("normal",new Te(s,3)),r.setAttribute("uv",new Te(u,2)),r}return x(n,[{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}],[{key:"fromJSON",value:function(t,e){for(var r=[],i=0,o=t.shapes.length;i<o;i++){var a=e[t.shapes[i]];r.push(a)}return new n(r,t.curveSegments)}}]),n}(Pe);(function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="ShadowMaterial",r.color=new ge(0),r.transparent=!0,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this}}]),n})(le).prototype.isShadowMaterial=!0,function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t)).type="RawShaderMaterial",r}return n}(rn).prototype.isRawShaderMaterial=!0;var wa=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new ge(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ge(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new R(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.vertexTangents=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this}}]),n}(le);wa.prototype.isMeshStandardMaterial=!0,function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoat=0,r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new R(1,1),r.clearcoatNormalMap=null,r.reflectivity=.5,Object.defineProperty(v(r),"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=k(2.5*(t-1)/(t+1),0,1)}}),r.sheen=null,r.transmission=0,r.transmissionMap=null,r.thickness=.01,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new ge(1,1,1),r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new ge).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this}}]),n}(wa).prototype.isMeshPhysicalMaterial=!0;var xa=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="MeshPhongMaterial",r.color=new ge(16777215),r.specular=new ge(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ge(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new R(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}]),n}(le);xa.prototype.isMeshPhongMaterial=!0,function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new ge(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ge(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new R(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}]),n}(le).prototype.isMeshToonMaterial=!0,function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new R(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}]),n}(le).prototype.isMeshNormalMaterial=!0,function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="MeshLambertMaterial",r.color=new ge(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ge(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.morphTargets=!1,r.morphNormals=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}]),n}(le).prototype.isMeshLambertMaterial=!0,function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new ge(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new R(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.morphTargets=!1,r.morphNormals=!1,r.flatShading=!1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}]),n}(le).prototype.isMeshMatcapMaterial=!0,function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(t),r}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}]),n}(uo).prototype.isLineDashedMaterial=!0;var _a={arraySlice:function(t,e,n){return _a.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}},subclip:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,o=t.clone();o.name=e;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],l=u.getValueSize(),c=[],h=[],d=0;d<u.times.length;++d){var A=u.times[d]*i;if(!(A<n||A>=r)){c.push(u.times[d]);for(var f=0;f<l;++f)h.push(u.values[d*l+f])}}0!==c.length&&(u.times=_a.convertArray(c,u.times.constructor),u.values=_a.convertArray(h,u.values.constructor),a.push(u))}o.tracks=a;for(var p=1/0,g=0;g<o.tracks.length;++g)p>o.tracks[g].times[0]&&(p=o.tracks[g].times[0]);for(var v=0;v<o.tracks.length;++v)o.tracks[v].shift(-1*p);return o.resetDuration(),o},makeClipAdditive:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,o=e/r,a=function(e){var r=n.tracks[e],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var a=t.tracks.find((function(t){return t.name===r.name&&t.ValueTypeName===i}));if(void 0===a)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h=r.times.length-1,d=void 0;if(o<=r.times[0]){var A=s,f=u-s;d=_a.arraySlice(r.values,A,f)}else if(o>=r.times[h]){var p=h*u+s,g=p+u-s;d=_a.arraySlice(r.values,p,g)}else{var v=r.createInterpolant(),m=s,y=u-s;v.evaluate(o),d=_a.arraySlice(v.resultBuffer,m,y)}"quaternion"===i&&(new Y).fromArray(d).normalize().conjugate().toArray(d);for(var b=a.times.length,w=0;w<b;++w){var x=w*c+l;if("quaternion"===i)Y.multiplyQuaternionsFlat(a.values,x,d,0,a.values,x);else for(var _=c-2*l,T=0;T<_;++T)a.values[x+T]-=d[T]}},s=0;s<i;++s)a(s);return t.blendMode=2501,t}},Ta=function(){function t(e,n,r,i){b(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return x(t,[{key:"evaluate",value:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,t<(r=e[++n]))break e}o=e.length;break n}if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===u)break;if(r=i,t>=(i=e[--n-1]))break e}o=n,n=0}for(;n<o;){var l=n+o>>>1;t<e[l]?o=l:n=l+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),t}();Ta.prototype.beforeStart_=Ta.prototype.copySampleValue_,Ta.prototype.afterEnd_=Ta.prototype.copySampleValue_;var Ea=function(t){A(n,t);var e=p(n);function n(t,r,i,o){var a;return b(this,n),(a=e.call(this,t,r,i,o))._weightPrev=-0,a._offsetPrev=-0,a._weightNext=-0,a._offsetNext=-0,a.DefaultSettings_={endingStart:2400,endingEnd:2400},a}return x(n,[{key:"intervalChanged_",value:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=t,a=2*e-n;break;case 2402:a=e+r[i=r.length-2]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l}},{key:"interpolate_",value:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,A=(n-e)/(r-e),f=A*A,p=f*A,g=-h*p+2*h*f-h*A,v=(1+h)*p+(-1.5-2*h)*f+(-.5+h)*A+1,m=(-1-d)*p+(1.5+d)*f+.5*A,y=d*p-d*f,b=0;b!==a;++b)i[b]=g*o[l+b]+v*o[u+b]+m*o[s+b]+y*o[c+b];return i}}]),n}(Ta),Sa=function(t){A(n,t);var e=p(n);function n(t,r,i,o){return b(this,n),e.call(this,t,r,i,o)}return x(n,[{key:"interpolate_",value:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=(n-e)/(r-e),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}]),n}(Ta),Ma=function(t){A(n,t);var e=p(n);function n(t,r,i,o){return b(this,n),e.call(this,t,r,i,o)}return x(n,[{key:"interpolate_",value:function(t){return this.copySampleValue_(t-1)}}]),n}(Ta),Ca=function(){function t(e,n,r,i){if(b(this,t),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_a.convertArray(n,this.TimeBufferType),this.values=_a.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return x(t,[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new Ma(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new Sa(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new Ea(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this}},{key:"trim",value:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=_a.arraySlice(n,i,o),this.values=_a.arraySlice(this.values,i*a,o*a)}return this}},{key:"validate",value:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&_a.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=_a.arraySlice(this.times),e=_a.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=t.length-1,o=1,a=1;a<i;++a){var s=!1,u=t[a];if(u!==t[a+1]&&(1!==a||u!==t[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,d=0;d!==n;++d){var A=e[l+d];if(A!==e[c+d]||A!==e[h+d]){s=!0;break}}if(s){if(a!==o){t[o]=t[a];for(var f=a*n,p=o*n,g=0;g!==n;++g)e[p+g]=e[f+g]}++o}}if(i>0){t[o]=t[i];for(var v=i*n,m=o*n,y=0;y!==n;++y)e[m+y]=e[v+y];++o}return o!==t.length?(this.times=_a.arraySlice(t,0,o),this.values=_a.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this}},{key:"clone",value:function(){var t=_a.arraySlice(this.times,0),e=_a.arraySlice(this.values,0),n=new this.constructor(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(t){var e,n=t.constructor;if(n.toJSON!==this.toJSON)e=n.toJSON(t);else{e={name:t.name,times:_a.convertArray(t.times,Array),values:_a.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}]),t}();Ca.prototype.TimeBufferType=Float32Array,Ca.prototype.ValueBufferType=Float32Array,Ca.prototype.DefaultInterpolation=2301;var Ia=function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return n}(Ca);Ia.prototype.ValueTypeName="bool",Ia.prototype.ValueBufferType=Array,Ia.prototype.DefaultInterpolation=2300,Ia.prototype.InterpolantFactoryMethodLinear=void 0,Ia.prototype.InterpolantFactoryMethodSmooth=void 0;var Na=function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return n}(Ca);Na.prototype.ValueTypeName="color";var Ba=function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return n}(Ca);Ba.prototype.ValueTypeName="number";var ka=function(t){A(n,t);var e=p(n);function n(t,r,i,o){return b(this,n),e.call(this,t,r,i,o)}return x(n,[{key:"interpolate_",value:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e),u=t*a,l=u+a;u!==l;u+=4)Y.slerpFlat(i,0,o,u-a,o,u,s);return i}}]),n}(Ta),Pa=function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return x(n,[{key:"InterpolantFactoryMethodLinear",value:function(t){return new ka(this.times,this.values,this.getValueSize(),t)}}]),n}(Ca);Pa.prototype.ValueTypeName="quaternion",Pa.prototype.DefaultInterpolation=2301,Pa.prototype.InterpolantFactoryMethodSmooth=void 0;var Da=function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return n}(Ca);Da.prototype.ValueTypeName="string",Da.prototype.ValueBufferType=Array,Da.prototype.DefaultInterpolation=2300,Da.prototype.InterpolantFactoryMethodLinear=void 0,Da.prototype.InterpolantFactoryMethodSmooth=void 0;var La=function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return n}(Ca);La.prototype.ValueTypeName="vector";var Oa=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;b(this,t),this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=B(),this.duration<0&&this.resetDuration()}return x(t,[{key:"resetDuration",value:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}},{key:"optimize",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},{key:"clone",value:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(Ra(n[i]).scale(r));var a=new this(t.name,t.duration,e,t.blendMode);return a.uuid=t.uuid,a}},{key:"toJSON",value:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},i=0,o=n.length;i!==o;++i)e.push(Ca.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=_a.getKeyframeOrder(s);s=_a.sortedArray(s,1,l),u=_a.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new Ba(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new this(t,-1,o)}},{key:"findByName",value:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var h=[];for(var d in r)h.push(this.CreateFromMorphTargetSequence(d,r[d],e,n));return h}},{key:"parseAnimation",value:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];_a.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.fps||30,a=t.blendMode,s=t.length||-1,u=t.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var A=0;A<c[d].morphTargets.length;A++)h[c[d].morphTargets[A]]=-1;for(var f in h){for(var p=[],g=[],v=0;v!==c[d].morphTargets.length;++v){var m=c[d];p.push(m.time),g.push(m.morphTarget===f?1:0)}r.push(new Ba(".morphTargetInfluence["+f+"]",p,g))}s=h.length*(o||1)}else{var y=".bones["+e[l].name+"]";n(La,y+".position",c,"pos",r),n(Pa,y+".quaternion",c,"rot",r),n(La,y+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,a)}}]),t}();function Ra(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ba;case"vector":case"vector2":case"vector3":case"vector4":return La;case"color":return Na;case"quaternion":return Pa;case"bool":case"boolean":return Ia;case"string":return Da}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],r=[];_a.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}var Fa={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Ua=new function t(e,n,r){b(this,t);var i,o=this,a=!1,s=0,u=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(t){u++,!1===a&&void 0!==o.onStart&&o.onStart(t,s,u),a=!0},this.itemEnd=function(t){s++,void 0!==o.onProgress&&o.onProgress(t,s,u),s===u&&(a=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(t){void 0!==o.onError&&o.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){var e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=l.length;e<n;e+=2){var r=l[e],i=l[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}},ja=function(){function t(e){b(this,t),this.manager=void 0!==e?e:Ua,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return x(t,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,e){var n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}]),t}(),za={},Ha=function(t){A(n,t);var e=p(n);function n(t){return b(this,n),e.call(this,t)}return x(n,[{key:"load",value:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Fa.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0===za[t]){var a,s=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],l=!!s[2],c=s[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var A=new Uint8Array(c.length),f=0;f<c.length;f++)A[f]=c.charCodeAt(f);h="blob"===d?new Blob([A.buffer],{type:u}):A.buffer;break;case"document":h=(new DOMParser).parseFromString(c,u);break;case"json":h=JSON.parse(c);break;default:h=c}setTimeout((function(){e&&e(h),i.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{for(var p in za[t]=[],za[t].push({onLoad:e,onProgress:n,onError:r}),(a=new XMLHttpRequest).open("GET",t,!0),a.addEventListener("load",(function(e){var n=this.response,r=za[t];if(delete za[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Fa.add(t,n);for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(var u=0,l=r.length;u<l;u++){var c=r[u];c.onError&&c.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),a.addEventListener("progress",(function(e){for(var n=za[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}}),!1),a.addEventListener("error",(function(e){var n=za[t];delete za[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),a.addEventListener("abort",(function(e){var n=za[t];delete za[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)a.setRequestHeader(p,this.requestHeader[p]);a.send(null)}return i.manager.itemStart(t),a}za[t].push({onLoad:e,onProgress:n,onError:r})}},{key:"setResponseType",value:function(t){return this.responseType=t,this}},{key:"setMimeType",value:function(t){return this.mimeType=t,this}}]),n}(ja),Qa=function(t){A(n,t);var e=p(n);function n(t){return b(this,n),e.call(this,t)}return x(n,[{key:"load",value:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Fa.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Fa.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}]),n}(ja),Ga=function(t){A(n,t);var e=p(n);function n(t){return b(this,n),e.call(this,t)}return x(n,[{key:"load",value:function(t,e,n,r){var i=new un,o=new Qa(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,6===++a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(var u=0;u<t.length;++u)s(u);return i}}]),n}(ja),Va=function(t){A(n,t);var e=p(n);function n(t){return b(this,n),e.call(this,t)}return x(n,[{key:"load",value:function(t,e,n,r){var i=new H,o=new Qa(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;var r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?1022:1023,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}]),n}(ja),Wa=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this)).type="CurvePath",t.curves=[],t.autoClose=!1,t}return x(n,[{key:"add",value:function(t){this.curves.push(t)}},{key:"closePath",value:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new jo(e,t))}},{key:"getPoint",value:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null}},{key:"getLength",value:function(){var t=this.getCurveLengths();return t[t.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}},{key:"getPoints",value:function(){for(var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(t){d(y(n.prototype),"copy",this).call(this,t),this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,r=this.curves.length;e<r;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t}},{key:"fromJSON",value:function(t){d(y(n.prototype),"fromJSON",this).call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var i=t.curves[e];this.curves.push((new Go[i.type]).fromJSON(i))}return this}}]),n}(So),Ya=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="Path",r.currentPoint=new R,t&&r.setFromPoints(t),r}return x(n,[{key:"setFromPoints",value:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}},{key:"moveTo",value:function(t,e){return this.currentPoint.set(t,e),this}},{key:"lineTo",value:function(t,e){var n=new jo(this.currentPoint.clone(),new R(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,r){var i=new zo(this.currentPoint.clone(),new R(t,e),new R(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(t,e,n,r,i,o){var a=new Fo(this.currentPoint.clone(),new R(t,e),new R(n,r),new R(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}},{key:"splineThru",value:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Qo(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}},{key:"arc",value:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this}},{key:"absarc",value:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this}},{key:"ellipse",value:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+u,e+l,n,r,i,o,a,s),this}},{key:"absellipse",value:function(t,e,n,r,i,o,a,s){var u=new Mo(t,e,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.currentPoint.copy(t.currentPoint),this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return t.currentPoint=this.currentPoint.toArray(),t}},{key:"fromJSON",value:function(t){return d(y(n.prototype),"fromJSON",this).call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}]),n}(Wa),Xa=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t)).uuid=B(),r.type="Shape",r.holes=[],r}return x(n,[{key:"getPointsHoles",value:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}},{key:"extractPoints",value:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}},{key:"copy",value:function(t){d(y(n.prototype),"copy",this).call(this,t),this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var i=t.holes[e];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,r=this.holes.length;e<r;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t}},{key:"fromJSON",value:function(t){d(y(n.prototype),"fromJSON",this).call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var i=t.holes[e];this.holes.push((new Ya).fromJSON(i))}return this}}]),n}(Ya),qa=function(t){A(n,t);var e=p(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return b(this,n),(r=e.call(this)).type="Light",r.color=new ge(t),r.intensity=i,r}return x(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this}},{key:"toJSON",value:function(t){var e=d(y(n.prototype),"toJSON",this).call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}]),n}(Kt);qa.prototype.isLight=!0,function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,i)).type="HemisphereLight",o.position.copy(Kt.DefaultUp),o.updateMatrix(),o.groundColor=new ge(r),o}return x(n,[{key:"copy",value:function(t){return qa.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}]),n}(qa).prototype.isHemisphereLight=!0;var Ka=new Et,Za=new X,Ja=new X,$a=function(){function t(e){b(this,t),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new R(512,512),this.map=null,this.mapPass=null,this.matrix=new Et,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gn,this._frameExtents=new R(1,1),this._viewportCount=1,this._viewports=[new G(0,0,1,1)]}return x(t,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var e=this.camera,n=this.matrix;Za.setFromMatrixPosition(t.matrixWorld),e.position.copy(Za),Ja.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Ja),e.updateMatrixWorld(),Ka.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ka),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}]),t}(),ts=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this,new an(50,1,.5,500))).focus=1,t}return x(n,[{key:"updateMatrices",value:function(t){var e=this.camera,r=2*N*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;r===e.fov&&i===e.aspect&&o===e.far||(e.fov=r,e.aspect=i,e.far=o,e.updateProjectionMatrix()),d(y(n.prototype),"updateMatrices",this).call(this,t)}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.focus=t.focus,this}}]),n}($a);ts.prototype.isSpotLightShadow=!0;var es=function(t){A(n,t);var e=p(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return b(this,n),(i=e.call(this,t,r)).type="SpotLight",i.position.copy(Kt.DefaultUp),i.updateMatrix(),i.target=new Kt,i.distance=o,i.angle=a,i.penumbra=s,i.decay=u,i.shadow=new ts,i}return x(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},{key:"power",get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}]),n}(qa);es.prototype.isSpotLight=!0;var ns=new Et,rs=new X,is=new X,os=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this,new an(90,1,.5,500)))._frameExtents=new R(4,2),t._viewportCount=6,t._viewports=[new G(2,1,1,1),new G(0,1,1,1),new G(3,1,1,1),new G(1,1,1,1),new G(3,0,1,1),new G(1,0,1,1)],t._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],t._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)],t}return x(n,[{key:"updateMatrices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),rs.setFromMatrixPosition(t.matrixWorld),n.position.copy(rs),is.copy(n.position),is.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(is),n.updateMatrixWorld(),r.makeTranslation(-rs.x,-rs.y,-rs.z),ns.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ns)}}]),n}($a);os.prototype.isPointLightShadow=!0;var as=function(t){A(n,t);var e=p(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return b(this,n),(i=e.call(this,t,r)).type="PointLight",i.distance=o,i.decay=a,i.shadow=new os,i}return x(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}]),n}(qa);as.prototype.isPointLight=!0;var ss=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return b(this,n),(t=e.call(this)).type="OrthographicCamera",t.zoom=1,t.view=null,t.left=r,t.right=i,t.top=o,t.bottom=a,t.near=s,t.far=u,t.updateProjectionMatrix(),t}return x(n,[{key:"copy",value:function(t,e){return d(y(n.prototype),"copy",this).call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}},{key:"setViewOffset",value:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=u*this.view.offsetX)+u*this.view.width,s=(a-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var e=d(y(n.prototype),"toJSON",this).call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}]),n}(on);ss.prototype.isOrthographicCamera=!0;var us=function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.call(this,new ss(-5,5,5,-5,.5,500))}return n}($a);us.prototype.isDirectionalLightShadow=!0,function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),(i=e.call(this,t,r)).type="DirectionalLight",i.position.copy(Kt.DefaultUp),i.updateMatrix(),i.target=new Kt,i.shadow=new us,i}return x(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),n}(qa).prototype.isDirectionalLight=!0,function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),(i=e.call(this,t,r)).type="AmbientLight",i}return n}(qa).prototype.isAmbientLight=!0;var ls=function(t){A(n,t);var e=p(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return b(this,n),(i=e.call(this,t,r)).type="RectAreaLight",i.width=o,i.height=a,i}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.width=t.width,this.height=t.height,this}},{key:"toJSON",value:function(t){var e=d(y(n.prototype),"toJSON",this).call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}]),n}(qa);ls.prototype.isRectAreaLight=!0;var cs=function(){function t(){b(this,t),this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new X)}return x(t,[{key:"set",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}},{key:"zero",value:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}},{key:"getAt",value:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}},{key:"getIrradianceAt",value:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}},{key:"add",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}},{key:"addScaledSH",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}},{key:"scale",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}},{key:"lerp",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}},{key:"equals",value:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}},{key:"copy",value:function(t){return this.set(t.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}}],[{key:"getBasisAt",value:function(t,e){var n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}]),t}();cs.prototype.isSphericalHarmonics3=!0;var hs=function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cs,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return b(this,n),(t=e.call(this,void 0,i)).sh=r,t}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.sh.copy(t.sh),this}},{key:"fromJSON",value:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}},{key:"toJSON",value:function(t){var e=d(y(n.prototype),"toJSON",this).call(this,t);return e.object.sh=this.sh.toArray(),e}}]),n}(qa);hs.prototype.isLightProbe=!0;var ds=function(){function t(){b(this,t)}return x(t,null,[{key:"decodeText",value:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}},{key:"extractUrlBase",value:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}}]),t}();(function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this)).type="InstancedBufferGeometry",t.instanceCount=1/0,t}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.instanceCount=t.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this,this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}]),n})(Pe).prototype.isInstancedBufferGeometry=!0;var As,fs=function(t){A(n,t);var e=p(n);function n(t,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return b(this,n),"number"==typeof i&&(a=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(o=e.call(this,t,r,i)).meshPerAttribute=a,o}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"toJSON",value:function(){var t=d(y(n.prototype),"toJSON",this).call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}]),n}(be);fs.prototype.isInstancedBufferAttribute=!0,function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),r=e.call(this,t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return x(n,[{key:"setOptions",value:function(t){return this.options=t,this}},{key:"load",value:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Fa.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;var a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Fa.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}]),n}(ja).prototype.isImageBitmapLoader=!0;var ps=function(t){A(n,t);var e=p(n);function n(t){return b(this,n),e.call(this,t)}return x(n,[{key:"load",value:function(t,e,n,r){var i=this,o=new Ha(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{var o=n.slice(0);(void 0===As&&(As=new(window.AudioContext||window.webkitAudioContext)),As).decodeAudioData(o,(function(t){e(t)}))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)}}]),n}(ja);(function(t){A(n,t);var e=p(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;b(this,n),i=e.call(this,void 0,o);var a=(new ge).set(t),s=(new ge).set(r),u=new X(a.r,a.g,a.b),l=new X(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);return i.sh.coefficients[0].copy(u).add(l).multiplyScalar(c),i.sh.coefficients[1].copy(u).sub(l).multiplyScalar(h),i}return n})(hs).prototype.isHemisphereLightProbe=!0,function(t){A(n,t);var e=p(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;b(this,n),r=e.call(this,void 0,i);var o=(new ge).set(t);return r.sh.coefficients[0].set(o.r,o.g,o.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return n}(hs).prototype.isAmbientLightProbe=!0;var gs=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).type="Audio",r.listener=t,r.context=t.context,r.gain=r.context.createGain(),r.gain.connect(t.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return x(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}},{key:"setMediaElementSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}},{key:"setMediaStreamSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}},{key:"setBuffer",value:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}},{key:"setDetune",value:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(t){return this.setFilters(t?[t]:[])}},{key:"setPlaybackRate",value:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(t){return this.loopStart=t,this}},{key:"setLoopEnd",value:function(t){return this.loopEnd=t,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}]),n}(Kt),vs=function(){function t(e,n,r){var i,o,a;switch(b(this,t),this.binding=e,this.valueSize=r,n){case"quaternion":i=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return x(t,[{key:"accumulate",value:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{var s=e/(o+=e);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o}},{key:"accumulateAdditive",value:function(t){var e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}},{key:"apply",value:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=e*this._origIndex;this._mixBufferRegion(n,r,s,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(var u=e,l=e+e;u!==l;++u)if(n[u]!==n[u+e]){a.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}},{key:"_select",value:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]}},{key:"_slerp",value:function(t,e,n,r){Y.slerpFlat(t,e,t,e,t,n,r)}},{key:"_slerpAdditive",value:function(t,e,n,r,i){var o=this._workIndex*i;Y.multiplyQuaternionsFlat(t,o,t,e,t,n),Y.slerpFlat(t,e,t,e,t,o,r)}},{key:"_lerp",value:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}},{key:"_lerpAdditive",value:function(t,e,n,r,i){for(var o=0;o!==i;++o){var a=e+o;t[a]=t[a]+t[n+o]*r}}}]),t}(),ms=new RegExp("[\\[\\]\\.:\\/]","g"),ys="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",bs=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),ws=/(WCOD+)?/.source.replace("WCOD",ys),xs=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),_s=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Ts=new RegExp("^"+bs+ws+xs+_s+"$"),Es=["material","materials","bones"],Ss=function(){function t(e,n,r){b(this,t),this.path=n,this.parsedPath=r||t.parseTrackName(n),this.node=t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return x(t,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(t,e){t[e]=this.node[this.propertyName]}},{key:"_getValue_array",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]}},{key:"_getValue_arrayElement",value:function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(t,e){this.resolvedProperty.toArray(t,e)}},{key:"_setValue_direct",value:function(t,e){this.targetObject[this.propertyName]=t[e]}},{key:"_setValue_direct_setNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]}},{key:"_setValue_array_setNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(t,e){this.resolvedProperty.fromArray(t,e)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(t,e){this.bind(),this.getValue(t,e)}},{key:"_setValue_unbound",value:function(t,e){this.bind(),this.setValue(t,e)}},{key:"bind",value:function(){var e=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,o=n.propertyIndex;if(e||(e=t.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var a=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var u=e[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(e,n,r){return e&&e.isAnimationObjectGroup?new t.Composite(e,n,r):new t(e,n,r)}},{key:"sanitizeNodeName",value:function(t){return t.replace(/\s/g,"_").replace(ms,"")}},{key:"parseTrackName",value:function(t){var e=Ts.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Es.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}},{key:"findNode",value:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function t(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===e||i.uuid===e)return i;var o=t(i.children);if(o)return o}return null}(t.children);if(r)return r}return null}}]),t}();Ss.Composite=function(){function t(e,n,r){b(this,t);var i=r||Ss.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}return x(t,[{key:"getValue",value:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}},{key:"setValue",value:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}},{key:"bind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}]),t}(),Ss.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ss.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ss.prototype.GetterByBindingType=[Ss.prototype._getValue_direct,Ss.prototype._getValue_array,Ss.prototype._getValue_arrayElement,Ss.prototype._getValue_toArray],Ss.prototype.SetterByBindingTypeAndVersioning=[[Ss.prototype._setValue_direct,Ss.prototype._setValue_direct_setNeedsUpdate,Ss.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ss.prototype._setValue_array,Ss.prototype._setValue_array_setNeedsUpdate,Ss.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ss.prototype._setValue_arrayElement,Ss.prototype._setValue_arrayElement_setNeedsUpdate,Ss.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ss.prototype._setValue_fromArray,Ss.prototype._setValue_fromArray_setNeedsUpdate,Ss.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Ms=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;b(this,t),this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;for(var o=n.tracks,a=o.length,s=new Array(a),u={endingStart:2400,endingEnd:2400},l=0;l!==a;++l){var c=o[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return x(t,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(t){return this._startTime=t,this}},{key:"setLoop",value:function(t,e){return this.loop=t,this.repetitions=e,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this}},{key:"crossFadeTo",value:function(t,e,n){return t.crossFadeFrom(this,e,n)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,e,n){var r=this._mixer,i=r.time,o=this.timeScale,a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/o,u[1]=e/o,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulateAdditive(s);else for(var d=0,A=u.length;d!==A;++d)u[d].evaluate(a),l[d].accumulate(r,s)}}else this._updateWeight(t)}},{key:"_updateWeight",value:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}},{key:"_updateTimeScale",value:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}},{key:"_updateTime",value:function(t){var e=this._clip.duration,n=this.loop,r=this.time+t,i=this._loopCount,o=2202===n;if(0===t)return-1===i?r:o&&1==(1&i)?e-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){var a=Math.floor(r/e);r-=e*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&i))return e-r}return r}},{key:"_setEndings",value:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)}},{key:"_scheduleFading",value:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}]),t}();(function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this))._root=t,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return x(n,[{key:"_bindAction",value:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],d=h.name,A=l[d];if(void 0!==A)o[c]=A;else{if(void 0!==(A=o[c])){null===A._cacheIndex&&(++A.referenceCount,this._addInactiveBinding(A,s,d));continue}var f=e&&e._propertyBindings[c].binding.parsedPath;++(A=new vs(Ss.create(n,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(A,s,d),o[c]=A}a[c].resultBuffer=A.buffer}}},{key:"_activateAction",value:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}},{key:"_deactivateAction",value:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions}},{key:"_addInactiveAction",value:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}},{key:"_removeInactiveAction",value:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)}},{key:"_removeInactiveBindingsForAction",value:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_takeBackAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_addInactiveBinding",value:function(t,e,n){var r=this._bindingsByRootAndName,i=this._bindings,o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)}},{key:"_removeInactiveBinding",value:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}},{key:"_lendBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_takeBackBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}},{key:"_lendControlInterpolant",value:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Sa(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n}},{key:"_takeBackControlInterpolant",value:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}},{key:"clipAction",value:function(t,e,n){var r=e||this._root,i=r.uuid,o="string"==typeof t?Oa.findByName(r,t):t,a=null!==o?o.uuid:t,s=this._actionsByClip[a],u=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;var c=new Ms(this,o,e,n);return this._bindAction(c,u),this._addInactiveAction(c,a,i),c}},{key:"existingAction",value:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?Oa.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var t=this._actions,e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}},{key:"update",value:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a)e[a]._update(r,t,i,o);for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(o);return this}},{key:"setTime",value:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n})(w).prototype._controlInterpolantsResultBuffer=new Float32Array(1),function(t){A(n,t);var e=p(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return b(this,n),(i=e.call(this,t,r)).meshPerAttribute=o,i}return x(n,[{key:"copy",value:function(t){return d(y(n.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"clone",value:function(t){var e=d(y(n.prototype),"clone",this).call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e}},{key:"toJSON",value:function(t){var e=d(y(n.prototype),"toJSON",this).call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}]),n}(Pi).prototype.isInstancedInterleavedBuffer=!0,new R,new X,new X,function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this)).material=t,r.render=function(){},r.hasPositions=!1,r.hasNormals=!1,r.hasColors=!1,r.hasUvs=!1,r.positionArray=null,r.normalArray=null,r.colorArray=null,r.uvArray=null,r.count=0,r}return n}(Kt).prototype.isImmediateRenderObject=!0;var Cs=new X,Is=new Et,Ns=new Et,Bs=new Float32Array(1);new Int32Array(Bs.buffer);var ks=[.125,.215,.35,.446,.526,.582],Ps=5+ks.length,Ds=new ve({side:1,depthWrite:!1,depthTest:!1});new Ze(new $e,Ds),function(){for(var t=[],e=[],n=[],r=8,i=0;i<Ps;i++){var o=Math.pow(2,r);e.push(o);var a=1/o;i>4?a=ks[i-8+4-1]:0==i&&(a=0),n.push(a);for(var s=1/(o-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],h=new Float32Array(108),d=new Float32Array(72),A=new Float32Array(36),f=0;f<6;f++){var p=f%3*2/3-1,g=f>2?0:-1,v=[p,g,0,p+2/3,g,0,p+2/3,g+1,0,p,g,0,p+2/3,g+1,0,p,g+1,0];h.set(v,18*f),d.set(c,12*f);var m=[f,f,f,f,f,f];A.set(m,6*f)}var y=new Pe;y.setAttribute("position",new be(h,3)),y.setAttribute("uv",new be(d,2)),y.setAttribute("faceIndex",new be(A,1)),t.push(y),r>4&&r--}}(),So.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(So.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Ya.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},function(t){A(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;b(this,n),o=new ge(o),a=new ge(a);for(var s=i/2,u=r/i,l=r/2,c=[],h=[],d=0,A=0,f=-l;d<=i;d++,f+=u){c.push(-l,0,f,l,0,f),c.push(f,0,-l,f,0,l);var p=d===s?o:a;p.toArray(h,A),A+=3,p.toArray(h,A),A+=3,p.toArray(h,A),A+=3,p.toArray(h,A),A+=3}var g=new Pe;return g.setAttribute("position",new Te(c,3)),g.setAttribute("color",new Te(h,3)),(t=e.call(this,g,new uo({vertexColors:!0,toneMapped:!1}))).type="GridHelper",t}return n}(mo).prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},function(t){A(n,t);var e=p(n);function n(t){var r;b(this,n);for(var i=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),o=new Pe,a=[],s=[],u=new ge(0,0,1),l=new ge(0,1,0),c=0;c<i.length;c++){var h=i[c];h.parent&&h.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}return o.setAttribute("position",new Te(a,3)),o.setAttribute("color",new Te(s,3)),(r=e.call(this,o,new uo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}))).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=t,r.bones=i,r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r}return x(n,[{key:"updateMatrixWorld",value:function(t){var e=this.bones,r=this.geometry,i=r.getAttribute("position");Ns.copy(this.root.matrixWorld).invert();for(var o=0,a=0;o<e.length;o++){var s=e[o];s.parent&&s.parent.isBone&&(Is.multiplyMatrices(Ns,s.matrixWorld),Cs.setFromMatrixPosition(Is),i.setXYZ(a,Cs.x,Cs.y,Cs.z),Is.multiplyMatrices(Ns,s.parent.matrixWorld),Cs.setFromMatrixPosition(Is),i.setXYZ(a+1,Cs.x,Cs.y,Cs.z),a+=2)}r.getAttribute("position").needsUpdate=!0,d(y(n.prototype),"updateMatrixWorld",this).call(this,t)}}]),n}(mo).prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ja.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ds.extractUrlBase(t)},ja.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Z.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Z.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Z.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Z.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Z.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},gt.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},gn.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},U.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},U.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},U.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},U.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},U.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},U.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Et.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},Et.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Et.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new X).setFromMatrixColumn(this,3)},Et.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},Et.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Et.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Et.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Et.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Et.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},Et.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Et.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Et.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Et.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Et.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Et.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Et.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Et.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Et.prototype.makeFrustum=function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)},Et.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},An.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Y.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Y.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Tt.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Tt.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},Tt.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},se.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},se.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},se.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},se.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},se.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},se.barycoordFromPoint=function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),se.getBarycoord(t,e,n,r,i)},se.normal=function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),se.getNormal(t,e,n,r)},Xa.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},Xa.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ma(this,t)},Xa.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ba(this,t)},R.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},R.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},R.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},X.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},X.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},X.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},X.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},X.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},X.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},X.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},X.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},X.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},G.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},G.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Kt.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Kt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Kt.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Kt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Kt.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Kt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Ze.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Ze.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),no.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},an.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(qa.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(be.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),be.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},be.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},be.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Pe.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},Pe.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new be(arguments[1],arguments[2])))},Pe.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},Pe.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Pe.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Pe.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},Pe.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Pe.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Pi.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},Pi.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ma.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ma.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ma.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},ki.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(le.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ge}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(rn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Bi.prototype.clearTarget=function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},Bi.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},Bi.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Bi.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Bi.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Bi.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Bi.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Bi.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Bi.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Bi.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Bi.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Bi.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Bi.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Bi.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Bi.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},Bi.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Bi.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Bi.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Bi.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Bi.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Bi.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Bi.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Bi.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Bi.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Bi.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Bi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(wi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(V.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),gs.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new ps).load(t,(function(t){e.setBuffer(t)})),this},sn.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},sn.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)},j.crossOrigin=void 0,j.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Va;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},j.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ga;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},j.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},j.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"130"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="130");var Ls=n(6),Os=n.n(Ls),Rs=n(33),Fs=n.n(Rs),Us=n(11),js=n.n(Us),zs=function(){function t(){b(this,t),this.camera=new ss(10,10,10,10),this.camera.position.z=100,this.camera.position.x=0,this.camera.position.y=0}return x(t,[{key:"focus",value:function(t,e){t.position.z=50}},{key:"updateAspect",value:function(t,e){this.camera.left=-1*t/2,this.camera.right=t/2,this.camera.top=e/2,this.camera.bottom=-1*e/2,this.camera.updateProjectionMatrix()}}]),t}(),Hs={linear:function(t,e,n,r){return n*t/r+e},easeIn:function(t,e,n,r){return n*(t/=r)*t+e},strongEaseIn:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},strongEaseOut:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},sineaseIn:function(t,e,n,r){return n*(t/=r)*t*t+e},sineaseOut:function(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}},Qs=new H,Gs=function(){function t(){b(this,t),this.camera=new zs,this.mesh=new Ze,this.material=null,this.geometry=null}return x(t,[{key:"applyOptions",value:function(t){}},{key:"addObjects",value:function(t){this.mesh.position.z=50,t.add(this.mesh)}},{key:"setSize",value:function(t,e){this.camera.updateAspect(t,e),this.geometry=new yn(t,e,1,1),this.material=new rn({fragmentShader:this.fragmentShader,vertexShader:"\nvarying vec2 vUv;\nvoid main(){\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"}),this.material.uniforms={width:{value:t},height:{value:e},timePercent:{value:0},texturePrev:{value:Qs},textureNext:{value:Qs}},this.applyOptions(this.options),this.mesh.geometry=this.geometry,this.mesh.material=this.material}},{key:"setPrevTexture",value:function(t){this.material.uniforms.texturePrev.value=t}},{key:"setNextTexture",value:function(t){this.material.uniforms.textureNext.value=t}},{key:"updateAnimation",value:function(t){this.material.uniforms.timePercent.value=t}},{key:"dispose",value:function(){var t,e;null===(t=this.geometry)||void 0===t||t.dispose(),null===(e=this.material)||void 0===e||e.dispose()}}]),t}(),Vs=n(70),Ws=n.n(Vs),Ys=n(71),Xs=n.n(Ys),qs=n(72),Ks=n.n(qs),Zs=n(73),Js=n.n(Zs),$s=n(74),tu=n.n($s),eu=n(75),nu=n.n(eu),ru=n(76),iu=n.n(ru),ou=n(77),au=n.n(ou),su=n(78),uu=n.n(su),lu=n(79),cu=n.n(lu),hu=n(80),du=n.n(hu),Au=n(81),fu=n.n(Au),pu=n(82),gu=n.n(pu),vu=n(83),mu=n.n(vu),yu=function(){function t(){b(this,t),this.camera=new an(60,1,1,2e3),this.camera.position.z=1e3,this.camera.position.x=0,this.camera.position.y=0}return x(t,[{key:"updateAspect",value:function(t,e){this.camera.aspect=t/e,this.camera.updateProjectionMatrix()}},{key:"focus",value:function(t,e){var n=.5*e/Math.tan(Math.PI/6);t.position.z=1e3-n}}]),t}(),bu=function(){function t(){b(this,t),this.prevTexture=Qs,this.nextTexture=Qs,this.geometry=new Pe,this.material=null,this.camera=new yu,this.mesh=new Ze,this.textureWidth=0,this.textureHeight=0}return x(t,[{key:"horizontalSegments",value:function(){return Math.ceil(this.verticalSegments*this.textureWidth/this.textureHeight)}},{key:"applyOptions",value:function(t){this.options=t}},{key:"initMesh",value:function(t,e){for(var n=this,r=[],i=[],a=[],s=this.verticalSegments,u=this.horizontalSegments(),l=t/2,c=e/2,h=t/u,d=e/s,A=this.extraAttributes(),f=Object.keys(A),p=f.reduce((function(t,e){return t[e]=[],t}),{}),g=function(t){for(var e=t*d-c,n=function(n){var r=n*h-l;i.push(r,-e,0),a.push(1*n/u,1-1*t/s),f.forEach((function(e){var r;return(r=p[e]).push.apply(r,o(A[e].generator(t,n)))})),i.push(r+h,-e,0),a.push(1*(n+1)/u,1-1*t/s),f.forEach((function(e){var r;return(r=p[e]).push.apply(r,o(A[e].generator(t,n)))})),i.push(r,-e-d,0),a.push(1*n/u,1-1*(t+1)/s),f.forEach((function(e){var r;return(r=p[e]).push.apply(r,o(A[e].generator(t,n)))})),i.push(r+h,-e-d,0),a.push(1*(n+1)/u,1-1*(t+1)/s),f.forEach((function(e){var r;return(r=p[e]).push.apply(r,o(A[e].generator(t,n)))}))},r=0;r<u;r++)n(r)},v=0;v<s;v++)g(v);for(var m=0;m<s*u;m++){var y=4*m,b=y+1,w=y+2,x=y+3;r.push(b,y,x),r.push(y,w,x)}return this.geometry.setIndex(r),this.geometry.setAttribute("position",new Te(i,3)),this.geometry.setAttribute("uv",new Te(new Float32Array(a),2)),f.forEach((function(t){var e=A[t],r=e.threeType,i=e.jsType,o=e.itemSize;n.geometry.setAttribute(t,new r(new i(p[t]),o))})),{verticalSegments:s,horizontalSegments:u,segmentWidth:h,segmentHeight:d}}},{key:"setSize",value:function(t,e){this.textureWidth=t,this.textureHeight=e,this.camera.updateAspect(t,e),this.camera.focus(this.mesh,e),this.material=new rn({fragmentShader:this.fragmentShader,vertexShader:this.vertexShader,side:2}),this.mesh.geometry=this.geometry,this.material.transparent=!0,this.mesh.material=this.material;var n=this.initMesh(t,e),r=n.verticalSegments,i=n.horizontalSegments,o=n.segmentWidth,a=n.segmentHeight;this.material.uniforms={segmentWidth:{value:o},segmentHeight:{value:a},verticalSegments:{value:r},horizontalSegments:{value:i},timePercent:{value:0},texturePrev:{value:Qs},textureNext:{value:Qs}},this.applyOptions(this.options)}},{key:"setPrevTexture",value:function(t){this.prevTexture=t,this.material.uniforms.texturePrev.value=t}},{key:"setNextTexture",value:function(t){this.nextTexture=t,this.material.uniforms.textureNext.value=t}},{key:"addObjects",value:function(t){t.add(this.mesh)}},{key:"updateAnimation",value:function(t){this.material.uniforms.timePercent.value=t}},{key:"dispose",value:function(){var t,e;null===(t=this.geometry)||void 0===t||t.dispose(),null===(e=this.material)||void 0===e||e.dispose()}}]),t}(),wu=n(84),xu=n.n(wu),_u=n(85),Tu=n.n(_u),Eu=n(86),Su=n.n(Eu),Mu=n(87),Cu=n.n(Mu),Iu=n(88),Nu=n.n(Iu),Bu=n(89),ku=n.n(Bu),Pu=n(90),Du=n.n(Pu),Lu=n(91),Ou=n.n(Lu),Ru=n(92),Fu=n.n(Ru),Uu=n(93),ju=n.n(Uu),zu=n(94),Hu=n.n(zu),Qu=n(95),Gu=n.n(Qu),Vu=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1250,t.options=[],t.fragmentShader=Gu.a,t.vertexShader=Hu.a,t.verticalSegments=100,t}return x(n,[{key:"addObjects",value:function(t){t.add(this.mesh),t.background=this.nextTexture}},{key:"extraAttributes",value:function(){return{}}},{key:"applyOptions",value:function(t){d(y(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"invX"===t.name}));this.material.uniforms.option={value:null!=e&&e.value?Number(e.value):0}}}]),n}(bu),Wu=n(96),Yu=n.n(Wu),Xu=n(97),qu=n.n(Xu),Ku=n(98),Zu=n.n(Ku),Ju=n(99),$u=n.n(Ju),tl=n(100),el=n.n(tl),nl=n(101),rl=n.n(nl),il=n(102),ol=n.n(il),al=n(103),sl=n.n(al),ul={RandomLines:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=Xs.a,t.options=[{name:"dir",value:"horz"}],t}return x(n,[{key:"genRandomLines",value:function(){for(var t=[1],e=20;e--;){var n=t.sort((function(t,e){return e-t}))[0],r=t.indexOf(n),i=Math.random(),o=n*i,a=n*(1-i);t.splice(r,1),t.push(o,a)}for(var s=t.length;s;){var u=Math.floor(Math.random()*s--),l=[t[s],t[u]];t[u]=l[0],t[s]=l[1]}return t}},{key:"applyOptions",value:function(t){d(y(n.prototype),"applyOptions",this).call(this,t),this.material.uniforms.direction={value:"horz"===this.options[0].value?1:0}}},{key:"setSize",value:function(t,e){d(y(n.prototype),"setSize",this).call(this,t,e),this.material.uniforms.lines={value:this.genRandomLines()},this.material.vertexShader=Ws.a}}]),n}(Gs),Shape:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=800,t.fragmentShader=Ks.a,t.options=[],t}return n}(Gs),Ripples:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1400,t.fragmentShader=Js.a,t.options=[{name:"dir",value:"center"}],t.optionsMap={center:0,ru:1,lu:2,ld:3,rd:4},t}return x(n,[{key:"applyOptions",value:function(t){var e,r,i,o;d(y(n.prototype),"applyOptions",this).call(this,t);var a=this.options.find((function(t){return"dir"===t.name}));console.log(null===(e=this.optionsMap)||void 0===e?void 0:e[null!==(r=null==a?void 0:a.value)&&void 0!==r?r:"center"]),this.material.uniforms.option={value:null===(i=this.optionsMap)||void 0===i?void 0:i[null!==(o=null==a?void 0:a.value)&&void 0!==o?o:"center"]}}}]),n}(Gs),Erase:function(t){A(n,t);var e=p(n);function n(){var t,r;return b(this,n),(r=e.apply(this,arguments)).duration=1e3,r.fragmentShader=tu.a,r.options=[],r.defaultDir="right",r.optionsMap=(T(t={},r.defaultDir,0),T(t,"d",1),T(t,"r",2),T(t,"u",3),t),r}return x(n,[{key:"applyOptions",value:function(t){var e,r;d(y(n.prototype),"applyOptions",this).call(this,t);var i=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:null===(e=this.optionsMap)||void 0===e?void 0:e[null!==(r=null==i?void 0:i.value)&&void 0!==r?r:this.defaultDir]}}}]),n}(Gs),Dissolve:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1200,t.fragmentShader=nu.a,t.options=[],t.dissolveIndices={},t}return x(n,[{key:"random40",value:function(){return Math.ceil(40*Math.random())}},{key:"setSize",value:function(t,e){d(y(n.prototype),"setSize",this).call(this,t,e);for(var r=0;r<1600;r++){for(var i=this.random40(),o=this.random40();void 0!==this.dissolveIndices["".concat(i,"_").concat(o)];)i=this.random40(),o=this.random40();this.dissolveIndices["".concat(i,"_").concat(o)]=0}this.material.uniforms.dissolveTexture={value:this.genDissolveToTexture()}}},{key:"genDissolveToTexture",value:function(){for(var t=new Uint8Array(4800),e=0;e<1600;e++){var n=e%40+1,r=Math.floor(e/40)+1,i=3*e;0===this.dissolveIndices["".concat(n,"_").concat(r)]?(t[i]=0,t[i+1]=0,t[i+2]=0):(t[i]=255,t[i+1]=255,t[i+2]=255)}return new ro(t,40,40,1022)}},{key:"updateAnimation",value:function(t){for(var e=this,n=1600*t-Object.keys(this.dissolveIndices).filter((function(t){return 1===e.dissolveIndices[t]})).length,r=0;r<n;r++){var i=Object.keys(this.dissolveIndices).filter((function(t){return 0===e.dissolveIndices[t]})),o=Math.ceil(Math.random()*i.length)-1;this.dissolveIndices[i[o]]=1}this.material.uniforms.dissolveTexture.value=this.genDissolveToTexture()}}]),n}(Gs),Smooth:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=2e3,t.fragmentShader=iu.a,t.options=[],t}return n}(Gs),FadeInOut:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=700,t.fragmentShader=au.a,t.options=[],t}return x(n,[{key:"applyOptions",value:function(t){d(y(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"thruBlk"===t.name}));this.material.uniforms.option={value:"1"===(null==e?void 0:e.value)?1:0}}}]),n}(Gs),Push:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=uu.a,t.options=[],t.optionsMap={u:0,r:1,d:2,l:3},t}return x(n,[{key:"applyOptions",value:function(t){var e,r;d(y(n.prototype),"applyOptions",this).call(this,t);var i=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:null===(e=this.optionsMap)||void 0===e?void 0:e[null!==(r=null==i?void 0:i.value)&&void 0!==r?r:"l"]}}}]),n}(Gs),Separation:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1500,t.fragmentShader=cu.a,t.options=[],t}return x(n,[{key:"applyOptions",value:function(t){d(y(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"orient"===t.name})),r=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.orient={value:"vert"===(null==e?void 0:e.value)},this.material.uniforms.direction={value:"in"===(null==r?void 0:r.value)}}}]),n}(Gs),Display:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=3400,t.fragmentShader=du.a,t.options=[],t}return x(n,[{key:"applyOptions",value:function(t){var e=this.options.find((function(t){return"dir"===t.name})),n=this.options.find((function(t){return"thruBlk"===t.name}));this.material.uniforms.direction={value:"r"===(null==e?void 0:e.value)},this.material.uniforms.thruBlk={value:"1"===(null==n?void 0:n.value)}}}]),n}(Gs),Uncover:function(t){A(n,t);var e=p(n);function n(){var t,r;return b(this,n),(r=e.apply(this,arguments)).duration=750,r.fragmentShader=fu.a,r.options=[],r.defaultDir="right",r.optionsMap=(T(t={},r.defaultDir,0),T(t,"d",1),T(t,"r",2),T(t,"u",3),T(t,"ld",4),T(t,"lu",5),T(t,"rd",6),T(t,"ru",7),t),r.selfOptionsList=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:-1},{x:-1,y:1},{x:1,y:-1},{x:1,y:1}],r}return x(n,[{key:"applyOptions",value:function(t){var e;d(y(n.prototype),"applyOptions",this).call(this,t);var r=this.options.find((function(t){return"dir"===t.name})),i=this.optionsMap[null!==(e=null==r?void 0:r.value)&&void 0!==e?e:this.defaultDir],o=this.selfOptionsList[i];this.material.uniforms.optionX={value:o.x},this.material.uniforms.optionY={value:o.y}}}]),n}(Gs),Cover:function(t){A(n,t);var e=p(n);function n(){var t,r;return b(this,n),(r=e.apply(this,arguments)).duration=1e3,r.fragmentShader=gu.a,r.options=[],r.defaultDir="right",r.optionsMap=(T(t={},r.defaultDir,0),T(t,"d",1),T(t,"r",2),T(t,"u",3),T(t,"ld",4),T(t,"lu",5),T(t,"rd",6),T(t,"ru",7),t),r.selfOptionsList=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:-1},{x:-1,y:1},{x:1,y:-1},{x:1,y:1}],r}return x(n,[{key:"applyOptions",value:function(t){var e;d(y(n.prototype),"applyOptions",this).call(this,t);var r=this.options.find((function(t){return"dir"===t.name})),i=this.optionsMap[null!==(e=null==r?void 0:r.value)&&void 0!==e?e:this.defaultDir],o=this.selfOptionsList[i];this.material.uniforms.optionX={value:o.x},this.material.uniforms.optionY={value:o.y}}}]),n}(Gs),Flash:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=mu.a,t.options=[],t}return n}(Gs),Checkerboard:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=2500,t.options=[{name:"dir",value:"horz"}],t.fragmentShader=Tu.a,t.vertexShader=xu.a,t.vIndex="",t.delay=0,t.verticalSegments=5,t}return x(n,[{key:"extraAttributes",value:function(){var t=this;return{times:{threeType:Te,jsType:Float32Array,itemSize:1,generator:function(e,n){return t.vIndex!=="".concat(e).concat(n)&&(t.delay=.3*Math.random(),t.vIndex="".concat(e).concat(n)),[t.delay]}},segment:{threeType:Te,jsType:Float32Array,itemSize:2,generator:function(t,e){return[e,t]}},option:{threeType:xe,jsType:Int32Array,itemSize:1,generator:function(){return[t.options.find((function(t){return"dir"===t.name&&"horz"===t.value}))?0:1]}}}}}]),n}(bu),Vortex:function(){function t(){b(this,t),this.duration=4e3,this.geometry=new Pe,this.material=new rn({fragmentShader:Cu.a,vertexShader:Su.a,side:2}),this.camera=new yu,this.mesh=new Ze}return x(t,[{key:"initData",value:function(t,e){for(var n=[],r=[],i=[],o=[],a=[],s=[],u=Math.ceil(124*t/e),l=t/2,c=e/2,h=t/u,d=e/124,A=0;A<124;A++)for(var f=A*d-c,p=0;p<u;p++){var g=p*h-l,v=Math.ceil((p+1)/((u+1)/12)),m=.4/v,y=(v-1)*m+Math.random()*m;r.push(g,-f,0),o.push(1*p/u,1-1*A/124),i.push(0,0,1),a.push(p,A),s.push(y),r.push(g+h,-f,0),o.push(1*(p+1)/u,1-1*A/124),i.push(0,0,1),a.push(p,A),s.push(y),r.push(g,-f-d,0),o.push(1*p/u,1-1*(A+1)/124),i.push(0,0,1),a.push(p,A),s.push(y),r.push(g+h,-f-d,0),o.push(1*(p+1)/u,1-1*(A+1)/124),i.push(0,0,1),a.push(p,A),s.push(y)}for(var b=0;b<124*u;b++){var w=4*b,x=w+1,_=w+2,T=w+3;n.push(x,w,T),n.push(w,_,T)}return this.geometry.setIndex(n),this.geometry.setAttribute("position",new Te(r,3)),this.geometry.setAttribute("normal",new Te(i,3)),this.geometry.setAttribute("uv",new Te(new Float32Array(o),2)),this.geometry.setAttribute("segment",new Te(new Float32Array(a),2)),this.geometry.setAttribute("times",new Te(new Float32Array(s),1)),{verticalSegments:124,horizontalSegments:u,segmentWidth:h,segmentHeight:d}}},{key:"setSize",value:function(t,e){var n=this.initData(t,e),r=n.verticalSegments,i=n.horizontalSegments,o=n.segmentWidth,a=n.segmentHeight;this.material.uniforms={duration:{value:this.duration},segmentWidth:{value:o},segmentHeight:{value:a},verticalSegments:{value:r},horizontalSegments:{value:i},timePercent:{value:0},texturePrev:{value:Qs},textureNext:{value:Qs}},this.camera.updateAspect(t,e),this.camera.focus(this.mesh,e),this.mesh.geometry=this.geometry,new xa({side:2,vertexColors:!0}).wireframe=!0,this.material.transparent=!0,this.mesh.material=this.material}},{key:"setPrevTexture",value:function(t){this.material.uniforms.texturePrev.value=t}},{key:"setNextTexture",value:function(t){this.material.uniforms.textureNext.value=t}},{key:"addObjects",value:function(t){t.add(this.mesh)}},{key:"updateAnimation",value:function(t){this.material.uniforms.timePercent.value=t}},{key:"dispose",value:function(){var t,e;null===(t=this.geometry)||void 0===t||t.dispose(),null===(e=this.material)||void 0===e||e.dispose()}}]),t}(),WindowShades:function(){function t(){b(this,t),this.duration=1600,this.geometry=new Pe,this.material=new rn({fragmentShader:ku.a,vertexShader:Nu.a,side:2}),this.horizontalSegments=16,this.meshToCameraDistance=0,this.camera=new yu,this.mesh=new Ze}return x(t,[{key:"initData",value:function(t,e){for(var n=[],r=[],i=[],o=[],a=[],s=[],u=t/2,l=e/2,c=t/this.horizontalSegments,h=0;h<this.horizontalSegments;h++){var d=Math.abs(h-Math.ceil(this.horizontalSegments/2))*(.3/Math.ceil(this.horizontalSegments/2)),A=h*c-u;r.push(A,l,0),i.push(0),o.push(h/this.horizontalSegments,1),a.push(h),s.push(d),r.push(A+c,l,0),i.push(0),o.push((h+1)/this.horizontalSegments,1),a.push(h),s.push(d),r.push(A,-1*l,0),i.push(0),o.push(h/this.horizontalSegments,0),a.push(h),s.push(d),r.push(A+c,-1*l,0),o.push((h+1)/this.horizontalSegments,0),i.push(0),a.push(h),s.push(d),r.push(A+c,l,0),i.push(1),o.push(h/this.horizontalSegments,1),a.push(h),s.push(d),r.push(A+c,l,-1*c),i.push(1),o.push((h+1)/this.horizontalSegments,1),a.push(h),s.push(d),r.push(A+c,-1*l,0),i.push(1),o.push(h/this.horizontalSegments,0),a.push(h),s.push(d),r.push(A+c,-1*l,-1*c),o.push((h+1)/this.horizontalSegments,0),i.push(1),a.push(h),s.push(d)}for(var f=0;f<this.horizontalSegments;f++){var p=8*f,g=p+1,v=p+2,m=p+3,y=p+4,b=p+5,w=p+6,x=p+7;n.push(g,p,m),n.push(p,v,m),n.push(b,y,x),n.push(y,w,x)}this.geometry.setIndex(n),this.geometry.setAttribute("position",new Te(r,3)),this.geometry.setAttribute("uv",new Te(new Float32Array(o),2)),this.geometry.setAttribute("index",new Te(new Float32Array(a),1)),this.geometry.setAttribute("type",new Te(new Float32Array(i),1)),this.geometry.setAttribute("delay",new Te(new Float32Array(s),1))}},{key:"setPrevTexture",value:function(t){this.material.uniforms.texturePrev.value=t}},{key:"setNextTexture",value:function(t){this.material.uniforms.textureNext.value=t}},{key:"setSize",value:function(t,e){this.initData(t,e),this.material.uniforms={segments:{value:this.horizontalSegments},segmentWidth:{value:t/this.horizontalSegments},timePercent:{value:0},texturePrev:{value:Qs},textureNext:{value:Qs}},this.meshToCameraDistance=.5*e/Math.tan(Math.PI/6),this.camera.updateAspect(t,e),this.camera.focus(this.mesh,e),this.mesh.geometry=this.geometry,this.material.transparent=!0,this.mesh.material=this.material}},{key:"addObjects",value:function(t){t.add(this.mesh)}},{key:"updateAnimation",value:function(t){this.material.uniforms.timePercent.value=t}},{key:"dispose",value:function(){var t,e;null===(t=this.geometry)||void 0===t||t.dispose(),null===(e=this.material)||void 0===e||e.dispose()}}]),t}(),Curtain:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=6e3,t.options=[],t.fragmentShader=Ou.a,t.vertexShader=Du.a,t.verticalSegments=100,t}return x(n,[{key:"extraAttributes",value:function(){var t=this;return{isLeft:{threeType:Te,jsType:Float32Array,itemSize:1,generator:function(e,n){return[n<t.horizontalSegments()/2?1:0]}}}}},{key:"addObjects",value:function(t){d(y(n.prototype),"addObjects",this).call(this,t),this.mesh.position.z+=20,t.background=this.nextTexture}}]),n}(bu),Fall:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).zCurveLimit=100,t.duration=2e3,t.options=[{name:"invX",value:"0"}],t.verticalSegments=100,t.fragmentShader=ju.a,t.vertexShader=Fu.a,t}return x(n,[{key:"extraAttributes",value:function(){return{}}},{key:"setSize",value:function(t,e){var r;d(y(n.prototype),"setSize",this).call(this,t,e);var i=this.options.find((function(t){return"invX"===t.name}));this.material.uniforms.zCurveLimit={value:this.zCurveLimit},this.material.uniforms.aCoefficient={value:this.zCurveLimit/(this.textureHeight/2*(this.textureHeight/2))},this.material.uniforms.option={value:null!==(r=null==i?void 0:i.value)&&void 0!==r?r:0}}},{key:"addObjects",value:function(t){t.add(this.mesh),t.background=this.nextTexture}},{key:"updateAnimation",value:function(t){this.material.uniforms.timePercent.value=t}}]),n}(bu),Suspension:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=2e3,t.fragmentShader=qu.a,t.vertexShader=Yu.a,t}return x(n,[{key:"addObjects",value:function(t){t.add(this.mesh),t.background=this.prevTexture}}]),n}(Vu),Clock:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=Zu.a,t.options=[],t}return n}(Gs),Combing:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1e3,t.fragmentShader=$u.a,t.options=[],t}return x(n,[{key:"applyOptions",value:function(t){d(y(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:"vert"===(null==e?void 0:e.value)?1:0}}}]),n}(Gs),Scale:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=900,t.fragmentShader=el.a,t.options=[],t}return x(n,[{key:"applyOptions",value:function(t){d(y(n.prototype),"applyOptions",this).call(this,t);var e=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:"in"===(null==e?void 0:e.value)?0:1}}}]),n}(Gs),PeelOff:Vu,Flip:function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).duration=1250,t.options=[],t.fragmentShader=ol.a,t.vertexShader=rl.a,t.verticalSegments=1,t}return x(n,[{key:"extraAttributes",value:function(){return{}}},{key:"applyOptions",value:function(t){var e=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:"l"===(null==e?void 0:e.value)?1:0}}}]),n}(bu),Strips:function(t){A(n,t);var e=p(n);function n(){var t,r;return b(this,n),(r=e.apply(this,arguments)).duration=1e3,r.fragmentShader=sl.a,r.options=[],r.defaultDir="lu",r.optionsMap=(T(t={},r.defaultDir,0),T(t,"ld",1),T(t,"rd",2),T(t,"ru",3),t),r}return x(n,[{key:"applyOptions",value:function(t){var e,r;d(y(n.prototype),"applyOptions",this).call(this,t);var i=this.options.find((function(t){return"dir"===t.name}));this.material.uniforms.option={value:null===(e=this.optionsMap)||void 0===e?void 0:e[null!==(r=null==i?void 0:i.value)&&void 0!==r?r:this.defaultDir]}}}]),n}(Gs)},ll=function(){function t(){var e=this;b(this,t),this.startTime=0,this.lastTime=0,this.lastFPSTime=0,this.renderingDuration=16,this.reverse=!1,this.scene=new ki,this.delay=0,this.easeFn=Hs.linear,this.preset=null,this.onTransactionEnd=function(){},this.isTransactionStartApplied=!1,this.prevTexture=null,this.nextTexture=null,this.animationId=null,this.config=null,this.renderer=new Bi({alpha:!0,premultipliedAlpha:!0}),this.isPlaying=!1,this.animate=function(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(e.fps(i)){e.renderer.clear(),i>e.delay&&0===e.lastTime&&(e.lastTime=i,e.startTime=i);var o=0;e.lastTime>0&&o<1&&(o=e.easeFn(i-e.startTime,0,1,null!==(n=null===(t=e.preset)||void 0===t?void 0:t.duration)&&void 0!==n?n:0)),o>1&&(o=1),null===(r=e.preset)||void 0===r||r.updateAnimation(e.reverse?1-o:o),e.rerender(),e.isTransactionStartApplied||(e.isTransactionStartApplied=!0),o<1?e.animationId=window.requestAnimationFrame(e.animate):e.onTransactionEnd()}else e.animationId=window.requestAnimationFrame(e.animate)}}return x(t,[{key:"initPlayer",value:function(t){this.config=t,this.reverse=t.reverse,t.delay&&Number.isInteger(t.delay)&&(this.delay=t.delay),t.easeFn&&(this.easeFn=Hs[t.easeFn]),t.maxFPS&&Number.isInteger(t.maxFPS)&&t.maxFPS>0&&(this.renderingDuration=Math.ceil(1e3/t.maxFPS)),this.startTime=0,this.lastTime=0,this.scene.clear(),this.renderer.shadowMap.enabled=!0,this.renderer.autoClear=!1,this.renderer.setClearColor(t.clearColor||0),this.isTransactionStartApplied=!1,this.renderer.setSize(t.stageWidth,t.stageHeight),this.preset=new ul[t.presetType],t.options&&(this.preset.options=t.options),t.duration&&Number.isInteger(t.duration)&&(this.preset.duration=t.duration),this.preset.setSize(t.stageWidth,t.stageHeight)}},{key:"setPrevTexture",value:function(t){var e,n,r,i;t.needsUpdate=!0,this.reverse?(this.nextTexture=t,null===(e=this.preset)||void 0===e||e.setNextTexture(t)):(this.prevTexture=t,null===(n=this.preset)||void 0===n||n.setPrevTexture(t)),null===(r=this.preset)||void 0===r||r.addObjects(this.scene),null===(i=this.preset)||void 0===i||i.updateAnimation(this.reverse?1:0),this.rerender()}},{key:"setNextTexture",value:function(t){var e,n;t.needsUpdate=!0,this.reverse?(this.prevTexture=t,null===(e=this.preset)||void 0===e||e.setPrevTexture(t)):(this.nextTexture=t,null===(n=this.preset)||void 0===n||n.setNextTexture(t))}},{key:"play",value:function(){var t=this;return new Promise((function(e){t.onTransactionEnd=e,t.animate(),t.isPlaying=!0}))}},{key:"rerender",value:function(){var t;this.renderer.clear(),null!==(t=this.preset)&&void 0!==t&&t.camera.camera&&this.renderer.render(this.scene,this.preset.camera.camera)}},{key:"fps",value:function(t){return t<=0||(this.lastFPSTime<0||t-this.lastFPSTime>=this.renderingDuration)&&(this.lastFPSTime=t,!0)}},{key:"skip",value:function(){var t;null===(t=this.preset)||void 0===t||t.updateAnimation(this.reverse?0:1),this.rerender(),this.dispose(),this.onTransactionEnd()}},{key:"dispose",value:function(){var t,e,n;window.cancelAnimationFrame(this.animationId),this.renderer.clear(),this.isPlaying=!1,null===(t=this.preset)||void 0===t||t.dispose(),null===(e=this.prevTexture)||void 0===e||e.dispose(),null===(n=this.nextTexture)||void 0===n||n.dispose();for(var r=this.scene.children.length-1;r>=0;r--){var i=this.scene.children[r];this.scene.remove(i)}this.scene.background=null}},{key:"destroy",value:function(){this.dispose(),this.renderer.forceContextLoss(),this.renderer.dispose()}}]),t}();n(135);var cl=n(3),hl=n(5);hl.c.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var dl=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(cl.isMobile.tablet||cl.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){var t=performance.now();if(!(cl.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,o=e.height,a=this.renderer,s=a.width,u=a.height,l=a.resolution,c=i/s*l,h=o/u*l,d=this.div;d.style.left=n+"px",d.style.top=r+"px",d.style.width=s+"px",d.style.height=u+"px";for(var A=0;A<this.children.length;A++){var f=this.children[A];if(f.renderId!==this.renderId)f._accessibleActive=!1,Object(cl.removeItems)(this.children,A,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,A--;else{d=f._accessibleDiv;var p=f.hitArea,g=f.worldTransform;f.hitArea?(d.style.left=(g.tx+p.x*g.a)*c+"px",d.style.top=(g.ty+p.y*g.d)*h+"px",d.style.width=p.width*g.a*c+"px",d.style.height=p.height*g.d*h+"px"):(p=f.getBounds(),this.capHitArea(p),d.style.left=p.x*c+"px",d.style.top=p.y*h+"px",d.style.width=p.width*c+"px",d.style.height=p.height*h+"px",d.title!==f.accessibleTitle&&null!==f.accessibleTitle&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&null!==f.accessibleHint&&d.setAttribute("aria-label",f.accessibleHint)),f.accessibleTitle===d.title&&f.tabIndex===d.tabIndex||(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,n=e.width,r=e.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>r&&(t.height=r-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"click",r),e.dispatchEvent(n,"pointertap",r),e.dispatchEvent(n,"tap",r)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"mouseover",r)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"mouseout",r)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}(),Al=n(1),fl=n(7),pl=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Al.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),gl=function(t,e){return(gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},vl=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),ml=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),yl=function(){function t(){this._tempPoint=new Al.g}return t.prototype.recursiveFindHit=function(t,e,n,r,i){if(!e||!e.visible)return!1;var o=t.data.global,a=!1,s=i=e.interactive||i,u=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,u=!1)),s=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(r=!1)),u&&e.interactiveChildren&&e.children)for(var l=e.children,c=l.length-1;c>=0;c--){var h=l[c],d=this.recursiveFindHit(t,h,n,r,s);if(d){if(!h.parent)continue;s=!1,d&&(t.target&&(r=!1),a=!0)}}return i&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),n&&n(t,e,!!a))),a},t.prototype.findHit=function(t,e,n,r){this.recursiveFindHit(t,e,n,r,!1)},t}(),bl={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};hl.c.mixin(bl);var wl={target:null,data:{global:null}},xl=function(t){function e(e,n){var r=t.call(this)||this;return n=n||{},r.renderer=e,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new pl,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new vl,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in globalThis),r.supportsTouchEvents="ontouchstart"in globalThis,r.supportsPointerEvents=!!globalThis.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new yl,r._tempDisplayObject=new hl.d,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function n(){this.constructor=t}gl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return wl.target=null,wl.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(wl,e,null,!0),wl.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(fl.a.system.add(this.tickerUpdate,this,fl.c.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(fl.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var n=this.cursorStyles[t];if(n)switch(_(n)){case"string":e&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,n)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopPropagationHint&&t!==n.stopsPropagatingAt||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.delayDispatchEvent=function(t,e,n){this.delayedEvents.push({displayObject:t,eventString:e,eventData:n})},e.prototype.mapPositionToPoint=function(t,e,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var i=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*i,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},e.prototype.processInteractive=function(t,e,n,r){var i=this.search.findHit(t,e,n,r),o=this.delayedEvents;if(!o.length)return i;t.stopPropagationHint=!1;var a=o.length;this.delayedEvents=[];for(var s=0;s<a;s++){var u=o[s],l=u.displayObject,c=u.eventString,h=u.eventData;h.stopsPropagatingAt===l&&(h.stopPropagationHint=!0),this.dispatchEvent(l,c,h)}return i},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var r=t.data,i=t.data.identifier;if(n)if(e.trackedPointers[i]||(e.trackedPointers[i]=new ml(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var r=this.normalizeToPointerData(t),i=r.length,o=t.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=r[a],u=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,n,e||!o),this.emit(e?"pointercancel":"pointerup"+o,l),"mouse"===s.pointerType||"pen"===s.pointerType){var c=2===s.button;this.emit(c?"rightup"+o:"mouseup"+o,l)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(s.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var r=t.data,i=t.data.identifier,o=e.trackedPointers[i],a="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,u=!1;if(s){var l=2===r.button,c=ml.FLAGS,h=l?c.RIGHT_DOWN:c.LEFT_DOWN,d=void 0!==o&&o.flags&h;n?(this.dispatchEvent(e,l?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,l?"rightclick":"click",t),u=!0)):d&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),o&&(l?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),o&&(s&&!u||this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var r=t.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var r=t.data,i=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,a=e.trackedPointers[i];n&&!a&&(a=e.trackedPointers[i]=new ml(i)),void 0!==a&&(n&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):a.over&&(a.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),a.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,n=t.pointerId;return 1===n||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[n]?e=this.activeInteractionData[n]:((e=this.interactionDataPool.pop()||new pl).identifier=n,this.activeInteractionData[n]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,r=t.changedTouches.length;n<r;n++){var i=t.changedTouches[n];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof globalThis.PointerEvent)){var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}else e.push(t);return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(cl.EventEmitter),_l=n(2),Tl=function(){function t(e){var n=this;this.stage=new hl.b,e=Object.assign({forceCanvas:!1},e),this.renderer=Object(_l.y)(e),t._plugins.forEach((function(t){t.init.call(n,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,n){var r=this,i=t._plugins.slice(0);i.reverse(),i.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),El=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,n;if(e.cancelResize(),e._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,n=r.clientHeight}e.renderer.resize(t,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();Tl.registerPlugin(El);
/*!
 * @pixi/extract - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Sl,Ml,Cl,Il,Nl,Bl,kl,Pl,Dl,Ll,Ol,Rl,Fl,Ul,jl,zl,Hl,Ql,Gl,Vl=/iPhone/i,Wl=/iPod/i,Yl=/iPad/i,Xl=/\biOS-universal(?:.+)Mac\b/i,ql=/\bAndroid(?:.+)Mobile\b/i,Kl=/Android/i,Zl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Jl=/Silk/i,$l=/Windows Phone/i,tc=/\bWindows(?:.+)ARM\b/i,ec=/BlackBerry/i,nc=/BB10/i,rc=/Opera Mini/i,ic=/\b(CriOS|Chrome)(?:.+)Mobile/i,oc=/Mobile(?:.+)Firefox\b/i,ac=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},sc=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i,o=(i=n,function(t){return t.test(i)}),a={apple:{phone:o(Vl)&&!o($l),ipod:o(Wl),tablet:!o(Vl)&&(o(Yl)||ac(e))&&!o($l),universal:o(Xl),device:(o(Vl)||o(Wl)||o(Yl)||o(Xl)||ac(e))&&!o($l)},amazon:{phone:o(Zl),tablet:!o(Zl)&&o(Jl),device:o(Zl)||o(Jl)},android:{phone:!o($l)&&o(Zl)||!o($l)&&o(ql),tablet:!o($l)&&!o(Zl)&&!o(ql)&&(o(Jl)||o(Kl)),device:!o($l)&&(o(Zl)||o(Jl)||o(ql)||o(Kl))||o(/\bokhttp\b/i)},windows:{phone:o($l),tablet:o(tc),device:o($l)||o(tc)},other:{blackberry:o(ec),blackberry10:o(nc),opera:o(rc),firefox:o(oc),chrome:o(ic),device:o(ec)||o(nc)||o(rc)||o(oc)||o(ic)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}(globalThis.navigator);
/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Sl||(Sl={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Ml||(Ml={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Cl||(Cl={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Il||(Il={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Nl||(Nl={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Bl||(Bl={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(kl||(kl={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Pl||(Pl={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Dl||(Dl={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Ll||(Ll={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Ol||(Ol={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Rl||(Rl={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Fl||(Fl={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Ul||(Ul={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(jl||(jl={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(zl||(zl={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Hl||(Hl={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Ql||(Ql={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Gl||(Gl={}));Rl.POW2,Ql.NONE,function(t){var e,n=!0;(sc.tablet||sc.phone)&&(sc.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(n=!1),sc.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(n=!1))}(),jl.AUTO,Ol.CLAMP,Ll.LINEAR,zl.HIGH,sc.apple.device?zl.HIGH:zl.MEDIUM,sc.apple.device;var uc=!1,lc=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Al.j.EMPTY:((t=t||new Al.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,u=n*e.x+i*e.y+a,l=r*e.x+o*e.y+s;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],a=t[1];e=o<e?o:e,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[2])<e?o:e,n=(a=t[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[4])<e?o:e,n=(a=t[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[6])<e?o:e,n=(a=t[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){this.addFrameMatrix(t.worldTransform,e,n,r,i)},t.prototype.addFrameMatrix=function(t,e,n,r,i){var o=t.a,a=t.b,s=t.c,u=t.d,l=t.tx,c=t.ty,h=this.minX,d=this.minY,A=this.maxX,f=this.maxY,p=o*e+s*n+l,g=a*e+u*n+c;h=p<h?p:h,d=g<d?g:d,A=p>A?p:A,f=g>f?g:f,h=(p=o*r+s*n+l)<h?p:h,d=(g=a*r+u*n+c)<d?g:d,A=p>A?p:A,f=g>f?g:f,h=(p=o*e+s*i+l)<h?p:h,d=(g=a*e+u*i+c)<d?g:d,A=p>A?p:A,f=g>f?g:f,h=(p=o*r+s*i+l)<h?p:h,d=(g=a*r+u*i+c)<d?g:d,A=p>A?p:A,f=g>f?g:f,this.minX=h,this.minY=d,this.maxX=A,this.maxY=f},t.prototype.addVertexData=function(t,e,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=e;s<n;s+=2){var u=t[s],l=t[s+1];r=u<r?u:r,i=l<i?l:i,o=u>o?u:o,a=l>a?l:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a},t.prototype.addVertices=function(t,e,n,r){this.addVerticesMatrix(t.worldTransform,e,n,r)},t.prototype.addVerticesMatrix=function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var a=t.a,s=t.b,u=t.c,l=t.d,c=t.tx,h=t.ty,d=this.minX,A=this.minY,f=this.maxX,p=this.maxY,g=n;g<r;g+=2){var v=e[g],m=e[g+1],y=a*v+u*m+c,b=l*m+s*v+h;d=Math.min(d,y-i),f=Math.max(f,y+i),A=Math.min(A,b-o),p=Math.max(p,b+o)}this.minX=d,this.minY=A,this.maxX=f,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,r,i,o){t-=i,e-=o,n+=i,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),cc=function(t,e){return(cc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function hc(t,e){function n(){this.constructor=t}cc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var dc,Ac,fc,pc,gc,vc,mc,yc,bc,wc,xc,_c,Tc,Ec,Sc,Mc,Cc,Ic,Nc,Bc=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Al.m,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new lc,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return hc(e,t),e.mixin=function(t){for(var n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Al.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Al.j),t=this._localBoundsRect),this._localBounds||(this._localBounds=new lc);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new kc),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*Al.i},set:function(t){this.transform.rotation=t*Al.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask!==t&&(this._mask&&((e=this._mask.maskObject||this._mask)._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1)),this._mask=t,this._mask&&(0===(e=this._mask.maskObject||this._mask)._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++))},enumerable:!1,configurable:!0}),e}(cl.EventEmitter),kc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return hc(e,t),e}(Bc);function Pc(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Bc.prototype.displayObjectUpdateTransform=Bc.prototype.updateTransform,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(dc||(dc={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Ac||(Ac={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(fc||(fc={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(pc||(pc={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(gc||(gc={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(vc||(vc={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(mc||(mc={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(yc||(yc={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(bc||(bc={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(wc||(wc={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(xc||(xc={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(_c||(_c={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Tc||(Tc={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Ec||(Ec={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Sc||(Sc={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Mc||(Mc={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Cc||(Cc={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Ic||(Ic={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Nc||(Nc={}));var Dc=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=uc,e.sortDirty=!1,e}return hc(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Object(cl.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var i=e[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,Object(cl.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(cl.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,r=t,i=e-r;if(i>0&&i<=e){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(Pc),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!n)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var n=t.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var r,i;if(this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(r=this.getBounds(!0)),r&&n.intersects(r,i))this._render(t);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o],u=s.cullable;s.cullable=u||!this.cullArea,s.render(t),s.cullable=u}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var i=e&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Cc.NONE));if(i&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),r=0;for(var o=this.children.length;r<o;++r)this.children[r].render(t)}i&&t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(Bc);Dc.prototype.containerUpdateTransform=Dc.prototype.updateTransform;var Lc=new Al.j,Oc=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,n){var r=new Image;return r.src=this.base64(t,e,n),r},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(e){var n,r,i,o=this.renderer,a=!1,s=!1;e&&(e instanceof _l.p?i=e:(i=this.renderer.generateTexture(e),s=!0)),i?(n=i.baseTexture.resolution,r=i.frame,a=!1,o.renderTexture.bind(i)):(n=this.renderer.resolution,a=!0,(r=Lc).width=this.renderer.width,r.height=this.renderer.height,o.renderTexture.bind(null));var u=Math.floor(r.width*n+1e-4),l=Math.floor(r.height*n+1e-4),c=new cl.CanvasRenderTarget(u,l,1),h=new Uint8Array(4*u*l),d=o.gl;d.readPixels(r.x*n,r.y*n,u,l,d.RGBA,d.UNSIGNED_BYTE,h);var A=c.context.getImageData(0,0,u,l);if(t.arrayPostDivide(h,A.data),c.context.putImageData(A,0,0),a){var f=new cl.CanvasRenderTarget(c.width,c.height,1);f.context.scale(1,-1),f.context.drawImage(c.canvas,0,-l),c.destroy(),c=f}return s&&i.destroy(!0),c.canvas},t.prototype.pixels=function(e,n){var r,i,o,a=this.renderer,s=!1;e&&(e instanceof _l.p?o=e:e instanceof Bc&&(o=this.renderer.generateTexture(e),s=!0)),o?n?(r=n.resolution,i=o.frame,a.renderTexture.bind(o)):(r=o.baseTexture.resolution,i=o.frame,a.renderTexture.bind(o)):n?(r=n.resolution,(i=Lc).width=n.width,i.height=n.height,a.renderTexture.bind(null)):(r=a.resolution,(i=Lc).width=a.width,i.height=a.height,a.renderTexture.bind(null));var u=i.width*r,l=i.height*r,c=new Uint8Array(4*u*l),h=a.gl;return h.readPixels(i.x*r,i.y*r,u,l,h.RGBA,h.UNSIGNED_BYTE,c),s&&o.destroy(!0),t.arrayPostDivide(c,c),c},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var n=0;n<t.length;n+=4){var r=e[n+3]=t[n+3];0!==r?(e[n]=Math.round(Math.min(255*t[n]/r,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/r,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/r,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}},t}(),Rc=function(){function t(t,e,n){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=n,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function Fc(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var Uc,jc=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n},t.prototype.has=function(t){if(!(t instanceof Rc))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,e),r=r._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return Fc(this,new Rc(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return Fc(this,new Rc(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof Rc))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function zc(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,(function(t,e,r){e&&(i[n.q.name][e]=r)})),i}var Hc=null;function Qc(){}function Gc(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function Vc(t){return t.toString().replace("object ","")}var Wc=function(){function t(e,n,r){if(this._dequeue=Qc,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Qc,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new jc,this.onProgress=new jc,this.onComplete=new jc,this.onAfterMiddleware=new jc}return t.setExtensionLoadType=function(e,n){Gc(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){Gc(t._xhrTypeMap,e,n)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var n=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(n)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:void 0===Uc&&(Uc=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),Uc&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else e=this.metadata.mimeType,this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(Vc(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(Vc(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(Vc(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,n="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(n=e.responseText),0===r&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||n;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,Hc||(Hc=document.createElement("a")),Hc.href=t;var n=zc(Hc.href,{strictMode:!0}),r=!n.port&&""===e.port||n.port===e.port,i=n.protocol?n.protocol+":":"";return n.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(r>-1?r:t.length,i>-1?i:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function Yc(){}function Xc(t){return function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];if(null===t)throw new Error("Callback was already called.");var i=t;t=null,i.apply(this,n)}}!function(t){var e,n,r,i;(e=t.STATUS_FLAGS||(t.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",(n=t.TYPE||(t.TYPE={}))[n.UNKNOWN=0]="UNKNOWN",n[n.JSON=1]="JSON",n[n.XML=2]="XML",n[n.IMAGE=3]="IMAGE",n[n.AUDIO=4]="AUDIO",n[n.VIDEO=5]="VIDEO",n[n.TEXT=6]="TEXT",(r=t.LOAD_TYPE||(t.LOAD_TYPE={}))[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO",(i=t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})).DEFAULT="text",i.BUFFER="arraybuffer",i.BLOB="blob",i.DOCUMENT="document",i.JSON="json",i.TEXT="text",t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(Wc||(Wc={}));var qc=function(t,e){this.data=t,this.callback=e},Kc=function(){function t(t,e){var n=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=Yc,this.unsaturated=Yc,this.empty=Yc,this.drain=Yc,this.error=Yc,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout((function(){return n.drain()}),1);else{var i=new qc(t,"function"==typeof r?r:Yc);e?n._tasks.unshift(i):n._tasks.push(i),setTimeout(n.process,1)}},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var t=n._tasks.shift();0===n._tasks.length&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(t.data,Xc(n._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];e.workers-=1,t.callback.apply(t,r),null!=r[0]&&e.error(r[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=Yc,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,n,r){var i=0,o=t.length;!function a(s){s||i===o?n&&n(s):r?setTimeout((function(){e(t[i++],a)}),1):e(t[i++],a)}()},t.queue=function(e,n){return new t(e,n)},t}(),Zc=/(#[\w-]+)?$/,Jc=function(){function t(e,n){var r=this;void 0===e&&(e=""),void 0===n&&(n=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=Kc.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new jc,this.onError=new jc,this.onLoad=new jc,this.onStart=new jc,this.onComplete=new jc;for(var i=0;i<t._plugins.length;++i){var o=t._plugins[i],a=o.pre,s=o.use;a&&this.pre(a),s&&this.use(s)}this._protected=!1}return t.prototype._add=function(t,e,n,r){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Wc(t,e,n),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var i=n.parentResource,o=[],a=0;a<i.children.length;++a)i.children[a].isComplete||o.push(i.children[a]);var s=i.progressChunk*(o.length+1)/(o.length+2);for(i.children.push(this.resources[t]),i.progressChunk=s,a=0;a<o.length;++a)o[a].progressChunk=s;this.resources[t].progressChunk=s}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,n=zc(t,{strictMode:!0});if(e=n.protocol||!n.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=Zc.exec(e)[0];-1!==(e=e.slice(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},t.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,Kc.eachSeries(this._beforeMiddleware,(function(e,r){e.call(n,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Kc.eachSeries(this._afterMiddleware,(function(n,r){n.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}();Jc.prototype.add=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==_(t)&&(n=t,r=e||n.callback||n.onComplete,e=n.url,t=n.name||n.key||n.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof n&&(r=n,n=null),this._add(t,e,n,r)};var $c=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Jc.shared:new Jc},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),th=function(){function t(){}return t.add=function(){Wc.setExtensionLoadType("svg",Wc.LOAD_TYPE.XHR),Wc.setExtensionXhrType("svg",Wc.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==Wc.TYPE.IMAGE&&"svg"!==t.extension)e();else{var n=t.data,r=t.url,i=t.name,o=t.metadata;_l.t.fromLoader(n,r,i,o).then((function(n){t.texture=n,e()})).catch(e)}},t}();Jc.registerPlugin({use:function(t,e){if(t.data){if(t.xhr&&t.xhrType===Wc.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=globalThis.URL||globalThis.webkitURL,r=n.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=Wc.TYPE.IMAGE,void(t.data.onload=function(){n.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",n=0;n<t.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)n<t.length?r[o]=255&t.charCodeAt(n++):r[o]=0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[o])}return e}(t.xhr.responseText),t.type=Wc.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}}),Jc.registerPlugin(th);var eh,nh,rh=n(0);
/*!
 * @pixi/compressed-textures - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(nh||(nh={}));var ih=((eh={})[nh.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,eh[nh.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,eh[nh.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,eh[nh.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,eh[nh.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,eh[nh.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,eh[nh.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,eh[nh.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,eh[nh.COMPRESSED_R11_EAC]=.5,eh[nh.COMPRESSED_SIGNED_R11_EAC]=.5,eh[nh.COMPRESSED_RG11_EAC]=1,eh[nh.COMPRESSED_SIGNED_RG11_EAC]=1,eh[nh.COMPRESSED_RGB8_ETC2]=.5,eh[nh.COMPRESSED_RGBA8_ETC2_EAC]=1,eh[nh.COMPRESSED_SRGB8_ETC2]=.5,eh[nh.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,eh[nh.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,eh[nh.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,eh[nh.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,eh[nh.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,eh[nh.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,eh[nh.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,eh[nh.COMPRESSED_RGB_ETC1_WEBGL]=.5,eh[nh.COMPRESSED_RGB_ATC_WEBGL]=.5,eh[nh.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,eh[nh.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,eh),oh=function(t,e){return(oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ah(t,e){function n(){this.constructor=t}oh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var sh,uh,lh=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=e._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||e._createLevelBuffers(n instanceof Uint8Array?n:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return ah(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var i=0,o=this.levels;i<o;i++){var a=this._levelBuffers[i],s=a.levelID,u=a.levelWidth,l=a.levelHeight,c=a.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,s,this.format,u,l,0,c)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,n,r,i,o,a){for(var s=new Array(n),u=t.byteOffset,l=o,c=a,h=l+r-1&~(r-1),d=c+i-1&~(i-1),A=h*d*ih[e],f=0;f<n;f++)s[f]={levelID:f,levelWidth:n>1?l:h,levelHeight:n>1?c:d,levelBuffer:new Uint8Array(t.buffer,u,A)},u+=A,A=(h=(l=l>>1||1)+r-1&~(r-1))*(d=(c=c>>1||1)+i-1&~(i-1))*ih[e];return s},e}(function(t){function e(e,n){void 0===n&&(n={width:1,height:1,autoLoad:!0});var r,i,o=this;return"string"==typeof e?(r=e,i=new Uint8Array):(r=null,i=e),(o=t.call(this,i,n)||this).origin=r,o.buffer=i?new _l.x(i):null,o.origin&&!1!==n.autoLoad&&o.load(),i&&i.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return ah(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,void 0,n=function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new _l.x(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((e=Promise)||(e=Promise))((function(r,i){function o(t){try{s(n.next(t))}catch(t){i(t)}}function a(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){t.done?r(t.value):new e((function(e){e(t.value)})).then(o,a)}s((n=n.apply(t,[])).next())}));var t,e,n},e}(_l.i)),ch=function(){function t(){}return t.use=function(e,n){var r=e.data;if(e.type===Wc.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var i=r.textures,o=void 0,a=void 0,s=0,u=i.length;s<u;s++){var l=i[s],c=l.src,h=l.format;if(h||(a=c),t.textureFormats[h]){o=c;break}}if(!(o=o||a))return void n(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(o===e.url)return void n(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},A=cl.url.resolve(e.url.replace(this.baseUrl,""),o),f=r.cacheID;this.add(f,A,d,(function(t){if(t.error)n(t.error);else{var r=t.texture,i=void 0===r?null:r,o=t.textures,a=void 0===o?{}:o;Object.assign(e,{texture:i,textures:a}),n()}}))}else n()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=document.createElement("canvas").getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=n}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;for(var n in t._textureFormats={},e){var r=e[n];r&&Object.assign(t._textureFormats,Object.getPrototypeOf(r))}}return t._textureFormats},enumerable:!1,configurable:!0}),t}();function hh(t,e,n){var r={textures:{},texture:null};return e&&e.map((function(t){return new _l.t(new _l.c(t,Object.assign({mipmap:rh.k.OFF,alphaMode:rh.a.NO_PREMULTIPLIED_ALPHA},n)))})).forEach((function(e,n){var i=e.baseTexture,o=t+"-"+(n+1);_l.c.addToCache(i,o),_l.t.addToCache(e,o),0===n&&(_l.c.addToCache(i,t),_l.t.addToCache(e,t),r.texture=e),r.textures[o]=e})),r}Wc.setExtensionXhrType("dds",Wc.XHR_RESPONSE_TYPE.BUFFER);var dh,Ah;(function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(dh||(dh={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(Ah||(Ah={}));var fh,ph,gh,vh=((sh={})[827611204]=nh.COMPRESSED_RGBA_S3TC_DXT1_EXT,sh[861165636]=nh.COMPRESSED_RGBA_S3TC_DXT3_EXT,sh[894720068]=nh.COMPRESSED_RGBA_S3TC_DXT5_EXT,sh),mh=((uh={})[dh.DXGI_FORMAT_BC1_TYPELESS]=nh.COMPRESSED_RGBA_S3TC_DXT1_EXT,uh[dh.DXGI_FORMAT_BC1_UNORM]=nh.COMPRESSED_RGBA_S3TC_DXT1_EXT,uh[dh.DXGI_FORMAT_BC2_TYPELESS]=nh.COMPRESSED_RGBA_S3TC_DXT3_EXT,uh[dh.DXGI_FORMAT_BC2_UNORM]=nh.COMPRESSED_RGBA_S3TC_DXT3_EXT,uh[dh.DXGI_FORMAT_BC3_TYPELESS]=nh.COMPRESSED_RGBA_S3TC_DXT5_EXT,uh[dh.DXGI_FORMAT_BC3_UNORM]=nh.COMPRESSED_RGBA_S3TC_DXT5_EXT,uh[dh.DXGI_FORMAT_BC1_UNORM_SRGB]=nh.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,uh[dh.DXGI_FORMAT_BC2_UNORM_SRGB]=nh.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,uh[dh.DXGI_FORMAT_BC3_UNORM_SRGB]=nh.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,uh),yh=function(){function t(){}return t.use=function(e,n){if("dds"===e.extension&&e.data)try{Object.assign(e,hh(e.name||e.url,t.parse(e.data),e.metadata))}catch(t){return void n(t)}n()},t.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var n=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=n[3],i=n[4],o=n[7],a=new Uint32Array(t,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),s=a[1];if(4&s){var u=a[2];if(808540228!==u){var l=vh[u],c=new Uint8Array(t,128);return[new lh(c,{format:l,width:i,height:r,levels:o})]}var h=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=h[0],A=h[1],f=h[2],p=h[3],g=mh[d];if(void 0===g)throw new Error("DDSLoader cannot parse texture data with DXGI format "+d);if(4===f)throw new Error("DDSLoader does not support cubemap textures");if(A===Ah.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var v=new Array;if(1===p)v.push(new Uint8Array(t,148));else{for(var m=ih[g],y=0,b=i,w=r,x=0;x<o;x++)y+=Math.max(1,b+3&-4)*Math.max(1,w+3&-4)*m,b>>>=1,w>>>=1;var _=148;for(x=0;x<p;x++)v.push(new Uint8Array(t,_,y)),_+=y}return v.map((function(t){return new lh(t,{format:g,width:i,height:r,levels:o})}))}throw 64&s?new Error("DDSLoader does not support uncompressed texture data."):512&s?new Error("DDSLoader does not supported YUV uncompressed texture data."):131072&s?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):2&s?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}();Wc.setExtensionXhrType("ktx",Wc.XHR_RESPONSE_TYPE.BUFFER);var bh=[171,75,84,88,32,49,49,187,13,10,26,10],wh=((fh={})[rh.r.UNSIGNED_BYTE]=1,fh[rh.r.UNSIGNED_SHORT]=2,fh[rh.r.INT]=4,fh[rh.r.UNSIGNED_INT]=4,fh[rh.r.FLOAT]=4,fh[rh.r.HALF_FLOAT]=8,fh),xh=((ph={})[rh.h.RGBA]=4,ph[rh.h.RGB]=3,ph[rh.h.RG]=2,ph[rh.h.RED]=1,ph[rh.h.LUMINANCE]=1,ph[rh.h.LUMINANCE_ALPHA]=2,ph[rh.h.ALPHA]=1,ph),_h=((gh={})[rh.r.UNSIGNED_SHORT_4_4_4_4]=2,gh[rh.r.UNSIGNED_SHORT_5_5_5_1]=2,gh[rh.r.UNSIGNED_SHORT_5_6_5]=2,gh),Th=function(){function t(){}return t.use=function(e,n){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url,i=t.parse(r,e.data),o=i.compressed,a=i.uncompressed,s=i.kvData;if(o){var u=hh(r,o,e.metadata);if(s&&u.textures)for(var l in u.textures)u.textures[l].baseTexture.ktxKeyValueData=s;Object.assign(e,u)}else if(a){var c={};a.forEach((function(t,e){var n=new _l.t(new _l.c(t.resource,{mipmap:rh.k.OFF,alphaMode:rh.a.NO_PREMULTIPLIED_ALPHA,type:t.type,format:t.format})),i=r+"-"+(e+1);s&&(n.baseTexture.ktxKeyValueData=s),_l.c.addToCache(n.baseTexture,i),_l.t.addToCache(n,i),0===e&&(c[r]=n,_l.c.addToCache(n.baseTexture,r),_l.t.addToCache(n,r)),c[i]=n})),Object.assign(e,{textures:c})}}catch(t){return void n(t)}n()},t.parse=function(e,n){var r=new DataView(n);if(!t.validate(e,r))return null;var i=67305985===r.getUint32(12,!0),o=r.getUint32(16,i),a=r.getUint32(24,i),s=r.getUint32(28,i),u=r.getUint32(36,i),l=r.getUint32(40,i)||1,c=r.getUint32(44,i)||1,h=r.getUint32(48,i)||1,d=r.getUint32(52,i),A=r.getUint32(56,i),f=r.getUint32(60,i);if(0===l||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");var p,g=u+3&-4,v=l+3&-4,m=new Array(h),y=u*l;if(0===o&&(y=g*v),void 0===(p=0!==o?wh[o]?wh[o]*xh[a]:_h[o]:ih[s]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var b=t.loadKeyValueData?t.parseKvData(r,f,i):null,w=y*p,x=u,_=l,T=g,E=v,S=64+f,M=0;M<A;M++){for(var C=r.getUint32(S,i),I=S+4,N=0;N<h;N++){var B=m[N];B||(B=m[N]=new Array(A)),B[M]={levelID:M,levelWidth:A>1||0!==o?x:T,levelHeight:A>1||0!==o?_:E,levelBuffer:new Uint8Array(n,I,w)},I+=w}S=(S+=C+4)%4!=0?S+4-S%4:S,w=(T=(x=x>>1||1)+4-1&-4)*(E=(_=_>>1||1)+4-1&-4)*p}return 0!==o?{uncompressed:m.map((function(e){var n=e[0].levelBuffer,r=!1;return o===rh.r.FLOAT?n=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):o===rh.r.UNSIGNED_INT?(r=!0,n=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):o===rh.r.INT&&(r=!0,n=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new _l.i(n,{width:e[0].levelWidth,height:e[0].levelHeight}),type:o,format:r?t.convertFormatToInteger(a):a}})),kvData:b}:{compressed:m.map((function(t){return new lh(null,{format:s,width:u,height:l,levels:A,levelBuffers:t})})),kvData:b}},t.validate=function(t,e){for(var n=0;n<bh.length;n++)if(e.getUint8(n)!==bh[n])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},t.convertFormatToInteger=function(t){switch(t){case rh.h.RGBA:return rh.h.RGBA_INTEGER;case rh.h.RGB:return rh.h.RGB_INTEGER;case rh.h.RG:return rh.h.RG_INTEGER;case rh.h.RED:return rh.h.RED_INTEGER;default:return t}},t.parseKvData=function(t,e,n){for(var r=new Map,i=0;i<e;){var o=t.getUint32(64+i,n),a=64+i+4,s=3-(o+3)%4;if(0===o||o>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var u=0;u<o&&0!==t.getUint8(a+u);u++);if(-1===u){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=(new TextDecoder).decode(new Uint8Array(t.buffer,a,u)),c=new DataView(t.buffer,a+u+1,o-u-1);r.set(l,c),i+=4+o+s}return r},t.loadKeyValueData=!1,t}(),Eh=function(t,e){return(Eh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Sh(t,e){function n(){this.constructor=t}Eh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Mh,Ch,Ih=function(t){function e(e,n,r,i){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var o=t.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=rh.b.NORMAL,o.autoResize=i,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return Sh(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Object(cl.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(hl.b),Nh=function(){function t(t,e,n){this.geometry=new _l.l,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var i=t[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||rh.r.FLOAT,offset:i.offset},e[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new _l.h(Object(cl.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n)(a=this.dynamicProperties[n]).offset=e,e+=a.size,this.dynamicStride+=a.size;var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new _l.h(this.dynamicData,!1,!1);var i=0;for(this.staticStride=0,n=0;n<this.staticProperties.length;++n)(a=this.staticProperties[n]).offset=i,i+=a.size,this.staticStride+=a.size;var o=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new _l.h(this.staticData,!0,!1),n=0;n<this.dynamicProperties.length;++n){var a=this.dynamicProperties[n];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===rh.r.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(n=0;n<this.staticProperties.length;++n)a=this.staticProperties[n],t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===rh.r.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)},t.prototype.uploadDynamic=function(t,e,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(t,e,n,i.type===rh.r.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(t,e,n,i.type===rh.r.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Bh=function(t){function e(e){var n=t.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new Al.d,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:rh.r.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=_l.r.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=_l.s.for2d(),n}return Sh(e,t),e.prototype.render=function(t){var e=t.children,n=t._maxSize,r=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>n&&!t.autoResize&&(o=n);var a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));var s=e[0]._texture.baseTexture;this.state.blendMode=Object(cl.correctBlendMode)(t.blendMode,s.alphaMode),i.state.set(this.state);var u=i.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=Object(cl.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,s.alphaMode),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var c=!1,h=0,d=0;h<o;h+=r,d+=1){var A=o-h;A>r&&(A=r),d>=a.length&&a.push(this._generateOneMoreBuffer(t));var f=a[d];f.uploadDynamic(e,h,A);var p=t._bufferUpdateIDs[d]||0;(c=c||f._updateID<p)&&(f._updateID=t._updateID,f.uploadStatic(e,h,A)),i.geometry.bind(f.geometry),u.drawElements(u.TRIANGLES,6*A,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],n=t._maxSize,r=t._batchSize,i=t._properties,o=0;o<n;o+=r)e.push(new Nh(this.properties,i,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,n=t._properties;return new Nh(this.properties,n,e)},e.prototype.uploadVertices=function(t,e,n,r,i,o){for(var a=0,s=0,u=0,l=0,c=0;c<n;++c){var h=t[e+c],d=h._texture,A=h.scale.x,f=h.scale.y,p=d.trim,g=d.orig;p?(a=(s=p.x-h.anchor.x*g.width)+p.width,u=(l=p.y-h.anchor.y*g.height)+p.height):(a=g.width*(1-h.anchor.x),s=g.width*-h.anchor.x,u=g.height*(1-h.anchor.y),l=g.height*-h.anchor.y),r[o]=s*A,r[o+1]=l*f,r[o+i]=a*A,r[o+i+1]=l*f,r[o+2*i]=a*A,r[o+2*i+1]=u*f,r[o+3*i]=s*A,r[o+3*i+1]=u*f,o+=4*i}},e.prototype.uploadPosition=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},e.prototype.uploadUvs=function(t,e,n,r,i,o){for(var a=0;a<n;++a){var s=t[e+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,n,r,i,o){for(var a=0;a<n;++a){var s=t[e+a],u=s._texture.baseTexture.alphaMode>0,l=s.alpha,c=l<1&&u?Object(cl.premultiplyTint)(s._tintRGB,l):s._tintRGB+(255*l<<24);r[o]=c,r[o+i]=c,r[o+2*i]=c,r[o+3*i]=c,o+=4*i}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(_l.m),kh=n(4);(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"})(Mh||(Mh={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(Ch||(Ch={}));var Ph={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},Dh=function(){function t(){this.color=16777215,this.alpha=1,this.texture=_l.t.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=_l.t.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),Lh=function(t,e){return(Lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Oh(t,e){function n(){this.constructor=t}Lh(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Rh(t,e){var n,r;void 0===e&&(e=!1);var i=t.length;if(!(i<6)){for(var o=0,a=0,s=t[i-2],u=t[i-1];a<i;a+=2){var l=t[a],c=t[a+1];o+=(l-s)*(c+u),s=l,u=c}if(!e&&o>0||e&&o<=0){var h=i/2;for(a=h+h%2;a<i;a+=2){var d=i-a-2,A=i-a-1,f=a,p=a+1;n=[t[f],t[d]],t[d]=n[0],t[f]=n[1],r=[t[p],t[A]],t[A]=r[0],t[p]=r[1]}}}}var Fh={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var n=t.points,r=t.holes,i=e.points,o=e.indices;if(n.length>=6){Rh(n,!1);for(var a=[],s=0;s<r.length;s++){var u=r[s];Rh(u.points,!0),a.push(n.length/2),n=n.concat(u.points)}var l=Object(cl.earcut)(n,a,2);if(!l)return;var c=i.length/2;for(s=0;s<l.length;s+=3)o.push(l[s]+c),o.push(l[s+1]+c),o.push(l[s+2]+c);for(s=0;s<n.length;s++)i.push(n[s])}}},Uh={build:function(t){var e,n,r,i,o,a,s=t.points;if(t.type===Al.l.CIRC){var u=t.shape;e=u.x,n=u.y,o=a=u.radius,r=i=0}else if(t.type===Al.l.ELIP){var l=t.shape;e=l.x,n=l.y,o=l.width,a=l.height,r=i=0}else{var c=t.shape,h=c.width/2,d=c.height/2;e=c.x+h,n=c.y+d,r=h-(o=a=Math.max(0,Math.min(c.radius,Math.min(h,d)))),i=d-a}if(o>=0&&a>=0&&r>=0&&i>=0){var A=Math.ceil(2.3*Math.sqrt(o+a)),f=8*A+(r?4:0)+(i?4:0);if(s.length=f,0!==f){if(0===A)return s.length=8,s[0]=s[6]=e+r,s[1]=s[3]=n+i,s[2]=s[4]=e-r,void(s[5]=s[7]=n-i);var p,g,v=0,m=4*A+(r?2:0)+2,y=m,b=f,w=e+(p=r+o),x=e-p,_=n+(g=i);if(s[v++]=w,s[v++]=_,s[--m]=_,s[--m]=x,i){var T=n-g;s[y++]=x,s[y++]=T,s[--b]=T,s[--b]=w}for(var E=1;E<A;E++){var S=Math.PI/2*(E/A);w=e+(p=r+Math.cos(S)*o),x=e-p,_=n+(g=i+Math.sin(S)*a),T=n-g,s[v++]=w,s[v++]=_,s[--m]=_,s[--m]=x,s[y++]=x,s[y++]=T,s[--b]=T,s[--b]=w}w=e+(p=r),x=e-p,_=n+(g=i+a),T=n-g,s[v++]=w,s[v++]=_,s[--b]=T,s[--b]=w,r&&(s[v++]=x,s[v++]=_,s[--b]=T,s[--b]=x)}}else s.length=0},triangulate:function(t,e){var n,r,i=t.points,o=e.points,a=e.indices,s=o.length/2,u=s;if(t.type!==Al.l.RREC){var l=t.shape;n=l.x,r=l.y}else{var c=t.shape;n=c.x+c.width/2,r=c.y+c.height/2}var h=t.matrix;o.push(t.matrix?h.a*n+h.c*r+h.tx:n,t.matrix?h.b*n+h.d*r+h.ty:r),s++,o.push(i[0],i[1]);for(var d=2;d<i.length;d+=2)o.push(i[d],i[d+1]),a.push(s++,u,s);a.push(u+1,u,s)}};function jh(t,e,n){return t+(e-t)*n}function zh(t,e,n,r,i,o,a){void 0===a&&(a=[]);for(var s=a,u=0,l=0,c=0,h=0,d=0,A=0,f=0,p=0;f<=20;++f)u=jh(t,n,p=f/20),l=jh(e,r,p),c=jh(n,i,p),h=jh(r,o,p),d=jh(u,c,p),A=jh(l,h,p),0===f&&s[s.length-2]===d&&s[s.length-1]===A||s.push(d,A);return s}var Hh={build:function(t){if(ud.nextRoundedRectBehavior)Uh.build(t);else{var e=t.shape,n=t.points,r=e.x,i=e.y,o=e.width,a=e.height,s=Math.max(0,Math.min(e.radius,Math.min(o,a)/2));n.length=0,s?(zh(r,i+s,r,i,r+s,i,n),zh(r+o-s,i,r+o,i,r+o,i+s,n),zh(r+o,i+a-s,r+o,i+a,r+o-s,i+a,n),zh(r+s,i+a,r,i+a,r,i+a-s,n)):n.push(r,i,r+o,i,r+o,i+a,r,i+a)}},triangulate:function(t,e){if(ud.nextRoundedRectBehavior)Uh.triangulate(t,e);else{for(var n=t.points,r=e.points,i=e.indices,o=r.length/2,a=Object(cl.earcut)(n,null,2),s=0,u=a.length;s<u;s+=3)i.push(a[s]+o),i.push(a[s+1]+o),i.push(a[s+2]+o);for(s=0,u=n.length;s<u;s++)r.push(n[s],n[++s])}}};function Qh(t,e,n,r,i,o,a,s){var u,l;a?(u=r,l=-n):(u=-r,l=n);var c=t-n*i+u,h=e-r*i+l,d=t+n*o+u,A=e+r*o+l;return s.push(c,h),s.push(d,A),2}function Gh(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=Math.atan2(u,l),h=Math.atan2(i-t,o-e);s&&c<h?c+=2*Math.PI:!s&&c>h&&(h+=2*Math.PI);var d=c,A=h-c,f=Math.abs(A),p=Math.sqrt(u*u+l*l),g=1+(15*f*Math.sqrt(p)/Math.PI>>0),v=A/g;if(d+=v,s){a.push(t,e),a.push(n,r);for(var m=1,y=d;m<g;m++,y+=v)a.push(t,e),a.push(t+Math.sin(y)*p,e+Math.cos(y)*p);a.push(t,e),a.push(i,o)}else{for(a.push(n,r),a.push(t,e),m=1,y=d;m<g;m++,y+=v)a.push(t+Math.sin(y)*p,e+Math.cos(y)*p),a.push(t,e);a.push(i,o),a.push(t,e)}return 2*g}function Vh(t,e){t.lineStyle.native?function(t,e){var n=0,r=t.shape,i=t.points||r.points,o=r.type!==Al.l.POLY||r.closeStroke;if(0!==i.length){var a=e.points,s=e.indices,u=i.length/2,l=a.length/2,c=l;for(a.push(i[0],i[1]),n=1;n<u;n++)a.push(i[2*n],i[2*n+1]),s.push(c,c+1),c++;o&&s.push(c,l)}}(t,e):function(t,e){var n=t.shape,r=t.points||n.points.slice(),i=e.closePointEps;if(0!==r.length){var o=t.lineStyle,a=new Al.g(r[0],r[1]),s=new Al.g(r[r.length-2],r[r.length-1]),u=n.type!==Al.l.POLY||n.closeStroke,l=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(u){r=r.slice(),l&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var c=.5*(a.x+s.x),h=.5*(s.y+a.y);r.unshift(c,h),r.push(c,h)}var d=e.points,A=r.length/2,f=r.length,p=d.length/2,g=o.width/2,v=g*g,m=o.miterLimit*o.miterLimit,y=r[0],b=r[1],w=r[2],x=r[3],_=0,T=0,E=-(b-x),S=y-w,M=0,C=0,I=Math.sqrt(E*E+S*S);E/=I,S/=I,E*=g,S*=g;var N=o.alignment,B=2*(1-N),k=2*N;u||(o.cap===Ch.ROUND?f+=Gh(y-E*(B-k)*.5,b-S*(B-k)*.5,y-E*B,b-S*B,y+E*k,b+S*k,d,!0)+2:o.cap===Ch.SQUARE&&(f+=Qh(y,b,E,S,B,k,!0,d))),d.push(y-E*B,b-S*B),d.push(y+E*k,b+S*k);for(var P=1;P<A-1;++P){y=r[2*(P-1)],b=r[2*(P-1)+1],w=r[2*P],x=r[2*P+1],_=r[2*(P+1)],T=r[2*(P+1)+1],E=-(b-x),S=y-w,E/=I=Math.sqrt(E*E+S*S),S/=I,E*=g,S*=g,M=-(x-T),C=w-_,M/=I=Math.sqrt(M*M+C*C),C/=I,M*=g,C*=g;var D=w-y,L=b-x,O=w-_,R=T-x,F=L*O-R*D,U=F<0;if(Math.abs(F)<.1)d.push(w-E*B,x-S*B),d.push(w+E*k,x+S*k);else{var j=(-E+y)*(-S+x)-(-E+w)*(-S+b),z=(-M+_)*(-C+x)-(-M+w)*(-C+T),H=(D*z-O*j)/F,Q=(R*j-L*z)/F,G=(H-w)*(H-w)+(Q-x)*(Q-x),V=w+(H-w)*B,W=x+(Q-x)*B,Y=w-(H-w)*k,X=x-(Q-x)*k,q=U?B:k;G<=Math.min(D*D+L*L,O*O+R*R)+q*q*v?o.join===Mh.BEVEL||G/v>m?(U?(d.push(V,W),d.push(w+E*k,x+S*k),d.push(V,W),d.push(w+M*k,x+C*k)):(d.push(w-E*B,x-S*B),d.push(Y,X),d.push(w-M*B,x-C*B),d.push(Y,X)),f+=2):o.join===Mh.ROUND?U?(d.push(V,W),d.push(w+E*k,x+S*k),f+=Gh(w,x,w+E*k,x+S*k,w+M*k,x+C*k,d,!0)+4,d.push(V,W),d.push(w+M*k,x+C*k)):(d.push(w-E*B,x-S*B),d.push(Y,X),f+=Gh(w,x,w-E*B,x-S*B,w-M*B,x-C*B,d,!1)+4,d.push(w-M*B,x-C*B),d.push(Y,X)):(d.push(V,W),d.push(Y,X)):(d.push(w-E*B,x-S*B),d.push(w+E*k,x+S*k),o.join===Mh.ROUND?f+=U?Gh(w,x,w+E*k,x+S*k,w+M*k,x+C*k,d,!0)+2:Gh(w,x,w-E*B,x-S*B,w-M*B,x-C*B,d,!1)+2:o.join===Mh.MITER&&G/v<=m&&(U?(d.push(Y,X),d.push(Y,X)):(d.push(V,W),d.push(V,W)),f+=2),d.push(w-M*B,x-C*B),d.push(w+M*k,x+C*k),f+=2)}}y=r[2*(A-2)],b=r[2*(A-2)+1],w=r[2*(A-1)],E=-(b-(x=r[2*(A-1)+1])),S=y-w,E/=I=Math.sqrt(E*E+S*S),S/=I,E*=g,S*=g,d.push(w-E*B,x-S*B),d.push(w+E*k,x+S*k),u||(o.cap===Ch.ROUND?f+=Gh(w-E*(B-k)*.5,x-S*(B-k)*.5,w-E*B,x-S*B,w+E*k,x+S*k,d,!1)+2:o.cap===Ch.SQUARE&&(f+=Qh(w,x,E,S,B,k,!1,d)));var K=e.indices,Z=Ph.epsilon*Ph.epsilon;for(P=p;P<f+p-2;++P)y=d[2*P],b=d[2*P+1],w=d[2*(P+1)],x=d[2*(P+1)+1],_=d[2*(P+2)],T=d[2*(P+2)+1],Math.abs(y*(x-T)+w*(T-b)+_*(b-x))<Z||K.push(P,P+1,P+2)}}(t,e)}var Wh,Yh,Xh=function(){function t(){}return t.curveTo=function(t,e,n,r,i,o){var a=o[o.length-2],s=o[o.length-1]-e,u=a-t,l=r-e,c=n-t,h=Math.abs(s*c-u*l);if(h<1e-8||0===i)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var d=s*s+u*u,A=l*l+c*c,f=s*l+u*c,p=i*Math.sqrt(d)/h,g=i*Math.sqrt(A)/h,v=p*f/d,m=g*f/A,y=p*c+g*u,b=p*l+g*s,w=u*(g+v),x=s*(g+v),_=c*(p+m),T=l*(p+m);return{cx:y+t,cy:b+e,radius:i,startAngle:Math.atan2(x-b,w-y),endAngle:Math.atan2(T-b,_-y),anticlockwise:u*l>c*s}},t.arc=function(t,e,n,r,i,o,a,s,u){for(var l=a-o,c=Ph._segmentsCount(Math.abs(l)*i,40*Math.ceil(Math.abs(l)/Al.f)),h=l/(2*c),d=2*h,A=Math.cos(h),f=Math.sin(h),p=c-1,g=p%1/p,v=0;v<=p;++v){var m=h+o+d*(v+g*v),y=Math.cos(m),b=-Math.sin(m);u.push((A*y+f*b)*i+n,(A*-b+f*y)*i+r)}},t}(),qh=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o,a,s){for(var u=0,l=0,c=0,h=0,d=0,A=0,f=0,p=0,g=0,v=0,m=0,y=t,b=e,w=1;w<=10;++w)v=y-(p=(f=(A=(d=1-(l=w/10))*d)*d)*t+3*A*l*n+3*d*(c=l*l)*i+(h=c*l)*a),m=b-(g=f*e+3*A*l*r+3*d*c*o+h*s),y=p,b=g,u+=Math.sqrt(v*v+m*m);return u},t.curveTo=function(e,n,r,i,o,a,s){var u=s[s.length-2],l=s[s.length-1];s.length-=2;var c=Ph._segmentsCount(t.curveLength(u,l,e,n,r,i,o,a)),h=0,d=0,A=0,f=0,p=0;s.push(u,l);for(var g=1,v=0;g<=c;++g)A=(d=(h=1-(v=g/c))*h)*h,p=(f=v*v)*v,s.push(A*u+3*d*v*e+3*h*f*r+p*o,A*l+3*d*v*n+3*h*f*i+p*a)},t}(),Kh=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o){var a=t-2*n+i,s=e-2*r+o,u=2*n-2*t,l=2*r-2*e,c=4*(a*a+s*s),h=4*(a*u+s*l),d=u*u+l*l,A=2*Math.sqrt(c+h+d),f=Math.sqrt(c),p=2*c*f,g=2*Math.sqrt(d),v=h/f;return(p*A+f*h*(A-g)+(4*d*c-h*h)*Math.log((2*f+v+A)/(v+g)))/(4*p)},t.curveTo=function(e,n,r,i,o){for(var a=o[o.length-2],s=o[o.length-1],u=Ph._segmentsCount(t.curveLength(a,s,e,n,r,i)),l=0,c=0,h=1;h<=u;++h){var d=h/u;l=a+(e-a)*d,c=s+(n-s)*d,o.push(l+(e+(r-e)*d-l)*d,c+(n+(i-n)*d-c)*d)}},t}(),Zh=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,n){this.reset(),this.style=t,this.start=e,this.attribStart=n},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),Jh=((Wh={})[Al.l.POLY]=Fh,Wh[Al.l.CIRC]=Uh,Wh[Al.l.ELIP]=Uh,Wh[Al.l.RECT]={build:function(t){var e=t.shape,n=e.x,r=e.y,i=e.width,o=e.height,a=t.points;a.length=0,a.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(t,e){var n=t.points,r=e.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},Wh[Al.l.RREC]=Hh,Wh),$h=[],td=[],ed=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=e,this.matrix=r,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),nd=new Al.g,rd=new hl.a,id=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new hl.a,e.boundsDirty=-1,e}return Oh(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),td.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),$h.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=new ed(t,e,n,r);return this.graphicsData.push(i),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var n=new ed(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,nd):nd.copyFrom(t),r.shape.contains(nd.x,nd.y))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++)if(r.holes[o].shape.contains(nd.x,nd.y)){i=!0;break}if(!i)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,n=this.graphicsData,r=null,i=null;this.batches.length>0&&(i=(r=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var a=n[o],s=a.fillStyle,u=a.lineStyle;Jh[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix),(s.visible||u.visible)&&this.processHoles(a.holes);for(var l=0;l<2;l++){var c=0===l?s:u;if(c.visible){var h=c.texture.baseTexture,d=this.indices.length,A=this.points.length/2;h.wrapMode=rh.s.REPEAT,0===l?this.processFill(a):this.processLine(a);var f=this.points.length/2-A;0!==f&&(r&&!this._compareStyles(i,c)&&(r.end(d,A),r=null),r||((r=$h.pop()||new Zh).begin(c,d,A),this.batches.push(r),i=c),this.addUvs(this.points,e,c.texture,A,f,c.matrix))}}}var p=this.indices.length,g=this.points.length/2;if(r&&r.end(p,g),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var v=g>65535&&t;this.indicesUint16=v?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var n=this.graphicsData[t],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,n=t.length;e<n;e++)for(var r=t[e],i=0;i<r.size;i++){var o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++_l.c._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),td.push(this.drawCalls[e]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=td.pop();i||((i=new _l.d).texArray=new _l.g),i.texArray.count=0,i.start=0,i.size=0,i.type=rh.f.TRIANGLES;var o=0,a=null,s=0,u=!1,l=rh.f.TRIANGLES,c=0;for(this.drawCalls.push(i),e=0;e<this.batches.length;e++){var h=this.batches[e],d=h.style,A=d.texture.baseTexture;u!==!!d.native&&(l=(u=!!d.native)?rh.f.LINES:rh.f.TRIANGLES,a=null,o=8,t++),a!==A&&(a=A,A._batchEnabled!==t&&(8===o&&(t++,o=0,i.size>0&&((i=td.pop())||((i=new _l.d).texArray=new _l.g),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=l),A.touched=1,A._batchEnabled=t,A._batchLocation=o,A.wrapMode=rh.s.REPEAT,i.texArray.elements[i.texArray.count++]=A,o++)),i.size+=h.size,c+=h.size,s=A._batchLocation,this.addColors(n,d.color,d.alpha,h.attribSize,h.attribStart),this.addTextureIds(r,s,h.attribSize,h.attribStart)}_l.c._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*t.length*4),o=new Float32Array(i),a=new Uint32Array(i),s=0,u=0;u<t.length/2;u++)o[s++]=t[2*u],o[s++]=t[2*u+1],o[s++]=e[2*u],o[s++]=e[2*u+1],a[s++]=n[u],o[s++]=r[u];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?Fh.triangulate(t,this):Jh[t.type].triangulate(t,this)},e.prototype.processLine=function(t){Vh(t,this);for(var e=0;e<t.holes.length;e++)Vh(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var n=t[e];Jh[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=rd,n=Al.d.IDENTITY;this._bounds.clear(),e.clear();for(var r=0;r<this.graphicsData.length;r++){var i=this.graphicsData[r],o=i.shape,a=i.type,s=i.lineStyle,u=i.matrix||Al.d.IDENTITY,l=0;if(s&&s.visible&&(l=s.width,a!==Al.l.POLY||i.fillStyle.visible?l*=Math.max(0,s.alignment):l*=Math.max(s.alignment,1-s.alignment)),n!==u&&(e.isEmpty()||(t.addBoundsMatrix(e,n),e.clear()),n=u),a===Al.l.RECT||a===Al.l.RREC){var c=o;e.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,l,l)}else if(a===Al.l.CIRC){var h=o;e.addFramePad(h.x,h.y,h.x,h.y,h.radius+l,h.radius+l)}else if(a===Al.l.ELIP){var d=o;e.addFramePad(d.x,d.y,d.x,d.y,d.width+l,d.height+l)}else{var A=o;t.addVerticesMatrix(n,A.points,0,A.points.length,l,l)}}e.isEmpty()||t.addBoundsMatrix(e,n),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var n=0;n<t.length/2;n++){var r=t[2*n],i=t[2*n+1];t[2*n]=e.a*r+e.c*i+e.tx,t[2*n+1]=e.b*r+e.d*i+e.ty}},e.prototype.addColors=function(t,e,n,r,i){void 0===i&&(i=0);var o=(e>>16)+(65280&e)+((255&e)<<16),a=Object(cl.premultiplyTint)(o,n);t.length=Math.max(t.length,i+r);for(var s=0;s<r;s++)t[i+s]=a},e.prototype.addTextureIds=function(t,e,n,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+n);for(var i=0;i<n;i++)t[r+i]=e},e.prototype.addUvs=function(t,e,n,r,i,o){void 0===o&&(o=null);for(var a=0,s=e.length,u=n.frame;a<i;){var l=t[2*(r+a)],c=t[2*(r+a)+1];if(o){var h=o.a*l+o.c*c+o.tx;c=o.b*l+o.d*c+o.ty,l=h}a++,e.push(l/u.width,c/u.height)}var d=n.baseTexture;(u.width<d.width||u.height<d.height)&&this.adjustUvs(e,n,s,i)},e.prototype.adjustUvs=function(t,e,n,r){for(var i=e.baseTexture,o=1e-6,a=n+2*r,s=e.frame,u=s.width/i.width,l=s.height/i.height,c=s.x/s.width,h=s.y/s.height,d=Math.floor(t[n]+o),A=Math.floor(t[n+1]+o),f=n+2;f<a;f+=2)d=Math.min(d,Math.floor(t[f]+o)),A=Math.min(A,Math.floor(t[f+1]+o));for(c-=d,h-=A,f=n;f<a;f+=2)t[f]=(t[f]+c)*u,t[f+1]=(t[f+1]+h)*l},e.BATCHABLE_SIZE=100,e}(_l.e),od=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Ch.BUTT,e.join=Mh.MITER,e.miterLimit=10,e}return Oh(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Dh),ad=new Float32Array(3),sd={},ud=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new Dh,n._lineStyle=new od,n._matrix=null,n._holeMode=!1,n.state=_l.s.for2d(),n._geometry=e||new id,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=rh.b.NORMAL,n}return Oh(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,n,r,i){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===i&&(i=!1),"number"==typeof t&&(t={width:t,color:e,alpha:n,alignment:r,native:i}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:_l.t.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Ch.BUTT,join:Mh.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Al.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Al.h,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return r===t&&i===e||n.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),Kh.curveTo(t,e,n,r,i),this},e.prototype.bezierCurveTo=function(t,e,n,r,i,o){return this._initCurve(),qh.curveTo(t,e,n,r,i,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,n,r,i){this._initCurve(t,e);var o=this.currentPath.points,a=Xh.curveTo(t,e,n,r,i,o);if(a){var s=a.cx,u=a.cy,l=a.radius,c=a.startAngle,h=a.endAngle,d=a.anticlockwise;this.arc(s,u,l,c,h,d)}return this},e.prototype.arc=function(t,e,n,r,i,o){if(void 0===o&&(o=!1),r===i)return this;if(!o&&i<=r?i+=Al.f:o&&r<=i&&(r+=Al.f),i-r==0)return this;var a=t+Math.cos(r)*n,s=e+Math.sin(r)*n,u=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var c=Math.abs(l[l.length-2]-a),h=Math.abs(l[l.length-1]-s);c<u&&h<u||l.push(a,s)}else this.moveTo(a,s),l=this.currentPath.points;return Xh.arc(a,s,t,e,n,r,i,o,l),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:_l.t.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:_l.t.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,n,r){return this.drawShape(new Al.j(t,e,n,r))},e.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new Al.k(t,e,n,r,i))},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new Al.a(t,e,n))},e.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new Al.c(t,e,n,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];var i=!0,o=n[0];o.points?(i=o.closeStroke,t=o.points):t=Array.isArray(n[0])?n[0]:n;var a=new Al.h(t);return a.closeStroke=i,this.drawShape(a),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==Al.l.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,n=t.context.supports.uint32Indices;e.updateBatches(n),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var r=0;r<n;r++){var i=t.batches[r],o=i.style.color,a=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),s=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),u={vertexData:a,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),uvs:s,_batchRGB:Object(cl.hex2rgb)(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=u}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,n=this.batches.length;e<n;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),n=this._geometry,r=this.tint,i=this.worldAlpha,o=e.uniforms,a=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*i,o.tint[1]=(r>>8&255)/255*i,o.tint[2]=(255&r)/255*i,o.tint[3]=i,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(var s=0,u=a.length;s<u;s++)this._renderDrawCallDirect(t,n.drawCalls[s])},e.prototype._renderDrawCallDirect=function(t,e){for(var n=e.texArray,r=e.type,i=e.size,o=e.start,a=n.count,s=0;s<a;s++)t.texture.bind(n.elements[s],s);t.geometry.draw(r,i,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,n=this.pluginName;if(!e){if(!sd[n]){for(var r=t.plugins[n].MAX_TEXTURES,i=new Int32Array(r),o=0;o<r;o++)i[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Al.d,default:_l.v.from({uSamplers:i},!0)},s=t.plugins[n]._shader.program;sd[n]=new _l.r(s,a)}e=sd[n]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,n=e.minX,r=e.minY,i=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,n,r,i,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Object(cl.hex2rgb)(this.tint,ad),e=0;e<this.batches.length;e++){var n=this.batches[e],r=n._batchRGB,i=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);n._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this._geometry.points,l=this.vertexData,c=0,h=0;h<u.length;h+=2){var d=u[h],A=u[h+1];l[c++]=n*d+i*A+a,l[c++]=o*A+r*d+s}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new Al.g,e}(hl.b),ld=function(t,e){return(ld=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},cd=new Al.g,hd=new Uint16Array([0,1,2,0,2,3]),dd=function(t){function e(e){var n=t.call(this)||this;return n._anchor=new Al.e(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=rh.b.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||_l.t.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=hd,n.pluginName="batch",n.isSprite=!0,n._roundPixels=kh.b.ROUND_PIXELS,n}return function(t,e){function n(){this.constructor=t}ld(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(cl.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(cl.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this.vertexData,l=t.trim,c=t.orig,h=this._anchor,d=0,A=0,f=0,p=0;if(l?(d=(A=l.x-h._x*c.width)+l.width,f=(p=l.y-h._y*c.height)+l.height):(d=(A=-h._x*c.width)+c.width,f=(p=-h._y*c.height)+c.height),u[0]=n*A+i*p+a,u[1]=o*p+r*A+s,u[2]=n*d+i*p+a,u[3]=o*p+r*d+s,u[4]=n*d+i*f+a,u[5]=o*f+r*d+s,u[6]=n*A+i*f+a,u[7]=o*f+r*A+s,this._roundPixels)for(var g=kh.b.RESOLUTION,v=0;v<u.length;++v)u[v]=Math.round((u[v]*g|0)/g)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,c=i.ty,h=-r._x*n.width,d=h+n.width,A=-r._y*n.height,f=A+n.height;e[0]=o*h+s*A+l,e[1]=u*A+a*h+c,e[2]=o*d+s*A+l,e[3]=u*A+a*d+c,e[4]=o*d+s*f+l,e[5]=u*f+a*d+c,e[6]=o*h+s*f+l,e[7]=u*f+a*h+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new hl.a),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Al.j),e=this._localBoundsRect),this._localBounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,cd);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,i=0;return cd.x>=r&&cd.x<r+e&&(i=-n*this.anchor.y,cd.y>=i&&cd.y<i+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,n){return new e(t instanceof _l.t?t:_l.t.from(t,n))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Object(cl.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Object(cl.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||_l.t.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(hl.b),Ad=function(t,e){return(Ad=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Yh||(Yh={}));var fd={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Yh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},pd=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],gd=function(){function t(t){this.styleID=0,this.reset(),yd(this,t,t)}return t.prototype.clone=function(){var e={};return yd(e,this,fd),new t(e)},t.prototype.reset=function(){yd(this,fd,fd)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=md(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=md(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=md(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&pd.indexOf(r)<0&&(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function vd(t){return"number"==typeof t?Object(cl.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function md(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=vd(t[e]);return t}return vd(t)}function yd(t,e,n){for(var r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var bd=function(){function t(t,e,n,r,i,o,a,s,u){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=u}return t.measureText=function(e,n,r,i){void 0===i&&(i=t._canvas),r=null==r?n.wordWrap:r;var o=n.toFontString(),a=t.measureFont(o);0===a.fontSize&&(a.fontSize=n.fontSize,a.ascent=n.fontSize);var s=i.getContext("2d");s.font=o;for(var u=(r?t.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),l=new Array(u.length),c=0,h=0;h<u.length;h++){var d=s.measureText(u[h]).width+(u[h].length-1)*n.letterSpacing;l[h]=d,c=Math.max(c,d)}var A=c+n.strokeThickness;n.dropShadow&&(A+=n.dropShadowDistance);var f=n.lineHeight||a.fontSize+n.strokeThickness,p=Math.max(f,a.fontSize+n.strokeThickness)+(u.length-1)*(f+n.leading);return n.dropShadow&&(p+=n.dropShadowDistance),new t(e,n,A,p,u,l,f+n.leading,c,a)},t.wordWrap=function(e,n,r){void 0===r&&(r=t._canvas);for(var i=r.getContext("2d"),o=0,a="",s="",u=Object.create(null),l=n.letterSpacing,c=n.whiteSpace,h=t.collapseSpaces(c),d=t.collapseNewlines(c),A=!h,f=n.wordWrapWidth+l,p=t.tokenize(e),g=0;g<p.length;g++){var v=p[g];if(t.isNewline(v)){if(!d){s+=t.addLine(a),A=!h,a="",o=0;continue}v=" "}if(h){var m=t.isBreakingSpace(v),y=t.isBreakingSpace(a[a.length-1]);if(m&&y)continue}var b=t.getFromCache(v,l,u,i);if(b>f)if(""!==a&&(s+=t.addLine(a),a="",o=0),t.canBreakWords(v,n.breakWords))for(var w=t.wordWrapSplit(v),x=0;x<w.length;x++){for(var _=w[x],T=1;w[x+T];){var E=w[x+T],S=_[_.length-1];if(t.canBreakChars(S,E,v,x,n.breakWords))break;_+=E,T++}x+=_.length-1;var M=t.getFromCache(_,l,u,i);M+o>f&&(s+=t.addLine(a),A=!1,a="",o=0),a+=_,o+=M}else{a.length>0&&(s+=t.addLine(a),a="",o=0);var C=g===p.length-1;s+=t.addLine(v,!C),A=!1,a="",o=0}else b+o>f&&(A=!1,s+=t.addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(v)||A)&&(a+=v,o+=b)}return s+t.addLine(a,!1)},t.addLine=function(e,n){return void 0===n&&(n=!0),e=t.trimRight(e),n?e+"\n":e},t.getFromCache=function(t,e,n,r){var i=n[t];if("number"!=typeof i){var o=t.length*e;i=r.measureText(t).width+o,n[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var n=e.length-1;n>=0;n--){var r=e[n];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,n){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var n=[],r="";if("string"!=typeof e)return n;for(var i=0;i<e.length;i++){var o=e[i],a=e[i+1];t.isBreakingSpace(o,a)||t.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,r,i){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={ascent:0,descent:0,fontSize:0},r=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),u=Math.ceil(t.HEIGHT_MULTIPLIER*s);s=s*t.BASELINE_MULTIPLIER|0,r.width=a,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var l=i.getImageData(0,0,a,u).data,c=l.length,h=4*a,d=0,A=0,f=!1;for(d=0;d<s;++d){for(var p=0;p<h;p+=4)if(255!==l[A+p]){f=!0;break}if(f)break;A+=h}for(n.ascent=s-d,A=c-h,f=!1,d=u;d>s;--d){for(p=0;p<h;p+=4)if(255!==l[A+p]){f=!0;break}if(f)break;A-=h}return n.descent=d-s,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var n=new OffscreenCanvas(0,0),r=n.getContext("2d");if(r&&r.measureText)return t.__canvas=n,n;e=document.createElement("canvas")}catch(t){e=document.createElement("canvas")}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d")),t.__context},enumerable:!1,configurable:!0}),t}();bd._fonts={},bd.METRICS_STRING="|q",bd.BASELINE_SYMBOL="M",bd.BASELINE_MULTIPLIER=1.4,bd.HEIGHT_MULTIPLIER=2,bd._newlines=[10,13],bd._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var wd={texture:!0,children:!1,baseTexture:!0},xd=function(t){function e(e,n,r){var i=this,o=!1;r||(r=document.createElement("canvas"),o=!0),r.width=3,r.height=3;var a=_l.t.from(r);return a.orig=new Al.j,a.trim=new Al.j,(i=t.call(this,a)||this)._ownCanvas=o,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=kh.b.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=e,i.style=n,i.localStyleID=-1,i}return function(t,e){function n(){this.constructor=t}Ad(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(t){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,i,o=this.context,a=bd.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,u=a.height,l=a.lines,c=a.lineHeight,h=a.lineWidths,d=a.maxLineWidth,A=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+2*n.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+2*n.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=n.strokeThickness,o.textBaseline=n.textBaseline,o.lineJoin=n.lineJoin,o.miterLimit=n.miterLimit;for(var f=n.dropShadow?2:1,p=0;p<f;++p){var g=n.dropShadow&&0===p,v=g?Math.ceil(Math.max(1,u)+2*n.padding):0,m=v*this._resolution;if(g){o.fillStyle="black",o.strokeStyle="black";var y=n.dropShadowColor,b=Object(cl.hex2rgb)("number"==typeof y?y:Object(cl.string2hex)(y)),w=n.dropShadowBlur*this._resolution,x=n.dropShadowDistance*this._resolution;o.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+n.dropShadowAlpha+")",o.shadowBlur=w,o.shadowOffsetX=Math.cos(n.dropShadowAngle)*x,o.shadowOffsetY=Math.sin(n.dropShadowAngle)*x+m}else o.fillStyle=this._generateFillStyle(n,l,a),o.strokeStyle=n.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var _=(c-A.fontSize)/2;(!e.nextLineHeightBehavior||c-A.fontSize<0)&&(_=0);for(var T=0;T<l.length;T++)r=n.strokeThickness/2,i=n.strokeThickness/2+T*c+A.ascent+_,"right"===n.align?r+=d-h[T]:"center"===n.align&&(r+=(d-h[T])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(l[T],r+n.padding,i+n.padding-v,!0),n.fill&&this.drawLetterSpacing(l[T],r+n.padding,i+n.padding-v)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,n,r,i){void 0===i&&(i=!1);var o=this._style.letterSpacing,a=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===o||a)return a&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),void(i?this.context.strokeText(t,n,r):this.context.fillText(t,n,r));for(var s=n,u=Array.from?Array.from(t):t.split(""),l=this.context.measureText(t).width,c=0,h=0;h<u.length;++h){var d=u[h];i?this.context.strokeText(d,s,r):this.context.fillText(d,s,r);for(var A="",f=h+1;f<u.length;++f)A+=u[f];s+=l-(c=this.context.measureText(A).width)+o,l=c}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Object(cl.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;n.trim.width=n._frame.width=t.width/this._resolution,n.trim.height=n._frame.height=t.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),n.updateUvs(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(e,n){return this.updateText(!0),-1===this._textureID&&(e=!1),t.prototype.getBounds.call(this,e,n)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,n){var r,i=t.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,s=this.canvas.width/this._resolution-o-2*a,u=this.canvas.height/this._resolution-o-2*a,l=i.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var h=l.length+1,d=1;d<h;++d)c.push(d/h);if(l.unshift(i[0]),c.unshift(0),l.push(i[i.length-1]),c.push(1),t.fillGradientType===Yh.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,a,s/2,u+a);var A=n.fontProperties.fontSize+t.strokeThickness;for(d=0;d<e.length;d++){var f=n.lineHeight*(d-1)+A,p=n.lineHeight*d,g=p;d>0&&f>p&&(g=(p+f)/2);var v=p+A,m=n.lineHeight*(d+1),y=v;d+1<e.length&&m<v&&(y=(v+m)/2);for(var b=(y-g)/u,w=0;w<l.length;w++){var x;x="number"==typeof c[w]?c[w]:w/l.length;var _=Math.min(1,Math.max(0,g/u+x*b));_=Number(_.toFixed(5)),r.addColorStop(_,l[w])}}}else{r=this.context.createLinearGradient(a,u/2,s+a,u/2);var T=l.length+1,E=1;for(d=0;d<l.length;d++){var S;S="number"==typeof c[d]?c[d]:E/T,r.addColorStop(S,l[d]),E++}}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},wd,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Object(cl.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Object(cl.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof gd?t:new gd(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(dd);
/*!
 * @pixi/prepare - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */kh.b.UPLOADS_PER_FRAME=4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var _d=function(t,e){return(_d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Td=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function Ed(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof _l.t){var i=t._textures[r].baseTexture;-1===e.indexOf(i)&&(e.push(i),n=!0)}return n}function Sd(t,e){if(t.baseTexture instanceof _l.c){var n=t.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Md(t,e){if(t._texture&&t._texture instanceof _l.t){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Cd(t,e){return e instanceof xd&&(e.updateText(!0),!0)}function Id(t,e){if(e instanceof gd){var n=e.toFontString();return bd.measureFont(n),!0}return!1}function Nd(t,e){if(t instanceof xd){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function Bd(t,e){return t instanceof gd&&(-1===e.indexOf(t)&&e.push(t),!0)}var kd=function(){function t(t){var e=this;this.limiter=new Td(kh.b.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Nd),this.registerFindHook(Bd),this.registerFindHook(Ed),this.registerFindHook(Sd),this.registerFindHook(Md),this.registerUploadHook(Cd),this.registerUploadHook(Id)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,fl.a.system.addOnce(this.tick,this,fl.c.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)fl.a.system.addOnce(this.tick,this,fl.c.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);for(this.completes.length=0,n=0,r=i.length;n<r;n++)i[n]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof hl.b)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&fl.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Pd(t,e){return e instanceof _l.c&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Dd(t,e){if(!(e instanceof ud))return!1;var n=e.geometry;e.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&Pd(t,o.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function Ld(t,e){return t instanceof ud&&(e.push(t),!0)}var Od=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(Ld),n.registerUploadHook(Pd),n.registerUploadHook(Dd),n}return function(t,e){function n(){this.constructor=t}_d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(kd),Rd=function(){function t(t,e,n){void 0===n&&(n=null),this._texture=t instanceof _l.t?t:null,this.baseTexture=t instanceof _l.c?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,n=Object(cl.getResolutionOfUrl)(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,r=t.BATCH_SIZE;n-e<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],o=this._frames[i],a=o.frame;if(a){var s,u=null,l=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new Al.j(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s=o.rotated?new Al.j(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new Al.j(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(u=new Al.j(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new _l.t(this.baseTexture,s,c,u,o.rotated?2:0,o.anchor),_l.t.addToCache(this.textures[i],i)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=0;n<t[e].length;n++){var r=t[e][n];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var n in void 0===t&&(t=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),Fd=function(){function t(){}return t.use=function(e,n){var r,i,o=this,a=e.name+"_image";if(e.data&&e.type===Wc.TYPE.JSON&&e.data.frames&&!o.resources[a]){var s=null===(i=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.related_multi_packs;if(Array.isArray(s))for(var u=function(t){if("string"!=typeof t)return"continue";var n=t.replace(".json",""),r=cl.url.resolve(e.url.replace(o.baseUrl,""),t);if(o.resources[n]||Object.values(o.resources).some((function(t){return cl.url.format(cl.url.parse(t.url))===r})))return"continue";var i={crossOrigin:e.crossOrigin,loadType:Wc.LOAD_TYPE.XHR,xhrType:Wc.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};o.add(n,r,i)},l=0,c=s;l<c.length;l++)u(c[l]);var h={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,o.baseUrl);o.add(a,d,h,(function(t){if(t.error)n(t.error);else{var r=new Rd(t.texture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,n()}))}}))}else n()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:cl.url.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),Ud=function(t,e){return(Ud=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function jd(t,e){function n(){this.constructor=t}Ud(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var zd=new Al.g,Hd=function(t){function e(e,n,r){void 0===n&&(n=100),void 0===r&&(r=100);var i=t.call(this,e)||this;return i.tileTransform=new Al.m,i._width=n,i._height=r,i.uvMatrix=i.texture.uvMatrix||new _l.u(e),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}return jd(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Al.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,zd);var e=this._width,n=this._height,r=-e*this.anchor._x;if(zd.x>=r&&zd.x<r+e){var i=-n*this.anchor._y;if(zd.y>=i&&zd.y<i+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){return new e(t instanceof _l.t?t:_l.t.from(t,n),n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(dd),Qd="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Gd=new Al.d,Vd=function(t){function e(e){var n=t.call(this,e)||this;return e.runners.contextChange.add(n),n.quad=new _l.o,n.state=_l.s.for2d(),n}return jd(e,t),e.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=_l.r.from(Qd,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?_l.r.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):_l.r.from(Qd,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},e.prototype.render=function(t){var e=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);var i=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;(r=n.uvs)[0]=r[6]=-i,r[1]=r[3]=-o,r[2]=r[4]=1-i,r[5]=r[7]=1-o,n.invalidate();var a=t._texture,s=a.baseTexture,u=t.tileTransform.localTransform,l=t.uvMatrix,c=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;c&&(s._glTextures[e.CONTEXT_UID]?c=s.wrapMode!==rh.s.CLAMP:s.wrapMode===rh.s.CLAMP&&(s.wrapMode=rh.s.REPEAT));var h=c?this.simpleShader:this.shader,d=a.width,A=a.height,f=t._width,p=t._height;Gd.set(u.a*d/f,u.b*d/p,u.c*A/f,u.d*A/p,u.tx/f,u.ty/p),Gd.invert(),c?Gd.prepend(l.mapCoord):(h.uniforms.uMapCoord=l.mapCoord.toArray(!0),h.uniforms.uClampFrame=l.uClampFrame,h.uniforms.uClampOffset=l.uClampOffset),h.uniforms.uTransform=Gd.toArray(!0),h.uniforms.uColor=Object(cl.premultiplyTintToRgba)(t.tint,t.worldAlpha,h.uniforms.uColor,s.alphaMode),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.uSampler=a,e.shader.bind(h),e.geometry.bind(n),this.state.blendMode=Object(cl.correctBlendMode)(t.blendMode,s.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(_l.m),Wd=n(8),Yd=function(t,e){return(Yd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Xd=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},qd=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in e){var i=e[r].match(/^[a-z]+/gm)[0],o=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var s in o){var u=o[s].split("="),l=u[0],c=u[1].replace(/"/gm,""),h=parseFloat(c),d=isNaN(h)?c:h;a[l]=d}n[i].push(a)}var A=new Xd;return n.info.forEach((function(t){return A.info.push({face:t.face,size:parseInt(t.size,10)})})),n.common.forEach((function(t){return A.common.push({lineHeight:parseInt(t.lineHeight,10)})})),n.page.forEach((function(t){return A.page.push({id:parseInt(t.id,10),file:t.file})})),n.char.forEach((function(t){return A.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),n.kerning.forEach((function(t){return A.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),n.distanceField.forEach((function(t){return A.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),A},t}(),Kd=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new Xd,n=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),s=t.getElementsByTagName("distanceField"),u=0;u<n.length;u++)e.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(u=0;u<r.length;u++)e.common.push({lineHeight:parseInt(r[u].getAttribute("lineHeight"),10)});for(u=0;u<i.length;u++)e.page.push({id:parseInt(i[u].getAttribute("id"),10)||0,file:i[u].getAttribute("file")});for(u=0;u<o.length;u++){var l=o[u];e.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(u=0;u<a.length;u++)e.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(u=0;u<s.length;u++)e.distanceField.push({fieldType:s[u].getAttribute("fieldType"),distanceRange:parseInt(s[u].getAttribute("distanceRange"),10)});return e},t}(),Zd=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Kd.test(e)}return!1},t.parse=function(t){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Kd.parse(e)},t}(),Jd=[qd,Kd,Zd];function $d(t){for(var e=0;e<Jd.length;e++)if(Jd[e].test(t))return Jd[e];return null}function tA(t,e,n,r,i,o,a){var s=n.text,u=n.fontProperties;e.translate(r,i),e.scale(o,o);var l=a.strokeThickness/2,c=-a.strokeThickness/2;if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=function(t,e,n,r,i,o){var a,s=n.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var u=n.dropShadow?n.dropShadowDistance:0,l=n.padding||0,c=t.width/r-u-2*l,h=t.height/r-u-2*l,d=s.slice(),A=n.fillGradientStops.slice();if(!A.length)for(var f=d.length+1,p=1;p<f;++p)A.push(p/f);if(d.unshift(s[0]),A.unshift(0),d.push(s[s.length-1]),A.push(1),n.fillGradientType===Yh.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,l,c/2,h+l);var g=0,v=(o.fontProperties.fontSize+n.strokeThickness)/h;for(p=0;p<i.length;p++)for(var m=o.lineHeight*p,y=0;y<d.length;y++){var b=m/h+("number"==typeof A[y]?A[y]:y/d.length)*v,w=Math.max(g,b);w=Math.min(w,1),a.addColorStop(w,d[y]),g=w}}else{a=e.createLinearGradient(l,h/2,c+l,h/2);var x=d.length+1,_=1;for(p=0;p<d.length;p++){var T;T="number"==typeof A[p]?A[p]:_/x,a.addColorStop(T,d[p]),_++}}return a}(t,e,a,o,[s],n),e.strokeStyle=a.stroke,a.dropShadow){var h=a.dropShadowColor,d=Object(cl.hex2rgb)("number"==typeof h?h:Object(cl.string2hex)(h)),A=a.dropShadowBlur*o,f=a.dropShadowDistance*o;e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+a.dropShadowAlpha+")",e.shadowBlur=A,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(s,l,c+n.lineHeight-u.descent),a.fill&&e.fillText(s,l,c+n.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function eA(t){return Array.from?Array.from(t):t.split("")}function nA(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var rA=function(){function t(t,e,n){var r,i,o=t.info[0],a=t.common[0],s=t.page[0],u=t.distanceField[0],l=Object(cl.getResolutionOfUrl)(s.file),c={};this._ownsTextures=n,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/l,this.chars={},this.pageTextures=c;for(var h=0;h<t.page.length;h++){var d=t.page[h],A=d.id,f=d.file;c[A]=e instanceof Array?e[h]:e[f],(null==u?void 0:u.fieldType)&&"none"!==u.fieldType&&(c[A].baseTexture.alphaMode=rh.a.NO_PREMULTIPLIED_ALPHA)}for(h=0;h<t.char.length;h++){var p=t.char[h],g=(A=p.id,p.page),v=t.char[h],m=v.x,y=v.y,b=v.width,w=v.height,x=v.xoffset,_=v.yoffset,T=v.xadvance;m/=l,y/=l,b/=l,w/=l,x/=l,_/=l,T/=l;var E=new Al.j(m+c[g].frame.x/l,y+c[g].frame.y/l,b,w);this.chars[A]={xOffset:x,yOffset:_,xAdvance:T,kerning:{},texture:new _l.t(c[g].baseTexture,E),page:g}}for(h=0;h<t.kerning.length;h++){var S=t.kerning[h],M=S.first,C=S.second,I=S.amount;M/=l,C/=l,I/=l,this.chars[C]&&(this.chars[C].kerning[M]=I)}this.distanceFieldRange=null==u?void 0:u.distanceRange,this.distanceFieldType=null!==(i=null===(r=null==u?void 0:u.fieldType)||void 0===r?void 0:r.toLowerCase())&&void 0!==i?i:"none"}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,n,r){var i;if(e instanceof Xd)i=e;else{var o=$d(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}n instanceof _l.t&&(n=[n]);var a=new t(i,n,r);return t.available[a.font]=a,a},t.uninstall=function(e){var n=t.available[e];if(!n)throw new Error("No font found named '"+e+"'");n.destroy(),delete t.available[e]},t.from=function(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},t.defaultOptions,r),o=i.chars,a=i.padding,s=i.resolution,u=i.textureWidth,l=i.textureHeight,c=function(t){"string"==typeof t&&(t=[t]);for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,u=a;s<=u;s++)e.push(String.fromCharCode(s))}else e.push.apply(e,eA(i))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),h=n instanceof gd?n:new gd(n),d=u,A=new Xd;A.info[0]={face:h.fontFamily,size:h.fontSize},A.common[0]={lineHeight:h.fontSize};for(var f,p,g,v=0,m=0,y=0,b=[],w=0;w<c.length;w++){f||((f=document.createElement("canvas")).width=u,f.height=l,p=f.getContext("2d"),g=new _l.c(f,{resolution:s}),b.push(new _l.t(g)),A.page.push({id:b.length-1,file:""}));var x=bd.measureText(c[w],h,!1,f),_=x.width,T=Math.ceil(x.height),E=Math.ceil(("italic"===h.fontStyle?2:1)*_);if(m>=l-T*s){if(0===m)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+h.fontSize+"px fonts");--w,f=null,p=null,g=null,m=0,v=0,y=0}else if(y=Math.max(T+x.fontProperties.descent,y),E*s+v>=d)--w,m+=y*s,m=Math.ceil(m),v=0,y=0;else{tA(f,p,x,v,m,s,h);var S=nA(x.text);A.char.push({id:S,page:b.length-1,x:v/s,y:m/s,width:E,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(_-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))}),v+=(E+2*a)*s,v=Math.ceil(v)}}w=0;for(var M=c.length;w<M;w++)for(var C=c[w],I=0;I<M;I++){var N=c[I],B=p.measureText(C).width,k=p.measureText(N).width,P=p.measureText(C+N).width-(B+k);P&&A.kerning.push({first:nA(C),second:nA(N),amount:P})}var D=new t(A,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=D,D},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),iA=[],oA=[],aA=[],sA=(function(t){function e(n,r){void 0===r&&(r={});var i=t.call(this)||this;i._tint=16777215;var o=Object.assign({},e.styleDefaults,r),a=o.align,s=o.tint,u=o.maxWidth,l=o.letterSpacing,c=o.fontName,h=o.fontSize;if(!rA.available[c])throw new Error('Missing BitmapFont "'+c+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._fontName=c,i._fontSize=h||rA.available[c].size,i.text=n,i._maxWidth=u,i._maxLineHeight=0,i._letterSpacing=l,i._anchor=new Al.e((function(){i.dirty=!0}),i,0,0),i._roundPixels=kh.b.ROUND_PIXELS,i.dirty=!0,i._resolution=kh.b.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}(function(t,e){function n(){this.constructor=t}Yd(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.updateText=function(){for(var t,e=rA.available[this._fontName],n=this._fontSize/e.size,r=new Al.g,i=[],o=[],a=[],s=eA(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),u=this._maxWidth*e.size/this._fontSize,l="none"===e.distanceFieldType?iA:oA,c=null,h=0,d=0,A=0,f=-1,p=0,g=0,v=0,m=0,y=0;y<s.length;y++){var b=nA(j=s[y]);if(/(?:\s)/.test(j)&&(f=y,p=h,m++),"\r"!==j&&"\n"!==j){var w=e.chars[b];if(w){c&&w.kerning[c]&&(r.x+=w.kerning[c]);var x=aA.pop()||{texture:_l.t.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Al.g};x.texture=w.texture,x.line=A,x.charCode=b,x.position.x=r.x+w.xOffset+this._letterSpacing/2,x.position.y=r.y+w.yOffset,x.prevSpaces=m,i.push(x),h=x.position.x+Math.max(w.xAdvance,w.texture.orig.width),r.x+=w.xAdvance+this._letterSpacing,v=Math.max(v,w.yOffset+w.texture.height),c=b,-1!==f&&u>0&&r.x>u&&(++g,Object(cl.removeItems)(i,1+f-g,1+y-f),y=f,f=-1,o.push(p),a.push(i.length>0?i[i.length-1].prevSpaces:0),d=Math.max(d,p),A++,r.x=0,r.y+=e.lineHeight,c=null,m=0)}}else o.push(h),a.push(-1),d=Math.max(d,h),++A,++g,r.x=0,r.y+=e.lineHeight,c=null,m=0}var _=s[s.length-1];"\r"!==_&&"\n"!==_&&(/(?:\s)/.test(_)&&(h=p),o.push(h),d=Math.max(d,h),a.push(-1));var T=[];for(y=0;y<=A;y++){var E=0;"right"===this._align?E=d-o[y]:"center"===this._align?E=(d-o[y])/2:"justify"===this._align&&(E=a[y]<0?0:(d-o[y])/a[y]),T.push(E)}var S=i.length,M={},C=[],I=this._activePagesMeshData;for(y=0;y<I.length;y++)l.push(I[y]);for(y=0;y<S;y++){var N=(H=i[y].texture).baseTexture.uid;if(!M[N]){if(!(q=l.pop())){var B=new Wd.b,k=void 0,P=void 0;"none"===e.distanceFieldType?(k=new Wd.c(_l.t.EMPTY),P=rh.b.NORMAL):(k=new Wd.c(_l.t.EMPTY,{program:_l.n.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),P=rh.b.NORMAL_NPM);var D=new Wd.a(B,k);D.blendMode=P,q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:D,vertices:null,uvs:null,indices:null}}q.index=0,q.indexCount=0,q.vertexCount=0,q.uvsCount=0,q.total=0;var L=this._textureCache;L[N]=L[N]||new _l.t(H.baseTexture),q.mesh.texture=L[N],q.mesh.tint=this._tint,C.push(q),M[N]=q}M[N].total++}for(y=0;y<I.length;y++)-1===C.indexOf(I[y])&&this.removeChild(I[y].mesh);for(y=0;y<C.length;y++)C[y].mesh.parent!==this&&this.addChild(C[y].mesh);for(var y in this._activePagesMeshData=C,M){var O=(q=M[y]).total;if(!((null===(t=q.indices)||void 0===t?void 0:t.length)>6*O)||q.vertices.length<2*Wd.a.BATCHABLE_SIZE)q.vertices=new Float32Array(8*O),q.uvs=new Float32Array(8*O),q.indices=new Uint16Array(6*O);else for(var R=q.total,F=q.vertices,U=4*R*2;U<F.length;U++)F[U]=0;q.mesh.size=6*O}for(y=0;y<S;y++){var j,z=(j=i[y]).position.x+T[j.line]*("justify"===this._align?j.prevSpaces:1);this._roundPixels&&(z=Math.round(z));var H,Q=z*n,G=j.position.y*n,V=M[(H=j.texture).baseTexture.uid],W=H.frame,Y=H._uvs,X=V.index++;V.indices[6*X+0]=0+4*X,V.indices[6*X+1]=1+4*X,V.indices[6*X+2]=2+4*X,V.indices[6*X+3]=0+4*X,V.indices[6*X+4]=2+4*X,V.indices[6*X+5]=3+4*X,V.vertices[8*X+0]=Q,V.vertices[8*X+1]=G,V.vertices[8*X+2]=Q+W.width*n,V.vertices[8*X+3]=G,V.vertices[8*X+4]=Q+W.width*n,V.vertices[8*X+5]=G+W.height*n,V.vertices[8*X+6]=Q,V.vertices[8*X+7]=G+W.height*n,V.uvs[8*X+0]=Y.x0,V.uvs[8*X+1]=Y.y0,V.uvs[8*X+2]=Y.x1,V.uvs[8*X+3]=Y.y1,V.uvs[8*X+4]=Y.x2,V.uvs[8*X+5]=Y.y2,V.uvs[8*X+6]=Y.x3,V.uvs[8*X+7]=Y.y3}for(var y in this._textWidth=d*n,this._textHeight=(r.y+e.lineHeight)*n,M){var q=M[y];if(0!==this.anchor.x||0!==this.anchor.y)for(var K=0,Z=this._textWidth*this.anchor.x,J=this._textHeight*this.anchor.y,$=0;$<q.total;$++)q.vertices[K++]-=Z,q.vertices[K++]-=J,q.vertices[K++]-=Z,q.vertices[K++]-=J,q.vertices[K++]-=Z,q.vertices[K++]-=J,q.vertices[K++]-=Z,q.vertices[K++]-=J;this._maxLineHeight=v*n;var tt=q.mesh.geometry.getBuffer("aVertexPosition"),et=q.mesh.geometry.getBuffer("aTextureCoord"),nt=q.mesh.geometry.getIndex();tt.data=q.vertices,et.data=q.uvs,nt.data=q.indices,tt.update(),et.update(),nt.update()}for(y=0;y<i.length;y++)aA.push(i[y])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var n=rA.available[this._fontName],r=n.distanceFieldRange,i=n.distanceFieldType,o=n.size;if("none"!==i)for(var a=this.worldTransform,s=a.a,u=a.b,l=a.c,c=a.d,h=Math.sqrt(s*s+u*u),d=Math.sqrt(l*l+c*c),A=(Math.abs(h)+Math.abs(d))/2,f=this._fontSize/o,p=0,g=this._activePagesMeshData;p<g.length;p++)g[p].mesh.shader.uniforms.uFWidth=A*r*f*this._resolution;t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!rA.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var n=this._textureCache;for(var r in n)n[r].destroy(),delete n[r];this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(hl.b),function(){function t(){}return t.add=function(){Wc.setExtensionXhrType("fnt",Wc.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,n){var r=$d(e.data);if(r)for(var i=t.getBaseUrl(this,e),o=r.parse(e.data),a={},s=function(t){a[t.metadata.pageFile]=t.texture,Object.keys(a).length===o.page.length&&(e.bitmapFont=rA.install(o,a,!0),n())},u=0;u<o.page.length;++u){var l=o.page[u].file,c=i+l,h=!1;for(var d in this.resources){var A=this.resources[d];if(A.url===c){A.metadata.pageFile=l,A.texture?s(A):A.onAfterMiddleware.add(s),h=!0;break}}if(!h){var f={crossOrigin:e.crossOrigin,loadType:Wc.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(c,f,s)}}else n()},t.getBaseUrl=function(e,n){var r=n.isDataUrl?"":t.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}()),uA=function(t,e){return(uA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},lA=function(t){function e(e){void 0===e&&(e=1);var n=t.call(this,_l.A,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=e,n}return function(t,e){function n(){this.constructor=t}uA(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(_l.k),cA=function(t,e){return(cA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function hA(t,e){function n(){this.constructor=t}cA(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var dA,AA,fA,pA,gA,vA,mA,yA,bA,wA,xA,_A,TA,EA,SA,MA,CA,IA,NA,BA={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},kA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(dA||(dA={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(AA||(AA={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(fA||(fA={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(pA||(pA={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(gA||(gA={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(vA||(vA={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(mA||(mA={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(yA||(yA={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(bA||(bA={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(wA||(wA={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(xA||(xA={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(_A||(_A={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(TA||(TA={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(EA||(EA={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(SA||(SA={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(MA||(MA={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(CA||(CA={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(IA||(IA={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(NA||(NA={}));var PA=function(t){function e(e,n,r,i,o){void 0===n&&(n=8),void 0===r&&(r=4),void 0===i&&(i=kh.b.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,s=function(t,e){var n,r=Math.ceil(t/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var s=n.replace("%index%",a.toString());o+=s=s.replace("%sampleIndex%",a-(r-1)+".0"),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),u=function(t){for(var e,n=BA[t],r=n.length,i=kA,o="",a=0;a<t;a++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());e=a,a>=r&&(e=t-a-1),o+=s=s.replace("%value%",n[e].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(a=t.call(this,s,u)||this).horizontal=e,a.resolution=i,a._quality=0,a.quality=r,a.blur=n,a}return hA(e,t),e.prototype.apply=function(t,e,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/e.width):this.uniforms.strength=1/n.height*(n.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{var i=t.getFilterTexture(),o=t.renderer,a=e,s=i;this.state.blend=!1,t.applyFilter(this,a,s,EA.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(a,EA.BLIT),this.uniforms.uSampler=s;var l=s;s=a,a=l,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,s,n,r),t.returnFilterTexture(i)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(_l.k),DA=function(t){function e(e,n,r,i){void 0===e&&(e=8),void 0===n&&(n=4),void 0===r&&(r=kh.b.FILTER_RESOLUTION),void 0===i&&(i=5);var o=t.call(this)||this;return o.blurXFilter=new PA(!0,e,n,r,i),o.blurYFilter=new PA(!1,e,n,r,i),o.resolution=r,o.quality=n,o.blur=e,o.repeatEdgePixels=!1,o}return hA(e,t),e.prototype.apply=function(t,e,n,r){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,EA.CLEAR),this.blurYFilter.apply(t,a,n,r),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,n,r):this.blurXFilter.apply(t,e,n,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(_l.k),LA=function(t,e){return(LA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},OA=function(t){function e(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,_l.z,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,e}return function(t,e){function n(){this.constructor=t}LA(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.tint=function(t,e){var n=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=1/3,o=(0,Math.sqrt)(i),a=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(a,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var n=2*t/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,n,r,i){var o=((n=n||16770432)>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,u=((r=r||3375104)>>16&255)/255,l=(r>>8&255)/255,c=(255&r)/255,h=[.3,.59,.11,0,0,o,a,s,t=t||.2,0,u,l,c,e=e||.15,0,o-u,a-l,s-c,0,0];this._loadMatrix(h,i)},e.prototype.night=function(t,e){var n=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(_l.k);OA.prototype.grayscale=OA.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var RA,FA,UA,jA,zA,HA,QA,GA,VA,WA,YA,XA,qA,KA,ZA,JA,$A,tf,ef,nf=function(t,e){return(nf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},rf=function(t){function e(e,n){var r=this,i=new Al.d;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=i,null==n&&(n=20),r.scale=new Al.g(n,n),r}return function(t,e){function n(){this.constructor=t}nf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.apply=function(t,e,n,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(_l.k),of=function(t,e){return(of=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},af=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function n(){this.constructor=t}of(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(_l.k),sf=function(t,e){return(sf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},uf=function(t){function e(e,n){void 0===e&&(e=.5),void 0===n&&(n=Math.random());var r=t.call(this,_l.z,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=n,r}return function(t,e){function n(){this.constructor=t}sf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(_l.k);(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(RA||(RA={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(FA||(FA={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(UA||(UA={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(jA||(jA={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(zA||(zA={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(HA||(HA={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(QA||(QA={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(GA||(GA={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(VA||(VA={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(WA||(WA={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(YA||(YA={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(XA||(XA={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(qA||(qA={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(KA||(KA={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(ZA||(ZA={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(JA||(JA={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}($A||($A={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(tf||(tf={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(ef||(ef={}));var lf=new Al.d;hl.c.prototype._cacheAsBitmap=!1,hl.c.prototype._cacheData=null,hl.c.prototype._cacheAsBitmapResolution=null,hl.c.prototype._cacheAsBitmapMultisample=tf.NONE;var cf=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(hl.c.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new cf),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),hl.c.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},hl.c.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var n=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var i=this.filters[0].padding;r.pad(i)}r.ceil(kh.b.RESOLUTION);var o=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,l=_l.p.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),c="cacheAsBitmap_"+Object(cl.uid)();this._cacheData.textureCacheId=c,_l.c.addToCache(l.baseTexture,c),_l.t.addToCache(l,c);var h=this.transform.localTransform.copyTo(lf).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=u,t.renderTexture.bind(o,a,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var d=new dd(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-r.x/r.width,d.anchor.y=-r.y/r.height,d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},hl.c.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},hl.c.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=t.context,i=t._projTransform;e.ceil(kh.b.RESOLUTION);var o=_l.p.create({width:e.width,height:e.height}),a="cacheAsBitmap_"+Object(cl.uid)();this._cacheData.textureCacheId=a,_l.c.addToCache(o.baseTexture,a),_l.t.addToCache(o,a);var s=lf;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:s,skipUpdateTransform:!1}),t.context=r,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var u=new dd(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},hl.c.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},hl.c.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},hl.c.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_l.c.removeFromCache(this._cacheData.textureCacheId),_l.t.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},hl.c.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},hl.c.prototype.name=null,hl.b.prototype.getChildByName=function(t,e){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(n=0,r=this.children.length;n<r;n++)if(this.children[n].getChildByName){var i=this.children[n].getChildByName(t,!0);if(i)return i}return null},hl.c.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Al.g),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t},n(16),n(12);var hf=function(t,e){return(hf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},df=function(t){function e(e,n){void 0===n&&(n=!0);var r=t.call(this,e[0]instanceof _l.t?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}return function(t,e){function n(){this.constructor=t}hf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(fl.a.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(fl.a.shared.add(this.update,this,fl.c.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(_l.t.from(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(_l.t.from(t[r]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof _l.t)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(fl.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(fl.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(dd);
/*!
 * pixi.js - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */_l.q.registerPlugin("accessibility",dl),_l.q.registerPlugin("extract",Oc),_l.q.registerPlugin("interaction",xl),_l.q.registerPlugin("particle",Bh),_l.q.registerPlugin("prepare",Od),_l.q.registerPlugin("batch",_l.f),_l.q.registerPlugin("tilingSprite",Vd),Jc.registerPlugin(sA),Jc.registerPlugin(ch),Jc.registerPlugin(yh),Jc.registerPlugin(Th),Jc.registerPlugin(Fd),Tl.registerPlugin(fl.b),Tl.registerPlugin($c);var Af,ff={AlphaFilter:lA,BlurFilter:DA,BlurFilterPass:PA,ColorMatrixFilter:OA,DisplacementFilter:rf,FXAAFilter:af,NoiseFilter:uf},pf=n(10),gf=n(34),vf=function(){function t(){}return t.offsetPolygon=function(e,n){var r=[],i=e.length;n=t.isPolygonClockwise(e)?n:-1*n;for(var o=0;o<i;o+=2){var a=o-2;a<0&&(a+=i);var s=(o+2)%i,u=e[o]-e[a],l=e[o+1]-e[a+1],c=Math.sqrt(u*u+l*l);u/=c,l/=c;var h=-(l*=n),d=u*=n,A=[e[a]+h,e[a+1]+d],f=[e[o]+h,e[o+1]+d],p=e[s]-e[o],g=e[s+1]-e[o+1];p/=c=Math.sqrt(p*p+g*g),g/=c;var v=-(g*=n),m=p*=n,y=[e[o]+v,e[o+1]+m],b=[e[s]+v,e[s+1]+m],w=t.findIntersection(A[0],A[1],f[0],f[1],y[0],y[1],b[0],b[1]);w&&r.push.apply(r,w)}return r},t.findIntersection=function(t,e,n,r,i,o,a,s){var u=(s-o)*(n-t)-(a-i)*(r-e),l=(a-i)*(e-o)-(s-o)*(t-i);if(0===u)return 0===l&&(n-t)*(e-o)-(r-e)*(t-i)==0?[(t+n)/2,(e+r)/2]:null;var c=l/u;return[t+c*(n-t),e+c*(r-e)]},t.isPolygonClockwise=function(t){for(var e=0,n=0,r=t.length-2;n<t.length;r=n,n+=2)e+=(t[n]-t[r])*(t[n+1]+t[r+1]);return e>0},t}(),mf=function(){function t(t){this._svgMatrix=null,this._tempMatrix=new Al.d,this.renderer=t}return t.prototype._calcCanvasStyle=function(t,e){var n;return t.texture&&t.texture.baseTexture!==_l.t.WHITE.baseTexture?t.texture.valid?(n=pf.b.getTintedPattern(t.texture,e),this.setPatternTransform(n,t.matrix||Al.d.IDENTITY)):n="#808080":n="#"+("00000"+(0|e).toString(16)).slice(-6),n},t.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldAlpha,i=t.transform.worldTransform;e.setContextTransform(i),e.setBlendMode(t.blendMode);for(var o,a,s=t.geometry.graphicsData,u=(t.tint>>16&255)/255,l=(t.tint>>8&255)/255,c=(255&t.tint)/255,h=0;h<s.length;h++){var d=s[h],A=d.shape,f=d.fillStyle,p=d.lineStyle,g=0|d.fillStyle.color,v=0|d.lineStyle.color;if(d.matrix&&e.setContextTransform(i.copyTo(this._tempMatrix).append(d.matrix)),f.visible){var m=((g>>16&255)/255*u*255<<16)+((g>>8&255)/255*l*255<<8)+(255&g)/255*c*255;o=this._calcCanvasStyle(f,m)}if(p.visible){var y=((v>>16&255)/255*u*255<<16)+((v>>8&255)/255*l*255<<8)+(255&v)/255*c*255;a=this._calcCanvasStyle(p,y)}if(n.lineWidth=p.width,n.lineCap=p.cap,n.lineJoin=p.join,n.miterLimit=p.miterLimit,d.type===Al.l.POLY){n.beginPath();var b=(I=A).points,w=d.holes,x=void 0,_=void 0,T=void 0,E=void 0,S=void 0;n.moveTo(b[0],b[1]);for(var M=2;M<b.length;M+=2)n.lineTo(b[M],b[M+1]);if(I.closeStroke&&n.closePath(),w.length>0){for(S=[],x=0,T=b[0],E=b[1],M=2;M+2<b.length;M+=2)x+=(b[M]-T)*(b[M+3]-E)-(b[M+2]-T)*(b[M+1]-E);for(var C=0;C<w.length;C++)if(b=w[C].shape.points){for(_=0,T=b[0],E=b[1],M=2;M+2<b.length;M+=2)_+=(b[M]-T)*(b[M+3]-E)-(b[M+2]-T)*(b[M+1]-E);if(_*x<0)for(n.moveTo(b[0],b[1]),M=2;M<b.length;M+=2)n.lineTo(b[M],b[M+1]);else for(n.moveTo(b[b.length-2],b[b.length-1]),M=b.length-4;M>=0;M-=2)n.lineTo(b[M],b[M+1]);w[C].shape.closeStroke&&n.closePath(),S[C]=_*x<0}}f.visible&&(n.globalAlpha=f.alpha*r,n.fillStyle=o,n.fill()),p.visible&&this.paintPolygonStroke(I,p,a,w,S,r,n)}else if(d.type===Al.l.RECT){var I=A;if(f.visible&&(n.globalAlpha=f.alpha*r,n.fillStyle=o,n.fillRect(I.x,I.y,I.width,I.height)),p.visible){var N=p.width*(.5-(1-p.alignment)),B=I.width+2*N,k=I.height+2*N;n.globalAlpha=p.alpha*r,n.strokeStyle=a,n.strokeRect(I.x-N,I.y-N,B,k)}}else if(d.type===Al.l.CIRC)I=A,n.beginPath(),n.arc(I.x,I.y,I.radius,0,2*Math.PI),n.closePath(),f.visible&&(n.globalAlpha=f.alpha*r,n.fillStyle=o,n.fill()),p.visible&&(.5!==p.alignment&&(N=p.width*(.5-(1-p.alignment)),n.beginPath(),n.arc(I.x,I.y,I.radius+N,0,2*Math.PI),n.closePath()),n.globalAlpha=p.alpha*r,n.strokeStyle=a,n.stroke());else if(d.type===Al.l.ELIP){if(I=A,(Q=1===p.alignment)||this.paintEllipse(I,f,p,o,r,n),p.visible){if(.5!==p.alignment){N=p.width*(.5-(1-p.alignment));var P=2*(I.width+N),D=2*(I.height+N),L=I.x-P/2,O=I.y-D/2,R=P/2*.5522848,F=D/2*.5522848,U=L+P,j=O+D,z=L+P/2,H=O+D/2;n.beginPath(),n.moveTo(L,H),n.bezierCurveTo(L,H-F,z-R,O,z,O),n.bezierCurveTo(z+R,O,U,H-F,U,H),n.bezierCurveTo(U,H+F,z+R,j,z,j),n.bezierCurveTo(z-R,j,L,H+F,L,H),n.closePath()}n.globalAlpha=p.alpha*r,n.strokeStyle=a,n.stroke()}Q&&this.paintEllipse(I,f,p,o,r,n)}else if(d.type===Al.l.RREC){var Q;if(I=A,(Q=1===p.alignment)||this.paintRoundedRectangle(I,f,p,o,r,n),p.visible){if(.5!==p.alignment){B=I.width,k=I.height,N=p.width*(.5-(1-p.alignment));var G=I.x-N,V=I.y-N,W=I.width+2*N,Y=I.height+2*N,X=N*(p.alignment>=1?Math.min(W/B,Y/k):Math.min(B/W,k/Y)),q=I.radius+X,K=Math.min(W,Y)/2;q=q>K?K:q,n.beginPath(),n.moveTo(G,V+q),n.lineTo(G,V+Y-q),n.quadraticCurveTo(G,V+Y,G+q,V+Y),n.lineTo(G+W-q,V+Y),n.quadraticCurveTo(G+W,V+Y,G+W,V+Y-q),n.lineTo(G+W,V+q),n.quadraticCurveTo(G+W,V,G+W-q,V),n.lineTo(G+q,V),n.quadraticCurveTo(G,V,G,V+q),n.closePath()}n.globalAlpha=p.alpha*r,n.strokeStyle=a,n.stroke()}Q&&this.paintRoundedRectangle(I,f,p,o,r,n)}}},t.prototype.paintPolygonStroke=function(t,e,n,r,i,o,a){if(.5!==e.alignment){var s=e.width*(.5-(1-e.alignment)),u=vf.offsetPolygon(t.points,s),l=void 0;a.beginPath(),a.moveTo(u[0],u[1]);for(var c=2;c<u.length;c+=2)a.lineTo(u[c],u[c+1]);t.closeStroke&&a.closePath();for(var h=0;h<r.length;h++){if(l=r[h].shape.points,u=vf.offsetPolygon(l,s),i[h])for(a.moveTo(u[0],u[1]),c=2;c<u.length;c+=2)a.lineTo(u[c],u[c+1]);else for(a.moveTo(u[u.length-2],u[u.length-1]),c=u.length-4;c>=0;c-=2)a.lineTo(u[c],u[c+1]);r[h].shape.closeStroke&&a.closePath()}}a.globalAlpha=e.alpha*o,a.strokeStyle=n,a.stroke()},t.prototype.paintEllipse=function(t,e,n,r,i,o){var a=2*t.width,s=2*t.height,u=t.x-a/2,l=t.y-s/2,c=a/2*.5522848,h=s/2*.5522848,d=u+a,A=l+s,f=u+a/2,p=l+s/2;0===n.alignment&&o.save(),o.beginPath(),o.moveTo(u,p),o.bezierCurveTo(u,p-h,f-c,l,f,l),o.bezierCurveTo(f+c,l,d,p-h,d,p),o.bezierCurveTo(d,p+h,f+c,A,f,A),o.bezierCurveTo(f-c,A,u,p+h,u,p),o.closePath(),0===n.alignment&&o.clip(),e.visible&&(o.globalAlpha=e.alpha*i,o.fillStyle=r,o.fill()),0===n.alignment&&o.restore()},t.prototype.paintRoundedRectangle=function(t,e,n,r,i,o){var a=t.x,s=t.y,u=t.width,l=t.height,c=t.radius,h=Math.min(u,l)/2;c=c>h?h:c,0===n.alignment&&o.save(),o.beginPath(),o.moveTo(a,s+c),o.lineTo(a,s+l-c),o.quadraticCurveTo(a,s+l,a+c,s+l),o.lineTo(a+u-c,s+l),o.quadraticCurveTo(a+u,s+l,a+u,s+l-c),o.lineTo(a+u,s+c),o.quadraticCurveTo(a+u,s,a+u-c,s),o.lineTo(a+c,s),o.quadraticCurveTo(a,s,a,s+c),o.closePath(),0===n.alignment&&o.clip(),e.visible&&(o.globalAlpha=e.alpha*i,o.fillStyle=r,o.fill()),0===n.alignment&&o.restore()},t.prototype.setPatternTransform=function(t,e){if(!1!==this._svgMatrix){if(!this._svgMatrix){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n&&n.createSVGMatrix&&(this._svgMatrix=n.createSVGMatrix()),!this._svgMatrix||!t.setTransform)return void(this._svgMatrix=!1)}this._svgMatrix.a=e.a,this._svgMatrix.b=e.b,this._svgMatrix.c=e.c,this._svgMatrix.d=e.d,this._svgMatrix.e=e.tx,this._svgMatrix.f=e.ty,t.setTransform(this._svgMatrix.inverse())}},t.prototype.destroy=function(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null},t}(),yf=new Al.d;ud.prototype.generateCanvasTexture=function(t,e){void 0===e&&(e=1);var n=this.getLocalBounds(),r=_l.p.create({width:n.width,height:n.height,scaleMode:t,resolution:e});Af||(Af=new pf.a),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(yf),yf.invert(),yf.tx-=n.x,yf.ty-=n.y,Af.render(this,{renderTexture:r,clear:!0,transform:yf});var i=_l.t.from(r.baseTexture._canvasRenderTarget.canvas,{scaleMode:t});return i.baseTexture.setResolution(e),i},ud.prototype.cachedGraphicsData=[],ud.prototype._renderCanvas=function(t){!0!==this.isMask&&(this.finishPoly(),t.plugins.graphics.render(this))};
/*!
 * @pixi/canvas-sprite - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var bf=new Al.d,wf=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=t._texture,n=this.renderer,r=n.context;if(e.valid){var i=e._frame.width,o=e._frame.height,a=t.transform.worldTransform,s=0,u=0,l=e.baseTexture.getDrawableSource();if(!(e.orig.width<=0||e.orig.height<=0)&&e.valid&&l){n.setBlendMode(t.blendMode,!0),n.context.globalAlpha=t.worldAlpha;var c=e.baseTexture.scaleMode===rh.p.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==c&&(r[n.smoothProperty]=c),e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,u=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,u=(.5-t.anchor.y)*e.orig.height),e.rotate&&(a.copyTo(bf),a=bf,Al.n.matrixAppendRotationInv(a,e.rotate,s,u),s=0,u=0),s-=i/2,u-=o/2,n.setContextTransform(a,t.roundPixels,1),t.roundPixels&&(s|=0,u|=0);var h=e.baseTexture.resolution,d=n._outerBlend;d&&(r.save(),r.beginPath(),r.rect(s*n.resolution,u*n.resolution,i*n.resolution,o*n.resolution),r.clip()),16777215!==t.tint?(t._cachedTint===t.tint&&t._tintedCanvas.tintId===t._texture._updateID||(t._cachedTint=t.tint,t._tintedCanvas=pf.b.getTintedCanvas(t,t.tint)),r.drawImage(t._tintedCanvas,0,0,Math.floor(i*h),Math.floor(o*h),Math.floor(s*n.resolution),Math.floor(u*n.resolution),Math.floor(i*n.resolution),Math.floor(o*n.resolution))):r.drawImage(l,e._frame.x*h,e._frame.y*h,Math.floor(i*h),Math.floor(o*h),Math.floor(s*n.resolution),Math.floor(u*n.resolution),Math.floor(i*n.resolution),Math.floor(o*n.resolution)),d&&r.restore(),n.setBlendMode(rh.b.NORMAL)}}},t.prototype.destroy=function(){this.renderer=null},t}();dd.prototype._tintedCanvas=null,dd.prototype._renderCanvas=function(t){t.plugins.sprite.render(this)};
/*!
 * @pixi/canvas-extract - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var xf=new Al.j,_f=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,n){var r=new Image;return r.src=this.base64(t,e,n),r},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(t){var e,n,r,i,o=this.renderer;t&&(i=t instanceof _l.p?t:o.generateTexture(t)),i?(e=i.baseTexture._canvasRenderTarget.context,n=i.baseTexture._canvasRenderTarget.resolution,r=i.frame):(e=o.rootContext,n=o.resolution,(r=xf).width=this.renderer.width,r.height=this.renderer.height);var a=Math.floor(r.width*n+1e-4),s=Math.floor(r.height*n+1e-4),u=new cl.CanvasRenderTarget(a,s,1),l=e.getImageData(r.x*n,r.y*n,a,s);return u.context.putImageData(l,0,0),u.canvas},t.prototype.pixels=function(t){var e,n,r,i,o=this.renderer;t&&(i=t instanceof _l.p?t:o.generateTexture(t)),i?(e=i.baseTexture._canvasRenderTarget.context,n=i.baseTexture._canvasRenderTarget.resolution,r=i.frame):(e=o.rootContext,n=o.resolution,(r=xf).width=o.width,r.height=o.height);var a=r.x*n,s=r.y*n,u=r.width*n,l=r.height*n;return e.getImageData(a,s,u,l).data},t.prototype.destroy=function(){this.renderer=null},t}(),Tf=function(t,e){return(Tf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ef(t,e){var n=t;if(e instanceof _l.c){var r=e.source,i=0===r.width?n.canvas.width:Math.min(n.canvas.width,r.width),o=0===r.height?n.canvas.height:Math.min(n.canvas.height,r.height);return n.ctx.drawImage(r,0,0,i,o,0,0,n.canvas.width,n.canvas.height),!0}return!1}var Sf,Mf=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=16,n.canvas.height=16,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(Ef),n}return function(t,e){function n(){this.constructor=t}Tf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(kd),Cf=new Al.d,If=new Al.d,Nf=[new Al.g,new Al.g,new Al.g,new Al.g];
/*!
 * @pixi/canvas-sprite-tiling - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Hd.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.valid){var n=t.context,r=this.worldTransform,i=e.baseTexture,o=i.getDrawableSource(),a=i.resolution;if(this._textureID!==this._texture._updateID||this._cachedTint!==this.tint){this._textureID=this._texture._updateID;var s=new cl.CanvasRenderTarget(e._frame.width,e._frame.height,a);16777215!==this.tint?(this._tintedCanvas=pf.b.getTintedCanvas(this,this.tint),s.context.drawImage(this._tintedCanvas,0,0)):s.context.drawImage(o,-e._frame.x*a,-e._frame.y*a),this._cachedTint=this.tint,this._canvasPattern=s.context.createPattern(s.canvas,"repeat")}n.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),this.tileTransform.updateLocalTransform();var u=this.tileTransform.localTransform,l=this._width,c=this._height;Cf.identity(),If.copyFrom(u),this.uvRespectAnchor||If.translate(-this.anchor.x*l,-this.anchor.y*c),If.scale(this.tileScale.x/a,this.tileScale.y/a),Cf.prepend(If),Cf.prepend(r),t.setContextTransform(Cf),n.fillStyle=this._canvasPattern;var h=this.anchor.x*-l,d=this.anchor.y*-c;Nf[0].set(h,d),Nf[1].set(h+l,d),Nf[2].set(h+l,d+c),Nf[3].set(h,d+c);for(var A=0;A<4;A++)If.applyInverse(Nf[A],Nf[A]);for(n.beginPath(),n.moveTo(Nf[0].x,Nf[0].y),A=1;A<4;A++)n.lineTo(Nf[A].x,Nf[A].y);n.closePath(),n.fill()}},Ih.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,r=!0,i=0,o=0,a=0,s=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var l=this.children[u];if(l.visible&&l._texture.valid){var c=l._texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)==0)r&&(t.setContextTransform(n,!1,1),r=!1),i=l.anchor.x*(-c.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-c.height*l.scale.y)+l.position.y+.5,a=c.width*l.scale.x,s=c.height*l.scale.y;else{r||(r=!0),l.displayObjectUpdateTransform();var h=l.worldTransform;t.setContextTransform(h,this.roundPixels,1),i=l.anchor.x*-c.width+.5,o=l.anchor.y*-c.height+.5,a=c.width,s=c.height}var d=l._texture.baseTexture.resolution;e.drawImage(l._texture.baseTexture.getDrawableSource(),c.x*d,c.y*d,c.width*d,c.height*d,i*t.resolution,o*t.resolution,a*t.resolution,s*t.resolution)}}}},hl.b.prototype._renderCanvas=function(t){},hl.b.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},hl.c.prototype.renderCanvas=function(t){},xd.prototype._renderCanvas=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),dd.prototype._renderCanvas.call(this,t)},pf.a.registerPlugin("accessibility",dl),pf.a.registerPlugin("extract",_f),pf.a.registerPlugin("graphics",mf),pf.a.registerPlugin("interaction",xl),pf.a.registerPlugin("mesh",gf.a),pf.a.registerPlugin("prepare",Mf),pf.a.registerPlugin("sprite",wf);var Bf=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this)).prevTime=-1,t.times=0,t.valueTotal=0,t.destroyed=!1,t.value=0,t.calcFps(),t}return x(n,[{key:"calcFps",value:function(){var t=this;requestAnimationFrame((function(e){var n=e-t.prevTime;t.valueTotal+=n,t.times+=1,t.times>20&&(t.value=Math.floor(1e3*t.times/t.valueTotal),t.valueTotal=0,t.times=0,t.destroyed||t.emit("update",t.value)),t.prevTime=e,t.destroyed||t.calcFps()}))}},{key:"destroy",value:function(){this.destroyed=!0}}]),n}(Os.a);!function(t){t.ResourceError="RESOURCE_ERROR",t.RuntimeError="RUNTIME_ERROR",t.RuntimeWarn="RUNTIME_WARN",t.CanvasCrash="CANVAS_CRASH"}(Sf||(Sf={}));var kf=function(t){A(n,t);var e=p(n);function n(t,r){var i,o,a;return b(this,n),o=v(i=e.call(this,r)),a=(this instanceof n?this.constructor:void 0).prototype,Object.setPrototypeOf?Object.setPrototypeOf(o,a):o.__proto__&&(o.__proto__=a),i.errorType=t,i.errorMsg=r,i}return x(n,null,[{key:"transform",value:function(t){return t instanceof n?t:new n(Sf.RuntimeError,t.message)}}]),n}(r(Error));function Pf(){return function(t,e,n){var r=n.value;n.value=function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.apply(this,e)}catch(t){throw new kf(Sf.RuntimeWarn,t.message)}}}}var Df=n(46),Lf=n.n(Df),Of=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function Rf(){return f()}var Ff="__delay_resolve_result__";function Uf(t){return new Promise((function(e){setTimeout((function(){e(Ff)}),t)}))}function jf(t,e){return Of(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.race([t(),Uf(e)]);case 2:return r=n.sent,n.abrupt("return",r===Ff?Ff:r);case 4:case"end":return n.stop()}}),n)})))}var zf=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function Hf(t,e){return zf(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jf((function(){return fetch(t)}),e);case 2:if((r=n.sent)!==Ff){n.next=5;break}throw new kf(Sf.ResourceError,'"'.concat(t,'" loaded timeout"'));case 5:if(r.ok){n.next=7;break}throw new kf(Sf.ResourceError,'"'.concat(t,'" loaded failed with status "').concat(r.status,'"'));case 7:return n.abrupt("return",r);case 8:case"end":return n.stop()}}),n)})))}var Qf=function(){function t(e,n,r,i,o){b(this,t),this.timeout=15e3,this.useCache=!1,this.taskId="",this.delegate=null,this.useCache=n,this.localStorage=e,this.logger=r,this.timeout=i,this.delegate=o||null}return x(t,[{key:"attachTaskId",value:function(t){this.taskId=t}},{key:"fetchJson",value:function(t){return zf(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.useCache,!e.t0){e.next=6;break}return this.logger.info("load resource from cache. "+t,this.taskId||""),e.next=5,this.localStorage.getItem(t);case 5:n=e.sent;case 6:if(!n){e.next=8;break}return e.abrupt("return",(this.logger.info("cache hit. "+t,this.taskId||""),n));case 8:if(!this.delegate){e.next=18;break}return this.logger.info("load resource by delegate. "+t,this.taskId||""),e.next=12,jf((function(){return o.delegate.loadJson(t)}),this.timeout);case 12:if((i=e.sent)!==Ff){e.next=15;break}throw new kf(Sf.ResourceError,'"'.concat(t,'" loaded timeout"'));case 15:r=JSON.parse(i),e.next=24;break;case 18:return this.logger.info("load resource from server. "+t,this.taskId||""),e.next=21,Hf(""+t,this.timeout);case 21:return e.next=23,e.sent.json();case 23:r=e.sent;case 24:return e.abrupt("return",(this.logger.info("load end. "+t,this.taskId||""),this.useCache&&this.localStorage.setItem(t,r).catch((function(){})),r));case 25:case"end":return e.stop()}}),e,this)})))}},{key:"fetchPng",value:function(t,e){return zf(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t+"-v2",n.t0=this.useCache,!n.t0){n.next=7;break}return this.logger.info("load resource from cache. "+t,this.taskId||""),n.next=6,this.localStorage.getItem(i);case 6:r=n.sent;case 7:if(!r){n.next=10;break}return a=(o=r).scale,s=o.scaledBase64,n.abrupt("return",(this.logger.info("cache hit. "+t,this.taskId||""),{baseTexture:new _l.c(s,{resolution:1}),scale:a}));case 10:if(!this.delegate){n.next=19;break}return this.logger.info("load resource by delegate. "+t,this.taskId||""),n.next=14,jf((function(){return y.delegate.loadImage(t)}),this.timeout);case 14:if((u=n.sent)!==Ff){n.next=17;break}throw new kf(Sf.ResourceError,'"'.concat(t,'" loaded timeout"'));case 17:n.next=25;break;case 19:return this.logger.info("load resource from server. "+t,this.taskId||""),n.next=22,Hf(t,this.timeout);case 22:return n.next=24,n.sent.blob();case 24:u=n.sent;case 25:return n.next=27,function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(){n(new kf(Sf.ResourceError,"Failed parse blob data."))},r.readAsDataURL(t)}))}(u);case 27:return r=n.sent,(l=document.createElement("img")).src=r,n.next=32,new Promise((function(t,e){l.onload=function(){return t("")},l.onerror=function(){return e(new Error("load sprite image failed"))}}));case 32:return c=e,h=l.width||1,d=l.height||1,2048,2048,(h>2048||d>2048)&&(A=(c*=2048/h)*d)>2048&&(c*=d/A),f=document.createElement("canvas"),p=Math.ceil(l.width*c),g=Math.ceil(l.height*c),f.width=p,f.height=g,f.getContext("2d").drawImage(l,0,0,p,g),v=f.toDataURL("image/png"),m=new _l.c(v,{resolution:1}),n.abrupt("return",(this.logger.info("load end. "+t,this.taskId||""),this.useCache&&this.localStorage.setItem(i,{scale:c,scaledBase64:v}).catch((function(){})),{baseTexture:m,scale:c}));case 39:case"end":return n.stop()}}),n,this)})))}},{key:"destroy",value:function(){}}]),t}(),Gf=function(){function t(e){var n=this;b(this,t),this.isPaused=!1,this.timestamp=0,this.callbackList=[],this.onTimeUpdate=function(t){var e=t/(kh.b.TARGET_FPMS||.06);if(!n.isPaused){n.timestamp+=e,n.callbackList=n.callbackList.filter((function(t){return t&&!t.applied}));for(var r=n.callbackList.length,i=0;i<r;i++){var o=n.callbackList[i];if(o&&!o.applied){if(!(o.triggerTime<=n.timestamp))break;o.running=!0,o.fn(),o.applied=!0,r=n.callbackList.length}}}},this.ticker=e,this.ticker.add(this.onTimeUpdate)}return x(t,[{key:"setTimeout",value:function(t,e){var n=Rf(),r=this.timestamp+Math.max(e||16,16);return this.callbackList.push({fn:t,triggerTime:r,id:n,applied:!1,running:!1}),this.callbackList.sort((function(t,e){return t.triggerTime-e.triggerTime})),n}},{key:"clearTimeout",value:function(t){var e=this.callbackList.findIndex((function(e){return e.id===t}));e>=0&&!this.callbackList[e].running&&this.callbackList.splice(e,1)}},{key:"delay",value:function(t){var e=this;return new Promise((function(n){e.setTimeout(n,t)}))}},{key:"waitUntil",value:function(t,e){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=this.timestamp;case 1:if(t()||!(this.timestamp-r<e)){n.next=6;break}return n.next=4,this.delay(50);case 4:n.next=1;break;case 6:case"end":return n.stop()}}),n,this)})))}},{key:"pause",value:function(){this.isPaused=!0}},{key:"resume",value:function(){this.isPaused=!1}}]),t}();function Vf(t,e,n){return n?Math.floor(parseFloat(t)*e):Math.ceil(parseFloat(t)*e)}var Wf={w:!0,h:!0,x:!0,y:!0},Yf=function(){function t(e){b(this,t),this.gifs=Object.create(null),this.textures=Object.create(null),this.frames=Object.create(null),this.spriteSheets=[],this.loader=e}return x(t,[{key:"getTexture",value:function(t){return this.textures[t]||null}},{key:"getFrameData",value:function(t){return this.frames[t]}},{key:"getGifFrames",value:function(t){return this.gifs[t]?this.gifs[t].filter((function(t){return!!t})):[]}},{key:"loadSpriteSheetItem",value:function(t,e,n,r){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o,a,s,u,l,c=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.loader.fetchJson("".concat(t,"/").concat(e,"/jsonOutput/").concat(n,".json"));case 2:return o=i.sent,i.next=5,this.loader.fetchPng("".concat(t,"/").concat(e,"/jsonOutput/").concat(n,".png"),r);case 5:return a=i.sent,s=a.baseTexture,u=a.scale,function(t,e){t.meta&&t.meta.size&&["w","h"].forEach((function(n){t.meta.size[n]=Vf(t.meta.size[n],e,Wf[n])})),t.frames&&Object.keys(t.frames).forEach((function(n){t.frames[n].frame&&["x","y","w","h"].forEach((function(r){t.frames[n].frame[r]=Vf(t.frames[n].frame[r],e,Wf[r])})),t.frames[n].spriteSourceSize&&["x","y","w","h"].forEach((function(r){t.frames[n].spriteSourceSize[r]=Vf(t.frames[n].spriteSourceSize[r],e,Wf[r])})),t.frames[n].sourceSize&&["w","h"].forEach((function(r){t.frames[n].sourceSize[r]=Vf(t.frames[n].sourceSize[r],e,Wf[r])}))}))}(o,u),l=new Rd(s,o),i.next=12,new Promise((function(t){l.parse((function(){return t("")}))}));case 12:this.spriteSheets.push(l),Object.keys(l.textures).forEach((function(t){var e=t.match(/^(.+)_gif_(\d+)$/);if(e&&e[1]&&e[2]){var n=e[1];c.gifs[n]||(c.gifs[n]=[]);var r=parseInt(e[2],10);c.gifs[n][r]=l.textures[t]}else c.frames[t]=o.frames[t],c.textures[t]=l.textures[t]}));case 14:case"end":return i.stop()}}),i,this)})))}},{key:"destroy",value:function(){this.spriteSheets.forEach((function(t){return t.destroy(!0)})),this.spriteSheets=[],this.gifs=Object.create(null),this.textures=Object.create(null),this.frames=Object.create(null)}}]),t}(),Xf=n(18),qf=n.n(Xf),Kf=n(13),Zf=n.n(Kf);function Jf(t,e,n){var r,i,o,a=Math.round(t)%360;if(a%180==0)r=Math.cos(a*(Math.PI/180))*e,i=0;else if(a%90==0)r=0,i=Math.sin(a*(Math.PI/180))*n;else{var s=(o=a*Math.PI/180,Math.tan(o));r=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e*s,2)),(a>90&&a<270||a<-90&&a>-270)&&(r=-r),i=s*r}return{x:r,y:i}}function $f(t,e,n,r,i,o){var a,s,u,l,c,h=t,d=e;if(0===Math.round(r))a=i,s=o,c=0;else if(Math.round(r)>=360)a=i,s=o,u=i+2*t*Math.abs(Math.cos(-n/180*Math.PI)),l=o+2*e*Math.sin(-n/180*Math.PI),c=1;else{var A=-(n+r),f=Jf(-n,h,d),p=i-f.x,g=o+f.y,v=Jf(A,h,d);a=v.x+p,s=g-v.y,c=r>=-360&&r<-180?1:r>=-180&&r<0||r>0&&r<180?0:1}return{radiusX:h,radiusY:d,xAxisRotation:0,largeArcFlag:c,sweepFlag:r>0?1:0,endX:a,endY:s,middleX:u,middleY:l}}var tp=function(){function t(){b(this,t),this.pool=[]}return x(t,[{key:"getObject",value:function(t){var e=this.pool.find((function(t){return!t.isUsed}));if(e)return e.isUsed=!0,e.obj;var n={obj:this.createObject(),isUsed:!0,group:t};return this.pool.push(n),n.obj}},{key:"collectObject",value:function(t){var e=this.pool.find((function(e){return e.obj===t}));e&&(e.isUsed=!1,this.resetObject(e.obj))}},{key:"collectObjectByGroup",value:function(t){var e=this;this.pool.filter((function(e){return e.group===t})).forEach((function(t){return e.collectObject(t.obj)}))}}]),t}(),ep=new(function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return x(n,[{key:"createObject",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),t}},{key:"resetObject",value:function(t){t.removeAttribute("viewBox"),t.removeAttribute("width"),t.removeAttribute("height"),t.innerHTML=""}}]),n}(tp)),np=new(function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return x(n,[{key:"createObject",value:function(){return document.createElement("img")}},{key:"resetObject",value:function(t){t.removeAttribute("src")}}]),n}(tp)),rp=function(){function t(){b(this,t),this.imgElements=[],this.svgElements=[],this.idToHashMap=Object.create(null),this.textures=Object.create(null),this.graphics=[],this.hashToIdMap=Object.create(null)}return x(t,[{key:"render",value:function(t,e,n){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,i,o,a,s,u,c,h,d,A,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.items,i=t.width,o=t.height,a=np.getObject(n),s=new _l.c(a,{width:i,height:o,resolution:1}),u=ep.getObject(n),this.imgElements.push(a),this.svgElements.push(u),u.setAttribute("viewBox","0 0 ".concat(i," ").concat(o)),u.setAttribute("width",""+i),u.setAttribute("height",""+o),c={},h={},r.forEach((function(t){var e=t.item,n=t.x,r=t.y,i=n+2,o=r+2;e.pathsData.forEach((function(t){var e="";t.cmds.forEach((function(n){var r=l(n,2),a=r[0],s=r[1];e+=a+" ",e+=s.map((function(e){return Zf()(e)||(e.x=e.x+t.offset.x+i,e.y=e.y+t.offset.y+o),e})).reduce((function(t,e){return Zf()(e)?t+=e+" ":t+="".concat(e.x," ").concat(e.y," "),t}),""),e+=" "})),t.pathElement.setAttribute("d",e),u.appendChild(t.pathElement)}));var a=e.width-4-2*e.padding,d=e.height-4-2*e.padding;f.textures[e.hash]={texture:new _l.t(s,new Al.j(i+2,o+2,a,d)),pivot:e.pivot},c[e.hash]={x:i+2,y:o+2,w:a,h:d,pivot:e.pivot},h[e.hash]=f.hashToIdMap[e.hash]})),A='<?xml version="1.0" encoding="utf-8"?>'+u.outerHTML,d="data:image/svg+xml,"+encodeURIComponent(A).replace(/'/g,"%27").replace(/"/g,"%22"),a.src=d,e.next=8,new Promise((function(t,e){a.onload=function(){return t("")},a.onerror=function(){return e()}}));case 8:case"end":return e.stop()}}),e,this)})))}},{key:"getGraphicsData",value:function(t){var e=this.idToHashMap[t]||"";return this.textures[e]||null}},{key:"addGraphics",value:function(t,e,n,r,i,o,a,s,u,c,h){var d,A;if(!a&&!u)return t;var f,p,g,v,m,y,b,w,x,_,T,E,S,M,C,I,N,B,k=qf()(n+(null!==(A=null===(d=null==a?void 0:a.width)||void 0===d?void 0:d.toString())&&void 0!==A?A:0)+u+c+h);if(this.hashToIdMap[k]||(this.hashToIdMap[k]=[]),this.hashToIdMap[k].push(t),this.idToHashMap[t]=k,this.graphics.findIndex((function(t){return t.hash===k}))<0){var P=(f=e,p=i,g=o,v=a,m=r,y=u,b=c,w=h,_=[],T={x:Math.abs(m.x),y:Math.abs(m.y)},E=0,S=0,M=0,C=0,I=0,N="none",B=null!==(x=null==v?void 0:v.width)&&void 0!==x?x:0,y?(E=p,S=g,I=0):(N=w||"#ff0000",I=B,M=.5*B,C=.5*B,E=p+B,S=g+B,T.x+=.5*B,T.y+=.5*B),E+=Math.abs(m.x),S+=Math.abs(m.y),M+=Math.abs(m.x),C+=Math.abs(m.y),E+=4,S+=4,M+=2,C+=2,E=Math.ceil(E),S=Math.ceil(S),f.forEach((function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","path");"none"!==t.fill&&y?e.setAttribute("fill",b||"#ff0000"):e.setAttribute("fill","none"),t.hasStroke&&!y&&(e.setAttribute("stroke-linecap",(null==v?void 0:v.cap)||"butt"),e.setAttribute("stroke-linejoin",(null==v?void 0:v.join)||"miter"),e.setAttribute("stroke-width",I.toString()),e.setAttribute("stroke",N),null!=v&&v.dash&&e.setAttribute("stroke-dasharray",v.dash));for(var n=t.scale,r=t.path.trim().split(" "),i={x:0,y:0},o={offset:{x:M,y:C},cmds:[],pathElement:e},a=0;a<r.length;a+=2){var s=r[a],u=r[a+1];if("M"===s){var c=u.split(",").map((function(t){return Number(t)})),h=l(c,2),d=h[0],A=h[1];i={x:d,y:A},d=d/9525*n.x,A=A/9525*n.y,o.cmds.push(["M",[{x:d,y:A}]])}else if("A"===s){var f=l(u.split(",").map((function(t){return Number(t)})),4),p=f[0],g=f[1],m=f[2],w=f[3],x=m/Math.PI*180,T=w/Math.PI*180,E=$f(p,g,x,T,i.x,i.y);Math.round(T)>=360?(i={x:E.endX,y:E.endY},o.cmds.push(["A",[E.radiusX/9525*n.x,E.radiusY/9525*n.y,E.xAxisRotation,E.largeArcFlag,E.sweepFlag,{x:E.middleX/9525*n.x,y:E.middleY/9525*n.y}]]),o.cmds.push(["A",[E.radiusX/9525*n.x,E.radiusY/9525*n.y,E.xAxisRotation,E.largeArcFlag,E.sweepFlag,{x:E.endX/9525*n.x,y:E.endY/9525*n.y}]])):(i={x:E.endX,y:E.endY},o.cmds.push(["A",[E.radiusX/9525*n.x,E.radiusY/9525*n.y,E.xAxisRotation,E.largeArcFlag,E.sweepFlag,{x:E.endX/9525*n.x,y:E.endY/9525*n.y}]]))}else if("L"===s){var S=u.split(",").map((function(t){return Number(t)})),B=l(S,2),k=B[0],P=B[1];i={x:k,y:P},k=k/9525*n.x,P=P/9525*n.y,o.cmds.push(["L",[{x:k,y:P}]])}else if("QB"===s){var D=u.split(",").map((function(t){return Number(t)})),L=l(D,4),O=L[0],R=L[1],F=L[2],U=L[3];i={x:F,y:U},O=O/9525*n.x,R=R/9525*n.y,F=F/9525*n.x,U=U/9525*n.y,o.cmds.push(["Q",[{x:O,y:R},{x:F,y:U}]])}else if("CB"===s){var j=u.split(",").map((function(t){return Number(t)})),z=l(j,6),H=z[0],Q=z[1],G=z[2],V=z[3],W=z[4],Y=z[5];i={x:W,y:Y},H=H/9525*n.x,Q=Q/9525*n.y,G=G/9525*n.x,V=V/9525*n.y,W=W/9525*n.x,Y=Y/9525*n.y,o.cmds.push(["C",[{x:H,y:Q},{x:G,y:V},{x:W,y:Y}]])}else"C"===s&&o.cmds.push(["Z",[]])}_.push(o)})),{graphicsWidth:E,graphicsHeight:S,pivot:T,padding:2,pathsData:_}),D=P.graphicsWidth,L=P.graphicsHeight,O=P.pathsData,R=P.pivot,F=P.padding;this.graphics.push({hash:k,pathsData:O,pivot:R,width:D,height:L,padding:F})}return t}},{key:"pack",value:function(){return this.graphics.forEach((function(t){t.width+=4,t.height+=4})),function t(e){for(var n=[],r=e.filter((function(t){var e=t.width<2048&&t.height<2048;return e||n.push(t),e})).sort((function(t,e){return t.width*t.height-e.width*e.height})),i=r.length+1,o=2050,a=2050,s=[],u=null;(o>2048||a>2048)&&r.length>0;)i-=1,o=(u=Lf()(r.slice(0,i))).width,a=u.height;return u&&s.push(u),n.forEach((function(t){var e=Lf()([t]);s.push(e)})),i<r.length?s.concat(t(r.slice(i))):s}(this.graphics)}},{key:"destroy",value:function(){var t=this;Object.keys(this.textures).forEach((function(e){var n;null===(n=t.textures[e])||void 0===n||n.texture.destroy(!0)})),this.textures=Object.create(null),this.imgElements.forEach((function(t){return np.collectObject(t)})),this.svgElements.forEach((function(t){return ep.collectObject(t)})),this.graphics=[]}}]),t}(),ip=function(){function t(){b(this,t),this.runningTimeNodes={}}return x(t,[{key:"addRunningTimeNode",value:function(t,e,n){var r="".concat(e,"_").concat(t);if(this.runningTimeNodes[r])try{this.runningTimeNodes[r].dispose(!0)}catch(t){}this.runningTimeNodes[r]=n}},{key:"removeRunningTimeNode",value:function(t,e){var n="".concat(e,"_").concat(t);delete this.runningTimeNodes[n]}}]),t}(),op=function(){function t(e){b(this,t),this.eventHub=e,this.targets=Object.create(null)}return x(t,[{key:"getTargets",value:function(){var t=this;return Object.keys(this.targets).map((function(e){return t.targets[e]}))}},{key:"addTarget",value:function(t,e){this.targets[t]=e}},{key:"getTargetById",value:function(t){return this.targets[t]}},{key:"getTarget",value:function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"el",index:0,id:""},o=this.targets[t.id];return"shape"!==t.type?o:("shape"===t.type&&t.txEl&&(o=null!==(n=null==o?void 0:o.getTextElement(t.txEl.type,t.txEl.range))&&void 0!==n?n:null),"shape"===t.type&&t.bg&&0===i.index&&(e=!1,o=null!==(r=null==o?void 0:o.getBgElement())&&void 0!==r?r:null,this.eventHub.emit("IterateTimeNodeEnd",i.id)),e&&o?o.getIterateEntry(i.type,i.index,i.id):(o||this.eventHub.emit("IterateTimeNodeEnd",i.id),o))}},{key:"clearTargets",value:function(){this.targets=Object.create(null)}}]),t}(),ap=function(){function t(e){b(this,t),this.target=e}return x(t,[{key:"color",get:function(){return this.target.strokeColorFilter.currentColor},set:function(t){this.target.strokeColorFilter.color=t}},{key:"on",get:function(){return this.target.strokeActive?"true":"false"},set:function(t){this.target.strokeActive="true"===t}}]),t}(),sp=function t(e){var n=this;b(this,t),this.applyCommand=function(t,e){n.target.applyCommand(t,e)},this.target=e},up=function(){function t(e){b(this,t),this.target=e}return x(t,[{key:"toString",value:function(){return this.color}},{key:"color",get:function(){return this.target.pptColorFilter.currentColor},set:function(t){this.target.pptColorActive&&(this.target.pptColorFilter.color=t)}},{key:"on",get:function(){return this.target.pptColorActive?"true":"false"},set:function(t){this.target.pptColorActive="true"===t}},{key:"designColor",get:function(){return this.target.pptColorFilter.designColor}}]),t}(),lp=function(){function t(e){b(this,t),this.target=e}return x(t,[{key:"color",get:function(){return this.target.fillColorFilter.currentColor},set:function(t){this.target.fillActive&&(this.target.fillColorFilter.color=t)}},{key:"on",get:function(){return this.target.fillActive?"true":"false"},set:function(t){this.target.fillActive="true"===t}},{key:"designColor",get:function(){return this.target.fillColorFilter.designColor}}]),t}(),cp=function(){function t(e,n,r){b(this,t),this.hardHidden=!1,this.designRotation=0,this.target=e,!0===n&&(this.hardHidden=!0),this.designRotation=r}return x(t,[{key:"opacity",get:function(){return this.target.alpha},set:function(t){this.target.alpha=t}},{key:"rotation",get:function(){return this.target.rotation/Math.PI*180},set:function(t){this.target.rotation=t/180*Math.PI+this.designRotation}},{key:"visibility",get:function(){return this.target.visible?"visible":"hidden"},set:function(t){this.visibility===t||this.hardHidden||(this.target.visible="visible"===t)}}]),t}(),hp=function(){function t(e,n){b(this,t),this.actions=[],this.ctx=n,this.object=e,this.object.interactive=!0}return x(t,[{key:"reset",value:function(t){this.object.interactive=!1,this.object.removeAllListeners(),this.object=t,this.object.interactive=!0}},{key:"addAction",value:function(t,e){var n=this;this.actions.push([t,e]),"click"===e?(this.object.addListener("click",(function(){return n.handleAction(t)})),this.object.cursor="pointer"):"hover"===e&&this.object.addListener("mouseover",(function(){return n.handleAction(t)}))}},{key:"addProxy",value:function(t){var e=this;this.proxy=t,this.hitArea=this.getOriginHitArea(),this.proxy.interactive=!0,this.actions.forEach((function(t){var n,r,i=l(t,2),o=i[0],a=i[1];"click"===a?null===(n=e.proxy)||void 0===n||n.addListener("click",(function(t){return e.handleProxyAction(t,o)})):"hover"===a&&(null===(r=e.proxy)||void 0===r||r.addListener("mouseover",(function(t){return e.handleProxyAction(t,o)})))}))}},{key:"handleProxyAction",value:function(t,e){var n,r=t.data.global,i=this.object.getGlobalPosition(),o=r.x-i.x+this.object.pivot.x,a=r.y-i.y+this.object.pivot.y;(null===(n=this.hitArea)||void 0===n?void 0:n.contains(o,a))&&this.object.visible&&this.handleAction(e,!0)}},{key:"getOriginHitArea",value:function(){return this.object.hitArea?this.object.hitArea:new Al.k(0,0,this.object.width,this.object.height)}},{key:"handleAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.proxy&&!e||(this.ctx.eventHub.emit(Nm.hyperlinkTrigger,t),this.execAction(t))}},{key:"execAction",value:function(t){var e;if(this.ctx.eventHub.emit(Nm.userInput),"ppaction://hlinksldjump"===t.action){var n=(null!==(e=null==t?void 0:t.target)&&void 0!==e?e:"").match(/slide(\d+)\.xml/);n&&n[1]&&this.ctx.eventHub.emit(Nm.requestGotoSlide,Number(n[1]))}else if("ppaction://hlinkshowjump?jump=nextslide"===t.action)this.ctx.eventHub.emit(Nm.requestNextSlide);else if("ppaction://hlinkshowjump?jump=previousslide"===t.action)this.ctx.eventHub.emit(Nm.requestPrevSlide);else if("ppaction://hlinkshowjump?jump=firstslide"===t.action)this.ctx.eventHub.emit(Nm.requestGotoSlide,1);else if("ppaction://hlinkshowjump?jump=lastslide"===t.action)this.ctx.eventHub.emit(Nm.requestGotoSlide,-1);else if("ppaction://hlinkshowjump?jump=lastslideviewed"===t.action){var r=this.ctx.lastViewedIndex;this.ctx.eventHub.emit(Nm.requestGotoSlide,r)}else"ppaction://hlinkshowjump?jump=endshow"===t.action&&this.ctx.eventHub.emit(Nm.requestGotoSlide,-1)}}]),t}();function dp(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Math.abs(t-e)<=Math.pow(10,-n)}function Ap(t){return Math.floor(1e6*t)/1e6}var fp=function(){function t(){b(this,t),this.point={x:0,y:0},this.slope=Math.PI/4}return x(t,[{key:"resolveY",value:function(t){return Math.tan(this.slope)*(t-this.point.x)+this.point.y}},{key:"distanceToLinearEquation",value:function(t){return dp(this.slope,t.slope)?this.distanceToPoint(t.point):-1}},{key:"distanceToPoint",value:function(e){var n;if(Math.tan(this.slope)*(e.x-this.point.x)+this.point.y===e.y)return 0;n=this.slope>=Math.PI/2?this.slope-Math.PI/2:Math.PI/2+this.slope;var r=t.fromPointSlope(e,n),i=this.crossPoint(r);return i?Math.ceil(Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))):0}},{key:"crossPoint",value:function(t){if(dp(t.slope,this.slope))return null;var e=0,n=0,r=Math.tan(t.slope),i=Math.tan(this.slope),o=this.point,a=o.x,s=o.y,u=t.point,l=u.x,c=u.y;return dp(this.slope,Math.PI/2)?n=r*((e=this.point.x)-l)+c:dp(t.slope,Math.PI/2)?n=i*((e=t.point.x)-a)+s:dp(this.slope,Math.PI)||dp(this.slope,0)?e=((n=this.point.y)-c)/r+l:dp(t.slope,Math.PI)||dp(t.slope,0)?e=((n=t.point.y)-s)/i+a:n=i*((e=(r*l-c+s-i*a)/(r-i))-a)+s,{x:e,y:n}}}],[{key:"fromPointSlope",value:function(e,n){var r=new t;return r.point=e,r.slope=n,r}}]),t}(),pp=function(){function t(e,n,r){var i,o,a,s,u,l,c=this;b(this,t),this.scaleExt={x:1,y:1},this.scaleOrigin={x:1,y:1},this.designScale={x:1,y:1},this.bound=new Al.j(0,0,1,1),this.pptX=0,this.pptY=0,this.presetSubType=0,this.designWidth=0,this.designHeight=0,this.designX=0,this.designY=0,this.hasPreset=!1,this.container=new hl.b,this.animationFilterQueue=[],this.ctx=n,this.style=new cp(this.container,!!e.hardHidden,e.rotation||0),this.designGlobalPosition={x:r.x+(null!==(o=null===(i=e.position)||void 0===i?void 0:i.x)&&void 0!==o?o:0),y:r.y+(null!==(s=null===(a=e.position)||void 0===a?void 0:a.y)&&void 0!==s?s:0)},this.container.interactive=!0,(e.hlinkClick||e.hlinkHover)&&(this.hyperlink=new hp(this.container,this.ctx),e.hlinkHover&&(null===(u=this.hyperlink)||void 0===u||u.addAction(e.hlinkHover,"hover")),e.hlinkClick&&(null===(l=this.hyperlink)||void 0===l||l.addAction(e.hlinkClick,"click"))),this.ctx.clock.waitUntil((function(){try{return!!c.container.width}catch(t){return!1}}),3e3).then((function(){try{c.designWidth=c.designWidth||c.container.width}catch(t){}})),this.ctx.clock.waitUntil((function(){try{return!!c.container.height}catch(t){return!1}}),3e3).then((function(){try{c.designHeight=c.designHeight||c.container.height}catch(t){}}))}return x(t,[{key:"updateScale",value:function(){this.container&&(this.container.scale.x=this.designScale.x*this.scaleExt.x*this.scaleOrigin.x,this.container.scale.y=this.designScale.y*this.scaleExt.y*this.scaleOrigin.y)}},{key:"updateTransform",value:function(t){var e,n,r,i,o,a,s,u;this.designWidth=t.width,this.designHeight=t.height,this.designX=null!==(n=null===(e=t.position)||void 0===e?void 0:e.x)&&void 0!==n?n:0,this.designY=null!==(i=null===(r=t.position)||void 0===r?void 0:r.y)&&void 0!==i?i:0;var l=this.designWidth/2,c=this.designHeight/2;this.container.width=this.designWidth,this.container.height=this.designHeight,this.container.pivot.x=l,this.container.pivot.y=c;var h=null!==(a=null===(o=t.position)||void 0===o?void 0:o.x)&&void 0!==a?a:0,d=null!==(u=null===(s=t.position)||void 0===s?void 0:s.y)&&void 0!==u?u:0;this.container.x=h+l,this.container.y=d+c,t.scale&&(this.designScale={x:t.scale.x,y:t.scale.y},this.container.scale.x=t.scale.x,this.container.scale.y=t.scale.y),t.rotation&&(this.container.rotation=t.rotation);var A=new ud;A.drawRect(0,0,this.designWidth,this.designHeight),this.container.addChild(A),this.json.hardHidden&&(this.container.visible=!1),this.bound.x=h,this.bound.y=d,this.bound.width=this.designWidth,this.bound.height=this.designHeight}},{key:"addToAnimationFilterQueue",value:function(t){this.animationFilterQueue.push(t)}},{key:"removeAnimationFilterQueue",value:function(t){var e=this.animationFilterQueue.findIndex((function(e){return e===t}));e<0||this.animationFilterQueue.splice(e,1)}},{key:"getFirstAnimationFilter",value:function(){return this.animationFilterQueue.length>0?this.animationFilterQueue[0]:null}},{key:"scale",get:function(){return this.scaleOrigin},set:function(t){this.scaleOrigin.x=t.x,this.scaleOrigin.y=t.y,this.updateScale()}},{key:"design_ppt_w",get:function(){return Ap(this.designWidth/this.ctx.stageWidth)}},{key:"design_ppt_h",get:function(){return Ap((this.designHeight||this.container.height)/this.ctx.stageHeight)}},{key:"design_ppt_x",get:function(){return Ap(this.designX/this.ctx.stageWidth)}},{key:"design_ppt_y",get:function(){return Ap(this.designY/this.ctx.stageHeight)}},{key:"ppt_w",get:function(){return this.scaleExt.x*this.scaleOrigin.x*this.designWidth/this.ctx.stageWidth},set:function(t){this.designWidth&&(this.scaleExt.x=t*this.ctx.stageWidth/this.designWidth,this.updateScale())}},{key:"ppt_h",get:function(){var t=this.designHeight||this.container.height;return this.scaleExt.y*this.scaleOrigin.y*t/this.ctx.stageHeight},set:function(t){this.designHeight&&(this.scaleExt.y=t*this.ctx.stageHeight/this.designHeight,this.updateScale())}},{key:"ppt_x",get:function(){return(this.container.position.x-this.container.pivot.x)/this.ctx.stageWidth},set:function(t){this.pptX=t;var e=544===this.presetSubType?this.scaleExt.x:1;this.container.position.x=t*this.ctx.stageWidth+this.container.pivot.x*e}},{key:"ppt_y",get:function(){return(this.container.position.y-this.container.pivot.y)/this.ctx.stageHeight},set:function(t){this.pptY=t;var e=544===this.presetSubType?this.scaleExt.y:1;this.container.position.y=t*this.ctx.stageHeight+this.container.pivot.y*e}},{key:"r",get:function(){return this.container.rotation},set:function(t){this.container.rotation=t}},{key:"xshear",set:function(t){this.container.skew.x=t},get:function(){return this.container.skew.x}},{key:"yshear",set:function(t){this.container.skew.y=t},get:function(){return this.container.skew.y}}]),t}(),gp=n(108),vp=n.n(gp),mp=function(){function t(e){if(b(this,t),this._isInit=!1,this.h=0,this.s=0,this.l=0,this.a=1,e){this._isInit=!0;var n=e.match(/-?[0-9]+/g);n&&(this.h=parseInt(n[0],10),this.s=parseInt(n[1],10)/100,this.l=parseInt(n[2],10)/100)}}return x(t,[{key:"isInit",value:function(){return this._isInit}},{key:"by",value:function(t,e){e.h=Math.max(Math.min(this.h+t.h,359),0),e.s=Math.max(Math.min(this.s+t.s,1),0),e.l=Math.max(Math.min(this.l+t.l,1),0),e.a=Math.max(Math.min(this.a+t.a,1),0)}},{key:"fromHexString",value:function(t){var e,n,r=l(wp(t),4),i=r[0],o=r[1],a=r[2],s=r[3],u=0,c=Math.max(i,o,a),h=Math.min(i,o,a),d=c-h;n=(c+h)/2,0===d?u=0:c===i?u=(o-a)/d%6*60:c===o?u=60*((a-i)/d+2):c===a&&(u=60*((i-o)/d+4)),e=0===d?0:d/(1-Math.abs(2*n-1)),this.h=u,this.s=e,this.l=n,this.a=s}},{key:"interpolationFrom",value:function(t,e,n){var r=t.h+(this.h-t.h)*e,i=t.s+(this.s-t.s)*e,o=t.l+(this.l-t.l)*e,a=t.a+(this.a-t.a)*e;n.h=Math.max(Math.min(r,359),0),n.s=Math.max(Math.min(i,1),0),n.l=Math.max(Math.min(o,1),0),n.a=Math.max(Math.min(a,1),0)}},{key:"toHexString",value:function(){var t=[0,0,0,0],e=this.h,n=this.s,r=this.l;if(e<360&&e>=0&&n<=1&&n>=0&&r<=1&&r>=0){var i,o=(1-Math.abs(2*r-1))*n,a=o*(1-Math.abs(e/60%2-1)),s=r-o/2;t=[(i=l(e>=0&&e<60?[o,a,0]:e>=60&&e<120?[a,o,0]:e>=120&&e<180?[0,o,a]:e>=180&&e<240?[0,a,o]:e>=240&&e<300?[a,0,o]:[o,0,a],3))[0]+s,i[1]+s,i[2]+s,this.a]}return xp(t)}}]),t}(),yp=function(){function t(e){b(this,t),this._isInit=!1,this.r=0,this.g=0,this.b=0,this.a=0,e&&(this._isInit=!0,this.fromHexString(e))}return x(t,[{key:"fromHexString",value:function(t){var e=l(wp(t),4),n=e[0],r=e[1],i=e[2],o=e[3];this.r=n,this.g=r,this.b=i,this.a=o}},{key:"isInit",value:function(){return this._isInit}},{key:"interpolationFrom",value:function(t,e,n){n.r=t.r+(this.r-t.r)*e,n.g=t.g+(this.g-t.g)*e,n.b=t.b+(this.b-t.b)*e,n.a=t.a+(this.a-t.a)*e}},{key:"by",value:function(t,e){e.r=Math.min(Math.max(this.r+t.r,0),255),e.g=Math.min(Math.max(this.g+t.g,0),255),e.b=Math.min(Math.max(this.b+t.b,0),255),e.a=Math.min(Math.max(this.a+t.a,0),1)}},{key:"toHexString",value:function(){return xp([this.r,this.g,this.b,this.a])}}]),t}();function bp(t){var e=t.substring(1);return[parseInt(e.substring(0,6),16),parseInt(e.substring(6,8),16)/255]}function wp(t){return 0===(t=t.replace(/^#/,"")).substring(6,8).length&&(t+="FF"),[parseInt(t.substring(0,2).padStart(8,"0"),16)/255,parseInt(t.substring(2,4).padStart(8,"0"),16)/255,parseInt(t.substring(4,6).padStart(8,"0"),16)/255,parseInt(t.substring(6,8).padStart(8,"0"),16)/255]}function xp(t){return"#"+Math.round(255*t[0]).toString(16).padStart(2,"0")+Math.round(255*t[1]).toString(16).padStart(2,"0")+Math.round(255*t[2]).toString(16).padStart(2,"0")+Math.round(255*t[3]).toString(16).padStart(2,"0")}function _p(t,e,n){var r=wp(t),i=wp(e),o=Math.round(255*(r[0]+(i[0]-r[0])*n)),a=Math.round(255*(r[1]+(i[1]-r[1])*n)),s=Math.round(255*(r[2]+(i[2]-r[2])*n)),u=Math.round(255*(r[3]+(i[3]-r[3])*n));return"#"+o.toString(16).padStart(2,"0")+a.toString(16).padStart(2,"0")+s.toString(16).padStart(2,"0")+u.toString(16).padStart(2,"0")}var Tp=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.call(this,void 0,"\nvarying vec2 vTextureCoord;\n\nuniform vec4 color;\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n\n    if (texColor.a > 0.0) {\n        vec4 resultColor = color;\n        resultColor = resultColor * texColor.a;\n        gl_FragColor = resultColor;\n    } else {\n        gl_FragColor = texColor;\n    }\n}\n",{color:new Float32Array([0,0,0,0]),active:0})).currentColor="#FFFFFFFF",t.designColor="#FFFFFFFF",t}return x(n,[{key:"color",set:function(t){this.currentColor=t;var e=wp(t);this.uniforms.color=Float32Array.from(e)},get:function(){return this.currentColor}}]),n}(_l.k),Ep=new ff.ColorMatrixFilter;Ep.matrix=[1,0,0,0,-.2,0,1,0,0,-.2,0,0,1,0,-.2,0,0,0,1,0];var Sp=new ff.ColorMatrixFilter;Sp.matrix=[1,0,0,0,-.1,0,1,0,0,-.1,0,0,1,0,-.1,0,0,0,1,0];var Mp=new ff.ColorMatrixFilter;Mp.matrix=[1,0,0,0,.2,0,1,0,0,.2,0,0,1,0,.2,0,0,0,1,0];var Cp=new ff.ColorMatrixFilter;Cp.matrix=[1,0,0,0,.1,0,1,0,0,.1,0,0,1,0,.1,0,0,0,1,0];var Ip={darken:Ep,darkenLess:Sp,lightenLess:Cp,lighten:Mp},Np=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,{position:{x:t.x,y:t.y},width:t.width,height:t.height},r,i)).fillColorFilter=new Tp,o.fill=new lp(v(o)),o.json=t,o.ctx=r,o.parentGlobalPos=i,o.global={x:i.x+t.x,y:i.y+t.y},o.updateTransform({position:{x:t.x,y:t.y},width:t.width,height:t.height}),o}return x(n,[{key:"clearOnSlideChange",value:function(){}},{key:"initOnReuse",value:function(){}},{key:"getTextElement",value:function(){return null}},{key:"getBgElement",value:function(){return null}},{key:"fillActive",get:function(){var t,e;return(null!==(e=null===(t=this.container.filters)||void 0===t?void 0:t.length)&&void 0!==e?e:-1)>0},set:function(t){var e,n;t?(null!==(n=null===(e=this.container.filters)||void 0===e?void 0:e.indexOf(this.fillColorFilter))&&void 0!==n?n:-1)<0&&(this.container.filters=[this.fillColorFilter]):this.container.filters=[]}},{key:"renderContainer",get:function(){return this.container}},{key:"interactiveContainer",get:function(){return this.container}},{key:"ppt_x",get:function(){return this.global.x/this.ctx.stageWidth},set:function(t){var e=t*this.ctx.stageWidth-this.global.x,n=544===this.presetSubType?this.scaleExt.x:1;this.container.position.x=this.designX+e+this.container.pivot.x*n}},{key:"ppt_y",get:function(){return this.global.y/this.ctx.stageHeight},set:function(t){var e=t*this.ctx.stageHeight-this.global.y,n=544===this.presetSubType?this.scaleExt.y:1;this.container.position.y=this.designY+e+this.container.pivot.y*n}},{key:"design_ppt_x",get:function(){return Ap(this.global.x/this.ctx.stageWidth)}},{key:"design_ppt_y",get:function(){return Ap(this.global.y/this.ctx.stageHeight)}}]),n}(pp),Bp=function(){function t(e,n,r,i,o,a,s,u,l,c,h){b(this,t),this.ctx=e,this.type=n,this.lineWidth=r,this.width=i,this.height=o,this.fillColor=a,this.isHorz=s,this.renderContainer=new hl.b,this.ghcTextureId="".concat(u,"-text-p").concat(l,"-l").concat(c,"-u").concat(h,"-underLine")}return x(t,[{key:"createPaths",value:function(){if("ww"===this.type)return null;var t,e="M 0,0 L ".concat(9525*this.width,",0"),n=[this.width,this.lineWidth],r=n[0],i=n[1];return this.isHorz||(e="M 0,0 L 0,"+9525*this.height,r=(t=[this.lineWidth,this.height])[0],i=t[1]),{paths:[{id:Rf(),path:e,fill:"norm",hasStroke:!0,scale:{x:1,y:1},hash:qf()(e)}],width:r,height:i}}},{key:"getLineStyle",value:function(){var t={width:this.lineWidth};return"dotted"===this.type&&(t.dash=""+this.lineWidth),t}},{key:"preRender",value:function(){var t=this.createPaths();if(t){var e=t.paths,n=t.width,r=t.height,i=e.reduce((function(t,e){return t+e.hash}),"");this.ctx.graphicsTexture.addGraphics(this.ghcTextureId,e,i,{x:0,y:0},n,r,this.getLineStyle(),this.ctx.objectPoolGroup,!1,null,this.fillColor)}}},{key:"render",value:function(){if(this.ghcTextureId){var t=this.ctx.graphicsTexture.getGraphicsData(this.ghcTextureId);t&&(this.sprite=new dd,this.sprite.texture=t.texture,this.sprite.pivot.x=t.pivot.x)}}},{key:"destroy",value:function(){var t;null===(t=this.sprite)||void 0===t||t.destroy({texture:!0})}}]),t}(),kp=134217729;function Pp(t,e,n,r,i){var o,a,s,u,l=e[0],c=r[0],h=0,d=0;c>l==c>-l?(o=l,l=e[++h]):(o=c,c=r[++d]);var A=0;if(h<t&&d<n)for(c>l==c>-l?(s=o-((a=l+o)-l),l=e[++h]):(s=o-((a=c+o)-c),c=r[++d]),o=a,0!==s&&(i[A++]=s);h<t&&d<n;)c>l==c>-l?(s=o-((a=o+l)-(u=a-o))+(l-u),l=e[++h]):(s=o-((a=o+c)-(u=a-o))+(c-u),c=r[++d]),o=a,0!==s&&(i[A++]=s);for(;h<t;)s=o-((a=o+l)-(u=a-o))+(l-u),l=e[++h],o=a,0!==s&&(i[A++]=s);for(;d<n;)s=o-((a=o+c)-(u=a-o))+(c-u),c=r[++d],o=a,0!==s&&(i[A++]=s);return 0===o&&0!==A||(i[A++]=o),A}function Dp(t){return new Float64Array(t)}var Lp=Dp(4),Op=Dp(8),Rp=Dp(12),Fp=Dp(16),Up=Dp(4);function jp(t,e,n,r,i,o){var a=(e-o)*(n-i),s=(t-i)*(r-o),u=a-s;if(0===a||0===s||a>0!=s>0)return u;var l=Math.abs(a+s);return Math.abs(u)>=33306690738754716e-32*l?u:-function(t,e,n,r,i,o,a){var s,u,l,c,h,d,A,f,p,g,v,m,y,b,w,x,_,T,E=t-i,S=n-i,M=e-o,C=r-o;h=(w=(f=E-(A=(d=kp*E)-(d-E)))*(g=C-(p=(d=kp*C)-(d-C)))-((b=E*C)-A*p-f*p-A*g))-(v=w-(_=(f=M-(A=(d=kp*M)-(d-M)))*(g=S-(p=(d=kp*S)-(d-S)))-((x=M*S)-A*p-f*p-A*g))),Lp[0]=w-(v+h)+(h-_),h=(y=b-((m=b+v)-(h=m-b))+(v-h))-(v=y-x),Lp[1]=y-(v+h)+(h-x),h=(T=m+v)-m,Lp[2]=m-(T-h)+(v-h),Lp[3]=T;var I=function(t,e){for(var n=e[0],r=1;r<t;r++)n+=e[r];return n}(4,Lp),N=22204460492503146e-32*a;if(I>=N||-I>=N||(s=t-(E+(h=t-E))+(h-i),l=n-(S+(h=n-S))+(h-i),u=e-(M+(h=e-M))+(h-o),c=r-(C+(h=r-C))+(h-o),0===s&&0===u&&0===l&&0===c)||(N=11093356479670487e-47*a+33306690738754706e-32*Math.abs(I),(I+=E*c+C*s-(M*l+S*u))>=N||-I>=N))return I;h=(w=(f=s-(A=(d=kp*s)-(d-s)))*(g=C-(p=(d=kp*C)-(d-C)))-((b=s*C)-A*p-f*p-A*g))-(v=w-(_=(f=u-(A=(d=kp*u)-(d-u)))*(g=S-(p=(d=kp*S)-(d-S)))-((x=u*S)-A*p-f*p-A*g))),Up[0]=w-(v+h)+(h-_),h=(y=b-((m=b+v)-(h=m-b))+(v-h))-(v=y-x),Up[1]=y-(v+h)+(h-x),h=(T=m+v)-m,Up[2]=m-(T-h)+(v-h),Up[3]=T;var B=Pp(4,Lp,4,Up,Op);h=(w=(f=E-(A=(d=kp*E)-(d-E)))*(g=c-(p=(d=kp*c)-(d-c)))-((b=E*c)-A*p-f*p-A*g))-(v=w-(_=(f=M-(A=(d=kp*M)-(d-M)))*(g=l-(p=(d=kp*l)-(d-l)))-((x=M*l)-A*p-f*p-A*g))),Up[0]=w-(v+h)+(h-_),h=(y=b-((m=b+v)-(h=m-b))+(v-h))-(v=y-x),Up[1]=y-(v+h)+(h-x),h=(T=m+v)-m,Up[2]=m-(T-h)+(v-h),Up[3]=T;var k=Pp(B,Op,4,Up,Rp);h=(w=(f=s-(A=(d=kp*s)-(d-s)))*(g=c-(p=(d=kp*c)-(d-c)))-((b=s*c)-A*p-f*p-A*g))-(v=w-(_=(f=u-(A=(d=kp*u)-(d-u)))*(g=l-(p=(d=kp*l)-(d-l)))-((x=u*l)-A*p-f*p-A*g))),Up[0]=w-(v+h)+(h-_),h=(y=b-((m=b+v)-(h=m-b))+(v-h))-(v=y-x),Up[1]=y-(v+h)+(h-x),h=(T=m+v)-m,Up[2]=m-(T-h)+(v-h),Up[3]=T;var P=Pp(k,Rp,4,Up,Fp);return Fp[P-1]}(t,e,n,r,i,o,l)}var zp=Math.pow(2,-52),Hp=new Uint32Array(512),Qp=function(){function t(e){b(this,t);var n=e.length>>1;if(n>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return x(t,null,[{key:"from",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qp,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kp,i=e.length,o=new Float64Array(2*i),a=0;a<i;a++){var s=e[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new t(o)}}]),x(t,[{key:"update",value:function(){for(var t=this.coords,e=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,o=t.length>>1,a=1/0,s=1/0,u=-1/0,l=-1/0,c=0;c<o;c++){var h=t[2*c],d=t[2*c+1];h<a&&(a=h),d<s&&(s=d),h>u&&(u=h),d>l&&(l=d),this._ids[c]=c}for(var A,f,p,g=(a+u)/2,v=(s+l)/2,m=1/0,y=0;y<o;y++){var b=Gp(g,v,t[2*y],t[2*y+1]);b<m&&(A=y,m=b)}var w=t[2*A],x=t[2*A+1];m=1/0;for(var _=0;_<o;_++)if(_!==A){var T=Gp(w,x,t[2*_],t[2*_+1]);T<m&&T>0&&(f=_,m=T)}for(var E=t[2*f],S=t[2*f+1],M=1/0,C=0;C<o;C++)if(C!==A&&C!==f){var I=Wp(w,x,E,S,t[2*C],t[2*C+1]);I<M&&(p=C,M=I)}var N=t[2*p],B=t[2*p+1];if(M===1/0){for(var k=0;k<o;k++)this._dists[k]=t[2*k]-t[0]||t[2*k+1]-t[1];Yp(this._ids,this._dists,0,o-1);for(var P=new Uint32Array(o),D=0,L=0,O=-1/0;L<o;L++){var R=this._ids[L];this._dists[R]>O&&(P[D++]=R,O=this._dists[R])}return this.hull=P.subarray(0,D),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(jp(w,x,E,S,N,B)<0){var F=f,U=E,j=S;f=p,E=N,S=B,p=F,N=U,B=j}var z=function(t,e,n,r,i,o){var a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,h=u*u+l*l,d=.5/(a*l-s*u);return{x:t+(l*c-s*h)*d,y:e+(a*h-u*c)*d}}(w,x,E,S,N,B);this._cx=z.x,this._cy=z.y;for(var H=0;H<o;H++)this._dists[H]=Gp(t[2*H],t[2*H+1],z.x,z.y);Yp(this._ids,this._dists,0,o-1),this._hullStart=A;var Q=3;n[A]=e[p]=f,n[f]=e[A]=p,n[p]=e[f]=A,r[A]=0,r[f]=1,r[p]=2,i.fill(-1),i[this._hashKey(w,x)]=A,i[this._hashKey(E,S)]=f,i[this._hashKey(N,B)]=p,this.trianglesLen=0,this._addTriangle(A,f,p,-1,-1,-1);for(var G,V,W=0;W<this._ids.length;W++){var Y=this._ids[W],X=t[2*Y],q=t[2*Y+1];if(!(W>0&&Math.abs(X-G)<=zp&&Math.abs(q-V)<=zp||(G=X,V=q,Y===A||Y===f||Y===p))){for(var K=0,Z=0,J=this._hashKey(X,q);Z<this._hashSize&&(-1===(K=i[(J+Z)%this._hashSize])||K===n[K]);Z++);for(var $=void 0,tt=K=e[K];$=n[tt],jp(X,q,t[2*tt],t[2*tt+1],t[2*$],t[2*$+1])>=0;)if((tt=$)===K){tt=-1;break}if(-1!==tt){var et=this._addTriangle(tt,Y,n[tt],-1,-1,r[tt]);r[Y]=this._legalize(et+2),r[tt]=et,Q++;for(var nt=n[tt];$=n[nt],jp(X,q,t[2*nt],t[2*nt+1],t[2*$],t[2*$+1])<0;)et=this._addTriangle(nt,Y,$,r[Y],-1,r[nt]),r[Y]=this._legalize(et+2),n[nt]=nt,Q--,nt=$;if(tt===K)for(;jp(X,q,t[2*($=e[tt])],t[2*$+1],t[2*tt],t[2*tt+1])<0;)et=this._addTriangle($,Y,tt,-1,r[tt],r[$]),this._legalize(et+2),r[$]=et,n[tt]=tt,Q--,tt=$;this._hullStart=e[Y]=tt,n[tt]=e[nt]=Y,n[Y]=nt,i[this._hashKey(X,q)]=Y,i[this._hashKey(t[2*tt],t[2*tt+1])]=tt}}}this.hull=new Uint32Array(Q);for(var rt=0,it=this._hullStart;rt<Q;rt++)this.hull[rt]=it,it=n[it];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,e){return Math.floor((n=t-this._cx,r=e-this._cy,i=n/(Math.abs(n)+Math.abs(r)),(r>0?3-i:1+i)/4*this._hashSize))%this._hashSize;var n,r,i}},{key:"_legalize",value:function(t){for(var e=this._triangles,n=this._halfedges,r=this.coords,i=0,o=0;;){var a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1!==a){var u=a-a%3,l=s+(t+1)%3,c=u+(a+2)%3,h=e[o],d=e[t],A=e[l],f=e[c];if(Vp(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*A],r[2*A+1],r[2*f],r[2*f+1])){e[t]=f,e[a]=h;var p=n[c];if(-1===p){var g=this._hullStart;do{if(this._hullTri[g]===c){this._hullTri[g]=t;break}g=this._hullPrev[g]}while(g!==this._hullStart)}this._link(t,p),this._link(a,n[o]),this._link(o,c);var v=u+(a+1)%3;i<Hp.length&&(Hp[i++]=v)}else{if(0===i)break;t=Hp[--i]}}else{if(0===i)break;t=Hp[--i]}}return o}},{key:"_link",value:function(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}},{key:"_addTriangle",value:function(t,e,n,r,i,o){var a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}]),t}();function Gp(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function Vp(t,e,n,r,i,o,a,s){var u=t-a,l=e-s,c=n-a,h=r-s,d=i-a,A=o-s,f=c*c+h*h,p=d*d+A*A;return u*(h*p-f*A)-l*(c*p-f*d)+(u*u+l*l)*(c*A-h*d)<0}function Wp(t,e,n,r,i,o){var a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,h=u*u+l*l,d=.5/(a*l-s*u),A=(l*c-s*h)*d,f=(a*h-u*c)*d;return A*A+f*f}function Yp(t,e,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var o=t[i],a=e[o],s=i-1;s>=n&&e[t[s]]>a;)t[s+1]=t[s--];t[s+1]=o}else{var u=n+1,l=r;Xp(t,n+r>>1,u),e[t[n]]>e[t[r]]&&Xp(t,n,r),e[t[u]]>e[t[r]]&&Xp(t,u,r),e[t[n]]>e[t[u]]&&Xp(t,n,u);for(var c=t[u],h=e[c];;){do{u++}while(e[t[u]]<h);do{l--}while(e[t[l]]>h);if(l<u)break;Xp(t,u,l)}t[n+1]=t[l],t[l]=c,r-u+1>=l-n?(Yp(t,e,u,r),Yp(t,e,n,l-1)):(Yp(t,e,n,l-1),Yp(t,e,u,r))}}function Xp(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function qp(t){return t[0]}function Kp(t){return t[1]}function Zp(t,e,n){var r=e/2,i=n/2,a=[{x:-r,y:i},{x:-r,y:-i},{x:r,y:i},{x:r,y:-i}],s=[fp.fromPointSlope({x:-r,y:0},Math.PI/2),fp.fromPointSlope({x:0,y:i},0),fp.fromPointSlope({x:r,y:0},Math.PI/2),fp.fromPointSlope({x:0,y:-i},0)],u=[],l=t.stopList.slice(1,t.stopList.length-1).map((function(a){for(var l,c,h,d=2*Math.PI,A=null!==(c=null===(l=t.line)||void 0===l?void 0:l.ang)&&void 0!==c?c:0;A>d;)A-=d;for(;A<0;)A+=d;var f={x:0,y:0};dp(A,Math.PI/2)?(f.x=0,f.y=n/2-a.pos*n):dp(A,0)?(f.x=a.pos*e-e/2,f.y=0):(f.x=a.pos*e-e/2,f.y=n/2-a.pos*n),A>Math.PI/2&&A<=Math.PI&&(f.x*=-1),A>Math.PI&&A<=2*Math.PI&&(f.y*=-1);var p=fp.fromPointSlope(f,Math.PI/2-((null===(h=t.line)||void 0===h?void 0:h.ang)||0)),g=s.map((function(t){return p.crossPoint(t)})).filter((function(t){return t&&t.x<=r&&t.x>=-r&&t.y<=i&&t.y>=-i})).map((function(t){return{point:t,color:a.color}})).sort((function(t,e){return e.point.y-t.point.y}));u.push.apply(u,o(g));for(var v=Math.abs(g[1].point.x-g[0].point.x)/10,m=20;m--;){var y=m%2==0?1:-1,b=f.x+y*v,w=p.resolveY(b);b<=r&&b>=-r&&w<=i&&w>=-i&&u.push({point:{x:b,y:w},color:a.color}),v+=v}return p})),c=[],h=[];t:for(var d=0;d<a.length;d++){for(var A=a[d],f=0;f<l.length-1;f++){var p=l[f],g=l[f+1],v=p.distanceToLinearEquation(g),m=p.distanceToPoint(A),y=g.distanceToPoint(A);if(m<v&&y<v){var b=t.stopList.slice(1,t.stopList.length-1)[f],w=t.stopList.slice(1,t.stopList.length-1)[f+1],x=_p(b.color,w.color,m/v);u.splice(f+1,0,{point:A,color:x});continue t}}var _=l[0],T=l[l.length-1],E=_.distanceToPoint(A),S=T.distanceToPoint(A);E<=S?c.push({point:A,dis:E}):h.push({point:A,dis:S})}for(var M=(c=c.sort((function(t,e){return e.dis-t.dis}))).map((function(e,n){if(0===n)return{point:e.point,color:t.stopList[0].color};var r=t.stopList[0].color,i=t.stopList[1].color;return{point:e.point,color:_p(r,i,1-(0===c[0].dis?1:e.dis/c[0].dis))}})).sort((function(t,e){return e.point.y-t.point.y})),C=(h=h.sort((function(t,e){return e.dis-t.dis}))).map((function(e,n){if(0===n)return{point:e.point,color:t.stopList[t.stopList.length-1].color};var r=t.stopList[t.stopList.length-2].color,i=t.stopList[t.stopList.length-1].color;return{point:e.point,color:_p(r,i,0===h[0].dis?0:e.dis/h[0].dis)}})).sort((function(t,e){return e.point.y-t.point.y})),I=M.concat.apply(M,u).concat(C),N=0;N<I.length;N++)I[N].point.x+=r,I[N].point.y=-I[N].point.y+i;return{points:I,position:{x:0,y:0}}}var Jp="\nvec3 rgb2hsl(vec3 rgb) {\n    float cMax = max(max(rgb.r, rgb.g), rgb.b);\n    float cMin = min(min(rgb.r, rgb.g), rgb.b);\n    float delta = cMax - cMin;\n    \n    float h = 0.0;\n    if (delta == 0.0) {\n        h = 0.0;\n    } else if (cMax == rgb.r) {\n        h = 60.0 * mod(((rgb.g - rgb.b) / delta), 6.0);\n    } else if (cMax == rgb.g ) {\n        h = 60.0 * ((rgb.b - rgb.r) / delta + 2.0);\n    } else if (cMax == rgb.b) {\n        h = 60.0 * ((rgb.r - rgb.g) / delta + 4.0);\n    }\n    \n    float l = (cMax + cMin) / 2.0;\n    \n    float s = 0.0;\n    if (delta == 0.0) {\n        s = 0.0;\n    } else {\n        s = delta / (1.0 - abs(2.0 * l - 1.0));\n    }\n    \n    return vec3(h, s, l);\n}\n",$p=[Jp],tg={biLevel:"\nvec4 transform(vec4 texColor, float arg) {\n    mat3 rgb2yuv = mat3(\n        0.2126, 0.7152, 0.0722,\n        -0.09991, -0.33609, 0.43600,\n        0.615, -0.5586, -0.05639\n    );\n    vec3 yuv = texColor.rgb * rgb2yuv;\n    if (yuv.x >= 0.49 || texColor.a < 0.9) {\n        return vec4(1.0, 1.0, 1.0, 1.0) * texColor.a;\n    } else {\n        return vec4(0.0, 0.0, 0.0, 1.0) * texColor.a;\n    }\n}\n",alphaModFix:"\nvec4 transform(vec4 texColor, float arg) {\n   return texColor * arg;\n}\n",alphaBiLevel:"\nvec4 transform(vec4 texColor, float arg) {\n    vec4 result = vec4(texColor);\n    result.rgb = result.rgb / texColor.a;\n    if (texColor.a < arg) {\n        result.a = 0.0;\n    } else {\n        result.a = 1.0;\n    }\n    return result;\n}\n",alphaCeiling:"\nvec4 transform(vec4 texColor, float arg) {\n    vec4 result = vec4(texColor);\n    result.rgb = result.rgb / texColor.a;\n    if (texColor.a > 0.0) {\n        result.a = 1.0;\n    }\n    return result;\n}\n",alphaFloor:"\nvec4 transform(vec4 texColor, float arg) {\n    vec4 result = vec4(texColor);\n    result.rgb = result.rgb / texColor.a;\n    if (texColor.a < 1.0) {\n        result.a = 0.0;\n    }\n    return result;\n}\n",grayscl:"\nvec4 transform(vec4 texColor, float arg) {\n    float avg = (texColor.r + texColor.g + texColor.b) / 3.0;\n    return vec4(avg, avg, avg, texColor.a);\n}\n"},eg=function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),e.call(this,void 0,(i=tg[t],"\nvarying vec2 vTextureCoord;\n\nuniform float arg;\nuniform sampler2D uSampler;\n\n".concat($p.map((function(t){return t+"\n"})).join("\n"),"\n\n").concat(i,"\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg);\n}\n")),{arg:r})}return n}(_l.k),ng=[Jp],rg={clrChange:"\nvec4 transform(vec4 texColor, vec4 arg1, vec4 arg2) {\n    float epsilon = 0.001;\n    vec3 colorDiff = arg1.rgb - (texColor.rgb / max(texColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    if (colorDistance < epsilon) {\n        arg2.rgb *= arg2.a;\n        return arg2;\n    } else {\n        return texColor;\n    }\n}\n",changeBulletColor:"\nvec4 transform(vec4 texColor, vec4 arg1, vec4 arg2) {\n    if (texColor.a == 0.0) {\n        return texColor;\n    } else {\n        return arg2;\n    }\n}\n",duotone:"\nvec4 transform(vec4 texColor, vec4 arg1, vec4 arg2) {\n    float avg = (texColor.r + texColor.g + texColor.b) / 3.0;\n\n    vec3 hsl = rgb2hsl(vec3(avg, avg, avg));\n\n    vec3 result = arg2.rgb * hsl.z + arg1.rgb * (1.0 - hsl.z);\n\n    return vec4(result * texColor.a, texColor.a);\n}\n"},ig=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),e.call(this,void 0,(o=rg[t],"\nvarying vec2 vTextureCoord;\n\nuniform vec4 arg1;\nuniform vec4 arg2;\nuniform sampler2D uSampler;\n\n".concat(ng.map((function(t){return t+"\n"})).join("\n"),"\n\n").concat(o,"\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg1, arg2);\n}\n")),{arg1:Float32Array.from(r),arg2:Float32Array.from(i)})}return n}(_l.k),og=[Jp],ag={lum:"\nvec4 transform(vec4 texColor, float arg1, float arg2) {\n    vec3 rgb = texColor.rgb / texColor.a;\n\n    // \n    float C = arg2 * 255.0;\n    float F = (259.0 * (255.0 + C)) / (255.0 * (259.0 - C));\n    rgb.rgb = F * (rgb.rgb - 0.5) + 0.5;\n\n    // \n    rgb.rgb += arg1;\n\n    rgb.rgb *= texColor.a;\n    return vec4(rgb, texColor.a);\n}\n"},sg=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),e.call(this,void 0,(o=ag[t],"\nvarying vec2 vTextureCoord;\n\nuniform float arg1;\nuniform float arg2;\nuniform sampler2D uSampler;\n\n".concat(og.map((function(t){return t+"\n"})).join("\n"),"\n\n").concat(o,"\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg1, arg2);\n}\n")),{arg1:r,arg2:i})}return n}(_l.k),ug=[Jp],lg={alphaInv:"\nvec4 transform(vec4 texColor, vec4 arg1) {\n    float alpha = 1.0 - texColor.a;\n    arg1.rgb = arg1.rgb * alpha;\n    arg1.a = alpha;\n    return arg1;\n}\n"},cg=function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),e.call(this,void 0,(i=lg[t],"\nvarying vec2 vTextureCoord;\n\nuniform vec4 arg1;\nuniform sampler2D uSampler;\n\n".concat(ug.map((function(t){return t+"\n"})).join("\n"),"\n\n").concat(i,"\n\nvoid main(void){\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = transform(texColor, arg1);\n}\n")),{arg1:Float32Array.from(r)})}return n}(_l.k),hg=function(){function t(e,n,r,i,o){b(this,t),this.ctx=e,this.fillStyle=n,this.width=r,this.height=i,this.config=o,this.clonedObjects=[],this._displayObject=null,this.gradientHash=qf()("".concat(JSON.stringify(n)).concat(Math.ceil(r)).concat(Math.ceil(i)))}return x(t,[{key:"createDisplayObject",value:function(){var t,e,n,r;if(!this.fillStyle)return null;if(this.config.useSlideBackgroundFill&&this.ctx.bgTexture){var i=new dd;return i.texture=this.ctx.bgTexture,i}if("solidFill"===this.fillStyle.fillType||"noFill"===this.fillStyle.fillType)return null;if("gradientFill"===this.fillStyle.fillType){var a=new dd,s=function(t,e,n){var r,i=new hl.b;if(t.stopList.sort((function(t,e){return t.pos-e.pos})),!t.stopList.find((function(t){return 0===t.pos}))){var a=t.stopList[0];t.stopList.unshift({pos:0,color:a.color})}if(!t.stopList.find((function(t){return 1===t.pos}))){var s=t.stopList[t.stopList.length-1];t.stopList.push({pos:1,color:s.color})}var u=function(t){for(var e=[],n=0,r=t.length;n<r-1;n++){var i=t[n],o=t[n+1],a=i.pos+.5*(o.pos-i.pos),s=_p(i.color,o.color,.5),u=2*n;e[u]=i,e[u+1]={color:s,pos:a},e[u+2]=o}return e};if(t.stopList=u(t.stopList),t.stopList=u(t.stopList),r=t.line?Zp(t,e,n):t.path?function(t,e,n){var r,i,o,a=[],s={x:0,y:0};if("circle"===(null===(r=t.path)||void 0===r?void 0:r.path)||"rect"===(null===(i=t.path)||void 0===i?void 0:i.path)||"shape"===(null===(o=t.path)||void 0===o?void 0:o.path)){var u=e/2,l=n/2,c=Math.sqrt(u*u+l*l);t.stopList.forEach((function(t){if(0===t.pos)a.push({point:{x:0,y:0},color:t.color});else{var e=c*t.pos,n=new Ya;n.absellipse(0,0,e,e,0,2*Math.PI,!1,0),n.getPoints(50).forEach((function(e){a.push({point:{x:e.x,y:e.y},color:t.color})}))}s.x=u,s.y=l}))}return{points:a,position:s}}(t,e,n):Zp(t,e,n)){for(var l=[],c=[],h=r,d=h.position,A=h.points,f=Qp.from(A,(function(t){return t.point.x}),(function(t){return t.point.y})),p=0;p<f.triangles.length;p+=3)l.push(A[f.triangles[p]].point.x,A[f.triangles[p]].point.y),l.push(A[f.triangles[p+1]].point.x,A[f.triangles[p+1]].point.y),l.push(A[f.triangles[p+2]].point.x,A[f.triangles[p+2]].point.y),c.push.apply(c,o(wp(A[f.triangles[p]].color))),c.push.apply(c,o(wp(A[f.triangles[p+1]].color))),c.push.apply(c,o(wp(A[f.triangles[p+2]].color)));var g=new _l.l;g.addAttribute("aVertexPosition",l,2),g.addAttribute("aColor",c,4);var v=_l.r.from("\n        precision mediump float;\n        attribute vec2 aVertexPosition;\n        attribute vec4 aColor;\n        uniform mat3 translationMatrix;\n        uniform mat3 projectionMatrix;\n        varying vec4 vColor;\n        void main() {\n            vColor = aColor;\n            gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n        }","precision mediump float;    \n        varying vec4 vColor;\n        void main() {\n            float alpha = vColor.a;\n            vec4 color = vColor;\n            color.a = 1.0;\n            gl_FragColor = color * alpha;\n        }\n    "),m=new ud;m.drawRect(0,0,e+1,n+1),i.mask=m,i.addChild(m);var y=new Wd.a(g,v);y.position.x=d.x,y.position.y=d.y,i.addChild(y)}return i}(this.fillStyle,this.width,this.height),u=_l.p.create({width:this.width,height:this.height,resolution:this.ctx.renderer.resolution});return this.ctx.renderer.render(s,{renderTexture:u}),s.destroy({children:!0,texture:!0}),a.texture=u,a}if("blipFill"===this.fillStyle.fillType){var l=this.fillStyle,c=l.src,h=l.filters,d=this.ctx.spriteTexture.getTexture(c),A=this.ctx.spriteTexture.getFrameData(c);if(d){var f=new dd;if(f.texture=d,h.length>0&&this.config.useFilter&&(this.ctx.featureList||{}).filter&&(f.filters=(e=h,n=this.ctx.featureList,r=[],e.forEach((function(t){var e=((null==n?void 0:n.filter)||[]).indexOf(t.type)>=0;if(["biLevel","alphaBiLevel","alphaCeiling","alphaModFix","alphaFloor","grayscl"].indexOf(t.type)>=0&&e)r.push(new eg(t.type,t.args[0]||0));else if(["clrChange","changeBulletColor","duotone"].indexOf(t.type)>=0&&e){var i=wp(t.args[0]),o=wp(t.args[1]);r.push(new ig(t.type,i,o))}else if("lum"===t.type&&e)r.push(new sg(t.type,t.args[0],t.args[1]));else if("alphaInv"===t.type&&e){var a=wp(t.args[0]);r.push(new cg(t.type,a))}})),r)),this.config.fillFloat){var p=this.config.fillFloat.fillRect,g=p.l,v=p.t,m=p.r,y=p.b,b=this.width*(1-g-m),w=this.height*(1-v-y),x=null!==(t=this.config.shapeRotation)&&void 0!==t?t:0,_=new ud;_.drawRect(0,0,b,w),_.pivot.x=b/2,_.pivot.y=w/2,_.rotation=x;var T=_.getBounds(),E=T.width,S=T.height;f.width=E,f.height=S,f.anchor.x=.5,f.anchor.y=.5,f.rotation=-1*x,f.name="math-texture",0===x?(f.position.x=E/2+g*this.width,f.position.y=S/2+v*this.width):(f.position.x=this.width/2,f.position.y=this.height/2)}else f.width=this.width,f.height=this.height,A.rotate&&(f.position.x=this.width/2,f.position.y=this.height/2,f.anchor.x=.5,f.anchor.y=.5,f.rotation=A.rotate/180*Math.PI);return f}}else if("gifFill"===this.fillStyle.fillType){var M=this.fillStyle,C=M.src,I=M.delays,N=this.ctx.spriteTexture.getGifFrames(C).map((function(t,e){return{texture:t,time:I[e]||20}})),B=new df(N,!0);B.name=Rf(),B.width=this.width,B.height=this.height;var k=this.fillStyle.loop,P=1;return B.onLoop=function(){P+=1,k>0&&P>k&&B.gotoAndStop(B.totalFrames)},B}return null}},{key:"isSolidFill",value:function(){var t;return"solidFill"===(null===(t=this.fillStyle)||void 0===t?void 0:t.fillType)}},{key:"getSolidFillColor",value:function(){var t;return"solidFill"===(null===(t=this.fillStyle)||void 0===t?void 0:t.fillType)?this.fillStyle.color:"#000000"}},{key:"getClonedDisplayObject",value:function(){var t=this.createDisplayObject();return this.clonedObjects.push(t),t}},{key:"destroy",value:function(){var t;null===(t=this._displayObject)||void 0===t||t.destroy(),this._displayObject=null,this.clonedObjects.forEach((function(t){null==t||t.destroy()})),this.clonedObjects=[]}},{key:"displayObject",get:function(){return this._displayObject||(this._displayObject=this.createDisplayObject()),this._displayObject},set:function(t){this._displayObject&&this._displayObject.destroy({children:!0,texture:!0}),this._displayObject=t}},{key:"hasFill",get:function(){return!!this.fillStyle&&"noFill"!==this.fillStyle.fillType}}]),t}(),dg=function(t){A(n,t);var e=p(n);function n(t,r,i){var o,a;b(this,n),(o=e.call(this,t,r,i)).textureContainer=new hl.b,o.underline=null,o.cacheSprite=new dd;var s=t.shapeId,u=t.paragraphIndex,l=t.lineIndex,c=t.unitIndex,h=t.lineHeight,d=t.width,A=t.underLine,f=t.fill,p=t.height,g=t.isHorz,v=t.lineWidth,m="solidFill"===(null===(a=null==f?void 0:f.fill)||void 0===a?void 0:a.fillType)?f.fill.color:null;if(A){var y=g?h/16:v/16;o.underline=new Bp(r,A.type,y,d,p,m,g,s,u,l,c)}return o.textGraphics=o.createTextGraphics(),o.textFill=o.createTextFill(),o.strokeGraphics=o.createStrokeGraphics(),o.strokeFill=o.createStrokeFill(),o}return x(n,[{key:"createStrokeFill",value:function(){var t=this.json,e=t.stroke,n=t.lineWidth,r=t.lineHeight;return new hg(this.ctx,null==e?void 0:e.fill,n,r,{useFilter:!1,useSlideBackgroundFill:!1})}},{key:"createStrokeGraphics",value:function(){var t=this.json.stroke,e=null!=t&&t.key?{fillType:"blipFill",src:t.key,filters:[]}:void 0;return new hg(this.ctx,e,(null==t?void 0:t.width)||0,(null==t?void 0:t.height)||0,{useFilter:!1,useSlideBackgroundFill:!1})}},{key:"createTextFill",value:function(){var t=this.json,e=t.isHorz,n=t.fill,r=t.lineWidth,i=t.lineHeight,o=t.fillLineHeight;return e?new hg(this.ctx,null==n?void 0:n.fill,r,Math.max(o,i),{useFilter:!1,useSlideBackgroundFill:!1}):new hg(this.ctx,null==n?void 0:n.fill,o,i,{useFilter:!1,useSlideBackgroundFill:!1})}},{key:"createTextGraphics",value:function(){var t,e=this.json,n=e.fill,r=e.content,i="#000000";"solidFill"===(null===(t=null==n?void 0:n.fill)||void 0===t?void 0:t.fillType)&&(i=n.fill.color);var o=null!=n&&n.key?{fillType:"blipFill",src:n.key,filters:[{type:"changeBulletColor",args:["#000000",i]}]}:void 0;return new hg(this.ctx,o,(null==n?void 0:n.width)||0,(null==n?void 0:n.height)||0,{useFilter:""===r,useSlideBackgroundFill:!1})}},{key:"getIterateEntry",value:function(){return null}},{key:"getBgElement",value:function(){return null}},{key:"updateTransform",value:function(t){var e,r,i,o,a=this.json.isHorz;t.position={x:a&&null!==(r=null===(e=t.position)||void 0===e?void 0:e.x)&&void 0!==r?r:0,y:a?0:null!==(o=null===(i=t.position)||void 0===i?void 0:i.y)&&void 0!==o?o:0},t.width=a?this.json.width:this.json.lineWidth,t.height=a?this.json.lineHeight:this.json.height,d(y(n.prototype),"updateTransform",this).call(this,t)}},{key:"preRender",value:function(){var t;null===(t=this.underline)||void 0===t||t.preRender()}},{key:"render",value:function(t){var e=this;t.addSubMTask((function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(e,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.doRender();case 1:case"end":return t.stop()}}),t,this)})))}),"@TextUnitImpl[doRender]")}},{key:"doRender",value:function(){var t=!1,e=this.json,n=e.lineWidth,r=e.lineHeight,i=e.baseLine,o=e.isHorz,a=e.underline,s=e.height,u=e.width,c=e.highlightColor,h=e.x,d=e.y,A=e.content,f=e.fillLineHeight,p=e.fill,g=!1!==this.json.needFill;if(p&&p.fill&&"solidFill"!==p.fill.fillType&&(g=!0),c){var v=new ud,m=l(bp(c),2),y=m[0],b=m[1];v.beginFill(y,b),v.drawRect(0,0,o?u:n,o?r:s),v.endFill(),this.textureContainer.addChild(v)}if(this.textGraphics.displayObject){var w=this.textGraphics.displayObject;if(o&&(w.position.y=d>0?d:0),g){var x=this.textFill.displayObject;if(x)x.mask=w,x.addChild(w),x.position.x=-h,w.position.x+=h,t=!0,this.textureContainer.addChild(x);else if(this.textFill.isSolidFill()){var _=new Tp;_.color=this.textFill.getSolidFillColor(),w.filters=[_],t=!0,this.textureContainer.addChild(w)}}else this.textureContainer.addChild(w)}if(this.strokeGraphics.displayObject){var T=this.strokeGraphics.displayObject;if(g){var E=this.strokeFill.displayObject;if(E)E.mask=T,E.addChild(T),o?E.position.y=d>0?d:0:E.position.x=h,this.textureContainer.addChild(E);else if(this.strokeFill.isSolidFill()){o?T.position.y=d>0?d:0:T.position.x=h;var S=new Tp;S.color=this.strokeFill.getSolidFillColor(),T.filters=[S],t=!0,this.textureContainer.addChild(T)}}else o?T.position.y=d>0?d:0:T.position.x=h,this.textureContainer.addChild(T)}if(this.underline&&(this.underline.render(),this.underline.sprite)){o?(this.underline.sprite.position.y=a?a-r/16:i,this.underline.sprite.position.x=0):(this.underline.sprite.position.x=0,this.underline.sprite.position.y=0);var M=this.textFill.getClonedDisplayObject();M?(M.mask=this.underline.sprite,M.addChild(this.underline.sprite),this.textureContainer.addChild(M)):this.textureContainer.addChild(this.underline.sprite)}if(t){var C=_l.p.create({width:o?u:n,height:o?Math.max(f,r):s,resolution:this.ctx.renderer.resolution});this.ctx.renderer.render(this.textureContainer,{renderTexture:C}),this.cacheSprite.texture=C,o&&d<0&&(this.cacheSprite.position.y=d),this.container.addChild(this.cacheSprite)}else this.container.addChild(this.textureContainer);this.container.name=A}},{key:"destroy",value:function(){this.textFill.destroy(),this.textGraphics.destroy(),this.strokeFill.destroy(),this.strokeGraphics.destroy(),this.cacheSprite.texture.destroy(!0),this.cacheSprite.destroy(),this.textureContainer.destroy(),this.container.destroy()}}]),n}(Np),Ag=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},fg=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).units=[],t.isHorz=!0,t}return x(n,[{key:"getIterateElements",value:function(){return this.units}},{key:"getIterateEntry",value:function(t,e,n){return this.units[e]?this.units[e]:(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null)}},{key:"preRender",value:function(){}},{key:"createUnits",value:function(t,e,n,r){for(var i=this,o=function(o,a){r.addSubMTask((function(){return Ag(i,void 0,void 0,regeneratorRuntime.mark((function r(){var i,a,s,u,l,c,h,d,A;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=this.json.textUnits[o],a=this.json,s=a.height,u=a.width,l=a.fillHeight,c=a.baseline,h=a.y,d=a.underline,(A=new dg(Object.assign(Object.assign({},i),{lineHeight:s,lineWidth:u,baseLine:c-h,underline:d,fillLineHeight:l||s,isHorz:this.isHorz,shapeId:t,paragraphIndex:e,lineIndex:n,unitIndex:o}),this.ctx,this.global)).preRender(),this.units.push(A);case 2:case"end":return r.stop()}}),r,this)})))}),"@TextLineImpl[createUnits]")},a=0,s=this.json.textUnits.length;a<s;a++)o(a)}},{key:"render",value:function(t){var e,n=this,r=E(this.units.reverse());try{var i=function(){var r=e.value;r.render(t),t.addSubMTask((function(){return Ag(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.container.addChild(r.container);case 1:case"end":return t.stop()}}),t,this)})))}),"@TextLineImpl[container.addChild]")};for(r.s();!(e=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}}},{key:"destroy",value:function(){this.units.forEach((function(t){t.destroy()})),this.container.destroy({children:!1})}}]),n}(Np),pg=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},gg=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).iterateElements=[],t.lines=[],t.isHorz=!0,t}return x(n,[{key:"getIterateElements",value:function(){if(this.iterateElements.length>0)return this.iterateElements;var t=this.lines.reduce((function(t,e){return t.concat(e.getIterateElements())}),[]);return this.iterateElements=t,t}},{key:"getIterateEntry",value:function(t,e,n){var r=this.getIterateElements();return r[e]?r[e]:(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null)}},{key:"preRender",value:function(){}},{key:"createLines",value:function(t,e,n){for(var r=this,i=function(i,o){n.addSubMTask((function(){return pg(r,void 0,void 0,regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=this.json.lines[i],(a=new fg(o,this.ctx,this.global)).isHorz=this.isHorz,a.container.name="line-"+i,a.createUnits(t,e,i,n),this.lines.push(a);case 2:case"end":return r.stop()}}),r,this)})))}),"@TextParagraphImpl[createLines]")},o=0,a=this.json.lines.length;o<a;o++)i(o)}},{key:"render",value:function(t){var e,n=this,r=E(this.lines);try{var i=function(){var r=e.value;r.render(t),t.addSubMTask((function(){return pg(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.container.addChild(r.container);case 1:case"end":return t.stop()}}),t,this)})))}),"@TextParagraphImpl[container.addChild]")};for(r.s();!(e=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}}},{key:"destroy",value:function(){this.lines.forEach((function(t){t.destroy()})),this.container.destroy({children:!1})}}]),n}(Np),vg=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},mg=function(){function t(e,n,r,i){b(this,t),this.iterateElements=[],this.paragraphs=[],this.container=new hl.b,this.json=e,this.ctx=n,this.parentGlobalPos=i,this.iterateType=r,this.container.name="textBody",this.global={x:this.parentGlobalPos.x+e.position.x,y:this.parentGlobalPos.y+e.position.y},this.container.position.x=e.position.x,this.container.position.y=e.position.y,this.container.scale.x=e.scale.x,this.container.scale.y=e.scale.y;var o=new ud;o.drawRect(0,0,e.width,e.height),this.container.addChild(o)}return x(t,[{key:"getTextElement",value:function(t,e){return"paragraph"===t?this.paragraphs[e[0]]:null}},{key:"getIterateEntry",value:function(t,e){return this.iterateElements[t]?this.iterateElements[t]:(this.ctx.eventHub.emit("IterateTimeNodeEnd",e),null)}},{key:"destroy",value:function(){this.paragraphs.forEach((function(t){t.destroy()}))}},{key:"createParagraphs",value:function(t,e){for(var n=this,r=function(r,i){e.addSubMTask((function(){return vg(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,a,s=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=this.json.paragraphs[r],(a=new gg(o,this.ctx,this.global)).isHorz=null===(i=this.json.isHorz)||void 0===i||i,a.createLines(t,r,e),e.addSubMTask((function(){return vg(s,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.iterateElements=this.iterateElements.concat(a.getIterateElements()),a.container.name="-"+r,this.paragraphs.push(a);case 1:case"end":return t.stop()}}),t,this)})))}),"@TextBodyImpl[paragraphs.push]");case 2:case"end":return n.stop()}}),n,this)})))}),"@TextBodyImpl[createParagraphs]")},i=0,o=this.json.paragraphs.length;i<o;i++)r(i)}},{key:"render",value:function(t){var e,n=this,r=E(this.paragraphs);try{var i=function(){var r=e.value;r.render(t),t.addSubMTask((function(){return vg(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.container.addChild(r.container);case 1:case"end":return t.stop()}}),t,this)})))}),"@TextBodyImpl[container.addChild]")};for(r.s();!(e=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}t.addSubMTask((function(){return vg(n,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.container.width,this.container.scale.x<0&&(this.container.x+=-1*e);case 2:case"end":return t.stop()}}),t,this)})))}),"@TextBodyImpl[reset width]")}},{key:"width",get:function(){return this.json.width}},{key:"height",get:function(){return this.json.height}},{key:"x",get:function(){return this.json.position.x}},{key:"y",get:function(){return this.json.position.y}}]),t}(),yg=function(){function t(e){b(this,t),this.scaleX=1,this.scaleY=1,this.pivot={x:0,y:0},this.paths=[],this.hash="",this.width=0,this.height=0,this.graphicsId="",this.textureId="",this.id=e.id,this.type=e.type,this.heightSize=e.heightSize,this.widthSize=e.widthSize,this.fillStyle=e.fillStyle||{fillType:"solidFill",color:"#ffffffff"},this.lineWidth=e.lineWidth||1,this.position=e.position||{x:0,y:0},this.rotate=e.rotation||1,this.path=this.getUnitPath(),this.setScaleFromLineWidth(),this.setScaleFromSize(),this.generatePaths(),this.setPivot()}return x(t,[{key:"setPivot",value:function(){switch(this.type){case"oval":case"diamond":this.pivot={x:this.width/2,y:this.height/2};break;case"triangle":this.pivot={x:.7*this.width,y:this.height/2};break;default:this.pivot={x:this.width,y:this.height/2}}}},{key:"generatePaths",value:function(){this.hash="arrow-"+qf()(this.path+this.scaleX+this.scaleY),this.paths=[{id:this.id,path:this.path,fill:"norm",hasStroke:!1,hash:this.hash,scale:{x:this.scaleX,y:this.scaleY}}]}},{key:"getUnitPath",value:function(){switch(this.type){case"stealth":return"M 0,0 L 95250,47625 L 0,95250 L 28575,47625 C C";case"oval":return"M 0,47625 A 47625,47625,-3.14159265,6.2831853 C C";case"diamond":return"M 47625,0 L 95250,47625 L 47625,95250 L 0,47625 C C";case"arrow":return"M 9525,0 L 95250,47625 L 9525,95250 L 0,85725 L 68389.5,47625 L 0,9525 C C";case"triangle":return"M 0,0 L 95250,47625 L 0,95250 C C";default:return""}}},{key:"setScaleFromLineWidth",value:function(){switch(this.type){case"stealth":case"oval":case"diamond":case"arrow":case"triangle":this.scaleX*=.29*this.lineWidth+.7,this.scaleY*=.29*this.lineWidth+.7;break;default:throw new Error("can't match any arrow type!")}}},{key:"setScaleFromSize",value:function(){switch(this.type){case"stealth":case"oval":case"diamond":case"arrow":case"triangle":this.scaleX*=1,this.scaleY*=1;break;default:throw new Error("can't match any arrow type!")}switch(this.widthSize){case"sm":this.scaleX*=3/4;break;case"lg":this.scaleX*=1.25;break;case"med":this.scaleX*=1}switch(this.heightSize){case"sm":this.scaleY*=3/4;break;case"lg":this.scaleY*=1.25;break;case"med":this.scaleY*=1}this.width=10*this.scaleX,this.height=10*this.scaleY}}]),t}(),bg=function(){function t(e,n,r,i,o,a,s,u,l,c,h){b(this,t),this.id=e,this.ctx=n,this.paths=r,this.hash=i,this.nept=o,this.width=a,this.height=s,this.lineStyle=u,this.shouldFill=l,this.bgColor=c,this.lnColor=h,this.clonedObjects=[],this._displayObject=null,this.isRectangle=!1,this.isPureRect=!1,this.isColoredPureRect=!1,this.isRectangle=this.rectangleDetect(r),this.isRectangle&&l?this.bgColor?this.isColoredPureRect=!0:this.isPureRect=!0:this.ctx.graphicsTexture.addGraphics(this.id,this.paths,this.hash,this.nept,this.width,this.height,this.lineStyle,this.ctx.objectPoolGroup,this.shouldFill,this.bgColor,this.lnColor)}return x(t,[{key:"pointDis",value:function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)}},{key:"rectangleDetect",value:function(t){if(1!==t.length)return!1;var e=t[0].path.trim().split(" ");if(10!==e.length)return!1;for(var n=[],r=[],i=0;i<e.length;i+=2){var o=e[i],a=l(e[i+1].split(",").map((function(t){return Number(t)/100})),2),s=a[0],u=a[1];n.push(o),r.push({x:s,y:u})}if("MLLLC"!==n.join(""))return!1;for(var c=0;c<3;c++){var h=r[c],d=r[c+1];if(h.x!==d.x&&h.y!==d.y)return!1}var A=r.slice(0,4).reduce((function(t,e){return t+e.x}),0)/4,f=r.slice(0,4).reduce((function(t,e){return t+e.y}),0)/4;if(Number.isNaN(A)||Number.isNaN(f))return!1;var p={x:A,y:f};return dp(this.pointDis(p,r[0]),this.pointDis(p,r[1]))&&dp(this.pointDis(p,r[0]),this.pointDis(p,r[2]))&&dp(this.pointDis(p,r[0]),this.pointDis(p,r[3]))&&this.pointDis(p,r[0])===this.pointDis(p,r[1])}},{key:"createDisplayObject",value:function(){if(this.isPureRect){var t=new ud;return t.beginFill(0,1),t.drawRect(0,0,this.width,this.height),t}if(this.isColoredPureRect&&this.bgColor){var e=new ud,n=l(bp(this.bgColor),2),r=n[0],i=n[1];return e.beginFill(r,i),e.drawRect(0,0,this.width,this.height),e}var o=new dd,a=this.ctx.graphicsTexture.getGraphicsData(this.id);return a?(o.texture=a.texture,o.pivot.x=a.pivot.x,o.pivot.y=a.pivot.y,o):null}},{key:"getClonedDisplayObject",value:function(){var t=this.createDisplayObject();return this.clonedObjects.push(t),t}},{key:"render",value:function(){this._displayObject=this.createDisplayObject()}},{key:"isNeedMask",value:function(t,e){var n=!1;return this._displayObject&&(n=!(this.isRectangle&&Math.abs(t-this._displayObject.width)<2&&Math.abs(e-this._displayObject.height)<2&&this.shouldFill)),n}},{key:"addArrows",value:function(t){var e;null===(e=this._displayObject)||void 0===e||e.addChild(t)}},{key:"destroy",value:function(){var t;null===(t=this._displayObject)||void 0===t||t.destroy(),this._displayObject=null,this.clonedObjects.forEach((function(t){null==t||t.destroy()})),this.clonedObjects=[]}},{key:"displayObject",get:function(){return this._displayObject}}]),t}(),wg=function(t){A(n,t);var e=p(n);function n(){return b(this,n),e.apply(this,arguments)}return n}(_l.k),xg=n(109),_g=n.n(xg),Tg=n(110),Eg=n.n(Tg),Sg=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,_g.a,Eg.a,{uShapeFilterArea:new Float32Array([0,0,0,0]),uGlowColor:wp(t.color),uSdfSampler:_l.t.WHITE,uSdfReady:0,uSdfMaxDis:0,uRad:t.rad/2,uSdfPosition:new Float32Array([0,0])})).priority=3,r.json=t,r}return x(n,[{key:"filterAreaJustify",value:function(t){var e=Math.ceil(this.json.rad),n=Math.ceil(t.width+2*e),r=Math.ceil(t.height+2*e);return new Al.j(t.x-e,t.y-e,n,r)}},{key:"sdfBox",value:function(t,e){var n=Math.ceil(this.json.rad),r=Math.ceil(t+2*n),i=Math.ceil(e+2*n);return new Al.j(n,n,r,i)}}]),n}(wg),Mg=n(19),Cg=n.n(Mg),Ig=n(111),Ng=n.n(Ig),Bg=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cg.a,Ng.a,{uShapeFilterArea:new Float32Array([0,0,0,0]),uRad:t.rad,uSdfSampler:_l.t.WHITE,uSdfReady:0,uSdfMaxDis:1})).priority=2,r.json=t,r}return x(n,[{key:"filterAreaJustify",value:function(t){return t}},{key:"sdfBox",value:function(t,e){return new Al.j(0,0,t,e)}}]),n}(wg),kg=function t(){b(this,t)},Pg=n(112),Dg=n.n(Pg),Lg=function(t){A(n,t);var e=p(n);function n(t){return b(this,n),e.call(this,Cg.a,Dg.a,{uColor:wp(t)})}return n}(_l.k),Og=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this)).order=1,o.outputTexture=_l.t.WHITE,o.frameTextures=[],o.json=t,o.effectContainer=r,o.outputSprite=new dd,o.targetScale=i,o.outputSprite.scale.x=o.json.sx,o.outputSprite.scale.y=o.json.sy,o.outputSprite.skew.x=(o.targetScale.x>0?1:-1)*o.json.kx,o.outputSprite.skew.y=(o.targetScale.y>0?1:-1)*o.json.ky,o.outputSprite.filters=[new ff.BlurFilter(o.json.blurRad/2,4),new Lg(o.json.color)],o}return x(n,[{key:"updateFrame",value:function(t){var e=this.frameTextures[t];if(e){var n=this.effectContainer.getBounds(),r=(this.effectContainer.width-e.width)/2,i=(this.effectContainer.height-e.height)/2,o=new Al.g(n.x,n.y),a=new Al.g(n.x,n.y);switch(this.json.align){case"tl":a.x=n.x,a.y=n.y;break;case"t":a.x=n.x+n.width/2,a.y=n.y,o.x+=n.width/2;break;case"tr":a.x=n.x+n.width,a.y=n.y,o.x+=n.width;break;case"l":a.x=n.x,a.y=n.y+n.height/2,o.y+=n.height/2;break;case"ctr":a.x=n.x+n.width/2,a.y=n.y+n.height/2,o.x+=n.width/2,o.y+=n.height/2;break;case"r":a.x=n.x+n.width,a.y=n.y+n.height/2,o.x+=n.width,o.y+=n.height/2;break;case"bl":a.x=n.x,a.y=n.y+n.height,o.y+=n.height;break;case"b":a.x=n.x+n.width/2,a.y=n.y+n.height,o.x+=n.width/2,o.y+=n.height;break;case"br":a.x=n.x+n.width,a.y=n.y+n.height,o.x+=n.width,o.y+=n.height}var s=this.effectContainer.toLocal(a);this.outputSprite.pivot.x=s.x,this.outputSprite.pivot.y=s.y;var u=new Al.g(this.json.dist,0),l=new Al.d;l.rotate(this.json.dir),l.translate(o.x+r,o.y+i),l.apply({x:u.x,y:u.y},u);var c=this.effectContainer.toLocal(u);this.outputSprite.position.x=c.x,this.outputSprite.position.y=c.y,this.outputSprite.texture=e}}},{key:"createOutput",value:function(t,e){this.frameTextures[e]=t}},{key:"setFrameOffset",value:function(t,e){console.log(t,e)}}]),n}(kg),Rg=n(113),Fg=n.n(Rg),Ug=function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),i=e.call(this,Cg.a,Fg.a,{uStartAlpha:t.startAlpha,uEndAlpha:t.endAlpha,uStartPos:t.startPos,uEndPos:t.endPos,uHeight:r}),console.log(v(i)),i}return n}(_l.k),jg=function(t){A(n,t);var e=p(n);function n(t,r,i,o,a){var s;b(this,n),(s=e.call(this)).order=2,s.outputSprite=new dd,s.outputTexture=_l.t.WHITE,s.frameTextures=[],s.json=t,s.shapeScaleX=o,s.effectContainer=r,s.rotation=i,s.ctx=a,s.outputSprite.anchor.x=.5,s.outputSprite.anchor.y=.5;var u=s.effectContainer.getBounds();return s.outputSprite.filters=[new ff.BlurFilter(s.json.blurRad/2,4),new Ug(s.json,u.height)],s.outputSprite.alpha=.5,s.outputSprite.rotation=-1===s.shapeScaleX?Math.PI+2*s.rotation:Math.PI-2*s.rotation,s.outputSprite.scale.x=-1,s}return x(n,[{key:"updateFrame",value:function(t){var e=this.frameTextures[t];e&&(this.outputSprite.texture=e)}},{key:"createOutput",value:function(t,e){this.frameTextures[e]=t}},{key:"setFrameOffset",value:function(t,e){var n=this.effectContainer.getBounds(),r=new Al.g(n.x+n.width/2,n.y+n.height/2),i=new Al.g(r.x,r.y+n.height+this.json.dist),o=this.effectContainer.toLocal(i);this.outputSprite.position.x=o.x+t,this.outputSprite.position.y=o.y+e}}]),n}(kg),zg=n(114),Hg=n.n(zg),Qg=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cg.a,Hg.a,{})).priority=1,r.json=t,r}return x(n,[{key:"filterAreaJustify",value:function(t){return t}},{key:"sdfBox",value:function(){return null}}]),n}(wg),Gg=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Vg=function(t){A(n,t);var e=p(n);function n(t,r,i,a,s,u){var l;b(this,n),(l=e.call(this)).effects=[],l.attachs=[],l.frames=new Map,l._targetContainer=new hl.b,l.frameCount=1,l.ctx=a,l.originWidth=t.width,l.originHeight=t.height,l.cacheKey=i,l.sourceSprite=new dd;var c,h=E(r);try{for(h.s();!(c=h.n()).done;){var d=c.value;switch(d.type){case"innerShadow":l.effects.push(new Qg(d));break;case"softEdge":l.effects.push(new Bg(d));break;case"glow":l.effects.push(new Sg(d));break;case"reflection":l.attachs.push(new jg(d,t,s,u.x,l.ctx));break;case"outerShadow":l.attachs.push(new Og(d,t,u))}}}catch(t){h.e(t)}finally{h.f()}l.effects=l.effects.sort((function(t,e){return t.priority-e.priority})),l.attachs=l.attachs.sort((function(t,e){return t.order-e.order}));var A,f=E(l.attachs);try{for(f.s();!(A=f.n()).done;){var p=A.value;l._targetContainer.addChild(p.outputSprite)}}catch(t){f.e(t)}finally{f.f()}l.sourceSprite.name="effect-sprite";var g=new Al.j(0,0,l.originWidth,l.originHeight),v=l.effects.map((function(t){return t.filterAreaJustify(g)})),m=v.map((function(t){return t.x})),y=v.map((function(t){return t.y})),w=v.map((function(t){return t.width})),x=v.map((function(t){return t.height}));return l.filterArea=new Al.j(Math.min.apply(Math,o(m).concat([0])),Math.min.apply(Math,o(y).concat([0])),Math.max.apply(Math,o(w).concat([l.originWidth])),Math.max.apply(Math,o(x).concat([l.originHeight]))),l.sourceSprite.filters=l.effects,l.sourceSprite.filterArea=new Al.j(0,0,l.filterArea.width,l.filterArea.height),l._targetSprite=new dd,l._targetSprite.name="effect-sprite",l._targetContainer.sortableChildren=!0,l._targetSprite.zIndex=999,l._targetContainer.addChild(l._targetSprite),l}return x(n,[{key:"getSdfTexture",value:function(t,e){return Gg(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="".concat(this.cacheKey,"_").concat(t),i=this.effects.map((function(t){return{sdfRect:t.sdfBox(e.width,e.height)}})).reduce((function(t,e){return e.sdfRect&&(t.width<e.sdfRect.width&&(t.width=e.sdfRect.width),t.height<e.sdfRect.height&&(t.height=e.sdfRect.height)),t}),new Al.j(0,0)),n.abrupt("return",0===i.width||0===i.height?null:this.ctx.sdfManager.getSdf(e,i,r));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"setFrameCount",value:function(t){this.frameCount=t}},{key:"updateFrame",value:function(t){var e=this.frames.get(t);if(e){this._targetSprite.texture=e.texture,this._targetSprite.pivot.x=e.pivotX,this._targetSprite.pivot.y=e.pivotY;var n,r=E(this.attachs);try{for(r.s();!(n=r.n()).done;){n.value.updateFrame(t)}}catch(t){r.e(t)}finally{r.f()}}}},{key:"hasFrame",value:function(t){return this.frames.has(t)}},{key:"setFrameOffset",value:function(t,e){this._targetContainer.position.x=-1*t,this._targetContainer.position.y=-1*e,this.attachs.forEach((function(n){return n.setFrameOffset(t,e)}))}},{key:"createFrame",value:function(t,e){var n,r;return Gg(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o,a,s,u,l,c,h,d,A,f,p,g,v,m,y,b;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=e.width,a=e.height,!this.frames.has(t)){i.next=3;break}return i.abrupt("return");case 3:return i.next=5,this.getSdfTexture(t,e);case 5:s=i.sent,u=null!==(n=null==s?void 0:s.texture.width)&&void 0!==n?n:0,l=null!==(r=null==s?void 0:s.texture.height)&&void 0!==r?r:0,c=E(this.effects);try{for(c.s();!(h=c.n()).done;)d=h.value,(A=d.sdfBox(e.width,e.height))&&s&&(d.uniforms.uSdfSampler=s.texture,d.uniforms.uSdfIsReady=1,d.uniforms.uSdfMaxDis=s.maxDis,d.uniforms.uSdfPosition=new Float32Array([(s.texture.width-A.width)/2/s.texture.width,(s.texture.height-A.height)/2/s.texture.height])),d.uniforms.uShapeFilterArea=new Float32Array([0,0,this.filterArea.width,this.filterArea.height])}catch(t){c.e(t)}finally{c.f()}this.sourceSprite.texture=e,f=(this.filterArea.width-this.sourceSprite.width)/2,p=(this.filterArea.height-this.sourceSprite.height)/2,this.sourceSprite.x=f,this.sourceSprite.y=p,g=Math.max(o,u,this.filterArea.width),v=Math.max(a,l,this.filterArea.height),m=_l.p.create({width:g,height:v,resolution:this.ctx.renderer.resolution}),this.ctx.renderer.render(this.sourceSprite,{renderTexture:m}),this.frames.set(t,{texture:m,pivotX:-1*(this.originWidth-g)/2,pivotY:-1*(this.originWidth-g)/2}),y=E(this.attachs);try{for(y.s();!(b=y.n()).done;)b.value.createOutput(m,t)}catch(t){y.e(t)}finally{y.f()}Array.from(this.frames.keys()).length===this.frameCount&&this.emit("ready");case 18:case"end":return i.stop()}}),i,this)})))}},{key:"container",get:function(){return this._targetContainer}}]),n}(Os.a),Wg=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Yg={pivot:{x:0,y:0},width:0,height:0},Xg=function(t){A(n,t);var e=p(n);function n(t,r,i,o){var a,s;b(this,n),(a=e.call(this,t,r,i)).renderContainer=new hl.b,a.needCacheAsBitMap=!1,a.backgroundGraphics=null,a.effectList=[],a.strokeGraphics=null,a.arrowList=[],a.fillColorFilter=new Tp,a.strokeColorFilter=new Tp,a.pptColorFilter=new Tp,a.id="",a.ppt_c=new up(v(a)),a.fill=new lp(v(a)),a.stroke=new ap(v(a)),a.effectObject=null,a.effectContainer=new hl.b,a.effectDisposer=function(){},a.json=t,a.json.fillStyle&&"groupFill"===a.json.fillStyle.fillType&&o&&(a.json.fillStyle=o),a.id=t.id;var u=a.json,l=u.fillStyle,c=u.lineStyle;return a.container.sortableChildren=!0,a.container.name=t.id+"_container_[Shape]",a.effectContainer.name="effect-container",a.effectContainer.zIndex=1,a.container.addChild(a.effectContainer),a.renderContainer.name=t.id+"_render_container_[Shape]",a.generateArrowList(),a.backgroundFill=a.createBackgroundFill(),a.backgroundGraphics=a.createBackgroundGraphics(),a.strokeFill=a.createStrokeFill(),a.strokeGraphics=a.createStrokeGraphics(),a.ctx.timingTargets.addTarget(a.id,v(a)),"solidFill"===(null==l?void 0:l.fillType)&&(a.fillColorFilter.currentColor=l.color,a.fillColorFilter.designColor=l.color),"solidFill"===(null===(s=null==c?void 0:c.fill)||void 0===s?void 0:s.fillType)&&(a.strokeColorFilter.currentColor=c.fill.color,a.strokeColorFilter.designColor=c.fill.color),a.updateTransform(a.json),t.textBody&&(a.text=new mg(t.textBody,a.ctx,t.textBody.iterateType,{x:a.designGlobalPosition.x,y:a.designGlobalPosition.y})),a.container.hitArea=new Al.k(1,1,a.json.width,a.json.height),a.ctx.slideScopeEventHub.once("slide-render",(function(t){if(a.ctx.slideIndex===t&&a.effectObject){var e=a.getEffectTexture();if(e){var n=e.texture,r=e.offsetX,i=e.offsetY;a.effectObject.setFrameOffset(r,i),a.effectObject.createFrame(1,n)}}})),a}return x(n,[{key:"getTextElement",value:function(t,e){var n,r;return null!==(r=null===(n=this.text)||void 0===n?void 0:n.getTextElement(t,e))&&void 0!==r?r:null}},{key:"getBgElement",value:function(){return this}},{key:"getIterateEntry",value:function(t,e,n){return 0===e?this:"el"===t?(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null):this.text?this.text.getIterateEntry(e-1,n)||null:(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null)}},{key:"getEffectTexture",value:function(){var t,e=this.effectContainer.getLocalBounds(),n=0,r=0,i=E(this.effectContainer.children);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.pivot.x>n&&(n=o.pivot.x),o.pivot.y>r&&(r=o.pivot.y)}}catch(t){i.e(t)}finally{i.f()}var a=new Al.d;if(a.translate(n,r),0===this.effectContainer.children.length)return null;var s=_l.p.create({width:e.width,height:e.height,resolution:this.ctx.renderer.resolution});return this.ctx.renderer.render(this.effectContainer,{renderTexture:s,transform:a}),{texture:s,offsetX:n,offsetY:r}}},{key:"createStrokeGraphics",value:function(){var t,e,n,r,i=this.json,o=i.id,a=i.geometry,s=i.lineStyle,u=(null==a?void 0:a.lineTransform)||Yg,l=u.width,c=u.height,h=u.pivot,d=l||this.json.width,A=c||this.json.height,f="solidFill"===(null===(t=null==s?void 0:s.fill)||void 0===t?void 0:t.fillType)?s.fill.color:null;return s&&"noFill"!==(null===(e=s.fill)||void 0===e?void 0:e.fillType)?new bg(o+"-path-graphics",this.ctx,null!==(n=null==a?void 0:a.paths)&&void 0!==n?n:[],null!==(r=null==a?void 0:a.hash)&&void 0!==r?r:"",h||{x:0,y:0},d,A,s,!1,null,f):null}},{key:"createStrokeFill",value:function(){var t=l(this.calculateFillObjectOffset(),2),e=t[0],n=t[1],r=this.json,i=r.geometry,o=r.lineStyle,a=r.width,s=r.height,u=(null==i?void 0:i.lineTransform)||Yg,c=Zf()(null==o?void 0:o.width)?o.width:1;return new hg(this.ctx,null==o?void 0:o.fill,(u.width||a)+c+e,Math.max((u.height||s)+c,n),{useFilter:!0,useSlideBackgroundFill:!1})}},{key:"createBackgroundGraphics",value:function(){var t,e=this.json,n=e.geometry,r=e.lineStyle,i=e.fillStyle,o=e.id,a=(null==n?void 0:n.lineTransform)||Yg,s=a.width,u=a.height,l=a.pivot,c=s||this.json.width,h=u||this.json.height,d="solidFill"===(null==i?void 0:i.fillType)?i.color:null;return i&&"noFill"!==i.fillType||this.json.isPicture?new bg(o+"-bg-graphics",this.ctx,null!==(t=null==n?void 0:n.paths)&&void 0!==t?t:[],(null==n?void 0:n.hash)||"",l||{x:0,y:0},c,h,r,!0,d,null):null}},{key:"createBackgroundFill",value:function(){var t,e,n=this.json,r=n.fillStyle,i=n.width,o=n.height,a=n.lineStyle,s=n.geometry,u=(null==s?void 0:s.fillTransform)||Yg;return new hg(this.ctx,r,(u.width||i)+(null!==(t=null==a?void 0:a.width)&&void 0!==t?t:0),(u.height||o)+(null!==(e=null==a?void 0:a.width)&&void 0!==e?e:0),{useFilter:!0,useSlideBackgroundFill:this.json.useBgFill,fillFloat:this.json.fillFloat,shapeRotation:this.json.rotation})}},{key:"createBackground",value:function(){var t,e,n,r,i,o,a,s,u=(null===(t=this.json.geometry)||void 0===t?void 0:t.fillTransform)||Yg,l=u.pivot,c=u.width,h=u.height,d=this.backgroundFill.displayObject;d?(this.json.useBgFill&&(null===(n=this.backgroundGraphics)||void 0===n?void 0:n.displayObject)?(this.needCacheAsBitMap=!0,d.mask=this.backgroundGraphics.displayObject,d.pivot.x=(null===(r=this.json.position)||void 0===r?void 0:r.x)||0,d.pivot.y=(null===(i=this.json.position)||void 0===i?void 0:i.y)||0,this.effectContainer.addChild(this.backgroundGraphics.displayObject)):"gifFill"===(null===(o=this.json.fillStyle)||void 0===o?void 0:o.fillType)?(d.height=h||this.designHeight,d.width=c||this.designWidth,d instanceof df&&d.play(),!(null===(a=this.backgroundGraphics)||void 0===a)&&a.isNeedMask(d.width,d.height)&&(d.mask=this.backgroundGraphics.displayObject,this.backgroundGraphics.displayObject&&this.effectContainer.addChild(this.backgroundGraphics.displayObject))):!(null===(s=this.backgroundGraphics)||void 0===s)&&s.isNeedMask(d.width,d.height)&&(this.json.fillFloat||(this.needCacheAsBitMap=!0,d.mask=this.backgroundGraphics.displayObject,this.backgroundGraphics.displayObject&&this.effectContainer.addChild(this.backgroundGraphics.displayObject))),this.json.fillFloat||(d.x=l.x,d.y=l.y),this.effectContainer.addChild(d)):this.backgroundFill.hasFill&&(null===(e=this.backgroundGraphics)||void 0===e?void 0:e.displayObject)&&this.effectContainer.addChild(this.backgroundGraphics.displayObject)}},{key:"createPathFill",value:function(){var t,e,n,r=this.strokeFill.displayObject,i=null===(t=this.strokeGraphics)||void 0===t?void 0:t.displayObject,o=l(this.calculateFillObjectOffset(),2),a=o[0],s=o[1];r?((null===(e=this.strokeGraphics)||void 0===e?void 0:e.isNeedMask(r.width,r.height))&&i&&(this.needCacheAsBitMap=!0,r.pivot.x=i.pivot.x,r.pivot.y=i.pivot.y,i.pivot.x=0,i.pivot.y=0,r.mask=i,r.addChild(i),r.position.x=-a/2,r.position.y=-s/2,i.position.x=a/2,i.position.y=s/2),this.effectContainer.addChild(r)):this.strokeFill.hasFill&&(null===(n=this.strokeGraphics)||void 0===n?void 0:n.displayObject)&&this.effectContainer.addChild(this.strokeGraphics.displayObject)}},{key:"createFilledPathMask",value:function(){var t,e,n,r,i=E((null===(e=null===(t=this.json.geometry)||void 0===t?void 0:t.paths)||void 0===e?void 0:e.filter((function(t){return"none"!==t.fill&&"norm"!==t.fill})))||[]);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=this.ctx.graphicsTexture.getGraphicsData(o.id);if(a){var s=new dd(a.texture);s.pivot.x=a.pivot.x,s.pivot.y=a.pivot.y;var u=this.backgroundFill.getClonedDisplayObject(),l=null===(n=this.backgroundGraphics)||void 0===n?void 0:n.getClonedDisplayObject(),c=u||l;c&&(this.backgroundFill.displayObject&&(c.pivot.x=this.backgroundFill.displayObject.pivot.x,c.pivot.y=this.backgroundFill.displayObject.pivot.y),c.mask=s,c.filters=[Ip[o.fill]],this.needCacheAsBitMap=!0,this.effectContainer.addChild(c),this.effectContainer.addChild(s))}}}catch(t){i.e(t)}finally{i.f()}}},{key:"createArrow",value:function(){var t=this;this.arrowList.length&&this.arrowList.forEach((function(e){var n,r=t.ctx.graphicsTexture.getGraphicsData(e.graphicsId);if(r){var i=r.texture,o=new dd(i);o.pivot.x=e.pivot.x,o.pivot.y=e.pivot.y,o.position.x=e.position.x,o.position.y=e.position.y,o.rotation=e.rotate/180*Math.PI,null===(n=t.backgroundGraphics)||void 0===n||n.addArrows(o)}}))}},{key:"generateArrowList",value:function(){var t,e,n=this,r=this.json,i=r.lineArrowList,o=r.lineStyle,a=r.id,s="solidFill"===(null===(t=null==o?void 0:o.fill)||void 0===t?void 0:t.fillType)?o.fill.color:null;null===(e=i||[])||void 0===e||e.forEach((function(t,e){var r,i,u=new yg(Object.assign(Object.assign({},t),{fillStyle:null==o?void 0:o.fill,lineWidth:null!==(r=null==o?void 0:o.width)&&void 0!==r?r:0}));u.graphicsId="".concat(a,"-arrow-").concat(e,"-graphics"),u.textureId="".concat(a,"-arrow-").concat(e,"-fill"),n.ctx.graphicsTexture.addGraphics(u.graphicsId,null!==(i=u.paths)&&void 0!==i?i:[],u.hash,{x:0,y:0},u.width,u.height,void 0,n.ctx.objectPoolGroup,!0,s,null),n.arrowList.push(u)}))}},{key:"calculateFillObjectOffset",value:function(){var t=0,e=0;return this.arrowList.length&&(t=this.arrowList.reduce((function(t,e){return Math.max(t,e.width)}),0),e=this.arrowList.reduce((function(t,e){return Math.max(t,e.height)}),0)),[t,e]}},{key:"preRender",value:function(t){var e,n,r,i=this,o=this.json,a=o.lineStyle,s=o.geometry,u=(null==s?void 0:s.lineTransform)||Yg,l=u.width,c=u.height,h=l||this.json.width,d=c||this.json.height,A=(null===(e=null==s?void 0:s.paths)||void 0===e?void 0:e.filter((function(t){return"none"!==t.fill&&"norm"!==t.fill})))||[],f="solidFill"===(null===(n=null==a?void 0:a.fill)||void 0===n?void 0:n.fillType)?a.fill.color:null;t.addSubMTask((function(){return Wg(i,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=E(A);try{for(e.s();!(n=e.n()).done;)r=n.value,this.ctx.graphicsTexture.addGraphics(r.id,[r],r.hash,((null==s?void 0:s.lineTransform)||Yg).pivot,h,d,a,this.ctx.objectPoolGroup,!0,null,f)}catch(t){e.e(t)}finally{e.f()}case 2:case"end":return t.stop()}}),t,this)})))}),"@ShapeImpl[addGraphics]"),null===(r=this.text)||void 0===r||r.createParagraphs(this.json.id,t)}},{key:"subClassRender",value:function(){}},{key:"render",value:function(t){var e=this;t.addSubMTask((function(){return Wg(e,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null===(e=this.strokeGraphics)||void 0===e||e.render(),null===(n=this.backgroundGraphics)||void 0===n||n.render(),this.createBackground(),this.subClassRender(),this.createFilledPathMask(),this.createPathFill(),this.createArrow();case 1:case"end":return t.stop()}}),t,this)})))}),"@ShapeImpl[render]"),this.text&&this.text.render(t),t.addSubMTask((function(){return Wg(e,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"wd"===(null===(e=this.json.textBody)||void 0===e?void 0:e.iterateType)||"lt"===(null===(n=this.json.textBody)||void 0===n?void 0:n.iterateType)?(this.renderContainer.addChild(this.container),this.text&&(d=null!==(r=this.json.scale)&&void 0!==r?r:{x:1,y:1},A=d.x,f=d.y,this.text.container.scale.x=f<0?-Math.abs(A):Math.abs(A),this.text.container.scale.y=f,this.text.container.position.x=(null!==(o=null===(i=this.json.position)||void 0===i?void 0:i.x)&&void 0!==o?o:0)+this.text.x,this.text.container.position.y=(null!==(s=null===(a=this.json.position)||void 0===a?void 0:a.y)&&void 0!==s?s:0)+this.text.y,this.text.container.scale.y<0&&(this.text.container.position.y+=this.text.height),this.text.container.scale.x<0&&(this.text.container.position.x+=this.json.width),this.renderContainer.addChild(this.text.container))):(this.text&&(vp()(this.json.textRotateWithShape)&&!this.json.textRotateWithShape&&(p=this.json.rotation||0,this.text.container.rotation=-p,g=this.text.width,this.text.container.position.x=g),this.text.container.zIndex=100,(v=null===(u=this.json.effectList)||void 0===u?void 0:u.find((function(t){return"outerShadow"===t.type})))&&1!==v.sx?this.container.addChild(this.text.container):this.effectContainer.addChild(this.text.container)),this.renderContainer.addChild(this.container)),this.needCacheAsBitMap,"background"===this.json.id&&this.ctx.hasBackgroundFillShape&&(m=_l.p.create({width:this.json.width,height:this.json.height,resolution:Math.ceil(this.ctx.renderer.resolution)}),this.ctx.renderer.render(this.renderContainer,{renderTexture:m}),this.ctx.bgTexture=m),this.json.effectList&&this.json.effectList.length>0&&(null===(l=this.ctx.featureList)||void 0===l?void 0:l.effect)&&!this.ctx.forceCanvas&&(this.effectObject=new Vg(this.effectContainer,this.json.effectList,"".concat(this.ctx.taskId,"_").concat(this.ctx.slideIndex,"_").concat(this.json.id),this.ctx,this.json.rotation||0,new Al.g((null===(c=this.json.scale)||void 0===c?void 0:c.x)||1,(null===(h=this.json.scale)||void 0===h?void 0:h.y)||1)),b=this.json,w=void 0,x=void 0,_=void 0,("gifFill"===(null===(w=b.fillStyle)||void 0===w?void 0:w.fillType)||"gifFill"===(null===(_=null===(x=b.lineStyle)||void 0===x?void 0:x.fill)||void 0===_?void 0:_.fillType)||!!b.picFill&&"gifFill"===b.picFill.fillType)&&this.effectObject.setFrameCount(-1),this.effectObject.on("ready",(function(){var t;y.effectContainer.visible=!1,y.effectObject.container.zIndex=10,y.container.addChild(y.effectObject.container),null===(t=y.effectObject)||void 0===t||t.updateFrame(1)})));case 3:case"end":return t.stop()}var b,w,x,_}),t,this)})))}),"@ShapeImpl[post.render]")}},{key:"clearOnSlideChange",value:function(){}},{key:"initOnReuse",value:function(){}},{key:"destroy",value:function(){var t,e,n,r;null===(t=this.text)||void 0===t||t.destroy(),this.fillColorFilter.destroy(),this.strokeColorFilter.destroy(),this.backgroundFill.destroy(),null===(e=this.backgroundGraphics)||void 0===e||e.destroy(),this.strokeFill.destroy(),null===(n=this.strokeGraphics)||void 0===n||n.destroy(),this.renderContainer.destroy(),null===(r=this.arrowRenderTexture)||void 0===r||r.destroy(!0),this.arrowList=[],this.effectDisposer()}},{key:"interactiveContainer",get:function(){return this.renderContainer}},{key:"strokeActive",get:function(){var t,e,n,r,i,o,a;return this.strokeFill.displayObject?(null!==(n=null===(e=null===(t=this.strokeFill.displayObject)||void 0===t?void 0:t.filters)||void 0===e?void 0:e.length)&&void 0!==n?n:-1)>0:(null!==(a=null===(o=null===(i=null===(r=this.strokeGraphics)||void 0===r?void 0:r.displayObject)||void 0===i?void 0:i.filters)||void 0===o?void 0:o.length)&&void 0!==a?a:-1)>0},set:function(t){var e,n,r,i,o,a,s=this.strokeFill.displayObject;t?s&&(null!==(n=null===(e=s.filters)||void 0===e?void 0:e.indexOf(this.strokeColorFilter))&&void 0!==n?n:-1)<0?s.filters=[this.strokeColorFilter]:(null===(r=this.strokeGraphics)||void 0===r?void 0:r.displayObject)&&(null!==(o=null===(i=this.strokeGraphics.displayObject.filters)||void 0===i?void 0:i.indexOf(this.strokeColorFilter))&&void 0!==o?o:-1)<0&&(this.strokeGraphics.displayObject.filters=[this.strokeColorFilter]):s?s.filters=[]:null!==(a=this.strokeGraphics)&&void 0!==a&&a.displayObject&&(this.strokeGraphics.displayObject.filters=[])}},{key:"pptColorActive",get:function(){var t,e;return(null!==(e=null===(t=this.renderContainer.filters)||void 0===t?void 0:t.length)&&void 0!==e?e:-1)>0},set:function(t){this.renderContainer.filters=t?[this.pptColorFilter]:[]}},{key:"fillActive",get:function(){var t,e,n,r,i,o,a;return this.backgroundFill.displayObject?(null!==(n=null===(e=null===(t=this.backgroundFill.displayObject)||void 0===t?void 0:t.filters)||void 0===e?void 0:e.length)&&void 0!==n?n:-1)>0:(null!==(a=null===(o=null===(i=null===(r=this.backgroundGraphics)||void 0===r?void 0:r.displayObject)||void 0===i?void 0:i.filters)||void 0===o?void 0:o.length)&&void 0!==a?a:-1)>0},set:function(t){var e,n,r,i,o,a;t?this.backgroundFill.displayObject&&(null!==(n=null===(e=this.backgroundFill.displayObject.filters)||void 0===e?void 0:e.indexOf(this.fillColorFilter))&&void 0!==n?n:-1)<0?this.backgroundFill.displayObject.filters=[this.fillColorFilter]:(null===(r=this.backgroundGraphics)||void 0===r?void 0:r.displayObject)&&(null!==(o=null===(i=this.backgroundGraphics.displayObject.filters)||void 0===i?void 0:i.indexOf(this.fillColorFilter))&&void 0!==o?o:-1)<0&&(this.backgroundGraphics.displayObject.filters=[this.fillColorFilter]):this.backgroundFill.displayObject?this.backgroundFill.displayObject.filters=[]:null!==(a=this.backgroundGraphics)&&void 0!==a&&a.displayObject&&(this.backgroundGraphics.displayObject.filters=[])}}]),n}(pp),qg=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function Kg(t,e){for(var n in e)t.style[n]=e[n]}var Zg=function(){function t(e){var n,r,i=this;b(this,t),this.progress=document.createElement("div"),this.totalTime=document.createElement("span"),this.playButton=document.createElement("div"),this.pauseButton=document.createElement("div"),this.currentTime=document.createElement("span"),this.mediaController=document.createElement("div"),this.currentProgress=document.createElement("div"),this.medianIsEnd=!1,this.pickBookmarkIndex=0,this.playCallBackList=[],this.duration=0,this.start=0,this.end=0,this.changeMediaProgress=function(t){if(i.ctx.isPlayerPaused())i.ctx.logger.info("Media controller prevent seek event with paused state",i.ctx.taskId);else{t.stopPropagation();var e=t.offsetX/i.progress.clientWidth*i.duration;i.medianIsEnd=!1,"interactive"!==i.ctx.mode&&i.jumpToTime(e),"local"!==i.ctx.mode&&i.ctx.eventHub.emit(Nm.mediaSeek,{id:i.targetId,time:e,isPlaying:i.media.isPlaying})}},this.jumpToTime=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=Math.floor(t)+i.start;i.media.currentTime!==e&&(i.media.currentTime=e,i.changeBookmarkIndex(e,e>i.media.currentTime))},this.showController=function(t){t.stopPropagation(),i.show()},this.getMediaDuration=function(){i.duration&&!Number.isNaN(i.duration)||(i.duration=i.media.duration,i.start&&(i.duration-=i.start,i.jumpToTime()),i.end&&(i.duration-=i.end)),i.totalTime.innerText=t.formatTime(i.duration)},this.playMedia=function(){return qg(i,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playButton.style.display="none",this.pauseButton.style.display="block",t.next=4,this.media.play();case 4:this.medianIsEnd&&(this.medianIsEnd=!1,this.jumpToTime()),this.playCallBackList.forEach((function(t){t()}));case 6:case"end":return t.stop()}}),t,this)})))},this.pauseMedia=function(){return qg(i,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playButton.style.display="block",this.pauseButton.style.display="none",t.next=4,this.media.pause();case 4:case"end":return t.stop()}}),t,this)})))},this.onMouseOut=function(t){t.stopPropagation(),i.mediaController.style.display="none"},this.mediaTimeUpdate=function(){return qg(i,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.media.currentTime-this.start,e.t0=this.duration>0&&(n>this.duration||this.media.ended),!e.t0){e.next=8;break}return e.next=5,this.pauseMedia();case 5:this.medianIsEnd=!0,this.jumpToTime(),this.ctx.eventHub.emit(Nm.mediaStop,{id:this.targetId});case 8:if(this.currentTime.innerText=t.formatTime(n),this.currentProgress.style.flex=(n/this.duration).toString(),this.bookmarkList&&0!==this.bookmarkList.length){e.next=12;break}return e.abrupt("return");case 12:(r=this.bookmarkList[this.pickBookmarkIndex])&&r.time.toFixed(0)===this.media.currentTime.toFixed(0)&&(this.ctx.timingEventHub.emit("shape ".concat(this.shapeId," onMediaBookmark ").concat(r.name)),this.pickBookmarkIndex+=1);case 14:case"end":return e.stop()}}),e,this)})))},this.onPauseMedia=function(){i.playButton.style.display="block",i.pauseButton.style.display="none"},this.onPlayMedia=function(){i.playButton.style.display="none",i.pauseButton.style.display="block",i.playCallBackList.forEach((function(t){t()}))},this.playMediaFromCtrl=function(){i.ctx.isPlayerPaused()?i.ctx.logger.info("Media controller prevent play event with paused state",i.ctx.taskId):("interactive"!==i.ctx.mode&&i.playMedia(),"local"!==i.ctx.mode&&i.ctx.eventHub.emit(Nm.mediaPlay,{id:i.targetId,time:i.media.currentTime-i.start}))},this.pauseMediaFromCtrl=function(){i.ctx.isPlayerPaused()?i.ctx.logger.info("Media controller prevent pause event with paused state",i.ctx.taskId):("interactive"!==i.ctx.mode&&i.pauseMedia(),"local"!==i.ctx.mode&&i.ctx.eventHub.emit(Nm.mediaPause,{id:i.targetId,time:i.media.currentTime-i.start}))},this.targetId=e.targetId,this.ctx=e.ctx,this.height=e.height,this.width=e.width,this.target=e.target,this.media=e.media,this.info=e.info,this.shapeId=e.shapeId,this.canvasElement=e.canvasElement,this.getMedianContainer(),this.createMediaController(),this.info.cut&&(this.start=null!==(n=this.info.cut.start)&&void 0!==n?n:0,this.end=null!==(r=this.info.cut.end)&&void 0!==r?r:0),this.info.bookmarkList&&(this.bookmarkList=this.info.bookmarkList.sort((function(t,e){return t.time-e.time})))}return x(t,[{key:"getMedianContainer",value:function(){var t,e=null===(t=this.canvasElement.parentElement)||void 0===t?void 0:t.querySelector(".median-container");e||((e=document.createElement("div")).className="median-container",this.canvasElement.parentElement.appendChild(e)),this.container=e}},{key:"generatePlayButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"viewBox","0 0 512 512"),n.setAttributeNS(null,"height",t.toString()),n.setAttributeNS(null,"width",e.toString());var r=document.createElementNS("http://www.w3.org/2000/svg","polyline");return r.setAttributeNS(null,"points","35 0, 477 256, 35 512"),r.setAttributeNS(null,"fill","#000000"),n.appendChild(r),n}},{key:"generatePauseButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=document.createElementNS("http://www.w3.org/2000/svg","svg");Kg(n,{height:"20px"}),n.setAttributeNS(null,"viewBox","0 0 512 512"),n.setAttributeNS(null,"height",t.toString()),n.setAttributeNS(null,"width",e.toString());var r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttributeNS(null,"x","35"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","148"),r.setAttributeNS(null,"height","512");var i=r.cloneNode(!0);return i.setAttributeNS(null,"x","330"),n.append(r,i),n}},{key:"createButton",value:function(){var t={marginLeft:"15px",marginRight:"10px",fontSize:"0",height:"20px"};Kg(this.playButton,Object.assign(Object.assign({},t),{display:"block"}));var e=this.generatePlayButton();Kg(e,{height:"20px"}),this.playButton.appendChild(e),Kg(this.pauseButton,Object.assign(Object.assign({},t),{display:"none"}));var n=this.generatePauseButton();Kg(n,{height:"20px"}),this.pauseButton.appendChild(n)}},{key:"createTimer",value:function(){var t=document.createElement("div");Kg(t,{width:"100px"}),this.currentTime.innerText="00:00";var e=document.createElement("span");return e.innerText="/",t.append(this.currentTime,e,this.totalTime),t}},{key:"createProgress",value:function(){Kg(this.progress,{flex:"1",position:"relative",marginRight:"10px"});var t=document.createElement("div");Kg(t,{background:"#D9D9D9",position:"relative",height:"10px",display:"flex"}),this.progress.appendChild(t),Kg(this.currentProgress,{background:"#4F4F4F",top:"0px",left:"0",height:"10px",flex:"0"}),t.appendChild(this.currentProgress)}},{key:"changeBookmarkIndex",value:function(t,e){if(this.bookmarkList&&0!==this.bookmarkList.length){if(this.pickBookmarkIndex>0)for(var n=0;n<this.pickBookmarkIndex;n++)if(this.bookmarkList[n].time>t){this.pickBookmarkIndex=n;break}if(e){for(var r=this.pickBookmarkIndex-1,i=0;i<this.bookmarkList.length;i++)this.bookmarkList[i].time<t&&(r=i);for(var o=this.pickBookmarkIndex;o<=r;o++){var a=this.bookmarkList[o];a&&this.ctx.timingEventHub.emit("shape ".concat(this.shapeId," onMediaBookmark ").concat(a.name))}this.pickBookmarkIndex=r+1}}}},{key:"bindEvent",value:function(){this.mediaController.addEventListener("mouseover",this.showController,!1),this.mediaController.addEventListener("mouseout",this.onMouseOut,!1),this.progress.addEventListener("mousedown",this.changeMediaProgress,!1),this.playButton.addEventListener("click",this.playMediaFromCtrl,!1),this.pauseButton.addEventListener("click",this.pauseMediaFromCtrl,!1),this.media.on("durationchange",this.getMediaDuration,!1),this.media.on("timeupdate",this.mediaTimeUpdate,!1),this.media.on("pause",this.onPauseMedia,!1),this.media.on("play",this.onPlayMedia,!1)}},{key:"setControllerPosition",value:function(){var t,e=this.target,n=this.ctx,r=n.stageWidth,i=n.stageHeight,o=e.getGlobalPosition(),a=Number(null===(t=this.container)||void 0===t?void 0:t.getAttribute("data-scale")),s=r*a,u=1/a*(300>s?s/300:1);o.y=o.y+this.height-50,o.x=Math.max(o.x,0),o.x=Math.min(o.x,r-300*u),o.y=Math.max(o.y,0),o.y=Math.min(o.y,i-50),Kg(this.mediaController,{height:"50px",borderRadius:"25px",width:"300px",flexDirection:"row",alignItems:"center",position:"absolute",left:o.x+"px",top:o.y+"px",display:"none",background:"#fff",zIndex:"2",border:"1px solid #ccc",transform:"scale(".concat(u,")"),transformOrigin:"0 100%"})}},{key:"createMediaController",value:function(){this.setControllerPosition(),this.createButton();var t=this.createTimer();this.createProgress(),this.mediaController.append(this.playButton,this.pauseButton,t,this.progress),this.container.appendChild(this.mediaController),this.bindEvent()}},{key:"addPlayCallBack",value:function(t){this.playCallBackList.push(t)}},{key:"unbindEvent",value:function(){this.mediaController.removeEventListener("mouseover",this.showController,!1),this.mediaController.removeEventListener("mouseout",this.onMouseOut,!1),this.progress.removeEventListener("mousedown",this.changeMediaProgress,!1),this.playButton.removeEventListener("click",this.playMediaFromCtrl,!1),this.pauseButton.removeEventListener("click",this.pauseMediaFromCtrl,!1),this.media.removeAllListeners()}},{key:"show",value:function(){this.setControllerPosition(),this.mediaController.style.display="flex"}},{key:"hide",value:function(){this.mediaController.style.display="none"}},{key:"destroy",value:function(){var t;this.unbindEvent(),this.playCallBackList=[],null===(t=this.container)||void 0===t||t.removeChild(this.mediaController)}}],[{key:"formatTime",value:function(t){var e="00:00";if(t){var n=Math.floor(t/60),r=String(n<0?0:n).padStart(2,"0"),i=Math.floor(t%60);e="".concat(r,":").concat(String(i<0?0:i).padStart(2,"0"))}return e}}]),t}(),Jg=n(115),$g=function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),(i=e.call(this)).isGlobalPause=!1,i.lastTime=-1,i.howl=null,i.rctClient=null,i.isHowlEnd=!1,i.isHowlLoadEmit=!1,i.url=t,i.runningAudio=r,Bm.RtcAudioClazz?(i.rctClient=new Bm.RtcAudioClazz(t),i.rctClient.on("load",(function(){return i.emit("load")})),i.rctClient.on("pause",(function(){return i.emit("pause")})),i.rctClient.on("play",(function(){return i.emit("play")}))):(i.howl=new Jg.Howl({src:[t]}),i.howl.load(),i.howl.on("load",(function(){i.isHowlLoadEmit=!0,i.emit("load")})),i.howl.on("pause",(function(){return i.emit("pause")})),i.howl.on("play",(function(){i.isHowlLoadEmit||i.emit("load"),i.isHowlEnd=!1,i.emit("play")})),i.howl.on("end",(function(){i.isHowlEnd=!0}))),i}return x(n,[{key:"startTimeChangeEmit",value:function(){var t=this;this.currentTime!==this.lastTime&&(this.lastTime=this.currentTime,this.emit("timeupdate")),(!this.isEnded||this.duration<=0)&&setTimeout((function(){return t.startTimeChangeEmit()}),300)}},{key:"play",value:function(){var t,e,n;this.runningAudio.has(this.url)&&(null===(t=this.runningAudio.get(this.url))||void 0===t||t.stop(),this.runningAudio.delete(this.url)),this.isHowlEnd=!1,this.lastTime=-1,null===(e=this.howl)||void 0===e||e.play(),null===(n=this.rctClient)||void 0===n||n.play(),this.startTimeChangeEmit(),this.runningAudio.set(this.url,this)}},{key:"pause",value:function(){var t,e;null===(t=this.howl)||void 0===t||t.pause(),null===(e=this.rctClient)||void 0===e||e.pause(),this.runningAudio.has(this.url)&&this.runningAudio.delete(this.url)}},{key:"globalPause",value:function(){this.isPaused||(this.isGlobalPause=!0,this.pause())}},{key:"globalResume",value:function(){this.isGlobalPause&&(this.isGlobalPause=!1,this.play())}},{key:"stop",value:function(){var t;null===(t=this.howl)||void 0===t||t.stop(),this.rctClient&&(this.rctClient.pause(),this.rctClient.currentTime=0),this.runningAudio.has(this.url)&&this.runningAudio.delete(this.url)}},{key:"destroy",value:function(){var t,e,n,r,i,o,a;null===(t=this.howl)||void 0===t||t.pause(),null===(e=this.howl)||void 0===e||e.unload(),null===(n=this.rctClient)||void 0===n||n.pause(),null===(r=this.rctClient)||void 0===r||r.destroy(),null===(i=this.rctClient)||void 0===i||i.removeAllListeners("load"),null===(o=this.rctClient)||void 0===o||o.removeAllListeners("play"),null===(a=this.rctClient)||void 0===a||a.removeAllListeners("pause"),this.runningAudio.has(this.url)&&this.runningAudio.delete(this.url)}},{key:"volume",value:function(t){this.rctClient?this.rctClient.volume(t):this.howl&&this.howl.volume(t)}},{key:"currentTime",get:function(){return this.rctClient?this.rctClient.currentTime:this.howl?this.howl.seek():-1},set:function(t){this.rctClient?this.rctClient.currentTime=t:this.howl&&this.howl.seek(t)}},{key:"duration",get:function(){return this.rctClient?this.rctClient.duration:this.howl?this.howl.duration():0}},{key:"isEnded",get:function(){return this.howl?this.isHowlEnd:Math.abs(this.currentTime-this.duration)<.001}},{key:"isPaused",get:function(){return this.rctClient?this.rctClient.isPaused:!!this.howl&&this.howl.playing()}}]),n}(Os.a),tv=function(t){A(n,t);var e=p(n);function n(t){var r,i,o;b(this,n),(r=e.call(this)).type="video",r.sprite=new dd,r.isPlaying=!1,r.isGlobalPause=!1,r.updateVolume=function(t){Bm.RtcAudioClazz?r.rtcAudio.volume(t):r.videoResource.source&&(r.videoResource.source.volume=t)},r.id=t.id,r.start=null===(i=t.video.cut)||void 0===i?void 0:i.start,r.end=null===(o=t.video.cut)||void 0===o?void 0:o.end,r.container=t.container,r.ctx=t.ctx,r.ctx.medias[r.id]=v(r);var a=t.video.src;r.ctx.loaderDelegate&&(a=r.ctx.loaderDelegate.redirectMedia(a),r.ctx.logger.info("redirect media url from ".concat(t.video.src," to ").concat(a," by delegate."),t.ctx.taskId)),r.videoResource=new _l.w(a,{autoLoad:!0,autoPlay:!1,updateFPS:30,crossorigin:!0});var s=t.video.src.replace(/4$/,"3");r.ctx.loaderDelegate&&(s=r.ctx.loaderDelegate.redirectMedia(s),r.ctx.logger.info("redirect media url from ".concat(t.video.src.replace(/4$/,"3")," to ").concat(s," by delegate."),t.ctx.taskId)),r.rtcAudio=new $g(s,t.ctx.runningAudio);var u=t.video,l=t.width,c=t.height,h=t.target;r.controller=new Zg({targetId:t.id,shapeId:t.shapeId,ctx:t.ctx,width:l,height:c,target:h,media:v(r),info:u,canvasElement:t.canvasElement}),r.controller.addPlayCallBack((function(){r.sprite.width=l,r.sprite.height=c,r.ctx.clock.setTimeout((function(){r.sprite.visible=!0}),50)}));var d=new _l.c(null,{height:c,width:l});return d.resource=r.videoResource,r.videoResource.bind(d),r.sprite=new dd,r.sprite.visible=!1,r.sprite.texture=new _l.t(d),r.sprite.interactive=!0,r.container.addChild(r.sprite),r.sprite.on("mouseover",(function(t){t.stopPropagation(),r.controller.show()})),r.sprite.on("mouseout",(function(t){t.stopPropagation(),r.controller.hide()})),["durationchange","timeupdate","pause","play"].forEach((function(t){r.videoResource.source.addEventListener(t,(function(){"timeupdate"!==t||r.isPlaying||r.pause(),r.emit(t)}))})),r.ctx.activeMedia.add(v(r)),r.ctx.volumeAdjuster.on("update",r.updateVolume),r}return x(n,[{key:"showController",value:function(){this.controller.show()}},{key:"hideController",value:function(){this.controller.hide()}},{key:"play",value:function(){var t;return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isPlaying=!0,this.updateVolume(this.ctx.volumeAdjuster.volume),e.next=4,this.load();case 4:return e.next=6,this.ctx.clock.waitUntil((function(){var t=r.videoResource.source;return!!(t&&t.videoWidth>0)}),3e3);case 6:if(n=this.videoResource.source,e.t0=n&&n.videoWidth<=0,e.t0){e.next=15;break}if(!Bm.RtcAudioClazz){e.next=13;break}this.videoResource.source.volume=0,this.videoResource.source.muted=!0,this.rtcAudio.once("play",(function(){var t;null===(t=r.videoResource.source)||void 0===t||t.play()})),this.rtcAudio.play(),e.next=15;break;case 13:return e.next=15,null===(t=this.videoResource.source)||void 0===t?void 0:t.play();case 15:case"end":return e.stop()}}),e,this)})))}},{key:"load",value:function(){return this.videoResource.load()}},{key:"pause",value:function(){var t,e=this;this.isPlaying=!1,Bm.RtcAudioClazz?(this.rtcAudio.once("pause",(function(){var t;null===(t=e.videoResource.source)||void 0===t||t.pause()})),this.rtcAudio.pause()):null===(t=this.videoResource.source)||void 0===t||t.pause()}},{key:"globalPause",value:function(){this.isPlaying&&(this.isGlobalPause=!0,this.pause())}},{key:"globalResume",value:function(){this.isGlobalPause&&(this.isGlobalPause=!1,this.play())}},{key:"togglePause",value:function(){this.isPlaying?this.pause():this.play()}},{key:"seek",value:function(t){this.controller.jumpToTime(t)}},{key:"stop",value:function(){this.seek(0),this.pause()}},{key:"destroy",value:function(){var t;this.ctx.volumeAdjuster.removeListener("update",this.updateVolume),this.sprite.interactive=!1,this.sprite.destroy({texture:!0,baseTexture:!0}),null===(t=this.videoResource)||void 0===t||t.destroy(),this.rtcAudio.destroy(),this.controller.destroy(),this.ctx.activeMedia.delete(this)}},{key:"currentTime",get:function(){var t,e;return null!==(e=null===(t=this.videoResource.source)||void 0===t?void 0:t.currentTime)&&void 0!==e?e:0},set:function(t){Bm.RtcAudioClazz&&(this.rtcAudio.currentTime=t),this.videoResource.source&&(this.videoResource.source.currentTime=t)}},{key:"paused",get:function(){var t,e;return null===(e=null===(t=this.videoResource.source)||void 0===t?void 0:t.paused)||void 0===e||e}},{key:"ended",get:function(){var t,e;return null===(e=null===(t=this.videoResource.source)||void 0===t?void 0:t.ended)||void 0===e||e}},{key:"duration",get:function(){var t,e;return null!==(e=null===(t=this.videoResource.source)||void 0===t?void 0:t.duration)&&void 0!==e?e:0}}]),n}(Os.a),ev=function(t){A(n,t);var e=p(n);function n(t){var r;b(this,n),(r=e.call(this)).type="audio",r.isPlaying=!1,r.isGlobalPause=!1,r.updateVolume=function(t){r.audioPlayer.volume(t)},r.id=t.id;var i=t.audio.src;/mp4$/.test(i)&&(i=i.replace(/mp4$/,"mp3")),t.ctx.loaderDelegate&&(i=t.ctx.loaderDelegate.redirectMedia(i),t.ctx.logger.info("redirect media url from ".concat(t.audio.src," to ").concat(i," by delegate."),t.ctx.taskId)),r.audioPlayer=new $g(i,t.ctx.runningAudio),t.audio.cut&&(r.start=t.audio.cut.start,r.end=t.audio.cut.end),r.ctx=t.ctx,r.ctx.medias[r.id]=v(r);var o=t.width,a=t.height,s=t.target;return r.controller=new Zg({targetId:t.id,shapeId:t.shapeId,ctx:t.ctx,height:a,width:o,target:s,media:v(r),info:t.audio,canvasElement:t.canvasElement}),r.audioPlayer.on("load",(function(){return r.emit("durationchange")})),r.audioPlayer.on("timeupdate",(function(){return r.emit("timeupdate")})),r.audioPlayer.on("pause",(function(){return r.emit("pause")})),r.audioPlayer.on("play",(function(){return r.emit("play")})),r.ctx.activeMedia.add(v(r)),r.ctx.volumeAdjuster.on("update",r.updateVolume),r}return x(n,[{key:"load",value:function(){return Promise.resolve()}},{key:"showController",value:function(){this.controller.show()}},{key:"hideController",value:function(){this.controller.hide()}},{key:"play",value:function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.ctx.isPlayerPaused()?this.ctx.logger.info("Audio player prevent play event with paused state",this.ctx.taskId):(this.updateVolume(this.ctx.volumeAdjuster.volume),this.isPlaying=!0,this.audioPlayer.play());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"pause",value:function(){this.ctx.isPlayerPaused()?this.ctx.logger.info("Audio player prevent pause event with paused state",this.ctx.taskId):(this.isPlaying=!1,this.audioPlayer.pause())}},{key:"globalPause",value:function(){this.isPlaying&&(this.isGlobalPause=!0,this.pause())}},{key:"globalResume",value:function(){this.isGlobalPause&&(this.isGlobalPause=!1,this.play())}},{key:"togglePause",value:function(){this.isPlaying?this.pause():this.play()}},{key:"seek",value:function(t){this.ctx.isPlayerPaused()?this.ctx.logger.info("Audio player prevent seek event with paused state",this.ctx.taskId):this.controller.jumpToTime(t)}},{key:"stop",value:function(){this.seek(0),this.pause()}},{key:"destroy",value:function(){this.ctx.volumeAdjuster.removeListener("update",this.updateVolume),this.audioPlayer.pause(),this.controller.destroy(),this.ctx.activeMedia.delete(this)}},{key:"currentTime",get:function(){return this.audioPlayer.currentTime},set:function(t){this.audioPlayer.currentTime=t}},{key:"paused",get:function(){return this.audioPlayer.isPaused}},{key:"isPaused",get:function(){return this.audioPlayer.isPaused}},{key:"ended",get:function(){return this.audioPlayer.isEnded}},{key:"duration",get:function(){return this.audioPlayer.duration}}]),n}(Os.a),nv=function(t){A(n,t);var e=p(n);function n(t,r,i,o){var a;return b(this,n),(a=e.call(this,Object.assign(Object.assign({},t),{type:"Shape",useBgFill:!1,textRotateWithShape:!0,isPicture:!0}),r,i,o)).isInteractiveOutside=!1,a.cmd=new sp(v(a)),a.media=null==t?void 0:t.media,a.container.name=t.id+"_container_[Picture]",a.renderContainer.name=t.id+"_render_container_[Picture]",a.picFill=new hg(a.ctx,t.picFill,t.width,t.height,{useFilter:!0,useSlideBackgroundFill:!1}),a}return x(n,[{key:"applyCommand",value:function(t,e){var n,r,i,o,a,s=this;if("call"===e)if(/playFrom\(([0-9.]+)\)/.test(t)){var u=t.match(/playFrom\(([0-9.]+)\)/),l=Number(u[1]||"0");null===(n=this.mediaPlayer)||void 0===n||n.play().then((function(){var t;null===(t=s.mediaPlayer)||void 0===t||t.seek(l)}))}else"custom-pause"===t?null===(r=this.mediaPlayer)||void 0===r||r.pause():"togglePause"===t?null===(i=this.mediaPlayer)||void 0===i||i.togglePause():"stop"===t&&(null===(o=this.mediaPlayer)||void 0===o||o.pause(),null===(a=this.mediaPlayer)||void 0===a||a.seek(0))}},{key:"renderPic",value:function(){var t,e,n,r,i,o,a=this,s=this.picFill.displayObject;if(s){s.name=this.json.id+"_pic_fill_[Picture]";var u=null===(t=this.backgroundGraphics)||void 0===t?void 0:t.getClonedDisplayObject();if((null===(e=this.backgroundGraphics)||void 0===e?void 0:e.isNeedMask(s.width,s.height))&&u&&(s.mask=u,this.effectContainer.addChild(u)),s.width=this.designWidth,s.height=this.designHeight,s instanceof df&&this.ctx.slideScopeEventHub.once("slide-render",(function(t){var e;a.ctx.slideIndex===t&&(null===(e=a.effectObject)||void 0===e||e.setFrameCount(s.totalFrames),s.play(),s.onFrameChange=function(t){if(a.effectObject)if(a.effectObject.hasFrame(t))a.effectObject.updateFrame(t);else{var e=a.getEffectTexture();e&&(a.effectObject.createFrame(t,e.texture),a.effectObject.setFrameOffset(e.offsetX,e.offsetY))}})})),this.effectContainer.addChild(s),"video"===(null===(n=this.media)||void 0===n?void 0:n.type)&&this.media.src){if(this.mediaPlayer=new tv({id:this.json.id+"-video",shapeId:this.json.id,ctx:this.ctx,video:this.media,height:this.designHeight,width:this.designWidth,target:s,container:this.effectContainer,canvasElement:this.ctx.view}),(null===(r=this.mediaPlayer)||void 0===r?void 0:r.sprite)&&u){var l=null===(i=this.backgroundGraphics)||void 0===i?void 0:i.getClonedDisplayObject();l&&(this.mediaPlayer.sprite.mask=l,this.container.addChild(l))}}else"audio"===(null===(o=this.media)||void 0===o?void 0:o.type)&&this.media.src&&(this.mediaPlayer=new ev({id:this.json.id+"-audio",shapeId:this.json.id,ctx:this.ctx,audio:this.media,height:this.designHeight,width:this.designWidth,target:s,canvasElement:this.ctx.view}));this.mediaPlayer&&(this.isInteractiveOutside=!!this.container.interactive,this.container.interactive=!0,this.container.on("mouseover",(function(){a.mediaPlayer.showController()})),this.container.on("mouseout",(function(){a.mediaPlayer.hideController()}),!1))}}},{key:"preRender",value:function(t){d(y(n.prototype),"preRender",this).call(this,t)}},{key:"subClassRender",value:function(){this.renderPic()}},{key:"clearOnSlideChange",value:function(){d(y(n.prototype),"clearOnSlideChange",this).call(this),this.mediaPlayer&&(this.container.interactive=!1,this.mediaPlayer.stop(),this.mediaPlayer.hideController())}},{key:"initOnReuse",value:function(){d(y(n.prototype),"initOnReuse",this).call(this),this.mediaPlayer&&(this.container.interactive=!0)}},{key:"destroy",value:function(){this.mediaPlayer&&(this.picFill.displayObject&&!this.isInteractiveOutside&&(this.container.interactive=!1),this.mediaPlayer.destroy(),this.mediaPlayer=void 0),this.picFill.destroy()}}]),n}(Xg),rv=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},iv=function(t){A(n,t);var e=p(n);function n(t,r,i,o,a){var s;return b(this,n),(s=e.call(this,t,r,i)).children=[],s.cacheSprite=new dd,s.cacheContainer=new hl.b,s.json=t,s.json.fillStyle&&"groupFill"===s.json.fillStyle.fillType&&o&&(s.json.fillStyle=o),s.container.name=t.id+"_container_[Container]",s.cacheContainer.name=t.id+"_cache_container_[Container]",s.ctx.timingTargets.addTarget(t.id,v(s)),s.updateTransform(s.json),s.fillObject=new hg(s.ctx,t.fillStyle,t.width,t.height,{useFilter:!1,useSlideBackgroundFill:!1}),s.createChildren(a),s}return x(n,[{key:"createChildren",value:function(t){for(var e,r,i,o,a=this,s={x:null!==(r=null===(e=this.json.position)||void 0===e?void 0:e.x)&&void 0!==r?r:0,y:null!==(o=null===(i=this.json.position)||void 0===i?void 0:i.y)&&void 0!==o?o:0},u=function(e,r){t.addSubMTask((function(){return rv(a,void 0,void 0,regeneratorRuntime.mark((function r(){var i,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=this.json.children[e],o=null,"Shape"===(null==i?void 0:i.type)?o=new Xg(i,this.ctx,s,this.json.fillStyle):"Picture"===(null==i?void 0:i.type)?o=new nv(i,this.ctx,s,this.json.fillStyle):"Container"===(null==i?void 0:i.type)&&(o=new n(i,this.ctx,s,this.json.fillStyle,t)),o&&this.children.push(o);case 3:case"end":return r.stop()}}),r,this)})))}),"@ContainerImpl[child.init]")},l=0,c=this.json.children.length;l<c;l++)u(l)}},{key:"preRender",value:function(t){var e,n=this,r=E(this.children);try{var i=function(){var r=e.value;t.addSubMTask((function(){return rv(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preRender(t);case 1:case"end":return e.stop()}}),e)})))}),"@ContainerImpl[child.preRender]")};for(r.s();!(e=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}}},{key:"getBgElement",value:function(){return null}},{key:"getIterateEntry",value:function(t,e,n){return 0===e?this:(this.ctx.eventHub.emit("IterateTimeNodeEnd",n),null)}},{key:"getTextElement",value:function(){return null}},{key:"render",value:function(t){var e,n=this,r=E(this.children);try{var i=function(){var r=e.value;r.render(t),t.addSubMTask((function(){return rv(n,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.cacheContainer.addChild(r.renderContainer),(r.json.hlinkHover||r.json.hlinkClick)&&(null===(e=r.hyperlink)||void 0===e||e.addProxy(this.container));case 1:case"end":return t.stop()}}),t,this)})))}),"@ContainerImpl[child.render]")};for(r.s();!(e=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}t.addSubMTask((function(){return rv(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.container.addChild(this.cacheContainer);case 1:case"end":return t.stop()}}),t,this)})))}),"@ContainerImpl[child.append]")}},{key:"clearOnSlideChange",value:function(){this.children.forEach((function(t){return t.clearOnSlideChange()}))}},{key:"initOnReuse",value:function(){this.children.forEach((function(t){return t.initOnReuse()}))}},{key:"isChildrenInteractive",value:function(){var t,e=E(this.json.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;if("Container"===(null==n?void 0:n.type)||"Stage"===(null==n?void 0:n.type)||(null==n?void 0:n.hlinkHover)||(null==n?void 0:n.hlinkClick))return!0}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"destroy",value:function(){this.cacheSprite&&this.cacheSprite.destroy({texture:!0}),this.children.forEach((function(t){return t.destroy()})),this.container.destroy({children:!0,texture:!0,baseTexture:!0}),this.cacheContainer.destroy({children:!0,texture:!0,baseTexture:!0})}},{key:"interactiveContainer",get:function(){return this.container}},{key:"renderContainer",get:function(){return this.container}}]),n}(pp),ov=function(t){A(n,t);var e=p(n);function n(t,r,i,o){var a;return b(this,n),(a=e.call(this)).cond={},a.timeoutIds=[],a.condHandle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t)if(t.delay&&t.delay>0){var n=a.ctx.clock.setTimeout((function(){t.event&&(a.cond[t.event]=!0,a.detectTrigger(e))}),t.delay);a.timeoutIds.push(n)}else a.cond[t.event]=!0,a.detectTrigger(e);else a.detectTrigger(e)},a.id=t,a.ctx=o,a.eventHubs=i,r.forEach((function(t){a.addCond(t)})),a}return x(n,[{key:"setTriggerParams",value:function(t){this.triggerParams=t}},{key:"addCond",value:function(t){var e=this,n=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.condHandle(t,r)};t.event&&(/^shape/.test(t.event)||/^time/.test(t.event)?(this.cond[t.event]=!1,this.eventHubs.global.addListener(t.event,n)):/^runtime/.test(t.event)?(this.cond[t.event]=!1,this.eventHubs.runtime.addListener(t.event,n)):/^self/.test(t.event)?t.delay&&t.delay>0&&(this.cond[t.event]=!1,this.eventHubs.runtime.addListener(t.event,n)):this.cond[t.event]=!1)}},{key:"isTrigger",value:function(){var t=this;return Object.keys(this.cond).every((function(e){return!!t.cond[e]}))}},{key:"isTriggerWithoutParent",value:function(){var t=this;return Object.keys(this.cond).filter((function(t){return"self"!==t})).every((function(e){return!!t.cond[e]}))}},{key:"detectTrigger",value:function(t){var e=this;if(Object.keys(this.cond).every((function(t){return!!e.cond[t]}))){Object.keys(this.cond).forEach((function(t){e.cond[t]=!1}));var n=this.triggerParams;this.triggerParams=void 0,this.emit("active",n,t)}}},{key:"reset",value:function(){var t=this;Object.keys(this.cond).forEach((function(e){t.cond[e]=!1})),this.timeoutIds.forEach((function(e){return t.ctx.clock.clearTimeout(e)}))}}]),n}(Os.a),av=function(t){A(n,t);var e=p(n);function n(t){var r;b(this,n),(r=e.call(this)).isTimeNodeEndSync=!1,r.interactiveListeners=[],r.runtimeNodeEventHub=new Os.a,r._currentSeqIndex=0,r._currentSeqState="idle",r.isForward=!0,r.autoPlay=!1,r.handlePrev=function(){var t,e,n,i,o,a,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r.hasPrev()||!r.isMainSeq?"idle"===r.currentSeqState?(r.decrSeqIndex(),null===(t=r.commonTimeNode.children[r.currentSeqIndex])||void 0===t||t.commonTimeNode.seekToStart(),null===(e=r.commonTimeNode.children[r.currentSeqIndex])||void 0===e||e.commonTimeNode.clearSubList(),r.currentSeqState="idle"):"running"===r.currentSeqState?(null===(n=r.commonTimeNode.children[r.currentSeqIndex])||void 0===n||n.commonTimeNode.seekToStart(),null===(i=r.commonTimeNode.children[r.currentSeqIndex])||void 0===i||i.commonTimeNode.clearSubList(),r.currentSeqState="idle"):"end"===r.currentSeqState&&(r.currentSeqIndex>=r.commonTimeNode.children.length&&(r.currentSeqIndex=r.commonTimeNode.children.length-1),null===(o=r.commonTimeNode.children[r.currentSeqIndex])||void 0===o||o.commonTimeNode.seekToStart(),null===(a=r.commonTimeNode.children[r.currentSeqIndex])||void 0===a||a.commonTimeNode.clearSubList(),r.currentSeqState="idle"):r.globalEventHub.emit("c:prev slide",s)},r.handleNext=function(t,e){var n,i,o,a;r.isTimeNodeEndSync&&(r.isTimeNodeEndSync=!1,r.currentSeqState="idle",r.currentSeqIndex=0),!r.hasNext()&&r.isMainSeq&&e?r.globalEventHub.emit("c:next slide",t):"idle"===r.currentSeqState?null===(n=r.commonTimeNode.children[r.currentSeqIndex])||void 0===n||n.commonTimeNode.startTimeNodeForce():"running"===r.currentSeqState?(null===(i=r.commonTimeNode.children[r.currentSeqIndex])||void 0===i||i.commonTimeNode.seekToEnd(!1,!0),r.currentSeqState="end",r.incrSeqIndex(),null===(o=r.commonTimeNode.children[r.currentSeqIndex])||void 0===o||o.commonTimeNode.startTimeNodeForce()):"end"===r.currentSeqState&&(r.incrSeqIndex(),null===(a=r.commonTimeNode.children[r.currentSeqIndex])||void 0===a||a.commonTimeNode.startTimeNodeForce())};var i=t.json,o=t.iterateType,a=t.isIterate,s=t.isSub,u=t.parent,c=t.ctx,h=t.eventHub,d=t.iterateIndex,A=t.iterateId,f=t.isInInteractiveSeq;return r.isMainSeq="mainSeq"===i.ctn.nodeType,r.isInteractiveSeq="interactiveSeq"===i.ctn.nodeType,r.id=i.ctn.id,r.isIterate=a,r.json=i,r.ctx=c,r.globalEventHub=h,r.commonTimeNode=new am({json:i.ctn,isSub:s,eventHubs:{global:h,runtime:r.runtimeNodeEventHub},ctx:c,parent:u,isIterate:!1,iterateType:o,iterateIndex:d,iterateId:A,isInInteractiveSeq:f||r.isInteractiveSeq}),r.bindShapeEvent(),r.nextConds=new ov("mainSeq",i.nextCondLst,{global:h,runtime:r.runtimeNodeEventHub},r.ctx),r.prevConds=new ov("mainSeq",i.preCondLst,{global:h,runtime:r.runtimeNodeEventHub},r.ctx),r.commonTimeNode.on("timeNodeRestart",(function(){r.currentSeqIndex=0,r.currentSeqState="idle"})),r.commonTimeNode.on("childTimeNodeStart",(function(t){var e=r.commonTimeNode.children.findIndex((function(e){return e.commonTimeNode.uuid===t.id}));e>=0&&(r.currentSeqIndex=e),r.currentSeqState="running",r.isMainSeq&&r.ctx.eventHub.emit(Nm.mainSeqStepStart,e)})),r.commonTimeNode.on("childTimeNodeEnd",(function(t){var e=r.commonTimeNode.children.findIndex((function(e){return e.commonTimeNode.uuid===t.id}));e>=0&&(r.currentSeqIndex=e),r.currentSeqState="end",r.autoPlay&&r.ctx.clock.setTimeout((function(){r.handleNext(!1,!0)})),r.isMainSeq&&r.ctx.eventHub.emit(Nm.mainSeqStepEnd,e)})),r.commonTimeNode.on("timeNodeEndSync",(function(){r.isTimeNodeEndSync=!0,r.commonTimeNode.resetForRepeat()})),r.commonTimeNode.on("timeNodeDestroy",(function(){r.interactiveListeners.forEach((function(t){var e=l(t,2),n=e[0],r=e[1];n&&r&&n.interactiveContainer.removeListener("pointerdown",r)})),r.interactiveListeners=[]})),r.nextConds.on("active",(function(t,e){Array.isArray(e)?r.handleNext(e[0],e[1]):r.handleNext(e,!0)})),r.prevConds.on("active",(function(t,e){Array.isArray(e)?r.handlePrev(e[0]):r.handlePrev(e)})),r}return x(n,[{key:"startAutoPlay",value:function(){this.autoPlay=!0,this.commonTimeNode.children[0].commonTimeNode.startTimeNodeForce()}},{key:"incrSeqIndex",value:function(){this.currentSeqIndex+1<=this.commonTimeNode.children.length&&(this.currentSeqIndex+=1)}},{key:"decrSeqIndex",value:function(){this.currentSeqIndex-1>=-1&&(this.currentSeqIndex-=1)}},{key:"hasPrev",value:function(){return!(this.currentSeqIndex<=0&&"idle"===this.currentSeqState)}},{key:"hasNext",value:function(){return!(this.currentSeqIndex>=this.commonTimeNode.children.length||this.currentSeqIndex===this.commonTimeNode.children.length-1&&"end"===this.currentSeqState)}},{key:"bindShapeEvent",value:function(){var t=this;"interactiveSeq"===this.json.ctn.nodeType&&this.json.nextCondLst.forEach((function(e){if(/^shape/.test(e.event)){var n=e.event.split(" ")[1];if(n){var r=t.ctx.timingTargets.getTargetById(n);if(r){r.interactiveContainer.interactive=!0,r.interactiveContainer.cursor="pointer";var i=function(){t.ctx.eventHub.emit(Nm.userInput);var e="shape ".concat(n," onClick"),r=t.ctx.mode;"interactive"!==r&&"sync"!==r||t.ctx.eventHub.emit(Nm.interactiveSeqAction,{action:e,seqId:t.json.ctn.id}),"sync"!==r&&"local"!==r||t.globalEventHub.emit(e)};r.interactiveContainer.on("pointerdown",i),t.interactiveListeners.push([r,i])}}}}))}},{key:"setCurrentStep",value:function(t,e){var n=this.commonTimeNode.children.length;if(!(t>n)){this.isInteractiveSeq&&0===this.commonTimeNode.applyCount&&(this.commonTimeNode.applyCount=1);var r=t;if(this.commonTimeNode.seekToStart(),-1===r&&(r=n-1),0!==r||"start"!==e){if(r>=0&&r<n)for(var i=0;i<=r;i++){var o=this.commonTimeNode.children[i];i!==r?o.commonTimeNode.seekToEnd(!1,!0):"start"===e?o.commonTimeNode.seekToStart():"end"===e&&o.commonTimeNode.seekToEnd(!1,!0)}this.currentSeqIndex=r,this.currentSeqState="start"===e?"idle":"end"}}}},{key:"currentSeqIndex",get:function(){return this._currentSeqIndex},set:function(t){this._currentSeqIndex=t,this.isMainSeq?this.ctx.eventHub.emit(Nm.mainSeqStepChange,t):this.isInteractiveSeq&&this.ctx.eventHub.emit(Nm.interactiveSeqStateChange,{id:this.json.ctn.id,state:{step:t,state:this._currentSeqState}})}},{key:"currentSeqState",get:function(){return this._currentSeqState},set:function(t){this._currentSeqState=t,this.isMainSeq?this.ctx.eventHub.emit(Nm.mainSeqStateChange,t):this.isInteractiveSeq&&this.ctx.eventHub.emit(Nm.interactiveSeqStateChange,{id:this.json.ctn.id,state:{step:this._currentSeqIndex,state:t}})}},{key:"stepLength",get:function(){return this.commonTimeNode.children.length}},{key:"currentStep",get:function(){return this.currentSeqIndex}},{key:"currentState",get:function(){return this.currentSeqState}}]),n}(Os.a);function sv(t,e,n){var r=e.split(".");r.reduce((function(i,o,a){if(i)return a!==r.length-1?i[o]:void(i[o]=n);console.warn("".concat(t," not support ").concat(e))}),t)}function uv(t,e){return e?e.split(".").reduce((function(n,r){if(n)return n[r];console.warn("".concat(t," not support ").concat(e))}),t):null}var lv=function(){function t(e){var n=this;b(this,t),this.timingTarget=null,this.runtimeNodeEventHub=new Os.a,this.basicOnTimeNodeEnd=function(){if(n.isConflict){var t=n.json.cBhvr.target,e=n.getTargetId(t);n.ctx.conflictTimeNodeManager.removeRunningTimeNode(e,n.modifyAttrKey)}},this.basicOnTimeLineStart=function(){if(n.isConflict){var t=n.json.cBhvr.target;if("next"===n.activeWhenConflict){var e=n.getTargetId(t);n.ctx.conflictTimeNodeManager.addRunningTimeNode(e,n.modifyAttrKey,n.commonTimeNode)}else"prev"===n.activeWhenConflict&&n.commonTimeNode.dispose()}};var r=e.isIterate,i=e.isSub,o=e.json,a=e.ctx,s=e.parent,u=e.eventHub,l=e.iterateType,c=e.iterateIndex,h=e.iterateId,d=e.isInInteractiveSeq;this.json=o,this.id=o.cBhvr.ctn.id,this.ctx=a,this.globalEventHub=u,this.commonTimeNode=new am({json:o.cBhvr.ctn,isSub:i,eventHubs:{global:u,runtime:this.runtimeNodeEventHub},ctx:a,parent:s,isIterate:r,iterateType:l,iterateIndex:c,iterateId:h,isInInteractiveSeq:d}),this.timingTarget=this.ctx.timingTargets.getTarget(o.cBhvr.target,r,{type:l,index:c,id:h}),this.commonTimeNode.on("seekToStart",(function(){return n.onSeekToStart()})),this.commonTimeNode.on("seekToEnd",(function(){return n.onSeekToEnd()})),this.commonTimeNode.on("timelineStart",this.basicOnTimeLineStart),this.commonTimeNode.on("timeNodeEnd",this.basicOnTimeNodeEnd)}return x(t,[{key:"getTargetId",value:function(t){var e=t.id;return"shape"===t.type&&t.txEl&&(e="".concat(e,"-txEl-").concat(t.txEl.range[0])),this.commonTimeNode.isIterate&&(e="".concat(e,"-iterate-").concat(this.commonTimeNode.iterateIndex)),e}}]),t}(),cv=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t)).isConflict=!1,r.activeWhenConflict="next",r.startVal=null,r.updateStartValue=function(){r.timingTarget&&(r.startVal=uv(r.timingTarget,r.json.cBhvr.attrList[0]))},r.onSeekToStart=function(){var t=r.json.cBhvr.attrList[0];null!==r.startVal&&r.timingTarget&&sv(r.timingTarget,t,r.startVal)},r.onSeekToEnd=function(){var t=r.json.cBhvr.attrList[0],e=r.json.cBhvr.to||r.json.to;e&&r.timingTarget&&sv(r.timingTarget,t,e)},r.commonTimeNode.on("timeNodeStart",r.updateStartValue),r.commonTimeNode.on("timeNodeCreate",r.updateStartValue),r.commonTimeNode.on("timeUpdate",(function(t){var e=t.duration;if(t.delta/e>=1){var n=r.json.cBhvr.attrList[0];r.json.cBhvr.attrList.length>1&&console.warn("this.json.cBhvr.attrList.length > 0");var i=r.json.cBhvr.to||r.json.to;i&&r.timingTarget&&sv(r.timingTarget,n,i)}})),r}return x(n,[{key:"modifyAttrKey",get:function(){return this.json.cBhvr.attrList[0]}}]),n}(lv),hv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},dv=function(){function t(e,n){b(this,t),this.math={pi:Math.PI,e:Math.E,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,ceil:Math.ceil,cos:Math.cos,cosh:Math.cosh,deg:function(t){return t/Math.PI*180},exp:Math.exp,floor:Math.floor,ln:Math.log,max:Math.max,min:Math.min,rad:function(t){return t/180*Math.PI},rand:Math.random,sin:Math.sin,sinh:Math.sinh,sqrt:Math.sqrt,tan:Math.tan,tanh:Math.tanh},this.timingTarget=n,this.val=e.val.value,this.time=e.time,e.fmla&&(this.fmla=this.parseFmla(e.fmla))}return x(t,[{key:"parseFmla",value:function(t){var e=t.replace(/#ppt_h/g,"(".concat(this.timingTarget.design_ppt_h,")"));return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/#ppt_w/g,"(".concat(this.timingTarget.design_ppt_w,")"))).replace(/#ppt_x/g,"(".concat(this.timingTarget.design_ppt_x,")"))).replace(/#ppt_y/g,"(".concat(this.timingTarget.design_ppt_y,")"))).replace(/ppt_w/g,"vars.ppt_w")).replace(/ppt_h/g,"vars.ppt_h")).replace(/ppt_x/g,"vars.ppt_x")).replace(/ppt_y/g,"vars.ppt_y")).replace(/#/g,"vars."),["abs","acos","asin","atan","ceil","cos","cosh","deg","exp","floor","ln","max","min","rad","rand","sin","sinh","sqrt","tan","tanh","pi","e"].forEach((function(t){var n=new RegExp("([^a-z])".concat(t,"([^a-z])"),"g");e=e.replace(n,(function(e,n,r){return"".concat(n,"math.").concat(t).concat(r)}))})),new Function("vars","math","$","return "+e)}}]),t}(),Av=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r)).value=t.val.value,i&&(o.fmla=o.parseFmla(i)),o}return x(n,[{key:"resolveValue",value:function(){return this.value}},{key:"interpolationFrom",value:function(t,e,n){var r=t.resolveValue(n),i=r+(this.resolveValue()-r)*e;return t.fmla?t.fmla(n,this.math,i):i}}]),n}(dv);hv([Pf()],Av.prototype,"interpolationFrom",null);var fv=function(t){A(n,t);var e=p(n);function n(t,r){var i,o;return b(this,n),(i=e.call(this,t,r)).value=null===(o=t.val)||void 0===o?void 0:o.value,i}return x(n,[{key:"interpolationFrom",value:function(t,e,n){var r=t.resolveValue(n);return e>this.time&&(r=this.resolveValue()),r}},{key:"resolveValue",value:function(){return this.value||""}}]),n}(dv);hv([Pf()],fv.prototype,"interpolationFrom",null);var pv=function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),(i=e.call(this,t,r)).fn=i.parseFmla(i.val),i}return x(n,[{key:"resolveValue",value:function(t){return this.fn(t,this.math,1)}},{key:"interpolationFrom",value:function(t,e,n){var r=t.resolveValue(n),i=r+(this.resolveValue(n)-r)*e;return t.fmla?t.fmla(n,this.math,i):i}}]),n}(dv);hv([Pf()],pv.prototype,"interpolationFrom",null);var gv=function(t){A(n,t);var e=p(n);function n(t,r){var i;return b(this,n),(i=e.call(this,t,r)).value=t.val.value,i}return x(n,[{key:"interpolationFrom",value:function(t,e){return _p(t.resolveValue(),this.value,e)}},{key:"resolveValue",value:function(){return this.value}}]),n}(dv);hv([Pf()],gv.prototype,"interpolationFrom",null);var vv=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t)).isConflict=!0,r.activeWhenConflict="next",r.startVal=null,r.vars={ppt_x:0,ppt_y:0,ppt_w:0,ppt_h:0},r.keyFrames=[],r.isColorAnim=!1,r.onTimeNodeStart=function(){r.timingTarget&&(r.startVal=uv(r.timingTarget,r.json.cBhvr.attrList[0]))},r.updateVars=function(){var t,e,n,i;!(null===(t=r.timingTarget)||void 0===t)&&t.ppt_h&&(r.vars.ppt_h=r.timingTarget.ppt_h),!(null===(e=r.timingTarget)||void 0===e)&&e.ppt_w&&(r.vars.ppt_w=r.timingTarget.ppt_w),!(null===(n=r.timingTarget)||void 0===n)&&n.ppt_x&&(r.vars.ppt_x=r.timingTarget.ppt_x),!(null===(i=r.timingTarget)||void 0===i)&&i.ppt_y&&(r.vars.ppt_y=r.timingTarget.ppt_y),r.isColorAnim},r.onTimeUpdate=function(t){var e=t.duration,n=t.delta/e,i=r.keyFrames.findIndex((function(t){return n<=t[0]})),o=r.json.cBhvr.attrList;if(i<0){var a=r.keyFrames[r.keyFrames.length-1];r.timingTarget&&o&&o[0]&&sv(r.timingTarget,o[0],a[1].resolveValue(r.vars))}else{var s=i-1,u=r.keyFrames[i],l=r.keyFrames[s]||u,c=u[0]-l[0]==0?1:(n-l[0])/(u[0]-l[0]),h=u[1].interpolationFrom(l[1],c,r.vars);r.timingTarget&&o&&o[0]&&sv(r.timingTarget,o[0],h)}},r.onSeekToStart=function(){null!==r.startVal&&r.timingTarget&&sv(r.timingTarget,r.json.cBhvr.attrList[0],r.startVal)},r.onSeekToEnd=function(){r.onTimeUpdate({duration:1,delta:1,isReverse:!1})},r.initKeyFrames(),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r.commonTimeNode.on("timelineStart",r.updateVars),r.commonTimeNode.on("timeNodeStart",r.onTimeNodeStart),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r}return x(n,[{key:"initKeyFrames",value:function(){var t,e=this.json.valueType;if(this.json.tavLst.length<=0)if(this.json.to){if(this.json.from||this.startVal){var n={time:0,val:{type:"string",value:this.json.from||this.startVal.toString()},fmla:""};if("num"===e&&this.timingTarget){var r=new pv(n,this.timingTarget);this.keyFrames.push([n.time,r])}}var i={time:1,val:{type:"string",value:this.json.to},fmla:""};if("num"===e&&this.timingTarget){var o=new pv(i,this.timingTarget);this.keyFrames.push([i.time,o])}}else if(this.json.by){var a={time:0,val:{type:"string",value:this.json.cBhvr.attrList[0]},fmla:""};if("num"===e&&this.timingTarget){var s=new pv(a,this.timingTarget);this.keyFrames.push([a.time,s])}var u={time:1,val:{type:"string",value:((null===(t=a.val)||void 0===t?void 0:t.value)||"")+"+"+this.json.by},fmla:""};if("num"===e&&this.timingTarget){var l=new pv(u,this.timingTarget);this.keyFrames.push([u.time,l])}}if(this.json.tavLst.length>0){var c,h=E(this.json.tavLst);try{for(h.s();!(c=h.n()).done;){var d=c.value;if(d.val&&this.timingTarget){var A=null;"string"===d.val.type?"num"===e?A=new pv(d,this.timingTarget):"str"===e&&(A=new fv(d,this.timingTarget)):"number"===d.val.type?A=new Av(d,this.timingTarget):"color"===d.val.type?(this.isColorAnim=!0,A=new gv(d,this.timingTarget)):"boolean"===d.val.type&&console.warn("not implements"),A&&this.keyFrames.push([d.time,A])}}}catch(t){h.e(t)}finally{h.f()}}}},{key:"modifyAttrKey",get:function(){return this.json.cBhvr.attrList[0]}}]),n}(lv),mv=function(t){A(n,t);var e=p(n);function n(t,r,i){return b(this,n),e.call(this,t,r,i)}return x(n,[{key:"percent",set:function(t){this.uniforms.percent=t}},{key:"transition",set:function(t){this.uniforms.transition=t}}]),n}(_l.k),yv=n(116),bv=n.n(yv),wv=n(117),xv=n.n(wv),_v=n(118),Tv=n.n(_v),Ev=n(119),Sv=n.n(Ev),Mv=n(9),Cv=n.n(Mv),Iv=n(120),Nv=n.n(Iv),Bv=n(121),kv=n.n(Bv),Pv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAr5QTFRFAAAATwAAOQAAZgAAKwAAPAAAPQAA7AAA/wAA/QAAugAA5QAAsQAAwQAAsAAAfwAAawAASQAAZAAAOAAAJwAALAAALQAAqQAAiwAAmgAA5AAA7QAAtQAAhQAALwAAfAAAXwAAYQAAigAAuQAAfgAAswAAcgAArQAAqgAAZwAAaQAAMgAAGAAAiAAAjwAA1gAA6QAA+wAA7wAA2AAAbQAA2gAA3QAAuwAA3wAA2QAAxQAA0QAAzwAA0gAAXQAAYAAADAAADwAAGQAALgAAjgAAcAAAzQAAwgAA+gAA3AAAGwAAoAAAowAAcQAAVwAA1QAAIQAAWQAA5wAAsgAAuAAASwAAbwAARwAAMAAAnAAAUQAAaAAA9wAA4gAAPwAAbAAAOwAAlwAA0wAAjQAAvAAAwwAAkwAAQQAAvgAAnwAAvQAA0AAA2wAAwAAAWwAATQAACwAABwAAQgAAtgAAgwAAvwAAgQAAlgAAEAAAxgAAtwAAmAAARgAAjAAAdwAAqwAArwAAywAAYgAACAAAmwAAHwAApQAA8QAAdAAAbgAAFgAAgAAAogAAewAAXgAA6AAA9gAA/AAAzgAA3gAAkgAAngAAdQAARAAAmQAATgAAUgAAJQAAIgAAqAAARQAAPgAAxwAACQAAAgAAMQAAiQAAhwAA4AAAUAAABQAAeQAAygAA9AAAFQAAVQAAyAAANQAA4wAAKAAAWAAAZQAApwAA4QAAyQAAXAAAkQAArAAAdgAApgAAHgAA8gAA/gAA6gAA8wAAFwAAHQAAhgAArgAAnQAANAAASAAA7gAAlQAAJgAA+AAA8AAANwAAJAAAHAAANgAAkAAAKQAAoQAAzAAABgAAFAAATAAAeAAAAQAADgAAggAA6wAAEQAAfQAAVAAA9QAAIAAADQAAEgAAVgAA5gAAQAAABAAA1wAA+QAAUHExBAAAJDlJREFUeJwlevk/lPv7/2XtOrKNsWcbzGCMJSmSpSxJZtQkjPEOg5mxRWns+xpZyr5ECGmcLIOsdVK2oyJbcVI0J8fp/Bff2+d7/+BhPO6Z1+u+ruf1XF4GAEAGZOXkFRQBTiD+dgKVTiqrqKqpq5M0ZMmaWtoAOrp6+qcMDMFIzdiEYmpmbqJBpVlYWtFJitYMG1sbFTskLvvTDmcQHM+ec3ImXp13uYCubvB/l7sHkC9eAk8jcy9Eb5/LvldQzQ+v+jsw1ZAlfwYDAK5dZ98IvIlBwXRNXVYIJ9TpLJUb9j9LvBVOj4jkRVGj/Y1i8AwiH09eEwhjMU4uXtsiAWLlqInMcLh+28okKRnuhNy945lic0+Uqu7NdErDdB/5DBo7MwuE4J+dw8jIzcsvwEIUFFGEisWQm1ACpcZlxF7vl1c8YMCJyqrqGio+fFRbVw8NjU2uec0isNWhVuq2XMPzmjcRBVHhSWCtXaPR2mZoybHzL0TUfmxPabeR6yg/+6QTY83VQNOkSwkbumsgkgzwtKe8tDdHYM7ts3sW1Q/Pn3PEWaGmYjoje+B3ewx9bM4V0LNfDB5XL3/o5v1hSBi5fzvQkQESOkQOwiiwI++5YBdkDjFIrKEx3cZK4Ti8eAlZpjcnYMSHKG0ygKKVeFSLRpOZNL9p19Ku1Q9enKlp45lZiQGr7hlWS17RKWp03mv8481cQnwBUNTAXwIUeAvsJwCCTnV4FyJC9CrKYDnOT91DpRZSG8Bsn7pAw2Ihd7Hn7R0hynXezjQcvQTyMGgUjV12kiW75XaR7Z9OK9kD0/j6ckfyk/fcPHCkvkz48NG/r3p4FeRpoQa9JA74sJAOcLubirEPqXqTpZ1hNzUN5exoNVbk5RmSOQqcJix5yWvvRZZ9nyay+tqAsb6U76oAwo3wgXvJkK6sCpOYQBTIdT6cg92rSxWh16pdV2c8NnDzfQhveqvND4k6aAB0ssWnHuL2yZQ7AHLzJTgUrreyZeWewhawpw1RMDWYHLP1OcNQgKzwlKVP5JV5crB7cZ+NRJ6AB3wx/x3RsEufEkozLu+g7+zkekfLbFQo8byEubp5ld7Ot2CQKxJ7qguZxF4SB3ozQF2pCEIbcaFxg6eAr0/MbeHb1DCK+vQCA3j4YTcwjNiWyEgcq1dRlfnXsq31K3hhhvNX/CYM0JC+asxk91d+7ahTr6AAaTAn3U2lTBfjIc1pr5VEX94yw8uIZhWQVAHQj66iLErxDLqNmN0wuO9hYf6FN+boQb1FjENYJAiWKrru2ejWzoZX6M9A91p2Sw1TTRT/rdDQsyiOT1f6br4fKm6Fpeb9qocNfvYOLPAuczuA5BTbeVT2O/ghlkYEScGHX0Df3StfyMT4iYHCTEQTLj04iWePVx6aomPYGLc08OXB+drJLqoq42/wXqB5eagtaqR+ZAPsymG8utBxt1rO8zFTPHITA50gCMQ4Gw7tQBZFo0DBsWb5ExlyKoBbvRAO7jdv6U8jMYne4Y+iWXmg53gvbNYsGg+gU3elEnaeXB/ufFUKJiyZdNZemo10NviBxr65KE1k/Rijg8KTan5647eoiJQAYPIL+9fuHPb/VSMucg/bcJHzKt557SPRYF8voq1+2SIWmSgQCZo2ZjhlymMigEZdZQ3MzX6wmmMTECwNWieLpWDlKihSZ2sVVwNX9AmecOXtMHP7C/WwPzvKbZqiJIYFZ7PuZngFJmNi9YatOLLQU77vGbS6PzGdsQVn/Ad7nQyALeZVbm01GA72t5bvR/aWTWVIIEVDwDJanzjqAc8QuFl4Yr9/2WTdPVPmHCtY7ZEZ4mJoDqURsbWcaHwtmIqJWrIXshpck5ilsHlYM34YFFXTG3dGzKrDMBxB8gsDn7G3bW/TDpe51ALDmy5KQW8lUgg4guspE7TN7wCTbFWnf7gBB16vuHtYoXsWo14j1cD9/Z+oyj5GF95jqI9KG0s6YtJ0N0jtISrVAZQcIO251QuKrBIaH7k2hLK/Mw8pyNmCnott3tGm6XjT9DsZUps7H8DCHwjc731hFRtTaF2UQ572Ca4Qp/On0RVdmFD0A219YL4DcFBN/lnfBvNr12E0W2MSZatepyNLVIbbFIg7jaYfoR/4W1VUKqL6zsF4NpNiq4orZEhCEjExd7AQ2j+B6GMOPmekeA7+DsM0IAsIqj31xrtAzvWqBsjmIWC6+uBONItM9R+HA8rGHxptX9JAF/G0L6QEiy3McdFEhp4+YNA0FHNwnW0/RFFEtwHRb/hwQsbzX/heYihsB6nNVJssfHnqQe/acYKMv8LqcRe7aEF7Y6ugtWxKLILeNmlzVF277PqxIg8dSxpo5gsaMBFxfgwvdWBhOvzOHHHzx4JUHLNpyc8LUzkLcfiIv3A2jQxpeQ1iL4IKUJ1dTmigtKLpgi6QjX2d8ISbHl1B8bH0UEbnI2DMVm5h4+6Ko+kTd3VVSVPGkpp4/p+BW7/faCjBhlD7MoDqRpcOJxz6lBe8gWYtBP80qaKf86k0FP9L1ziS+Y1m8MPaWpcD8BXkG2flILIvKvoC/hr8upkS1N2pwbQD5NtZmC6iNb2JUVJTRDoZxTXibAjQDp3w/y5Bhld8zynk7OU1S3S3LPnJLvjhzcfUaKeYeJwtkmPDDbYpWt0gTaf8e/gL32vUwV1i7lHVD65CN0n+CySLiHLZfbSx/XYollUUj09xeL/Cjqg2DUp2eM7igsEZPyXlnve63tfjYjZSbBwtUf7mlAhvX0N/CzxFIKE25lol9uEzuf4B95AK6EAVtXBSn3XGA6bVuISAxQuuFKTClSg4xz/VEivy43BYA1UY4x7aSd/i1RMdwdgzi68x0JEYIfLBbEMag6Kcur0R3WGGtXvT2744+WPE4QaWz1rrbq5fEmwQTMwOLPRNs2jAJiPTPpAjXA48lyGNDo/aEnNyEv39YQtTIKcLY2gVw/SWl2eGCgmvgRKcowIU96xWM6PvyJhk/4dRHbP4A2JaG+uq0xb1J15Gaa++VgngHKhh3L3grVzTsa95kyjw3wgZLYViuASK6smRQA8Ds39GAisCnrN+wiGik1BsIZfpFhk9aVvJNr+pUWJbSmxoOAqRzseBsHsCPJ+9EvFA6HLDuymPuB3VbLuUAeRzs5AnmhdV52drj6JdA/9JE6GEWqDZIrYYlrYCDM7hLcefRsAoFiZc4P3tYx5qFsH9ttFzAL0L/lgSwvjbS4Hlik7xGLuSVfejKzFhvtnHF3039B8VGq1UCpg4+cLt0KMDi46N3M5F9YWHiD/InKc21mDdj2pCGZNgqLihu2j14oFnH9dxycOd1FsVBZ+cMEBkuu0U7wwPJEfc9SWATH9MuG0EvfyJPxuf9enmuy3ipIOtB/Tq8fRSfpzQFs03/H+7yBgpxgsOgaPD69B90NfAH5SMhqmB4xns1ARtQlmao4VcBTRTDeuo6wPwzlIp/AQcGagk6KNOsPIQxV8P+wi/EIUDDVLWFGWvjTzIZnkLRH1UoJhWpXMTjPAjt3UAX17p6WGAJwxrWKi26AC0+gNR2jzhlwfEJrgvQCombOyaY8/bLwB9fMvueMLQvWNkBKGC0lq0Ht3KzP5jCcE4StVpESb3tdp2iHeZtLDMQ26rGa6n0GpULC4tIz4jBBxadsL3wHdFQPwahEAq1xR5rwJkcKwXQrx0f6F7awZw4fPbGa1gUiXJVpYOUgng1Il6/kdwHeGfQlS+PdZEZ/WbBBOmQjvC0LG6wpXRfApSSh5UP+GjCtGd2HwGkHtuvHkJDGvpqBlcXLXap5CKR9eJRzlgZ8W4zK891g7/yQl4SpDRz5B6E6FEUxFv8K/4i/p8Hn1DOZxLx2FQHi3X/cwgM0LCK+TZnTMszAMO3JUIXyO6zOQNiThG4OXOrwJNCE8XwV95JJ175KWLydZwJE882VhaOGyWMiSKcP771g4kaYKUFB2Dmz0JUdUk75Pplh8T7VBZwUY90zTpUDwWxIJNQ4p3+oSPgHVcJUQVskdpHklpVCunu2AMvq7HI2HuekbnizilxbZeVzVwQLUBT133fJUvswkKMu+OHgCDmIJX9+b8TDTiXIyTQUrXPXFm5NsIOF7X6snH0GkbLAqxPlJ9ecWoX5Ywy8Vl/GgAlgE21JAfp4T0F8NwItrDq/BXLuXDsET46eLTOOKK5svMyhZ3Ah1ePwHOvYdijiwWbAEJnbIP5V95SOcbXM43qIJm+5G32UABbhvaNNvRffVynh4jmDDQ3V+XtC1dHWnr5PFwd9Ds2UdVaIEHmECBo9V1OAz0w9Q7ZONc7xXtF+8+ETCmmX+G7+2+flmEDTEww2Dr5eQAbJggPltoLQ9vmismCRLQYIvSsXqDWOIS85DgRSlAhWjGdOxACJXNVdyGoSxA1lu2eETiYQrdn23iL9SxSRCa5LgEX0CruBRSxHIQWrdV/mq5qOUyNgs9QUYv+xsmlhwRichkxSqZko2RwH46USV7CUofNLnT23rewuaB+3Y+8g82zzjibgmdChhbQRFk34o/zPECaRHy7wKj5wlFDE8H30Jva81PwVlVT/UNLeH5C/T9cIDrBy3capubs5y2F7ATbAwpRvThn7BsaBvwbu0BBMDxHEtAsSE3DVOdF+kWWcXsfX3AFYeWSbrZP/TS/H80MGryotBYxj1U8rWXomZeevT+aQ0crFNLeulQLpiCr0J3rB5jTS3MR+wbSYRJirC2/5eEGCMHpzOUFWEplMsWaW0SVaCL8y8rZVI4hiy4qyEC7CW0YwNHTGLxvJ2vW6GNMctZQNF8YFxN+y/di6ENOZNtphmlCkIZsU3uvDqzlidm8vQCrkUfzYk6D4AYr6tk+mccy/i8xBKFQzibM/wWTIysZ6cDt/XhySBb1niUMBJRN+ILdWbj7Z6dnUgLZELPYXWeyXNhzV48NvUbAWzWEC0lD8PwVIGTt6rveS3h3gX3XiVRg1O5poRFvgPCL17nEx324dKJT5AC5OU7RFWXuEp0U1v+MRgY7mxikdoB4lle086YyXrr61aA8eVem+VOaY1TKn/sOxOeRhIcR4AZLNrygau7faIG/T/vTPO010Kbci6K9mAYPE3+D/Q/02VDHhOfPxxTud5MF+8KsrdY8Bw4TELjh26cdDiBfCo2ptEyDRsJrRk1KZcvgta3ckuK5CRPn7AxcptUHMpozoAU68b9ElVYL1uhaVz7RTJwRJ15W+0X8HZs7gUMi9wPAEik099Y6ilYhW7j1KNLmlFXlRwAb+NvU+PbN1AfHY1t+/sN4J1JVfn7FDYLloP1Scsg9GA3s2b6XMPgHYNbve6n3ghsmK0WGyzvNrCU7t0veADh7RGOKA7vXwYQc0uuPZMJMUQMLbBdz+2kFzkStJJNFEvH/f/cT1wnXJfsflkfnn+qJe89nGfU5c6Fpsd3vp8y31fD+eHg8uZSYXdwqcoBT9DS0aTRKoaZrdSqk0KtkFZb4+BBqXAnpKdyVLXBuP5clrK5wxSYyIWrghPCaNnLhJkp/A3x8fsMgMczROQeBhpGULvpU+ZNQqKLZQMr2c5uvEvEMHOemnBn5rN1M88Y+/TkhOxUIBP/2P2jr1+oIelfW2KEQFOnrjfGzrGWUsS6YsjIBTxTDwc64bw+fGhfW5AnvnpxLYAJDBm2lJ6rvaNZZMrsfTANYByHtYSbJahyNwhmaepqjdIPb+zS9jVAgfRHPZEjU1Gd3rhA/5cI2/I7HkyV/yE2rhd7VLRC+6h3nRnBwqHqGw2HNB46i9yPFIYrAbBjbP8Xiw3DuyzbyCf9d4TVDRcSKQussrgoejwBiAjYwZi0qcQK8KuYyotDvMBHuWgDgNhVUXyHsaOlkxmK4H0+NoRd5BhMX9v+E0DX3JzZF4fOt9EZhbDdj5dngkuAUBvofWKvSxgvWN/JXhGtuib/SxfY8KRQCXuP9M9m4RKN/YNl9WjkI76xL/vI3tkUW8UwNyBJ97wf3vZkr8zgZWjt09M51pPhhhhIa5n7iOjQUKxcVfAILZl0T4jc7FxaD1109JL9Ca0sSBbrEuNCQcFBiIv+SZSJPYe/1EYItPw54SrCk2fKxMmvjDJ19ORWT937dR9t2yrEWeJCbBTuaVFvARwhlXYkVrmPmMoeHL//5uHAvRj2Y8axOXO33AUsW/qXsBWn9CxkKIYN1C7xCb9tfTfE+3+m+utf4yM6L/i+ic02U8cQ2F98GKWj7KuD2pLDXkPCLCOzaCvJfwOemmSw+9kphfUY4yI+yj5/MmQxX+dJTNMaPNhkZY4Wbc3tEQKBn08wseAkoa6qqIQUIOD3kPmDGdgoM1ToC4KklkiDUBk4Uk/Fidp8zCJcFBMgHj+etTxbRFeHvwhf80CiSt3z3DIFYl6k1lWLVvRBn0lpMVKj6PITC0tar9jbVAPhHP8k4rhblOqCcOdqrAPy67Z1WL4TfMfVx0GLrHQJyH8iQUus8lkFKuv5kcYrNvW13YfKuZ89ORAmC15BmyKxBFilYKq8dxQRWdqGLLb8Rij6WrIs7/mxVyFptbrarK6uDO1v3yxzOWQjtaz2W/01pTvN/Omyfx8D2VGPK80olW8HfnliYW8J7UjIcIlewB+DJW6whrBEqHlPOAQ8W/xs1Hn5GmuasOM+K9M5T9RYI+PMwnvMsCTG6r+dbVXfMESA2YjneGLq0D1CQv4w2JrzNXBsshiH+QHHQa2Mr/AZ4I3FCYwSF30Bqgti3TOnZKmjAfxUANcv/0JqQQ2HHnOhMOwJodHns6/25Jg743Q1lQ+KbmEPuPq51Bt83snYTH17IxKtNv2roT2epeJDTPX4a0X9SZHNHJqSie0RtRDgKb5JGNRAJr4h2aypQVI68DWseD13hXjPfFQtgcpsWw3+bHWbYNMQ5bN4cjo9d8aBirB8/oJdnePZQoxNeCAZZbotwjOCA0wROeUdcuZjnmA4UdjXjcB5b5xb9AZYmwdFSH2DdhvscW5z5QnIMnYTFRngKajbkSdjvvVyWw6LwIJWxlYhshBPGlg4xDUFZOFLf2UlA4MUe8DA8TIea+IX2smNzuP0vmleE8ArQR+UsNqTqekrljgz0+vhX5+FaB5qs3t9J5cPuwScX+MPS/UkluQXNh5WrJFM9p4CGban0P71P43YKxglb2X+cyKQ94h/diX4v9RaCpnBsnLBEiBNo/0idpiYrznuGrJbXrCBGfcS8UOZNOTvW4hnUTwJkuVcBHodNx3R8t5LtTDmf9/EmsNByWOE4XyHplSzut+ilAlOYAW6FAoMlRP17j9CYvp40MImU7d5GfS2Drx+GW3yciuygcSeJPwW0wzd8Jx7iITtZPchNXC6aPAtKQrB2xa8z53r/+NXr2nhyLPFySAhSY0IYOQBgKT6h3kSWUhtwoeuSh11H23xn6OOue1lRwSZFtnWn9cdSaaEGqWp9dYsa7+ChyZcubQzxJjXzXLk9h89vBXfZGDIlvpsP4QIbmPMjqxhqsBfefv19nkI6ATGqFQsHNSKV1bi5RDhNzYOR3Ckunra8gfjADKT/ll0bAtT+Gyj2d7NLfv1oX/s3Dxbwcs6upK916xmn4Cn9qoUPECeybc02KdxfxGRB0zT8l0Zikliu1neuQQ0TmnzytBG1jCdcA7AUAfwLbEnAjIqNRI/tr3AS3HHzaJJ1AVHLTuHM72nkWqYVDDf+j66wmI+h8Lmvxl4OGEXnX3JOrwBz08R7ELtwHigs810rOj0viiWN/+sC7Ni5oBKQ6bZk8eHN3PYLZzQgVjEb5jNex3lMrEC0EzpQ3faNx4xd523exujDDnuf5ZP5S7v7/UuKqkqW2X94NfxXy7549ho3WWi6n1Vt7ABUIeJc5cdqWkRZrf4aNACabeODzxEINKtnW6CGh5734US98i9pjARiQfrdT+ax6iuaQ68hRSbykUQcJUr4DoFBkm4wgd2hq4tBIt5iGqkmIYjIK97X2Ac+y7Al6Eas2r5VF3EkYVixIGsqzlkm0RXA05xqwaznFZjzk8V80Y+iIDhMyNdfSpEMp3IheR2cbKGSnSfWK1HK5rU73te+Y+mp46Jt6oD3xe3/MKUzoD2UBzNmu3iQW2uCJHd2ne9t/x3h7lnn4kBxCEAK//UgVlyjyz9W5JHgDWu3g3OlGHBZO/680MjgZCrLsuOfLU+5jPl2Pxck02uqzyqmPlhPA0isbdnhRis6Qh/S179zV226tq30IMf1KqJ+bHgSCHhjM64dbIL8GGt21vGOEXP+/AJcER6NjIb286TKSzTCCidNp6Zf3rpsWZnG5dNhuEqU94Fd2sYHaDOgM3A3LO9nxQazFRTOJsT7cD4eScDOsG8UfQGqlmCqM7L0/3ZpnWylRSPqBu/B+eHEfYNZO+0QTaWrYVbLURYIK4TWR8iESRGfHHQWgthnGCFSR6XhpDR2Xtq0uhr2QQvOUVv8Giw6ImYIgOdd8OPo1dxm1hQCQV84zTzso6krY75wTfRjcwV5Geb/tJ4owfFd8kC7FDPX9B9mBYVZ0zuK21vYoVpvazdgKlwKfwFKZSgPgFfDQtTRYNOvy6JNZ7OeYCWEFJq/hygT5KPD9mIbenEBsAvHdzCG/K5iPb4S4aP/YhnMDJHIP/icNM6ztIK9gkRRdA71nyoMef+2jb3neklwx0pHH2SIdKb2jwOWG3JCmYK4Iva+7eEG0a3If9Da4KaFAGMYlTTCfFBFSoyK7YMSwyuICgV8M49c7bf4VqtKi5LOaLKCJlVZ5zBpLrIr9LvsMNctO/oiM3ab/MknNJPPbnirNLPbGflQrRr2aJJYXg/QIsh8k1PXzz+z9w5gIxiXea4P0RlO2OUDqhJdvv8EBpRLy6Z9p8GR+FFKgDHcGsMkkbMnJz0q7hAhDVdF3sCfBM6hj2P4SlE5njIsBmSky6FhkNYd2UfgLt37a35+BEvupCA+Jh5kmC5dWaGeQNmz35EEQvhwZG3qxKo/RZr66hM7IJ5Won7gh78anK172Zt3buKAMKyMDjzdR9ufcCZ0zU4DOA5RKIgkAMTbytB3LQFlT5MH/An6qfRJPjj2dg5WFP3mdlZkwFePrA+3eN2Wu0A+WAFKZrztzJRibcqCweEddxU/PSGWxOnjHtOUDzfDk9lEvDDj39cFH1E9dVeQLGVI3Qgeo0M34dZ6K/3cb9BBZcZf8uS+BivagqBuLW31L60FMADuX1jiTur3n1ZrBrIgpkFO//0OmyT9qWthHcnwzLRswTdDbgUflRNCAvfaODDSX8vQLo7QBDltK42Y/OdFbS1zUYFLv6qSiV43zDiUrcAtbEqoMVBPa37+RMTuT1gmrJVH1qqYsi12cyakNWPLrTGqg9NO1KY2vPwISkCnxobu6FodJWlXUwABhb1LwveepTps6Tt0E8j+tabfLiI+MdLLWSxLqA1cJON1hz8aZkisUWXUMhNOQpLrIR062CCV3Bg0ZwlU9OhbKefT1NjDog/g2q+TAW89zQllayE0d/y9qAdSAucb3iKOXZYzSSmdealQNS1IL3qMUpowYU6uuO7LEqyPD05MgXvXy6frzzrkpBXlAx+J30gur7J4OT/ziwA3fvIcKvLAHet4sqms0BCkZk6CKbyRPu8Xqwsv5KGfYcI4thniGI9nFwFwt1bfZm9racBom20+/R8n0upa1EAueM5b9A7lN3BE9empZqOTj5NkKNeCf630MV2jeKeEP8cImJ5W9l3gYGDg1wPxxZcmBvsZ4qZXUMim6a/M2jKAsHtYvPN1A0FsH3AAbpFvCxA200RpdN9ME2nSQL2g5pg9OIw6KkYT3gKe7QmWrItoXK1c/XBbJQ6pVOca2BzfQfoOCTygsFljpEPDG+tBLrte+jUDP2DcYKLisBjhgtTZnAmgmg8/Aus/awVIZGqScBZ1xa/82qG7rzT0BDLldEs0sP5HS8oNhU3lhDue5NS0TUt0T7YTZvSGH0HEYEs97dJ7xpNO1TKokYmLWenco4PvNEsv2hQ85pcgDjlA29jwVT9IoAcXQGCnhPG8fgYyhJ64NNzBiWf5p1XdoBx+xtXoPiVbK44FcHipEqTaar9/ruKsdneZuJmevOHPOjhmtvwVVX8Nmx+/eftj7gZmxlF3ocI/n5T0byPxzPfMi24AxSQeAGjdI3Q4hc5ffAT7v7F89ZNEgj6fheuHl2hjRQlG4EMMwpiAnsm1HT499a+zKPMejH0uAfnT4JyItDTiDQ4l5DoO/sQZ0HkzGpiM8KQNwaHk0Un9WaO+yuA1ZTV9z8Jm13bqwTlfNHncIi8M/kHQMFhMF7Imo2mUw/Sox7Bh3W6UplqvEiy+g2NvVzFPCtGkHSTLuFSL2CtGzpPY+E5O0PK3HSbUnBzNBZodkNnUAlch2Zk9/9F8JuAYBirgoVpE7QyheJ33WDOysDFYMSXBdm20XfXCWcGzsGyvXE8FJN7EadsGjIDzZ+GtIUEBWuQ6o87kaDvo4eplYs4dz6P06lSSCA0yAvpXKD1djjC8dnWdYtWsLpl4Fplhje74Y6i/M7VMSQnRvD54/CC4LPzx4vghhIOzVo6bLzl7QIHPvVyM/drqBBZ3tW1lYqvXfauRfH5WHe+RcHI+xxeqDECqJ9tdXLyy9L7RqxyUaZKwmlAux+zEzdzITSRlr36YuSm0LBhTpkivodWytR6BNULFxftqF42QqKLmoog9WlYNRb4GtNm93bHuxBvV5VcOUeY6N/9xDutwbqYhaN3rIzpg1M6XfrYctTdA5Msr2v4Aydmb+Nl2/Eqw+jSXYvctmuDHYUAei0pUc6E5N1bULPEjHAr+HI3gwDjpDg0nE2fMkXneCumq9ifZR5IKUOqn0aDIfN64olrhaHfV4msozkdG/3j5HHqsf5Els8kwvDrCaK4/BXb+YzYC00mJEOu8njPsKgB9dG+FjqqeToCsJKLTvHS+iQTnqFquCJ+yCckuDaHLnP4GzroGg7BelrYZWStEFay3j+vkEuXHy3B2zG5xBqSx+/pxoEOv+OfiCfq5QMCCNq26xXC+1DZ+eQdH2jJ9FXSh9yrISZTk56jTzMIzG9+Ye+pumQffxmh2lcvPXjmNWL3PoOgRpkx4o/TZzE2y3IMtEZNxpNUlBqFlnBVXuPS0TIBkF+ZfvW3y2bGWD14zb8Cju5+wiSW1pIIRRtD0DeaxOLIvup5BZ2R2QfQVx6ryHH4H/rls/fRJy6KIdsJ/qVsWrBZaKgKOhP0GOUjA16wS+vlpcmot72SIWJWQDwyiD04TLSU6LyObtnOC2W5QA0OCGXHtlTi9Cyh95AIL8UU6AaQOaDSDfuf3DbxO4065WUdqPZ6Zj9S26jGlhDs/3mX1c4h+to5J2UwvgO3dkFtmKMBF3OuQvskMsOO8R5FnXblT4zMUpkjhs3m1ygag6zQWKfFOQCFM8jmAFtaCpCqDX77xqhE3B99uGU3UT+41SufAp9fQENvgk5lwqneywazIE9IpGT8v23sBPibAHG34mLWiivxnjk8p2S5ofshihnLQd4CU5ABpVcMX/5Hg39Jm55k+hgxugBCGIR5KmY+qz6US5/wKYimBbjTOSBlyD9OiYpWxtoLH6PcoaUdK0dW4vKR121dfMwumvgSBf8g0fsVN0w8jbplh7Df1FVC9wZuTbZStSswGJu6IngHRvBgOFag8F3hwPVNuUYjxNngNURuMvnnOvway+3l+1sK7aILbzdSzAxUCtG9/CaaHsBFIVzMWEH7upNL6Hr6P+oI4i+VqT6NyQrYUMkRXYd2P1ZjEMDaJ1rrurxTBgTfMw9cZe8SHIAz0JA7jpgDmr+InVbg0HrkFNZVhQ2uBKn75tLEZwfMp2azBhkglsAXDPx2BccwTDGmnsjRDh2jHh9ynTQY4vLqcuv/NWRlP8sFHWyxSmm38ikF1UoTywoZL0oFE4I4ujqIcvCuo+0ABPohIMdyq8EqgTcogXcYNCGdgvytDCA/fwt2eG78+OAANOgmKkOI8WdjE3FaFdqW6rx/oOBunJoqMLOwnPtv67Cw7PY8c4jFvek2G/hk1Thivu5Pf2iV8YDA8DyziBPz6MKlF9XQlRt7ZRV09nZrygwo00ME7IpFuOiEsUrd14UcCvNC/DPkbFmqB1uQIg477mFiq2niVADUYnvdjiQPNpFfMTo4yg4X+tDW3rmH2WE9E2rY0ES40wM6QRwaQL5/fepJULkj3Zc6L1ItuWmO6zXbvou399GBCPcQwB2+rRpubsw03qWL2iRyHH9Afl/YHuFYa8v7zEXDEigXJo9RAtTM4BTzElQhSgePv55AmHTo4W9v4SmkPDlLIhOpcXBK4GO2AnyzeN0MaKP7umX9bZAfc5LA84bxj3frYCxezbP9KG7QeJzevIhiAU4p/j+y2OyMV2mxNgAAAABJRU5ErkJggg==",Dv=n(122),Lv=n.n(Dv),Ov=n(123),Rv=n.n(Ov),Fv=n(124),Uv=n.n(Fv),jv=n(125),zv=n.n(jv),Hv=n(126),Qv=n.n(Hv),Gv=n(127),Vv=n.n(Gv),Wv=n(128),Yv=n.n(Wv),Xv=n(129),qv=n.n(Xv),Kv=n(130),Zv=n.n(Kv),Jv={wipe:function(t){A(n,t);var e=p(n);function n(t){var r;b(this,n);var i=1;return"up"===t?i=1:"down"===t?i=2:"left"===t?i=3:"right"===t&&(i=4),(r=e.call(this,xv.a,bv.a,{percent:0,direction:1,transition:0})).uniforms.direction=i,r}return n}(mv),fade:function(t){A(n,t);var e=p(n);function n(t){var r;b(this,n);var i=1;return"out"===t?i=-1:"in"===t&&(i=1),(r=e.call(this,void 0,Tv.a,{percent:0,transition:1})).uniforms.transition=Math.pow(i,i),r}return n}(mv),blinds:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,Sv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="vertical"===t?1:0,r}return n}(mv),checkerboard:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,Nv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="down"===t?1:0,r}return n}(mv),dissolve:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,kv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).setTextTure(),r}return x(n,[{key:"setTextTure",value:function(){this.uniforms.dissolveSampler=_l.t.from(Pv)}}]),n}(mv),randombar:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,Lv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="vertical"===t?1:0,r.setTextTure(),r}return x(n,[{key:"setTextTure",value:function(){this.uniforms.dissolveSampler=_l.t.from(Pv)}}]),n}(mv),circle:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,Rv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="out"===t?1:0,r}return n}(mv),box:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,Uv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="out"===t?1:0,r}return n}(mv),diamond:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,zv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="out"===t?1:0,r}return n}(mv),plus:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,Qv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="out"===t?1:0,r}return n}(mv),barn:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,Vv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="inHorizontal"===t?1:"outHorizontal"===t?2:"outVertical"===t?3:0,r}return n}(mv),strips:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,Yv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option="upLeft"===t?1:"downRight"===t?2:"upRight"===t?3:0,r}return n}(mv),wedge:function(t){A(n,t);var e=p(n);function n(t){return b(this,n),e.call(this,Cv.a,qv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})}return n}(mv),wheel:function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,Cv.a,Zv.a,{percent:0,transition:1,rect:new Float32Array([0,0,0,0])})).uniforms.option=Number(t)||1,r}return n}(mv)},$v=function(t){A(n,t);var e=p(n);function n(t){var r,i;b(this,n),(r=e.call(this,t)).filterType="",r.isConflict=!1,r.activeWhenConflict="prev",r.onTimeUpdate=function(t){var e,n=t.duration,i=t.delta/n;if(r.filter){r.filter.percent=r.commonTimeNode.applyTimeFilter(i);var o=null===(e=r.timingTarget)||void 0===e?void 0:e.container.getBounds();o&&(r.filter.uniforms.uBoundRect=new Float32Array([o.x,o.y,o.width,o.height]))}i>=1&&r.timingTarget&&r.ctx.clock.setTimeout((function(){var t;if((null===(t=r.timingTarget)||void 0===t?void 0:t.container.filters)&&r.filter){r.timingTarget.removeAnimationFilterQueue(r.filter);var e=r.timingTarget.getFirstAnimationFilter();r.timingTarget.container.filters=e?[e]:[]}}))},r.onSeekToStart=function(){r.timingTarget&&(r.timingTarget.container.filters=[],r.filter&&r.timingTarget.removeAnimationFilterQueue(r.filter))},r.onSeekToEnd=function(){r.timingTarget&&(r.timingTarget.container.filters=[],r.filter&&r.timingTarget.removeAnimationFilterQueue(r.filter))},r.commonTimeNode.on("timelineStart",(function(){r.filter&&r.timingTarget&&(r.timingTarget.addToAnimationFilterQueue(r.filter),r.timingTarget.container.filters&&0!==r.timingTarget.container.filters.length||(r.timingTarget.container.filters=[r.filter]))})),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate);var o=0;"out"===t.json.transition?o=-1:"in"===t.json.transition&&(o=1);var a=null===(i=t.json.filter)||void 0===i?void 0:i.match(/^([a-zA-Z]+)(\((.+)\))?/);if(a){var s=a[1],u=a[3];Jv[s]&&(r.filter=new Jv[s](u),r.filterType="".concat(s,"-").concat(u),r.filter&&(r.filter.transition=o))}return r}return x(n,[{key:"modifyAttrKey",get:function(){return this.filterType}}]),n}(lv),tm=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t)).isConflict=!0,r.activeWhenConflict="next",r.startPos=null,r.onTimeNodeStart=function(){var t,e;r.startPos={x:(null===(t=r.timingTarget)||void 0===t?void 0:t.ppt_x)||0,y:(null===(e=r.timingTarget)||void 0===e?void 0:e.ppt_y)||0}},r.onTimeUpdate=function(t){var e,n=t.duration,i=t.delta/n,o=null===(e=r.path)||void 0===e?void 0:e.getPoint(i);r.timingTarget&&o&&(r.timingTarget.ppt_x=o.x+r.timingTarget.design_ppt_x,r.timingTarget.ppt_y=o.y+ +r.timingTarget.design_ppt_y)},r.onSeekToStart=function(){r.timingTarget&&r.startPos&&(r.timingTarget.ppt_x=r.startPos.x,r.timingTarget.ppt_y=r.startPos.y)},r.onSeekToEnd=function(){var t,e,n,i=null!==(e=null===(t=r.commonTimeNode.json)||void 0===t?void 0:t.spd)&&void 0!==e?e:1,o=null===(n=r.path)||void 0===n?void 0:n.getPoint(i>0?1:0);r.timingTarget&&o&&(r.timingTarget.ppt_x=o.x+r.timingTarget.design_ppt_x,r.timingTarget.ppt_y=o.y+r.timingTarget.design_ppt_y)},r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r.createPath(),r}return x(n,[{key:"createPath",value:function(){var t,e,n=new Ya,r=null===(t=this.json.path)||void 0===t?void 0:t.match(/[MLCmlc][^MLCmlc]+/g);if(r){var i,o=E(r);try{for(o.s();!(i=o.n()).done;){var s=i.value.trim().replace(/\s+/g," ").split(" "),u=h(e=s)||a(e)||S(e)||c(),d=u[0],A=u.slice(1);if("M"===d){var f=l(A.map((function(t){return Number(t)})),2),p=f[0],g=f[1];n.moveTo(p,g)}else if("L"===d){var v=l(A.map((function(t){return Number(t)})),2),m=v[0],y=v[1];n.lineTo(m,y)}else if("C"===d){var b=l(A.map((function(t){return Number(t)})),6),w=b[0],x=b[1],_=b[2],T=b[3],M=b[4],C=b[5];n.bezierCurveTo(w,x,_,T,M,C)}else if("Z"===d)n.closePath();else if("E"===d)console.warn("not implements");else if("c"===d){var I=l(A.map((function(t){return Number(t)})),6),N=I[0],B=I[1],k=I[2],P=I[3],D=I[4],L=I[5],O=n.currentPoint;n.bezierCurveTo(N+O.x,B+O.y,k+O.x,P+O.y,D+O.x,L+O.y)}else if("l"===d){var R=n.currentPoint,F=l(A.map((function(t){return Number(t)})),2),U=F[0],j=F[1];n.lineTo(U+R.x,j+R.y)}else if("m"===d){var z=n.currentPoint,H=l(A.map((function(t){return Number(t)})),2),Q=H[0],G=H[1];n.moveTo(Q+z.x,G+z.y)}}}catch(t){o.e(t)}finally{o.f()}}this.path=n}},{key:"modifyAttrKey",get:function(){return"motion"}}]),n}(lv),em=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t)).isConflict=!0,r.activeWhenConflict="next",r.startVal=null,r.onTimelineStart=function(t){t.isReverse||r.updateCurrentValue()},r.onTimeUpdate=function(t){var e,n,i,o,a,s=t.duration,u=t.delta/s,l={x:1,y:1};if(r.to){var c=null!==(e=r.from)&&void 0!==e?e:{x:null!==(i=null===(n=r.startVal)||void 0===n?void 0:n.x)&&void 0!==i?i:1,y:null!==(a=null===(o=r.startVal)||void 0===o?void 0:o.y)&&void 0!==a?a:1};l.x=c.x+(r.to.x-c.x)*u,l.y=c.y+(r.to.y-c.y)*u}else if(r.by){var h={x:r.by.x,y:r.by.y};l.x=1+(h.x-1)*u,l.y=1+(h.y-1)*u}r.timingTarget&&(r.timingTarget.scale=l)},r.onTimeNodeStart=function(){r.timingTarget&&(r.startVal={x:r.timingTarget.scale.x,y:r.timingTarget.scale.y})},r.onSeekToStart=function(){r.timingTarget&&r.startVal&&(r.timingTarget.scale=r.startVal)},r.onSeekToEnd=function(){r.onTimeUpdate({duration:1,delta:1,isReverse:!1})},r.from=t.json.from,r.to=t.json.to,r.by=t.json.by,r.commonTimeNode.on("timelineStart",r.onTimelineStart),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r.commonTimeNode.on("timeNodeStart",r.onTimeNodeStart),r}return x(n,[{key:"updateCurrentValue",value:function(){this.timingTarget&&(this.current={x:this.timingTarget.scale.x,y:this.timingTarget.scale.y})}},{key:"modifyAttrKey",get:function(){return"scale"}}]),n}(lv),nm=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t)).isConflict=!1,r.activeWhenConflict="next",r.isTimelineStart=!1,r.startColorString=null,r.currentColorString="#FFFFFFFF",r.onTimelineStart=function(t){if(!r.isTimelineStart){r.isTimelineStart=!0,t.isReverse||r.updateCurrentValue(),r.from.isInit()||r.from.fromHexString(r.currentColorString),r.to.isInit()||r.from.by(r.by,r.to);var e=l(r.json.cBhvr.attrList[0].split("."),1)[0];sv(r.timingTarget,e+".on","true")}},r.onTimeNodeEnd=function(){if("remove"===r.json.cBhvr.ctn.fill){var t=l(r.json.cBhvr.attrList[0].split("."),1)[0];sv(r.timingTarget,t+".on","false")}r.isTimelineStart=!1},r.onSeekToStart=function(){var t;if(r.timingTarget&&(r.onTimeUpdate({duration:1,delta:0}),(null===(t=r.timingTarget.fill)||void 0===t?void 0:t.designColor.toUpperCase())===r.from.toHexString().toUpperCase())){var e=l(r.json.cBhvr.attrList[0].split("."),1)[0];sv(r.timingTarget,e+".on","false")}},r.onTimeNodeStart=function(){if(r.timingTarget){var t=r.json.cBhvr.attrList[0];"ppt_c"===t&&(t="ppt_c.color");var e=uv(r.timingTarget,t);e&&(r.startColorString=e)}},r.onTimeUpdate=function(t){var e=t.delta/t.duration;if(r.to.interpolationFrom(r.from,e,r.target),r.timingTarget){var n=r.json.cBhvr.attrList[0];"ppt_c"===n&&(n="ppt_c.color"),sv(r.timingTarget,n,r.target.toHexString())}},r.onSeekToEnd=function(){r.isTimelineStart||r.onTimelineStart({isReverse:!1,activeCount:0,id:""}),r.onTimeUpdate({duration:1,delta:1})},"rgb"===r.json.clrSpc?(r.from=new yp(r.json.from),r.to=new yp(r.json.to),r.by=new yp(r.json.by),r.target=new yp):(r.from=new mp(r.json.from),r.to=new mp(r.json.to),r.by=new mp(r.json.by),r.target=new mp),r.commonTimeNode.on("timeNodeStart",r.onTimeNodeStart),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r.commonTimeNode.on("timelineStart",r.onTimelineStart),r.commonTimeNode.on("timeNodeEnd",r.onTimeNodeEnd),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r}return x(n,[{key:"updateCurrentValue",value:function(){if(this.timingTarget){var t=this.json.cBhvr.attrList[0];"ppt_c"===t&&(t="ppt_c.color");var e=uv(this.timingTarget,t);e&&(this.currentColorString=e)}}},{key:"modifyAttrKey",get:function(){return this.json.cBhvr.attrList[0]}}]),n}(lv),rm=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t)).isConflict=!1,r.activeWhenConflict="next",r.startVal=null,r.lastVal=null,r.onTimelineStart=function(t){r.lastVal=null,t.isReverse||r.updateCurrentValue()},r.onTimeUpdate=function(t){var e=t.duration,n=t.delta/e,i=0;if(void 0!==r.from&&void 0!==r.to){var o=(i=r.from)+(r.to-i)*n;r.timingTarget&&(r.timingTarget.r=o)}else if(void 0!==r.by){r.lastVal||(r.lastVal=0);var a=r.by*n-r.lastVal;r.lastVal=r.by*n,r.timingTarget&&(r.timingTarget.r+=a)}},r.onTimeNodeStart=function(){var t;Zf()(null===(t=r.timingTarget)||void 0===t?void 0:t.r)&&(r.startVal=r.timingTarget.r)},r.onSeekToStart=function(){r.timingTarget&&null!==r.startVal&&(r.timingTarget.r=r.startVal)},r.onSeekToEnd=function(){r.onTimeUpdate({duration:1,delta:1,isReverse:!1})},r.from=r.json.from,r.to=r.json.to,r.by=r.json.by,r.by?r.isConflict=!1:r.isConflict=!0,r.commonTimeNode.on("timeNodeStart",r.onTimeNodeStart),r.commonTimeNode.on("timeNodeCreate",r.onTimeNodeStart),r.commonTimeNode.on("timelineStart",r.onTimelineStart),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r}return x(n,[{key:"updateCurrentValue",value:function(){var t;this.currentVal=null===(t=this.timingTarget)||void 0===t?void 0:t.r}},{key:"modifyAttrKey",get:function(){return"rotate"}}]),n}(lv),im=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t)).isConflict=!1,r.activeWhenConflict="next",r.isApplied=!1,r.onTimeUpdate=function(){var t,e,n=r.json,i=n.cmd,o=n.cmdType;!r.isApplied&&i&&o&&(r.isApplied=!0,null===(e=null===(t=r.timingTarget)||void 0===t?void 0:t.cmd)||void 0===e||e.applyCommand(i,o))},r.onSeekToStart=function(){var t,e;null===(e=null===(t=r.timingTarget)||void 0===t?void 0:t.cmd)||void 0===e||e.applyCommand("custom-pause","call")},r.onSeekToEnd=function(){},r.commonTimeNode.on("timeNodeStart",(function(){r.isApplied=!1})),r.commonTimeNode.on("timeNodeEnd",(function(){r.isApplied=!1})),r.commonTimeNode.on("timeUpdate",r.onTimeUpdate),r.commonTimeNode.on("seekToStart",r.onSeekToStart),r.commonTimeNode.on("seekToEnd",r.onSeekToEnd),r}return x(n,[{key:"modifyAttrKey",get:function(){var t,e,n,r;return(null!==(e=null===(t=this.json)||void 0===t?void 0:t.cmd)&&void 0!==e?e:"")+(null!==(r=null===(n=this.json)||void 0===n?void 0:n.cmdType)&&void 0!==r?r:"")}}]),n}(lv),om=function t(e){var n=this;b(this,t),this.runtimeNodeEventHub=new Os.a,this.onVolumeUpdate=function(t){n.audio.volume(t)},this.stopAudio=function(){n.audio.stop()},this.destroy=function(){n.stopAudio(),n.audio.destroy(),n.ctx.activeMedia.delete(n.audio),n.ctx.volumeAdjuster.off("update",n.onVolumeUpdate)};var r=e.json,i=e.isIterate,o=e.isSub,a=e.eventHub,s=e.ctx,u=e.parent,l=e.iterateType,c=e.iterateIndex,h=e.iterateId,d=e.isInInteractiveSeq;this.json=r,this.id=r.cMediaNode.ctn.id,this.commonTimeNode=new am({json:r.cMediaNode.ctn,isSub:o,eventHubs:{global:a,runtime:this.runtimeNodeEventHub},ctx:s,parent:u,isIterate:i,iterateType:l,iterateIndex:c,iterateId:h,isInInteractiveSeq:d});var A=r.cMediaNode.tgtEl;s.loaderDelegate&&(A=s.loaderDelegate.redirectMedia(A),s.logger.info("redirect media url from ".concat(r.cMediaNode.tgtEl," to ").concat(A," by delegate."),s.taskId)),this.audio=new $g(A,s.runningAudio),s.activeMedia.add(this.audio),this.commonTimeNode.on("timelineStart",(function(){n.audio.volume(s.volumeAdjuster.volume),n.audio.play()})),this.commonTimeNode.on("seekToStart",this.stopAudio),this.commonTimeNode.on("seekToEnd",this.stopAudio),this.commonTimeNode.on("timeNodeDestroy",this.destroy),this.ctx=s,this.ctx.volumeAdjuster.on("update",this.onVolumeUpdate)},am=function(t){A(n,t);var e=p(n);function n(t){var r,i,o;b(this,n),(r=e.call(this)).uuid=Rf(),r.isSub=!1,r.isShadow=!1,r.startCount=0,r.applyCount=0,r.isReverse=!1,r.isConflictDispose=!1,r.isIterateEnd=!1,r.parentTimeNode=null,r.isActive=!1,r.isDestroy=!1,r.shouldSeekOnStart=!1,r.repeatTimeoutId="",r.iterateShadows=[],r.isEndEventsEmitted=!1,r.tmFilter=[],r.timeDelta=0,r.isIterate=!1,r.iterateType="el",r.iterateIndex=0,r.children=[],r.subList=[],r.duration=0,r.isNegativeSpeed=!1,r.handleEndCond=function(){r.isActive&&(r.isActive=!1,r.isInfiniteRepeat()?r.repeatTimeNodeEnd():r.seekToEnd(!1,!0))},r.handleActive=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(r.isActive=!0,r.isConflictDispose=!1,r.applyCount+=1,r.json.iterate||r.emit("timeNodeStart",{id:r.uuid,activeCount:r.applyCount,isReverse:r.isReverse}),r.startCount>0&&r.json.restart){if("never"===r.json.restart)return;"whenNotActive"!==r.json.restart&&"always"!==r.json.restart||(r.seekToStart(),r.emit("timeNodeRestart",{id:r.uuid,activeCount:r.applyCount,isReverse:r.isReverse}),r.startTimeLine(t))}else r.startTimeLine(t)},r.updateTimeLine=function(t){var e=t/(kh.b.TARGET_FPMS||.06);r.timeDelta+=e,r.duration-r.timeDelta<=e&&(r.timeDelta=r.duration),r.timeDelta<r.duration?r.emit("timeUpdate",{delta:r.isReverse||r.isNegativeSpeed?r.duration-r.timeDelta:r.timeDelta,duration:r.duration,isReverse:r.isReverse}):(r.emit("timeUpdate",{delta:r.isReverse||r.isNegativeSpeed?0:r.duration,duration:r.duration,isReverse:r.isReverse}),r.onTimeLineEnd())},r.handleEnd=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(r.isTimeNodeEnd()||t)&&(r.isActive=!1,r.isSub&&r.destroy(),r.emitEndEvents())};var a=t.isSub,s=t.isIterate,u=t.ctx,l=t.eventHubs,c=t.parent,h=t.json,d=t.iterateType,A=t.iterateId,f=t.iterateIndex,p=t.isInInteractiveSeq;r.isSub=a,r.isInInteractiveSeq=p,r.isIterate=s,r.parentTimeNode=c,r.json=h,r.ctx=u,r.iterateIndex=f,r.eventHubs=l,r.iterateType=d,r.iterateId=A,r.tmFilter=null!==(o=null===(i=h.tmFilter)||void 0===i?void 0:i.split(";").map((function(t){return t.split(",").map((function(t){return parseFloat(t.trim())}))})))&&void 0!==o?o:[];var g=Number(r.json.dur),v=r.json.spd||1;return r.isNegativeSpeed=v<0,Number.isNaN(g)||(r.duration=g/Math.abs(v)),r.uuid+="--"+r.json.id,r.setPreStyle(),h.childTnLst&&r.createChildren(h.childTnLst),r.startConds=new ov(r.json.id||"",h.stCondLst,l,r.ctx),r.endConds=new ov(r.json.id||"",h.endCondLst,l,r.ctx),h.endSync&&(r.endSync=new ov(r.json.id||"",[h.endSync],l,r.ctx),r.endSync.on("active",(function(){var t;"interactiveSeq"===r.json.nodeType&&(r.isActive=!1,r.shouldSeekOnStart=!0,r.emit("timeNodeEndSync"),null===(t=r.endSync)||void 0===t||t.reset())}))),r.startConds.on("active",(function(t){r.isActive||(r.shouldSeekOnStart&&(r.shouldSeekOnStart=!1,r.seekToStart()),r.handleActive(t))})),r.endConds.on("active",(function(){r.handleEndCond(),r.children.forEach((function(t){return t.commonTimeNode.handleEndCond()}))})),r.parentTimeNode&&r.parentTimeNode.on("timeNodeStart",(function(){r.applyCount=0})),r.isSub&&"nextClick"===r.json.masterRel&&r.startConds.addCond({event:"shape slide onNext"}),r.json.iterate&&!1===r.isIterate&&r.createIterateShadow(),r}return x(n,[{key:"createIterateShadow",value:function(){var t=this,e=Rf(),r=!0,i=0;for(this.ctx.eventHub.on("IterateTimeNodeEnd",(function n(i){i===e&&(r=!1,t.ctx.eventHub.removeListener("IterateTimeNodeEnd",n))}));r;){var o=JSON.parse(JSON.stringify(this.json)),a=new n({json:o,isSub:!1,eventHubs:this.eventHubs,ctx:this.ctx,parent:null,isIterate:!0,iterateType:o.iterate.type,iterateIndex:i,iterateId:e,isInInteractiveSeq:this.isInInteractiveSeq});this.iterateShadows[i]=a,i+=1}}},{key:"isInfiniteRepeat",value:function(){return this.json.repeatCount>999999998}},{key:"getReverse",value:function(){return this.isReverse}},{key:"setReverse",value:function(t){this.isReverse=t}},{key:"createTimeNode",value:function(t,e){var n=null,r={json:t,isSub:e,isIterate:this.isIterate,eventHub:this.eventHubs.global,ctx:this.ctx,parent:this,iterateType:this.iterateType,iterateIndex:this.iterateIndex,iterateId:this.iterateId,isInInteractiveSeq:this.isInInteractiveSeq};return"seq"===t.type?n=new av(r):"par"===t.type?n=new sm(r):"set"===t.type?n=new cv(r):"anim"===t.type?n=new vv(r):"animEffect"===t.type?n=new $v(r):"animMotion"===t.type?n=new tm(r):"animScale"===t.type?n=new em(r):"animClr"===t.type?n=new nm(r):"animRot"===t.type?n=new rm(r):"cmd"===t.type?n=new im(r):"audio"===t.type&&(n=new om(r)),n}},{key:"createSubList",value:function(t){var e=this;this.subList&&this.subList.forEach((function(t){return t.commonTimeNode.destroy()})),this.subList=[],t.forEach((function(t){var n=e.createTimeNode(t,!0);n&&e.subList.push(n)}))}},{key:"bindCommonTimeNodeEvent",value:function(t){var e=this;t.commonTimeNode.on("timeNodeStart",(function(t){e.emit("childTimeNodeStart",t)})),t.commonTimeNode.on("timeNodeEnd",(function(t){e.emit("childTimeNodeEnd",t),e.children.every((function(t){return t.commonTimeNode.isTimeNodeEndWhenDetectEndSync()}))&&(e.json.iterate||e.allChildrenEndHandle())}))}},{key:"createChildren",value:function(t){var e=this;function n(t){return(r=t,e=r,null!==(n=e)&&void 0!==n&&n.cBhvr?r.cBhvr.ctn:function(t){var e,n;return!(null===(n=null===(e=t)||void 0===e?void 0:e.cMediaNode)||void 0===n||!n.ctn)}(r)?r.cMediaNode.ctn:r.ctn).presetOrder;var e,n,r}t&&t[0]&&n(t[0])?o(t).sort((function(t,e){var r,i;return(null!==(r=n(t))&&void 0!==r?r:0)-(null!==(i=n(e))&&void 0!==i?i:0)})).forEach((function(n){var r=t.findIndex((function(t){return t===n})),i=e.createTimeNode(n,!1);i&&(e.bindCommonTimeNodeEvent(i),e.children[r]=i)})):t.forEach((function(t){var n=e.createTimeNode(t,!1);n&&(e.bindCommonTimeNodeEvent(n),e.children.push(n))}))}},{key:"playReverse",value:function(){this.isReverse=!0,this.startReverseTimeLine(),this.children.forEach((function(t){return t.commonTimeNode.playReverse()}))}},{key:"allChildrenEndHandle",value:function(){var t=this;if(!this.isDestroy){if(this.json.autoRev&&!this.isReverse)return this.isReverse=!0,void this.playReverse();this.isReverse&&(this.isReverse=!1),this.json.repeatCount&&this.json.repeatCount>this.applyCount?this.repeatTimeoutId=this.ctx.clock.setTimeout((function(){t.seekToStart(!1),t.resetForRepeat(),t.startTimeNodeRepeat()})):(this.json.iterate&&!this.isIterate&&(this.isIterateEnd=!0),this.eventHubs.runtime.emit("runtime all end"),this.startSubList(),this.handleEnd())}}},{key:"resetForRepeat",value:function(){this.isInInteractiveSeq&&this.isInfiniteRepeat()&&this.repeatTimeNodeEnd(),this.timeDelta=0,this.children.forEach((function(t){return t.commonTimeNode.resetForRepeat()}))}},{key:"startSubList",value:function(){this.subList.forEach((function(t){return t.commonTimeNode.startTimeNode()}))}},{key:"startReverseTimeLine",value:function(){this.isEndEventsEmitted=!1,this.timeDelta=0;var t=1e3/this.ctx.ticker.maxFPS;this.duration<=t&&this.duration>0?(this.emit("timeUpdate",{delta:this.duration,duration:this.duration,isReverse:this.isReverse}),this.ctx.eventHub.emit(Nm.animateEnd),this.ctx.ticker.remove(this.updateTimeLine)):this.duration>t&&(this.ctx.eventHub.emit(Nm.animateStart),this.ctx.ticker.add(this.updateTimeLine))}},{key:"startTimeLine",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e&&(this.isEndEventsEmitted=!1,this.eventHubs.global.emit("time ".concat(this.json.id," begin")),this.eventHubs.global.emit("time ".concat(this.json.id," onBegin")),this.eventHubs.runtime.emit("runtime ".concat(this.json.id," begin"))),this.json.iterate)this.startIterate();else{this.timeDelta=0,this.emit("timelineStart",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse});var n=1e3/this.ctx.ticker.maxFPS;this.duration<=n&&this.duration>0?(this.timeDelta=this.isReverse?0:this.duration,this.emit("timeUpdate",{delta:this.timeDelta,duration:this.duration,isReverse:this.isReverse}),this.emit("timelineEnd",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse}),this.ctx.ticker.addOnce((function(){t.onTimeLineEnd()}))):this.duration>n&&(this.ctx.eventHub.emit(Nm.animateStart),this.updateTimeLine(0),this.ctx.ticker.add(this.updateTimeLine))}}},{key:"startIterate",value:function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.json.iterate){t.next=24;break}this.isIterateEnd=!1,e=E(this.iterateShadows),t.prev=3,e.s();case 5:if((n=e.n()).done){t.next=15;break}if(r=n.value,!this.isIterateEnd){t.next=9;break}return t.abrupt("break",15);case 9:return r.children.forEach((function(t){t.commonTimeNode.startTimeNode()})),r.applyCount+=1,t.next=13,this.ctx.clock.delay(this.json.iterate.interval);case 13:t.next=5;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),e.e(t.t0);case 20:return t.prev=20,e.f(),t.finish(20);case 23:this.onTimeLineEnd();case 24:case"end":return t.stop()}}),t,this,[[3,17,20,23]])})))}},{key:"applyTimeFilter",value:function(t){if(!this.tmFilter.every((function(t){return Zf()(t[0])&&Zf()(t[1])})))return t;for(var e=0;e<this.tmFilter.length;e++){var n=this.tmFilter[e];if(t<n[0]){var r=this.tmFilter[e-1];return(t-r[0])/(n[0]-r[0])*(n[1]-r[1])+r[1]}}return this.tmFilter.length>0?this.tmFilter[this.tmFilter.length-1][1]:t}},{key:"isNatureTimeEnd",value:function(){return this.duration>=0&&this.timeDelta>=this.duration}},{key:"findTargets",value:function(){var t=[];return function e(n){n.forEach((function(n){var r,i,o;n.cBhvr&&n.cBhvr.target&&t.findIndex((function(t){return t.id===n.cBhvr.target.id}))<0&&t.push(n.cBhvr.target),(null===(i=null===(r=null==n?void 0:n.cBhvr)||void 0===r?void 0:r.ctn)||void 0===i?void 0:i.childTnLst)&&n.cBhvr.ctn.childTnLst.length>0&&e(n.cBhvr.ctn.childTnLst),(null===(o=null==n?void 0:n.ctn)||void 0===o?void 0:o.childTnLst)&&n.ctn.childTnLst.length>0&&e(n.ctn.childTnLst)}))}(this.json.childTnLst||[]),t}},{key:"setPreStyle",value:function(){var t=this;this.json.presetClass&&this.findTargets().forEach((function(e){if(t.json.iterate)for(var n=0,r=!0;r;){var i=t.ctx.timingTargets.getTarget(e,!0,{type:t.json.iterate.type,index:n,id:""});i&&(t.setPreStyleForTarget(i),n+=1),r=!!i}else{var o=t.ctx.timingTargets.getTarget(e,!1);o&&t.setPreStyleForTarget(o)}}))}},{key:"setPreStyleForTarget",value:function(t){var e,n;if(t&&this.json.presetSubtype&&(t.presetSubType=this.json.presetSubtype),t&&!t.hasPreset)if("entr"===this.json.presetClass){var r=null===(n=null===(e=this.json)||void 0===e?void 0:e.childTnLst)||void 0===n?void 0:n.filter((function(t){return"set"===t.type&&"visible"===t.to}));null!=r&&r.length&&(t.hasPreset=!0,t.style.visibility="hidden")}else("exit"===this.json.presetClass||"path"===this.json.presetClass||"emph"===this.json.presetClass)&&(t.hasPreset=!0,t.style.visibility="visible")}},{key:"startTimeNodeRepeat",value:function(){this.timeDelta=0,this.isActive=!0,this.applyCount+=1,this.startTimeLine(!1),this.json.iterate||this.emit("timeNodeRepeat",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse})}},{key:"startTimeNodeForce",value:function(){this.json.subTnLst&&this.createSubList(this.json.subTnLst),this.timeDelta=0,this.isActive=!0,this.handleActive(!1)}},{key:"startTimeNode",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isDestroy){this.collectStartValue(),this.timeDelta=0,this.isReverse=!1,this.json.subTnLst&&this.createSubList(this.json.subTnLst),this.startConds.setTriggerParams(t);var e=this.json.stCondLst.filter((function(t){return/^self/.test(t.event||"")}))[0];e&&this.startConds.condHandle(e);var n=this.json.endCondLst.filter((function(t){return/^self/.test(t.event||"")}))[0];n&&this.endConds.condHandle(n),this.startConds.condHandle()}}},{key:"onTimeLineEnd",value:function(){this.dispose(),(0===this.children.length||this.json.iterate)&&this.allChildrenEndHandle()}},{key:"clearSubList",value:function(){this.subList.forEach((function(t){return t.commonTimeNode.destroy()}))}},{key:"seekToStart",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isEndEventsEmitted=!1,this.isActive=!1,this.dispose(),this.timeDelta=0,this.emit("seekToStart"),this.json.iterate&&!this.isIterate)return this.isIterateEnd=!0,void this.iterateShadows.forEach((function(e){return e.seekToStart(t)}));if(t)for(var e=this.subList.length-1;e>=0;e--){var n=this.subList[e];null==n||n.commonTimeNode.seekToStart()}for(var r=this.children.length-1;r>=0;r--){var i=this.children[r];null==i||i.commonTimeNode.seekToStart()}if(this.children.length>1)for(var o=this.children.length-1;o>=0;o--){var a=this.children[o];null==a||a.commonTimeNode.seekToStart()}}},{key:"repeatTimeNodeEnd",value:function(){this.dispose(),this.children.forEach((function(t){t.commonTimeNode.isActive=!1,t.commonTimeNode.dispose()}))}},{key:"dispose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isConflictDispose=t,this.ctx.clock.clearTimeout(this.repeatTimeoutId),this.ctx.eventHub.emit(Nm.animateEnd);try{this.ctx.ticker.remove(this.updateTimeLine)}catch(t){}this.startConds.reset(),this.endConds.reset()}},{key:"seekToEnd",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isInfiniteRepeat()){!this.isActive&&this.applyCount<=0&&this.collectStartValue(),this.applyCount=this.json.repeatCount,this.json.autoRev&&(this.isReverse=!0),this.timeDelta=this.duration,this.isActive=!1,this.dispose();var n=this.json.autoRev||t;if(n?this.emit("seekToStart"):this.emit("seekToEnd"),this.json.iterate&&!this.isIterate)return this.isIterateEnd=!0,void this.iterateShadows.forEach((function(t){return t.seekToEnd(n,e)}));0===this.children.length&&(this.eventHubs.runtime.emit("runtime all end"),this.handleEnd()),this.children.forEach((function(t){return t.commonTimeNode.seekToEnd(n,e)})),e&&this.json.subTnLst&&(this.subList.length<=0&&this.createSubList(this.json.subTnLst),this.subList.forEach((function(t){return t.commonTimeNode.seekToEnd(!1)})),this.clearSubList())}}},{key:"isTimeNodeEndWhenDetectEndSync",value:function(){if(this.isInInteractiveSeq&&this.isInfiniteRepeat())return!0;var t=!0;return this.children.length>0&&(t=t&&this.children.every((function(t){return t.commonTimeNode.isTimeNodeEndWhenDetectEndSync()}))),this.json.repeatCount&&(t=t&&this.applyCount>=this.json.repeatCount),this.json.autoRev&&(t=t&&!this.isReverse),t=t&&this.isNatureTimeEnd(),!!this.isConflictDispose||!(!this.isIterateEnd||!this.json.iterate)||t}},{key:"isTimeNodeEnd",value:function(){var t=!0;return this.children.length>0&&(t=t&&this.children.every((function(t){return t.commonTimeNode.isTimeNodeEnd()}))),this.json.repeatCount&&(t=t&&this.applyCount>=this.json.repeatCount),this.json.autoRev&&(t=t&&!this.isReverse),t=t&&this.isNatureTimeEnd(),!!this.isConflictDispose||!(!this.isIterateEnd||!this.json.iterate)||t}},{key:"emitEndEvents",value:function(){this.isEndEventsEmitted||(this.isEndEventsEmitted=!0,this.eventHubs.global.emit("time ".concat(this.json.id," end")),this.eventHubs.global.emit("time ".concat(this.json.id," onEnd")),this.eventHubs.runtime.emit("runtime ".concat(this.json.id," end")),this.emit("timeNodeEnd",{id:this.uuid,activeCount:this.applyCount,isReverse:this.isReverse}))}},{key:"collectStartValue",value:function(){this.emit("timeNodeCreate"),this.children.forEach((function(t){return t.commonTimeNode.collectStartValue()}))}},{key:"destroy",value:function(){this.emit("timeNodeDestroy"),this.isDestroy=!0,this.dispose(),this.startConds.removeAllListeners(),this.endConds.removeAllListeners(),this.children.forEach((function(t){return t.commonTimeNode.destroy()})),this.clearSubList()}}]),n}(Os.a),sm=function(t){A(n,t);var e=p(n);function n(t){var r;b(this,n),(r=e.call(this)).isRunning=!1,r.runtimeNodeEventHub=new Os.a;var i=t.json,o=t.iterateType,a=t.isIterate,s=t.isSub,u=t.parent,l=t.ctx,c=t.eventHub,h=t.iterateIndex,d=t.iterateId,A=t.isInInteractiveSeq;return r.id=i.ctn.id,r.json=i,r.ctx=l,r.isIterate=a,r.globalEventHub=c,r.commonTimeNode=new am({json:i.ctn,isSub:s,eventHubs:{global:c,runtime:r.runtimeNodeEventHub},ctx:l,parent:u,isIterate:!1,iterateType:o,iterateIndex:h,iterateId:d,isInInteractiveSeq:A}),r.commonTimeNode.on("timeNodeStart",(function(){r.commonTimeNode.children.forEach((function(t){t.commonTimeNode.setReverse(r.commonTimeNode.getReverse()),t.commonTimeNode.startTimeNode()})),r.isRunning||(r.isRunning=!0,r.globalEventHub.emit("runtime ".concat(r.id," begin")),r.emit("begin"))})),r.commonTimeNode.on("timeNodeRepeat",(function(){r.commonTimeNode.children.forEach((function(t){t.commonTimeNode.startTimeNode(!1)}))})),r.commonTimeNode.on("timeNodeEnd",(function(){r.commonTimeNode.isTimeNodeEnd()&&r.isRunning&&(r.isRunning=!1,r.globalEventHub.emit("runtime ".concat(r.id," end")),r.emit("end"))})),r}return n}(Os.a),um=function(){function t(e,n,r){b(this,t),this.json=e,this.ctx=r,this.globalEventHub=n;var i=e.timeNodeList.find((function(t){return"par"===t.type&&"tmRoot"===t.ctn.nodeType}));i&&(this.tmRoot=new sm({json:i,isSub:!1,isIterate:!1,eventHub:n,ctx:r,parent:null,iterateType:"el",iterateIndex:0,iterateId:"",isInInteractiveSeq:!1}),this.mainSeq=this.tmRoot.commonTimeNode.children.find((function(t){var e,n,r;return"seq"===(null===(e=t.json)||void 0===e?void 0:e.type)&&"mainSeq"===(null===(r=null===(n=t.json)||void 0===n?void 0:n.ctn)||void 0===r?void 0:r.nodeType)})))}return x(t,[{key:"findSeq",value:function(t){var e;return null===(e=this.tmRoot)||void 0===e?void 0:e.commonTimeNode.children.find((function(e){var n,r,i;return"seq"===(null===(n=e.json)||void 0===n?void 0:n.type)&&(null===(i=null===(r=e.json)||void 0===r?void 0:r.ctn)||void 0===i?void 0:i.id)===t}))}},{key:"start",value:function(){var t,e;return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.json.autoPlayMainSeq){n.next=6;break}return n.next=3,this.ctx.clock.delay(16);case 3:null===(t=this.mainSeq)||void 0===t||t.commonTimeNode.startTimeNode(),n.next=7;break;case 6:null===(e=this.mainSeq)||void 0===e||e.commonTimeNode.startTimeNode();case 7:case"end":return n.stop()}}),n,this)})))}},{key:"setMainSeqApplied",value:function(){this.mainSeq&&(this.mainSeq.commonTimeNode.applyCount=1)}},{key:"collectMainSeqStartValue",value:function(){var t;null===(t=this.mainSeq)||void 0===t||t.commonTimeNode.collectStartValue()}},{key:"setMainSeqStep",value:function(t,e){var n;-1===t&&this.mainSeq&&(this.mainSeq.commonTimeNode.applyCount=1),null===(n=this.mainSeq)||void 0===n||n.setCurrentStep(t,e)}},{key:"destroy",value:function(){var t;this.globalEventHub.removeAllListeners(),null===(t=this.tmRoot)||void 0===t||t.commonTimeNode.destroy()}},{key:"hasMainSeq",value:function(){return!!this.mainSeq&&this.mainSeq.commonTimeNode.children.length>0}},{key:"currentMainSeqState",value:function(){return this.mainSeq?this.mainSeq.currentState:null}},{key:"currentMainSeqStep",value:function(){return this.mainSeq?this.mainSeq.currentStep:0}},{key:"currentMainSeqLength",value:function(){return this.mainSeq?this.mainSeq.stepLength:0}},{key:"mainSeqHasNextStep",value:function(){return!!this.mainSeq&&this.mainSeq.hasNext()}},{key:"mainSeqHasPrevStep",value:function(){return!!this.mainSeq&&this.mainSeq.hasPrev()}},{key:"seekInteractiveSeqToEnd",value:function(t){var e=this.findSeq(t);e&&e.commonTimeNode.seekToEnd(!1,!0)}},{key:"setInteractiveSeqState",value:function(t,e,n){var r=this.findSeq(t);r&&r.setCurrentStep(e,n)}},{key:"resetAllInteractiveSeq",value:function(){var t;((null===(t=this.tmRoot)||void 0===t?void 0:t.commonTimeNode.children.filter((function(t){var e,n,r;return"seq"===(null===(e=t.json)||void 0===e?void 0:e.type)&&"interactiveSeq"===(null===(r=null===(n=t.json)||void 0===n?void 0:n.ctn)||void 0===r?void 0:r.nodeType)})))||[]).forEach((function(t){t.setCurrentStep(0,"start")}))}},{key:"applyInteractiveAction",value:function(t){this.globalEventHub.emit(t)}}]),t}(),lm=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},cm=function(t){A(n,t);var e=p(n);function n(t,r,i,o){var a;b(this,n),(a=e.call(this,{id:"stage",width:t.width,height:t.height,type:"Container",children:t.children},r,i,void 0,o)).isRendered=!1,a.isTimingStartValueCollected=!1,a.json=t,r.hasBackgroundFillShape=a.detectUseBackgroundFill(a.json),a.container.visible=!1,a.ctx=r;var s=new ud;return s.beginFill(16777215),s.drawRect(0,0,t.width,t.height),s.endFill(),a.container.addChild(s),a}return x(n,[{key:"detectUseBackgroundFill",value:function(t){var e=this;return!!t&&("Picture"===t.type||"Shape"===t.type?t.useBgFill:!(!t.children||!Array.isArray(t.children))&&t.children.some((function(t){return e.detectUseBackgroundFill(t)})))}},{key:"initOnReuse",value:function(){var t=this;d(y(n.prototype),"initOnReuse",this).call(this),this.ctx.timingEventHub.on("c:prev slide",(function(e){t.ctx.eventHub.emit(Nm.requestPrevSlide,e)})),this.ctx.timingEventHub.on("c:next slide",(function(e,n){t.ctx.eventHub.emit(Nm.requestNextSlide,e,n)}))}},{key:"render",value:function(t){var e=this;this.isRendered||(this.collectAnimatedIds().forEach((function(t){return e.ctx.animatedIds.add(t)})),this.isRendered=!0,d(y(n.prototype),"render",this).call(this,t),t.addSubMTask((function(){return lm(e,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.ctx.eventHub.emit("StageRenderEnd");case 1:case"end":return t.stop()}}),t,this)})))}),"@StageImpl[emit.StageRenderEnd]"))}},{key:"isListTimeNode",value:function(t){return["excel","seq","par"].indexOf(t.type)>=0}},{key:"isAnimatedTimeNode",value:function(t){return!!t.cBhvr}},{key:"collectAnimatedIdsForTimeNode",value:function(t,e){var n,r=this;this.isListTimeNode(t)?null===(n=t.ctn.childTnLst)||void 0===n||n.forEach((function(t){r.collectAnimatedIdsForTimeNode(t,e)})):this.isAnimatedTimeNode(t)&&e.push(t.cBhvr.target.id)}},{key:"collectAnimatedIds",value:function(){var t=this,e=[];return this.json.timing&&this.json.timing.timeNodeList.forEach((function(n){t.collectAnimatedIdsForTimeNode(n,e)})),e}},{key:"createTiming",value:function(){this.json.timing&&!this.timing&&(this.timing=new um(this.json.timing,this.ctx.timingEventHub,this.ctx))}},{key:"startTiming",value:function(){var t;return(null===(t=this.timing)||void 0===t?void 0:t.start())||Promise.resolve()}},{key:"setMainSeqApplied",value:function(){var t;null===(t=this.timing)||void 0===t||t.setMainSeqApplied()}},{key:"setMainSeqStep",value:function(t,e){var n;null===(n=this.timing)||void 0===n||n.setMainSeqStep(t,e)}},{key:"collectMainSeqStartValue",value:function(){var t;this.isTimingStartValueCollected||(this.isTimingStartValueCollected=!0,null===(t=this.timing)||void 0===t||t.collectMainSeqStartValue())}},{key:"hasTiming",value:function(){return!!this.timing}},{key:"clearOnSlideChange",value:function(){this.ctx.eventHub.removeAllListeners(),this.ctx.timingEventHub.removeAllListeners(),d(y(n.prototype),"clearOnSlideChange",this).call(this)}},{key:"clearOnTransactionEnd",value:function(){var t,e;this.ctx.timingTargets.getTargets().forEach((function(t){t.hasPreset=!1})),null===(t=this.timing)||void 0===t||t.resetAllInteractiveSeq(),null===(e=this.timing)||void 0===e||e.destroy(),this.timing=void 0}},{key:"destroy",value:function(){var t,e;this.isTimingStartValueCollected=!1,this.isRendered=!1,this.ctx.eventHub.removeAllListeners(),this.ctx.graphicsTexture.destroy(),null===(t=this.ctx.bgTexture)||void 0===t||t.destroy(!0),this.ctx.spriteTexture.destroy(),this.ctx.timingEventHub.removeAllListeners(),null===(e=this.timing)||void 0===e||e.destroy(),this.timing=void 0,d(y(n.prototype),"destroy",this).call(this)}},{key:"mainSeqStep",value:function(){var t,e;return null!==(e=null===(t=this.timing)||void 0===t?void 0:t.currentMainSeqStep())&&void 0!==e?e:0}},{key:"mainSeqLength",value:function(){var t,e;return null!==(e=null===(t=this.timing)||void 0===t?void 0:t.currentMainSeqLength())&&void 0!==e?e:0}},{key:"mainSeqHasNextStep",value:function(){var t,e;return null!==(e=null===(t=this.timing)||void 0===t?void 0:t.mainSeqHasNextStep())&&void 0!==e&&e}},{key:"mainSeqHasPrevStep",value:function(){var t,e;return null!==(e=null===(t=this.timing)||void 0===t?void 0:t.mainSeqHasPrevStep())&&void 0!==e&&e}},{key:"mainSeqState",value:function(){return this.timing?this.timing.currentMainSeqState():null}},{key:"nextStep",value:function(t,e){var n;this.hasTiming()&&(null===(n=this.timing)||void 0===n?void 0:n.hasMainSeq())?(this.ctx.timingEventHub.emit("shape slide onStopAudio"),this.ctx.timingEventHub.emit("shape slide onNext",t,e)):this.ctx.eventHub.emit(Nm.requestNextSlide,t,e)}},{key:"prevStep",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hasTiming()&&(null===(t=this.timing)||void 0===t?void 0:t.hasMainSeq())?(this.ctx.timingEventHub.emit("shape slide onStopAudio"),this.ctx.timingEventHub.emit("shape slide onPrev",e)):this.ctx.eventHub.emit(Nm.requestPrevSlide,e)}},{key:"applyInteractiveAction",value:function(t){var e;null===(e=this.timing)||void 0===e||e.applyInteractiveAction(t)}},{key:"seekInteractiveSeqToEnd",value:function(t){var e;null===(e=this.timing)||void 0===e||e.seekInteractiveSeqToEnd(t)}},{key:"setInteractiveSeqState",value:function(t,e,n){var r;null===(r=this.timing)||void 0===r||r.setInteractiveSeqState(t,e,n)}},{key:"setMediaState",value:function(t,e){return lm(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.ctx.medias[t],n.t0=r,!n.t0){n.next=10;break}if(!e){n.next=8;break}return n.next=6,r.play();case 6:n.next=10;break;case 8:return n.next=10,r.pause();case 10:case"end":return n.stop()}}),n,this)})))}},{key:"setMediaCurrentTime",value:function(t,e){var n=this.ctx.medias[t];n&&n.seek(e)}},{key:"interactiveContainer",get:function(){return this.container}}]),n}(iv),hm=function(){function t(e){var n=this;b(this,t),this.ticker=e,this.tasks=[],this.couldRunning=!1,this.applyNext=function(){var t=n.tasks[0];t&&t.applyNext()},e.add(this.applyNext)}return x(t,[{key:"addTask",value:function(t){var e=this;this.tasks.push(t),t.once("task-finish",(function(){var n=e.tasks.indexOf(t);n>=0&&e.tasks.splice(n,1)})),t.once("task-error",(function(){var n=e.tasks.indexOf(t);n>=0&&e.tasks.splice(n,1)}))}},{key:"start",value:function(){this.couldRunning=!0}},{key:"stop",value:function(){this.couldRunning=!1}}]),t}(),dm=function(t){return new Promise((function(e){return setTimeout(e,t)}))},Am=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this)).slideIndex=t,o.taskId=r,o.logger=i,o.uuid=Rf(),o.isCancel=!1,o.tasks=[],o}return x(n,[{key:"addMTask",value:function(t,e){this.tasks.push({fn:t,state:"wait",sub:[],name:e})}},{key:"addSubMTask",value:function(t,e){var n=this.tasks.findIndex((function(t){return"running"===t.state}));n<0&&(n=0),this.tasks[n].sub.push({fn:t,state:"wait",sub:[],name:e})}},{key:"cancel",value:function(){this.tasks=[],this.isCancel=!0}},{key:"applyNext",value:function(){var t=this;if(!this.tasks.some((function(t){return"running"===t.state}))&&!this.tasks.some((function(t){return"error"===t.state})))if(this.tasks.every((function(t){return"finish"===t.state})))this.isCancel||this.emit("task-finish");else{var e=this.tasks.find((function(t){return"wait"===t.state}));e&&(e.state="running",e.fn.apply(null).then((function(){if(e.state="finish",e.sub.length>0){var n,r=t.tasks.findIndex((function(t){return t===e}));(n=t.tasks).splice.apply(n,[r+1,0].concat(o(e.sub)))}})).catch((function(n){e.state="error",t.logger.error("".concat(n," ").concat(n.stack),t.taskId),t.emit("task-error",kf.transform(n),t.slideIndex)})))}}},{key:"applyAll",value:function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.tasks.every((function(t){return"finish"===t.state}))){t.next=14;break}if(!this.tasks.some((function(t){return"running"===t.state}))){t.next=6;break}return t.next=4,dm(16);case 4:t.next=12;break;case 6:if(!this.tasks.some((function(t){return"error"===t.state}))){t.next=8;break}return t.abrupt("return");case 8:return t.delegateYield(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.tasks.find((function(t){return"wait"===t.state})))){t.next=17;break}return n.state="running",t.prev=3,t.next=6,jf((function(){return n.fn.apply(null)}),6e4);case 6:if(t.t0=t.sent,t.t1=Ff,t.t0!==t.t1){t.next=10;break}throw new kf(Sf.RuntimeError,"subtask ".concat(n.name," apply timeout"));case 10:n.state="finish",n.sub.length>0&&(i=e.tasks.findIndex((function(t){return t===n})),(r=e.tasks).splice.apply(r,[i+1,0].concat(o(n.sub)))),t.next=17;break;case 13:return t.prev=13,t.t2=t.catch(3),a=null!=t.t2&&t.t2.errorType?t.t2:new kf(Sf.RuntimeError,"subtask ".concat(n.name," error. ").concat(t.t2)),n.state="error",e.logger.error("".concat(t.t2," ").concat(t.t2.stack),e.taskId),e.emit("task-error",kf.transform(a),e.slideIndex),t.abrupt("return","break");case 17:case"end":return t.stop()}}),t,null,[[3,13]])}))(),"t0",9);case 9:if("break"!==t.t0){t.next=12;break}return t.abrupt("break",14);case 12:t.next=0;break;case 14:!this.isCancel&&this.tasks.every((function(t){return"finish"===t.state}))&&this.emit("task-finish");case 15:case"end":return t.stop()}}),t,this)})))}}]),n}(Os.a),fm=n(131),pm=new(n.n(fm).a),gm=pm.getDevice(),vm=pm.getBrowser(),mm=pm.getOS(),ym={isDesktop:function(){var t=!0;return"mobile"===gm.type&&(t=!1),/Samsung/.test(vm.name||"")&&(t=!1),window.__nativeTags&&window.__nativeTags.platform&&(t=!1),t},isIOS:function(){var t=!1;return window.__nativeTags&&window.__nativeTags.platform&&/^ios/i.test(window.__nativeTags.platform)&&(t=!0),mm.name&&/iOS/.test(mm.name)&&(t=!0),t},isAndroid:function(){var t=!1;return window.__nativeTags&&window.__nativeTags.platform&&/^android/i.test(window.__nativeTags.platform)&&(t=!0),mm.name&&/android/i.test(mm.name)&&(t=!0),t},isLowGpuMemory:function(){var t,e,n=null!==(e=null===(t=window.__nativeTags)||void 0===t?void 0:t.platform)&&void 0!==e?e:"";if(n){var r=n.split(" ");if(r[1]){if(/^iPad/.test(r[1])){var i=r[1].match(/^iPad(\d+)/);return!(i&&i[1]&&parseInt(i[1],10)>=6)}if(/^iPhone/.test(r[1])){var o=r[1].match(/^iPhone(\d+)/);return!(o&&o[1]&&parseInt(o[1],10)>=9)}return!1}return!1}return!0}},bm=function(){function t(e,n){var r=this;if(b(this,t),this.renderer=e,this.localStorage=n,this.outputData=new Map,this.loadingSdfKeys=new Set,!t.worker){var i=new Blob(['\nself.onmessage = function(e) {\n    var data = e.data.data;\n    var key = e.data.key;\n    var height = Math.ceil(e.data.height);\n    var width = Math.ceil(e.data.width);\n    if (!data || !key) {\n        return;\n    }\n    var maxDis = 0;\n    var d = [];\n    var p = [];\n    var maxInt = Number.MAX_SAFE_INTEGER || 255 * 255 * 255;\n    var setD = function(x, y, v) { d[y * width + x] = v; };\n    var getD = function(x, y) { return d[y * width + x]; };\n    var setP = function(x, y, v) { p[y * width + x] = v; };\n    var getP = function(x, y) { return p[y * width + x]; };\n    var isContains = function(x, y) { return x >= 0 && x < width && y >= 0 && y < height; };\n    var isInterior = function(x, y) { return data[(y * width + x) * 4 + 3] > 10; };\n    for (var y = 0; y < height; ++ y) {\n        for (var x = 0; x < width; ++ x) {\n            var c = isInterior(x, y);\n            var t = isContains(x, y - 1) ? isInterior(x, y - 1) : false;\n            var b = isContains(x, y + 1) ? isInterior(x, y + 1) : false;\n            var l = isContains(x - 1, y) ? isInterior(x - 1, y) : false;\n            var r = isContains(x + 1, y) ? isInterior(x + 1, y) : false;\n            if (c !== t || c !== b || c !== l || c !== r) {\n                setD(x, y, 0);\n                setP(x, y, [x, y]);\n            } else {\n                setD(x, y, maxInt);\n                setP(x, y, [-1, -1]);\n            }\n        }\n    }\n    \n    var f = function (x, y, dir) {\n        var d1 = 1;\n        var d2 = Math.sqrt(2);\n        var dx;\n        var dy;\n        var od;\n        switch (dir) {\n            case "TL": dx = -1; dy = -1; od = d2; break;\n            case "T": dx = 0; dy = -1; od = d1; break;\n            case "TR": dx = 1; dy = -1; od = d2; break;\n            case "L": dx = -1; dy = 0; od = d1; break;\n            case "R": dx = 1; dy = 0; od = d1; break;\n            case "BL": dx = -1; dy = 1; od = d2; break;\n            case "B": dx = 0; dy = 1; od = d1; break;\n            case "BR": dx = 1; dy = 1; od = d2; break;\n        }\n        var b = isContains(x + dx, y + dy);\n        var cb = b ? getD(x + dx, y + dy) : maxInt;\n        if (cb + od < getD(x, y)) {\n            var p = b ? getP(x + dx, y + dy) : [-1, -1];\n            var dis = Math.sqrt(Math.pow(x - p[0], 2) + Math.pow(y - p[1], 2));\n            setP(x, y, p);\n            setD(x, y, dis);\n            if (dis > maxDis) {\n                maxDis = dis;\n            }\n        }\n    };\n    \n    for (var y = 0; y < height; ++ y) {\n        for (var x = 0; x < width; ++ x) {\n            var dirs = ["TL", "T", "TR", "L"];\n            for (var i = 0; i < dirs.length; ++ i) {\n                var dir = dirs[i];\n                f(x, y, dir);\n            }\n        }\n    }\n\n    for (var y = height - 1; y >= 0; -- y) {\n        for (var x = width - 1; x >= 0; -- x) {\n            var dirs = ["R", "BL", "B", "BR"];\n            for (var i = 0; i < dirs.length; ++ i) {\n                var dir = dirs[i];\n                f(x, y, dir);\n            }\n        }\n    }\n\n    var outputData = [];\n    for (var y = 0; y < height; ++ y) {\n        for (var x = 0; x < width; ++ x) {\n            outputData.push(isInterior(x, y) ? 255: 0);\n            outputData.push(0);\n            outputData.push(0);\n            outputData.push(Math.ceil(getD(x, y) / maxDis * 255));\n        }\n    }\n    self.postMessage({\n        key, outputData, maxDis\n    });\n};\n'],{type:"text/javascript"});t.worker=new Worker(URL.createObjectURL(i)),t.worker.onmessage=function(t){r.outputData.set(t.data.key,{data:t.data.outputData,maxDis:t.data.maxDis})},this.outputData.set("111","222")}}return x(t,[{key:"createSdfByWorker",value:function(e,n,r,i,o,a,s,u){var l=document.createElement("canvas");l.width=o,l.height=a;var c=l.getContext("2d");if(c&&t.worker){c.drawImage(s,e,n,r,i);var h=c.getImageData(0,0,o,a).data;t.worker.postMessage({data:h,key:u,width:o,height:a})}}},{key:"createSdf",value:function(t,e,n){var r=document.createElement("canvas");r.width=t,r.height=e;var i=r.getContext("2d");if(!i)return{src:"",maxDis:1};i.drawImage(n,0,0);for(var o=0,a=i.getImageData(0,0,t,e).data,s=[],u=[],l=function(e,n,r){s[n*t+e]=r},c=function(e,n){return s[n*t+e]},h=function(e,n,r){u[n*t+e]=r},d=function(n,r){return n>=0&&n<t&&r>=0&&r<e},A=function(e,n){return a[4*(n*t+e)+3]>10},f=0;f<e;++f)for(var p=0;p<t;++p){var g=A(p,f),v=!!d(p,f-1)&&A(p,f-1),m=!!d(p,f+1)&&A(p,f+1),y=!!d(p-1,f)&&A(p-1,f),b=!!d(p+1,f)&&A(p+1,f);g!==v||g!==m||g!==y||g!==b?(l(p,f,0),h(p,f,[p,f])):(l(p,f,Number.MAX_SAFE_INTEGER),h(p,f,[-1,-1]))}for(var w=function(e,n,r){var i,a,s,A=Math.sqrt(2);switch(r){case"TL":i=-1,a=-1,s=A;break;case"T":i=0,a=-1,s=1;break;case"TR":i=1,a=-1,s=A;break;case"L":i=-1,a=0,s=1;break;case"R":i=1,a=0,s=1;break;case"BL":i=-1,a=1,s=A;break;case"B":i=0,a=1,s=1;break;case"BR":i=1,a=1,s=A}var f=d(e+i,n+a);if((f?c(e+i,n+a):Number.MAX_SAFE_INTEGER)+s<c(e,n)){var p=f?function(e,n){return u[n*t+e]}(e+i,n+a):[-1,-1],g=Math.sqrt(Math.pow(e-p[0],2)+Math.pow(n-p[1],2));h(e,n,p),l(e,n,g),g>o&&(o=g)}},x=0;x<e;++x)for(var _=0;_<t;++_)for(var T=0,E=["TL","T","TR","L"];T<E.length;T++){w(_,x,E[T])}for(var S=e-1;S>=0;--S)for(var M=t-1;M>=0;--M)for(var C=0,I=["R","BL","B","BR"];C<I.length;C++){w(M,S,I[C])}for(var N=[],B=0;B<e;++B)for(var k=0;k<t;++k)N.push(0,0,0,Math.ceil(c(k,B)/o*255));return i.putImageData(new ImageData(Uint8ClampedArray.from(N),t,e),0,0),{src:r.toDataURL("image/png"),maxDis:o}}},{key:"getSdf",value:function(t,e,n){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,o,a,s,u,l,c,h,d,A,f=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Math.ceil(e.width),o=Math.ceil(e.height),a=Math.ceil(e.width-t.width)/2,s=Math.ceil(e.height-t.height)/2,r.next=3,this.localStorage.getItem("sdf-".concat(n,"-src"));case 3:return u=r.sent,r.next=6,this.localStorage.getItem("sdf-".concat(n,"-maxDis"));case 6:if(l=r.sent,u&&l||this.loadingSdfKeys.has(n)){r.next=24;break}return this.loadingSdfKeys.add(n),(c=this.renderer.plugins.extract.image(t,"image/png")).addEventListener("load",(function(){f.createSdfByWorker(a,s,t.width,t.height,i,o,c,n)})),c.addEventListener("error",(function(){return null})),r.next=14,function(t,e){return Of(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Date.now();case 1:if(f.outputData.has(n)||!(Date.now()-e<2e3)){t.next=6;break}return t.next=4,Uf(16);case 4:t.next=1;break;case 6:case"end":return t.stop()}}),t)})))}();case 14:if(this.loadingSdfKeys.delete(n),!(h=this.outputData.get(n))){r.next=24;break}if(this.outputData.delete(n),(d=document.createElement("canvas")).width=i,d.height=o,A=d.getContext("2d")){r.next=23;break}return r.abrupt("return",null);case 23:A.putImageData(new ImageData(Uint8ClampedArray.from(h.data),i,o),0,0),u=d.toDataURL("image/png"),l=h.maxDis,this.localStorage.setItem("sdf-".concat(n,"-src"),u).catch((function(){})),this.localStorage.setItem("sdf-".concat(n,"-maxDis"),l).catch((function(){}));case 24:return r.abrupt("return",u&&l?(document.createElement("img").src=u,_l.t.fromURL(u).then((function(t){return{texture:t,maxDis:l}})).catch((function(){return null}))):null);case 25:case"end":return r.stop()}}),r,this)})))}}]),t}();bm.worker=null;var wm=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},xm=function(){function t(e,n,r,i,o,a,s,u,l,c,h,d,A,f,p){b(this,t),this.loader=e,this.mode=n,this.renderer=r,this.ticker=i,this.view=o,this.clock=a,this.objPoolGroup=s,this.errorChannel=u,this.localstorage=l,this.logger=c,this.loaderDelegate=h,this.isPlayerPaused=d,this.maxResolution=A,this.volumeAdjuster=f,this.forceCanvas=p,this.currentStageIndex=0,this.cacheCount=ym.isDesktop()?2:1,this.stageStates=Object.create(null),this.stageJsons=Object.create(null),this.stageCtxs=Object.create(null),this.stageImpls=Object.create(null),this.taskId="",this.url="",this.runningAudio=new Map,this.activeMedia=new Set,this.microTaskManager=new hm(i),this.sdfManager=new bm(r,l)}return x(t,[{key:"setResourceData",value:function(t,e){this.taskId=t,this.url=e}},{key:"createCtx",value:function(t){var e=this;this.stageStates[t].task.addMTask((function(){return wm(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Yf(this.loader),r=new Os.a,i={taskId:this.taskId,mode:this.mode,renderer:this.renderer,graphicsTexture:new rp,stageWidth:0,stageHeight:0,ticker:this.ticker,timingTargets:new op(r),eventHub:r,view:this.view,medias:Object.create(null),lastViewedIndex:0,conflictTimeNodeManager:new ip,clock:this.clock,spriteTexture:n,slideIndex:t,objectPoolGroup:this.objPoolGroup,hasBackgroundFillShape:!1,slideScopeEventHub:new Os.a,logger:this.logger,sdfManager:this.sdfManager,loaderDelegate:this.loaderDelegate,runningAudio:this.runningAudio,activeMedia:this.activeMedia,isPlayerPaused:this.isPlayerPaused,timingEventHub:new Os.a,maxResolution:this.maxResolution,animatedIds:new Set,volumeAdjuster:this.volumeAdjuster,forceCanvas:this.forceCanvas},this.stageCtxs[t]=i;case 2:case"end":return e.stop()}}),e,this)})))}),"@StagePool[createCtx]")}},{key:"loadStageJson",value:function(t){var e=this;this.stageStates[t].task.addMTask((function(){return wm(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loader.fetchJson("".concat(this.url,"/").concat(this.taskId,"/jsonOutput/slide-").concat(t,".json"));case 2:n=e.sent,this.stageJsons[t]=n,this.stageCtxs[t].stageWidth=n.width,this.stageCtxs[t].stageHeight=n.height,this.stageCtxs[t].featureList=n.featureList;case 4:case"end":return e.stop()}}),e,this)})))}),"@StagePool[loadStageJson]")}},{key:"loadSpriteSheets",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){var r=e.stageJsons[t],i=e.stageCtxs[t],o=i.spriteTexture,a=i.stageWidth,s=i.stageHeight,u=r.coloredSheets,l=r.sheets,c=u||l;return c&&c.forEach((function(t){n.addSubMTask((function(){var n=1;if(a>e.maxResolution.x||s>e.maxResolution.y){var r=(n=e.maxResolution.x/a)*s;r>e.maxResolution.y&&(n*=e.maxResolution.y/r)}return o.loadSpriteSheetItem(e.url,e.taskId,t,n)}),"@StagePool[spriteTexture.loadSpriteSheetItem]")})),Promise.resolve()}),"@StagePool[loadSpriteSheets]")}},{key:"createStage",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){var r=e.stageJsons[t],i=e.stageCtxs[t],o=new cm(r,i,{x:0,y:0},n);return e.stageImpls[t]=o,Promise.resolve()}),"@StagePool[createStage]")}},{key:"preRenderStage",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){return e.stageImpls[t].preRender(n),Promise.resolve()}),"@StagePool[preRenderStage]")}},{key:"createGraphicsTexture",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){return wm(e,void 0,void 0,regeneratorRuntime.mark((function e(){var r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=this.stageCtxs[t]).graphicsTexture.pack().forEach((function(t,e){n.addSubMTask((function(){return r.graphicsTexture.render(t,e,i.objPoolGroup)}),"@StagePool[graphicsTexture.render]")}));case 2:case"end":return e.stop()}}),e,this)})))}),"@StagePool[createGraphicsTexture]")}},{key:"renderStage",value:function(t){var e=this,n=this.stageStates[t].task;n.addMTask((function(){return wm(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stageImpls[t].render(n);case 2:case"end":return e.stop()}}),e,this)})))}),"@StagePool[renderStage]")}},{key:"destroyStageByIndex",value:function(t){"load"===this.stageStates[t].state&&this.stageStates[t].task.cancel(),delete this.stageStates[t],this.stageImpls[t].destroy(),delete this.stageImpls[t],delete this.stageCtxs[t]}},{key:"destroyStage",value:function(){var t=this;Object.keys(this.stageImpls).forEach((function(e){var n=parseInt(e,10);Math.abs(t.currentStageIndex-n)>t.cacheCount&&t.destroyStageByIndex(n)}))}},{key:"destroyAllStage",value:function(){var t=this;Object.keys(this.stageImpls).forEach((function(e){var n=parseInt(e,10);t.destroyStageByIndex(n)}))}},{key:"preload",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.stageImpls[t]||this.stageStates[t])return Promise.resolve();var r=new Am(t,this.taskId,this.logger);return r.on("task-error",(function(t,n){delete e.stageStates[n],delete e.stageImpls[n],delete e.stageCtxs[n],e.errorChannel.emit("error",t,n)})),this.stageStates[t]={state:"load",task:r},this.createCtx(t),this.loadStageJson(t),this.loadSpriteSheets(t),this.createStage(t),this.preRenderStage(t),this.createGraphicsTexture(t),this.renderStage(t),this.microTaskManager.addTask(r),n?r.applyAll():new Promise((function(n){r.once("task-finish",(function(){e.stageStates[t].state="finish",Object.keys(e.stageStates).length>2*e.cacheCount+1&&e.destroyStage(),n()}))}))}},{key:"getStageJson",value:function(t){return this.stageJsons[t]||null}},{key:"getStage",value:function(t){return wm(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentStageIndex=t,"finish"!==(null==(n=this.stageStates[t])?void 0:n.state)||!this.stageImpls[t]){e.next=6;break}e.t0=this.stageImpls[t],e.next=16;break;case 6:if("load"!==(null==n?void 0:n.state)){e.next=12;break}return e.next=9,n.task.applyAll();case 9:e.t1=this.stageImpls[t],e.next=15;break;case 12:return e.next=14,this.preload(t,!0);case 14:e.t1=this.stageImpls[t];case 15:e.t0=e.t1;case 16:return e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){this.runningAudio.clear()}}]),t}(),_m=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Tm=function(){function t(e){var n,r=this;b(this,t),this.logger=e,this.taskId="",this.isIndexDBReady=!1,this.memoryCache=new Map,null===(n=t.localCache)||void 0===n||n.ready((function(t){t||(r.isIndexDBReady=!0)})).catch((function(){e.warn("local storage not ready",r.taskId)}))}return x(t,[{key:"attachTaskId",value:function(t){this.taskId=t}},{key:"getItem",value:function(e){return _m(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=null,!this.couldUseIndexDBCache||!t.localCache){n.next=10;break}return n.prev=2,n.next=5,jf((function(){return t.localCache.getItem("".concat(i.taskId,"/").concat(e))}),500);case 5:r=n.sent,n.next=10;break;case 8:n.prev=8,n.t0=n.catch(2);case 10:return n.abrupt("return",(r=r===Ff?null:r)||this.memoryCache.get(e)||null);case 11:case"end":return n.stop()}}),n,this,[[2,8]])})))}},{key:"setItem",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _m(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o,a=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.couldUseIndexDBCache){i.next=2;break}return i.abrupt("return",(r&&this.memoryCache.set(e,n),Promise.resolve()));case 2:if(!t.localCache){i.next=13;break}return o=null,i.prev=4,i.next=7,jf((function(){return t.localCache.setItem("".concat(a.taskId,"/").concat(e),n).catch((function(){r&&a.memoryCache.set(e,n)}))}),500);case 7:o=i.sent,i.next=12;break;case 10:i.prev=10,i.t0=i.catch(4);case 12:o!==Ff&&null!==o||!r||this.memoryCache.set(e,n);case 13:case"end":return i.stop()}}),i,this,[[4,10]])})))}},{key:"dispose",value:function(){var e,n=this;this.memoryCache=new Map,this.couldUseIndexDBCache&&(null===(e=t.localCache)||void 0===e||e.keys().then((function(e){e.filter((function(t){return t.indexOf(n.taskId)>=0})).forEach((function(e){var n;null===(n=t.localCache)||void 0===n||n.removeItem(e).catch((function(){}))}))})).catch((function(){})))}},{key:"couldUseIndexDBCache",get:function(){return this.isIndexDBReady&&this.taskId.length>0}}]),t}();Tm.localCache=null;try{Tm.localCache=m.createInstance({name:"slide_local_cache",driver:m.INDEXEDDB,version:1})}catch(t){}var Em=new Al.j,Sm=function(){function t(e){b(this,t),this.localStorage=e}return x(t,[{key:"canvas",value:function(e,n,r,i){var o,a,s,u=!1,l=!1;e&&(e instanceof _l.p?s=e:(s=n.generateTexture(e),l=!0)),s?(o=s.baseTexture.resolution,a=s.frame,u=!1,n.renderTexture.bind(s)):(o=n.resolution,u=!0,(a=Em).width=n.width,a.height=n.height,n.renderTexture.bind(null));var c=Math.floor(a.width*o+1e-4),h=Math.floor(a.height*o+1e-4),d=document.createElement("canvas");d.width=c,d.height=h;var A=d.getContext("2d");if(!A)throw new Error("ctx");if(r)A.putImageData(r,0,0);else{var f=A.getImageData(0,0,c,h),p=new Uint8Array(4*c*h),g=n.gl;g.readPixels(a.x*o,a.y*o,c,h,g.RGBA,g.UNSIGNED_BYTE,p),t.arrayPostDivide(p,f.data),A.putImageData(f,0,0),i&&this.localStorage.setItem(i,f).catch((function(){}))}if(u){var v=document.createElement("canvas");v.width=c,v.height=h;var m=v.getContext("2d");m.scale(1,-1),m.drawImage(d,0,-h),d=v}return l&&(null==s||s.destroy(!0)),d}}],[{key:"arrayPostDivide",value:function(t,e){for(var n=0;n<t.length;n+=4){var r=e[n+3]=t[n+3];0!==r?(e[n]=Math.round(Math.min(255*t[n]/r,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/r,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/r,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}}}]),t}(),Mm=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments))._volume=.5,t}return x(n,[{key:"volume",get:function(){return this._volume},set:function(t){t<0&&(t=0),t>1&&(t=1),this._volume=t,this.emit("update",this._volume)}}]),n}(Os.a),Cm=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};cl.skipHello();var Im={randomBar:"RandomLines",circle:"Shape",ripple:"Ripples",wipe:"Erase",dissolve:"Dissolve",morph:"Smooth",fade:"FadeInOut",push:"Push",split:"Separation",reveal:"Display",pull:"Uncover",cover:"Cover",flash:"Flash",checker:"Checkerboard",blinds:"WindowShades",curtains:"Curtain",fallOver:"Fall",drape:"Suspension",wheel:"Clock",comb:"Combing",warp:"Scale",peelOff:"PeelOff",flip:"Flip"},Nm={mainSeqStepChange:"mainSeqStepChange",mainSeqStateChange:"mainSeqStateChange",interactiveSeqStateChange:"interactiveSeqStateChange",interactiveSeqAction:"interactiveSeqAction",mainSeqStepStart:"mainSeqStepStart",mainSeqStepEnd:"mainSeqStepEnd",slideChange:"slideChange",renderStart:"renderStart",renderEnd:"renderEnd",hyperlinkTrigger:"hyperlinkTrigger",animateStart:"animateStart",animateEnd:"animateEnd",mediaSeek:"mediaSeek",mediaPlay:"mediaPlay",mediaPause:"mediaPause",mediaStop:"mediaStop",requestNextSlide:"requestNextSlide",requestPrevSlide:"requestPrevSlide",requestGotoSlide:"requestGotoSlide",userInput:"userInput"},Bm=function(t){A(n,t);var e=p(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(this,n),(r=e.call(this)).errorChannel=new Os.a,r.transactionPlayer=null,r.isForward=!0,r.drawCall=0,r.scale=1,r._isPaused=!1,r.maxResolution=new Al.g(0,0),r.isNVIDIA=!1,r.fps=new Bf,r.designWidth=0,r.designHeight=0,r.currentIndex=0,r.slideCount=0,r.runtime={drawCall:0,fps:0},r.isPlayerPaused=function(){return r._isPaused},r.onWebGLLost=function(){r.errorChannel.emit("error",new kf(Sf.CanvasCrash,"webgl context lost."))},r.logger=t.logger,r.mode=t.mode,r.volumeAdjuster=t.volumeAdjuster,r.localStorage=new Tm(r.logger),r.cachedExtract=new Sm(r.localStorage),r.config={minFPS:js()(i.minFPS)?30:i.minFPS,maxFPS:js()(i.maxFPS)?40:i.maxFPS,resolution:js()(i.resolution)?1:i.resolution,autoFPS:!js()(i.autoFPS)&&i.autoFPS,autoResolution:!js()(i.autoResolution)&&i.autoResolution,transactionBgColor:js()(i.transactionBgColor)?0:i.transactionBgColor,maxResolutionLevel:r.getMaxResolution(i.maxResolutionLevel),forceCanvas:!js()(i.forceCanvas)&&i.forceCanvas,enableNvidiaDetect:!js()(i.enableNvidiaDetect)&&i.enableNvidiaDetect},r.updateMaxResolutionLevel(r.config.maxResolutionLevel),r.loader=new Qf(r.localStorage,t.useLocalCache,r.logger,t.resourceTimeout,t.loadDelegate),r.app=new Tl({antialias:!0,autoDensity:!1,backgroundColor:16777215,forceCanvas:r.config.forceCanvas}),r.updateConfig(r.config),r.app.ticker.maxFPS=60,r.app.ticker.minFPS=r.config.minFPS,r.app.ticker.maxFPS=r.config.maxFPS,r.app.view.style.zIndex="1",r.app.stage.sortableChildren=!0;var o=r.app.renderer;if(o.gl){var a=o.gl.drawElements,s=o.gl.getExtension("WEBGL_debug_renderer_info"),u=o.gl.getParameter(s.UNMASKED_RENDERER_WEBGL);/nvidia/i.test(u)&&r.config.enableNvidiaDetect&&(r.isNVIDIA=!0),o.gl.drawElements=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.call.apply(a,[o.gl].concat(e)),r.drawCall+=1}}r.fps.on("update",(function(t){if(t<r.config.minFPS){if(r.config.autoResolution){var e=.7*r.scale,n=r.app.renderer.resolution,i=Math.max(e,n-.1);i>=e&&r.updateResolution(i)}}else if(t>r.config.maxFPS&&r.config.autoResolution){var o=r.scale*r.config.resolution,a=r.app.renderer.resolution,s=Math.min(o,a+.1);s<=r.config.resolution&&r.updateResolution(s)}})),r.app.ticker.add((function(){r.runtime.drawCall=r.drawCall,r.runtime.fps=Math.floor(r.app.ticker.minFPS),r.drawCall=0}),null,fl.c.LOW),r.clock=new Gf(r.app.ticker),r.objPoolGroup=Rf(),r.stagePool=new xm(r.loader,r.mode,r.app.renderer,r.app.ticker,r.app.view,r.clock,r.objPoolGroup,r.errorChannel,r.localStorage,r.logger,t.loadDelegate,r.isPlayerPaused,r.maxResolution,r.volumeAdjuster,r.config.forceCanvas),r.app.view.addEventListener("webglcontextlost",r.onWebGLLost);try{r.config.forceCanvas||(r.transactionPlayer=new ll)}catch(t){/Error creating WebGL context/.test(t.message)?r.errorChannel.emit("error",new kf(Sf.CanvasCrash,"webgl context lost.")):r.errorChannel.emit("error",new kf(Sf.RuntimeWarn,t.message))}return r}return x(n,[{key:"getMaxResolution",value:function(t){return!js()(t)&&Number.isInteger(t)?(t<1&&(t=1),t>4&&(t=4),t):n.platform.isAndroid()||n.platform.isIOS()?2:4}},{key:"updateMaxResolutionLevel",value:function(t){t<1&&(t=1),t>4&&(t=4);var e=[999999,960,1280,1920,3200][t],n=[999999,540,720,1080,1800][t];this.maxResolution.set(e,n)}},{key:"updateConfig",value:function(t){js()(t.maxFPS)||js()(t.minFPS)||(this.config.maxFPS=t.maxFPS,this.app.ticker.maxFPS=t.maxFPS,this.config.minFPS=t.minFPS,this.app.ticker.minFPS=t.minFPS),js()(t.resolution)||(this.config.resolution=t.resolution,this.updateResolution(this.scale*this.config.resolution)),js()(t.autoFPS)||(this.config.autoFPS=t.autoFPS),js()(t.autoResolution)||(this.config.autoResolution=t.autoResolution),js()(t.transactionBgColor)||(this.config.transactionBgColor=t.transactionBgColor),this.taskId&&this.logger.info("ppt player update config: "+JSON.stringify(this.config),this.taskId),js()(t.maxResolutionLevel)||(this.config.maxResolutionLevel=t.maxResolutionLevel,this.updateMaxResolutionLevel(this.config.maxResolutionLevel))}},{key:"preload",value:function(t){return Cm(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t<1||t>this.slideCount,e.t0){e.next=6;break}return this.logger.info("preload slide ".concat(t," begin"),this.taskId),e.next=5,this.stagePool.preload(t);case 5:this.logger.info("preload slide ".concat(t," end"),this.taskId);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"setResourceData",value:function(t,e){this.logger.info("ppt player init config: "+JSON.stringify(this.config),t),this.logger.info("set resource to "+e,t),this.taskId=t,this.url=e,this.stagePool.setResourceData(t,e),this.localStorage.attachTaskId(t),this.loader.attachTaskId(t)}},{key:"setInteractive",value:function(t){this.app.stage.interactive=t,this.app.stage.interactiveChildren=t}},{key:"translateEvent",value:function(t,e){var n=this;e.forEach((function(e){t.on(e,(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.emit.apply(n,[e].concat(r))}))}))}},{key:"renderSlide",value:function(t){var e,n,r;return Cm(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o,a,s,u,l,c,h,d,A,f,p,g,v,m=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!this._isPaused){i.next=2;break}return i.abrupt("return",void this.logger.info("ppt play prevent render slide with paused state",this.taskId));case 2:return this.logger.info("render slide "+t,this.taskId),this.emit(Nm.renderStart,t),i.next=5,this.stagePool.getStage(t);case 5:return o=i.sent,a="snapshot-".concat(t,"-").concat(this.isForward?"start":"end"),i.next=9,this.localStorage.getItem(a);case 9:if(s=i.sent,o){i.next=12;break}return i.abrupt("return");case 12:if(this.translateEvent(o.ctx.eventHub,[Nm.mainSeqStepChange,Nm.mainSeqStateChange,Nm.hyperlinkTrigger,Nm.interactiveSeqAction,Nm.mainSeqStepStart,Nm.mainSeqStepEnd,Nm.animateStart,Nm.animateEnd,Nm.mediaPlay,Nm.mediaPause,Nm.mediaSeek,Nm.mediaStop,Nm.requestGotoSlide,Nm.requestNextSlide,Nm.requestPrevSlide,Nm.interactiveSeqStateChange,Nm.userInput]),this.currentIndex=Number(t),u=o.json,l=u.width,c=u.height,h=u.slideCount,this.slideCount=h,this.designWidth=l,this.designHeight=c,null===(e=this.currentStage)||void 0===e||e.clearOnSlideChange(),d=this.currentStage,this.currentStage=o,o.initOnReuse(),o.createTiming(),o.container.visible=!0,o.collectMainSeqStartValue(),this.isForward?o.setMainSeqStep(0,"start"):o.setMainSeqStep(-1,"end"),A=!1,o.json.transition&&o.json.transition.type&&this.app.stage.children.length>0&&this.view&&d&&(f=o.json.transition,!this.isForward&&(null==d?void 0:d.json.transition)&&(f=d.json.transition),p=this.getTransactionTexture(d,this.view,null,null),this.initTransactionPlayer(f),null===(n=this.transactionPlayer)||void 0===n||n.setPrevTexture(p),A=!0),this.app.stage.addChild(o.container),this.updateResolution(this.config.resolution*this.scale),d&&(d.clearOnTransactionEnd(),this.app.stage.removeChild(d.container)),!(o.json.transition&&o.json.transition.type&&this.app.stage.children.length>0&&this.view&&this.transactionPlayer&&A)){i.next=29;break}return i.next=22,this.getTransactionTexture(o,this.view,a,s);case 22:return g=i.sent,this.transactionPlayer.setNextTexture(g),i.next=26,this.transactionPlayer.play();case 26:if(v=this.transactionPlayer.renderer.domElement,this.view.parentElement&&v)try{this.view.parentElement.removeChild(v)}catch(t){}null===(r=this.transactionPlayer)||void 0===r||r.dispose();case 29:if(!this.isForward){i.next=34;break}return i.next=32,o.startTiming();case 32:i.next=35;break;case 34:o.setMainSeqApplied();case 35:o.ctx.slideScopeEventHub.emit("slide-render",o.ctx.slideIndex),this.emit(Nm.renderEnd,t),this.emit(Nm.slideChange,t),this.preload(t+1).catch((function(e){m.errorChannel.emit("error",kf.transform(e),t+1)})),this.preload(t-1).catch((function(e){m.errorChannel.emit("error",kf.transform(e),t-1)}));case 40:case"end":return i.stop()}}),i,this)})))}},{key:"getTransactionTexture",value:function(t,e,n,r){var i=_l.p.create({width:t.json.width,height:t.json.height,resolution:1});this.app.renderer.render(t.container,{renderTexture:i});var o=this.cachedExtract.canvas(i,this.app.renderer,r,n);return new H(o)}},{key:"renderToBase64",value:function(t,e,n){return Cm(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,o,a,s,u,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.stagePool.getStage(t);case 2:if(!(i=r.sent)){r.next=10;break}return o=i.json,a=o.width,s=o.height,this.designWidth=a,this.designHeight=s,u=_l.p.create({width:this.designWidth,height:this.designHeight,resolution:e}),i.container.visible=!0,this.app.renderer.render(i.container,{renderTexture:u}),l=this.app.renderer.plugins.extract.base64(u,n),r.abrupt("return",(this.stagePool.destroyStageByIndex(t),l));case 10:return r.abrupt("return","__null__");case 11:case"end":return r.stop()}}),r,this)})))}},{key:"renderMainSeqToBase64",value:function(t,e,n){return Cm(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,o,a,s,u,l,c,h,d,A;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=[],r.next=3,this.stagePool.getStage(t);case 3:if((o=r.sent).createTiming(),o){for(a=o.json,s=a.width,u=a.height,this.designWidth=s,this.designHeight=u,l=_l.p.create({width:this.designWidth,height:this.designHeight,resolution:e}),o.container.visible=!0,c=o.mainSeqLength(),o.setMainSeqStep(0,"start"),this.app.renderer.render(o.container,{renderTexture:l}),h=this.app.renderer.plugins.extract.base64(l,n),i.push(h),d=0;d<c;d+=1)o.setMainSeqStep(d,"end"),this.app.renderer.render(o.container,{renderTexture:l}),A=this.app.renderer.plugins.extract.base64(l,n),i.push(A);this.stagePool.destroyStageByIndex(t)}return r.abrupt("return",i);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"snapshotWithTimingEnd",value:function(t){return Cm(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stagePool.getStage(t);case 2:if(!(n=e.sent)){e.next=10;break}return r=n.json,i=r.width,o=r.height,this.designWidth=i,this.designHeight=o,a=_l.p.create({width:this.designWidth,height:this.designHeight,resolution:1}),n.container.visible=!0,n.createTiming(),n.setMainSeqStep(-1,"end"),this.app.renderer.render(n.container,{renderTexture:a}),s=this.app.renderer.plugins.extract.base64(a,"image/png"),e.abrupt("return",(t!==this.currentIndex&&this.stagePool.destroyStageByIndex(t),s));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"getBase64",value:function(t){if(!t.container.transform)return null;var e=_l.p.create({width:this.designWidth,height:this.designHeight,resolution:1});this.app.renderer.render(t.container,{renderTexture:e});var n=this.app.renderer.plugins.extract.base64(e,"image/jpeg");return e.destroy(!0),n}},{key:"initTransactionPlayer",value:function(t){var e,n,r,i,o,a=null===(e=this.view)||void 0===e?void 0:e.parentElement;if(this.view&&a&&Im[t.type]&&this.transactionPlayer){var s=null===(n=this.transactionPlayer)||void 0===n?void 0:n.renderer.domElement;this.transactionPlayer.initPlayer({reverse:!this.isForward,stageWidth:this.view.width,stageHeight:this.view.height,presetType:Im[t.type],duration:null===(i=null===(r=this.currentStage)||void 0===r?void 0:r.json.transition)||void 0===i?void 0:i.dur,delay:0,clearColor:this.config.transactionBgColor,maxFPS:Math.ceil(null!==(o=this.config.maxFPS)&&void 0!==o?o:60),options:t.options}),s&&(s.style.position="absolute",s.style.zIndex="9",s.style.left="0",s.style.top="0",s.style.width=this.view.style.width,s.style.height=this.view.style.height),a.appendChild(s)}}},{key:"scaleView",value:function(t,e,n){var r;this.view&&(this.view.style.width=Math.floor(this.designWidth*t)+"px",this.view.style.height=Math.floor(this.designHeight*t)+"px");var i=null===(r=this.transactionPlayer)||void 0===r?void 0:r.renderer.domElement;if(i&&this.view&&(i.style.width=this.view.style.width,i.style.height=this.view.style.height),e){this.scale=t;var o=this.scale*this.config.resolution;this.updateResolution(o,n)}}},{key:"updateResolution",value:function(t,e){var n=this;this.app.ticker.addOnce((function(){for(var r=ym.isDesktop()?t:1;r*n.designWidth>n.maxResolution.x||r*n.designHeight>n.maxResolution.y;)r-=.1;n.app.renderer.resolution=r,n.app.renderer.plugins.interaction.resolution=n.app.renderer.resolution,n.app.renderer.resize(n.designWidth,n.designHeight),Fs()(e)&&e()}))}},{key:"nextStep",value:function(t,e){var n;if(this._isPaused)this.logger.info("ppt play prevent next step with paused state",this.taskId);else{this.logger.info("ppt play trigger next step",this.taskId);try{null===(n=this.currentStage)||void 0===n||n.nextStep(t,e)}catch(t){this.errorChannel.emit("error",kf.transform(t),this.currentIndex)}}}},{key:"prevStep",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._isPaused)this.logger.info("ppt play prevent prev step with paused state",this.taskId);else{this.logger.info("ppt play trigger prev step",this.taskId);try{null===(t=this.currentStage)||void 0===t||t.prevStep(e)}catch(t){this.errorChannel.emit("error",kf.transform(t),this.currentIndex)}}}},{key:"mainSeqLength",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqLength())&&void 0!==e?e:0}},{key:"mainSeqStep",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqStep())&&void 0!==e?e:0}},{key:"setMainSeqStep",value:function(t,e){var n;null===(n=this.currentStage)||void 0===n||n.setMainSeqStep(t,e)}},{key:"mainSeqState",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqState())&&void 0!==e?e:null}},{key:"mainSeqHasNextStep",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqHasNextStep())&&void 0!==e&&e}},{key:"mainSeqHasPrevStep",value:function(){var t,e;return null!==(e=null===(t=this.currentStage)||void 0===t?void 0:t.mainSeqHasPrevStep())&&void 0!==e&&e}},{key:"nextTick",value:function(t){this.app.ticker.addOnce((function(){t()}),fl.c.LOW)}},{key:"applyInteractiveAction",value:function(t){var e;null===(e=this.currentStage)||void 0===e||e.applyInteractiveAction(t)}},{key:"seekInteractiveSeqToEnd",value:function(t){var e;null===(e=this.currentStage)||void 0===e||e.seekInteractiveSeqToEnd(t)}},{key:"setInteractiveSeqState",value:function(t,e,n){var r;null===(r=this.currentStage)||void 0===r||r.setInteractiveSeqState(t,e,n)}},{key:"setMediaState",value:function(t,e){var n;return Cm(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,null===(n=this.currentStage)||void 0===n?void 0:n.setMediaState(t,e);case 2:case"end":return r.stop()}}),r,this)})))}},{key:"setMediaCurrentTime",value:function(t,e){var n;null===(n=this.currentStage)||void 0===n||n.setMediaCurrentTime(t,e)}},{key:"pause",value:function(){var t;this.app.ticker.stop(),null===(t=this.currentStage)||void 0===t||t.ctx.activeMedia.forEach((function(t){t.globalPause()})),this._isPaused=!0}},{key:"resume",value:function(){var t;this._isPaused=!1,this.app.ticker.start(),null===(t=this.currentStage)||void 0===t||t.ctx.activeMedia.forEach((function(t){t.globalResume()}))}},{key:"getSnapshot",value:function(){return this.currentStage&&this.getBase64(this.currentStage)||""}},{key:"clearLocalCache",value:function(){this.localStorage.dispose()}},{key:"destroy",value:function(){var t,e;try{this.app.view.removeEventListener("webglcontextlost",this.onWebGLLost);try{this.app.renderer.filter.texturePool.clear(!0)}catch(t){}ep.collectObjectByGroup(this.objPoolGroup),np.collectObjectByGroup(this.objPoolGroup),null===(t=this.transactionPlayer)||void 0===t||t.destroy(),this.loader.destroy(),this.fps.destroy(),this.stagePool.destroyAllStage(),this.stagePool.destroy();try{this.app.renderer.gl.getExtension("WEBGL_lose_context").loseContext()}catch(t){}this.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),null===(e=bm.worker)||void 0===e||e.terminate()}catch(t){}}},{key:"view",get:function(){return this.app.renderer?this.app.view:null}},{key:"nextSlideIndex",get:function(){var t;return null!==(t=this.currentStage)&&void 0!==t&&t.json.nextIndex?this.currentStage.json.nextIndex:this.currentIndex+1}},{key:"prevSlideIndex",get:function(){var t;return null!==(t=this.currentStage)&&void 0!==t&&t.json.prevIndex?this.currentStage.json.prevIndex:this.currentIndex-1}}],[{key:"clearLocalCache",value:function(){var t;null===(t=Tm.localCache)||void 0===t||t.clear().catch((function(){}))}}]),n}(Os.a);Bm.platform=ym,Bm.RtcAudioClazz=null;var km=new Map;function Pm(t){var e=km.get(t.hookPoint)||[];e.push(t),km.set(t.hookPoint,e)}var Dm,Lm=n(132),Om=n.n(Lm),Rm=n(47),Fm=n.n(Rm),Um=n(48),jm=n.n(Um),zm=[],Hm="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(Dm||(Dm={}));var Qm,Gm=function(t){return Object.freeze(t)},Vm=function(t,e){this.inlineSize=t,this.blockSize=e,Gm(this)},Wm=function(){function t(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Gm(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Ym=function(t){return t instanceof SVGElement&&"getBBox"in t},Xm=function(t){if(Ym(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||t.getClientRects().length)},qm=function(t){var e;if(t instanceof Element)return!0;var n=null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},Km="undefined"!=typeof window?window:{},Zm=new WeakMap,Jm=/auto|scroll/,$m=/^tb|vertical/,ty=/msie|trident/i.test(Km.navigator&&Km.navigator.userAgent),ey=function(t){return parseFloat(t||"0")},ny=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),new Vm((n?e:t)||0,(n?t:e)||0)},ry=Gm({devicePixelContentBoxSize:ny(),borderBoxSize:ny(),contentBoxSize:ny(),contentRect:new Wm(0,0,0,0)}),iy=function(t,e){if(void 0===e&&(e=!1),Zm.has(t)&&!e)return Zm.get(t);if(Xm(t))return Zm.set(t,ry),ry;var n=getComputedStyle(t),r=Ym(t)&&t.ownerSVGElement&&t.getBBox(),i=!ty&&"border-box"===n.boxSizing,o=$m.test(n.writingMode||""),a=!r&&Jm.test(n.overflowY||""),s=!r&&Jm.test(n.overflowX||""),u=r?0:ey(n.paddingTop),l=r?0:ey(n.paddingRight),c=r?0:ey(n.paddingBottom),h=r?0:ey(n.paddingLeft),d=r?0:ey(n.borderTopWidth),A=r?0:ey(n.borderRightWidth),f=r?0:ey(n.borderBottomWidth),p=h+l,g=u+c,v=(r?0:ey(n.borderLeftWidth))+A,m=d+f,y=s?t.offsetHeight-m-t.clientHeight:0,b=a?t.offsetWidth-v-t.clientWidth:0,w=i?p+v:0,x=i?g+m:0,_=r?r.width:ey(n.width)-w-b,T=r?r.height:ey(n.height)-x-y,E=_+p+b+v,S=T+g+y+m,M=Gm({devicePixelContentBoxSize:ny(Math.round(_*devicePixelRatio),Math.round(T*devicePixelRatio),o),borderBoxSize:ny(E,S,o),contentBoxSize:ny(_,T,o),contentRect:new Wm(h,u,_,T)});return Zm.set(t,M),M},oy=function(t,e,n){var r=iy(t,n),i=r.borderBoxSize,o=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(e){case Dm.DEVICE_PIXEL_CONTENT_BOX:return a;case Dm.BORDER_BOX:return i;default:return o}},ay=function(t){var e=iy(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=Gm([e.borderBoxSize]),this.contentBoxSize=Gm([e.contentBoxSize]),this.devicePixelContentBoxSize=Gm([e.devicePixelContentBoxSize])},sy=function(t){if(Xm(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},uy=function(){var t=1/0,e=[];zm.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(e){var n=new ay(e.target),i=sy(e.target);r.push(n),e.lastReportedSize=oy(e.target,e.observedBox),i<t&&(t=i)})),e.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=e;n<r.length;n++)(0,r[n])();return t},ly=function(t){zm.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(sy(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},cy=[],hy=0,dy={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ay=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],fy=function(t){return void 0===t&&(t=0),Date.now()+t},py=!1,gy=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!py){py=!0;var n,r=fy(t);n=function(){var n=!1;try{n=function(){var t,e=0;for(ly(e);zm.some((function(t){return t.activeTargets.length>0}));)e=uy(),ly(e);return zm.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:Hm}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=Hm),window.dispatchEvent(t)),e>0}()}finally{if(py=!1,t=r-fy(),!hy)return;n?e.run(1e3):t>0?e.run(t):e.start()}},function(t){if(!Qm){var e=0,n=document.createTextNode("");new MutationObserver((function(){return cy.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),Qm=function(){n.textContent="".concat(e?e--:e++)}}cy.push(t),Qm()}((function(){requestAnimationFrame(n)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,dy)};document.body?e():Km.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ay.forEach((function(e){return Km.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Ay.forEach((function(e){return Km.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),vy=function(t){!hy&&t>0&&gy.start(),!(hy+=t)&&gy.stop()},my=function(){function t(t,e){this.target=t,this.observedBox=e||Dm.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=oy(this.target,this.observedBox,!0);return t=this.target,Ym(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),yy=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},by=new WeakMap,wy=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},xy=function(){function t(){}return t.connect=function(t,e){var n=new yy(t,e);by.set(t,n)},t.observe=function(t,e,n){var r=by.get(t),i=0===r.observationTargets.length;wy(r.observationTargets,e)<0&&(i&&zm.push(r),r.observationTargets.push(new my(e,n&&n.box)),vy(1),gy.schedule())},t.unobserve=function(t,e){var n=by.get(t),r=wy(n.observationTargets,e),i=1===n.observationTargets.length;r>=0&&(i&&zm.splice(zm.indexOf(n),1),n.observationTargets.splice(r,1),vy(-1))},t.disconnect=function(t){var e=this,n=by.get(t);n.observationTargets.slice().forEach((function(n){return e.unobserve(t,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},t}(),_y=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");xy.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qm(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");xy.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qm(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");xy.unobserve(this,t)},t.prototype.disconnect=function(){xy.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),Ty=function(){function t(t,e,n,r,i){this.state="idle",this.index=-1,this.slideIndex=-1,this.fn=n,this.index=t,this.slideIndex=e,this.eventHub=r,this.id=i}return t.prototype.apply=function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var t;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:this.eventHub.emit("task-start",this),e.label=1;case 1:return e.trys.push([1,3,,4]),this.state="start",[4,this.fn()];case 2:return e.sent(),this.state="end",this.eventHub.emit("task-end",this),[3,4];case 3:return t=e.sent(),this.eventHub.emit("task-error",{task:this,error:t}),[3,4];case 4:return[2]}}))}))},t}(),Ey=function(){function t(){var t=this;this.eventHub=new Os.a,this.tasks=[],this.index=0,this.eventHub.on("task-end",(function(e){var n,r=t.tasks.findIndex((function(t){return t.index===e.index})),i=r+1;i>=0&&(null===(n=t.tasks[i])||void 0===n||n.apply()),r>=0&&(t.tasks.splice(r,1),t.replaceIdleTask()),t.eventHub.emit("task-end-"+e.id)})),this.eventHub.on("task-error",(function(e){var n=e.task,r=t.tasks.findIndex((function(t){return t.index===n.index}));r>=0&&(t.tasks.splice(r,1),t.replaceIdleTask())}))}return t.prototype.replaceIdleTask=function(){for(var t,e=this,n=new Set,r=0,i=this.tasks.length;r<i;r++)"idle"===this.tasks[r].state&&"idle"===(null===(t=this.tasks[r+1])||void 0===t?void 0:t.state)&&n.add(r);Array.from(n).forEach((function(t){e.tasks.splice(t,1)}))},t.prototype.addTask=function(t,e,n){var r=new Ty(this.index++,e,t,this.eventHub,n);this.tasks.push(r),this.tasks.sort((function(t,e){return t.index-e.index})),this.replaceIdleTask(),1===this.tasks.length&&r.apply()},t.prototype.hasStartTask=function(){return this.tasks.some((function(t){return"start"===t.state}))},t.prototype.destroy=function(){this.eventHub.removeAllListeners()},t}();function Sy(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),o=Math.round(t.b),a=t.a,s=Math.round(t.h),u=t.s.toFixed(1),l=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=t.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+l+",a:"+a+"}":"unknown format"}var My=Array.prototype.forEach,Cy=Array.prototype.slice,Iy={BREAK:{},extend:function(t){return this.each(Cy.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(Cy.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=Cy.call(arguments);return function(){for(var e=Cy.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(My&&t.forEach&&t.forEach===My)t.forEach(e,n);else if(t.length===t.length+0){var r,i=void 0;for(i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===this.BREAK)return}else for(var o in t)if(e.call(n,t[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var i=this,o=arguments;function a(){r=null,n||t.apply(i,o)}var s=n||!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}},toArray:function(t){return t.toArray?t.toArray():Cy.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},Ny=[{litmus:Iy.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:Sy},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:Sy},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:Sy},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:Sy}}},{litmus:Iy.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:Iy.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:Iy.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(Iy.isNumber(t.r)&&Iy.isNumber(t.g)&&Iy.isNumber(t.b)&&Iy.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(Iy.isNumber(t.r)&&Iy.isNumber(t.g)&&Iy.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(Iy.isNumber(t.h)&&Iy.isNumber(t.s)&&Iy.isNumber(t.v)&&Iy.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(Iy.isNumber(t.h)&&Iy.isNumber(t.s)&&Iy.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],By=void 0,ky=void 0,Py=function(){ky=!1;var t=arguments.length>1?Iy.toArray(arguments):arguments[0];return Iy.each(Ny,(function(e){if(e.litmus(t))return Iy.each(e.conversions,(function(e,n){if(By=e.read(t),!1===ky&&!1!==By)return ky=By,By.conversionName=n,By.conversion=e,Iy.BREAK})),Iy.BREAK})),ky},Dy=void 0,Ly={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=t===i?(e-n)/o:e===i?2+(n-t)/o:4+(t-e)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(Dy=8*e)|t&~(255<<Dy)}},Oy="function"==typeof Symbol&&"symbol"==_(Symbol.iterator)?function(t){return _(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_(t)},Ry=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Fy=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Uy=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},jy=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},zy=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_(e)&&"function"!=typeof e?t:e},Hy=function(){function t(){if(Ry(this,t),this.__state=Py.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Fy(t,[{key:"toString",value:function(){return Sy(this)}},{key:"toHexString",value:function(){return Sy(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function Qy(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||Hy.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(Hy.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function Gy(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||Hy.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(Hy.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}Hy.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=Ly.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");Iy.extend(t.__state,Ly.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},Hy.recalculateHSV=function(t){var e=Ly.rgb_to_hsv(t.r,t.g,t.b);Iy.extend(t.__state,{s:e.s,v:e.v}),Iy.isNaN(e.h)?Iy.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},Hy.COMPONENTS=["r","g","b","h","s","v","hex","a"],Qy(Hy.prototype,"r",2),Qy(Hy.prototype,"g",1),Qy(Hy.prototype,"b",0),Gy(Hy.prototype,"h"),Gy(Hy.prototype,"s"),Gy(Hy.prototype,"v"),Object.defineProperty(Hy.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(Hy.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=Ly.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var Vy=function(){function t(e,n){Ry(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return Fy(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),Wy={};Iy.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){Iy.each(t,(function(t){Wy[t]=e}))}));var Yy=/(\d+(\.\d+)?)px/;function Xy(t){if("0"===t||Iy.isUndefined(t))return 0;var e=t.match(Yy);return Iy.isNull(e)?0:parseFloat(e[1])}var qy={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,i=e;Iy.isUndefined(i)&&(i=!0),Iy.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var i=n||{},o=Wy[e];if(!o)throw new Error("Event type "+e+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var s=i.x||i.clientX||0,u=i.y||i.clientY||0;a.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=a.initKeyboardEvent||a.initKeyEvent;Iy.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(e,i.bubbles||!1,i.cancelable||!0)}Iy.defaults(a,r),t.dispatchEvent(a)},bind:function(t,e,n,r){var i=r||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),qy},unbind:function(t,e,n,r){var i=r||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),qy},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return qy},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return qy},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return Xy(e["border-left-width"])+Xy(e["border-right-width"])+Xy(e["padding-left"])+Xy(e["padding-right"])+Xy(e.width)},getHeight:function(t){var e=getComputedStyle(t);return Xy(e["border-top-width"])+Xy(e["border-bottom-width"])+Xy(e["padding-top"])+Xy(e["padding-bottom"])+Xy(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},Ky=function(t){function e(t,n){Ry(this,e);var r=zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),qy.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return jy(e,t),Fy(e,[{key:"setValue",value:function(t){var n=Uy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Uy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Vy),Zy=function(t){function e(t,n,r){Ry(this,e);var i=zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r,a=i;if(i.__select=document.createElement("select"),Iy.isArray(o)){var s={};Iy.each(o,(function(t){s[t]=t})),o=s}return Iy.each(o,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),a.__select.appendChild(n)})),i.updateDisplay(),qy.bind(i.__select,"change",(function(){var t=this.options[this.selectedIndex].value;a.setValue(t)})),i.domElement.appendChild(i.__select),i}return jy(e,t),Fy(e,[{key:"setValue",value:function(t){var n=Uy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return qy.isActive(this.__select)?this:(this.__select.value=this.getValue(),Uy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(Vy),Jy=function(t){function e(t,n){Ry(this,e);var r=zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),qy.bind(r.__input,"keyup",o),qy.bind(r.__input,"change",o),qy.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),qy.bind(r.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return jy(e,t),Fy(e,[{key:"updateDisplay",value:function(){return qy.isActive(this.__input)||(this.__input.value=this.getValue()),Uy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Vy);function $y(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var tb=function(t){function e(t,n,r){Ry(this,e);var i=zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,Iy.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=$y(i.__impliedStep),i}return jy(e,t),Fy(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),Uy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=$y(t),this}}]),e}(Vy),eb=function(t){function e(t,n,r){Ry(this,e);var i=zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function s(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function u(t){var e=a-t.clientY;o.setValue(o.getValue()+e*o.__impliedStep),a=t.clientY}function l(){qy.unbind(window,"mousemove",u),qy.unbind(window,"mouseup",l),s()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),qy.bind(i.__input,"change",(function(){var t=parseFloat(o.__input.value);Iy.isNaN(t)||o.setValue(t)})),qy.bind(i.__input,"blur",(function(){s()})),qy.bind(i.__input,"mousedown",(function(t){qy.bind(window,"mousemove",u),qy.bind(window,"mouseup",l),a=t.clientY})),qy.bind(i.__input,"keydown",(function(t){13===t.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,s())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return jy(e,t),Fy(e,[{key:"updateDisplay",value:function(){var t,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(t*r)/r),Uy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(tb);function nb(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}var rb=function(t){function e(t,n,r,i,o){Ry(this,e);var a=zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:i,step:o})),s=a;function u(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(nb(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function l(){qy.unbind(window,"mousemove",u),qy.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(nb(e,n.left,n.right,s.__min,s.__max))}function h(){qy.unbind(window,"touchmove",c),qy.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),qy.bind(a.__background,"mousedown",(function(t){document.activeElement.blur(),qy.bind(window,"mousemove",u),qy.bind(window,"mouseup",l),u(t)})),qy.bind(a.__background,"touchstart",(function(t){1===t.touches.length&&(qy.bind(window,"touchmove",c),qy.bind(window,"touchend",h),c(t))})),qy.addClass(a.__background,"slider"),qy.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return jy(e,t),Fy(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",Uy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(tb),ib=function(t){function e(t,n,r){Ry(this,e);var i=zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,qy.bind(i.__button,"click",(function(t){return t.preventDefault(),o.fire(),!1})),qy.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return jy(e,t),Fy(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(Vy),ob=function(t){function e(t,n){Ry(this,e);var r=zy(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new Hy(r.getValue()),r.__temp=new Hy(0);var i=r;r.domElement=document.createElement("div"),qy.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",qy.bind(r.__input,"keydown",(function(t){13===t.keyCode&&h.call(this)})),qy.bind(r.__input,"blur",h),qy.bind(r.__selector,"mousedown",(function(){qy.addClass(this,"drag").bind(window,"mouseup",(function(){qy.removeClass(i.__selector,"drag")}))})),qy.bind(r.__selector,"touchstart",(function(){qy.addClass(this,"drag").bind(window,"touchend",(function(){qy.removeClass(i.__selector,"drag")}))}));var o,a=document.createElement("div");function s(t){A(t),qy.bind(window,"mousemove",A),qy.bind(window,"touchmove",A),qy.bind(window,"mouseup",l),qy.bind(window,"touchend",l)}function u(t){f(t),qy.bind(window,"mousemove",f),qy.bind(window,"touchmove",f),qy.bind(window,"mouseup",c),qy.bind(window,"touchend",c)}function l(){qy.unbind(window,"mousemove",A),qy.unbind(window,"touchmove",A),qy.unbind(window,"mouseup",l),qy.unbind(window,"touchend",l),d()}function c(){qy.unbind(window,"mousemove",f),qy.unbind(window,"touchmove",f),qy.unbind(window,"mouseup",c),qy.unbind(window,"touchend",c),d()}function h(){var t=Py(this.value);!1!==t?(i.__color.__state=t,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function d(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function A(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=n.clientX,o=n.clientY,a=(r-e.left)/(e.right-e.left),s=1-(o-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function f(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return Iy.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Iy.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Iy.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Iy.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Iy.extend(a.style,{width:"100%",height:"100%",background:"none"}),sb(a,"top","rgba(0,0,0,0)","#000"),Iy.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",Iy.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),qy.bind(r.__saturation_field,"mousedown",s),qy.bind(r.__saturation_field,"touchstart",s),qy.bind(r.__field_knob,"mousedown",s),qy.bind(r.__field_knob,"touchstart",s),qy.bind(r.__hue_field,"mousedown",u),qy.bind(r.__hue_field,"touchstart",u),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return jy(e,t),Fy(e,[{key:"updateDisplay",value:function(){var t=Py(this.getValue());if(!1!==t){var e=!1;Iy.each(Hy.COMPONENTS,(function(n){if(!Iy.isUndefined(t[n])&&!Iy.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&Iy.extend(this.__color.__state,t)}Iy.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;Iy.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,sb(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Iy.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(Vy),ab=["-moz-","-o-","-webkit-","-ms-",""];function sb(t,e,n,r){t.style.background="",Iy.each(ab,(function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "}))}var ub='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',lb=function(t,e){var n=t[e];return Iy.isArray(arguments[2])||Iy.isObject(arguments[2])?new Zy(t,e,arguments[2]):Iy.isNumber(n)?Iy.isNumber(arguments[2])&&Iy.isNumber(arguments[3])?Iy.isNumber(arguments[4])?new rb(t,e,arguments[2],arguments[3],arguments[4]):new rb(t,e,arguments[2],arguments[3]):Iy.isNumber(arguments[4])?new eb(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new eb(t,e,{min:arguments[2],max:arguments[3]}):Iy.isString(n)?new Jy(t,e):Iy.isFunction(n)?new ib(t,e,""):Iy.isBoolean(n)?new Ky(t,e):null},cb=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},hb=function(){function t(){Ry(this,t),this.backgroundElement=document.createElement("div"),Iy.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),qy.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Iy.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;qy.bind(this.backgroundElement,"click",(function(){e.hide()}))}return Fy(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Iy.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",qy.unbind(t.domElement,"webkitTransitionEnd",e),qy.unbind(t.domElement,"transitionend",e),qy.unbind(t.domElement,"oTransitionEnd",e)};qy.bind(this.domElement,"webkitTransitionEnd",e),qy.bind(this.domElement,"transitionend",e),qy.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-qy.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-qy.getHeight(this.domElement)/2+"px"}}]),t}();!function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(t){}}(function(t){if("undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var db=function(){try{return!!window.localStorage}catch(t){return!1}}(),Ab=void 0,fb=!0,pb=void 0,gb=!1,vb=[],mb=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),qy.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=Iy.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=Iy.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),Iy.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),Iy.isUndefined(r.parent)&&r.hideable&&vb.push(this),r.resizable=Iy.isUndefined(r.parent)&&r.resizable,r.autoPlace&&Iy.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=db&&"true"===localStorage.getItem(Tb(this,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,Cb(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,s&&(s.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?qy.addClass(n.__ul,t.CLASS_CLOSED):qy.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(t){db&&(o=t,t?qy.bind(window,"unload",a):qy.unbind(window,"unload",a),localStorage.setItem(Tb(n,"isLocal"),t))}}}),Iy.isUndefined(r.parent)){if(this.closed=r.closed||!1,qy.addClass(this.domElement,t.CLASS_MAIN),qy.makeSelectable(this.domElement,!1),db&&o){n.useLocalStorage=!0;var u=localStorage.getItem(Tb(this,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,qy.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(qy.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(qy.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),qy.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var l=document.createTextNode(r.name);qy.addClass(l,"controller-name"),s=yb(n,l),qy.addClass(this.__ul,t.CLASS_CLOSED),qy.addClass(s,"title"),qy.bind(s,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(Iy.isUndefined(r.parent)&&(fb&&(pb=document.createElement("div"),qy.addClass(pb,"dg"),qy.addClass(pb,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(pb),fb=!1),pb.appendChild(this.domElement),qy.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||Cb(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},qy.bind(window,"resize",this.__resizeHandler),qy.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),qy.bind(this.__ul,"transitionend",this.__resizeHandler),qy.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&function(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function r(){qy.removeClass(t.__closeButton,mb.CLASS_DRAG),qy.unbind(window,"mousemove",n),qy.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),e=i.clientX,qy.addClass(t.__closeButton,mb.CLASS_DRAG),qy.bind(window,"mousemove",n),qy.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),Iy.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),qy.bind(t.__resize_handle,"mousedown",i),qy.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this),a=function(){db&&"true"===localStorage.getItem(Tb(n,"isLocal"))&&localStorage.setItem(Tb(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((i=n.getRoot()).width+=1,Iy.defer((function(){i.width-=1})))};function yb(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function bb(t){qy.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&qy.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function wb(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function xb(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[t.preset])a=o[t.preset];else{if(!o.Default)return;a=o.Default}if(a[r]&&void 0!==a[r][e.property]){var s=a[r][e.property];e.initialValue=s,e.setValue(s)}}}}function _b(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new ob(e,n);else{var o=[e,n].concat(r.factoryArgs);i=lb.apply(t,o)}r.before instanceof Vy&&(r.before=r.before.__li),xb(t,i),qy.addClass(i.domElement,"c");var a=document.createElement("span");qy.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var u=yb(t,s,r.before);return qy.addClass(u,mb.CLASS_CONTROLLER_ROW),i instanceof ob?qy.addClass(u,"color"):qy.addClass(u,Oy(i.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,Iy.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),_b(t,n.object,n.property,{before:r,factoryArgs:[Iy.toArray(arguments)]})}if(Iy.isArray(e)||Iy.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),_b(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof rb){var r=new eb(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});Iy.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}})),qy.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof eb){var i=function(e){if(Iy.isNumber(n.__min)&&Iy.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=_b(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return e};n.min=Iy.compose(i,n.min),n.max=Iy.compose(i,n.max)}else n instanceof Ky?(qy.bind(e,"click",(function(){qy.fakeEvent(n.__checkbox,"click")})),qy.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof ib?(qy.bind(e,"click",(function(){qy.fakeEvent(n.__button,"click")})),qy.bind(e,"mouseover",(function(){qy.addClass(n.__button,"hover")})),qy.bind(e,"mouseout",(function(){qy.removeClass(n.__button,"hover")}))):n instanceof ob&&(qy.addClass(e,"color"),n.updateDisplay=Iy.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=Iy.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&wb(t.getRoot(),!0),e}),n.setValue)}(t,u,i),t.__controllers.push(i),i}function Tb(t,e){return document.location.href+"."+e}function Eb(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function Sb(t,e){e.style.display=t.useLocalStorage?"block":"none"}function Mb(t){var e=t.__save_row=document.createElement("li");qy.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),qy.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",qy.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",qy.addClass(r,"button"),qy.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",qy.addClass(i,"button"),qy.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",qy.addClass(o,"button"),qy.addClass(o,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?Iy.each(t.load.remembered,(function(e,n){Eb(t,n,n===t.preset)})):Eb(t,"Default",!1),qy.bind(a,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(a),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(o),db){var s=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(Tb(0,"isLocal"))&&u.setAttribute("checked","checked"),Sb(t,s),qy.bind(u,"change",(function(){t.useLocalStorage=!t.useLocalStorage,Sb(t,s)}))}var l=document.getElementById("dg-new-constructor");qy.bind(l,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||Ab.hide()})),qy.bind(n,"click",(function(){l.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),Ab.show(),l.focus(),l.select()})),qy.bind(r,"click",(function(){t.save()})),qy.bind(i,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),qy.bind(o,"click",(function(){t.revert()}))}function Cb(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function Ib(t,e){var n={};return Iy.each(t.__rememberedObjects,(function(r,i){var o={},a=t.__rememberedObjectIndecesToControllers[i];Iy.each(a,(function(t,n){o[n]=e?t.initialValue:t.getValue()})),n[i]=o})),n}mb.toggleHide=function(){gb=!gb,Iy.each(vb,(function(t){t.domElement.style.display=gb?"none":""}))},mb.CLASS_AUTO_PLACE="a",mb.CLASS_AUTO_PLACE_CONTAINER="ac",mb.CLASS_MAIN="main",mb.CLASS_CONTROLLER_ROW="cr",mb.CLASS_TOO_TALL="taller-than-window",mb.CLASS_CLOSED="closed",mb.CLASS_CLOSE_BUTTON="close-button",mb.CLASS_CLOSE_TOP="close-top",mb.CLASS_CLOSE_BOTTOM="close-bottom",mb.CLASS_DRAG="drag",mb.DEFAULT_WIDTH=245,mb.TEXT_CLOSED="Close Controls",mb.TEXT_OPEN="Open Controls",mb._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||mb.toggleHide()},qy.bind(window,"keydown",mb._keydownHandler,!1),Iy.extend(mb.prototype,{add:function(t,e){return _b(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return _b(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;Iy.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&pb.removeChild(this.domElement);var t=this;Iy.each(this.__folders,(function(e){t.removeFolder(e)})),qy.unbind(window,"keydown",mb._keydownHandler,!1),bb(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new mb(e);this.__folders[t]=n;var r=yb(this,n.domElement);return qy.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],bb(t);var e=this;Iy.each(t.__folders,(function(e){t.removeFolder(e)})),Iy.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=qy.getOffset(t.__ul).top,n=0;Iy.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=qy.getHeight(e))})),window.innerHeight-e-20<n?(qy.addClass(t.domElement,mb.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(qy.removeClass(t.domElement,mb.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&Iy.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:Iy.debounce((function(){this.onResize()}),50),remember:function(){if(Iy.isUndefined(Ab)&&((Ab=new hb).domElement.innerHTML=ub),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;Iy.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&Mb(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&Cb(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=Ib(this)),t.folders={},Iy.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Ib(this),wb(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=Ib(this,!0)),this.load.remembered[t]=Ib(this),this.preset=t,Eb(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){Iy.each(this.__controllers,(function(e){this.getRoot().load.remembered?xb(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),Iy.each(this.__folders,(function(t){t.revert(t)})),t||wb(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&cb.call(window,(function(){t(e)})),Iy.each(e,(function(t){t.updateDisplay()}))}(this.__listening)},updateDisplay:function(){Iy.each(this.__controllers,(function(t){t.updateDisplay()})),Iy.each(this.__folders,(function(t){t.updateDisplay()}))}});var Nb=mb,Bb=function(){function t(t){this.player=t}return Object.defineProperty(t.prototype,"frameRate",{get:function(){return this.player.fps.value},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"drawFrames",{get:function(){return this.player.runtime.fps},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"drawCall",{get:function(){return this.player.runtime.drawCall},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this.player.config.resolution},set:function(t){this.player.updateConfig({resolution:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var t,e;return(null===(t=this.player.view)||void 0===t?void 0:t.width)+"*"+(null===(e=this.player.view)||void 0===e?void 0:e.height)},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return this.player.config.minFPS},set:function(t){this.player.updateConfig({minFPS:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this.player.config.maxFPS},set:function(t){this.player.updateConfig({maxFPS:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoResolution",{get:function(){return this.player.config.autoResolution},set:function(t){this.player.updateConfig({autoResolution:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoFPS",{get:function(){return this.player.config.autoFPS},set:function(t){this.player.updateConfig({autoFPS:t})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.player.config.transactionBgColor},set:function(t){this.player.updateConfig({transactionBgColor:t})},enumerable:!1,configurable:!0}),t}(),kb=function(){function t(t,e){var n;this.config=new Bb(t),this.anchor=e,n=this.createControllerGUI(),this.gui=n[0],this.controller=n[1],this.createStats()}return t.prototype.createStats=function(){var t=this;this.stateId=setInterval((function(){t.controller.frameRate.updateDisplay(),t.controller.size.updateDisplay(),t.controller.minFPS.updateDisplay(),t.controller.drawFrames.updateDisplay(),t.controller.maxFPS.updateDisplay(),t.controller.resolution.updateDisplay(),t.controller.autoFps.updateDisplay(),t.controller.autoResolution.updateDisplay(),t.controller.drawCall.updateDisplay()}),16)},t.prototype.createControllerGUI=function(){var t=new Nb({autoPlace:!0,closed:!0});t.domElement.style.opacity=".6",t.domElement.style.transformOrigin="100% 0",t.domElement.style.transform="scale(1)",this.anchor.appendChild(t.domElement),t.domElement.style.position="absolute",t.domElement.style.right="0",t.domElement.style.top="0",t.domElement.style.zIndex="2";var e={frameRate:t.add(this.config,"frameRate"),drawFrames:t.add(this.config,"drawFrames"),drawCall:t.add(this.config,"drawCall"),size:t.add(this.config,"size"),minFPS:t.add(this.config,"minFPS",0,60),maxFPS:t.add(this.config,"maxFPS",0,60),resolution:t.add(this.config,"resolution",.5,8,.5),autoResolution:t.add(this.config,"autoResolution"),autoFps:t.add(this.config,"autoFPS"),transactionBgColor:t.addColor(this.config,"backgroundColor")};return[t,e]},t.prototype.destroy=function(){try{window.clearInterval(this.stateId),this.anchor.removeChild(this.gui.domElement),this.gui.destroy()}catch(t){}},t}(),Pb=function(){function t(t){var e=this;this.tasks=[],this.isDestroy=!1,this.isScheduling=!1,this.schedule=function(){e.isScheduling=!0;var t=e.tasks.shift();t&&!e.isDestroy&&e.fn(t).then((function(){e.tasks.length>0?window.requestAnimationFrame(e.schedule):e.isScheduling=!1}))},this.fn=t}return t.prototype.destroy=function(){this.isDestroy=!0},t.prototype.addTask=function(t){this.tasks.push(t),this.isScheduling||this.schedule()},t}(),Db=function(){function t(t){this.autoUnlock=Object.create(null),this.locks=Object.create(null),this.available=!1,this.available=t}return t.prototype.addLock=function(t,e){var n=this;this.available&&(this.locks[t]=e,this.autoUnlock[t]=window.setTimeout((function(){delete n.locks[t]}),3e3))},t.prototype.unlock=function(t,e){this.available&&e&&this.locks[t]&&this.locks[t]===e&&(window.clearTimeout(this.autoUnlock[t]),delete this.locks[t])},t.prototype.isLocked=function(t){return!!this.available&&!!this.locks[t]},t}(),Lb=function(){function t(){var t=this;this.tasks=[],this.isDestroy=!1,this.isScheduling=!1,this.schedule=function(){t.isScheduling=!0;var e=t.tasks.shift();e&&!t.isDestroy&&(e.status="running",e.fn.apply(null).then((function(){t.tasks.length>0?window.requestAnimationFrame(t.schedule):t.isScheduling=!1})).catch((function(){t.tasks.length>0?window.requestAnimationFrame(t.schedule):t.isScheduling=!1})))}}return t.prototype.getRunningTask=function(){return this.tasks[0]&&"running"===this.tasks[0].status?this.tasks[0]:null},t.prototype.addTask=function(t,e){var n={type:t,status:"wait",fn:e},r=this.getRunningTask();r&&t===r.type||(this.tasks=this.tasks.filter((function(e){return e.type!==t})),this.tasks.push(n),this.isScheduling||this.schedule())},t.prototype.destroy=function(){this.isDestroy=!0},t}();function Ob(t,e,n){return function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var r,i,o,a;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(s){switch(s.label){case 0:return r=document.createElement("div"),(i=new qb({anchor:r,renderOptions:{minFPS:1,maxFPS:1,resolution:1},mode:"local",interactive:!1,useLocalCache:!0})).setResource(t,e),[4,i.getSlideCountAsync()];case 1:o=s.sent(),a=1,s.label=2;case 2:return a<=o?[4,i.player.stagePool.preload(a,!0)]:[3,5];case 3:s.sent(),n(Math.round(a/o*100)/100),s.label=4;case 4:return a++,[3,2];case 5:return i.destroy(),[2]}}))}))}var Rb,Fb=(Rb=function(t,e){return(Rb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Rb(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ub=function(){return(Ub=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},jb=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},zb=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Hb=window.ResizeObserver||_y,Qb=function(t){return new Promise((function(e){return setTimeout(e,t)}))};function Gb(t,e){return jb(this,void 0,void 0,(function(){var n;return zb(this,(function(r){switch(r.label){case 0:n=Date.now(),r.label=1;case 1:return!t()&&Date.now()-n<e?[4,Qb(50)]:[3,3];case 2:return r.sent(),n=Date.now(),[3,1];case 3:return[2]}}))}))}var Vb={syncDispatch:"syncDispatch",syncReceive:"syncReceive",syncEventLag:"syncEventLag",renderStart:"renderStart",renderEnd:"renderEnd",renderError:"renderError",slideChange:"slideChange",mainSeqStepStart:"mainSeqStepStart",mainSeqStepEnd:"mainSeqStepEnd",animateStart:"animateStart",animateEnd:"animateEnd",stateChange:"stateChange",slideStepEnd:"slideEnd",slideStepStart:"slideStart"},Wb={taskId:"",url:"",currentSlideIndex:-1,mainSeqStep:-1,mainSeqState:null,mediaState:Object.create(null),interactiveSeqState:Object.create(null)},Yb="";try{Yb="0.8.5-beta-1"}catch(t){Yb="dev"}var Xb=null;try{(Xb=m.createInstance({name:"__slide_local_log__",driver:m.INDEXEDDB,version:1})).ready((function(t){})).catch((function(t){}))}catch(t){}var qb=function(t){function e(n){var r=t.call(this)||this;return r.iosResetCache=[],r.needClearCacheImage=!1,r.version=Yb,r.__slideState=jm()(Wb),r.userInputTime=0,r.isSyncingSlideState=!1,r.frozenTaskManager=new Lb,r.randomId=f(),r.resize=!1,r.isAnimating=!1,r.renderingTaskManager=new Ey,r.isLoading=!1,r.interactive=!0,r.renderingIndex=0,r.frameWidth=1,r.frameHeight=1,r.frame=document.createElement("div"),r.canvasContainer=document.createElement("div"),r.medianController=document.createElement("div"),r.frameResizeObserver=new Hb((function(){return r.frameResizeHandler()})),r.timestamp=function(){return Date.now()},r.mode="local",r.enableGlobalClick=!1,r.lastEmitedState=null,r.playerController=null,r.isInitResized=!1,r.cacheImage=document.createElement("img"),r.isTouchStart=!1,r.touchStartId=void 0,r.taskId="",r.volumeAdjuster=new Mm,r.designWidth=0,r.designHeight=0,r._slideCount=0,r._dispatchIncrId=0,r._receiveIncrId=0,r.recoverHandler=function(t){if("@slide/_recover_"===t.data.type&&t.data.slideId===r.randomId){var e=t.data,n=e.recoverBy,i=e.payload;if(!i)return;"renderOtherPage"===n&&i.slideIndex?r.doRenderSlide(i.slideIndex).catch((function(t){r.logger.error(t,r.taskId)})):"reloadCurrentPage"===n&&r.doRenderSlide(r.renderingIndex).catch((function(t){r.logger.error(t,r.taskId)}))}},r.userInputHandle=function(){r.userInputTime=Date.now()},r.handleViewClick=function(){setTimeout((function(){var t=Date.now();Math.abs(t-r.userInputTime)>500&&r.enableGlobalClick&&r.nextStep()}))},r.handleViewTouchStart=function(){window.clearTimeout(r.touchStartId),r.isTouchStart=!0,r.touchStartId=setTimeout((function(){r.isTouchStart=!1}),350)},r.handleViewTouchEnd=function(){r.isTouchStart&&(r.isTouchStart=!1,r.handleViewClick())},r.handleSlideRef=function(){console.log(r),window.__slide=r},r.receiveSyncHandler=function(t){return jb(r,void 0,void 0,(function(){var e,n,r,i,o=this;return zb(this,(function(a){switch(a.label){case 0:return Zf()(t.incrId)&&(t.incrId&&t.incrId-this._receiveIncrId!=1&&this.emit(Vb.syncEventLag),this._receiveIncrId=t.incrId||0),this.logger.info("sync receive "+JSON.stringify(t),this.taskId),"nextStep"!==t.type?[3,1]:(this.mainSeqStep!==t.next-1&&this.mainSeqStep+1!==this.mainSeqLength&&this.player?(this.setMainSeqStep(t.next,"start"),this.player.nextTick((function(){o.doNextStep(!0,t.clientId||"")}))):this.doNextStep(!0,t.clientId||""),[3,6]);case 1:return"prevStep"!==t.type?[3,2]:(0===this.mainSeqStep&&"idle"===this.mainSeqState||this.mainSeqStep===t.next+1||this.mainSeqStep+1===this.mainSeqLength?this.doPrevStep(!0):(this.setMainSeqStep(t.next+1,"start"),null===(e=this.player)||void 0===e||e.nextTick((function(){o.doPrevStep(!0)}))),[3,6]);case 2:return"interactiveAnim"!==t.type?[3,3]:(this.player?this.player.applyInteractiveAction(t.action):this.__slideState.interactiveSeqState[t.seqId]?this.__slideState.interactiveSeqState[t.seqId].step+=1:this.__slideState.interactiveSeqState[t.seqId]={step:0,state:"end"},[3,6]);case 3:return"renderSlide"!==t.type?[3,5]:[4,this.doRenderSlide(t.index,t.isForward)];case 4:return a.sent(),[3,6];case 5:"mediaPlay"===t.type?(null===(n=this.player)||void 0===n||n.setMediaState(t.id,!0),this.__slideState.mediaState[t.id]=t.state):"mediaPause"===t.type?(null===(r=this.player)||void 0===r||r.setMediaState(t.id,!1),this.__slideState.mediaState[t.id]=t.state):"mediaSeek"===t.type&&(null===(i=this.player)||void 0===i||i.setMediaCurrentTime(t.id,t.time),this.__slideState.mediaState[t.id]=t.state),a.label=6;case 6:return[2]}}))}))},r.handlePrevSlide=function(t){return void 0===t&&(t=!1),jb(r,void 0,void 0,(function(){var e;return zb(this,(function(n){return this.player?((e=this.player.prevSlideIndex)>=1&&(this.config.navigatorDelegate?this.config.navigatorDelegate.gotoPage(e):t?this.doRenderSlide(e,!1):this.renderSlide(e,!1)),[2]):[2]}))}))},r.handleNextSlide=function(t){return void 0===t&&(t=!1),jb(r,void 0,void 0,(function(){var e;return zb(this,(function(n){return this.player?((e=this.player.nextSlideIndex)<=this.slideCount&&(this.config.navigatorDelegate?this.config.navigatorDelegate.gotoPage(e):t?this.doRenderSlide(e,!0):this.renderSlide(e,!0)),[2]):[2]}))}))},r.handleGotoSlide=function(t){if(t<=r.slideCount&&t>=1){var e=r.slideState.currentSlideIndex<=t;r.renderSlide(t,e)}else-1===t&&r.renderSlide(r.slideCount,!0)},e.instances.push(r),r.config=r.initSlideConfig(n),r.logger={info:function(t,n){var i;e._tempLog+="INFO - "+(new Date).toISOString()+" - {"+r.randomId+"}["+n+"] "+t+"\n";var o=null===(i=r.config.logger)||void 0===i?void 0:i.info;o&&o("["+n+"] "+t)},warn:function(t,n){var i;e._tempLog+="WARN - "+(new Date).toISOString()+" - {"+r.randomId+"}["+n+"] "+t+"\n";var o=null===(i=r.config.logger)||void 0===i?void 0:i.warn;o&&o("["+n+"] "+t)},error:function(t,n){var i;e._tempLog+="ERROR - "+(new Date).toISOString()+" - {"+r.randomId+"}["+n+"] "+t+"\n";var o=null===(i=r.config.logger)||void 0===i?void 0:i.error;o&&o("["+n+"] "+t)}},r.logger.info("new slide with clientId: "+r.config.clientId,r.taskId),r.anchor=r.config.anchor,r.syncQueue=new Pb(r.receiveSyncHandler),r.lock=new Db("interactive"===r.mode),r.cacheImage.style.position="absolute",r.cacheImage.style.zIndex="100",r.setMedianControllerAttribute(),r.canvasContainer.style.position="relative",r.canvasContainer.appendChild(r.medianController),r.frame.appendChild(r.canvasContainer),r.frameResizeObserver.observe(r.frame),r.on(Vb.syncReceive,(function(t){r.lock.unlock(t.type,t.uuid),r.syncQueue.addTask(t)})),r.renderingTaskManager.eventHub.on("task-error",(function(t){var e=t.error,n=t.task,i=kf.transform(e);i.errorType===Sf.RuntimeWarn?r.logger.warn(i.message,r.taskId):r.logger.error(i.message,r.taskId),r.isLoading=!1,r.reportError(i,n.slideIndex)})),window.addEventListener("__slide_ref__",r.handleSlideRef),r.resizeView=Fm()(r.resizeView.bind(r),50),r.player=r.initPlayer(r.config),r.config.controller&&r.createController(),r.player.view&&r.canvasContainer.appendChild(r.player.view),r.handleViewClick=Fm()(r.handleViewClick,300),r.player.errorChannel.on("error",(function(t,e){var n=kf.transform(t);n.errorType===Sf.RuntimeWarn?r.logger.warn(n.message,r.taskId):r.logger.error(n.message,r.taskId),r.isLoading=!1,e===r.renderingIndex&&r.reportError(t,e)})),window.addEventListener("message",r.recoverHandler),r}var n,r;return Fb(e,t),e.flushLog=function(t){return void 0===t&&(t=!1),jb(this,void 0,void 0,(function(){return zb(this,(function(n){switch(n.label){case 0:if(!(e._tempLog.length>131072||t&&e._tempLog.length>0))return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null==Xb?void 0:Xb.setItem("run_time_log_"+e._tempLogIndex,e._tempLog)];case 2:case 3:return n.sent(),[3,4];case 4:e._tempLog="",e._tempLogIndex+=1,n.label=5;case 5:return[2]}}))}))},Object.defineProperty(e.prototype,"dispatchIncrId",{get:function(){return this._dispatchIncrId++},enumerable:!1,configurable:!0}),e.prototype.reportError=function(t,e){this.emit(Vb.renderError,{error:t,index:e}),window.postMessage({type:"@slide/_error_",errorType:t.errorType,errorMsg:t.errorMsg,slideId:this.randomId,slideIndex:e,customMessage:"@slide/_error_"},"*")},e.prototype.initSlideConfig=function(t){return t.timestamp&&(this.timestamp=t.timestamp),t.rtcAudio&&(Bm.RtcAudioClazz=t.rtcAudio),this.mode=t.mode,this.anchor=t.anchor,this.anchor.appendChild(this.frame),this.enableGlobalClick=!js()(t.enableGlobalClick)&&t.enableGlobalClick,this.resize=t.resize||!1,this.interactive=t.interactive,this.frame.style.cssText=t.fixedFrameSize?"width:"+t.fixedFrameSize.width+"px;height:"+t.fixedFrameSize.height+"px;":"width:100%;height:100%",this.frame.style.cssText+="display:flex;justify-content:center;align-items:center;visibility:hidden;position:relative;z-index:1;",t.fixedFrameSize&&(this.frameWidth=t.fixedFrameSize.width,this.frameHeight=t.fixedFrameSize.height),t},e.prototype.initPlayer=function(t){var e,n,r,i=this,o=new Bm({mode:this.mode,useLocalCache:!!js()(this.config.useLocalCache)||this.config.useLocalCache,logger:this.logger,resourceTimeout:js()(this.config.resourceTimeout)?15e3:this.config.resourceTimeout,loadDelegate:this.config.loaderDelegate,volumeAdjuster:this.volumeAdjuster},t.renderOptions);return o.setInteractive(this.interactive),o.updateConfig(t.renderOptions||{}),o.on(Nm.renderStart,(function(t){i.isLoading=!0,i.emit(Vb.renderStart,t)})),o.on(Nm.renderEnd,(function(t){i.isLoading=!1,i.player&&(i.designHeight=i.player.designHeight,i.designWidth=i.player.designWidth,i.cacheImage.style.width=i.player.designWidth+"px",i.cacheImage.style.height=i.player.designHeight+"px",i._slideCount=i.player.slideCount),i.emit(Vb.renderEnd,t)})),o.on(Nm.slideChange,(function(t){i.__slideState.currentSlideIndex=t,i.emitStateChange(),i.emit(Vb.slideChange,t)})),o.on(Nm.mainSeqStateChange,(function(t){i.__slideState.mainSeqState=t,i.emitStateChange()})),o.on(Nm.mainSeqStepChange,(function(t){i.__slideState.mainSeqStep=t,i.emitStateChange()})),o.on(Nm.interactiveSeqStateChange,(function(t){var e=t.id,n=t.state;i.__slideState.interactiveSeqState[e]=n,i.emitStateChange()})),o.on(Nm.animateStart,(function(){!0!==i.isAnimating&&(i.isAnimating=!0,i.emit(Vb.animateStart))})),o.on(Nm.animateEnd,(function(){!1!==i.isAnimating&&(i.isAnimating=!1,i.emit(Vb.animateEnd))})),o.on(Nm.interactiveSeqAction,(function(t){var e=t.action,n=t.seqId;i.emitSyncDispatch({slideIndex:i.__slideState.currentSlideIndex,type:"interactiveAnim",action:e,seqId:n}),i.emitStateChange()})),o.on(Nm.mainSeqStepStart,(function(t){i.emit(Vb.mainSeqStepStart,t)})),o.on(Nm.mainSeqStepEnd,(function(t){i.emit(Vb.mainSeqStepEnd,t)})),o.on(Nm.mediaPlay,(function(t){var e={type:"play",time:i.timestamp()-1e3*t.time};i.__slideState.mediaState[t.id]=e,i.emitSyncDispatch({slideIndex:i.__slideState.currentSlideIndex,type:"mediaPlay",id:t.id,state:e}),i.emitStateChange()})),o.on(Nm.mediaStop,(function(t){delete i.__slideState.mediaState[t.id]})),o.on(Nm.mediaPause,(function(t){var e={type:"pause",time:t.time};i.__slideState.mediaState[t.id]=e,i.emitSyncDispatch({slideIndex:i.__slideState.currentSlideIndex,type:"mediaPause",id:t.id,state:e}),i.emitStateChange()})),o.on(Nm.mediaSeek,(function(t){var e={type:"pause",time:0};t.isPlaying?(e.type="play",e.time=i.timestamp()-1e3*t.time,i.__slideState.mediaState[t.id]=e):(e.type="pause",e.time=t.time,i.__slideState.mediaState[t.id]=e),i.emitSyncDispatch({slideIndex:i.__slideState.currentSlideIndex,type:"mediaSeek",id:t.id,time:t.time,state:e}),i.emitStateChange()})),o.on(Nm.requestPrevSlide,(function(t){i.handlePrevSlide(t)})),o.on(Nm.requestNextSlide,(function(t){i.handleNextSlide(t)})),o.on(Nm.requestGotoSlide,(function(t){i.config.navigatorDelegate?i.config.navigatorDelegate.gotoPage(t):i.handleGotoSlide(t)})),null===(e=o.view)||void 0===e||e.addEventListener("touchend",this.handleViewTouchEnd),null===(n=o.view)||void 0===n||n.addEventListener("touchstart",this.handleViewTouchStart),null===(r=o.view)||void 0===r||r.addEventListener("click",this.handleViewClick),o.on(Nm.userInput,this.userInputHandle),o},e.prototype.createController=function(){this.player&&(this.playerController=new kb(this.player,this.frame))},e.prototype.setMedianControllerAttribute=function(){this.medianController.className="median-container",this.medianController.style.position="absolute",this.medianController.style.left="0",this.medianController.style.top="0",this.medianController.style.zIndex="2"},e.prototype.frameResizeHandler=function(){if(!this.config.fixedFrameSize){var t=this.frame.getBoundingClientRect(),e=t.width,n=t.height;this.frameWidth=e,this.frameHeight=n,this.resizeView()}},e.prototype.updateFixedFrameSize=function(t,e,n){this.config.fixedFrameSize&&(this.frameWidth=t,this.frameHeight=e,this.frame.style.width=t+"px",this.frame.style.height=e+"px",this.resizeView(n))},e.prototype.resizeView=function(t){var e,n,r=this,i=this.width,o=this.height;if(i>0&&o>0){var a=this.frameWidth/i,s=a*o;s>this.frameHeight&&(a*=this.frameHeight/s),null===(e=this.player)||void 0===e||e.scaleView(a,this.resize,t),this.cacheImage.style.transform="scale("+a+")",this.medianController.style.transform="scale("+a+")",this.medianController.setAttribute("data-scale",a.toString()),this.isInitResized||(this.isInitResized=!0,null===(n=this.player)||void 0===n||n.clock.setTimeout((function(){r.frame.style.visibility="visible"}),32))}},e.prototype.setSlideState=function(t){var e,n,r;return jb(this,void 0,void 0,(function(){var i,o=this;return zb(this,(function(a){switch(a.label){case 0:return this.isSyncingSlideState=!0,this.logger.info("stateChange receive "+JSON.stringify(t),this.taskId),t.taskId&&t.taskId!==this.__slideState.taskId&&(this.__slideState.taskId=t.taskId,null===(e=this.player)||void 0===e||e.setResourceData(t.taskId,this.__slideState.url)),t.url&&t.url!==this.__slideState.url&&(this.__slideState.url=t.url,null===(n=this.player)||void 0===n||n.setResourceData(this.__slideState.taskId,t.url)),Number.isInteger(t.currentSlideIndex)&&t.currentSlideIndex!==this.__slideState.currentSlideIndex?(this.__slideState.currentSlideIndex=t.currentSlideIndex,[4,this.doRenderSlide(t.currentSlideIndex)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[4,null===(r=this.player)||void 0===r?void 0:r.clock.waitUntil((function(){var e,n;return(null===(e=o.player)||void 0===e?void 0:e.currentIndex)===t.currentSlideIndex&&(null===(n=o.player)||void 0===n?void 0:n.currentStage)}),3e3)];case 3:return a.sent(),i=!1,Number.isInteger(t.mainSeqStep)&&t.mainSeqStep!==this.__slideState.mainSeqStep&&(i=!0,this.__slideState.mainSeqStep=t.mainSeqStep),t.mainSeqState&&t.mainSeqState!==this.__slideState.mainSeqState&&(i=!0,this.__slideState.mainSeqState=t.mainSeqState),i&&this.setMainSeqStep(this.__slideState.mainSeqStep,"idle"===this.__slideState.mainSeqState?"start":"end"),t.mediaState&&(this.initMedia(t),this.__slideState.mediaState=t.mediaState),t.interactiveSeqState&&(this.initInteractiveSeq(t),this.__slideState.interactiveSeqState=t.interactiveSeqState),this.isSyncingSlideState=!1,[2]}}))}))},e.prototype.initInteractiveSeq=function(t){var e;for(var n in t.interactiveSeqState){var r=t.interactiveSeqState[n];null===(e=this.player)||void 0===e||e.setInteractiveSeqState(n,r.step,"idle"===r.state?"start":"end")}},e.prototype.initMedia=function(t){var e,n,r=this,i=function(i){var a=t.mediaState[i],s=o.__slideState.mediaState[i];if(s&&a.type===s.type&&a.time===s.time)return"continue";"play"===a.type?null===(e=o.player)||void 0===e||e.setMediaState(i,!0).then((function(){var t,e=r.timestamp();null===(t=r.player)||void 0===t||t.setMediaCurrentTime(i,(e-a.time)/1e3)})):null===(n=o.player)||void 0===n||n.setMediaState(i,!1).then((function(){var t;null===(t=r.player)||void 0===t||t.setMediaCurrentTime(i,a.time)}))},o=this;for(var a in t.mediaState)i(a)},Object.defineProperty(e.prototype,"slideCount",{get:function(){return this._slideCount},enumerable:!1,configurable:!0}),e.prototype.getSizeAsync=function(){return jb(this,void 0,void 0,(function(){var t;return zb(this,(function(e){switch(e.label){case 0:if(this.width>0&&this.height>0)return[2,[this.width,this.height]];e.label=1;case 1:return e.trys.push([1,4,,5]),[4,fetch(this.__slideState.url+"/"+this.__slideState.taskId+"/jsonOutput/slide-1.json")];case 2:return[4,e.sent().json()];case 3:return[2,[(t=e.sent()).width,t.height]];case 4:return e.sent(),[2,[0,0]];case 5:return[2]}}))}))},e.prototype.getSlideCountAsync=function(){return jb(this,void 0,void 0,(function(){return zb(this,(function(t){switch(t.label){case 0:if(this._slideCount>0)return[2,this._slideCount];t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch(this.__slideState.url+"/"+this.__slideState.taskId+"/jsonOutput/slide-1.json")];case 2:return[4,t.sent().json()];case 3:return[2,t.sent().slideCount];case 4:return t.sent(),[2,0];case 5:return[2]}}))}))},Object.defineProperty(e.prototype,"slideState",{get:function(){return this.__slideState.mainSeqState=this.mainSeqState,this.__slideState.mainSeqStep=this.mainSeqStep,JSON.parse(JSON.stringify(this.__slideState))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mainSeqLength",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.mainSeqLength())||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mainSeqStep",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.mainSeqStep())||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mainSeqState",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.mainSeqState())||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderOptions",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.config)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"drawCall",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.runtime.drawCall)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderFps",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.runtime.fps)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"runtimeFps",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.fps.value)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){var t;return(null===(t=this.player)||void 0===t?void 0:t.view)||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.designWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.designHeight},enumerable:!1,configurable:!0}),e.prototype.updateRenderOption=function(t){this.player&&(this.player.updateConfig(t),this.renderOptions&&(this.config.renderOptions=this.renderOptions))},e.prototype.setResource=function(t,e){var n;this.taskId=t,null===(n=this.player)||void 0===n||n.setResourceData(t,e),this.__slideState.taskId=t,this.__slideState.url=e,this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"setResource",taskId:t,url:e})},e.prototype._renderSlide=function(t){var e;return jb(this,void 0,void 0,(function(){var n=this;return zb(this,(function(r){switch(r.label){case 0:return this.renderingIndex=t,this.player&&t===this.player.currentIndex?[2]:((Bm.platform.isIOS()||Bm.platform.isAndroid())&&this.iosResetCache.indexOf(t)<0&&this.iosResetCache.push(t),[4,null===(e=this.player)||void 0===e?void 0:e.renderSlide(t)]);case 1:return r.sent(),this.__slideState.currentSlideIndex=t,this.resizeView(),this.__slideState.interactiveSeqState={},this.emitStateChange(),setTimeout((function(){var t,e;if("hidden"===(null===(e=null===(t=n.player)||void 0===t?void 0:t.view)||void 0===e?void 0:e.style.visibility)&&(n.player.view.style.visibility="visible"),"hidden"===n.frame.style.visibility&&(n.frame.style.visibility="visible"),n.needClearCacheImage)try{n.frame.removeChild(n.cacheImage)}catch(t){}}),100),[2]}}))}))},e.prototype.renderSlide=function(t,e){if(void 0===e&&(e=!0),this.player){var n=Number(t);(n!==this.player.currentIndex||this.renderingTaskManager.hasStartTask())&&(n>this.slideCount&&this.slideCount>0||this.poseRenderSlide(n,e))}},e.prototype.needCreateNewPlayer=function(){var t=Bm.platform.isLowGpuMemory()?15:30;return(Bm.platform.isIOS()||Bm.platform.isAndroid())&&this.iosResetCache.length>t},e.prototype.poseRenderSlide=function(t,e){"interactive"===this.mode?this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"renderSlide",index:t,isForward:e}):"sync"===this.mode?(this.doRenderSlide(t,e),this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"renderSlide",index:t,isForward:e})):this.doRenderSlide(t,e)},e.prototype.doRenderSlide=function(t,e){var n,r,i,o=this;if(void 0===e&&(e=!0),!this.player)return Promise.resolve();if(this.needCreateNewPlayer()&&(this.iosResetCache=[],this.iosNewPlayer=this.initPlayer(this.config),this.iosNewPlayer.setResourceData(this.__slideState.taskId,this.__slideState.url)),this.iosNewPlayer){var a=this.player.getSnapshot();this.cacheImage.src=a,this.frame.appendChild(this.cacheImage),this.player.destroy(),null===(n=this.playerController)||void 0===n||n.destroy(),this.player=this.iosNewPlayer,this.iosNewPlayer=void 0,!(null===(r=this.config)||void 0===r)&&r.controller&&this.createController(),this.needClearCacheImage=!0,null!==(i=null==this?void 0:this.player)&&void 0!==i&&i.view&&(this.player.view.style.visibility="hidden",this.canvasContainer.appendChild(this.player.view))}var s=Math.random().toString(32).substr(2);return this.player.isForward=e,this.renderingTaskManager.addTask((function(){return o._renderSlide(t)}),t,s),new Promise((function(t){o.renderingTaskManager.eventHub.once("task-end-"+s,t)}))},e.prototype.getSnapshot=function(){var t,e;return null!==(e=null===(t=this.player)||void 0===t?void 0:t.getSnapshot())&&void 0!==e?e:null},e.prototype.nextStep=function(){!this.isLoading&&this.player&&this.interactive?(this.hasNextStep()||this.emit(Vb.slideStepEnd),this.player.mainSeqHasNextStep()?"interactive"===this.mode?this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"nextStep",next:this.player.mainSeqStep()+1}):"sync"===this.mode?(this.doNextStep(!1,""),this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"nextStep",next:this.player.mainSeqStep()})):this.doNextStep(!1,""):this.handleNextSlide()):this.logger.info("prevent nextStep. "+this.isLoading+" "+this.player+" "+this.interactive,this.taskId)},e.prototype.doNextStep=function(t,e){if(this.player){var n=!this.config.clientId||e===this.config.clientId;this.player.nextStep(t,n);var r=this.player.mainSeqStep();this.__slideState.mainSeqStep=r,this.emitStateChange()}},e.prototype.prevStep=function(){!this.isLoading&&this.player&&this.interactive?(this.hasPrevStep()||this.emit(Vb.slideStepStart),this.player.mainSeqHasPrevStep()?"interactive"===this.mode?this.emitSyncDispatch({type:"prevStep",slideIndex:this.__slideState.currentSlideIndex,next:this.player.mainSeqStep()-1}):"sync"===this.mode?(this.doPrevStep(),this.emitSyncDispatch({slideIndex:this.__slideState.currentSlideIndex,type:"prevStep",next:this.player.mainSeqStep()})):this.doPrevStep():this.handlePrevSlide()):this.logger.info("prevent nextStep. "+this.isLoading+" "+this.player+" "+this.interactive,this.taskId)},e.prototype.doPrevStep=function(t){if(void 0===t&&(t=!1),this.player){this.player.prevStep(t);var e=this.player.mainSeqStep();this.__slideState.mainSeqStep=e,this.emitStateChange()}},e.prototype.isSlideStateReady=function(t){return t.taskId.length>0&&t.url.length>0&&t.currentSlideIndex>0},e.prototype.emitStateChange=function(){if("local"!==this.mode&&!this.isSyncingSlideState){var t=this.slideState;!Om()(this.lastEmitedState,t)&&this.isSlideStateReady(t)&&(this.lastEmitedState=t,this.emit(Vb.stateChange,t),this.logger.info("stateChange dispatch "+JSON.stringify(this.slideState),this.taskId))}},e.prototype.emitSyncDispatch=function(t){if(!this.lock.isLocked(t.type)){var e=Math.random().toString(32).substr(2);this.lock.addLock(t.type,e);var n=Ub(Ub({},t),{uuid:e,clientId:this.config.clientId});"sync"===this.config.mode&&(n.incrId=this.dispatchIncrId),this.emit(Vb.syncDispatch,n),this.logger.info("sync dispatch "+JSON.stringify(n),this.taskId)}},e.prototype.setMainSeqStep=function(t,e){var n;null===(n=this.player)||void 0===n||n.setMainSeqStep(t,e)},e.prototype.setInteractive=function(t){var e;this.interactive=t,null===(e=this.player)||void 0===e||e.setInteractive(t)},e.prototype.pause=function(){var t;null===(t=this.player)||void 0===t||t.pause()},e.prototype.resume=function(){var t;null===(t=this.player)||void 0===t||t.resume()},e.prototype._doFrozen=function(){var t;return jb(this,void 0,void 0,(function(){var e,n,r,i=this;return zb(this,(function(o){switch(o.label){case 0:return this.logger.info("frozen with player["+!!this.player+"]",this.taskId),this.view&&this.player?[4,this.player.clock.waitUntil((function(){return!i.isLoading}),6e4)]:[3,2];case 1:for(n in o.sent(),e=this.player.getSnapshot()||"",this.cacheImage.src=e,this.frame.appendChild(this.cacheImage),this.player.destroy(),null===(t=this.playerController)||void 0===t||t.destroy(),this.player=void 0,this.__slideState.mediaState)r=this.__slideState.mediaState[n],this.__slideState.mediaState[n]=Ub(Ub({},r),{frozenTime:this.timestamp()});o.label=2;case 2:return[2]}}))}))},e.prototype.frozen=function(){var t=this;this.frozenTaskManager.addTask("frozen",(function(){return t._doFrozen()}))},e.prototype._doRelease=function(){var t,e;return jb(this,void 0,void 0,(function(){var n,r,i,o;return zb(this,(function(a){switch(a.label){case 0:if(this.logger.info("do release slide",this.taskId),this.player)return[2];for(r in this.player=this.initPlayer(this.config),!(null===(t=this.config)||void 0===t)&&t.controller&&this.createController(),this.player.view&&(this.canvasContainer.appendChild(this.player.view),this.player.view.style.visibility="hidden"),n=this.__slideState,this.__slideState=jm()(Wb),n.mediaState)"play"===(i=n.mediaState[r]).type&&(o=Math.max(null!==(e=i.frozenTime)&&void 0!==e?e:0,i.time),i.time=this.timestamp()-(o-i.time),i.frozenTime=void 0);return[4,this.setSlideState(n)];case 1:return a.sent(),[4,this.player.clock.delay(333)];case 2:a.sent(),this.player.view&&(this.player.view.style.visibility="visible");try{this.frame.removeChild(this.cacheImage)}catch(t){}return[2]}}))}))},e.prototype.release=function(){var t=this;this.frozenTaskManager.addTask("release",(function(){return t._doRelease()}))},e.prototype._doDestroy=function(){var t,n,r,i,o=this;this.logger.info("do destroy slide",this.taskId);var a=e.instances.findIndex((function(t){return t.randomId===o.randomId}));a>=0&&e.instances.splice(a,1),this.playerController&&this.playerController.destroy(),this.frameResizeObserver.disconnect(),null===(t=this.player)||void 0===t||t.removeAllListeners(),null===(n=this.player)||void 0===n||n.destroy(),null===(r=this.player)||void 0===r||r.removeAllListeners(),this.logger={warn:function(){return{}},info:function(){return{}},error:function(){return{}}},this.syncQueue.destroy(),this.renderingTaskManager.destroy(),this.frozenTaskManager.destroy(),window.removeEventListener("__slide_ref__",this.handleSlideRef),window.removeEventListener("message",this.recoverHandler),this.removeAllListeners();try{!(null===(i=this.player)||void 0===i)&&i.view&&this.anchor.removeChild(this.player.view),this.anchor.removeChild(this.frame)}catch(t){}},e.prototype.waitLoadEnd=function(){return jb(this,void 0,void 0,(function(){var t;return zb(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return this.isLoading&&t<10?[4,Qb(100)]:[3,3];case 2:return e.sent(),t+=1,[3,1];case 3:return[2]}}))}))},e.prototype.preload=function(t){return this.player?this.player.preload(t):Promise.resolve()},e.prototype.destroy=function(){var t=this;this.logger.info("pre destroy slide",""),this.isLoading?this.waitLoadEnd().then((function(){t._doDestroy()})):this._doDestroy()},e.prototype.clearSlideCache=function(){var t;null===(t=this.player)||void 0===t||t.clearLocalCache()},e.prototype.hasNextStep=function(){if(!this.player)return!1;var t=this.player.currentIndex===this.slideCount,e=0===this.mainSeqLength||this.mainSeqStep>=this.mainSeqLength-1,n="end"===this.mainSeqState||"running"===this.mainSeqState||null==this.mainSeqState;return!(t&&e&&n)},e.prototype.hasPrevStep=function(){if(!this.player)return!1;var t=1===this.player.currentIndex,e=0===this.mainSeqLength||0===this.mainSeqStep,n="idle"===this.mainSeqState||null===this.mainSeqState;return!(t&&e&&n)},e.prototype.snapshot=function(){return jb(this,void 0,void 0,(function(){return zb(this,(function(t){return this.player?[2,this.player.getSnapshot()]:[2,null]}))}))},e.prototype.snapshotWithTimingEnd=function(t){return jb(this,void 0,void 0,(function(){return zb(this,(function(e){return this.player?[2,this.player.snapshotWithTimingEnd(t)]:[2,null]}))}))},e.prototype.updateGlobalVolume=function(t){this.volumeAdjuster.volume=t},e.prototype.getGlobalVolume=function(){return this.volumeAdjuster.volume},e.clearLocalCache=function(){Bm.clearLocalCache()},e.disposeLocalCache=function(){},n=e,e.instances=[],e._tempFrozenIds=[],e._tempLog="",e._tempLogIndex=1,e.usePlugin=Pm,e.handleFrozenAllSlide=function(){e.instances.forEach((function(t){t.player&&(e._tempFrozenIds.push(t.randomId),t.frozen())}))},e.handleReleaseAllSlide=function(){e._tempFrozenIds.forEach((function(t){var n=e.instances.find((function(e){return e.randomId===t}));n&&n.release()})),e._tempFrozenIds=[]},e.handleLogReport=function(t){return jb(void 0,void 0,void 0,(function(){var r,i,o,a,s,u;return zb(n,(function(n){switch(n.label){case 0:return[4,e.flushLog(!0)];case 1:if(n.sent(),!Xb)return[3,12];r=[],n.label=2;case 2:return n.trys.push([2,4,,5]),[4,Xb.keys()];case 3:return r=(n.sent()||[]).sort((function(t,e){return parseInt(t.replace("run_time_log_",""))-parseInt(e.replace("run_time_log_",""))})),[3,5];case 4:return n.sent(),[3,5];case 5:if(0===r.length)return window.postMessage({type:"@slide/_report_log_",log:"",index:1,total:1,customMessage:"@slide/_report_log_",sessionId:t},"*"),[2];i=0,o=r,n.label=6;case 6:if(!(i<o.length))return[3,12];a=o[i],s=a.replace("run_time_log_",""),u="",n.label=7;case 7:return n.trys.push([7,9,,10]),[4,Xb.getItem(a)];case 8:return u=n.sent()||"",[3,10];case 9:return n.sent(),[3,10];case 10:window.postMessage({type:"@slide/_report_log_",log:u,index:parseInt(s,10),total:r.length,customMessage:"@slide/_report_log_",sessionId:t},"*"),n.label=11;case 11:return i++,[3,6];case 12:return[2]}}))}))},e.handleLogDownload=function(){return jb(void 0,void 0,void 0,(function(){var t,r,i,o,a,s,u;return zb(n,(function(n){switch(n.label){case 0:return n.trys.push([0,7,,8]),[4,e.flushLog(!0)];case 1:return n.sent(),t="",Xb?[4,Xb.keys()]:[3,6];case 2:r=(n.sent()||[]).sort((function(t,e){return parseInt(t.replace("run_time_log_",""))-parseInt(e.replace("run_time_log_",""))})),i=0,o=r,n.label=3;case 3:return i<o.length?(a=o[i],s=t,[4,Xb.getItem(a)]):[3,6];case 4:t=s+(n.sent()||""),n.label=5;case 5:return i++,[3,3];case 6:return(u=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),u.setAttribute("download","slide_log"),u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u),[3,8];case 7:return n.sent(),[3,8];case 8:return[2]}}))}))},function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([(r="Slide.initConfig",function(t,e,n){var i=n.value;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=km.get(r)||[],o=t,a=0,s=n;a<s.length;a++){var u=s[a];try{o=u.before(o)}catch(t){}if(!Array.isArray(o)||o.length!==t.length)throw new Error("plugin before hook return invalid args")}for(var l=i.bind(this).apply(void 0,o),c=0,h=n.reverse();c<h.length;c++){u=h[c];try{l=u.after(l)}catch(t){}if(!l)throw new Error("plugin after hook return undefined result")}return l}})],e.prototype,"initSlideConfig",null),e}(Os.a);null==Xb||Xb.clear().catch((function(){})),window.addEventListener("__slide_log__",qb.handleLogDownload),window.addEventListener("message",(function(t){"@slide/_request_log_"===t.data.type&&qb.handleLogReport(t.data.sessionId).catch((function(){}))})),window.addEventListener("message",(function(t){"@slide/_request_frozen_"===t.data.type&&qb.handleFrozenAllSlide()})),window.addEventListener("message",(function(t){"@slide/_request_release_"===t.data.type&&qb.handleReleaseAllSlide()})),window.setInterval((function(){qb.flushLog().catch((function(){}))}),2e3)}]),F=[],U=function(){for(var t=0;t<20;t++)F[t]="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(87*Math.random());return F.join("")};function j(t){try{return t()}catch(t){console.error(t)}}var z=function(){function t(){b(this,t),this.push=this.addDisposer,this.disposers=new Map}return x(t,[{key:"addDisposer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.genUID();return this.flush(e),this.disposers.set(e,Array.isArray(t)?H(t):t),e}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.genUID(),n=t();return n?this.addDisposer(n,e):e}},{key:"addEventListener",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.genUID();return t.addEventListener(e,n,r),this.addDisposer((function(){return t.removeEventListener(e,n,r)}),i),i}},{key:"setTimeout",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.genUID(),i=window.setTimeout((function(){n.remove(r),t()}),e);return this.addDisposer((function(){return window.clearTimeout(i)}),r)}},{key:"setInterval",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.genUID(),r=window.setInterval(t,e);return this.addDisposer((function(){return window.clearInterval(r)}),n)}},{key:"remove",value:function(t){var e=this.disposers.get(t);return this.disposers.delete(t),e}},{key:"flush",value:function(t){var e=this.remove(t);e&&e()}},{key:"flushAll",value:function(){this.disposers.forEach(j),this.disposers.clear()}},{key:"genUID",value:function(){var t;do{t=U()}while(this.disposers.has(t));return t}}]),t}();function H(t){return function(){return t.forEach(j)}}function Q(t,e,n){return Math.min(Math.max(t,e),n)}var G={exports:{}},V={exports:{}},W=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))},Y=Array.prototype.concat,X=Array.prototype.slice,q=V.exports=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];W(i)?e=Y.call(e,X.call(i)):e.push(i)}return e};q.wrap=function(t){return function(){return t(q(arguments))}};var K={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Z=V.exports,J=Object.hasOwnProperty,$=Object.create(null);for(var tt in K)J.call(K,tt)&&($[K[tt]]=tt);var et=G.exports={to:{},get:{}};function nt(t,e,n){return Math.min(Math.max(e,t),n)}function rt(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}et.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=et.get.hsl(t),n="hsl";break;case"hwb":e=et.get.hwb(t),n="hwb";break;default:e=et.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},et.get.rgb=function(t){if(!t)return null;var e,n,r,i=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var o=2*n;i[n]=parseInt(e.slice(o,o+2),16)}r&&(i[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)i[n]=parseInt(e[n]+e[n],16);r&&(i[3]=parseInt(r+r,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)i[n]=parseInt(e[n+1],0);e[4]&&(e[5]?i[3]=.01*parseFloat(e[4]):i[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:J.call(K,e[1])?((i=K[e[1]])[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?i[3]=.01*parseFloat(e[4]):i[3]=parseFloat(e[4]))}for(n=0;n<3;n++)i[n]=nt(i[n],0,255);return i[3]=nt(i[3],0,1),i},et.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,nt(parseFloat(e[2]),0,100),nt(parseFloat(e[3]),0,100),nt(isNaN(n)?1:n,0,1)]}return null},et.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,nt(parseFloat(e[2]),0,100),nt(parseFloat(e[3]),0,100),nt(isNaN(n)?1:n,0,1)]}return null},et.to.hex=function(){var t=Z(arguments);return"#"+rt(t[0])+rt(t[1])+rt(t[2])+(t[3]<1?rt(Math.round(255*t[3])):"")},et.to.rgb=function(){var t=Z(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},et.to.rgb.percent=function(){var t=Z(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},et.to.hsl=function(){var t=Z(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},et.to.hwb=function(){var t=Z(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},et.to.keyword=function(t){return $[t.slice(0,3)]};var it=G.exports,ot=function(){function t(e){var n=this;b(this,t),this.enable=e,this.apps={},this.level="debug",this.roomLogger=null,this._onMessage=function(t){var e,r;t instanceof CustomEvent?e=t.detail:"object"==_(r=t.data)&&null!==r&&(e=t.data),e&&("boolean"==typeof e.slide?n.enable=e.slide:"__instance"===e.slide?console.log(n):"__debug"===e.slide&&Object.values(n.apps).forEach((function(t){var e,n;null==(n=null==(e=t.controller)?void 0:e.slide)||n.createController()})))},this.initialize()}return x(t,[{key:"setAppContext",value:function(t,e){var n;((n=this.apps)[t]||(n[t]={})).context=e,this.log("[Slide] new ".concat(t))}},{key:"setAppController",value:function(t,e){var n;((n=this.apps)[t]||(n[t]={})).controller=e}},{key:"deleteApp",value:function(t){delete this.apps[t],this.log("[Slide] delete ".concat(t))}},{key:"initialize",value:function(){window.addEventListener("message",this._onMessage)}},{key:"dispose",value:function(){window.removeEventListener("message",this._onMessage)}},{key:"log",value:function(){var t,e;this.roomLogger?(t=this.roomLogger).info.apply(t,arguments):this.enable&&(e=console).log.apply(e,arguments)}},{key:"verbose",value:function(){var t,e;this.roomLogger?(t=this.roomLogger).debug.apply(t,arguments):this.enable&&"verbose"===this.level&&(e=console).log.apply(e,arguments)}},{key:"warn",value:function(){var t,e;this.roomLogger?(t=this.roomLogger).warn.apply(t,arguments):(e=console).warn.apply(e,arguments)}}]),t}(),at=new ot(!1),st=at.log.bind(at),ut=at.verbose.bind(at);function lt(t){try{var e=window.getComputedStyle(t).backgroundColor;if("rgba(0, 0, 0, 0)"!==e&&"transparent"!==e)return e;if(t.parentElement)return lt(t.parentElement)}catch(t){}return"#ffffff"}var ct="";function ht(t){return ct||(ct=function(t){var e=it.get(t);if(e&&"rgb"===e.model){var n=e.value,r=(((255&Math.round(n[0]))<<16)+((255&Math.round(n[1]))<<8)+(255&Math.round(n[2]))).toString(16);return"#"+"000000".substring(r.length)+r}return t}(lt(t)),st("[Slide] guess bg color",ct)),ct}function dt(t){for(var e=t.width,n=t.height,r=t.slideCount,i=t.slideState,o=i.taskId,a=i.url,s=[],u=1;u<=r;++u)s.push({width:e,height:n,thumbnail:"".concat(a,"/").concat(o,"/preview/").concat(u,".png"),src:"ppt"});return s}function At(t,e,n,r){var i,o=n.slideState.currentSlideIndex;if(o>0&&e.getIsWritable()){var a=[r,o].join("/");if("page"!==t.scenePathType(a)){t.removeScenes(r);for(var s=n.slideCount,u=[],l=1;l<=s;++l)u.push({name:"".concat(l)});t.putScenes(r,u)}(e.getBox().focus?t.state.sceneState.scenePath:(null==(i=e.getView())?void 0:i.focusScenePath)||"")!==a&&e.setScenePath(a)}}var ft="https://convertcdn.netless.link/dynamicConvert",pt={taskId:"",url:"",state:null},gt=function(){function t(e){var n,r=this,i=e.context,o=e.anchor,a=e.onPageChanged,s=e.onTransitionStart,l=e.onTransitionEnd,c=e.onError,h=e.onRenderError,d=e.showRenderError;b(this,t),this.sideEffect=new z,this.ready=!1,this.readyPromise=new Promise((function(t){r.resolveReady=function(){r.ready?st("[Slide] render end"):setTimeout((function(){r.ready=!0,t()}),1e3)}})),this.onSyncDispatch=function(t){if(r.context.getIsWritable()&&r.room){var e={type:R.SLIDE_EVENTS.syncDispatch,payload:t};ut("[Slide] dispatch",JSON.stringify(t)),r.context.dispatchMagixEvent(R.SLIDE_EVENTS.syncDispatch,e)}},this.magixEventListener=function(t){var e=t.payload,n=e.type,i=e.payload;n===R.SLIDE_EVENTS.syncDispatch&&(r.syncStateOnce(),ut("[Slide] receive",JSON.stringify(i)),r.slide.emit(R.SLIDE_EVENTS.syncReceive,i))},this.onStateChange=function(t){r.context.getIsWritable()&&(ut("[Slide] state change",JSON.stringify(t,null,2)),r.context.storage.setState({state:t}))},this.pollCount=0,this.pollReadyState=function(){r.ready?1===r._toFreeze?r.freeze():-1===r._toFreeze&&r.unfreeze():r.pollCount<40?(r.pollCount++,setTimeout(r.pollReadyState,500)):(r.pollCount=0,st("[Slide] renderSlide 1 (retry after timeout)"),r.slide.renderSlide(1))},this._pageCount=0,this.destroyed=!1,this.timestamp=function(){return r.room&&r.room.calibrationTimestamp?r.room.calibrationTimestamp:r.player?r.player.beginTimestamp+r.player.progressTime:Date.now()},this.isFrozen=!1,this._toFreeze=0,this.freeze=function(){r.isFrozen=!0,r.ready?(st("[Slide] freeze",r.context.appId),r.slide.frozen()):r._toFreeze=1},this.unfreeze=u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!r.visible||(r.isFrozen=!1,r.ready?(st("[Slide] unfreeze",r.context.appId),r.slide.release()):r._toFreeze=-1);case 1:case"end":return t.stop()}}),t)}))),this.onVisibilityChange=u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r.visible="visible"===document.visibilityState)?(st("[Slide] unfreeze because tab becomes visible",{savedIsFrozen:r.savedIsFrozen}),r.savedIsFrozen||r.unfreeze()):(r.savedIsFrozen=r.isFrozen,st("[Slide] freeze because tab becomes invisible"),r.freeze());case 1:case"end":return t.stop()}}),t)}))),this.onPageChanged=a,this.onTransitionStart=s,this.onTransitionEnd=l,this.onError=c,this.onRenderError=h,this.showRenderError=null==d||d,this.context=i,this.room=i.getRoom(),this.player=this.room?void 0:i.getDisplayer(),n=this.room||this.player,at.roomLogger=n.logger,this.slide=this.createSlide(o),this.syncStateOnceFlag=!this.context.isAddApp,this.visible="visible"===document.visibilityState,this.savedIsFrozen=!1,this.initialize()}return x(t,[{key:"jumpToPage",value:function(t){this.ready&&(t=Q(t,1,this.pageCount),this.slide.renderSlide(t))}},{key:"initialize",value:function(){this.registerEventListeners(),this.kickStart()}},{key:"kickStart",value:function(){var t=this.context,e=this.slide;t.getIsWritable()&&t.storage.ensureState(pt);var n=t.storage.state,r=n.taskId,i=n.url,o=n.state;e.setResource(r,i||ft),o?(st("[Slide] init with state",JSON.stringify(o)),this.syncStateOnceFlag=!1,e.setSlideState(o)):t.isAddApp&&(st("[Slide] init by renderSlide",1),e.renderSlide(1)),this.pollReadyState()}},{key:"registerEventListeners",value:function(){var t=this,e=this.context,n=this.slide,r=this.sideEffect.addDisposer(e.storage.addStateChangedListener((function(){e.storage.state.state&&(t.syncStateOnce(),t.sideEffect.flush(r))})));this.sideEffect.add((function(){return e.addMagixEventListener(R.SLIDE_EVENTS.syncDispatch,t.magixEventListener,{fireSelfEventAfterCommit:!0})})),n.on(R.SLIDE_EVENTS.slideChange,this.onPageChanged),n.on(R.SLIDE_EVENTS.renderStart,this.onTransitionStart),n.on(R.SLIDE_EVENTS.renderEnd,this.onTransitionEnd),n.on(R.SLIDE_EVENTS.mainSeqStepStart,this.onTransitionStart),n.on(R.SLIDE_EVENTS.mainSeqStepEnd,this.onTransitionEnd),n.on(R.SLIDE_EVENTS.renderError,this.onError),n.on(R.SLIDE_EVENTS.stateChange,this.onStateChange),n.on(R.SLIDE_EVENTS.syncDispatch,this.onSyncDispatch),n.on(R.SLIDE_EVENTS.renderEnd,this.resolveReady),this.sideEffect.add((function(){return document.addEventListener("visibilitychange",t.onVisibilityChange),function(){return document.removeEventListener("visibilitychange",t.onVisibilityChange)}}))}},{key:"syncStateOnce",value:function(){if(this.syncStateOnceFlag){this.context.getIsWritable()&&this.context.storage.ensureState(pt);var t=this.context.storage.state.state;t&&(st("[Slide] sync with state (once)",JSON.stringify(t)),this.slide.setSlideState(t),this.syncStateOnceFlag=!1)}}},{key:"createSlide",value:function(t){var e,n,r=this.context.getAppOptions()||{};return new R.Slide({anchor:t,interactive:!0,mode:"interactive",controller:at.enable,enableGlobalClick:!0,renderOptions:{minFPS:r.minFPS||25,maxFPS:r.maxFPS||30,autoFPS:null==(e=r.autoFPS)||e,autoResolution:null==(n=r.autoResolution)||n,resolution:r.resolution,transactionBgColor:r.bgColor||ht(t),maxResolutionLevel:r.maxResolutionLevel,forceCanvas:r.forceCanvas,enableNvidiaDetect:r.enableNvidiaDetect},fixedFrameSize:r.fixedFrameSize,loaderDelegate:r.loaderDelegate,navigatorDelegate:r.navigatorDelegate,resourceTimeout:r.resourceTimeout,rtcAudio:r.rtcAudio,useLocalCache:r.useLocalCache,logger:r.logger,timestamp:this.timestamp})}},{key:"destroy",value:function(){this.sideEffect.flushAll(),this.destroyed||(st("[Slide] destroy slide (once)"),this.slide.destroy(),this.destroyed=!0)}},{key:"pageCount",get:function(){return this._pageCount>0||(this._pageCount=this.slide.slideCount),this._pageCount}},{key:"page",get:function(){return this.slide.slideState.currentSlideIndex}}]),t}();function vt(t){return(vt="function"==typeof Symbol&&"symbol"==_(Symbol.iterator)?function(t){return _(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_(t)})(t)}var mt=Uint8Array,yt=Uint16Array,bt=Uint32Array,wt=new mt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xt=new mt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_t=new mt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tt=function(t,e){for(var n=new yt(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new bt(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},Et=Tt(wt,2),St=Et[0],Mt=Et[1];St[28]=258,Mt[258]=28;for(var Ct=Tt(xt,0),It=Ct[0],Nt=Ct[1],Bt=new yt(32768),kt=0;kt<32768;++kt){var Pt=(43690&kt)>>>1|(21845&kt)<<1;Pt=(61680&(Pt=(52428&Pt)>>>2|(13107&Pt)<<2))>>>4|(3855&Pt)<<4,Bt[kt]=((65280&Pt)>>>8|(255&Pt)<<8)>>>1}var Dt=function(t,e,n){for(var r=t.length,i=0,o=new yt(e);i<r;++i)++o[t[i]-1];var a,s=new yt(e);for(i=0;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new yt(1<<e);var u=15-e;for(i=0;i<r;++i)if(t[i])for(var l=i<<4|t[i],c=e-t[i],h=s[t[i]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)a[Bt[h]>>>u]=l}else for(a=new yt(r),i=0;i<r;++i)a[i]=Bt[s[t[i]-1]++]>>>15-t[i];return a},Lt=new mt(288);for(kt=0;kt<144;++kt)Lt[kt]=8;for(kt=144;kt<256;++kt)Lt[kt]=9;for(kt=256;kt<280;++kt)Lt[kt]=7;for(kt=280;kt<288;++kt)Lt[kt]=8;var Ot=new mt(32);for(kt=0;kt<32;++kt)Ot[kt]=5;var Rt=Dt(Lt,9,0),Ft=Dt(Lt,9,1),Ut=Dt(Ot,5,0),jt=Dt(Ot,5,1),zt=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ht=function(t,e,n){var r=e/8>>0;return(t[r]|t[r+1]<<8)>>>(7&e)&n},Qt=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(7&e)},Gt=function(t){return(t/8>>0)+(7&t&&1)},Vt=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(t instanceof yt?yt:t instanceof bt?bt:mt)(n-e);return r.set(t.subarray(e,n)),r},Wt=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Yt=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},Xt=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return[new mt(0),0];if(1==i){var a=new mt(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var s=n[0],u=n[1],l=0,c=1,h=2;for(n[0]={s:-1,f:s.f+u.f,l:s,r:u};c!=i-1;)s=n[n[l].f<n[h].f?l++:h++],u=n[l!=c&&n[l].f<n[h].f?l++:h++],n[c++]={s:-1,f:s.f+u.f,l:s,r:u};var d=o[0].s;for(r=1;r<i;++r)o[r].s>d&&(d=o[r].s);var A=new yt(d+1),f=qt(n[c-1],A,0);if(f>e){r=0;var p=0,g=f-e,v=1<<g;for(o.sort((function(t,e){return A[e.s]-A[t.s]||t.f-e.f}));r<i;++r){var m=o[r].s;if(!(A[m]>e))break;p+=v-(1<<f-A[m]),A[m]=e}for(p>>>=g;p>0;){var y=o[r].s;A[y]<e?p-=1<<e-A[y]++-1:++r}for(;r>=0&&p;--r){var b=o[r].s;A[b]==e&&(--A[b],++p)}f=e}return[new mt(A),f]},qt=function t(e,n,r){return-1==e.s?Math.max(t(e.l,n,r+1),t(e.r,n,r+1)):n[e.s]=r},Kt=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new yt(++e),r=0,i=t[0],o=1,a=function(t){n[r++]=t},s=1;s<=e;++s)if(t[s]==i&&s!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=t[s]}return[n.subarray(0,r),e]},Zt=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Jt=function(t,e,n){var r=n.length,i=Gt(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var o=0;o<r;++o)t[i+o+4]=n[o];return 8*(i+4+r)},$t=function(t,e,n,r,i,o,a,s,u,l,c){Wt(e,c++,n),++i[256];for(var h=Xt(i,15),d=h[0],A=h[1],f=Xt(o,15),p=f[0],g=f[1],v=Kt(d),m=v[0],y=v[1],b=Kt(p),w=b[0],x=b[1],_=new yt(19),T=0;T<m.length;++T)_[31&m[T]]++;for(T=0;T<w.length;++T)_[31&w[T]]++;for(var E=Xt(_,7),S=E[0],M=E[1],C=19;C>4&&!S[_t[C-1]];--C);var I,N,B,k,P=l+5<<3,D=Zt(i,Lt)+Zt(o,Ot)+a,L=Zt(i,d)+Zt(o,p)+a+14+3*C+Zt(_,S)+(2*_[16]+3*_[17]+7*_[18]);if(P<=D&&P<=L)return Jt(e,c,t.subarray(u,u+l));if(Wt(e,c,1+(L<D)),c+=2,L<D){I=Dt(d,A,0),N=d,B=Dt(p,g,0),k=p;var O=Dt(S,M,0);Wt(e,c,y-257),Wt(e,c+5,x-1),Wt(e,c+10,C-4),c+=14;for(T=0;T<C;++T)Wt(e,c+3*T,S[_t[T]]);c+=3*C;for(var R=[m,w],F=0;F<2;++F){var U=R[F];for(T=0;T<U.length;++T){var j=31&U[T];Wt(e,c,O[j]),c+=S[j],j>15&&(Wt(e,c,U[T]>>>5&127),c+=U[T]>>>12)}}}else I=Rt,N=Lt,B=Ut,k=Ot;for(T=0;T<s;++T)if(r[T]>255){j=r[T]>>>18&31;Yt(e,c,I[j+257]),c+=N[j+257],j>7&&(Wt(e,c,r[T]>>>23&31),c+=wt[j]);var z=31&r[T];Yt(e,c,B[z]),c+=k[z],z>3&&(Yt(e,c,r[T]>>>5&8191),c+=xt[z])}else Yt(e,c,I[r[T]]),c+=N[r[T]];return Yt(e,c,I[256]),c+N[256]},te=new bt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ee=new mt(0),ne=function(t,e,n,r,i){return function(t,e,n,r,i,o){var a=t.length,s=new mt(r+a+5*(1+Math.floor(a/7e3))+i),u=s.subarray(r,s.length-i),l=0;if(!e||a<8)for(var c=0;c<=a;c+=65535){var h=c+65535;h<a?l=Jt(u,l,t.subarray(c,h)):(u[c]=o,l=Jt(u,l,t.subarray(c,a)))}else{for(var d=te[e-1],A=d>>>13,f=8191&d,p=(1<<n)-1,g=new yt(32768),v=new yt(p+1),m=Math.ceil(n/3),y=2*m,b=function(e){return(t[e]^t[e+1]<<m^t[e+2]<<y)&p},w=new bt(25e3),x=new yt(288),_=new yt(32),T=0,E=0,S=(c=0,0),M=0,C=0;c<a;++c){var I=b(c),N=32767&c,B=v[I];if(g[N]=B,v[I]=N,M<=c){var k=a-c;if((T>7e3||S>24576)&&k>423){l=$t(t,u,0,w,x,_,E,S,C,c-C,l),S=T=E=0,C=c;for(var P=0;P<286;++P)x[P]=0;for(P=0;P<30;++P)_[P]=0}var D=2,L=0,O=f,R=N-B&32767;if(k>2&&I==b(c-R))for(var F=Math.min(A,k)-1,U=Math.min(32767,c),j=Math.min(258,k);R<=U&&--O&&N!=B;){if(t[c+D]==t[c+D-R]){for(var z=0;z<j&&t[c+z]==t[c+z-R];++z);if(z>D){if(D=z,L=R,z>F)break;var H=Math.min(R,z-2),Q=0;for(P=0;P<H;++P){var G=c-R+P+32768&32767,V=G-g[G]+32768&32767;V>Q&&(Q=V,B=G)}}}R+=(N=B)-(B=g[N])+32768&32767}if(L){w[S++]=268435456|Mt[D]<<18|Nt[L];var W=31&Mt[D],Y=31&Nt[L];E+=wt[W]+xt[Y],++x[257+W],++_[Y],M=c+D,++T}else w[S++]=t[c],++x[t[c]]}}l=$t(t,u,o,w,x,_,E,S,C,c-C,l),o||(l=Jt(u,l,ee))}return Vt(s,0,r+Gt(l)+i)}(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!i)};function re(t,e){void 0===e&&(e={});var n=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length,a=0;a!=o;){for(var s=Math.min(a+5552,o);a<s;++a)i+=r+=n[a];r%=65521,i%=65521}t=r,e=i},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+2*((255&t)<<23)}}}();n.p(t);var r=ne(t,e,2,4);return function(t,e){var n=e.level,r=0==n?0:n<6?1:9==n?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)}(r,e),function(t,e,n){for(;n;++e)t[e]=n,n>>>=8}(r,r.length-4,n.d()),r}function ie(t,e){return function(t,e,n){var r=t.length,i=!e||n,o=!n||n.i;n||(n={}),e||(e=new mt(3*r));var a=function(t){var n=e.length;if(t>n){var r=new mt(Math.max(2*n,t));r.set(e),e=r}},s=n.f||0,u=n.p||0,l=n.b||0,c=n.l,h=n.d,d=n.m,A=n.n,f=8*r;do{if(!c){n.f=s=Ht(t,u,1);var p=Ht(t,u+1,3);if(u+=3,!p){var g=t[(M=Gt(u)+4)-4]|t[M-3]<<8,v=M+g;if(v>r){if(o)throw"unexpected EOF";break}i&&a(l+g),e.set(t.subarray(M,v),l),n.b=l+=g,n.p=u=8*v;continue}if(1==p)c=Ft,h=jt,d=9,A=5;else{if(2!=p)throw"invalid block type";var m=Ht(t,u,31)+257,y=Ht(t,u+10,15)+4,b=m+Ht(t,u+5,31)+1;u+=14;for(var w=new mt(b),x=new mt(19),_=0;_<y;++_)x[_t[_]]=Ht(t,u+3*_,7);u+=3*y;var T=zt(x),E=(1<<T)-1;if(!o&&u+b*(T+7)>f)break;var S=Dt(x,T,1);for(_=0;_<b;){var M,C=S[Ht(t,u,E)];if(u+=15&C,(M=C>>>4)<16)w[_++]=M;else{var I=0,N=0;for(16==M?(N=3+Ht(t,u,3),u+=2,I=w[_-1]):17==M?(N=3+Ht(t,u,7),u+=3):18==M&&(N=11+Ht(t,u,127),u+=7);N--;)w[_++]=I}}var B=w.subarray(0,m),k=w.subarray(m);d=zt(B),A=zt(k),c=Dt(B,d,1),h=Dt(k,A,1)}if(u>f)throw"unexpected EOF"}i&&a(l+131072);for(var P=(1<<d)-1,D=(1<<A)-1,L=d+A+18;o||u+L<f;){var O=(I=c[Qt(t,u)&P])>>>4;if((u+=15&I)>f)throw"unexpected EOF";if(!I)throw"invalid length/literal";if(O<256)e[l++]=O;else{if(256==O){c=null;break}var R=O-254;if(O>264){var F=wt[_=O-257];R=Ht(t,u,(1<<F)-1)+St[_],u+=F}var U=h[Qt(t,u)&D],j=U>>>4;if(!U)throw"invalid distance";if(u+=15&U,k=It[j],j>3&&(F=xt[j],k+=Qt(t,u)&(1<<F)-1,u+=F),u>f)throw"unexpected EOF";i&&a(l+131072);for(var z=l+R;l<z;l+=4)e[l]=e[l-k],e[l+1]=e[l+1-k],e[l+2]=e[l+2-k],e[l+3]=e[l+3-k];l=z}}n.l=c,n.p=u,n.b=l,c&&(s=1,n.m=d,n.d=h,n.n=A)}while(!s);return l==e.length?e:Vt(e,0,l)}((function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"}(t),t.subarray(2,-4)),e)}
/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Hollnder <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */var oe=function(){return"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:this}();function ae(){oe.console&&"function"==typeof oe.console.log&&oe.console.log.apply(oe.console,arguments)}var se={log:ae,warn:function(t){oe.console&&("function"==typeof oe.console.warn?oe.console.warn.apply(oe.console,arguments):ae.call(null,arguments))},error:function(t){oe.console&&("function"==typeof oe.console.error?oe.console.error.apply(oe.console,arguments):ae(t))}};function ue(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Ae(r.response,e,n)},r.onerror=function(){se.error("could not download file")},r.send()}function le(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function ce(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var he,de,Ae=oe.saveAs||("object"!==("undefined"==typeof window?"undefined":vt(window))||window!==oe?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=oe.URL||oe.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin!==location.origin?le(i.href)?ue(t,e,n):ce(i,i.target="_blank"):ce(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){ce(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(le(t))ue(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){ce(r)}))}else navigator.msSaveOrOpenBlob((i=t,void 0===(o=n)?o={autoBom:!1}:"object"!==vt(o)&&(se.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i),e);var i,o}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return ue(t,e,n);var i="application/octet-stream"===t.type,o=/constructor/i.test(oe.HTMLElement)||oe.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&"object"===("undefined"==typeof FileReader?"undefined":vt(FileReader))){var s=new FileReader;s.onloadend=function(){var t=s.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},s.readAsDataURL(t)}else{var u=oe.URL||oe.webkitURL,l=u.createObjectURL(t);r?r.location=l:location.href=l,r=null,setTimeout((function(){u.revokeObjectURL(l)}),4e4)}});
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function fe(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,a=i.exec(t);a&&(e=o(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n}}
/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function pe(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n=ve(n,r,i,o,e[0],7,-680876936),o=ve(o,n,r,i,e[1],12,-389564586),i=ve(i,o,n,r,e[2],17,606105819),r=ve(r,i,o,n,e[3],22,-1044525330),n=ve(n,r,i,o,e[4],7,-176418897),o=ve(o,n,r,i,e[5],12,1200080426),i=ve(i,o,n,r,e[6],17,-1473231341),r=ve(r,i,o,n,e[7],22,-45705983),n=ve(n,r,i,o,e[8],7,1770035416),o=ve(o,n,r,i,e[9],12,-1958414417),i=ve(i,o,n,r,e[10],17,-42063),r=ve(r,i,o,n,e[11],22,-1990404162),n=ve(n,r,i,o,e[12],7,1804603682),o=ve(o,n,r,i,e[13],12,-40341101),i=ve(i,o,n,r,e[14],17,-1502002290),n=me(n,r=ve(r,i,o,n,e[15],22,1236535329),i,o,e[1],5,-165796510),o=me(o,n,r,i,e[6],9,-1069501632),i=me(i,o,n,r,e[11],14,643717713),r=me(r,i,o,n,e[0],20,-373897302),n=me(n,r,i,o,e[5],5,-701558691),o=me(o,n,r,i,e[10],9,38016083),i=me(i,o,n,r,e[15],14,-660478335),r=me(r,i,o,n,e[4],20,-405537848),n=me(n,r,i,o,e[9],5,568446438),o=me(o,n,r,i,e[14],9,-1019803690),i=me(i,o,n,r,e[3],14,-187363961),r=me(r,i,o,n,e[8],20,1163531501),n=me(n,r,i,o,e[13],5,-1444681467),o=me(o,n,r,i,e[2],9,-51403784),i=me(i,o,n,r,e[7],14,1735328473),n=ye(n,r=me(r,i,o,n,e[12],20,-1926607734),i,o,e[5],4,-378558),o=ye(o,n,r,i,e[8],11,-2022574463),i=ye(i,o,n,r,e[11],16,1839030562),r=ye(r,i,o,n,e[14],23,-35309556),n=ye(n,r,i,o,e[1],4,-1530992060),o=ye(o,n,r,i,e[4],11,1272893353),i=ye(i,o,n,r,e[7],16,-155497632),r=ye(r,i,o,n,e[10],23,-1094730640),n=ye(n,r,i,o,e[13],4,681279174),o=ye(o,n,r,i,e[0],11,-358537222),i=ye(i,o,n,r,e[3],16,-722521979),r=ye(r,i,o,n,e[6],23,76029189),n=ye(n,r,i,o,e[9],4,-640364487),o=ye(o,n,r,i,e[12],11,-421815835),i=ye(i,o,n,r,e[15],16,530742520),n=be(n,r=ye(r,i,o,n,e[2],23,-995338651),i,o,e[0],6,-198630844),o=be(o,n,r,i,e[7],10,1126891415),i=be(i,o,n,r,e[14],15,-1416354905),r=be(r,i,o,n,e[5],21,-57434055),n=be(n,r,i,o,e[12],6,1700485571),o=be(o,n,r,i,e[3],10,-1894986606),i=be(i,o,n,r,e[10],15,-1051523),r=be(r,i,o,n,e[1],21,-2054922799),n=be(n,r,i,o,e[8],6,1873313359),o=be(o,n,r,i,e[15],10,-30611744),i=be(i,o,n,r,e[6],15,-1560198380),r=be(r,i,o,n,e[13],21,1309151649),n=be(n,r,i,o,e[4],6,-145523070),o=be(o,n,r,i,e[11],10,-1120210379),i=be(i,o,n,r,e[2],15,718787259),r=be(r,i,o,n,e[9],21,-343485551),t[0]=Ce(n,t[0]),t[1]=Ce(r,t[1]),t[2]=Ce(i,t[2]),t[3]=Ce(o,t[3])}function ge(t,e,n,r,i,o){return e=Ce(Ce(e,t),Ce(r,o)),Ce(e<<i|e>>>32-i,n)}function ve(t,e,n,r,i,o,a){return ge(e&n|~e&r,t,e,i,o,a)}function me(t,e,n,r,i,o,a){return ge(e&r|n&~r,t,e,i,o,a)}function ye(t,e,n,r,i,o,a){return ge(e^n^r,t,e,i,o,a)}function be(t,e,n,r,i,o,a){return ge(n^(e|~r),t,e,i,o,a)}function we(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)pe(r,xe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(pe(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,pe(r,i),r}function xe(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}he=oe.atob.bind(oe),de=oe.btoa.bind(oe);var _e="0123456789abcdef".split("");function Te(t){for(var e="",n=0;n<4;n++)e+=_e[t>>8*n+4&15]+_e[t>>8*n&15];return e}function Ee(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Se(t){return we(t).map(Ee).join("")}var Me="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=Te(t[e]);return t.join("")}(we("hello"));function Ce(t,e){if(Me){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}
/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ie(t,e){var n,r,i,o;if(t!==n){for(var a=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),s=[],u=0;u<256;u++)s[u]=u;var l=0;for(u=0;u<256;u++){var c=s[u];l=(l+c+a.charCodeAt(u))%256,s[u]=s[l],s[l]=c}n=t,r=s}else s=r;var h=e.length,d=0,A=0,f="";for(u=0;u<h;u++)A=(A+(c=s[d=(d+1)%256]))%256,s[d]=s[A],s[A]=c,a=s[(s[d]+s[A])%256],f+=String.fromCharCode(e.charCodeAt(u)^a);return f}
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ne={print:4,modify:8,copy:16,"annot-forms":32};function Be(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach((function(t){if(void 0!==Ne.perm)throw new Error("Invalid permission: "+t);i+=Ne[t]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=Se(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Ie(this.encryptionKey,this.padding)}function ke(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function Pe(t){if("object"!==vt(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!r],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[n]){var a=e[n][o];try{a[0].apply(t,r)}catch(t){oe.console&&se.error("jsPDF PubSub Error",t.message,t)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function De(t){if(!(this instanceof De))return new De(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Le(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Oe(t,e,n,r,i){if(!(this instanceof Oe))return new Oe(t,e,n,r,i);this.type="axial"===t?2:3,this.coords=e,this.colors=n,Le.call(this,r,i)}function Re(t,e,n,r,i){if(!(this instanceof Re))return new Re(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Le.call(this,r,i)}function Fe(t){var e,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],s=1,u=16,l="S",c=null;"object"===vt(t=t||{})&&(n=t.orientation,r=t.unit||r,i=t.format||i,o=t.compress||t.compressPdf||o,null!==(c=t.encryption||null)&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),s="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(u=t.floatPrecision),l=t.defaultPathOperation||"S"),a=t.filters||(!0===o?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,d={},A={internal:{},__private__:{}};A.__private__.PubSub=Pe;var f="1.3",p=A.__private__.getPdfVersion=function(){return f};A.__private__.setPdfVersion=function(t){f=t};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return g};var v=A.__private__.getPageFormat=function(t){return g[t]};i=i||"a4";var m={COMPAT:"compat",ADVANCED:"advanced"},y=m.COMPAT;function b(){this.saveGraphicsState(),J(new Pt(At,0,0,-At,0,jn()*At).toString()+" cm"),this.setFontSize(this.getFontSize()/At),l="n",y=m.ADVANCED}function w(){this.restoreGraphicsState(),l="S",y=m.COMPAT}var x=A.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw new Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};A.advancedAPI=function(t){var e=y===m.COMPAT;return e&&b.call(this),"function"!=typeof t||(t(this),e&&w.call(this)),this},A.compatAPI=function(t){var e=y===m.ADVANCED;return e&&w.call(this),"function"!=typeof t||(t(this),e&&b.call(this)),this},A.isAdvancedAPI=function(){return y===m.ADVANCED};var _,T=function(t){if(y!==m.ADVANCED)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=A.roundToPrecision=A.__private__.roundToPrecision=function(t,n){var r=e||n;if(isNaN(t)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(r).replace(/0+$/,"")};_=A.hpf=A.__private__.hpf="number"==typeof u?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return E(t,u)}:"smart"===u?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return E(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return E(t,16)};var S=A.f2=A.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return E(t,2)},M=A.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return E(t,3)},C=A.scale=A.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return y===m.COMPAT?t*At:y===m.ADVANCED?t:void 0},I=function(t){return y===m.COMPAT?jn()-t:y===m.ADVANCED?t:void 0},N=function(t){return C(I(t))};A.__private__.setPrecision=A.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var B,k="00000000000000000000000000000000",P=A.__private__.getFileId=function(){return k},D=A.__private__.setFileId=function(t){return k=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():k.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==c&&(Ye=new Be(c.userPermissions,c.userPassword,c.ownerPassword,k)),k};A.setFileId=function(t){return D(t),this},A.getFileId=function(){return P()};var L=A.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",r=Math.floor(Math.abs(e/60)),i=Math.abs(e%60),o=[n,j(r),"'",j(i),"'"].join("");return["D:",t.getFullYear(),j(t.getMonth()+1),j(t.getDate()),j(t.getHours()),j(t.getMinutes()),j(t.getSeconds()),o].join("")},O=A.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,r=parseInt(t.substr(8,2),10),i=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),a=parseInt(t.substr(14,2),10);return new Date(e,n,r,i,o,a,0)},R=A.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=L(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return B=e},F=A.__private__.getCreationDate=function(t){var e=B;return"jsDate"===t&&(e=O(B)),e};A.setCreationDate=function(t){return R(t),this},A.getCreationDate=function(t){return F(t)};var U,j=A.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},z=A.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},H=0,Q=[],G=[],V=0,W=[],Y=[],X=!1,q=G,K=function(){H=0,V=0,G=[],Q=[],W=[],zt=Ft(),Ht=Ft()};A.__private__.setCustomOutputDestination=function(t){X=!0,q=t};var Z=function(t){X||(q=t)};A.__private__.resetCustomOutputDestination=function(){X=!1,q=G};var J=A.__private__.out=function(t){return t=t.toString(),V+=t.length+1,q.push(t),q},$=A.__private__.write=function(t){return J(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},tt=A.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n);e--;)r[e]=t.charCodeAt(e);return n},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return et};var nt=t.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(t){return nt=y===m.ADVANCED?t/At:t,this};var rt,it=A.__private__.getFontSize=A.getFontSize=function(){return y===m.COMPAT?nt:nt*At},ot=t.R2L||!1;A.__private__.setR2L=A.setR2L=function(t){return ot=t,this},A.__private__.getR2L=A.getR2L=function(){return ot};var at,st=A.__private__.setZoomMode=function(t){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))rt=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');rt=t}else rt=parseInt(t,10)};A.__private__.getZoomMode=function(){return rt};var ut,lt=A.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');at=t};A.__private__.getPageMode=function(){return at};var ct=A.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');ut=t};A.__private__.getLayoutMode=function(){return ut},A.__private__.setDisplayMode=A.setDisplayMode=function(t,e,n){return st(t),ct(e),lt(n),this};var ht={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(t){if(-1===Object.keys(ht).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ht[t]},A.__private__.getDocumentProperties=function(){return ht},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(t){for(var e in ht)ht.hasOwnProperty(e)&&t[e]&&(ht[e]=t[e]);return this},A.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(ht).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ht[t]=e};var dt,At,ft,pt,gt,mt={},yt={},bt=[],wt={},xt={},_t={},Tt={},Et=null,St=0,Mt=[],Ct=new Pe(A),It=t.hotfixes||[],Nt={},Bt={},kt=[],Pt=function t(e,n,r,i,o,a){if(!(this instanceof t))return new t(e,n,r,i,o,a);isNaN(e)&&(e=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(o)&&(o=0),isNaN(a)&&(a=0),this._matrix=[e,n,r,i,o,a]};Object.defineProperty(Pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pt.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Pt.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(t)},Pt.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx,n=t.sx*this.shy+t.shy*this.sy,r=t.shx*this.sx+t.sy*this.shx,i=t.shx*this.shy+t.sy*this.sy,o=t.tx*this.sx+t.ty*this.shx+this.tx,a=t.tx*this.shy+t.ty*this.sy+this.ty;return new Pt(e,n,r,i,o,a)},Pt.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=Math.sqrt(t*t+e*e),s=(t/=a)*n+(e/=a)*r;n-=t*s,r-=e*s;var u=Math.sqrt(n*n+r*r);return s/=u,t*(r/=u)<e*(n/=u)&&(t=-t,e=-e,s=-s,a=-a),{scale:new Pt(a,0,0,u,0,0),translate:new Pt(1,0,0,1,i,o),rotate:new Pt(t,e,-e,t,0,0),skew:new Pt(1,0,s,1,0,0)}},Pt.prototype.toString=function(t){return this.join(" ")},Pt.prototype.inversed=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty,a=1/(t*r-e*n),s=r*a,u=-e*a,l=-n*a,c=t*a;return new Pt(s,u,l,c,-s*i-l*o,-u*i-c*o)},Pt.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx,n=t.x*this.shy+t.y*this.sy+this.ty;return new kn(e,n)},Pt.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new kn(t.x+t.w,t.y+t.h));return new Pn(e.x,e.y,n.x-e.x,n.y-e.y)},Pt.prototype.clone=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,o=this.ty;return new Pt(t,e,n,r,i,o)},A.Matrix=Pt;var Dt=A.matrixMult=function(t,e){return e.multiply(t)},Lt=new Pt(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=Lt;var Ot=function(t,e){if(!xt[t]){var n=(e instanceof Oe?"Sh":"P")+(Object.keys(wt).length+1).toString(10);e.id=n,xt[t]=n,wt[n]=e,Ct.publish("addPattern",e)}};A.ShadingPattern=Oe,A.TilingPattern=Re,A.addShadingPattern=function(t,e){return T("addShadingPattern()"),Ot(t,e),this},A.beginTilingPattern=function(t){T("beginTilingPattern()"),Ln(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},A.endTilingPattern=function(t,e){T("endTilingPattern()"),e.stream=Y[U].join("\n"),Ot(t,e),Ct.publish("endTilingPattern",e),kt.pop().restore()};var Rt=A.__private__.newObject=function(){var t=Ft();return Ut(t,!0),t},Ft=A.__private__.newObjectDeferred=function(){return H++,Q[H]=function(){return V},H},Ut=function(t,e){return e="boolean"==typeof e&&e,Q[t]=V,e&&J(t+" 0 obj"),t},jt=A.__private__.newAdditionalObject=function(){var t={objId:Ft(),content:""};return W.push(t),t},zt=Ft(),Ht=Ft(),Qt=A.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5===e.length&&("k"===e[4]||"K"===e[4])&&(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(e[i])).toString(16)).slice(-2);return r},Gt=A.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,r=t.ch2,i=t.ch3,o=t.ch4,a="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var s=new fe(n);if(s.ok)n=s.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var u=parseInt(n.substr(1),16);n=u>>16&255,r=u>>8&255,i=255&u}if(void 0===r||void 0===o&&n===r&&r===i)if("string"==typeof n)e=n+" "+a[0];else if(2===t.precision)e=S(n/255)+" "+a[0];else e=M(n/255)+" "+a[0];else if(void 0===o||"object"===vt(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)e=[n,r,i,a[1]].join(" ");else if(2===t.precision)e=[S(n/255),S(r/255),S(i/255),a[1]].join(" ");else e=[M(n/255),M(r/255),M(i/255),a[1]].join(" ")}else if("string"==typeof n)e=[n,r,i,o,a[2]].join(" ");else if(2===t.precision)e=[S(n),S(r),S(i),S(o),a[2]].join(" ");else e=[M(n),M(r),M(i),M(o),a[2]].join(" ");return e},Vt=A.__private__.getFilters=function(){return a},Wt=A.__private__.putStream=function(t){var e=(t=t||{}).data||"",n=t.filters||Vt(),r=t.alreadyAppliedFilters||[],i=t.addLength1||!1,o=e.length,a=t.objectId,s=function(t){return t};if(null!==c&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==c&&(s=Ye.encryptor(a,0));var u={};!0===n&&(n=["FlateEncode"]);var l=t.additionalKeyValues||[],h=(u=void 0!==Fe.API.processDataByFilters?Fe.API.processDataByFilters(e,n):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==u.data.length&&(l.push({key:"Length",value:u.data.length}),!0===i&&l.push({key:"Length1",value:o})),0!=h.length)if(h.split("/").length-1==1)l.push({key:"Filter",value:h});else{l.push({key:"Filter",value:"["+h+"]"});for(var d=0;d<l.length;d+=1)if("DecodeParms"===l[d].key){for(var A=[],f=0;f<u.reverseChain.split("/").length-1;f+=1)A.push("null");A.push(l[d].value),l[d].value="["+A.join(" ")+"]"}}J("<<");for(var p=0;p<l.length;p++)J("/"+l[p].key+" "+l[p].value);J(">>"),0!==u.data.length&&(J("stream"),J(s(u.data)),J("endstream"))},Yt=A.__private__.putPage=function(t){var e=t.number,n=t.data,r=t.objId,i=t.contentsObjId;Ut(r,!0),J("<</Type /Page"),J("/Parent "+t.rootDictionaryObjId+" 0 R"),J("/Resources "+t.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(_(t.mediaBox.bottomLeftX))+" "+parseFloat(_(t.mediaBox.bottomLeftY))+" "+_(t.mediaBox.topRightX)+" "+_(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&J("/CropBox ["+_(t.cropBox.bottomLeftX)+" "+_(t.cropBox.bottomLeftY)+" "+_(t.cropBox.topRightX)+" "+_(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&J("/BleedBox ["+_(t.bleedBox.bottomLeftX)+" "+_(t.bleedBox.bottomLeftY)+" "+_(t.bleedBox.topRightX)+" "+_(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&J("/TrimBox ["+_(t.trimBox.bottomLeftX)+" "+_(t.trimBox.bottomLeftY)+" "+_(t.trimBox.topRightX)+" "+_(t.trimBox.topRightY)+"]"),null!==t.artBox&&J("/ArtBox ["+_(t.artBox.bottomLeftX)+" "+_(t.artBox.bottomLeftY)+" "+_(t.artBox.topRightX)+" "+_(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&J("/UserUnit "+t.userUnit),Ct.publish("putPage",{objId:r,pageContext:Mt[e],pageNumber:e,page:n}),J("/Contents "+i+" 0 R"),J(">>"),J("endobj");var o=n.join("\n");return y===m.ADVANCED&&(o+="\nQ"),Ut(i,!0),Wt({data:o,filters:Vt(),objectId:i}),J("endobj"),r},Xt=A.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=St;t++)Mt[t].objId=Ft(),Mt[t].contentsObjId=Ft();for(t=1;t<=St;t++)n.push(Yt({number:t,data:Y[t],objId:Mt[t].objId,contentsObjId:Mt[t].contentsObjId,mediaBox:Mt[t].mediaBox,cropBox:Mt[t].cropBox,bleedBox:Mt[t].bleedBox,trimBox:Mt[t].trimBox,artBox:Mt[t].artBox,userUnit:Mt[t].userUnit,rootDictionaryObjId:zt,resourceDictionaryObjId:Ht}));Ut(zt,!0),J("<</Type /Pages");var r="/Kids [";for(e=0;e<St;e++)r+=n[e]+" 0 R ";J(r+"]"),J("/Count "+St),J(">>"),J("endobj"),Ct.publish("postPutPages")},qt=function(t){Ct.publish("putFont",{font:t,out:J,newObject:Rt,putStream:Wt}),!0!==t.isAlreadyPutted&&(t.objectNumber=Rt(),J("<<"),J("/Type /Font"),J("/BaseFont /"+ke(t.postScriptName)),J("/Subtype /Type1"),"string"==typeof t.encoding&&J("/Encoding /"+t.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Kt=function(){for(var t in mt)mt.hasOwnProperty(t)&&(!1===h||!0===h&&d.hasOwnProperty(t))&&qt(mt[t])},Zt=function(t){t.objectNumber=Rt();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[_(t.x),_(t.y),_(t.x+t.width),_(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var n=t.pages[1].join("\n");Wt({data:n,additionalKeyValues:e,objectId:t.objectNumber}),J("endobj")},Jt=function(){for(var t in Nt)Nt.hasOwnProperty(t)&&Zt(Nt[t])},$t=function(t,e){var n,r=[],i=1/(e-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=t[0].offset){var o={offset:0,color:t[0].color};t.unshift(o)}if(1!=t[t.length-1].offset){var a={offset:1,color:t[t.length-1].color};t.push(a)}for(var s="",u=0,l=0;l<r.length;l++){for(n=r[l];n>t[u+1].offset;)u++;var c=t[u].offset,h=(n-c)/(t[u+1].offset-c),d=t[u].color,A=t[u+1].color;s+=z(Math.round((1-h)*d[0]+h*A[0]).toString(16))+z(Math.round((1-h)*d[1]+h*A[1]).toString(16))+z(Math.round((1-h)*d[2]+h*A[2]).toString(16))}return s.trim()},te=function(t,e){e||(e=21);var n=Rt(),r=$t(t.colors,e),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+e+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Wt({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),J("endobj"),t.objectNumber=Rt(),J("<< /ShadingType "+t.type),J("/ColorSpace /DeviceRGB");var o="/Coords ["+_(parseFloat(t.coords[0]))+" "+_(parseFloat(t.coords[1]))+" ";2===t.type?o+=_(parseFloat(t.coords[2]))+" "+_(parseFloat(t.coords[3])):o+=_(parseFloat(t.coords[2]))+" "+_(parseFloat(t.coords[3]))+" "+_(parseFloat(t.coords[4]))+" "+_(parseFloat(t.coords[5])),J(o+="]"),t.matrix&&J("/Matrix ["+t.matrix.toString()+"]"),J("/Function "+n+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},ee=function(t,e){var n=Ft(),r=Rt();e.push({resourcesOid:n,objectOid:r}),t.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+t.boundingBox.map(_).join(" ")+"]"}),i.push({key:"XStep",value:_(t.xStep)}),i.push({key:"YStep",value:_(t.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),t.matrix&&i.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),Wt({data:t.stream,additionalKeyValues:i,objectId:t.objectNumber}),J("endobj")},ne=function(t){var e;for(e in wt)wt.hasOwnProperty(e)&&(wt[e]instanceof Oe?te(wt[e]):wt[e]instanceof Re&&ee(wt[e],t))},re=function(t){for(var e in t.objectNumber=Rt(),J("<<"),t)switch(e){case"opacity":J("/ca "+S(t[e]));break;case"stroke-opacity":J("/CA "+S(t[e]))}J(">>"),J("endobj")},ie=function(){var t;for(t in _t)_t.hasOwnProperty(t)&&re(_t[t])},ae=function(){for(var t in J("/XObject <<"),Nt)Nt.hasOwnProperty(t)&&Nt[t].objectNumber>=0&&J("/"+t+" "+Nt[t].objectNumber+" 0 R");Ct.publish("putXobjectDict"),J(">>")},ue=function(){Ye.oid=Rt(),J("<<"),J("/Filter /Standard"),J("/V "+Ye.v),J("/R "+Ye.r),J("/U <"+Ye.toHexString(Ye.U)+">"),J("/O <"+Ye.toHexString(Ye.O)+">"),J("/P "+Ye.P),J(">>"),J("endobj")},le=function(){for(var t in J("/Font <<"),mt)mt.hasOwnProperty(t)&&(!1===h||!0===h&&d.hasOwnProperty(t))&&J("/"+t+" "+mt[t].objectNumber+" 0 R");J(">>")},ce=function(){if(Object.keys(wt).length>0){for(var t in J("/Shading <<"),wt)wt.hasOwnProperty(t)&&wt[t]instanceof Oe&&wt[t].objectNumber>=0&&J("/"+t+" "+wt[t].objectNumber+" 0 R");Ct.publish("putShadingPatternDict"),J(">>")}},he=function(t){if(Object.keys(wt).length>0){for(var e in J("/Pattern <<"),wt)wt.hasOwnProperty(e)&&wt[e]instanceof A.TilingPattern&&wt[e].objectNumber>=0&&wt[e].objectNumber<t&&J("/"+e+" "+wt[e].objectNumber+" 0 R");Ct.publish("putTilingPatternDict"),J(">>")}},pe=function(){if(Object.keys(_t).length>0){var t;for(t in J("/ExtGState <<"),_t)_t.hasOwnProperty(t)&&_t[t].objectNumber>=0&&J("/"+t+" "+_t[t].objectNumber+" 0 R");Ct.publish("putGStateDict"),J(">>")}},ge=function(t){Ut(t.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),le(),ce(),he(t.objectOid),pe(),ae(),J(">>"),J("endobj")},ve=function(){var t=[];Kt(),ie(),Jt(),ne(t),Ct.publish("putResources"),t.forEach(ge),ge({resourcesOid:Ht,objectOid:Number.MAX_SAFE_INTEGER}),Ct.publish("postPutResources")},me=function(){Ct.publish("putAdditionalObjects");for(var t=0;t<W.length;t++){var e=W[t];Ut(e.objId,!0),J(e.content),J("endobj")}Ct.publish("postPutAdditionalObjects")},ye=function(t){yt[t.fontName]=yt[t.fontName]||{},yt[t.fontName][t.fontStyle]=t.id},be=function(t,e,n,r,i){var o={id:"F"+(Object.keys(mt).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Ct.publish("addFont",{font:o,instance:this}),mt[o.id]=o,ye(o),o.id},we=function(t){for(var e=0,n=et.length;e<n;e++){var r=be.call(this,t[e][0],t[e][1],t[e][2],et[e][3],!0);!1===h&&(d[r]=!0);var i=t[e][0].split("-");ye({id:r,fontName:i[0],fontStyle:i[1]||""})}Ct.publish("addFonts",{fonts:mt,dictionary:yt})},xe=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!oe.console)throw new Error(n);oe.console.error(n,t),oe.alert&&alert(n)}},t.foo.bar=t,t.foo},_e=function(t,e){var n,r,i,o,a,s,u,l,c;if(i=(e=e||{}).sourceEncoding||"Unicode",a=e.outputEncoding,(e.autoencode||a)&&mt[dt].metadata&&mt[dt].metadata[i]&&mt[dt].metadata[i].encoding&&(o=mt[dt].metadata[i].encoding,!a&&mt[dt].encoding&&(a=mt[dt].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(u=!1,s=[],n=0,r=t.length;n<r;n++)(l=a[t.charCodeAt(n)])?s.push(String.fromCharCode(l)):s.push(t[n]),s[n].charCodeAt(0)>>8&&(u=!0);t=s.join("")}for(n=t.length;void 0===u&&0!==n;)t.charCodeAt(n-1)>>8&&(u=!0),n--;if(!u)return t;for(s=e.noBOM?[]:[254,255],n=0,r=t.length;n<r;n++){if((c=(l=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(c),s.push(l-(c<<8))}return String.fromCharCode.apply(void 0,s)},Te=A.__private__.pdfEscape=A.pdfEscape=function(t,e){return _e(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ee=A.__private__.beginPage=function(t){Y[++St]=[],Mt[St]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},Ce(St),Z(Y[U])},Se=function(t,e){var r,o,a;switch(n=e||n,"string"==typeof t&&(r=v(t.toLowerCase()),Array.isArray(r)&&(o=r[0],a=r[1])),Array.isArray(t)&&(o=t[0]*At,a=t[1]*At),isNaN(o)&&(o=i[0],a=i[1]),(o>14400||a>14400)&&(se.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),a=Math.min(14400,a)),i=[o,a],n.substr(0,1)){case"l":a>o&&(i=[a,o]);break;case"p":o>a&&(i=[a,o])}Ee(i),pn(An),J(_n),0!==In&&J(In+" J"),0!==Nn&&J(Nn+" j"),Ct.publish("addPage",{pageNumber:St})},Me=function(t){t>0&&t<=St&&(Y.splice(t,1),Mt.splice(t,1),St--,U>St&&(U=St),this.setPage(U))},Ce=function(t){t>0&&t<=St&&(U=t)},Ie=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return Y.length-1},Ne=function(t,e,n){var r,i=void 0;return n=n||{},t=void 0!==t?t:mt[dt].fontName,e=void 0!==e?e:mt[dt].fontStyle,r=t.toLowerCase(),void 0!==yt[r]&&void 0!==yt[r][e]?i=yt[r][e]:void 0!==yt[t]&&void 0!==yt[t][e]?i=yt[t][e]:!1===n.disableWarning&&se.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=yt.times[e])&&(i=yt.times.normal),i},Le=A.__private__.putInfo=function(){var t=Rt(),e=function(t){return t};for(var n in null!==c&&(e=Ye.encryptor(t,0)),J("<<"),J("/Producer ("+Te(e("jsPDF "+Fe.version))+")"),ht)ht.hasOwnProperty(n)&&ht[n]&&J("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+Te(e(ht[n]))+")");J("/CreationDate ("+Te(e(B))+")"),J(">>"),J("endobj")},Ue=A.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||zt;switch(Rt(),J("<<"),J("/Type /Catalog"),J("/Pages "+e+" 0 R"),rt||(rt="fullwidth"),rt){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+rt;"%"===n.substr(n.length-1)&&(rt=parseInt(rt)/100),"number"==typeof rt&&J("/OpenAction [3 0 R /XYZ null null "+S(rt)+"]")}switch(ut||(ut="continuous"),ut){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}at&&J("/PageMode /"+at),Ct.publish("putCatalog"),J(">>"),J("endobj")},je=A.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(H+1)),J("/Root "+H+" 0 R"),J("/Info "+(H-1)+" 0 R"),null!==c&&J("/Encrypt "+Ye.oid+" 0 R"),J("/ID [ <"+k+"> <"+k+"> ]"),J(">>")},ze=A.__private__.putHeader=function(){J("%PDF-"+f),J("%")},He=A.__private__.putXRef=function(){var t="0000000000";J("xref"),J("0 "+(H+1)),J("0000000000 65535 f ");for(var e=1;e<=H;e++)"function"==typeof Q[e]?J((t+Q[e]()).slice(-10)+" 00000 n "):void 0!==Q[e]?J((t+Q[e]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Qe=A.__private__.buildDocument=function(){K(),Z(G),Ct.publish("buildDocument"),ze(),Xt(),me(),ve(),null!==c&&ue(),Le(),Ue();var t=V;return He(),je(),J("startxref"),J(""+t),J("%%EOF"),Z(Y[U]),G.join("\n")},Ge=A.__private__.getBlob=function(t){return new Blob([tt(t)],{type:"application/pdf"})},Ve=A.output=A.__private__.output=xe((function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return Qe();case"save":A.save(e.filename);break;case"arraybuffer":return tt(Qe());case"blob":return Ge(Qe());case"bloburi":case"bloburl":if(void 0!==oe.URL&&"function"==typeof oe.URL.createObjectURL)return oe.URL&&oe.URL.createObjectURL(Ge(Qe()))||void 0;se.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=Qe();try{n=de(r)}catch(t){n=de(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+e.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(oe)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(i=e.pdfObjectUrl,o="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",s=oe.open();return null!==s&&s.document.write(a),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(oe)){var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',l=oe.open();if(null!==l){l.document.write(u);var c=this;l.document.documentElement.querySelector("#pdfViewer").onload=function(){l.document.title=e.filename,l.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(c.output("bloburl"))}}return l}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(oe))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',d=oe.open();if(null!==d&&(d.document.write(h),d.document.title=e.filename),d||"undefined"==typeof safari)return d;break;case"datauri":case"dataurl":return oe.document.location.href=this.output("datauristring",e);default:return null}})),We=function(t){return!0===Array.isArray(It)&&It.indexOf(t)>-1};switch(r){case"pt":At=1;break;case"mm":At=72/25.4;break;case"cm":At=72/2.54;break;case"in":At=72;break;case"px":At=1==We("px_scaling")?.75:96/72;break;case"pc":case"em":At=12;break;case"ex":At=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);At=r}var Ye=null;R(),D();var Xe=function(t){return null!==c?Ye.encryptor(t,0):function(t){return t}},qe=A.__private__.getPageInfo=A.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[t].objId,pageNumber:t,pageContext:Mt[t]}},Ke=A.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in Mt)if(Mt[e].objId===t)break;return qe(e)},Ze=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Mt[U].objId,pageNumber:U,pageContext:Mt[U]}};A.addPage=function(){return Se.apply(this,arguments),this},A.setPage=function(){return Ce.apply(this,arguments),Z.call(this,Y[U]),this},A.insertPage=function(t){return this.addPage(),this.movePage(U,t),this},A.movePage=function(t,e){var n,r;if(t>e){n=Y[t],r=Mt[t];for(var i=t;i>e;i--)Y[i]=Y[i-1],Mt[i]=Mt[i-1];Y[e]=n,Mt[e]=r,this.setPage(e)}else if(t<e){n=Y[t],r=Mt[t];for(var o=t;o<e;o++)Y[o]=Y[o+1],Mt[o]=Mt[o+1];Y[e]=n,Mt[e]=r,this.setPage(e)}return this},A.deletePage=function(){return Me.apply(this,arguments),this},A.__private__.text=A.text=function(t,e,n,r,i){var o,a,s,u,l,c,h,A,f,p=(r=r||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof n||Array.isArray(n))){var g=n;n=e,e=t,t=g}if(arguments[3]instanceof Pt?(T("The transform parameter of text() with a Matrix value"),f=i):(s=arguments[4],u=arguments[5],"object"===vt(h=arguments[3])&&null!==h||("string"==typeof s&&(u=s,s=null),"string"==typeof h&&(u=h,h=null),"number"==typeof h&&(s=h,h=null),r={flags:h,angle:s,align:u})),isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return p;var v="",b=!1,w="number"==typeof r.lineHeightFactor?r.lineHeightFactor:dn,x=p.internal.scaleFactor;function E(t){return t=t.split("\t").join(Array(r.TabLen||9).join(" ")),Te(t,h)}function S(t){for(var e,n=t.concat(),r=[],i=n.length;i--;)"string"==typeof(e=n.shift())?r.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?r.push(e[0]):r.push([e[0],e[1],e[2]]);return r}function M(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var r,i,o=t.concat(),a=[],s=o.length;s--;)"string"==typeof(r=o.shift())?a.push(e(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=e(r[0],r[1],r[2]),a.push([i[0],i[1],i[2]]));n=a}return n}var I=!1,N=!0;if("string"==typeof t)I=!0;else if(Array.isArray(t)){var B=t.concat();a=[];for(var k,P=B.length;P--;)("string"!=typeof(k=B.shift())||Array.isArray(k)&&"string"!=typeof k[0])&&(N=!1);I=N}if(!1===I)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var D=nt/p.internal.scaleFactor,L=D*(w-1);switch(r.baseline){case"bottom":n-=L;break;case"top":n+=D-L;break;case"hanging":n+=D-2*L;break;case"middle":n+=D/2-L}if((c=r.maxWidth||0)>0&&("string"==typeof t?t=p.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(p.splitTextToSize(e,c))}),[]))),o={text:t,x:e,y:n,options:r,mutex:{pdfEscape:Te,activeFontKey:dt,fonts:mt,activeFontSize:nt}},Ct.publish("preProcessText",o),t=o.text,s=(r=o.options).angle,f instanceof Pt||!s||"number"!=typeof s)s&&s instanceof Pt&&(f=s);else{s*=Math.PI/180,0===r.rotationDirection&&(s=-s),y===m.ADVANCED&&(s=-s);var O=Math.cos(s),R=Math.sin(s);f=new Pt(O,R,-R,O,0,0)}y!==m.ADVANCED||f||(f=Lt),void 0!==(l=r.charSpace||Mn)&&(v+=_(C(l))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(A=r.horizontalScale)&&(v+=_(100*A)+" Tz\n"),r.lang;var F=-1,U=void 0!==r.renderingMode?r.renderingMode:r.stroke,j=p.internal.getCurrentPageInfo().pageContext;switch(U){case 0:case!1:case"fill":F=0;break;case 1:case!0:case"stroke":F=1;break;case 2:case"fillThenStroke":F=2;break;case 3:case"invisible":F=3;break;case 4:case"fillAndAddForClipping":F=4;break;case 5:case"strokeAndAddPathForClipping":F=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":F=6;break;case 7:case"addToPathForClipping":F=7}var z=void 0!==j.usedRenderingMode?j.usedRenderingMode:-1;-1!==F?v+=F+" Tr\n":-1!==z&&(v+="0 Tr\n"),-1!==F&&(j.usedRenderingMode=F),u=r.align||"left";var H,Q=nt*w,G=p.internal.pageSize.getWidth(),V=mt[dt];l=r.charSpace||Mn,c=r.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},r.flags);var W=[];if("[object Array]"===Object.prototype.toString.call(t)){var Y;a=S(t),"left"!==u&&(H=a.map((function(t){return p.getStringUnitWidth(t,{font:V,charSpace:l,fontSize:nt,doKerning:!1})*nt/x})));var X,q=0;if("right"===u){e-=H[0],t=[],P=a.length;for(var K=0;K<P;K++)0===K?(X=yn(e),Y=bn(n)):(X=C(q-H[K]),Y=-Q),t.push([a[K],X,Y]),q=H[K]}else if("center"===u){e-=H[0]/2,t=[],P=a.length;for(var Z=0;Z<P;Z++)0===Z?(X=yn(e),Y=bn(n)):(X=C((q-H[Z])/2),Y=-Q),t.push([a[Z],X,Y]),q=H[Z]}else if("left"===u){t=[],P=a.length;for(var $=0;$<P;$++)t.push(a[$])}else{if("justify"!==u)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');t=[],P=a.length,c=0!==c?c:G;for(var tt=0;tt<P;tt++)Y=0===tt?bn(n):-Q,X=0===tt?yn(e):0,tt<P-1?W.push(_(C((c-H[tt])/(a[tt].split(" ").length-1)))):W.push(0),t.push([a[tt],X,Y])}}var et="boolean"==typeof r.R2L?r.R2L:ot;!0===et&&(t=M(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),o={text:t,x:e,y:n,options:r,mutex:{pdfEscape:Te,activeFontKey:dt,fonts:mt,activeFontSize:nt}},Ct.publish("postProcessText",o),t=o.text,b=o.mutex.isHex||!1;var rt=mt[dt].encoding;"WinAnsiEncoding"!==rt&&"StandardEncoding"!==rt||(t=M(t,(function(t,e,n){return[E(t),e,n]}))),a=S(t),t=[];for(var it,at,st,ut=0,lt=1,ct=Array.isArray(a[0])?lt:ut,ht="",At=function(t,e,n){var i="";return n instanceof Pt?(n="number"==typeof r.angle?Dt(n,new Pt(1,0,0,1,t,e)):Dt(new Pt(1,0,0,1,t,e),n),y===m.ADVANCED&&(n=Dt(new Pt(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=_(t)+" "+_(e)+" Td\n",i},ft=0;ft<a.length;ft++){switch(ht="",ct){case lt:st=(b?"<":"(")+a[ft][0]+(b?">":")"),it=parseFloat(a[ft][1]),at=parseFloat(a[ft][2]);break;case ut:st=(b?"<":"(")+a[ft]+(b?">":")"),it=yn(e),at=bn(n)}void 0!==W&&void 0!==W[ft]&&(ht=W[ft]+" Tw\n"),0===ft?t.push(ht+At(it,at,f)+st):ct===ut?t.push(ht+st):ct===lt&&t.push(ht+At(it,at,f)+st)}t=ct===ut?t.join(" Tj\nT* "):t.join(" Tj\n"),t+=" Tj\n";var pt="BT\n/";return pt+=dt+" "+nt+" Tf\n",pt+=_(nt*w)+" TL\n",pt+=En+"\n",pt+=v,pt+=t,J(pt+="ET"),d[dt]=!0,p};var Je=A.__private__.clip=A.clip=function(t){return J("evenodd"===t?"W*":"W"),this};A.clipEvenOdd=function(){return Je("evenodd")},A.__private__.discardPath=A.discardPath=function(){return J("n"),this};var $e=A.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(t){return $e(t)&&(l=t),this};var tn=A.__private__.getStyle=A.getStyle=function(t){var e=l;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},en=A.close=function(){return J("h"),this};A.stroke=function(){return J("S"),this},A.fill=function(t){return nn("f",t),this},A.fillEvenOdd=function(t){return nn("f*",t),this},A.fillStroke=function(t){return nn("B",t),this},A.fillStrokeEvenOdd=function(t){return nn("B*",t),this};var nn=function(t,e){"object"===vt(e)?an(e,t):J(t)},rn=function(t){null===t||y===m.ADVANCED&&void 0===t||(t=tn(t),J(t))};function on(t,e,n,r,i){var o=new Re(e||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);o.stream=this.stream;var a=t+"$$"+this.cloneIndex+++"$$";return Ot(a,o),o}var an=function(t,e){var n=xt[t.key],r=wt[n];if(r instanceof Oe)J("q"),J(sn(e)),r.gState&&A.setGState(r.gState),J(t.matrix.toString()+" cm"),J("/"+n+" sh"),J("Q");else if(r instanceof Re){var i=new Pt(1,0,0,-1,0,jn());t.matrix&&(i=i.multiply(t.matrix||Lt),n=on.call(r,t.key,t.boundingBox,t.xStep,t.yStep,i).id),J("q"),J("/Pattern cs"),J("/"+n+" scn"),r.gState&&A.setGState(r.gState),J(e),J("Q")}},sn=function(t){switch(t){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},un=A.moveTo=function(t,e){return J(_(C(t))+" "+_(N(e))+" m"),this},ln=A.lineTo=function(t,e){return J(_(C(t))+" "+_(N(e))+" l"),this},cn=A.curveTo=function(t,e,n,r,i,o){return J([_(C(t)),_(N(e)),_(C(n)),_(N(r)),_(C(i)),_(N(o)),"c"].join(" ")),this};A.__private__.line=A.line=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!$e(i))throw new Error("Invalid arguments passed to jsPDF.line");return y===m.COMPAT?this.lines([[n-t,r-e]],t,e,[1,1],i||"S"):this.lines([[n-t,r-e]],t,e,[1,1]).stroke()},A.__private__.lines=A.lines=function(t,e,n,r,i,o){var a,s,u,l,c,h,d,A,f,p,g,v;if("number"==typeof t&&(v=n,n=e,e=t,t=v),r=r||[1,1],o=o||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(r)||!$e(i)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(un(e,n),a=r[0],s=r[1],l=t.length,p=e,g=n,u=0;u<l;u++)2===(c=t[u]).length?(p=c[0]*a+p,g=c[1]*s+g,ln(p,g)):(h=c[0]*a+p,d=c[1]*s+g,A=c[2]*a+p,f=c[3]*s+g,p=c[4]*a+p,g=c[5]*s+g,cn(h,d,A,f,p,g));return o&&en(),rn(i),this},A.path=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.c;switch(n.op){case"m":un(r[0],r[1]);break;case"l":ln(r[0],r[1]);break;case"c":cn.apply(this,r);break;case"h":en()}}return this},A.__private__.rect=A.rect=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!$e(i))throw new Error("Invalid arguments passed to jsPDF.rect");return y===m.COMPAT&&(r=-r),J([_(C(t)),_(N(e)),_(C(n)),_(C(r)),"re"].join(" ")),rn(i),this},A.__private__.triangle=A.triangle=function(t,e,n,r,i,o,a){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!$e(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,r-e],[i-n,o-r],[t-i,e-o]],t,e,[1,1],a,!0),this},A.__private__.roundedRect=A.roundedRect=function(t,e,n,r,i,o,a){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o)||!$e(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),o=Math.min(o,.5*r),this.lines([[n-2*i,0],[i*s,0,i,o-o*s,i,o],[0,r-2*o],[0,o*s,-i*s,o,-i,o],[2*i-n,0],[-i*s,0,-i,-o*s,-i,-o],[0,2*o-r],[0,-o*s,i*s,-o,i,-o]],t+i,e,[1,1],a,!0),this},A.__private__.ellipse=A.ellipse=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!$e(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return un(t+n,e),cn(t+n,e-a,t+o,e-r,t,e-r),cn(t-o,e-r,t-n,e-a,t-n,e),cn(t-n,e+a,t-o,e+r,t,e+r),cn(t+o,e+r,t+n,e+a,t+n,e),rn(i),this},A.__private__.circle=A.circle=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||!$e(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,r)},A.setFont=function(t,e,n){return n&&(e=x(e,n)),dt=Ne(t,e,{disableWarning:!1}),this};var hn=A.__private__.getFont=A.getFont=function(){return mt[Ne.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var t,e,n={};for(t in yt)if(yt.hasOwnProperty(t))for(e in n[t]=[],yt[t])yt[t].hasOwnProperty(e)&&n[t].push(e);return n},A.addFont=function(t,e,n,r,i){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(n=x(n,r)),i=i||"Identity-H",be.call(this,t,e,n,i)};var dn,An=t.lineWidth||.200025,fn=A.__private__.getLineWidth=A.getLineWidth=function(){return An},pn=A.__private__.setLineWidth=A.setLineWidth=function(t){return An=t,J(_(C(t))+" w"),this};A.__private__.setLineDash=Fe.API.setLineDash=Fe.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return _(C(t))})).join(" "),e=_(C(e)),J("["+t+"] "+e+" d"),this};var gn=A.__private__.getLineHeight=A.getLineHeight=function(){return nt*dn};A.__private__.getLineHeight=A.getLineHeight=function(){return nt*dn};var vn=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(dn=t),this},mn=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return dn};vn(t.lineHeight);var yn=A.__private__.getHorizontalCoordinate=function(t){return C(t)},bn=A.__private__.getVerticalCoordinate=function(t){return y===m.ADVANCED?t:Mt[U].mediaBox.topRightY-Mt[U].mediaBox.bottomLeftY-C(t)},wn=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(t){return _(yn(t))},xn=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(t){return _(bn(t))},_n=t.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return Qt(_n)},A.__private__.setStrokeColor=A.setDrawColor=function(t,e,n,r){return _n=Gt({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),J(_n),this};var Tn=t.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return Qt(Tn)},A.__private__.setFillColor=A.setFillColor=function(t,e,n,r){return Tn=Gt({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),J(Tn),this};var En=t.textColor||"0 g",Sn=A.__private__.getTextColor=A.getTextColor=function(){return Qt(En)};A.__private__.setTextColor=A.setTextColor=function(t,e,n,r){return En=Gt({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Mn=t.charSpace,Cn=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(Mn||0)};A.__private__.setCharSpace=A.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Mn=t,this};var In=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(t){var e=A.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return In=e,J(e+" J"),this};var Nn=0;A.__private__.setLineJoin=A.setLineJoin=function(t){var e=A.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nn=e,J(e+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(_(C(t))+" M"),this},A.GState=De,A.setGState=function(t){(t="string"==typeof t?_t[Tt[t]]:Bn(null,t)).equals(Et)||(J("/"+t.id+" gs"),Et=t)};var Bn=function(t,e){if(!t||!Tt[t]){var n=!1;for(var r in _t)if(_t.hasOwnProperty(r)&&_t[r].equals(e)){n=!0;break}if(n)e=_t[r];else{var i="GS"+(Object.keys(_t).length+1).toString(10);_t[i]=e,e.id=i}return t&&(Tt[t]=e.id),Ct.publish("addGState",e),e}};A.addGState=function(t,e){return Bn(t,e),this},A.saveGraphicsState=function(){return J("q"),bt.push({key:dt,size:nt,color:En}),this},A.restoreGraphicsState=function(){J("Q");var t=bt.pop();return dt=t.key,nt=t.size,En=t.color,Et=null,this},A.setCurrentTransformationMatrix=function(t){return J(t.toString()+" cm"),this},A.comment=function(t){return J("#"+t),this};var kn=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var r=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(t){i=t.toString()}}),this},Pn=function(t,e,n,r){kn.call(this,t,e),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var o=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(t){isNaN(t)||(o=parseFloat(t))}}),this},Dn=function(){this.page=St,this.currentPage=U,this.pages=Y.slice(0),this.pagesContext=Mt.slice(0),this.x=ft,this.y=pt,this.matrix=gt,this.width=Fn(U),this.height=jn(U),this.outputDestination=q,this.id="",this.objectNumber=-1};Dn.prototype.restore=function(){St=this.page,U=this.currentPage,Mt=this.pagesContext,Y=this.pages,ft=this.x,pt=this.y,gt=this.matrix,Un(U,this.width),zn(U,this.height),q=this.outputDestination};var Ln=function(t,e,n,r,i){kt.push(new Dn),St=U=0,Y=[],ft=t,pt=e,gt=i,Ee([n,r])},On=function(t){if(Bt[t])kt.pop().restore();else{var e=new Dn,n="Xo"+(Object.keys(Nt).length+1).toString(10);e.id=n,Bt[t]=n,Nt[n]=e,Ct.publish("addFormObject",e),kt.pop().restore()}};for(var Rn in A.beginFormObject=function(t,e,n,r,i){return Ln(t,e,n,r,i),this},A.endFormObject=function(t){return On(t),this},A.doFormObject=function(t,e){var n=Nt[Bt[t]];return J("q"),J(e.toString()+" cm"),J("/"+n.id+" Do"),J("Q"),this},A.getFormObject=function(t){var e=Nt[Bt[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},A.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(Ae(Ge(Qe()),t),"function"==typeof Ae.unload&&oe.setTimeout&&setTimeout(Ae.unload,911),this):new Promise((function(e,n){try{var r=Ae(Ge(Qe()),t);"function"==typeof Ae.unload&&oe.setTimeout&&setTimeout(Ae.unload,911),e(r)}catch(t){n(t.message)}}))},Fe.API)Fe.API.hasOwnProperty(Rn)&&("events"===Rn&&Fe.API.events.length?function(t,e){var n,r,i;for(i=e.length-1;-1!==i;i--)n=e[i][0],r=e[i][1],t.subscribe.apply(t,[n].concat("function"==typeof r?[r]:r))}(Ct,Fe.API.events):A[Rn]=Fe.API[Rn]);var Fn=A.getPageWidth=function(t){return(Mt[t=t||U].mediaBox.topRightX-Mt[t].mediaBox.bottomLeftX)/At},Un=A.setPageWidth=function(t,e){Mt[t].mediaBox.topRightX=e*At+Mt[t].mediaBox.bottomLeftX},jn=A.getPageHeight=function(t){return(Mt[t=t||U].mediaBox.topRightY-Mt[t].mediaBox.bottomLeftY)/At},zn=A.setPageHeight=function(t,e){Mt[t].mediaBox.topRightY=e*At+Mt[t].mediaBox.bottomLeftY};return A.internal={pdfEscape:Te,getStyle:tn,getFont:hn,getFontSize:it,getCharSpace:Cn,getTextColor:Sn,getLineHeight:gn,getLineHeightFactor:mn,getLineWidth:fn,write:$,getHorizontalCoordinate:yn,getVerticalCoordinate:bn,getCoordinateString:wn,getVerticalCoordinateString:xn,collections:{},newObject:Rt,newAdditionalObject:jt,newObjectDeferred:Ft,newObjectDeferredBegin:Ut,getFilters:Vt,putStream:Wt,events:Ct,scaleFactor:At,pageSize:{getWidth:function(){return Fn(U)},setWidth:function(t){Un(U,t)},getHeight:function(){return jn(U)},setHeight:function(t){zn(U,t)}},encryptionOptions:c,encryption:Ye,getEncryptor:Xe,output:Ve,getNumberOfPages:Ie,pages:Y,out:J,f2:S,f3:M,getPageInfo:qe,getPageInfoByObjId:Ke,getCurrentPageInfo:Ze,getPDFVersion:p,Point:kn,Rectangle:Pn,Matrix:Pt,hasHotfix:We},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return Fn(U)},set:function(t){Un(U,t)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return jn(U)},set:function(t){zn(U,t)},enumerable:!0,configurable:!0}),we.call(A,et),dt="F1",Se(i,n),Ct.publish("initialized"),A}Be.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Be.prototype.toHexString=function(t){return t.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Be.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Be.prototype.processOwnerPassword=function(t,e){return Ie(Se(e).substr(0,5),t)},Be.prototype.encryptor=function(t,e){var n=Se(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return Ie(n,t)}},De.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||vt(t)!==vt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return 0===r},Fe.API={events:[]},Fe.version="2.5.1";var Ue=Fe.API,je=1,ze=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},He=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Qe=function(t){return t.toFixed(2)},Ge=function(t){return t.toFixed(5)};Ue.__acroform__={};var Ve=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},We=function(t){return t*je},Ye=function(t){var e=new hn,n=En.internal.getHeight(t)||0,r=En.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Qe(r)),Number(Qe(n))],e},Xe=Ue.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},qe=Ue.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Ke=Ue.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},Ze=Ue.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ke(t,e-1)},Je=Ue.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Xe(t,e-1)},$e=Ue.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qe(t,e-1)},tn=Ue.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],o=t[1],a=t[2],s=t[3],u={};return u.lowerLeft_X=n(i)||0,u.lowerLeft_Y=r(o+s)||0,u.upperRight_X=n(i+a)||0,u.upperRight_Y=r(o)||0,[Number(Qe(u.lowerLeft_X)),Number(Qe(u.lowerLeft_Y)),Number(Qe(u.upperRight_X)),Number(Qe(u.upperRight_Y))]},en=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=nn(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Qe(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Ye(t);return o.scope=t.scope,o.stream=e.join("\n"),o}},nn=function(t,e){var n=0===t.fontSize?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map((function(t){return t.split("\n")})):i.map((function(t){return[t]}));var o=n,a=En.internal.getHeight(t)||0;a=a<0?-a:a;var s=En.internal.getWidth(t)||0;s=s<0?-s:s;var u=function(e,n,r){if(e+1<i.length){var o=n+" "+i[e+1][0];return rn(o,t,r).width<=s-4}return!1};o++;t:for(;o>0;){e="",o--;var l,c,h=rn("3",t,o).height,d=t.multiline?a-o:(a-h)/2,A=d+=2,f=0,p=0,g=0;if(o<=0){e="(...) Tj\n",e+="% Width of Text: "+rn(e,t,o=12).width+", FieldWidth:"+s+"\n";break}for(var v="",m=0,y=0;y<i.length;y++)if(i.hasOwnProperty(y)){var b=!1;if(1!==i[y].length&&g!==i[y].length-1){if((h+2)*(m+2)+2>a)continue t;v+=i[y][g],b=!0,p=y,y--}else{v=" "==(v+=i[y][g]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var w=parseInt(y),x=u(w,v,o),_=y>=i.length-1;if(x&&!_){v+=" ",g=0;continue}if(x||_){if(_)p=w;else if(t.multiline&&(h+2)*(m+2)+2>a)continue t}else{if(!t.multiline||(h+2)*(m+2)+2>a)continue t;p=w}}for(var T="",E=f;E<=p;E++){var S=i[E];if(t.multiline){if(E===p){T+=S[g]+" ",g=(g+1)%S.length;continue}if(E===f){T+=S[S.length-1]+" ";continue}}T+=S[0]+" "}switch(T=" "==T.substr(T.length-1)?T.substr(0,T.length-1):T,c=rn(T,t,o).width,t.textAlign){case"right":l=s-c-2;break;case"center":l=(s-c)/2;break;default:l=2}e+=Qe(l)+" "+Qe(A)+" Td\n",e+="("+ze(T)+") Tj\n",e+=-Qe(l)+" 0 Td\n",A=-(o+2),c=0,f=b?p:p+1,m++,v=""}break}return r.text=e,r.fontSize=o,r},rn=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},on={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},an=function(t,e){var n={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===n.type&&t.object===n.object}))&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},sn=function(t,e){if(e.scope=t,void 0!==t.internal&&(void 0===t.internal.acroformPlugin||!1===t.internal.acroformPlugin.isInitialized)){if(An.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(on)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");je=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new dn,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){var e;(e=t).internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})),t.internal.events.subscribe("buildDocument",(function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r.objId=void 0,r.hasAnnotation&&an(r,t)}}(t)})),t.internal.events.subscribe("putCatalog",(function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(t)})),t.internal.events.subscribe("postPutPages",(function(e){!function(t,e){var n=!t;for(var r in t||(e.internal.newObjectDeferredBegin(e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(r)){var i=t[r],o=[],a=i.Rect;if(i.Rect&&(i.Rect=tn(i.Rect,e)),e.internal.newObjectDeferredBegin(i.objId,!0),i.DA=En.createDefaultAppearanceStream(i),"object"===vt(i)&&"function"==typeof i.getKeyValueListForStream&&(o=i.getKeyValueListForStream()),i.Rect=a,i.hasAppearanceStream&&!i.appearanceStreamContent){var s=en(i);o.push({key:"AP",value:"<</N "+s+">>"}),e.internal.acroformPlugin.xForms.push(s)}if(i.appearanceStreamContent){var u="";for(var l in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(l)){var c=i.appearanceStreamContent[l];if(u+="/"+l+" ",u+="<<",Object.keys(c).length>=1||Array.isArray(c)){for(var r in c)if(c.hasOwnProperty(r)){var h=c[r];"function"==typeof h&&(h=h.call(e,i)),u+="/"+r+" "+h+" ",e.internal.acroformPlugin.xForms.indexOf(h)>=0||e.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=c)&&(h=h.call(e,i)),u+="/"+r+" "+h,e.internal.acroformPlugin.xForms.indexOf(h)>=0||e.internal.acroformPlugin.xForms.push(h);u+=">>"}o.push({key:"AP",value:"<<\n"+u+">>"})}e.internal.putStream({additionalKeyValues:o,objectId:i.objId}),e.internal.out("endobj")}n&&function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),"object"===vt(i)&&"function"==typeof i.putStream&&i.putStream(),delete t[r]}}(e.internal.acroformPlugin.xForms,e)}(e,t)})),t.internal.acroformPlugin.isInitialized=!0}},un=Ue.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(t){return t};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(0!==o&&(i+=" "),vt(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":"/"!==t[o].substr(0,1)?(void 0!==e&&n&&(r=n.internal.getEncryptor(e)),i+="("+ze(r(t[o].toString()))+")"):i+=t[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ln=function(t,e,n){var r=function(t){return t};return void 0!==e&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+ze(r(t))+")"},cn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};cn.prototype.toString=function(){return this.objId+" 0 R"},cn.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},cn.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)}));for(var n in e)if(!1===Object.getOwnPropertyDescriptor(this,e[n]).configurable){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:un(i,this.objId,this.scope)}):i instanceof cn?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&t.push({key:r,value:i}))}return t};var hn=function(){cn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};Ve(hn,cn);var dn=function(){cn.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+ze(e(t))+")"}},set:function(e){t=e}})};Ve(dn,cn);var An=function t(){cn.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(e,3))},set:function(t){!0===Boolean(t)?this.F=Je(e,3):this.F=$e(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');n=t}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(t){r=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(t){r[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(t){r[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(t){r[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(t){r[3]=t}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof wn)return;o="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+ze(e(o))+")"},set:function(t){o=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(t){o=t}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){s=t}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(t){u=t}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===l?50/je:l},set:function(t){l=t}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(t){c=t}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof wn||this instanceof _n))return ln(h,this.objId,this.scope)},set:function(t){t=t.toString(),h=t}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof mn?d:ln(d,this.objId,this.scope)},set:function(t){t=t.toString(),d=this instanceof mn?t:"("===t.substr(0,1)?He(t.substr(1,t.length-2)):He(t)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mn?He(d.substr(1,d.length-1)):d},set:function(t){t=t.toString(),d=this instanceof mn?"/"+t:t}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof mn?A:ln(A,this.objId,this.scope)},set:function(t){t=t.toString(),A=this instanceof mn?t:"("===t.substr(0,1)?He(t.substr(1,t.length-2)):He(t)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mn?He(A.substr(1,A.length-1)):A},set:function(t){t=t.toString(),A=this instanceof mn?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(t){t=Boolean(t),p=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(t){f=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,1))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,1):this.Ff=$e(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,2))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,2):this.Ff=$e(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,3))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,3):this.Ff=$e(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');g=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(g){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Ve(An,cn);var fn=function(){An.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return un(e,this.objId,this.scope)},set:function(t){var n,r;r=[],"string"==typeof(n=t)&&(r=function(t,e,n){n||(n=1);for(var r,i=[];r=e.exec(t);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,18))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,18):this.Ff=$e(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,19))},set:function(t){!0===this.combo&&(!0===Boolean(t)?this.Ff=Je(this.Ff,19):this.Ff=$e(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=Je(this.Ff,20),e.sort()):this.Ff=$e(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,22))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,22):this.Ff=$e(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,23):this.Ff=$e(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,27))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,27):this.Ff=$e(this.Ff,27)}}),this.hasAppearanceStream=!1};Ve(fn,An);var pn=function(){fn.call(this),this.fontName="helvetica",this.combo=!1};Ve(pn,fn);var gn=function(){pn.call(this),this.combo=!0};Ve(gn,pn);var vn=function(){gn.call(this),this.edit=!0};Ve(vn,gn);var mn=function(){An.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,15))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,15):this.Ff=$e(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,16))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,16):this.Ff=$e(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,17))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,17):this.Ff=$e(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,26):this.Ff=$e(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var n,r=[];for(n in r.push("<<"),e)r.push("/"+n+" ("+ze(t(e[n]))+")");return r.push(">>"),r.join("\n")}},set:function(t){"object"===vt(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};Ve(mn,An);var yn=function(){mn.call(this),this.pushButton=!0};Ve(yn,mn);var bn=function(){mn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};Ve(bn,mn);var wn=function(){var t,e;An.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,n=[];for(e in n.push("<<"),r)n.push("/"+e+" ("+ze(t(r[e]))+")");return n.push(">>"),n.join("\n")},set:function(t){"object"===vt(t)&&(r=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(t){"string"==typeof t&&(r.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=En.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ve(wn,An),bn.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},bn.prototype.createOption=function(t){var e=new wn;return e.Parent=this,e.optionName=t,this.Kids.push(e),Cn.call(this.scope,e),e};var xn=function(){mn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=En.CheckBox.createAppearanceStream()};Ve(xn,mn);var _n=function(){An.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,13))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,13):this.Ff=$e(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,21))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,21):this.Ff=$e(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,23):this.Ff=$e(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,24))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,24):this.Ff=$e(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,25))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,25):this.Ff=$e(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,26):this.Ff=$e(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ve(_n,An);var Tn=function(){_n.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ze(this.Ff,14))},set:function(t){!0===Boolean(t)?this.Ff=Je(this.Ff,14):this.Ff=$e(this.Ff,14)}}),this.password=!0};Ve(Tn,_n);var En={CheckBox:{createAppearanceStream:function(){return{N:{On:En.CheckBox.YesNormal},D:{On:En.CheckBox.YesPushDown,Off:En.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ye(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=nn(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Qe(En.internal.getWidth(t))+" "+Qe(En.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Qe(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join("\n"),e},YesNormal:function(t){var e=Ye(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],o=En.internal.getHeight(t),a=En.internal.getWidth(t),s=nn(t,t.caption);return i.push("1 g"),i.push("0 0 "+Qe(a)+" "+Qe(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Qe(a-1)+" "+Qe(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Qe(s.fontSize)+" Tf "+r),i.push(s.text),i.push("ET"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=Ye(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Qe(En.internal.getWidth(t))+" "+Qe(En.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:En.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=En.RadioButton.Circle.YesNormal,e.D[t]=En.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ye(t);e.scope=t.scope;var n=[],r=En.internal.getWidth(t)<=En.internal.getHeight(t)?En.internal.getWidth(t)/4:En.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=En.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Ge(En.internal.getWidth(t)/2)+" "+Ge(En.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=Ye(t);e.scope=t.scope;var n=[],r=En.internal.getWidth(t)<=En.internal.getHeight(t)?En.internal.getWidth(t)/4:En.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*En.internal.Bezier_C).toFixed(5)),a=Number((r*En.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ge(En.internal.getWidth(t)/2)+" "+Ge(En.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Ge(En.internal.getWidth(t)/2)+" "+Ge(En.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=Ye(t);e.scope=t.scope;var n=[],r=En.internal.getWidth(t)<=En.internal.getHeight(t)?En.internal.getWidth(t)/4:En.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*En.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ge(En.internal.getWidth(t)/2)+" "+Ge(En.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:En.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=En.RadioButton.Cross.YesNormal,e.D[t]=En.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ye(t);e.scope=t.scope;var n=[],r=En.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Qe(En.internal.getWidth(t)-2)+" "+Qe(En.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Qe(r.x1.x)+" "+Qe(r.x1.y)+" m"),n.push(Qe(r.x2.x)+" "+Qe(r.x2.y)+" l"),n.push(Qe(r.x4.x)+" "+Qe(r.x4.y)+" m"),n.push(Qe(r.x3.x)+" "+Qe(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=Ye(t);e.scope=t.scope;var n=En.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Qe(En.internal.getWidth(t))+" "+Qe(En.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Qe(En.internal.getWidth(t)-2)+" "+Qe(En.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Qe(n.x1.x)+" "+Qe(n.x1.y)+" m"),r.push(Qe(n.x2.x)+" "+Qe(n.x2.y)+" l"),r.push(Qe(n.x4.x)+" "+Qe(n.x4.y)+" m"),r.push(Qe(n.x3.x)+" "+Qe(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=Ye(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Qe(En.internal.getWidth(t))+" "+Qe(En.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};En.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=En.internal.getWidth(t),n=En.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},En.internal.getWidth=function(t){var e=0;return"object"===vt(t)&&(e=We(t.Rect[2])),e},En.internal.getHeight=function(t){var e=0;return"object"===vt(t)&&(e=We(t.Rect[3])),e};var Sn,Mn,Cn=Ue.addField=function(t){if(sn(this,t),!(t instanceof An))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};function In(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})}Ue.AcroFormChoiceField=fn,Ue.AcroFormListBox=pn,Ue.AcroFormComboBox=gn,Ue.AcroFormEditBox=vn,Ue.AcroFormButton=mn,Ue.AcroFormPushButton=yn,Ue.AcroFormRadioButton=bn,Ue.AcroFormCheckBox=xn,Ue.AcroFormTextField=_n,Ue.AcroFormPasswordField=Tn,Ue.AcroFormAppearance=En,Ue.AcroForm={ChoiceField:fn,ListBox:pn,ComboBox:gn,EditBox:vn,Button:mn,PushButton:yn,RadioButton:bn,CheckBox:xn,TextField:_n,PasswordField:Tn,Appearance:En},Fe.AcroForm={ChoiceField:fn,ListBox:pn,ComboBox:gn,EditBox:vn,Button:mn,PushButton:yn,RadioButton:bn,CheckBox:xn,TextField:_n,PasswordField:Tn,Appearance:En},Fe.AcroForm,function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(t,r){var i,o,a,s,u,l=e;if("RGBA"===(r=r||e)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(x(t))for(u in n)for(a=n[u],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==t[o]){s=!1;break}if(!0===s){l=u;break}}else for(u in n)for(a=n[u],i=0;i<a.length;i+=1){for(s=!0,o=0;o<a[i].length;o+=1)if(void 0!==a[i][o]&&a[i][o]!==t.charCodeAt(o)){s=!1;break}if(!0===s){l=u;break}}return l===e&&r!==e&&(l=r),l},i=function t(e){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:e.width}),o.push({key:"Height",value:e.height}),e.colorSpace===g.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===g.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var a="",s=0,u=e.transparency.length;s<u;s++)a+=e.transparency[s]+" "+e.transparency[s]+" ";o.push({key:"Mask",value:"["+a+"]"})}void 0!==e.sMask&&o.push({key:"SMask",value:e.objectId+1+" 0 R"});var l=void 0!==e.filter?["/"+e.filter]:void 0;if(r({data:e.data,additionalKeyValues:o,alreadyAppliedFilters:l,objectId:e.objectId}),n("endobj"),"sMask"in e&&void 0!==e.sMask){var c="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,h={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:c,data:e.sMask};"filter"in e&&(h.filter=e.filter),t.call(this,h)}if(e.colorSpace===g.INDEXED){var d=this.internal.newObject();r({data:T(new Uint8Array(e.palette)),objectId:d}),n("endobj")}},o=function(){var t=this.internal.collections.addImage_images;for(var e in t)i.call(this,t[e])},a=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var r in e)n("/I"+(t=e[r]).index,t.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var t=this.internal.collections.addImage_images;return s.call(this),t},l=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(e){return"function"==typeof t["process"+e.toUpperCase()]},h=function(t){return"object"===vt(t)&&1===t.nodeType},d=function(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var r=""+e.getAttribute("src");if(0===r.indexOf("data:image/"))return he(unescape(r).split("base64,").pop());var i=t.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===e.nodeName){if(0===e.width||0===e.height)throw new Error("Given canvas must have data. Canvas width: "+e.width+", height: "+e.height);var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;default:o="image/jpeg"}return he(e.toDataURL(o,1).split("base64,").pop())}},A=function(t){var e=this.internal.collections.addImage_images;if(e)for(var n in e)if(t===e[n].alias)return e[n]},f=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.height*72/e/this.internal.scaleFactor),0===t&&(t=e*n.width/n.height),0===e&&(e=t*n.height/n.width),[t,e]},p=function(t,e,n,r,i,o){var a=f.call(this,n,r,i),s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=u.call(this);if(n=a[0],r=a[1],c[i.index]=i,o){o*=Math.PI/180;var h=Math.cos(o),d=Math.sin(o),A=function(t){return t.toFixed(4)},p=[A(h),A(d),A(-1*d),A(h),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,s(t),l(e+r),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([s(n),"0","0",s(r),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(r),s(t),l(e+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},m=t.__addimage__.sHashCode=function(t){var e,n,r=0;if("string"==typeof t)for(n=t.length,e=0;e<n;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;else if(x(t))for(n=t.byteLength/2,e=0;e<n;e++)r=(r<<5)-r+t[e],r|=0;return r},y=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},b=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),n=null;if(2===e.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:e[1]})}return n},w=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return w()&&t instanceof ArrayBuffer};var x=t.__addimage__.isArrayBufferView=function(t){return w()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},_=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n},T=t.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",n=x(t)?t:new Uint8Array(t),r=0;r<n.length;r+=8192)e+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return e};t.addImage=function(){var t,n,r,i,o,a,u,l,c;if("number"==typeof arguments[1]?(n=e,r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],u=arguments[5],l=arguments[6],c=arguments[7]):(n=arguments[1],r=arguments[2],i=arguments[3],o=arguments[4],a=arguments[5],u=arguments[6],l=arguments[7],c=arguments[8]),"object"===vt(t=arguments[0])&&!h(t)&&"imageData"in t){var d=t;t=d.imageData,n=d.format||n||e,r=d.x||r||0,i=d.y||i||0,o=d.w||d.width||o,a=d.h||d.height||a,u=d.alias||u,l=d.compression||l,c=d.rotation||d.angle||c}var A=this.internal.getFilters();if(void 0===l&&-1!==A.indexOf("FlateEncode")&&(l="SLOW"),isNaN(r)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var f=E.call(this,t,n,u,l);return p.call(this,r,i,o,a,f,c),this};var E=function(n,i,o,a){var s,u,f,p;if("string"==typeof n&&r(n)===e){n=unescape(n);var g=S(n,!1);(""!==g||void 0!==(g=t.loadFile(n,!0)))&&(n=g)}if(h(n)&&(n=d(n,i)),i=r(n,i),!c(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(f=o)||0===f.length)&&(o="string"==typeof(p=n)||x(p)?m(p):x(p.data)?m(p.data):null),(s=A.call(this,o))||(w()&&(n instanceof Uint8Array||"RGBA"===i||(u=n,n=_(n))),s=this["process"+i.toUpperCase()](n,l.call(this),o,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:v.NONE}(a),u)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},S=t.__addimage__.convertBase64ToBinaryString=function(t,e){var n;e="boolean"!=typeof e||e;var r,i="";if("string"==typeof t){r=null!==(n=b(t))?n.data:t;try{i=he(r)}catch(t){if(e)throw y(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};t.getImageProperties=function(n){var i,o,a="";if(h(n)&&(n=d(n)),"string"==typeof n&&r(n)===e&&(""===(a=S(n,!1))&&(a=t.loadFile(n)||""),n=a),o=r(n),!c(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!w()||n instanceof Uint8Array||(n=_(n)),!(i=this["process"+o.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=o,i}}(Fe.API),Sn=Fe.API,Mn=function(t){if(void 0!==t&&""!=t)return!0},Fe.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),Sn.events.push(["putPage",function(t){for(var e,n,r,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,a=this.internal.getPageInfoByObjId(t.objId),s=t.pageContext.annotations,u=!1,l=0;l<s.length&&!u;l++)switch((e=s[l]).type){case"link":(Mn(e.options.url)||Mn(e.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(0!=u){this.internal.write("/Annots [");for(var c=0;c<s.length;c++){e=s[c];var h=this.internal.pdfEscape,d=this.internal.getEncryptor(t.objId);switch(e.type){case"reference":this.internal.write(" "+e.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),p=this.internal.getEncryptor(A.objId),g=e.title||"Note";r="<</Type /Annot /Subtype /Text "+(n="/Rect ["+i(e.bounds.x)+" "+o(e.bounds.y+e.bounds.h)+" "+i(e.bounds.x+e.bounds.w)+" "+o(e.bounds.y)+"] ")+"/Contents ("+h(p(e.contents))+")",r+=" /Popup "+f.objId+" 0 R",r+=" /P "+a.objId+" 0 R",r+=" /T ("+h(p(g))+") >>",A.content=r;var v=A.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+i(e.bounds.x+30)+" "+o(e.bounds.y+e.bounds.h)+" "+i(e.bounds.x+e.bounds.w+30)+" "+o(e.bounds.y)+"] ")+" /Parent "+v,e.open&&(r+=" /Open true"),r+=" >>",f.content=r,this.internal.write(A.objId,"0 R",f.objId,"0 R");break;case"freetext":n="/Rect ["+i(e.bounds.x)+" "+o(e.bounds.y)+" "+i(e.bounds.x+e.bounds.w)+" "+o(e.bounds.y+e.bounds.h)+"] ";var m=e.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+h(d(e.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+m+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(e.options.name){var y=this.annotations._nameMap[e.options.name];e.options.pageNumber=y.page,e.options.top=y.y}else e.options.top||(e.options.top=0);if(n="/Rect ["+e.finalBounds.x+" "+e.finalBounds.y+" "+e.finalBounds.w+" "+e.finalBounds.h+"] ",r="",e.options.url)r="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+h(d(e.options.url))+") >>";else if(e.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(e.options.pageNumber).objId+" 0 R",e.options.magFactor=e.options.magFactor||"XYZ",e.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+e.options.top+"]";break;case"FitV":e.options.left=e.options.left||0,r+=" /FitV "+e.options.left+"]";break;default:var b=o(e.options.top);e.options.left=e.options.left||0,void 0===e.options.zoom&&(e.options.zoom=0),r+=" /XYZ "+e.options.left+" "+b+" "+e.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),Sn.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},Sn.link=function(t,e,n,r,i){var o=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:a(t),y:s(e),w:a(t+n),h:s(e+r)},options:i,type:"link"})},Sn.textWithLink=function(t,e,n,r){var i,o,a=this.getTextWidth(t),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){o=r.maxWidth;var u=this.splitTextToSize(t,o).length;i=Math.ceil(s*u)}else o=a,i=s;return this.text(t,e,n,r),n+=.2*s,"center"===r.align&&(e-=a/2),"right"===r.align&&(e-=a),this.link(e,n-s,o,i,r),a},Sn.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},a=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},s=t.__arabicParser__.isArabicEndLetter=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(t){return a(t)&&i.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=1};var l=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return a(t)&&o(t)&&e[t.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return a(t)&&o(t)&&4==e[t.charCodeAt(0)].length},h=t.__arabicParser__.resolveLigatures=function(t){var e=0,r=n,i="",o=0;for(e=0;e<t.length;e+=1)void 0!==r[t.charCodeAt(e)]?(o++,"number"==typeof(r=r[t.charCodeAt(e)])&&(i+=String.fromCharCode(r),r=n,o=0),e===t.length-1&&(r=n,i+=t.charAt(e-(o-1)),e-=o-1,o=0)):(r=n,i+=t.charAt(e-o),e-=o,o=0);return i};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==r[t.charCodeAt(0)]};var d=t.__arabicParser__.getCorrectForm=function(t,e,n){return a(t)?!1===o(t)?-1:!l(t)||!a(e)&&!a(n)||!a(n)&&s(e)||s(t)&&!a(e)||s(t)&&u(e)||s(t)&&s(e)?0:c(t)&&a(e)&&!s(e)&&a(n)&&l(n)?3:s(t)||!a(n)?1:2:-1},A=function(t){var n=0,r=0,i=0,o="",s="",u="",l=(t=t||"").split("\\s+"),c=[];for(n=0;n<l.length;n+=1){for(c.push(""),r=0;r<l[n].length;r+=1)o=l[n][r],s=l[n][r-1],u=l[n][r+1],a(o)?(i=d(o,s,u),c[n]+=-1!==i?String.fromCharCode(e[o.charCodeAt(0)][i]):o):c[n]+=o;c[n]=h(c[n])}return c.join(" ")},f=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(e)){var r=0;for(n=[],r=0;r<e.length;r+=1)Array.isArray(e[r])?n.push([A(e[r][0]),e[r][1],e[r][2]]):n.push([A(e[r])]);t=n}else t=A(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",f])}(Fe.API),Fe.API.autoPrint=function(t){var e;if("javascript"===((t=t||{}).variant=t.variant||"non-conform",t.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}));return this},function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(t){r=t}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Fe.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(t){o=t}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(t){a=t}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){r.call(this);var n=(e=e||{}).fontSize||this.getFontSize(),i=e.font||this.getFont(),o=e.scaleFactor||this.internal.scaleFactor,a=0,s=0,u=0,l=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var c=e.maxWidth;c>0?"string"==typeof t?t=this.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(l.splitTextToSize(e,c))}),[])):t=Array.isArray(t)?t:[t];for(var h=0;h<t.length;h++)a<(u=this.getStringUnitWidth(t[h],{font:i})*n)&&(a=u);return 0!==a&&(s=t.length),{w:a/=o,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/o,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var t;t=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,a=this.internal.__cell__.padding,s=this.internal.__cell__.margins||e,u=this.internal.__cell__.tableHeaderRow,l=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===t.lineNumber?(t.x=(i.x||0)+(i.width||0),t.y=i.y||0):i.y+i.height+t.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=s.top,l&&u&&(this.printHeaderRow(t.lineNumber,!0),t.y+=u[0].height)):t.y=i.y+i.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===n?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-a,t.y+a,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+a,{align:"center",baseline:"top",maxWidth:t.width-a-a}):this.text(t.text,t.x+a,t.y+a,{align:"left",baseline:"top",maxWidth:t.width-a-a})),this.internal.__cell__.lastCell=t,this};t.table=function(t,n,u,l,c){if(r.call(this),!u)throw new Error("No data for PDF table.");var h,d,A,f,p=[],g=[],v=[],m={},y={},b=[],w=[],x=(c=c||{}).autoSize||!1,_=!1!==c.printHeaders,T=c.css&&void 0!==c.css["font-size"]?16*c.css["font-size"]:c.fontSize||12,E=c.margins||Object.assign({width:this.getPageWidth()},e),S="number"==typeof c.padding?c.padding:3,M=c.headerBackgroundColor||"#c8c8c8",C=c.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=T,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=C,this.setFontSize(T),null==l)g=p=Object.keys(u[0]),v=p.map((function(){return"left"}));else if(Array.isArray(l)&&"object"===vt(l[0]))for(p=l.map((function(t){return t.name})),g=l.map((function(t){return t.prompt||t.name||""})),v=l.map((function(t){return t.align||"left"})),h=0;h<l.length;h+=1)y[l[h].name]=l[h].width*(19.049976/25.4);else Array.isArray(l)&&"string"==typeof l[0]&&(g=p=l,v=p.map((function(){return"left"})));if(x||Array.isArray(l)&&"string"==typeof l[0])for(h=0;h<p.length;h+=1){for(m[f=p[h]]=u.map((function(t){return t[f]})),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(g[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),d=m[f],this.setFont(void 0,"normal"),A=0;A<d.length;A+=1)b.push(this.getTextDimensions(d[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[f]=Math.max.apply(null,b)+S+S,b=[]}if(_){var I={};for(h=0;h<p.length;h+=1)I[p[h]]={},I[p[h]].text=g[h],I[p[h]].align=v[h];var N=s.call(this,I,y);w=p.map((function(e){return new o(t,n,y[e],N,I[e].text,void 0,I[e].align)})),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var B=l.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(h=0;h<u.length;h+=1){"rowStart"in c&&c.rowStart instanceof Function&&c.rowStart({row:h,data:u[h]},this);var k=s.call(this,u[h],y);for(A=0;A<p.length;A+=1){var P=u[h][p[A]];"cellStart"in c&&c.cellStart instanceof Function&&c.cellStart({row:h,col:A,data:P},this),a.call(this,new o(t,n,y[p[A]],k,P,h+2,B[p[A]]))}}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=n,this};var s=function(t,e){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(t).map((function(r){var i=t[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,e[r]-n-n)}),this).map((function(t){return this.getLineHeightFactor()*t.length*r/i+n+n}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){r.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var u=[],l=0;l<this.internal.__cell__.tableHeaderRow.length;l+=1){i=this.internal.__cell__.tableHeaderRow[l].clone(),e&&(i.y=this.internal.__cell__.margins.top||0,u.push(i)),i.lineNumber=t;var c=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,i),this.setTextColor(c)}u.length>0&&this.setTableHeaderRow(u),this.setFont(void 0,"normal"),n=!1}}(Fe.API);var Nn={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Bn=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kn=In(Bn),Pn=[100,200,300,400,500,600,700,800,900],Dn=In(Pn);function Ln(t){var e,n=t.family.replace(/"|'/g,"").toLowerCase(),r=(e=t.style,Nn[e=e||"normal"]?e:"normal"),i=function(t){return t?"number"==typeof t?t>=100&&t<=900&&t%100==0?t:400:/^\d00$/.test(t)?parseInt(t):"bold"===t?700:400:400}(t.weight),o=function(t){return"number"==typeof kn[t=t||"normal"]?t:"normal"}(t.stretch);return{family:n,style:r,weight:i,stretch:o,src:t.src||[],ref:t.ref||{name:n,style:[o,r,i].join(" ")}}}function On(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Rn={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Fn={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Un(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function jn(t){return t.trimLeft()}function zn(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Hn(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}var Qn,Gn,Vn,Wn=["times"];(function(t){var e,n,r,i,o,a,s,u,l,c=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new u,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new a,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new a,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,s=this.internal.Rectangle,u=this.internal.Matrix,l=new c}]);var h=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(t){r=Boolean(t)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(t){isNaN(t)||(i=t)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(t){isNaN(t)||(o=t)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=new Array(4))[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),l.margin=e}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(t){a=t}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(t){s=t}});var u=[];Object.defineProperty(this,"pageBreaks",{get:function(){return u},set:function(t){u=t}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(t){t instanceof c&&(l=t)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(t){l.path=t}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=d(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=d(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var A=null;var f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(t){A=null,f=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1],r=(e[2],e[3]),i=e[4],o=(e[5],e[6]),a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i=Math.floor("px"===a?parseFloat(i)*this.pdf.internal.scaleFactor:"em"===a?parseFloat(i)*this.pdf.getFontSize():parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var s=function(t){var e,n,r=[],i=t.trim();if(""===i)return Wn;if(i in Fn)return[Fn[i]];for(;""!==i;){switch(n=null,e=(i=jn(i)).charAt(0)){case'"':case"'":n=zn(i.substring(1),e);break;default:n=Hn(i)}if(null===n||(r.push(n[0]),""!==(i=jn(n[1]))&&","!==i.charAt(0)))return Wn;i=i.replace(/^,/,"")}return r}(o);if(this.fontFaces){var u=function(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Rn,n.genericFontFamilies||{}),o=null,a=null,s=0;s<e.length;++s)if(i[(o=Ln(e[s])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){a=t[o.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+Un(o)+"' and default family '"+r+"'.");if(a=function(t,e){if(e[t])return e[t];var n=kn[t],r=n<=kn.normal?-1:1,i=On(e,Bn,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+t);return i}(o.stretch,a),a=function(t,e){if(e[t])return e[t];for(var n=Nn[t],r=0;r<n.length;++r)if(e[n[r]])return e[n[r]];throw new Error("Could not find a matching font-style for "+t)}(o.style,a),!(a=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var n=Dn[t],r=On(e,Pn,n,t<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+t);return r}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+Un(o)+"'.");return a}(function(t,e){if(null===A){var n=(r=t.getFontList(),i=[],Object.keys(r).forEach((function(t){r[t].forEach((function(e){var n=null;switch(e){case"bold":n={family:t,weight:"bold"};break;case"italic":n={family:t,style:"italic"};break;case"bolditalic":n={family:t,weight:"bold",style:"italic"};break;case"":case"normal":n={family:t}}null!==n&&(n.ref={name:t,style:e},i.push(n))}))})),i);A=function(t){for(var e={},n=0;n<t.length;++n){var r=Ln(t[n]),i=r.family,o=r.stretch,a=r.style,s=r.weight;e[i]=e[i]||{},e[i][o]=e[i][o]||{},e[i][o][a]=e[i][o][a]||{},e[i][o][a][s]=r}return e}(n.concat(e))}var r,i;return A}(this.pdf,this.fontFaces),s.map((function(t){return{family:t,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(u.ref.name,u.ref.style)}else{var l="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(l="bold"),"italic"===n&&(l+="italic"),0===l.length&&(l="normal");for(var c="",h={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},d=0;d<s.length;d++){if(void 0!==this.pdf.internal.getFont(s[d],l,{noFallback:!0,disableWarning:!0})){c=s[d];break}if("bolditalic"===l&&void 0!==this.pdf.internal.getFont(s[d],"bold",{noFallback:!0,disableWarning:!0}))c=s[d],l="bold";else if(void 0!==this.pdf.internal.getFont(s[d],"normal",{noFallback:!0,disableWarning:!0})){c=s[d],l="normal";break}}if(""===c)for(var f=0;f<s.length;f++)if(h[s[f]]){c=h[s[f]];break}c=""===c?"Times":c,this.pdf.setFont(c,l)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,R.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,R.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};h.prototype.setLineDash=function(t){this.lineDash=t},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){b.call(this,"fill",!1)},h.prototype.stroke=function(){b.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw se.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(t,e)},h.prototype.closePath=function(){var t=new a(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===vt(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new a(this.path[e+1].x,this.path[e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(t.x,t.y)},h.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw se.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},h.prototype.quadraticCurveTo=function(t,e,n,r){if(isNaN(n)||isNaN(r)||isNaN(t)||isNaN(e))throw se.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new a(n,r)),o=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"qct",x1:o.x,y1:o.y,x:i.x,y:i.y}),this.ctx.lastPoint=new a(i.x,i.y)},h.prototype.bezierCurveTo=function(t,e,n,r,i,o){if(isNaN(i)||isNaN(o)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw se.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new a(i,o)),u=this.ctx.transform.applyToPoint(new a(t,e)),l=this.ctx.transform.applyToPoint(new a(n,r));this.path.push({type:"bct",x1:u.x,y1:u.y,x2:l.x,y2:l.y,x:s.x,y:s.y}),this.ctx.lastPoint=new a(s.x,s.y)},h.prototype.arc=function(t,e,n,r,i,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i))throw se.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new a(t,e));t=s.x,e=s.y;var u=this.ctx.transform.applyToPoint(new a(0,n)),l=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(u.x-l.x,2)+Math.pow(u.y-l.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:r,endAngle:i,counterclockwise:o})},h.prototype.arcTo=function(t,e,n,r,i){throw new Error("arcTo not implemented.")},h.prototype.rect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw se.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},h.prototype.fillRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw se.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},h.prototype.strokeRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw se.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(t,e,n,r),this.stroke())},h.prototype.clearRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw se.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,r))},h.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},h.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(t){var e,n,r,i;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,n=0,r=0,i=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==o)e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3]),i=parseFloat(o[4]);else{if(i=1,"string"==typeof t&&"#"!==t.charAt(0)){var a=new fe(t);t=a.ok?a.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,r=t.substring(3,4),r+=r):(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:e,g:n,b:r,a:i,style:t}},A=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},f=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw se.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!A.call(this)){var i=D(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;C.call(this,{text:t,x:e,y:n,scale:o,angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.strokeText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw se.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){r=isNaN(r)?void 0:r;var i=D(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;C.call(this,{text:t,x:e,y:n,scale:o,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},h.prototype.measureText=function(t){if("string"!=typeof t)throw se.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,r=e.internal.getFontSize(),i=e.getStringUnitWidth(t)*r/e.internal.scaleFactor,o=function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this};return new o({width:i*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw se.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new u(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(t){if(isNaN(t))throw se.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new u(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},h.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw se.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new u(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(t,e,n,r,i,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(o))throw se.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new u(t,e,n,r,i,o);this.ctx.transform=this.ctx.transform.multiply(a)},h.prototype.setTransform=function(t,e,n,r,i,o){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,o=isNaN(o)?0:o,this.ctx.transform=new u(t,e,n,r,i,o)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(t,e,n,r,i,o,a,l,c){var h=this.pdf.getImageProperties(t),d=1,A=1,f=1,v=1;void 0!==r&&void 0!==l&&(f=l/r,v=c/i,d=h.width/r*l/r,A=h.height/i*c/i),void 0===o&&(o=e,a=n,e=0,n=0),void 0!==r&&void 0===l&&(l=r,c=i),void 0===r&&void 0===l&&(l=h.width,c=h.height);for(var b,x=this.ctx.transform.decompose(),_=D(x.rotate.shx),T=new u,E=(T=(T=(T=T.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new s(o-e*f,a-n*v,r*d,i*A)),S=g.call(this,E),M=[],C=0;C<S.length;C+=1)-1===M.indexOf(S[C])&&M.push(S[C]);if(y(M),this.autoPaging)for(var I=M[0],N=M[M.length-1],B=I;B<N+1;B++){this.pdf.setPage(B);var k=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],P=1===B?this.posY+this.margin[0]:this.margin[0],L=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],O=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],R=1===B?0:L+(B-2)*O;if(0!==this.ctx.clip_path.length){var F=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(b,this.posX+this.margin[3],-R+P+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=F}var U=JSON.parse(JSON.stringify(E));U=m([U],this.posX+this.margin[3],-R+P+this.ctx.prevPageLastElemOffset)[0];var j=(B>I||B<N)&&p.call(this);j&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],k,O,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",U.x,U.y,U.w,U.h,null,null,_),j&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",E.x,E.y,E.w,E.h,null,null,_)};var g=function(t,e,n){var r=[];e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":r.push(Math.floor((t.y+i)/n)+1);break;case"arc":r.push(Math.floor((t.y+i-t.radius)/n)+1),r.push(Math.floor((t.y+i+t.radius)/n)+1);break;case"qct":var o=L(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);r.push(Math.floor((o.y+i)/n)+1),r.push(Math.floor((o.y+o.h+i)/n)+1);break;case"bct":var a=O(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);r.push(Math.floor((a.y+i)/n)+1),r.push(Math.floor((a.y+a.h+i)/n)+1);break;case"rect":r.push(Math.floor((t.y+i)/n)+1),r.push(Math.floor((t.y+t.h+i)/n)+1)}for(var s=0;s<r.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<r[s];)v.call(this);return r},v=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=o},m=function(t,e,n){for(var r=0;r<t.length;r++)switch(t[r].type){case"bct":t[r].x2+=e,t[r].y2+=n;case"qct":t[r].x1+=e,t[r].y1+=n;default:t[r].x+=e,t[r].y+=n}return t},y=function(t){return t.sort((function(t,e){return t-e}))},b=function(t,e){for(var n,r,i=this.fillStyle,o=this.strokeStyle,a=this.lineCap,s=this.lineWidth,u=Math.abs(s*this.ctx.transform.scaleX),l=this.lineJoin,c=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),d=[],A=0;A<h.length;A++)if(void 0!==h[A].x)for(var f=g.call(this,h[A]),b=0;b<f.length;b+=1)-1===d.indexOf(f[b])&&d.push(f[b]);for(var x=0;x<d.length;x++)for(;this.pdf.internal.getNumberOfPages()<d[x];)v.call(this);if(y(d),this.autoPaging)for(var _=d[0],T=d[d.length-1],E=_;E<T+1;E++){this.pdf.setPage(E),this.fillStyle=i,this.strokeStyle=o,this.lineCap=a,this.lineWidth=u,this.lineJoin=l;var S=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],M=1===E?this.posY+this.margin[0]:this.margin[0],C=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],N=1===E?0:C+(E-2)*I;if(0!==this.ctx.clip_path.length){var B=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(n,this.posX+this.margin[3],-N+M+this.ctx.prevPageLastElemOffset),w.call(this,t,!0),this.path=B}if(r=JSON.parse(JSON.stringify(c)),this.path=m(r,this.posX+this.margin[3],-N+M+this.ctx.prevPageLastElemOffset),!1===e||0===E){var k=(E>_||E<T)&&p.call(this);k&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],S,I,null).clip().discardPath()),w.call(this,t,e),k&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=u,w.call(this,t,e),this.lineWidth=s;this.path=c},w=function(t,e){if(("stroke"!==t||e||!f.call(this))&&("stroke"===t||e||!A.call(this))){for(var n,r,i=[],o=this.path,a=0;a<o.length;a++){var s=o[a];switch(s.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:s,deltas:[],abs:[]});break;case"lt":var u=i.length;if(o[a-1]&&!isNaN(o[a-1].x)&&(n=[s.x-o[a-1].x,s.y-o[a-1].y],u>0))for(;u>=0;u--)if(!0!==i[u-1].close&&!0!==i[u-1].begin){i[u-1].deltas.push(n),i[u-1].abs.push(s);break}break;case"bct":n=[s.x1-o[a-1].x,s.y1-o[a-1].y,s.x2-o[a-1].x,s.y2-o[a-1].y,s.x-o[a-1].x,s.y-o[a-1].y],i[i.length-1].deltas.push(n);break;case"qct":var l=o[a-1].x+2/3*(s.x1-o[a-1].x),c=o[a-1].y+2/3*(s.y1-o[a-1].y),h=s.x+2/3*(s.x1-s.x),d=s.y+2/3*(s.y1-s.y),p=s.x,g=s.y;n=[l-o[a-1].x,c-o[a-1].y,h-o[a-1].x,d-o[a-1].y,p-o[a-1].x,g-o[a-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(s)}}r=e?null:"stroke"===t?"stroke":"fill";for(var v=!1,m=0;m<i.length;m++)if(i[m].arc)for(var y=i[m].abs,b=0;b<y.length;b++){var w=y[b];"arc"===w.type?T.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,e,!v):I.call(this,w.x,w.y),v=!0}else if(!0===i[m].close)this.pdf.internal.out("h"),v=!1;else if(!0!==i[m].begin){var x=i[m].start.x,_=i[m].start.y;N.call(this,i[m].deltas,x,_),v=!0}r&&E.call(this,r),e&&S.call(this)}},x=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;default:return t}},_=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(t,e,n,r,i,o,a,s,u){for(var l=k.call(this,n,r,i,o),c=0;c<l.length;c++){var h=l[c];0===c&&(u?M.call(this,h.x1+t,h.y1+e):I.call(this,h.x1+t,h.y1+e)),B.call(this,t,e,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}s?S.call(this):E.call(this,a)},E=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},S=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(t,e){this.pdf.internal.out(n(t)+" "+r(e)+" m")},C=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;default:e="left"}var n=this.pdf.getTextDimensions(t.text),r=x.call(this,t.y),i=_.call(this,r)-n.h,o=this.ctx.transform.applyToPoint(new a(t.x,r)),l=this.ctx.transform.decompose(),c=new u;c=(c=(c=c.multiply(l.translate)).multiply(l.skew)).multiply(l.scale);for(var h,d,A,f=this.ctx.transform.applyToRectangle(new s(t.x,r,n.w,n.h)),v=c.applyToRectangle(new s(t.x,i,n.w,n.h)),b=g.call(this,v),T=[],E=0;E<b.length;E+=1)-1===T.indexOf(b[E])&&T.push(b[E]);if(y(T),this.autoPaging)for(var S=T[0],M=T[T.length-1],C=S;C<M+1;C++){this.pdf.setPage(C);var I=1===C?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],B=this.pdf.internal.pageSize.height-this.margin[2],k=B-this.margin[0],P=this.pdf.internal.pageSize.width-this.margin[1],D=P-this.margin[3],L=1===C?0:N+(C-2)*k;if(0!==this.ctx.clip_path.length){var O=this.path;h=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=m(h,this.posX+this.margin[3],-1*L+I),w.call(this,"fill",!0),this.path=O}var R=m([JSON.parse(JSON.stringify(v))],this.posX+this.margin[3],-L+I+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),A=this.lineWidth,this.lineWidth=A*t.scale);var F="text"!==this.autoPaging;if(F||R.y+R.h<=B){if(F||R.y>=I&&R.x<=P){var U=F?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||P-R.x)[0],j=m([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-L+I+this.ctx.prevPageLastElemOffset)[0],z=F&&(C>S||C<M)&&p.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],D,k,null).clip().discardPath()),this.pdf.text(U,j.x,j.y,{angle:t.angle,align:e,renderingMode:t.renderingMode}),z&&this.pdf.restoreGraphicsState()}}else R.y<B&&(this.ctx.prevPageLastElemOffset+=B-R.y);t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=A)}else t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),A=this.lineWidth,this.lineWidth=A*t.scale),this.pdf.text(t.text,o.x+this.posX,o.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=A)},I=function(t,e,i,o){i=i||0,o=o||0,this.pdf.internal.out(n(t+i)+" "+r(e+o)+" l")},N=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},B=function(t,n,r,a,s,u,l,c){this.pdf.internal.out([e(i(r+t)),e(o(a+n)),e(i(s+t)),e(o(u+n)),e(i(l+t)),e(o(c+n)),"c"].join(" "))},k=function(t,e,n,r){for(var i=2*Math.PI,o=Math.PI/2;e>n;)e-=i;var a=Math.abs(n-e);a<i&&r&&(a=i-a);for(var s=[],u=r?-1:1,l=e;a>1e-5;){var c=l+u*Math.min(a,o);s.push(P.call(this,t,l,c)),a-=Math.abs(c-l),l=c}return s},P=function(t,e,n){var r=(n-e)/2,i=t*Math.cos(r),o=t*Math.sin(r),a=i,s=-o,u=a*a+s*s,l=u+a*i+s*o,c=4/3*(Math.sqrt(2*u*l)-l)/(a*o-s*i),h=a-c*s,d=s+c*a,A=h,f=-d,p=r+e,g=Math.cos(p),v=Math.sin(p);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*g-d*v,y2:h*v+d*g,x3:A*g-f*v,y3:A*v+f*g,x4:t*Math.cos(n),y4:t*Math.sin(n)}},D=function(t){return 180*t/Math.PI},L=function(t,e,n,r,i,o){var a=t+.5*(n-t),u=e+.5*(r-e),l=i+.5*(n-i),c=o+.5*(r-o),h=Math.min(t,i,a,l),d=Math.max(t,i,a,l),A=Math.min(e,o,u,c),f=Math.max(e,o,u,c);return new s(h,A,d-h,f-A)},O=function(t,e,n,r,i,o,a,u){var l,c,h,d,A,f,p,g,v,m,y,b,w,x,_=n-t,T=r-e,E=i-n,S=o-r,M=a-i,C=u-o;for(c=0;c<41;c++)v=(p=(h=t+(l=c/40)*_)+l*((A=n+l*E)-h))+l*(A+l*(i+l*M-A)-p),m=(g=(d=e+l*T)+l*((f=r+l*S)-d))+l*(f+l*(o+l*C-f)-g),0==c?(y=v,b=m,w=v,x=m):(y=Math.min(y,v),b=Math.min(b,m),w=Math.max(w,v),x=Math.max(x,m));return new s(Math.round(y),Math.round(b),Math.round(w-y),Math.round(x-b))},R=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t,e,n=(t=this.ctx.lineDash,e=this.ctx.lineDashOffset,JSON.stringify({lineDash:t,lineDashOffset:e}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}})(Fe.API),function(t){var e=function(t){var e,n,r,i,o,a,s,u,l,c;for(/[^\x00-\xFF]/.test(t),n=[],r=0,i=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;i>r;r+=4)0!==(o=(t.charCodeAt(r)<<24)+(t.charCodeAt(r+1)<<16)+(t.charCodeAt(r+2)<<8)+t.charCodeAt(r+3))?(a=(o=((o=((o=((o=(o-(c=o%85))/85)-(l=o%85))/85)-(u=o%85))/85)-(s=o%85))/85)%85,n.push(a+33,s+33,u+33,l+33,c+33)):n.push(122);return function(t,e){for(var n=e;n>0;n--)t.pop()}(n,e.length),String.fromCharCode.apply(String,n)+"~>"},n=function(t){var e,n,r,i,o,a=String,s="length",u=255,l="charCodeAt",c="slice",h="replace";for(t[c](-2),t=t[c](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),r=[],i=0,o=(t+=e="uuuuu"[c](t[s]%5||5))[s];o>i;i+=5)n=52200625*(t[l](i)-33)+614125*(t[l](i+1)-33)+7225*(t[l](i+2)-33)+85*(t[l](i+3)-33)+(t[l](i+4)-33),r.push(u&n>>24,u&n>>16,u&n>>8,u&n);return function(t,e){for(var n=e;n>0;n--)t.pop()}(r,e[s]),a.fromCharCode.apply(a,r)},r=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",r=0;r<t.length;r+=2)n+=String.fromCharCode("0x"+(t[r]+t[r+1]));return n},i=function(t){for(var e=new Uint8Array(t.length),n=t.length;n--;)e[n]=t.charCodeAt(n);return(e=re(e)).reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,o){var a=0,s=t||"",u=[];for("string"==typeof(o=o||[])&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=e(s),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=r(s),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=i(s),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:s,reverseChain:u.reverse().join(" ")}}}(Fe.API),function(t){t.loadFile=function(t,e,n){return function(t,e,n){e=!1!==e,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(t,e,n){var r=new XMLHttpRequest,i=0,o=function(t){var e=t.length,n=[],r=String.fromCharCode;for(i=0;i<e;i+=1)n.push(r(255&t.charCodeAt(i)));return n.join("")};if(r.open("GET",t,!e),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(r.onload=function(){200===r.status?n(o(this.responseText)):n(void 0)}),r.send(null),e&&200===r.status)return o(r.responseText)}(t,e,n)}catch(t){}return r}(t,e,n)},t.loadImageFile=t.loadFile}(Fe.API),function(t){function e(){return(oe.html2canvas?Promise.resolve(oe.html2canvas):Promise.resolve().then((function(){return Ld}))).catch((function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))})).then((function(t){return t.default?t.default:t}))}function n(){return(oe.DOMPurify?Promise.resolve(oe.DOMPurify):Promise.resolve().then((function(){return RA}))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var r=function(t){var e=vt(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},i=function(t,e){var n=document.createElement(t);for(var r in e.className&&(n.className=e.className),e.innerHTML&&e.dompurify&&(n.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)n.style[r]=e.style[r];return n},o=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),r=t.convert(Promise.resolve(),n);return(r=r.setProgress(1,t,1,[t])).set(e)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(t,e){return t.__proto__=e||o.prototype,t},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(r(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(n).then((function(e){return this.set({src:i("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,n){for(var r=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(t(i,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(r.value=e.value),r.addEventListener("load",(function(){r.scrollTop=e.scrollTop,r.scrollLeft=e.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=n,n)for(var o=0;o<n.length;++o){var a=n[o],s=a.src.find((function(t){return"truetype"===t.format}));s&&e.addFont(s.url,a.ref.name,a.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,e.context2d.save(!0),t(this.prop.container,i)})).then((function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},o.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},o.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},o.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(t){if("object"!==r(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in o.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},o.prototype.get=function(t,e){return this.then((function(){var n=t in o.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},o.prototype.setMargin=function(t){return this.then((function(){switch(r(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},o.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||Fe.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},o.prototype.setProgress=function(t,e,n,r){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(t,e,n,r){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},o.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},o.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),i=n.call(r,t,e);return o.convert(i,this.__proto__)},o.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},o.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},o.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return o.convert(e,this)},o.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},o.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Fe.getPageSize=function(t,e,n){if("object"===vt(t)){var r=t;t=r.orientation,e=r.unit||e,n=r.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var i,o=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+e}var s,u=0,l=0;if(a.hasOwnProperty(o))u=a[o][1]/i,l=a[o][0]/i;else try{u=n[1],l=n[0]}catch(t){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t)t="p",l>u&&(s=l,l=u,u=s);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",u>l&&(s=l,l=u,u=s)}return{width:l,height:u,unit:e,k:i,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(Ln):null;var n=new o(e);return e.worker?n:n.from(t).doCallback()}}(Fe.API),Fe.API.addJS=function(t){return Vn=t,this.internal.events.subscribe("postPutResources",(function(){Qn=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qn+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Gn=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Vn+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Qn&&void 0!==Gn&&this.internal.out("/Names <</JavaScript "+Qn+" 0 R>>")})),this},function(t){var e;t.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),i=0;i<r.length;i++){var o=r[i],a=n.exec(o);if(null!=a){var s=a[1];t.internal.newObjectDeferredBegin(s,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,l=[];for(i=0;i<u;i++){var c=t.internal.newObject();l.push(c);var h=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var d=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<l.length;i++)t.internal.write("(page_"+(i+1)+")"+l[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+d+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var r={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<e.children.length;r++){var i=e.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(e)),r>0&&this.line("/Prev "+this.makeRef(e.children[r-1])),r<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var a=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<e.children.length;s++)this.renderItems(e.children[s])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(Fe.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,n,r,i,o,a){var s,u=this.decode.DCT_DECODE,l=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(s=function(t){for(var n,r=256*t.charCodeAt(4)+t.charCodeAt(5),i=t.length,o={width:0,height:0,numcomponents:1},a=4;a<i;a+=2){if(a+=r,-1!==e.indexOf(t.charCodeAt(a+1))){n=256*t.charCodeAt(a+5)+t.charCodeAt(a+6),o={width:256*t.charCodeAt(a+7)+t.charCodeAt(a+8),height:n,numcomponents:t.charCodeAt(a+9)};break}r=256*t.charCodeAt(a+2)+t.charCodeAt(a+3)}return o}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}l={data:t,width:s.width,height:s.height,colorSpace:a,bitsPerComponent:8,filter:u,index:n,alias:r}}return l}}(Fe.API);var Yn,Xn,qn,Kn,Zn,Jn=function(){var t,e,n;function r(t){var e,n,r,i,o,a,s,u,l,c,h,d,A,f;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(e=this.readUInt32(),l=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*o/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,e-=4),t=(null!=a?a.data:void 0)||this.imgData,d=0;0<=e?d<e:d>e;0<=e?++d:--d)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((c=r-this.transparency.indexed.length)>0)for(A=0;0<=c?A<c:A>c;0<=c?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":s=(h=this.read(e)).indexOf(0),u=String.fromCharCode.apply(String,h.slice(0,s)),this.text[u]=String.fromCharCode.apply(String,h.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),r=0,i=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function o(o,a,s,u){var l,c,h,d,A,f,p,g,v,m,y,b,w,x,_,T,E,S,M,C,I,N=Math.ceil((i.width-o)/s),B=Math.ceil((i.height-a)/u),k=i.width==N&&i.height==B;for(x=e*N,b=k?n:new Uint8Array(x*B),f=t.length,w=0,c=0;w<B&&r<f;){switch(t[r++]){case 0:for(d=E=0;E<x;d=E+=1)b[c++]=t[r++];break;case 1:for(d=S=0;S<x;d=S+=1)l=t[r++],A=d<e?0:b[c-e],b[c++]=(l+A)%256;break;case 2:for(d=M=0;M<x;d=M+=1)l=t[r++],h=(d-d%e)/e,_=w&&b[(w-1)*x+h*e+d%e],b[c++]=(_+l)%256;break;case 3:for(d=C=0;C<x;d=C+=1)l=t[r++],h=(d-d%e)/e,A=d<e?0:b[c-e],_=w&&b[(w-1)*x+h*e+d%e],b[c++]=(l+Math.floor((A+_)/2))%256;break;case 4:for(d=I=0;I<x;d=I+=1)l=t[r++],h=(d-d%e)/e,A=d<e?0:b[c-e],0===w?_=T=0:(_=b[(w-1)*x+h*e+d%e],T=h&&b[(w-1)*x+(h-1)*e+d%e]),p=A+_-T,g=Math.abs(p-A),m=Math.abs(p-_),y=Math.abs(p-T),v=g<=m&&g<=y?A:m<=y?_:T,b[c++]=(l+v)%256;break;default:throw new Error("Invalid filter algorithm: "+t[r-1])}if(!k){var P=((a+w*u)*i.width+o)*e,D=w*x;for(d=0;d<N;d+=1){for(var L=0;L<e;L+=1)n[P++]=b[D++];P+=(s-1)*e}}w++}}return t=ie(t),1==i.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},r.prototype.decodePalette=function(){var t,e,n,r,i,o,a,s,u;for(n=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+n.length),r=0,t=0,e=a=0,s=n.length;a<s;e=a+=3)i[r++]=n[e],i[r++]=n[e+1],i[r++]=n[e+2],i[r++]=null!=(u=o[t++])?u:255;return i},r.prototype.copyToImageData=function(t,e){var n,r,i,o,a,s,u,l,c,h,d;if(r=this.colors,c=null,n=this.hasAlphaChannel,this.palette.length&&(c=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),r=4,n=!0),l=(i=t.data||t).length,a=c||e,o=s=0,1===r)for(;o<l;)u=c?4*e[o/4]:s,h=a[u++],i[o++]=h,i[o++]=h,i[o++]=h,i[o++]=n?a[u++]:255,s=u;else for(;o<l;)u=c?4*e[o/4]:s,i[o++]=a[u++],i[o++]=a[u++],i[o++]=a[u++],i[o++]=n?a[u++]:255,s=u},r.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var i=function(){if("[object Window]"===Object.prototype.toString.call(oe)){try{e=oe.document.createElement("canvas"),n=e.getContext("2d")}catch(t){return!1}return!0}return!1};return i(),t=function(t){var r;if(!0===i())return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(r=new Image).src=e.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(e){var n,r,i,o,a,s,u,l;if(this.animation){for(l=[],r=a=0,s=(u=this.animation.frames).length;a<s;r=++a)n=u[r],i=e.createImageData(n.width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,o),n.imageData=i,l.push(n.image=t(i));return l}},r.prototype.renderFrame=function(t,e){var n,r,i;return n=(r=this.animation.frames)[e],i=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?t.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&t.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(t){var e,n,r,i,o,a,s=this;return n=0,a=this.animation,i=a.numFrames,r=a.frames,o=a.numPlays,(e=function(){var a,u;if(a=n++%i,u=r[a],s.renderFrame(t,a),i>1&&n/i<o)return s.animation._timeout=setTimeout(e,u.delay)})()},r.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},r.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},r}();
/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
/**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function $n(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,a=1<<1+(7&i);t[e++],t[e++];var s=null,u=null;o&&(s=e,u=a,e+=3*a);var l=!0,c=[],h=0,d=null,A=0,f=null;for(this.width=n,this.height=r;l&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,f=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(0===M)break;e+=M}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var p=t[e++];h=t[e++]|t[e++]<<8,d=t[e++],0==(1&p)&&(d=null),A=p>>2&7,e++;break;case 254:for(;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(0===M)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++],w=b>>6&1,x=1<<1+(7&b),_=s,T=u,E=!1;b>>7&&(E=!0,_=e,T=x,e+=3*x);var S=e;for(e++;;){var M;if(!((M=t[e++])>=0))throw Error("Invalid block size");if(0===M)break;e+=M}c.push({x:g,y:v,width:m,height:y,has_local_palette:E,palette_offset:_,palette_size:T,data_offset:S,data_length:e-S,transparent_index:d,interlaced:!!w,delay:h,disposal:A});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return f},this.frameInfo=function(t){if(t<0||t>=c.length)throw new Error("Frame index out of range.");return c[t]},this.decodeAndBlitFrameBGRA=function(e,r){var i=this.frameInfo(e),o=i.width*i.height,a=new Uint8Array(o);tr(t,i.data_offset,a,o);var s=i.palette_offset,u=i.transparent_index;null===u&&(u=256);var l=i.width,c=n-l,h=l,d=4*(i.y*n+i.x),A=4*((i.y+i.height)*n+i.x),f=d,p=4*c;!0===i.interlaced&&(p+=4*n*7);for(var g=8,v=0,m=a.length;v<m;++v){var y=a[v];if(0===h&&(h=l,(f+=p)>=A&&(p=4*c+4*n*(g-1),f=d+(l+c)*(g<<1),g>>=1)),y===u)f+=4;else{var b=t[s+3*y],w=t[s+3*y+1],x=t[s+3*y+2];r[f++]=x,r[f++]=w,r[f++]=b,r[f++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,r){var i=this.frameInfo(e),o=i.width*i.height,a=new Uint8Array(o);tr(t,i.data_offset,a,o);var s=i.palette_offset,u=i.transparent_index;null===u&&(u=256);var l=i.width,c=n-l,h=l,d=4*(i.y*n+i.x),A=4*((i.y+i.height)*n+i.x),f=d,p=4*c;!0===i.interlaced&&(p+=4*n*7);for(var g=8,v=0,m=a.length;v<m;++v){var y=a[v];if(0===h&&(h=l,(f+=p)>=A&&(p=4*c+4*n*(g-1),f=d+(l+c)*(g<<1),g>>=1)),y===u)f+=4;else{var b=t[s+3*y],w=t[s+3*y+1],x=t[s+3*y+2];r[f++]=b,r[f++]=w,r[f++]=x,r[f++]=255}--h}}}function tr(t,e,n,r){for(var i=t[e++],o=1<<i,a=o+1,s=a+1,u=i+1,l=(1<<u)-1,c=0,h=0,d=0,A=t[e++],f=new Int32Array(4096),p=null;;){for(;c<16&&0!==A;)h|=t[e++]<<c,c+=8,1===A?A=t[e++]:--A;if(c<u)break;var g=h&l;if(h>>=u,c-=u,g!==o){if(g===a)break;for(var v=g<s?g:p,m=0,y=v;y>o;)y=f[y]>>8,++m;var b=y;if(d+m+(v!==g?1:0)>r)return void se.log("Warning, gif stream longer than expected.");n[d++]=b;var w=d+=m;for(v!==g&&(n[d++]=b),y=v;m--;)y=f[y],n[--w]=255&y,y>>=8;null!==p&&s<4096&&(f[s++]=p<<8|b,s>=l+1&&u<12&&(++u,l=l<<1|1)),p=g}else s=a+1,l=(1<<(u=i+1))-1,p=null}return d!==r&&se.log("Warning, gif stream shorter than expected."),n
/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/}function er(t){var e,n,r,i,o,a=Math.floor,s=new Array(64),u=new Array(64),l=new Array(64),c=new Array(64),h=new Array(65535),d=new Array(65535),A=new Array(64),f=new Array(64),p=[],g=0,v=7,m=new Array(64),y=new Array(64),b=new Array(64),w=new Array(256),x=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function k(t,e){for(var n=0,r=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=t[o];a++)i[e[r]]=[],i[e[r]][0]=n,i[e[r]][1]=o,r++,n++;n*=2}return i}function P(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(D(255),D(0)):D(g),v=7,g=0)}function D(t){p.push(t)}function L(t){D(t>>8&255),D(255&t)}function O(t,e,n,r,i){for(var o,a=i[0],s=i[240],u=function(t,e){var n,r,i,o,a,s,u,l,c,h,d=0;for(c=0;c<8;++c){n=t[d],r=t[d+1],i=t[d+2],o=t[d+3],a=t[d+4],s=t[d+5],u=t[d+6];var f=n+(l=t[d+7]),p=n-l,g=r+u,v=r-u,m=i+s,y=i-s,b=o+a,w=o-a,x=f+b,_=f-b,T=g+m,E=g-m;t[d]=x+T,t[d+4]=x-T;var S=.707106781*(E+_);t[d+2]=_+S,t[d+6]=_-S;var M=.382683433*((x=w+y)-(E=v+p)),C=.5411961*x+M,I=1.306562965*E+M,N=.707106781*(T=y+v),B=p+N,k=p-N;t[d+5]=k+C,t[d+3]=k-C,t[d+1]=B+I,t[d+7]=B-I,d+=8}for(d=0,c=0;c<8;++c){n=t[d],r=t[d+8],i=t[d+16],o=t[d+24],a=t[d+32],s=t[d+40],u=t[d+48];var P=n+(l=t[d+56]),D=n-l,L=r+u,O=r-u,R=i+s,F=i-s,U=o+a,j=o-a,z=P+U,H=P-U,Q=L+R,G=L-R;t[d]=z+Q,t[d+32]=z-Q;var V=.707106781*(G+H);t[d+16]=H+V,t[d+48]=H-V;var W=.382683433*((z=j+F)-(G=O+D)),Y=.5411961*z+W,X=1.306562965*G+W,q=.707106781*(Q=F+O),K=D+q,Z=D-q;t[d+40]=Z+Y,t[d+24]=Z-Y,t[d+8]=K+X,t[d+56]=K-X,d++}for(c=0;c<64;++c)h=t[c]*e[c],A[c]=h>0?h+.5|0:h-.5|0;return A}(t,e),l=0;l<64;++l)f[_[l]]=u[l];var c=f[0]-n;n=f[0],0==c?P(r[0]):(P(r[d[o=32767+c]]),P(h[o]));for(var p=63;p>0&&0==f[p];)p--;if(0==p)return P(a),n;for(var g,v=1;v<=p;){for(var m=v;0==f[v]&&v<=p;)++v;var y=v-m;if(y>=16){g=y>>4;for(var b=1;b<=g;++b)P(s);y&=15}o=32767+f[v],P(i[(y<<4)+d[o]]),P(h[o]),v++}return 63!=p&&P(a),n}function R(t){t=Math.min(Math.max(t,1),100),o!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((e[n]*t+50)/100);r=Math.min(Math.max(r,1),255),s[_[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var h=a((i[o]*t+50)/100);h=Math.min(Math.max(h,1),255),u[_[o]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],A=0,f=0;f<8;f++)for(var p=0;p<8;p++)l[A]=1/(s[_[A]]*d[f]*d[p]*8),c[A]=1/(u[_[A]]*d[f]*d[p]*8),A++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),o=t)}this.encode=function(t,o){var a,h;o&&R(o),p=new Array,g=0,v=7,L(65496),L(65504),L(16),D(74),D(70),D(73),D(70),D(0),D(1),D(1),D(0),L(1),L(1),D(0),D(0),function(){L(65499),L(132),D(0);for(var t=0;t<64;t++)D(s[t]);D(1);for(var e=0;e<64;e++)D(u[e])}(),a=t.width,h=t.height,L(65472),L(17),D(8),L(h),L(a),D(3),D(1),D(17),D(0),D(2),D(17),D(1),D(3),D(17),D(1),function(){L(65476),L(418),D(0);for(var t=0;t<16;t++)D(T[t+1]);for(var e=0;e<=11;e++)D(E[e]);D(16);for(var n=0;n<16;n++)D(S[n+1]);for(var r=0;r<=161;r++)D(M[r]);D(1);for(var i=0;i<16;i++)D(C[i+1]);for(var o=0;o<=11;o++)D(I[o]);D(17);for(var a=0;a<16;a++)D(N[a+1]);for(var s=0;s<=161;s++)D(B[s])}(),L(65498),L(12),D(3),D(1),D(0),D(2),D(17),D(3),D(17),D(0),D(63),D(0);var d=0,A=0,f=0;g=0,v=7,this.encode.displayName="_encode_";for(var w,_,k,F,U,j,z,H,Q,G=t.data,V=t.width,W=t.height,Y=4*V,X=0;X<W;){for(w=0;w<Y;){for(U=Y*X+w,z=-1,H=0,Q=0;Q<64;Q++)j=U+(H=Q>>3)*Y+(z=4*(7&Q)),X+H>=W&&(j-=Y*(X+1+H-W)),w+z>=Y&&(j-=w+z-Y+4),_=G[j++],k=G[j++],F=G[j++],m[Q]=(x[_]+x[k+256>>0]+x[F+512>>0]>>16)-128,y[Q]=(x[_+768>>0]+x[k+1024>>0]+x[F+1280>>0]>>16)-128,b[Q]=(x[_+1280>>0]+x[k+1536>>0]+x[F+1792>>0]>>16)-128;d=O(m,l,d,e,r),A=O(y,c,A,n,i),f=O(b,c,f,n,i),w+=32}X+=8}if(v>=0){var q=[];q[1]=v+1,q[0]=(1<<v+1)-1,P(q)}return L(65497),new Uint8Array(p)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)w[e]=t(e)}(),e=k(T,E),n=k(C,I),r=k(S,M),i=k(N,B),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var r=t;r<e;r++)d[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(e-1);i<=-t;i++)d[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=e-1+i;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)x[t]=19595*t,x[t+256>>0]=38470*t,x[t+512>>0]=7471*t+32768,x[t+768>>0]=-11059*t,x[t+1024>>0]=-21709*t,x[t+1280>>0]=32768*t+8421375,x[t+1536>>0]=-27439*t,x[t+1792>>0]=-5329*t}(),R(t)}
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function nr(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function rr(t){function e(t){if(!t)throw Error("assert :P")}function n(t,e,n){for(var r=0;4>r;r++)if(t[e+r]!=n.charCodeAt(r))return!0;return!1}function r(t,e,n,r,i){for(var o=0;o<i;o++)t[e+o]=n[r+o]}function i(t,e,n,r){for(var i=0;i<r;i++)t[e+i]=n}function o(t){return new Int32Array(t)}function a(t,e){for(var n=[],r=0;r<t;r++)n.push(new e);return n}function s(t,e){var n=[];return function t(n,r,i){for(var o=i[r],a=0;a<o&&(n.push(i.length>r+1?[]:new e),!(i.length<r+1));a++)t(n[a],r+1,i)}(n,0,t),n}var u=function(){var t=this;function u(t,e){for(var n=1<<e-1>>>0;t&n;)n>>>=1;return n?(t&n-1)+n:t}function l(t,n,r,i,o){e(!(i%r));do{t[n+(i-=r)]=o}while(0<i)}function c(t,n,r,i,a){if(e(2328>=a),512>=a)var s=o(512);else if(null==(s=o(a)))return 0;return function(t,n,r,i,a,s){var c,d,A=n,f=1<<r,p=o(16),g=o(16);for(e(0!=a),e(null!=i),e(null!=t),e(0<r),d=0;d<a;++d){if(15<i[d])return 0;++p[i[d]]}if(p[0]==a)return 0;for(g[1]=0,c=1;15>c;++c){if(p[c]>1<<c)return 0;g[c+1]=g[c]+p[c]}for(d=0;d<a;++d)c=i[d],0<i[d]&&(s[g[c]++]=d);if(1==g[15])return(i=new h).g=0,i.value=s[0],l(t,A,1,f,i),f;var v,m=-1,y=f-1,b=0,w=1,x=1,_=1<<r;for(d=0,c=1,a=2;c<=r;++c,a<<=1){if(w+=x<<=1,0>(x-=p[c]))return 0;for(;0<p[c];--p[c])(i=new h).g=c,i.value=s[d++],l(t,A+b,a,_,i),b=u(b,c)}for(c=r+1,a=2;15>=c;++c,a<<=1){if(w+=x<<=1,0>(x-=p[c]))return 0;for(;0<p[c];--p[c]){if(i=new h,(b&y)!=m){for(A+=_,v=1<<(m=c)-r;15>m&&!(0>=(v-=p[m]));)++m,v<<=1;f+=_=1<<(v=m-r),t[n+(m=b&y)].g=v+r,t[n+m].value=A-n-m}i.g=c-r,i.value=s[d++],l(t,A+(b>>r),a,_,i),b=u(b,c)}}return w!=2*g[15]-1?0:f}(t,n,r,i,a,s)}function h(){this.value=this.g=0}function d(){this.value=this.g=0}function A(){this.G=a(5,h),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Fn,d)}function f(t,n,r,i){e(null!=t),e(null!=n),e(2147483648>i),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=n,t.pa=r,t.Jd=n,t.Yc=r+i,t.Zc=4<=i?r+i-4+1:r,S(t)}function p(t,e){for(var n=0;0<e--;)n|=C(t,128)<<e;return n}function g(t,e){var n=p(t,e);return M(t)?-n:n}function v(t,n,r,i){var o,a=0;for(e(null!=t),e(null!=n),e(4294967288>i),t.Sb=i,t.Ra=0,t.u=0,t.h=0,4<i&&(i=4),o=0;o<i;++o)a+=n[r+o]<<8*o;t.Ra=a,t.bb=i,t.oa=n,t.pa=r}function m(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<zn-8>>>0,++t.bb,t.u-=8;_(t)&&(t.h=1,t.u=0)}function y(t,n){if(e(0<=n),!t.h&&n<=jn){var r=x(t)&Un[n];return t.u+=n,m(t),r}return t.h=1,t.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(t){return t.Ra>>>(t.u&zn-1)>>>0}function _(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>zn}function T(t,e){t.u=e,t.h=_(t)}function E(t){t.u>=Hn&&(e(t.u>=Hn),m(t))}function S(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function M(t){return p(t,1)}function C(t,e){var n=t.Ca;0>t.b&&S(t);var r=t.b,i=n*e>>>8,o=(t.I>>>r>i)+0;for(o?(n-=i,t.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+Qn[r],t.b-=r,t.Ca=(n<<r)-1,o}function I(t,e,n){t[e+0]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n>>0&255}function N(t,e){return t[e+0]<<0|t[e+1]<<8}function B(t,e){return N(t,e)|t[e+2]<<16}function k(t,e){return N(t,e)|N(t,e+2)<<16}function P(t,n){var r=1<<n;return e(null!=t),e(0<n),t.X=o(r),null==t.X?0:(t.Mb=32-n,t.Xa=n,1)}function D(t,n){e(null!=t),e(null!=n),e(t.Xa==n.Xa),r(n.X,0,t.X,0,1<<n.Xa)}function L(){this.X=[],this.Xa=this.Mb=0}function O(t,n,r,i){e(null!=r),e(null!=i);var o=r[0],a=i[0];return 0==o&&(o=(t*a+n/2)/n),0==a&&(a=(n*o+t/2)/t),0>=o||0>=a?0:(r[0]=o,i[0]=a,1)}function R(t,e){return t+(1<<e)-1>>>e}function F(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function U(e,n){t[n]=function(n,r,i,o,a,s,u){var l;for(l=0;l<a;++l){var c=t[e](s[u+l-1],i,o+l);s[u+l]=F(n[r+l],c)}}}function j(){this.ud=this.hd=this.jd=0}function z(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function H(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function Q(t,e){return H(t+(t-e+.5>>1))}function G(t,e,n){return Math.abs(e-n)-Math.abs(t-n)}function V(t,e,n,r,i,o,a){for(r=o[a-1],n=0;n<i;++n)o[a+n]=r=F(t[e+n],r)}function W(t,e,n,r,i){var o;for(o=0;o<n;++o){var a=t[e+o],s=a>>8&255,u=16711935&(u=(u=16711935&a)+((s<<16)+s));r[i+o]=(4278255360&a)+u>>>0}}function Y(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function X(t,e,n,r,i,o){var a;for(a=0;a<r;++a){var s=e[n+a],u=s>>>8,l=s,c=255&(c=(c=s>>>16)+((t.jd<<24>>24)*(u<<24>>24)>>>5));l=255&(l=(l+=(t.hd<<24>>24)*(u<<24>>24)>>>5)+((t.ud<<24>>24)*(c<<24>>24)>>>5)),i[o+a]=(4278255360&s)+(c<<16)+l}}function q(e,n,r,i,o){t[n]=function(t,e,n,r,a,s,u,l,c){for(r=u;r<l;++r)for(u=0;u<c;++u)a[s++]=o(n[i(t[e++])])},t[e]=function(e,n,a,s,u,l,c){var h=8>>e.b,d=e.Ea,A=e.K[0],f=e.w;if(8>h)for(e=(1<<e.b)-1,f=(1<<h)-1;n<a;++n){var p,g=0;for(p=0;p<d;++p)p&e||(g=i(s[u++])),l[c++]=o(A[g&f]),g>>=h}else t["VP8LMapColor"+r](s,u,A,f,l,c,n,a,d)}}function K(t,e,n,r,i){for(n=e+n;e<n;){var o=t[e++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=o>>0&255}}function Z(t,e,n,r,i){for(n=e+n;e<n;){var o=t[e++];r[i++]=o>>16&255,r[i++]=o>>8&255,r[i++]=o>>0&255,r[i++]=o>>24&255}}function J(t,e,n,r,i){for(n=e+n;e<n;){var o=(a=t[e++])>>16&240|a>>12&15,a=a>>0&240|a>>28&15;r[i++]=o,r[i++]=a}}function $(t,e,n,r,i){for(n=e+n;e<n;){var o=(a=t[e++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;r[i++]=o,r[i++]=a}}function tt(t,e,n,r,i){for(n=e+n;e<n;){var o=t[e++];r[i++]=o>>0&255,r[i++]=o>>8&255,r[i++]=o>>16&255}}function et(t,e,n,i,o,a){if(0==a)for(n=e+n;e<n;)I(i,((a=t[e++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),o+=32;else r(i,o,t,e,n)}function nt(e,n){t[n][0]=t[e+"0"],t[n][1]=t[e+"1"],t[n][2]=t[e+"2"],t[n][3]=t[e+"3"],t[n][4]=t[e+"4"],t[n][5]=t[e+"5"],t[n][6]=t[e+"6"],t[n][7]=t[e+"7"],t[n][8]=t[e+"8"],t[n][9]=t[e+"9"],t[n][10]=t[e+"10"],t[n][11]=t[e+"11"],t[n][12]=t[e+"12"],t[n][13]=t[e+"13"],t[n][14]=t[e+"0"],t[n][15]=t[e+"0"]}function rt(t){return t==Hr||t==Qr||t==Gr||t==Vr}function it(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function at(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new it,this.f.kb=new ot,this.sd=null}function st(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ut(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function lt(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ct(t,e){var n=t.T,i=e.ba.f.RGBA,o=i.eb,a=i.fb+t.ka*i.A,s=gi[e.ba.S],u=t.y,l=t.O,c=t.f,h=t.N,d=t.ea,A=t.W,f=e.cc,p=e.dc,g=e.Mc,v=e.Nc,m=t.ka,y=t.ka+t.T,b=t.U,w=b+1>>1;for(0==m?s(u,l,null,null,c,h,d,A,c,h,d,A,o,a,null,null,b):(s(e.ec,e.fc,u,l,f,p,g,v,c,h,d,A,o,a-i.A,o,a,b),++n);m+2<y;m+=2)f=c,p=h,g=d,v=A,h+=t.Rc,A+=t.Rc,a+=2*i.A,s(u,(l+=2*t.fa)-t.fa,u,l,f,p,g,v,c,h,d,A,o,a-i.A,o,a,b);return l+=t.fa,t.j+y<t.o?(r(e.ec,e.fc,u,l,b),r(e.cc,e.dc,c,h,w),r(e.Mc,e.Nc,d,A,w),n--):1&y||s(u,l,null,null,c,h,d,A,c,h,d,A,o,a+i.A,null,null,b),n}function ht(t,n,r){var i=t.F,o=[t.J];if(null!=i){var a=t.U,s=n.ba.S,u=s==Ur||s==Gr;n=n.ba.f.RGBA;var l=[0],c=t.ka;l[0]=t.T,t.Kb&&(0==c?--l[0]:(--c,o[0]-=t.width),t.j+t.ka+t.T==t.o&&(l[0]=t.o-t.j-c));var h=n.eb;c=n.fb+c*n.A,t=Tr(i,o[0],t.width,a,l,h,c+(u?0:3),n.A),e(r==l),t&&rt(s)&&xr(h,c,u,a,l,n.A)}return 0}function dt(t){var e=t.ma,n=e.ba.S,r=11>n,i=n==Or||n==Fr||n==Ur||n==jr||12==n||rt(n);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!Ln(e.Oa,t,i?11:12))return 0;if(i&&rt(n)&&vn(),t.da)alert("todo:use_scaling");else{if(r){if(e.Ib=lt,t.Kb){if(n=t.U+1>>1,e.memory=o(t.U+2*n),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+n,e.Ib=ct,vn()}}else alert("todo:EmitYUV");i&&(e.Jb=ht,r&&pn())}if(r&&!Ni){for(t=0;256>t;++t)Bi[t]=89858*(t-128)+Ei>>Ti,Di[t]=-22014*(t-128)+Ei,Pi[t]=-45773*(t-128),ki[t]=113618*(t-128)+Ei>>Ti;for(t=Si;t<Mi;++t)e=76283*(t-16)+Ei>>Ti,Li[t-Si]=In(e,255),Oi[t-Si]=In(e+8>>4,15);Ni=1}return 1}function At(t){var n=t.ma,r=t.U,i=t.T;return e(!(1&t.ka)),0>=r||0>=i?0:(r=n.Ib(t,n),null!=n.Jb&&n.Jb(t,n,r),n.Dc+=r,1)}function ft(t){t.ma.memory=null}function pt(t,e,n,r){return 47!=y(t,8)?0:(e[0]=y(t,14)+1,n[0]=y(t,14)+1,r[0]=y(t,1),0!=y(t,3)?0:!t.h)}function gt(t,e){if(4>t)return t+1;var n=t-2>>1;return(2+(1&t)<<n)+y(e,n)+1}function vt(t,e){return 120<e?e-120:1<=(n=((n=Zr[e-1])>>4)*t+(8-(15&n)))?n:1;var n}function mt(t,e,n){var r=x(n),i=t[e+=255&r].g-8;return 0<i&&(T(n,n.u+8),r=x(n),e+=t[e].value,e+=r&(1<<i)-1),T(n,n.u+t[e].g),t[e].value}function yt(t,n,r){return r.g+=t.g,r.value+=t.value<<n>>>0,e(8>=r.g),t.g}function bt(t,n,r){var i=t.xc;return e((n=0==i?0:t.vc[t.md*(r>>i)+(n>>i)])<t.Wb),t.Ya[n]}function wt(t,n,i,o){var a=t.ab,s=t.c*n,u=t.C;n=u+n;var l=i,c=o;for(o=t.Ta,i=t.Ua;0<a--;){var h=t.gc[a],d=u,A=n,f=l,p=c,g=(c=o,l=i,h.Ea);switch(e(d<A),e(A<=h.nc),h.hc){case 2:Wn(f,p,(A-d)*g,c,l);break;case 0:var v=d,m=A,y=c,b=l,w=(S=h).Ea;0==v&&(Gn(f,p,null,null,1,y,b),V(f,p+1,0,0,w-1,y,b+1),p+=w,b+=w,++v);for(var x=1<<S.b,_=x-1,T=R(w,S.b),E=S.K,S=S.w+(v>>S.b)*T;v<m;){var M=E,C=S,I=1;for(Vn(f,p,y,b-w,1,y,b);I<w;){var N=(I&~_)+x;N>w&&(N=w),(0,Zn[M[C++]>>8&15])(f,p+ +I,y,b+I-w,N-I,y,b+I),I=N}p+=w,b+=w,++v&_||(S+=T)}A!=h.nc&&r(c,l-g,c,l+(A-d-1)*g,g);break;case 1:for(g=f,m=p,w=(f=h.Ea)-(b=f&~(y=(p=1<<h.b)-1)),v=R(f,h.b),x=h.K,h=h.w+(d>>h.b)*v;d<A;){for(_=x,T=h,E=new j,S=m+b,M=m+f;m<S;)Y(_[T++],E),Jn(E,g,m,p,c,l),m+=p,l+=p;m<M&&(Y(_[T++],E),Jn(E,g,m,w,c,l),m+=w,l+=w),++d&y||(h+=v)}break;case 3:if(f==c&&p==l&&0<h.b){for(m=c,f=g=l+(A-d)*g-(b=(A-d)*R(h.Ea,h.b)),p=c,y=l,v=[],b=(w=b)-1;0<=b;--b)v[b]=p[y+b];for(b=w-1;0<=b;--b)m[f+b]=v[b];Yn(h,d,A,c,g,c,l)}else Yn(h,d,A,f,p,c,l)}l=o,c=i}c!=i&&r(o,i,l,c,s)}function xt(t,n){var r=t.V,i=t.Ba+t.c*t.C,o=n-t.C;if(e(n<=t.l.o),e(16>=o),0<o){var a=t.l,s=t.Ta,u=t.Ua,l=a.width;if(wt(t,o,r,i),o=u=[u],e((r=t.C)<(i=n)),e(a.v<a.va),i>a.o&&(i=a.o),r<a.j){var c=a.j-r;r=a.j,o[0]+=c*l}if(r>=i?r=0:(o[0]+=4*a.v,a.ka=r-a.j,a.U=a.va-a.v,a.T=i-r,r=1),r){if(u=u[0],11>(r=t.ca).S){var h=r.f.RGBA,d=(i=r.S,o=a.U,a=a.T,c=h.eb,h.A),A=a;for(h=h.fb+t.Ma*h.A;0<A--;){var f=s,p=u,g=o,v=c,m=h;switch(i){case Lr:$n(f,p,g,v,m);break;case Or:tr(f,p,g,v,m);break;case Hr:tr(f,p,g,v,m),xr(v,m,0,g,1,0);break;case Rr:rr(f,p,g,v,m);break;case Fr:et(f,p,g,v,m,1);break;case Qr:et(f,p,g,v,m,1),xr(v,m,0,g,1,0);break;case Ur:et(f,p,g,v,m,0);break;case Gr:et(f,p,g,v,m,0),xr(v,m,1,g,1,0);break;case jr:er(f,p,g,v,m);break;case Vr:er(f,p,g,v,m),_r(v,m,g,1,0);break;case zr:nr(f,p,g,v,m);break;default:e(0)}u+=l,h+=d}t.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=r.height)}}t.C=n,e(t.C<=t.i)}function _t(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var n=t.Ya[e].G,r=t.Ya[e].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function Tt(t,n,r,i,o,a){if(0!=t.Z){var s=t.qd,u=t.rd;for(e(null!=pi[t.Z]);n<r;++n)pi[t.Z](s,u,i,o,i,o,a),s=i,u=o,o+=a;t.qd=s,t.rd=u}}function Et(t,n){var r=t.l.ma,i=0==r.Z||1==r.Z?t.l.j:t.C;if(i=t.C<i?i:t.C,e(n<=t.l.o),n>i){var o=t.l.width,a=r.ca,s=r.tb+o*i,u=t.V,l=t.Ba+t.c*i,c=t.gc;e(1==t.ab),e(3==c[0].hc),qn(c[0],i,n,u,l,a,s),Tt(r,i,n,a,s,o)}t.C=t.Ma=n}function St(t,n,r,i,o,a,s){var u=t.$/i,l=t.$%i,c=t.m,h=t.s,d=r+t.$,A=d;o=r+i*o;var f=r+i*a,p=280+h.ua,g=t.Pb?u:16777216,v=0<h.ua?h.Wa:null,m=h.wc,y=d<f?bt(h,l,u):null;e(t.C<a),e(f<=o);var b=!1;t:for(;;){for(;b||d<f;){var w=0;if(u>=g){var S=d-r;e((g=t).Pb),g.wd=g.m,g.xd=S,0<g.s.ua&&D(g.s.Wa,g.s.vb),g=u+$r}if(l&m||(y=bt(h,l,u)),e(null!=y),y.Qb&&(n[d]=y.qb,b=!0),!b)if(E(c),y.jc){w=c,S=n;var M=d,C=y.pd[x(w)&Fn-1];e(y.jc),256>C.g?(T(w,w.u+C.g),S[M]=C.value,w=0):(T(w,w.u+C.g-256),e(256<=C.value),w=C.value),0==w&&(b=!0)}else w=mt(y.G[0],y.H[0],c);if(c.h)break;if(b||256>w){if(!b)if(y.nd)n[d]=(y.qb|w<<8)>>>0;else{if(E(c),b=mt(y.G[1],y.H[1],c),E(c),S=mt(y.G[2],y.H[2],c),M=mt(y.G[3],y.H[3],c),c.h)break;n[d]=(M<<24|b<<16|w<<8|S)>>>0}if(b=!1,++d,++l>=i&&(l=0,++u,null!=s&&u<=a&&!(u%16)&&s(t,u),null!=v))for(;A<d;)w=n[A++],v.X[(506832829*w&4294967295)>>>v.Mb]=w}else if(280>w){if(w=gt(w-256,c),S=mt(y.G[4],y.H[4],c),E(c),S=vt(i,S=gt(S,c)),c.h)break;if(d-r<S||o-d<w)break t;for(M=0;M<w;++M)n[d+M]=n[d+M-S];for(d+=w,l+=w;l>=i;)l-=i,++u,null!=s&&u<=a&&!(u%16)&&s(t,u);if(e(d<=o),l&m&&(y=bt(h,l,u)),null!=v)for(;A<d;)w=n[A++],v.X[(506832829*w&4294967295)>>>v.Mb]=w}else{if(!(w<p))break t;for(b=w-280,e(null!=v);A<d;)w=n[A++],v.X[(506832829*w&4294967295)>>>v.Mb]=w;w=d,e(!(b>>>(S=v).Xa)),n[w]=S.X[b],b=!0}b||e(c.h==_(c))}if(t.Pb&&c.h&&d<o)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&D(t.s.vb,t.s.Wa);else{if(c.h)break t;null!=s&&s(t,u>a?a:u),t.a=0,t.$=d-r}return 1}return t.a=3,0}function Mt(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var n=t.Wa;null!=n&&(n.X=null),t.vb=null,e(null!=t)}function Ct(){var e=new on;return null==e?null:(e.a=0,e.xb=fi,nt("Predictor","VP8LPredictors"),nt("Predictor","VP8LPredictors_C"),nt("PredictorAdd","VP8LPredictorsAdd"),nt("PredictorAdd","VP8LPredictorsAdd_C"),Wn=W,Jn=X,$n=K,tr=Z,er=J,nr=$,rr=tt,t.VP8LMapColor32b=Xn,t.VP8LMapColor8b=Kn,e)}function It(t,n,r,s,u){var l=1,d=[t],f=[n],p=s.m,g=s.s,v=null,m=0;t:for(;;){if(r)for(;l&&y(p,1);){var b=d,w=f,_=s,S=1,M=_.m,C=_.gc[_.ab],I=y(M,2);if(_.Oc&1<<I)l=0;else{switch(_.Oc|=1<<I,C.hc=I,C.Ea=b[0],C.nc=w[0],C.K=[null],++_.ab,e(4>=_.ab),I){case 0:case 1:C.b=y(M,3)+2,S=It(R(C.Ea,C.b),R(C.nc,C.b),0,_,C.K),C.K=C.K[0];break;case 3:var N,B=y(M,8)+1,k=16<B?0:4<B?1:2<B?2:3;if(b[0]=R(C.Ea,k),C.b=k,N=S=It(B,1,0,_,C.K)){var D,L=B,O=C,U=1<<(8>>O.b),j=o(U);if(null==j)N=0;else{var z=O.K[0],H=O.w;for(j[0]=O.K[0][0],D=1;D<1*L;++D)j[D]=F(z[H+D],j[D-1]);for(;D<4*U;++D)j[D]=0;O.K[0]=null,O.K[0]=j,N=1}}S=N;break;case 2:break;default:e(0)}l=S}}if(d=d[0],f=f[0],l&&y(p,1)&&!(l=1<=(m=y(p,4))&&11>=m)){s.a=3;break t}var Q;if(Q=l)e:{var G,V,W,Y=s,X=d,q=f,K=m,Z=r,J=Y.m,$=Y.s,tt=[null],et=1,nt=0,rt=Jr[K];n:for(;;){if(Z&&y(J,1)){var it=y(J,3)+2,ot=R(X,it),at=R(q,it),st=ot*at;if(!It(ot,at,0,Y,tt))break n;for(tt=tt[0],$.xc=it,G=0;G<st;++G){var ut=tt[G]>>8&65535;tt[G]=ut,ut>=et&&(et=ut+1)}}if(J.h)break n;for(V=0;5>V;++V){var lt=Xr[V];!V&&0<K&&(lt+=1<<K),nt<lt&&(nt=lt)}var ct=a(et*rt,h),ht=et,dt=a(ht,A);if(null==dt)var At=null;else e(65536>=ht),At=dt;var ft=o(nt);if(null==At||null==ft||null==ct){Y.a=1;break n}var pt=ct;for(G=W=0;G<et;++G){var gt=At[G],vt=gt.G,mt=gt.H,bt=0,wt=1,xt=0;for(V=0;5>V;++V){lt=Xr[V],vt[V]=pt,mt[V]=W,!V&&0<K&&(lt+=1<<K);r:{var _t,Tt=lt,Et=Y,Ct=ft,Nt=pt,Bt=W,kt=0,Pt=Et.m,Dt=y(Pt,1);if(i(Ct,0,0,Tt),Dt){var Lt=y(Pt,1)+1,Ot=y(Pt,1),Rt=y(Pt,0==Ot?1:8);Ct[Rt]=1,2==Lt&&(Ct[Rt=y(Pt,8)]=1);var Ft=1}else{var Ut=o(19),jt=y(Pt,4)+4;if(19<jt){Et.a=3;var zt=0;break r}for(_t=0;_t<jt;++_t)Ut[Kr[_t]]=y(Pt,3);var Ht=void 0,Qt=void 0,Gt=Et,Vt=Ut,Wt=Tt,Yt=Ct,Xt=0,qt=Gt.m,Kt=8,Zt=a(128,h);i:for(;c(Zt,0,7,Vt,19);){if(y(qt,1)){var Jt=2+2*y(qt,3);if((Ht=2+y(qt,Jt))>Wt)break i}else Ht=Wt;for(Qt=0;Qt<Wt&&Ht--;){E(qt);var $t=Zt[0+(127&x(qt))];T(qt,qt.u+$t.g);var te=$t.value;if(16>te)Yt[Qt++]=te,0!=te&&(Kt=te);else{var ee=16==te,ne=te-16,re=Yr[ne],ie=y(qt,Wr[ne])+re;if(Qt+ie>Wt)break i;for(var oe=ee?Kt:0;0<ie--;)Yt[Qt++]=oe}}Xt=1;break i}Xt||(Gt.a=3),Ft=Xt}(Ft=Ft&&!Pt.h)&&(kt=c(Nt,Bt,8,Ct,Tt)),Ft&&0!=kt?zt=kt:(Et.a=3,zt=0)}if(0==zt)break n;if(wt&&1==qr[V]&&(wt=0==pt[W].g),bt+=pt[W].g,W+=zt,3>=V){var ae,se=ft[0];for(ae=1;ae<lt;++ae)ft[ae]>se&&(se=ft[ae]);xt+=se}}if(gt.nd=wt,gt.Qb=0,wt&&(gt.qb=(vt[3][mt[3]+0].value<<24|vt[1][mt[1]+0].value<<16|vt[2][mt[2]+0].value)>>>0,0==bt&&256>vt[0][mt[0]+0].value&&(gt.Qb=1,gt.qb+=vt[0][mt[0]+0].value<<8)),gt.jc=!gt.Qb&&6>xt,gt.jc){var ue,le=gt;for(ue=0;ue<Fn;++ue){var ce=ue,he=le.pd[ce],de=le.G[0][le.H[0]+ce];256<=de.value?(he.g=de.g+256,he.value=de.value):(he.g=0,he.value=0,ce>>=yt(de,8,he),ce>>=yt(le.G[1][le.H[1]+ce],16,he),ce>>=yt(le.G[2][le.H[2]+ce],0,he),yt(le.G[3][le.H[3]+ce],24,he))}}}$.vc=tt,$.Wb=et,$.Ya=At,$.yc=ct,Q=1;break e}Q=0}if(!(l=Q)){s.a=3;break t}if(0<m){if(g.ua=1<<m,!P(g.Wa,m)){s.a=1,l=0;break t}}else g.ua=0;var Ae=s,fe=d,pe=f,ge=Ae.s,ve=ge.xc;if(Ae.c=fe,Ae.i=pe,ge.md=R(fe,ve),ge.wc=0==ve?-1:(1<<ve)-1,r){s.xb=Ai;break t}if(null==(v=o(d*f))){s.a=1,l=0;break t}l=(l=St(s,v,0,d,f,f,null))&&!p.h;break t}return l?(null!=u?u[0]=v:(e(null==v),e(r)),s.$=0,r||Mt(g)):Mt(g),l}function Nt(t,n){var r=t.c*t.i,i=r+n+16*n;return e(t.c<=n),t.V=o(i),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+r+n,1)}function Bt(t,n){var r=t.C,i=n-r,o=t.V,a=t.Ba+t.c*r;for(e(n<=t.l.o);0<i;){var s=16<i?16:i,u=t.l.ma,l=t.l.width,c=l*s,h=u.ca,d=u.tb+l*r,A=t.Ta,f=t.Ua;wt(t,s,o,a),Er(A,f,h,d,c),Tt(u,r,r+s,h,d,l),i-=s,o+=s*t.c,r+=s}e(r==n),t.C=t.Ma=n}function kt(){this.ub=this.yd=this.td=this.Rb=0}function Pt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Dt(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Lt(){var t;this.Yb=(function t(e,n,r){for(var i=r[n],o=0;o<i&&(e.push(r.length>n+1?[]:0),!(r.length<n+1));o++)t(e[o],n+1,r)}(t=[],0,[3,11]),t)}function Ot(){this.jb=o(3),this.Wc=s([4,8],Lt),this.Xc=s([4,17],Lt)}function Rt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ft(){this.ld=this.La=this.dd=this.tc=0}function Ut(){this.Na=this.la=0}function jt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zt(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ht(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ft),this.Y=0,this.ya=Array(new zt),this.aa=0,this.l=new Vt}function Qt(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Gt(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new kt,this.Kc=new Pt,this.ed=new Rt,this.Qa=new Dt,this.Ic=this.$c=this.Aa=0,this.D=new Ht,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,b),this.ia=0,this.pb=a(4,jt),this.Pa=new Ot,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qt),this.Hd=0,this.rb=Array(new Ut),this.sb=0,this.wa=Array(new Ft),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zt),this.L=this.aa=0,this.gd=s([4,2],Ft),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wt(){var t=new Gt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ni||(ni=Kt)),t}function Yt(t,e,n){return 0==t.a&&(t.a=e,t.sc=n,t.cb=0),0}function Xt(t,e,n){return 3<=n&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function qt(t,n){if(null==t)return 0;if(t.a=0,t.sc="OK",null==n)return Yt(t,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,o=n.w,a=n.ha;if(4>a)return Yt(t,7,"Truncated header.");var s=r[o+0]|r[o+1]<<8|r[o+2]<<16,u=t.Od;if(u.Rb=!(1&s),u.td=s>>1&7,u.yd=s>>4&1,u.ub=s>>5,3<u.td)return Yt(t,3,"Incorrect keyframe parameters.");if(!u.yd)return Yt(t,4,"Frame not displayable.");o+=3,a-=3;var l=t.Kc;if(u.Rb){if(7>a)return Yt(t,7,"cannot parse picture header");if(!Xt(r,o,a))return Yt(t,3,"Bad code word");l.c=16383&(r[o+4]<<8|r[o+3]),l.Td=r[o+4]>>6,l.i=16383&(r[o+6]<<8|r[o+5]),l.Ud=r[o+6]>>6,o+=7,a-=7,t.za=l.c+15>>4,t.Ub=l.i+15>>4,n.width=l.c,n.height=l.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((s=t.Pa).jb,0,255,s.jb.length),e(null!=(s=t.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,i(s.Zb,0,0,s.Zb.length),i(s.Lb,0,0,s.Lb)}if(u.ub>a)return Yt(t,7,"bad partition length");f(s=t.m,r,o,u.ub),o+=u.ub,a-=u.ub,u.Rb&&(l.Ld=M(s),l.Kd=M(s)),l=t.Qa;var c,h=t.Pa;if(e(null!=s),e(null!=l),l.Cb=M(s),l.Cb){if(l.Bb=M(s),M(s)){for(l.Fb=M(s),c=0;4>c;++c)l.Zb[c]=M(s)?g(s,7):0;for(c=0;4>c;++c)l.Lb[c]=M(s)?g(s,6):0}if(l.Bb)for(c=0;3>c;++c)h.jb[c]=M(s)?p(s,8):255}else l.Bb=0;if(s.Ka)return Yt(t,3,"cannot parse segment header");if((l=t.ed).zd=M(s),l.Tb=p(s,6),l.wb=p(s,3),l.Pc=M(s),l.Pc&&M(s)){for(h=0;4>h;++h)M(s)&&(l.vd[h]=g(s,6));for(h=0;4>h;++h)M(s)&&(l.od[h]=g(s,6))}if(t.L=0==l.Tb?0:l.zd?1:2,s.Ka)return Yt(t,3,"cannot parse filter header");var d=a;if(a=c=o,o=c+d,l=d,t.Xb=(1<<p(t.m,2))-1,d<3*(h=t.Xb))r=7;else{for(c+=3*h,l-=3*h,d=0;d<h;++d){var A=r[a+0]|r[a+1]<<8|r[a+2]<<16;A>l&&(A=l),f(t.Jc[+d],r,c,A),c+=A,l-=A,a+=3}f(t.Jc[+h],r,c,l),r=c<o?0:5}if(0!=r)return Yt(t,r,"cannot parse partitions");for(r=p(c=t.m,7),a=M(c)?g(c,4):0,o=M(c)?g(c,4):0,l=M(c)?g(c,4):0,h=M(c)?g(c,4):0,c=M(c)?g(c,4):0,d=t.Qa,A=0;4>A;++A){if(d.Cb){var v=d.Zb[A];d.Fb||(v+=r)}else{if(0<A){t.pb[A]=t.pb[0];continue}v=r}var m=t.pb[A];m.Sc[0]=ti[In(v+a,127)],m.Sc[1]=ei[In(v+0,127)],m.Eb[0]=2*ti[In(v+o,127)],m.Eb[1]=101581*ei[In(v+l,127)]>>16,8>m.Eb[1]&&(m.Eb[1]=8),m.Qc[0]=ti[In(v+h,117)],m.Qc[1]=ei[In(v+c,127)],m.lc=v+c}if(!u.Rb)return Yt(t,4,"Not a key frame.");for(M(s),u=t.Pa,r=0;4>r;++r){for(a=0;8>a;++a)for(o=0;3>o;++o)for(l=0;11>l;++l)h=C(s,ui[r][a][o][l])?p(s,8):ai[r][a][o][l],u.Wc[r][a].Yb[o][l]=h;for(a=0;17>a;++a)u.Xc[r][a]=u.Wc[r][li[a]]}return t.kc=M(s),t.kc&&(t.Bd=p(s,8)),t.cb=1}function Kt(t,e,n,r,i,o,a){var s=e[i].Yb[n];for(n=0;16>i;++i){if(!C(t,s[n+0]))return i;for(;!C(t,s[n+1]);)if(s=e[++i].Yb[0],n=0,16==i)return 16;var u=e[i+1].Yb;if(C(t,s[n+2])){var l=t,c=0;if(C(l,(d=s)[(h=n)+3]))if(C(l,d[h+6])){for(s=0,h=2*(c=C(l,d[h+8]))+(d=C(l,d[h+9+c])),c=0,d=ri[h];d[s];++s)c+=c+C(l,d[s]);c+=3+(8<<h)}else C(l,d[h+7])?(c=7+2*C(l,165),c+=C(l,145)):c=5+C(l,159);else c=C(l,d[h+4])?3+C(l,d[h+5]):2;s=u[2]}else c=1,s=u[1];u=a+ii[i],0>(l=t).b&&S(l);var h,d=l.b,A=(h=l.Ca>>1)-(l.I>>d)>>31;--l.b,l.Ca+=A,l.Ca|=1,l.I-=(h+1&A)<<d,o[u]=((c^A)-A)*r[(0<i)+0]}return 16}function Zt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,i(t.zc,0,0,t.zc.length),t.ja=0}function Jt(t,e,n,r,i){i=t[e+n+32*r]+(i>>3),t[e+n+32*r]=-256&i?0>i?0:255:i}function $t(t,e,n,r,i,o){Jt(t,e,0,n,r+i),Jt(t,e,1,n,r+o),Jt(t,e,2,n,r-o),Jt(t,e,3,n,r-i)}function te(t){return(20091*t>>16)+t}function ee(t,e,n,r){var i,a=0,s=o(16);for(i=0;4>i;++i){var u=t[e+0]+t[e+8],l=t[e+0]-t[e+8],c=(35468*t[e+4]>>16)-te(t[e+12]),h=te(t[e+4])+(35468*t[e+12]>>16);s[a+0]=u+h,s[a+1]=l+c,s[a+2]=l-c,s[a+3]=u-h,a+=4,e++}for(i=a=0;4>i;++i)u=(t=s[a+0]+4)+s[a+8],l=t-s[a+8],c=(35468*s[a+4]>>16)-te(s[a+12]),Jt(n,r,0,0,u+(h=te(s[a+4])+(35468*s[a+12]>>16))),Jt(n,r,1,0,l+c),Jt(n,r,2,0,l-c),Jt(n,r,3,0,u-h),a++,r+=32}function ne(t,e,n,r){var i=t[e+0]+4,o=35468*t[e+4]>>16,a=te(t[e+4]),s=35468*t[e+1]>>16;$t(n,r,0,i+a,t=te(t[e+1]),s),$t(n,r,1,i+o,t,s),$t(n,r,2,i-o,t,s),$t(n,r,3,i-a,t,s)}function re(t,e,n,r,i){ee(t,e,n,r),i&&ee(t,e+16,n,r+4)}function ie(t,e,n,r){or(t,e+0,n,r,1),or(t,e+32,n,r+128,1)}function oe(t,e,n,r){var i;for(t=t[e+0]+4,i=0;4>i;++i)for(e=0;4>e;++e)Jt(n,r,e,i,t)}function ae(t,e,n,r){t[e+0]&&ur(t,e+0,n,r),t[e+16]&&ur(t,e+16,n,r+4),t[e+32]&&ur(t,e+32,n,r+128),t[e+48]&&ur(t,e+48,n,r+128+4)}function se(t,e,n,r){var i,a=o(16);for(i=0;4>i;++i){var s=t[e+0+i]+t[e+12+i],u=t[e+4+i]+t[e+8+i],l=t[e+4+i]-t[e+8+i],c=t[e+0+i]-t[e+12+i];a[0+i]=s+u,a[8+i]=s-u,a[4+i]=c+l,a[12+i]=c-l}for(i=0;4>i;++i)s=(t=a[0+4*i]+3)+a[3+4*i],u=a[1+4*i]+a[2+4*i],l=a[1+4*i]-a[2+4*i],c=t-a[3+4*i],n[r+0]=s+u>>3,n[r+16]=c+l>>3,n[r+32]=s-u>>3,n[r+48]=c-l>>3,r+=64}function ue(t,e,n){var r,i=e-32,o=Pr,a=255-t[i-1];for(r=0;r<n;++r){var s,u=o,l=a+t[e-1];for(s=0;s<n;++s)t[e+s]=u[l+t[i+s]];e+=32}}function le(t,e){ue(t,e,4)}function ce(t,e){ue(t,e,8)}function he(t,e){ue(t,e,16)}function de(t,e){var n;for(n=0;16>n;++n)r(t,e+32*n,t,e-32,16)}function Ae(t,e){var n;for(n=16;0<n;--n)i(t,e,t[e-1],16),e+=32}function fe(t,e,n){var r;for(r=0;16>r;++r)i(e,n+32*r,t,16)}function pe(t,e){var n,r=16;for(n=0;16>n;++n)r+=t[e-1+32*n]+t[e+n-32];fe(r>>5,t,e)}function ge(t,e){var n,r=8;for(n=0;16>n;++n)r+=t[e-1+32*n];fe(r>>4,t,e)}function ve(t,e){var n,r=8;for(n=0;16>n;++n)r+=t[e+n-32];fe(r>>4,t,e)}function me(t,e){fe(128,t,e)}function ye(t,e,n){return t+2*e+n+2>>2}function be(t,e){var n,i=e-32;for(i=new Uint8Array([ye(t[i-1],t[i+0],t[i+1]),ye(t[i+0],t[i+1],t[i+2]),ye(t[i+1],t[i+2],t[i+3]),ye(t[i+2],t[i+3],t[i+4])]),n=0;4>n;++n)r(t,e+32*n,i,0,i.length)}function we(t,e){var n=t[e-1],r=t[e-1+32],i=t[e-1+64],o=t[e-1+96];I(t,e+0,16843009*ye(t[e-1-32],n,r)),I(t,e+32,16843009*ye(n,r,i)),I(t,e+64,16843009*ye(r,i,o)),I(t,e+96,16843009*ye(i,o,o))}function xe(t,e){var n,r=4;for(n=0;4>n;++n)r+=t[e+n-32]+t[e-1+32*n];for(r>>=3,n=0;4>n;++n)i(t,e+32*n,r,4)}function _e(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1-32],a=t[e+0-32],s=t[e+1-32],u=t[e+2-32],l=t[e+3-32];t[e+0+96]=ye(r,i,t[e-1+96]),t[e+1+96]=t[e+0+64]=ye(n,r,i),t[e+2+96]=t[e+1+64]=t[e+0+32]=ye(o,n,r),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=ye(a,o,n),t[e+3+64]=t[e+2+32]=t[e+1+0]=ye(s,a,o),t[e+3+32]=t[e+2+0]=ye(u,s,a),t[e+3+0]=ye(l,u,s)}function Te(t,e){var n=t[e+1-32],r=t[e+2-32],i=t[e+3-32],o=t[e+4-32],a=t[e+5-32],s=t[e+6-32],u=t[e+7-32];t[e+0+0]=ye(t[e+0-32],n,r),t[e+1+0]=t[e+0+32]=ye(n,r,i),t[e+2+0]=t[e+1+32]=t[e+0+64]=ye(r,i,o),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=ye(i,o,a),t[e+3+32]=t[e+2+64]=t[e+1+96]=ye(o,a,s),t[e+3+64]=t[e+2+96]=ye(a,s,u),t[e+3+96]=ye(s,u,u)}function Ee(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1-32],a=t[e+0-32],s=t[e+1-32],u=t[e+2-32],l=t[e+3-32];t[e+0+0]=t[e+1+64]=o+a+1>>1,t[e+1+0]=t[e+2+64]=a+s+1>>1,t[e+2+0]=t[e+3+64]=s+u+1>>1,t[e+3+0]=u+l+1>>1,t[e+0+96]=ye(i,r,n),t[e+0+64]=ye(r,n,o),t[e+0+32]=t[e+1+96]=ye(n,o,a),t[e+1+32]=t[e+2+96]=ye(o,a,s),t[e+2+32]=t[e+3+96]=ye(a,s,u),t[e+3+32]=ye(s,u,l)}function Se(t,e){var n=t[e+0-32],r=t[e+1-32],i=t[e+2-32],o=t[e+3-32],a=t[e+4-32],s=t[e+5-32],u=t[e+6-32],l=t[e+7-32];t[e+0+0]=n+r+1>>1,t[e+1+0]=t[e+0+64]=r+i+1>>1,t[e+2+0]=t[e+1+64]=i+o+1>>1,t[e+3+0]=t[e+2+64]=o+a+1>>1,t[e+0+32]=ye(n,r,i),t[e+1+32]=t[e+0+96]=ye(r,i,o),t[e+2+32]=t[e+1+96]=ye(i,o,a),t[e+3+32]=t[e+2+96]=ye(o,a,s),t[e+3+64]=ye(a,s,u),t[e+3+96]=ye(s,u,l)}function Me(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1+96];t[e+0+0]=n+r+1>>1,t[e+2+0]=t[e+0+32]=r+i+1>>1,t[e+2+32]=t[e+0+64]=i+o+1>>1,t[e+1+0]=ye(n,r,i),t[e+3+0]=t[e+1+32]=ye(r,i,o),t[e+3+32]=t[e+1+64]=ye(i,o,o),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=o}function Ce(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],o=t[e-1+96],a=t[e-1-32],s=t[e+0-32],u=t[e+1-32],l=t[e+2-32];t[e+0+0]=t[e+2+32]=n+a+1>>1,t[e+0+32]=t[e+2+64]=r+n+1>>1,t[e+0+64]=t[e+2+96]=i+r+1>>1,t[e+0+96]=o+i+1>>1,t[e+3+0]=ye(s,u,l),t[e+2+0]=ye(a,s,u),t[e+1+0]=t[e+3+32]=ye(n,a,s),t[e+1+32]=t[e+3+64]=ye(r,n,a),t[e+1+64]=t[e+3+96]=ye(i,r,n),t[e+1+96]=ye(o,i,r)}function Ie(t,e){var n;for(n=0;8>n;++n)r(t,e+32*n,t,e-32,8)}function Ne(t,e){var n;for(n=0;8>n;++n)i(t,e,t[e-1],8),e+=32}function Be(t,e,n){var r;for(r=0;8>r;++r)i(e,n+32*r,t,8)}function ke(t,e){var n,r=8;for(n=0;8>n;++n)r+=t[e+n-32]+t[e-1+32*n];Be(r>>4,t,e)}function Pe(t,e){var n,r=4;for(n=0;8>n;++n)r+=t[e+n-32];Be(r>>3,t,e)}function De(t,e){var n,r=4;for(n=0;8>n;++n)r+=t[e-1+32*n];Be(r>>3,t,e)}function Le(t,e){Be(128,t,e)}function Oe(t,e,n){var r=t[e-n],i=t[e+0],o=3*(i-r)+Br[1020+t[e-2*n]-t[e+n]],a=kr[112+(o+4>>3)];t[e-n]=Pr[255+r+kr[112+(o+3>>3)]],t[e+0]=Pr[255+i-a]}function Re(t,e,n,r){var i=t[e+0],o=t[e+n];return Dr[255+t[e-2*n]-t[e-n]]>r||Dr[255+o-i]>r}function Fe(t,e,n,r){return 4*Dr[255+t[e-n]-t[e+0]]+Dr[255+t[e-2*n]-t[e+n]]<=r}function Ue(t,e,n,r,i){var o=t[e-3*n],a=t[e-2*n],s=t[e-n],u=t[e+0],l=t[e+n],c=t[e+2*n],h=t[e+3*n];return 4*Dr[255+s-u]+Dr[255+a-l]>r?0:Dr[255+t[e-4*n]-o]<=i&&Dr[255+o-a]<=i&&Dr[255+a-s]<=i&&Dr[255+h-c]<=i&&Dr[255+c-l]<=i&&Dr[255+l-u]<=i}function je(t,e,n,r){var i=2*r+1;for(r=0;16>r;++r)Fe(t,e+r,n,i)&&Oe(t,e+r,n)}function ze(t,e,n,r){var i=2*r+1;for(r=0;16>r;++r)Fe(t,e+r*n,1,i)&&Oe(t,e+r*n,1)}function He(t,e,n,r){var i;for(i=3;0<i;--i)je(t,e+=4*n,n,r)}function Qe(t,e,n,r){var i;for(i=3;0<i;--i)ze(t,e+=4,n,r)}function Ge(t,e,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Ue(t,e,n,o,a))if(Re(t,e,n,s))Oe(t,e,n);else{var u=t,l=e,c=n,h=u[l-2*c],d=u[l-c],A=u[l+0],f=u[l+c],p=u[l+2*c],g=27*(m=Br[1020+3*(A-d)+Br[1020+h-f]])+63>>7,v=18*m+63>>7,m=9*m+63>>7;u[l-3*c]=Pr[255+u[l-3*c]+m],u[l-2*c]=Pr[255+h+v],u[l-c]=Pr[255+d+g],u[l+0]=Pr[255+A-g],u[l+c]=Pr[255+f-v],u[l+2*c]=Pr[255+p-m]}e+=r}}function Ve(t,e,n,r,i,o,a,s){for(o=2*o+1;0<i--;){if(Ue(t,e,n,o,a))if(Re(t,e,n,s))Oe(t,e,n);else{var u=t,l=e,c=n,h=u[l-c],d=u[l+0],A=u[l+c],f=kr[112+(4+(p=3*(d-h))>>3)],p=kr[112+(p+3>>3)],g=f+1>>1;u[l-2*c]=Pr[255+u[l-2*c]+g],u[l-c]=Pr[255+h+p],u[l+0]=Pr[255+d-f],u[l+c]=Pr[255+A-g]}e+=r}}function We(t,e,n,r,i,o){Ge(t,e,n,1,16,r,i,o)}function Ye(t,e,n,r,i,o){Ge(t,e,1,n,16,r,i,o)}function Xe(t,e,n,r,i,o){var a;for(a=3;0<a;--a)Ve(t,e+=4*n,n,1,16,r,i,o)}function qe(t,e,n,r,i,o){var a;for(a=3;0<a;--a)Ve(t,e+=4,1,n,16,r,i,o)}function Ke(t,e,n,r,i,o,a,s){Ge(t,e,i,1,8,o,a,s),Ge(n,r,i,1,8,o,a,s)}function Ze(t,e,n,r,i,o,a,s){Ge(t,e,1,i,8,o,a,s),Ge(n,r,1,i,8,o,a,s)}function Je(t,e,n,r,i,o,a,s){Ve(t,e+4*i,i,1,8,o,a,s),Ve(n,r+4*i,i,1,8,o,a,s)}function $e(t,e,n,r,i,o,a,s){Ve(t,e+4,1,i,8,o,a,s),Ve(n,r+4,1,i,8,o,a,s)}function tn(){this.ba=new at,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ut,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function en(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rn(){this.ua=0,this.Wa=new L,this.vb=new L,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new A,this.yc=new h}function on(){this.xb=this.a=0,this.l=new Vt,this.ca=new at,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rn,this.ab=0,this.gc=a(4,nn),this.Oc=0}function an(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function sn(t,e,n,r,i,o,a){for(t=null==t?0:t[e+0],e=0;e<a;++e)i[o+e]=t+n[r+e]&255,t=i[o+e]}function un(t,e,n,r,i,o,a){var s;if(null==t)sn(null,null,n,r,i,o,a);else for(s=0;s<a;++s)i[o+s]=t[e+s]+n[r+s]&255}function ln(t,e,n,r,i,o,a){if(null==t)sn(null,null,n,r,i,o,a);else{var s,u=t[e+0],l=u,c=u;for(s=0;s<a;++s)l=c+(u=t[e+s])-l,c=n[r+s]+(-256&l?0>l?0:255:l)&255,l=u,i[o+s]=c}}function cn(t,n,i,a){var s=n.width,u=n.o;if(e(null!=t&&null!=n),0>i||0>=a||i+a>u)return null;if(!t.Cc){if(null==t.ga){var l;if(t.ga=new an,(l=null==t.ga)||(l=n.width*n.o,e(0==t.Gb.length),t.Gb=o(l),t.Uc=0,null==t.Gb?l=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,l=1),l=!l),!l){l=t.ga;var c=t.Fa,h=t.P,d=t.qc,A=t.mb,f=t.nb,p=h+1,g=d-1,m=l.l;if(e(null!=c&&null!=A&&null!=n),pi[0]=null,pi[1]=sn,pi[2]=un,pi[3]=ln,l.ca=A,l.tb=f,l.c=n.width,l.i=n.height,e(0<l.c&&0<l.i),1>=d)n=0;else if(l.$a=c[h+0]>>0&3,l.Z=c[h+0]>>2&3,l.Lc=c[h+0]>>4&3,h=c[h+0]>>6&3,0>l.$a||1<l.$a||4<=l.Z||1<l.Lc||h)n=0;else if(m.put=At,m.ac=dt,m.bc=ft,m.ma=l,m.width=n.width,m.height=n.height,m.Da=n.Da,m.v=n.v,m.va=n.va,m.j=n.j,m.o=n.o,l.$a)t:{e(1==l.$a),n=Ct();e:for(;;){if(null==n){n=0;break t}if(e(null!=l),l.mc=n,n.c=l.c,n.i=l.i,n.l=l.l,n.l.ma=l,n.l.width=l.c,n.l.height=l.i,n.a=0,v(n.m,c,p,g),!It(l.c,l.i,1,n,null)||(1==n.ab&&3==n.gc[0].hc&&_t(n.s)?(l.ic=1,c=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(c),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(l.ic=0,n=Nt(n,l.c)),!n))break e;n=1;break t}l.mc=null,n=0}else n=g>=l.c*l.i;l=!n}if(l)return null;1!=t.ga.Lc?t.Ga=0:a=u-i}e(null!=t.ga),e(i+a<=u);t:{if(n=(c=t.ga).c,u=c.l.o,0==c.$a){if(p=t.rc,g=t.Vc,m=t.Fa,h=t.P+1+i*n,d=t.mb,A=t.nb+i*n,e(h<=t.P+t.qc),0!=c.Z)for(e(null!=pi[c.Z]),l=0;l<a;++l)pi[c.Z](p,g,m,h,d,A,n),p=d,g=A,A+=n,h+=n;else for(l=0;l<a;++l)r(d,A,m,h,n),p=d,g=A,A+=n,h+=n;t.rc=p,t.Vc=g}else{if(e(null!=c.mc),n=i+a,e(null!=(l=c.mc)),e(n<=l.i),l.C>=n)n=1;else if(c.ic||pn(),c.ic){c=l.V,p=l.Ba,g=l.c;var y=l.i,b=(m=1,h=l.$/g,d=l.$%g,A=l.m,f=l.s,l.$),w=g*y,x=g*n,T=f.wc,S=b<x?bt(f,d,h):null;e(b<=w),e(n<=y),e(_t(f));e:for(;;){for(;!A.h&&b<x;){if(d&T||(S=bt(f,d,h)),e(null!=S),E(A),256>(y=mt(S.G[0],S.H[0],A)))c[p+b]=y,++b,++d>=g&&(d=0,++h<=n&&!(h%16)&&Et(l,h));else{if(!(280>y)){m=0;break e}y=gt(y-256,A);var M,C=mt(S.G[4],S.H[4],A);if(E(A),!(b>=(C=vt(g,C=gt(C,A)))&&w-b>=y)){m=0;break e}for(M=0;M<y;++M)c[p+b+M]=c[p+b+M-C];for(b+=y,d+=y;d>=g;)d-=g,++h<=n&&!(h%16)&&Et(l,h);b<x&&d&T&&(S=bt(f,d,h))}e(A.h==_(A))}Et(l,h>n?n:h);break e}!m||A.h&&b<w?(m=0,l.a=A.h?5:3):l.$=b,n=m}else n=St(l,l.V,l.Ba,l.c,l.i,n,Bt);if(!n){a=0;break t}}i+a>=u&&(t.Cc=1),a=1}if(!a)return null;if(t.Cc&&(null!=(a=t.ga)&&(a.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+i*s}function hn(t,e,n,r,i,o){for(;0<i--;){var a,s=t,u=e+(n?1:0),l=t,c=e+(n?0:3);for(a=0;a<r;++a){var h=l[c+4*a];255!=h&&(h*=32897,s[u+4*a+0]=s[u+4*a+0]*h>>23,s[u+4*a+1]=s[u+4*a+1]*h>>23,s[u+4*a+2]=s[u+4*a+2]*h>>23)}e+=o}}function dn(t,e,n,r,i){for(;0<r--;){var o;for(o=0;o<n;++o){var a=t[e+2*o+0],s=15&(l=t[e+2*o+1]),u=4369*s,l=(240&l|l>>4)*u>>16;t[e+2*o+0]=(240&a|a>>4)*u>>16&240|(15&a|a<<4)*u>>16>>4&15,t[e+2*o+1]=240&l|s}e+=i}}function An(t,e,n,r,i,o,a,s){var u,l,c=255;for(l=0;l<i;++l){for(u=0;u<r;++u){var h=t[e+u];o[a+4*u]=h,c&=h}e+=n,a+=s}return 255!=c}function fn(t,e,n,r,i){var o;for(o=0;o<i;++o)n[r+o]=t[e+o]>>8}function pn(){xr=hn,_r=dn,Tr=An,Er=fn}function gn(n,r,i){t[n]=function(t,n,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y){var b,w=y-1>>1,x=s[u+0]|l[c+0]<<16,_=h[d+0]|A[f+0]<<16;e(null!=t);var T=3*x+_+131074>>2;for(r(t[n+0],255&T,T>>16,p,g),null!=o&&(T=3*_+x+131074>>2,r(o[a+0],255&T,T>>16,v,m)),b=1;b<=w;++b){var E=s[u+b]|l[c+b]<<16,S=h[d+b]|A[f+b]<<16,M=x+E+_+S+524296,C=M+2*(E+_)>>3;T=C+x>>1,x=(M=M+2*(x+S)>>3)+E>>1,r(t[n+2*b-1],255&T,T>>16,p,g+(2*b-1)*i),r(t[n+2*b-0],255&x,x>>16,p,g+(2*b-0)*i),null!=o&&(T=M+_>>1,x=C+S>>1,r(o[a+2*b-1],255&T,T>>16,v,m+(2*b-1)*i),r(o[a+2*b+0],255&x,x>>16,v,m+(2*b+0)*i)),x=E,_=S}1&y||(T=3*x+_+131074>>2,r(t[n+y-1],255&T,T>>16,p,g+(y-1)*i),null!=o&&(T=3*_+x+131074>>2,r(o[a+y-1],255&T,T>>16,v,m+(y-1)*i)))}}function vn(){gi[Lr]=vi,gi[Or]=yi,gi[Rr]=mi,gi[Fr]=bi,gi[Ur]=wi,gi[jr]=xi,gi[zr]=_i,gi[Hr]=yi,gi[Qr]=bi,gi[Gr]=wi,gi[Vr]=xi}function mn(t){return t&~Ii?0>t?0:255:t>>Ci}function yn(t,e){return mn((19077*t>>8)+(26149*e>>8)-14234)}function bn(t,e,n){return mn((19077*t>>8)-(6419*e>>8)-(13320*n>>8)+8708)}function wn(t,e){return mn((19077*t>>8)+(33050*e>>8)-17685)}function xn(t,e,n,r,i){r[i+0]=yn(t,n),r[i+1]=bn(t,e,n),r[i+2]=wn(t,e)}function _n(t,e,n,r,i){r[i+0]=wn(t,e),r[i+1]=bn(t,e,n),r[i+2]=yn(t,n)}function Tn(t,e,n,r,i){var o=bn(t,e,n);e=o<<3&224|wn(t,e)>>3,r[i+0]=248&yn(t,n)|o>>5,r[i+1]=e}function En(t,e,n,r,i){var o=240&wn(t,e)|15;r[i+0]=240&yn(t,n)|bn(t,e,n)>>4,r[i+1]=o}function Sn(t,e,n,r,i){r[i+0]=255,xn(t,e,n,r,i+1)}function Mn(t,e,n,r,i){_n(t,e,n,r,i),r[i+3]=255}function Cn(t,e,n,r,i){xn(t,e,n,r,i),r[i+3]=255}function In(t,e){return 0>t?0:t>e?e:t}function Nn(e,n,r){t[e]=function(t,e,i,o,a,s,u,l,c){for(var h=l+(-2&c)*r;l!=h;)n(t[e+0],i[o+0],a[s+0],u,l),n(t[e+1],i[o+0],a[s+0],u,l+r),e+=2,++o,++s,l+=2*r;1&c&&n(t[e+0],i[o+0],a[s+0],u,l)}}function Bn(t,e,n){return 0==n?0==t?0==e?6:5:0==e?4:0:n}function kn(t,e,n,r,i){switch(t>>>30){case 3:or(e,n,r,i,0);break;case 2:ar(e,n,r,i);break;case 1:ur(e,n,r,i)}}function Pn(t,e){var n,o,a=e.M,s=e.Nb,u=t.oc,l=t.pc+40,c=t.oc,h=t.pc+584,d=t.oc,A=t.pc+600;for(n=0;16>n;++n)u[l+32*n-1]=129;for(n=0;8>n;++n)c[h+32*n-1]=129,d[A+32*n-1]=129;for(0<a?u[l-1-32]=c[h-1-32]=d[A-1-32]=129:(i(u,l-32-1,127,21),i(c,h-32-1,127,9),i(d,A-32-1,127,9)),o=0;o<t.za;++o){var f=e.ya[e.aa+o];if(0<o){for(n=-1;16>n;++n)r(u,l+32*n-4,u,l+32*n+12,4);for(n=-1;8>n;++n)r(c,h+32*n-4,c,h+32*n+4,4),r(d,A+32*n-4,d,A+32*n+4,4)}var p=t.Gd,g=t.Hd+o,v=f.ad,m=f.Hc;if(0<a&&(r(u,l-32,p[g].y,0,16),r(c,h-32,p[g].f,0,8),r(d,A-32,p[g].ea,0,8)),f.Za){var y=u,b=l-32+16;for(0<a&&(o>=t.za-1?i(y,b,p[g].y[15],4):r(y,b,p[g+1].y,0,4)),n=0;4>n;n++)y[b+128+n]=y[b+256+n]=y[b+384+n]=y[b+0+n];for(n=0;16>n;++n,m<<=2)y=u,b=l+Ri[n],hi[f.Ob[n]](y,b),kn(m,v,16*+n,y,b)}else if(y=Bn(o,a,f.Ob[0]),ci[y](u,l),0!=m)for(n=0;16>n;++n,m<<=2)kn(m,v,16*+n,u,l+Ri[n]);for(n=f.Gc,y=Bn(o,a,f.Dd),di[y](c,h),di[y](d,A),m=v,y=c,b=h,255&(f=n>>0)&&(170&f?sr(m,256,y,b):lr(m,256,y,b)),f=d,m=A,255&(n>>=8)&&(170&n?sr(v,320,f,m):lr(v,320,f,m)),a<t.Ub-1&&(r(p[g].y,0,u,l+480,16),r(p[g].f,0,c,h+224,8),r(p[g].ea,0,d,A+224,8)),n=8*s*t.B,p=t.sa,g=t.ta+16*o+16*s*t.R,v=t.qa,f=t.ra+8*o+n,m=t.Ha,y=t.Ia+8*o+n,n=0;16>n;++n)r(p,g+n*t.R,u,l+32*n,16);for(n=0;8>n;++n)r(v,f+n*t.B,c,h+32*n,8),r(m,y+n*t.B,d,A+32*n,8)}}function Dn(t,r,i,o,a,s,u,l,c){var h=[0],d=[0],A=0,f=null!=c?c.kd:0,p=null!=c?c:new en;if(null==t||12>i)return 7;p.data=t,p.w=r,p.ha=i,r=[r],i=[i],p.gb=[p.gb];t:{var g=r,m=i,y=p.gb;if(e(null!=t),e(null!=m),e(null!=y),y[0]=0,12<=m[0]&&!n(t,g[0],"RIFF")){if(n(t,g[0]+8,"WEBP")){y=3;break t}var b=k(t,g[0]+4);if(12>b||4294967286<b){y=3;break t}if(f&&b>m[0]-8){y=7;break t}y[0]=b,g[0]+=12,m[0]-=12}y=0}if(0!=y)return y;for(b=0<p.gb[0],i=i[0];;){t:{var x=t;m=r,y=i;var _=h,T=d,E=g=[0];if((C=A=[A])[0]=0,8>y[0])y=7;else{if(!n(x,m[0],"VP8X")){if(10!=k(x,m[0]+4)){y=3;break t}if(18>y[0]){y=7;break t}var S=k(x,m[0]+8),M=1+B(x,m[0]+12);if(2147483648<=M*(x=1+B(x,m[0]+15))){y=3;break t}null!=E&&(E[0]=S),null!=_&&(_[0]=M),null!=T&&(T[0]=x),m[0]+=18,y[0]-=18,C[0]=1}y=0}}if(A=A[0],g=g[0],0!=y)return y;if(m=!!(2&g),!b&&A)return 3;if(null!=s&&(s[0]=!!(16&g)),null!=u&&(u[0]=m),null!=l&&(l[0]=0),u=h[0],g=d[0],A&&m&&null==c){y=0;break}if(4>i){y=7;break}if(b&&A||!b&&!A&&!n(t,r[0],"ALPH")){i=[i],p.na=[p.na],p.P=[p.P],p.Sa=[p.Sa];t:{S=t,y=r,b=i;var C=p.gb;_=p.na,T=p.P,E=p.Sa,M=22,e(null!=S),e(null!=b),x=y[0];var I=b[0];for(e(null!=_),e(null!=E),_[0]=null,T[0]=null,E[0]=0;;){if(y[0]=x,b[0]=I,8>I){y=7;break t}var N=k(S,x+4);if(4294967286<N){y=3;break t}var P=8+N+1&-2;if(M+=P,0<C&&M>C){y=3;break t}if(!n(S,x,"VP8 ")||!n(S,x,"VP8L")){y=0;break t}if(I[0]<P){y=7;break t}n(S,x,"ALPH")||(_[0]=S,T[0]=x+8,E[0]=N),x+=P,I-=P}}if(i=i[0],p.na=p.na[0],p.P=p.P[0],p.Sa=p.Sa[0],0!=y)break}i=[i],p.Ja=[p.Ja],p.xa=[p.xa];t:if(C=t,y=r,b=i,_=p.gb[0],T=p.Ja,E=p.xa,S=y[0],x=!n(C,S,"VP8 "),M=!n(C,S,"VP8L"),e(null!=C),e(null!=b),e(null!=T),e(null!=E),8>b[0])y=7;else{if(x||M){if(C=k(C,S+4),12<=_&&C>_-12){y=3;break t}if(f&&C>b[0]-8){y=7;break t}T[0]=C,y[0]+=8,b[0]-=8,E[0]=M}else E[0]=5<=b[0]&&47==C[S+0]&&!(C[S+4]>>5),T[0]=b[0];y=0}if(i=i[0],p.Ja=p.Ja[0],p.xa=p.xa[0],r=r[0],0!=y)break;if(4294967286<p.Ja)return 3;if(null==l||m||(l[0]=p.xa?2:1),u=[u],g=[g],p.xa){if(5>i){y=7;break}l=u,f=g,m=s,null==t||5>i?t=0:5<=i&&47==t[r+0]&&!(t[r+4]>>5)?(b=[0],C=[0],_=[0],v(T=new w,t,r,i),pt(T,b,C,_)?(null!=l&&(l[0]=b[0]),null!=f&&(f[0]=C[0]),null!=m&&(m[0]=_[0]),t=1):t=0):t=0}else{if(10>i){y=7;break}l=g,null==t||10>i||!Xt(t,r+3,i-3)?t=0:(f=t[r+0]|t[r+1]<<8|t[r+2]<<16,m=16383&(t[r+7]<<8|t[r+6]),t=16383&(t[r+9]<<8|t[r+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=p.Ja||!m||!t?t=0:(u&&(u[0]=m),l&&(l[0]=t),t=1))}if(!t||(u=u[0],g=g[0],A&&(h[0]!=u||d[0]!=g)))return 3;null!=c&&(c[0]=p,c.offset=r-c.w,e(4294967286>r-c.w),e(c.offset==c.ha-i));break}return 0==y||7==y&&A&&null==c?(null!=s&&(s[0]|=null!=p.na&&0<p.na.length),null!=o&&(o[0]=u),null!=a&&(a[0]=g),0):y}function Ln(t,e,n){var r=e.width,i=e.height,o=0,a=0,s=r,u=i;if(e.Da=null!=t&&0<t.Da,e.Da&&(s=t.cd,u=t.bd,o=t.v,a=t.j,11>n||(o&=-2,a&=-2),0>o||0>a||0>=s||0>=u||o+s>r||a+u>i))return 0;if(e.v=o,e.j=a,e.va=o+s,e.o=a+u,e.U=s,e.T=u,e.da=null!=t&&0<t.da,e.da){if(!O(s,u,n=[t.ib],o=[t.hb]))return 0;e.ib=n[0],e.hb=o[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*r/4&&e.hb<3*i/4,e.Kb=0),1}function On(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function Rn(t,e,n,r){if(null==r||0>=t||0>=e)return 2;if(null!=n){if(n.Da){var i=n.cd,a=n.bd,s=-2&n.v,u=-2&n.j;if(0>s||0>u||0>=i||0>=a||s+i>t||u+a>e)return 2;t=i,e=a}if(n.da){if(!O(t,e,i=[n.ib],a=[n.hb]))return 2;t=i[0],e=a[0]}}r.width=t,r.height=e;t:{var l=r.width,c=r.height;if(t=r.S,0>=l||0>=c||!(t>=Lr&&13>t))t=2;else{if(0>=r.Rd&&null==r.sd){s=a=i=e=0;var h=(u=l*zi[t])*c;if(11>t||(a=(c+1)/2*(e=(l+1)/2),12==t&&(s=(i=l)*c)),null==(c=o(h+2*a+s))){t=1;break t}r.sd=c,11>t?((l=r.f.RGBA).eb=c,l.fb=0,l.A=u,l.size=h):((l=r.f.kb).y=c,l.O=0,l.fa=u,l.Fd=h,l.f=c,l.N=0+h,l.Ab=e,l.Cd=a,l.ea=c,l.W=0+h+a,l.Db=e,l.Ed=a,12==t&&(l.F=c,l.J=0+h+2*a),l.Tc=s,l.lb=i)}if(e=1,i=r.S,a=r.width,s=r.height,i>=Lr&&13>i)if(11>i)t=r.f.RGBA,e&=(u=Math.abs(t.A))*(s-1)+a<=t.size,e&=u>=a*zi[i],e&=null!=t.eb;else{t=r.f.kb,u=(a+1)/2,h=(s+1)/2,l=Math.abs(t.fa),c=Math.abs(t.Ab);var d=Math.abs(t.Db),A=Math.abs(t.lb),f=A*(s-1)+a;e&=l*(s-1)+a<=t.Fd,e&=c*(h-1)+u<=t.Cd,e=(e&=d*(h-1)+u<=t.Ed)&l>=a&c>=u&d>=u,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==i&&(e&=A>=a,e&=f<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=n&&n.fd&&(t=On(r)),t}var Fn=64,Un=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jn=24,zn=32,Hn=8,Qn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];U("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,n){return e[n+0]},t.Predictor3=function(t,e,n){return e[n+1]},t.Predictor4=function(t,e,n){return e[n-1]},t.Predictor5=function(t,e,n){return z(z(t,e[n+1]),e[n+0])},t.Predictor6=function(t,e,n){return z(t,e[n-1])},t.Predictor7=function(t,e,n){return z(t,e[n+0])},t.Predictor8=function(t,e,n){return z(e[n-1],e[n+0])},t.Predictor9=function(t,e,n){return z(e[n+0],e[n+1])},t.Predictor10=function(t,e,n){return z(z(t,e[n-1]),z(e[n+0],e[n+1]))},t.Predictor11=function(t,e,n){var r=e[n+0];return 0>=G(r>>24&255,t>>24&255,(e=e[n-1])>>24&255)+G(r>>16&255,t>>16&255,e>>16&255)+G(r>>8&255,t>>8&255,e>>8&255)+G(255&r,255&t,255&e)?r:t},t.Predictor12=function(t,e,n){var r=e[n+0];return(H((t>>24&255)+(r>>24&255)-((e=e[n-1])>>24&255))<<24|H((t>>16&255)+(r>>16&255)-(e>>16&255))<<16|H((t>>8&255)+(r>>8&255)-(e>>8&255))<<8|H((255&t)+(255&r)-(255&e)))>>>0},t.Predictor13=function(t,e,n){var r=e[n-1];return(Q((t=z(t,e[n+0]))>>24&255,r>>24&255)<<24|Q(t>>16&255,r>>16&255)<<16|Q(t>>8&255,r>>8&255)<<8|Q(t>>0&255,r>>0&255))>>>0};var Gn=t.PredictorAdd0;t.PredictorAdd1=V,U("Predictor2","PredictorAdd2"),U("Predictor3","PredictorAdd3"),U("Predictor4","PredictorAdd4"),U("Predictor5","PredictorAdd5"),U("Predictor6","PredictorAdd6"),U("Predictor7","PredictorAdd7"),U("Predictor8","PredictorAdd8"),U("Predictor9","PredictorAdd9"),U("Predictor10","PredictorAdd10"),U("Predictor11","PredictorAdd11"),U("Predictor12","PredictorAdd12"),U("Predictor13","PredictorAdd13");var Vn=t.PredictorAdd2;q("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),q("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Wn,Yn=t.ColorIndexInverseTransform,Xn=t.MapARGB,qn=t.VP8LColorIndexInverseTransformAlpha,Kn=t.MapAlpha,Zn=t.VP8LPredictorsAdd=[];Zn.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Jn,$n,tr,er,nr,rr,ir,or,ar,sr,ur,lr,cr,hr,dr,Ar,fr,pr,gr,vr,mr,yr,br,wr,xr,_r,Tr,Er,Sr=o(511),Mr=o(2041),Cr=o(225),Ir=o(767),Nr=0,Br=Mr,kr=Cr,Pr=Ir,Dr=Sr,Lr=0,Or=1,Rr=2,Fr=3,Ur=4,jr=5,zr=6,Hr=7,Qr=8,Gr=9,Vr=10,Wr=[2,3,7],Yr=[3,3,11],Xr=[280,256,256,256,40],qr=[0,1,1,1,0],Kr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Jr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$r=8,ti=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ei=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ni=null,ri=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ii=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],oi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ai=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],si=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ui=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],li=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ci=[],hi=[],di=[],Ai=1,fi=2,pi=[],gi=[];gn("UpsampleRgbLinePair",xn,3),gn("UpsampleBgrLinePair",_n,3),gn("UpsampleRgbaLinePair",Cn,4),gn("UpsampleBgraLinePair",Mn,4),gn("UpsampleArgbLinePair",Sn,4),gn("UpsampleRgba4444LinePair",En,2),gn("UpsampleRgb565LinePair",Tn,2);var vi=t.UpsampleRgbLinePair,mi=t.UpsampleBgrLinePair,yi=t.UpsampleRgbaLinePair,bi=t.UpsampleBgraLinePair,wi=t.UpsampleArgbLinePair,xi=t.UpsampleRgba4444LinePair,_i=t.UpsampleRgb565LinePair,Ti=16,Ei=1<<Ti-1,Si=-227,Mi=482,Ci=6,Ii=(256<<Ci)-1,Ni=0,Bi=o(256),ki=o(256),Pi=o(256),Di=o(256),Li=o(Mi-Si),Oi=o(Mi-Si);Nn("YuvToRgbRow",xn,3),Nn("YuvToBgrRow",_n,3),Nn("YuvToRgbaRow",Cn,4),Nn("YuvToBgraRow",Mn,4),Nn("YuvToArgbRow",Sn,4),Nn("YuvToRgba4444Row",En,2),Nn("YuvToRgb565Row",Tn,2);var Ri=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fi=[0,2,8],Ui=[8,7,6,4,4,2,2,2,1,1,1,1],ji=1;this.WebPDecodeRGBA=function(t,n,s,u,l){var c=Or,h=new tn,d=new at;h.ba=d,d.S=c,d.width=[d.width],d.height=[d.height];var A=d.width,f=d.height,p=new st;if(null==p||null==t)var g=2;else e(null!=p),g=Dn(t,n,s,p.width,p.height,p.Pd,p.Qd,p.format,null);if(0!=g?A=0:(null!=A&&(A[0]=p.width[0]),null!=f&&(f[0]=p.height[0]),A=1),A){d.width=d.width[0],d.height=d.height[0],null!=u&&(u[0]=d.width),null!=l&&(l[0]=d.height);t:{if(u=new Vt,(l=new en).data=t,l.w=n,l.ha=s,l.kd=1,n=[0],e(null!=l),(0==(t=Dn(l.data,l.w,l.ha,null,null,null,n,null,l))||7==t)&&n[0]&&(t=4),0==(n=t)){if(e(null!=h),u.data=l.data,u.w=l.w+l.offset,u.ha=l.ha-l.offset,u.put=At,u.ac=dt,u.bc=ft,u.ma=h,l.xa){if(null==(t=Ct())){h=1;break t}if(function(t,n){var r=[0],i=[0],o=[0];e:for(;;){if(null==t)return 0;if(null==n)return t.a=2,0;if(t.l=n,t.a=0,v(t.m,n.data,n.w,n.ha),!pt(t.m,r,i,o)){t.a=3;break e}if(t.xb=fi,n.width=r[0],n.height=i[0],!It(r[0],i[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,u)){if(u=0==(n=Rn(u.width,u.height,h.Oa,h.ba))){e:{u=t;n:for(;;){if(null==u){u=0;break e}if(e(null!=u.s.yc),e(null!=u.s.Ya),e(0<u.s.Wb),e(null!=(s=u.l)),e(null!=(l=s.ma)),0!=u.xb){if(u.ca=l.ba,u.tb=l.tb,e(null!=u.ca),!Ln(l.Oa,s,Fr)){u.a=2;break n}if(!Nt(u,s.width)||s.da)break n;if((s.da||rt(u.ca.S))&&pn(),11>u.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=u.ca.f.kb.F&&pn()),u.Pb&&0<u.s.ua&&null==u.s.vb.X&&!P(u.s.vb,u.s.Wa.Xa)){u.a=1;break n}u.xb=0}if(!St(u,u.V,u.Ba,u.c,u.i,s.o,xt))break n;l.Dc=u.Ma,u=1;break e}e(0!=u.a),u=0}u=!u}u&&(n=t.a)}else n=t.a}else{if(null==(t=new Wt)){h=1;break t}if(t.Fa=l.na,t.P=l.P,t.qc=l.Sa,qt(t,u)){if(0==(n=Rn(u.width,u.height,h.Oa,h.ba))){if(t.Aa=0,s=h.Oa,e(null!=(l=t)),null!=s){if(0<(A=0>(A=s.Md)?0:100<A?255:255*A/100)){for(f=p=0;4>f;++f)12>(g=l.pb[f]).lc&&(g.ia=A*Ui[0>g.lc?0:g.lc]>>3),p|=g.ia;p&&(alert("todo:VP8InitRandom"),l.ia=1)}l.Ga=s.Id,100<l.Ga?l.Ga=100:0>l.Ga&&(l.Ga=0)}(function(t,n){if(null==t)return 0;if(null==n)return Yt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!qt(t,n))return 0;if(e(t.cb),null==n.ac||n.ac(n)){n.ob&&(t.L=0);var s=Fi[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=n.v-s>>4,t.zb=n.j-s>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=n.o+15+s>>4,t.Hb=n.va+15+s>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var u=t.ed;for(s=0;4>s;++s){var l;if(t.Qa.Cb){var c=t.Qa.Lb[s];t.Qa.Fb||(c+=u.Tb)}else c=u.Tb;for(l=0;1>=l;++l){var h=t.gd[s][l],d=c;if(u.Pc&&(d+=u.vd[0],l&&(d+=u.od[0])),0<(d=0>d?0:63<d?63:d)){var A=d;0<u.wb&&(A=4<u.wb?A>>2:A>>1)>9-u.wb&&(A=9-u.wb),1>A&&(A=1),h.dd=A,h.tc=2*d+A,h.ld=40<=d?2:15<=d?1:0}else h.tc=0;h.La=l}}}s=0}else Yt(t,6,"Frame setup failed"),s=t.a;if(s=0==s){if(s){t.$c=0,0<t.Aa||(t.Ic=ji);e:{s=t.Ic,u=4*(A=t.za);var f=32*A,p=A+1,g=0<t.L?A*(0<t.Aa?2:1):0,v=(2==t.Aa?2:1)*A;if((h=u+832+(l=3*(16*s+Fi[t.L])/2*f)+(c=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=h)s=0;else{if(h>t.Vb){if(t.Vb=0,t.Ec=o(h),t.Fc=0,null==t.Ec){s=Yt(t,1,"no memory during frame initialization.");break e}t.Vb=h}h=t.Ec,d=t.Fc,t.Ac=h,t.Bc=d,d+=u,t.Gd=a(f,Qt),t.Hd=0,t.rb=a(p+1,Ut),t.sb=1,t.wa=g?a(g,Ft):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=A),e(!0),t.oc=h,t.pc=d,d+=832,t.ya=a(v,zt),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=A),t.R=16*A,t.B=8*A,A=(f=Fi[t.L])*t.R,f=f/2*t.B,t.sa=h,t.ta=d+A,t.qa=t.sa,t.ra=t.ta+16*s*t.R+f,t.Ha=t.qa,t.Ia=t.ra+8*s*t.B+f,t.$c=0,d+=l,t.mb=c?h:null,t.nb=c?d:null,e(d+c<=t.Fc+t.Vb),Zt(t),i(t.Ac,t.Bc,0,u),s=1}}if(s){if(n.ka=0,n.y=t.sa,n.O=t.ta,n.f=t.qa,n.N=t.ra,n.ea=t.Ha,n.Vd=t.Ia,n.fa=t.R,n.Rc=t.B,n.F=null,n.J=0,!Nr){for(s=-255;255>=s;++s)Sr[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)Mr[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Cr[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)Ir[255+s]=0>s?0:255<s?255:s;Nr=1}ir=se,or=re,sr=ie,ur=oe,lr=ae,ar=ne,cr=We,hr=Ye,dr=Ke,Ar=Ze,fr=Xe,pr=qe,gr=Je,vr=$e,mr=je,yr=ze,br=He,wr=Qe,hi[0]=xe,hi[1]=le,hi[2]=be,hi[3]=we,hi[4]=_e,hi[5]=Ee,hi[6]=Te,hi[7]=Se,hi[8]=Ce,hi[9]=Me,ci[0]=pe,ci[1]=he,ci[2]=de,ci[3]=Ae,ci[4]=ge,ci[5]=ve,ci[6]=me,di[0]=ke,di[1]=ce,di[2]=Ie,di[3]=Ne,di[4]=De,di[5]=Pe,di[6]=Le,s=1}else s=0}s&&(s=function(t,n){for(t.M=0;t.M<t.Va;++t.M){var a,s=t.Jc[t.M&t.Xb],u=t.m,l=t;for(a=0;a<l.za;++a){var c=u,h=l,d=h.Ac,A=h.Bc+4*a,f=h.zc,p=h.ya[h.aa+a];if(h.Qa.Bb?p.$b=C(c,h.Pa.jb[0])?2+C(c,h.Pa.jb[2]):C(c,h.Pa.jb[1]):p.$b=0,h.kc&&(p.Ad=C(c,h.Bd)),p.Za=!C(c,145)+0,p.Za){var g=p.Ob,v=0;for(h=0;4>h;++h){var m,y=f[0+h];for(m=0;4>m;++m){y=si[d[A+m]][y];for(var b=oi[C(c,y[0])];0<b;)b=oi[2*b+C(c,y[b])];y=-b,d[A+m]=y}r(g,v,d,A,4),v+=4,f[0+h]=y}}else y=C(c,156)?C(c,128)?1:3:C(c,163)?2:0,p.Ob[0]=y,i(d,A,y,4),i(f,0,y,4);p.Dd=C(c,142)?C(c,114)?C(c,183)?1:3:2:0}if(l.m.Ka)return Yt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(l=s,c=(u=t).rb[u.sb-1],d=u.rb[u.sb+u.ja],a=u.ya[u.aa+u.ja],A=u.kc?a.Ad:0)c.la=d.la=0,a.Za||(c.Na=d.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var w,x;if(c=d,d=l,A=u.Pa.Xc,f=u.ya[u.aa+u.ja],p=u.pb[f.$b],h=f.ad,g=0,v=u.rb[u.sb-1],y=m=0,i(h,g,0,384),f.Za)var _=0,T=A[3];else{b=o(16);var E=c.Na+v.Na;if(E=ni(d,A[1],E,p.Eb,0,b,0),c.Na=v.Na=(0<E)+0,1<E)ir(b,0,h,g);else{var S=b[0]+3>>3;for(b=0;256>b;b+=16)h[g+b]=S}_=1,T=A[0]}var M=15&c.la,I=15&v.la;for(b=0;4>b;++b){var N=1&I;for(S=x=0;4>S;++S)M=M>>1|(N=(E=ni(d,T,E=N+(1&M),p.Sc,_,h,g))>_)<<7,x=x<<2|(3<E?3:1<E?2:0!=h[g+0]),g+=16;M>>=4,I=I>>1|N<<7,m=(m<<8|x)>>>0}for(T=M,_=I>>4,w=0;4>w;w+=2){for(x=0,M=c.la>>4+w,I=v.la>>4+w,b=0;2>b;++b){for(N=1&I,S=0;2>S;++S)E=N+(1&M),M=M>>1|(N=0<(E=ni(d,A[2],E,p.Qc,0,h,g)))<<3,x=x<<2|(3<E?3:1<E?2:0!=h[g+0]),g+=16;M>>=2,I=I>>1|N<<5}y|=x<<4*w,T|=M<<4<<w,_|=(240&I)<<w}c.la=T,v.la=_,f.Hc=m,f.Gc=y,f.ia=43690&y?0:p.ia,A=!(m|y)}if(0<u.L&&(u.wa[u.Y+u.ja]=u.gd[a.$b][a.Za],u.wa[u.Y+u.ja].La|=!A),l.Ka)return Yt(t,7,"Premature end-of-file encountered.")}if(Zt(t),u=n,l=1,a=(s=t).D,c=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)e:{if(a.M=s.M,a.uc=c,Pn(s,a),l=1,a=(x=s.D).Nb,c=(y=Fi[s.L])*s.R,d=y/2*s.B,b=16*a*s.R,S=8*a*s.B,A=s.sa,f=s.ta-c+b,p=s.qa,h=s.ra-d+S,g=s.Ha,v=s.Ia-d+S,I=0==(M=x.M),m=M>=s.Va-1,2==s.Aa&&Pn(s,x),x.uc)for(N=(E=s).D.M,e(E.D.uc),x=E.yb;x<E.Hb;++x){_=x,T=N;var B=(k=(z=E).D).Nb;w=z.R;var k=k.wa[k.Y+_],P=z.sa,D=z.ta+16*B*w+16*_,L=k.dd,O=k.tc;if(0!=O)if(e(3<=O),1==z.L)0<_&&yr(P,D,w,O+4),k.La&&wr(P,D,w,O),0<T&&mr(P,D,w,O+4),k.La&&br(P,D,w,O);else{var R=z.B,F=z.qa,U=z.ra+8*B*R+8*_,j=z.Ha,z=z.Ia+8*B*R+8*_;B=k.ld,0<_&&(hr(P,D,w,O+4,L,B),Ar(F,U,j,z,R,O+4,L,B)),k.La&&(pr(P,D,w,O,L,B),vr(F,U,j,z,R,O,L,B)),0<T&&(cr(P,D,w,O+4,L,B),dr(F,U,j,z,R,O+4,L,B)),k.La&&(fr(P,D,w,O,L,B),gr(F,U,j,z,R,O,L,B))}}if(s.ia&&alert("todo:DitherRow"),null!=u.put){if(x=16*M,M=16*(M+1),I?(u.y=s.sa,u.O=s.ta+b,u.f=s.qa,u.N=s.ra+S,u.ea=s.Ha,u.W=s.Ia+S):(x-=y,u.y=A,u.O=f,u.f=p,u.N=h,u.ea=g,u.W=v),m||(M-=y),M>u.o&&(M=u.o),u.F=null,u.J=null,null!=s.Fa&&0<s.Fa.length&&x<M&&(u.J=cn(s,u,x,M-x),u.F=s.mb,null==u.F&&0==u.F.length)){l=Yt(s,3,"Could not decode alpha data.");break e}x<u.j&&(y=u.j-x,x=u.j,e(!(1&y)),u.O+=s.R*y,u.N+=s.B*(y>>1),u.W+=s.B*(y>>1),null!=u.F&&(u.J+=u.width*y)),x<M&&(u.O+=u.v,u.N+=u.v>>1,u.W+=u.v>>1,null!=u.F&&(u.J+=u.v),u.ka=x-u.j,u.U=u.va-u.v,u.T=M-x,l=u.put(u))}a+1!=s.Ic||m||(r(s.sa,s.ta-c,A,f+16*s.R,c),r(s.qa,s.ra-d,p,h+8*s.B,d),r(s.Ha,s.Ia-d,g,v+8*s.B,d))}if(!l)return Yt(t,6,"Output aborted.")}return 1}(t,n)),null!=n.bc&&n.bc(n),s&=1}return s?(t.cb=0,s):0})(t,u)||(n=t.a)}}else n=t.a}0==n&&null!=h.Oa&&h.Oa.fd&&(n=On(h.ba))}h=n}c=0!=h?null:11>c?d.f.RGBA.eb:d.f.kb.y}else c=null;return c};var zi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(t,e){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(t[e++]);return n}function c(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function h(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new u;var d=[0],A=[0],f=[],p=new u,g=t,v=function(t,e){var n={},r=0,i=!1,o=0,a=0;if(n.frames=[],!function(t,e,n,r){for(var i=0;i<4;i++)if(t[e+i]!="RIFF".charCodeAt(i))return!0;return!1}(t,e)){var s,u;for(h(t,e+=4),e+=8;e<t.length;){var d=l(t,e),A=h(t,e+=4);e+=4;var f=A+(1&A);switch(d){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(v=n.frames[r]).src_off=i?a:e-8,v.src_size=o+A+8,r++,i&&(i=!1,o=0,a=0);break;case"VP8X":(v=n.header={}).feature_flags=t[e];var p=e+4;v.canvas_width=1+c(t,p),p+=3,v.canvas_height=1+c(t,p),p+=3;break;case"ALPH":i=!0,o=f+8,a=e-8;break;case"ANIM":(v=n.header).bgcolor=h(t,e),p=e+4,v.loop_count=(s=t)[(u=p)+0]<<0|s[u+1]<<8,p+=2;break;case"ANMF":var g,v;(v=n.frames[r]={}).offset_x=2*c(t,e),e+=3,v.offset_y=2*c(t,e),e+=3,v.width=1+c(t,e),e+=3,v.height=1+c(t,e),e+=3,v.duration=c(t,e),e+=3,g=t[e++],v.dispose=1&g,v.blend=g>>1&1}"ANMF"!=d&&(e+=f)}return n}}(g,0);v.response=g,v.rgbaoutput=!0,v.dataurl=!1;var m=v.header?v.header:null,y=v.frames?v.frames:null;if(m){m.loop_counter=m.loop_count,d=[m.canvas_height],A=[m.canvas_width];for(var b=0;b<y.length&&0!=y[b].blend;b++);}var w=y[0],x=p.WebPDecodeRGBA(g,w.src_off,w.src_size,A,d);w.rgba=x,w.imgwidth=A[0],w.imgheight=d[0];for(var _=0;_<A[0]*d[0]*4;_++)f[_]=x[_];return this.width=A,this.height=d,this.data=f,this}(function(t){var e=function(e,r,u,l){var c=4,h=o;switch(l){case t.image_compression.FAST:c=1,h=i;break;case t.image_compression.MEDIUM:c=6,h=a;break;case t.image_compression.SLOW:c=9,h=s}var d=re(e=n(e,r,u,h),{level:c});return t.__addimage__.arrayBufferToBinaryString(d)},n=function(t,e,n,r){for(var i,o,a,s=t.length/e,u=new Uint8Array(t.length+s),h=l(),d=0;d<s;d+=1){if(a=d*e,i=t.subarray(a,a+e),r)u.set(r(i,n,o),a+d);else{for(var A,f=h.length,p=[];A<f;A+=1)p[A]=h[A](i,n,o);var g=c(p.concat());u.set(p[g],a+d)}o=i}return u},r=function(t){var e=Array.apply([],t);return e.unshift(0),e},i=function(t,e){var n,r=[],i=t.length;r[0]=1;for(var o=0;o<i;o+=1)n=t[o-e]||0,r[o+1]=t[o]-n+256&255;return r},o=function(t,e,n){var r,i=[],o=t.length;i[0]=2;for(var a=0;a<o;a+=1)r=n&&n[a]||0,i[a+1]=t[a]-r+256&255;return i},a=function(t,e,n){var r,i,o=[],a=t.length;o[0]=3;for(var s=0;s<a;s+=1)r=t[s-e]||0,i=n&&n[s]||0,o[s+1]=t[s]+256-(r+i>>>1)&255;return o},s=function(t,e,n){var r,i,o,a,s=[],l=t.length;s[0]=4;for(var c=0;c<l;c+=1)r=t[c-e]||0,i=n&&n[c]||0,o=n&&n[c-e]||0,a=u(r,i,o),s[c+1]=t[c]-a+256&255;return s},u=function(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),o=Math.abs(t+e-n-n);return r<=i&&r<=o?t:i<=o?e:n},l=function(){return[r,i,o,a,s]},c=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(n,r,i,o){var a,s,u,l,c,h,d,A,f,p,g,v,m,y,b,w=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(u=new Jn(n)).imgData,s=u.bits,a=u.colorSpace,c=u.colors,-1!==[4,6].indexOf(u.colorType)){if(8===u.bits){f=(A=32==u.pixelBitlength?new Uint32Array(u.decodePixels().buffer):16==u.pixelBitlength?new Uint16Array(u.decodePixels().buffer):new Uint8Array(u.decodePixels().buffer)).length,g=new Uint8Array(f*u.colors),p=new Uint8Array(f);var _,T=u.pixelBitlength-u.bits;for(y=0,b=0;y<f;y++){for(m=A[y],_=0;_<T;)g[b++]=m>>>_&255,_+=u.bits;p[y]=m>>>_&255}}if(16===u.bits){f=(A=new Uint32Array(u.decodePixels().buffer)).length,g=new Uint8Array(f*(32/u.pixelBitlength)*u.colors),p=new Uint8Array(f*(32/u.pixelBitlength)),v=u.colors>1,y=0,b=0;for(var E=0;y<f;)m=A[y++],g[b++]=m>>>0&255,v&&(g[b++]=m>>>16&255,m=A[y++],g[b++]=m>>>0&255),p[E++]=m>>>16&255;s=8}o!==t.image_compression.NONE?(n=e(g,u.width*u.colors,u.colors,o),d=e(p,u.width,1,o)):(n=g,d=p,w=void 0)}if(3===u.colorType&&(a=this.color_spaces.INDEXED,h=u.palette,u.transparency.indexed)){var S=u.transparency.indexed,M=0;for(y=0,f=S.length;y<f;++y)M+=S[y];if((M/=255)==f-1&&-1!==S.indexOf(0))l=[S.indexOf(0)];else if(M!==f){for(A=u.decodePixels(),p=new Uint8Array(A.length),y=0,f=A.length;y<f;y++)p[y]=S[A[y]];d=e(p,u.width,1)}}var C=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return w===this.decode.FLATE_DECODE&&(x="/Predictor "+C+" "),x+="/Colors "+c+" /BitsPerComponent "+s+" /Columns "+u.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:i,data:n,index:r,filter:w,decodeParameters:x,transparency:l,palette:h,sMask:d,predictor:C,width:u.width,height:u.height,bitsPerComponent:s,colorSpace:a}}}})(Fe.API),function(t){t.processGIF89A=function(e,n,r,i){var o=new $n(e),a=o.width,s=o.height,u=[];o.decodeAndBlitFrameRGBA(0,u);var l={data:u,width:a,height:s},c=new er(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)},t.processGIF87A=t.processGIF89A}(Fe.API),nr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},nr.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(t){se.log("bit decode error:"+t)}},nr.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var u=this.palette[o>>7-s&1];this.data[a+4*s]=u.blue,this.data[a+4*s+1]=u.green,this.data[a+4*s+2]=u.red,this.data[a+4*s+3]=255}0!==n&&(this.pos+=4-n)}},nr.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,s=o>>4,u=15&o,l=this.palette[s];if(this.data[a]=l.blue,this.data[a+1]=l.green,this.data[a+2]=l.red,this.data[a+3]=255,2*i+1>=this.width)break;l=this.palette[u],this.data[a+4]=l.blue,this.data[a+4+1]=l.green,this.data[a+4+2]=l.red,this.data[a+4+3]=255}0!==e&&(this.pos+=4-e)}},nr.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==t&&(this.pos+=4-t)}},nr.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,s=(o>>5&e)/e*255|0,u=(o>>10&e)/e*255|0,l=o>>15?255:0,c=r*this.width*4+4*i;this.data[c]=u,this.data[c+1]=s,this.data[c+2]=a,this.data[c+3]=l}this.pos+=t}},nr.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,u=(a>>5&n)/n*255|0,l=(a>>11)/e*255|0,c=i*this.width*4+4*o;this.data[c]=l,this.data[c+1]=u,this.data[c+2]=s,this.data[c+3]=255}this.pos+=t}},nr.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},nr.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=a}},nr.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var o=new nr(e,!1),a=o.width,s=o.height,u={data:o.getData(),width:a,height:s},l=new er(100).encode(u,100);return t.processJPEG.call(this,l,n,r,i)}}(Fe.API),rr.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var o=new rr(e),a=o.width,s=o.height,u={data:o.getData(),width:a,height:s},l=new er(100).encode(u,100);return t.processJPEG.call(this,l,n,r,i)}}(Fe.API),Fe.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),s=0,u=0,l=0;l<i;l+=4){var c=r[l],h=r[l+1],d=r[l+2],A=r[l+3];o[s++]=c,o[s++]=h,o[s++]=d,a[u++]=A}var f=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:f,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Fe.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Yn=Fe.API,Xn=Yn.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),s=e.widths?e.widths:i.metadata.Unicode.widths,u=s.fof?s.fof:1,l=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=l.fof?l.fof:1,h=!1!==e.doKerning,d=0,A=t.length,f=0,p=s[0]||u,g=[];for(n=0;n<A;n++)r=t.charCodeAt(n),"function"==typeof i.metadata.widthOfString?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(d=h&&"object"===vt(l[r])&&!isNaN(parseInt(l[r][f],10))?l[r][f]/c:0,g.push((s[r]||p)/u+d)),f=r;return g},qn=Yn.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Yn.processArabic&&(t=Yn.processArabic(t)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(t,n,i)/n:Xn.apply(this,arguments).reduce((function(t,e){return t+e}),0)},Kn=function(t,e,n,r){for(var i=[],o=0,a=t.length,s=0;o!==a&&s+e[o]<n;)s+=e[o],o++;i.push(t.slice(0,o));var u=o;for(s=0;o!==a;)s+e[o]>r&&(i.push(t.slice(u,o)),s=0,u=o),s+=e[o],o++;return u!==o&&i.push(t.slice(u,o)),i},Zn=function(t,e,n){n||(n={});var r,i,o,a,s,u,l,c=[],h=[c],d=n.textIndent||0,A=0,f=0,p=t.split(" "),g=Xn.apply(this,[" ",n])[0];if(u=-1===n.lineIndent?p[0].length+2:n.lineIndent||0){var v=Array(u).join(" "),m=[];p.map((function(t){(t=t.split(/\s*\n/)).length>1?m=m.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):m.push(t[0])})),p=m,u=qn.apply(this,[v,n])}for(o=0,a=p.length;o<a;o++){var y=0;if(r=p[o],u&&"\n"==r[0]&&(r=r.substr(1),y=1),d+A+(f=(i=Xn.apply(this,[r,n])).reduce((function(t,e){return t+e}),0))>e||y){if(f>e){for(s=Kn.apply(this,[r,i,e-(d+A),e]),c.push(s.shift()),c=[s.pop()];s.length;)h.push([s.shift()]);f=i.slice(r.length-(c[0]?c[0].length:0)).reduce((function(t,e){return t+e}),0)}else c=[r];h.push(c),d=f+u,A=g}else c.push(r),d+=A+f,A=g}return l=u?function(t,e){return(e?v:"")+t.join(" ")}:function(t){return t.join(" ")},h.map(l)},Yn.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var s,u,l=[];for(s=0,u=r.length;s<u;s++)l=l.concat(Zn.apply(this,[r[s],a,o]));return l},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(t){return"0x"+parseInt(t,10).toString(16)},a=t.__fontmetrics__.compress=function(t){var e,n,i,s,u=["{"];for(var l in t){if(e=t[l],isNaN(parseInt(l,10))?n="'"+l+"'":(l=parseInt(l,10),n=(n=o(l).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof e)e<0?(i=o(e).slice(3),s="-"):(i=o(e).slice(2),s=""),i=s+i.slice(0,-1)+r[i.slice(-1)];else{if("object"!==vt(e))throw new Error("Don't know what to do with value type "+vt(e)+".");i=a(e)}u.push(n+i)}return u.push("}"),u.join("")},s=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,r,i,o,a={},s=1,u=a,l=[],c="",h="",d=t.length-1,A=1;A<d;A+=1)"'"==(o=t[A])?e?(i=e.join(""),e=void 0):e=[]:e?e.push(o):"{"==o?(l.push([u,i]),u={},i=void 0):"}"==o?((r=l.pop())[0][r[1]]=u,i=void 0,u=r[0]):"-"==o?s=-1:void 0===i?n.hasOwnProperty(o)?(c+=n[o],i=parseInt(c,16)*s,s=1,c=""):c+=o:n.hasOwnProperty(o)?(h+=n[o],u[i]=parseInt(h,16)*s,s=1,i=void 0,h=""):h+=o;return a},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},c={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,n=c.Unicode[e.postScriptName];n&&(e.metadata.Unicode={},e.metadata.Unicode.widths=n.widths,e.metadata.Unicode.kerning=n.kerning);var r=l.Unicode[e.postScriptName];r&&(e.metadata.Unicode.encoding=r,e.encoding=r.codePages[0])}])}(Fe.API),function(t){var e=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n};t.API.events.push(["addFont",function(n){var r,i,o=void 0,a=n.font,s=n.instance;if(!a.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(o=!1===s.existsFileInVFS(a.postScriptName)?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");r=a,i=/^\x00\x01\x00\x00/.test(i=o)?e(i):e(he(i)),r.metadata=t.API.TTFFont.open(i),r.metadata.Unicode=r.metadata.Unicode||{encoding:{},kerning:{},widths:[]},r.metadata.glyIdsUsed=[0]}}])}(Fe),function(t){function e(){return(oe.canvg?Promise.resolve(oe.canvg):Promise.resolve().then((function(){return wk}))).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}Fe.API.addSvgAsImage=function(t,n,r,i,o,a,s,u){if(isNaN(n)||isNaN(r))throw se.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw se.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=i,l.height=o;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then((function(e){return e.fromString(c,t,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(h)})).then((function(){d.addImage(l.toDataURL("image/jpeg",1),n,r,i,o,s,u)}))}}(),Fe.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Fe.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(a),u=[],l=0,c=0,h=0;function d(t,e){var n,r=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var A=s.length;for(h=0;h<A;h+=1)n[s[h]].value=n[s[h]].defaultValue,n[s[h]].explicitSet=!1}if("object"===vt(t))for(i in t)if(o=t[i],d(s,i)&&void 0!==o){if("boolean"===n[i].type&&"boolean"==typeof o)n[i].value=o;else if("name"===n[i].type&&d(n[i].valueSet,o))n[i].value=o;else if("integer"===n[i].type&&Number.isInteger(o))n[i].value=o;else if("array"===n[i].type){for(l=0;l<o.length;l+=1)if(r=!0,1===o[l].length&&"number"==typeof o[l][0])u.push(String(o[l]-1));else if(o[l].length>1){for(c=0;c<o[l].length;c+=1)"number"!=typeof o[l][c]&&(r=!1);!0===r&&u.push([o[l][0]-1,o[l][1]-1].join(" "))}n[i].value="["+u.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&("name"===n[t].type?e.push("/"+t+" /"+n[t].value):e.push("/"+t+" "+n[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+r.length+i.length+e.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(e+n+r+i+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Fe.API),function(t){var e=t.API,n=e.pdfEscape16=function(t,e){for(var n,r=e.metadata.Unicode.widths,i=["","0","00","000","0000"],o=[""],a=0,s=t.length;a<s;++a){if(n=e.metadata.characterToGlyph(t.charCodeAt(a)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(a),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(i[4-n.length],n)}return o.join("")},r=function(t){var e,n,r,i,o,a,s;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],a=0,s=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;a<s;a++)e=n[a],r.length>=100&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(i=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),r.push("<"+e+"><"+i+">"));return r.length&&(o+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var n=e.font,i=e.out,o=e.newObject,a=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"Identity-H"===n.encoding){for(var s=n.metadata.Unicode.widths,u=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),l="",c=0;c<u.length;c++)l+=String.fromCharCode(u[c]);var h=o();a({data:l,addLength1:!0,objectId:h}),i("endobj");var d=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),i("endobj");var A=o();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+ke(n.fontName)),i("/FontFile2 "+h+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var f=o();i("<<"),i("/Type /Font"),i("/BaseFont /"+ke(n.fontName)),i("/FontDescriptor "+A+" 0 R"),i("/W "+t.API.PDFObject.convert(s)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=o(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+d+" 0 R"),i("/BaseFont /"+ke(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+f+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var n=e.font,i=e.out,o=e.newObject,a=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var s=n.metadata.rawData,u="",l=0;l<s.length;l++)u+=String.fromCharCode(s[l]);var c=o();a({data:u,addLength1:!0,objectId:c}),i("endobj");var h=o();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var d=o();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+c+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+ke(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=o();for(var A=0;A<n.metadata.hmtx.widths.length;A++)n.metadata.hmtx.widths[A]=parseInt(n.metadata.hmtx.widths[A]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+ke(n.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(e)}]);var i=function(t){var e,r=t.text||"",i=t.x,o=t.y,a=t.options||{},s=t.mutex||{},u=s.pdfEscape,l=s.activeFontKey,c=s.fonts,h=l,d="",A=0,f="",p=c[h].encoding;if("Identity-H"!==c[h].encoding)return{text:r,x:i,y:o,options:a,mutex:s};for(f=r,h=l,Array.isArray(r)&&(f=r[0]),A=0;A<f.length;A+=1)c[h].metadata.hasOwnProperty("cmap")&&(e=c[h].metadata.cmap.unicode.codeMap[f[A].charCodeAt(0)]),e||f[A].charCodeAt(0)<256&&c[h].metadata.hasOwnProperty("Unicode")?d+=f[A]:d+="";var g="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===p?g=u(d,h).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===p&&(g=n(d,c[h])),s.isHex=!0,{text:g,x:i,y:o,options:a,mutex:s}};e.events.push(["postProcessText",function(t){var e=t.text||"",n=[],r={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var o=0;for(o=0;o<e.length;o+=1)Array.isArray(e[o])&&3===e[o].length?n.push([i(Object.assign({},r,{text:e[o][0]})).text,e[o][1],e[o][2]]):n.push(i(Object.assign({},r,{text:e[o]})).text);t.text=n}else t.text=i(Object.assign({},r,{text:e})).text}])}(Fe),function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(Fe.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,r,i,o,a,s,u,l=e,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,v=0;this.__bidiEngine__={};var m=function(t){var e=t.charCodeAt(),n=e>>8,r=A[n];return void 0!==r?l[256*r+(255&e)]:252===n||253===n?"AL":p.test(n)?"L":8===n?"R":"N"},y=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=m(t.charAt(n))))return!1;if("R"===e)return!0}return!1},b=function(t,e,a,s){var u,l,c,h,d=e[s];switch(d){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(d="AN");break;case"AL":g=!0,d="R";break;case"WS":case"BN":d="N";break;case"CS":s<1||s+1>=e.length||"EN"!==(u=a[s-1])&&"AN"!==u||"EN"!==(l=e[s+1])&&"AN"!==l?d="N":g&&(l="AN"),d=l===u?l:"N";break;case"ES":d="EN"===(u=s>0?a[s-1]:"B")&&s+1<e.length&&"EN"===e[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===a[s-1]){d="EN";break}if(g){d="N";break}for(c=s+1,h=e.length;c<h&&"ET"===e[c];)c++;d=c<h&&"EN"===e[c]?"EN":"N";break;case"NSM":if(i&&!o){for(h=e.length,c=s+1;c<h&&"NSM"===e[c];)c++;if(c<h){var A=t[s],f=A>=1425&&A<=2303||64286===A;if(u=e[c],f&&("R"===u||"AL"===u)){d="R";break}}}d=s<1||"B"===(u=e[s-1])?"N":a[s-1];break;case"B":g=!1,n=!0,d=v;break;case"S":r=!0,d="N"}return d},w=function(t,e,n){var r=t.split("");return n&&x(r,n,{hiLevel:v}),r.reverse(),e&&e.reverse(),r.join("")},x=function(t,e,i){var o,a,s,u,l,A=-1,f=t.length,p=0,y=[],w=v?h:c,x=[];for(g=!1,n=!1,r=!1,a=0;a<f;a++)x[a]=m(t[a]);for(s=0;s<f;s++){if(l=p,y[s]=b(t,x,y,s),o=240&(p=w[l][d[y[s]]]),p&=15,e[s]=u=w[p][5],o>0)if(16===o){for(a=A;a<s;a++)e[a]=1;A=-1}else A=-1;if(w[p][6])-1===A&&(A=s);else if(A>-1){for(a=A;a<s;a++)e[a]=u;A=-1}"B"===x[s]&&(e[s]=0),i.hiLevel|=u}r&&function(t,e,n){for(var r=0;r<n;r++)if("S"===t[r]){e[r]=v;for(var i=r-1;i>=0&&"WS"===t[i];i--)e[i]=v}}(x,e,f)},_=function(t,e,r,i,o){if(!(o.hiLevel<t)){if(1===t&&1===v&&!n)return e.reverse(),void(r&&r.reverse());for(var a,s,u,l,c=e.length,h=0;h<c;){if(i[h]>=t){for(u=h+1;u<c&&i[u]>=t;)u++;for(l=h,s=u-1;l<s;l++,s--)a=e[l],e[l]=e[s],e[s]=a,r&&(a=r[l],r[l]=r[s],r[s]=a);h=u}h++}}},T=function(t,e,n){var r=t.split(""),i={hiLevel:v};return n||(n=[]),x(r,n,i),function(t,e,n){if(0!==n.hiLevel&&u)for(var r,i=0;i<t.length;i++)1===e[i]&&(r=f.indexOf(t[i]))>=0&&(t[i]=f[r+1])}(r,n,i),_(2,r,e,n,i),_(1,r,e,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===o&&(o=y(t)),void 0===s&&(s=y(t))}(t,e),i||!a||s)if(i&&a&&o^s)v=o?1:0,t=w(t,e,n);else if(!i&&a&&s)v=o?1:0,t=T(t,e,n),t=w(t,e);else if(!i||o||a||s){if(i&&!a&&o^s)t=w(t,e),o?(v=0,t=T(t,e,n)):(v=1,t=T(t,e,n),t=w(t,e));else if(i&&o&&!a&&s)v=1,t=T(t,e,n),t=w(t,e);else if(!i&&!a&&o^s){var r=u;o?(v=1,t=T(t,e,n),v=0,u=!1,t=T(t,e,n),u=r):(v=0,t=T(t,e,n),t=w(t,e),v=1,u=!1,t=T(t,e,n),u=r,t=w(t,e))}}else v=0,t=T(t,e,n);else v=o?1:0,t=T(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(i=t.isInputVisual,a=t.isOutputVisual,o=t.isInputRtl,s=t.isOutputRtl,u=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,r=(t.x,t.y,t.options||{}),i=(t.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(e)){var o=0;for(i=[],o=0;o<e.length;o+=1)"[object Array]"===Object.prototype.toString.call(e[o])?i.push([n.doBidiReorder(e[o][0]),e[o][1],e[o][2]]):i.push([n.doBidiReorder(e[o])]);t.text=i}else t.text=n.doBidiReorder(e);n.setOptions({isInputVisual:!0})}])}(Fe),Fe.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new or(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new Tr(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ar(this.contents),this.head=new lr(this),this.name=new gr(this),this.cmap=new hr(this),this.toUnicode={},this.hhea=new dr(this),this.maxp=new vr(this),this.hmtx=new mr(this),this.post=new fr(this),this.os2=new Ar(this),this.loca=new _r(this),this.glyf=new br(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var e,n,r,i;for(i=[],e=0,n=(r=this.bbox).length;e<n;e++)t=r[e],i.push(Math.round(t*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(e=r>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,n){var r,i,o,a;for(o=0,i=0,a=(t=""+t).length;0<=a?i<a:i>a;i=0<=a?++i:--i)r=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/e)||0;return o*(e/1e3)},t.prototype.lineHeight=function(t,e){var n;return null==e&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},t}();var ir,or=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(t){var e,n,r;for(r=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,n,r,i,o,a,s;return t=this.readByte(),e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^o)+256*(255^a)+(255^s)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*r+16777216*i+65536*o+256*a+s},t.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},t.prototype.write=function(t){var e,n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(this.writeByte(e));return i},t}(),ar=function(){var t;function e(t){var e,n,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var n,r,i,o,a,s,u,l,c,h,d,A,f;for(f in d=Object.keys(e).length,s=Math.log(2),c=16*Math.floor(Math.log(d)/s),o=Math.floor(c/s),l=16*d-c,(r=new or).writeInt(this.scalarType),r.writeShort(d),r.writeShort(c),r.writeShort(o),r.writeShort(l),i=16*d,u=r.pos+i,a=null,A=[],e)for(h=e[f],r.writeString(f),r.writeInt(t(h)),r.writeInt(u),r.writeInt(h.length),A=A.concat(h),"head"===f&&(a=u),u+=h.length;u%4;)A.push(0),u++;return r.write(A),n=2981146554-t(r.data),r.pos=a+8,r.writeUInt32(n),r.data},t=function(t){var e,n,r,i;for(t=yr.call(t);t.length%4;)t.push(0);for(r=new or(t),n=0,e=0,i=t.length;e<i;e=e+=4)n+=r.readUInt32();return 4294967295&n},e}(),sr={}.hasOwnProperty,ur=function(t,e){for(var n in e)sr.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ir=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var lr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new or).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),cr=function(){function t(t,e){var n,r,i,o,a,s,u,l,c,h,d,A,f,p,g,v,m;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),c=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=t.readByte();break;case 4:for(d=t.readUInt16(),h=d/2,t.pos+=6,i=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,f=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),u=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],s=e=0;0<=h?e<h:e>h;s=0<=h?++e:--e)n.push(t.readUInt16());return n}(),r=(this.length-t.pos+this.offset)/2,a=function(){var e,n;for(n=[],s=e=0;0<=r?e<r:e>r;s=0<=r?++e:--e)n.push(t.readUInt16());return n}(),s=g=0,m=i.length;g<m;s=++g)for(p=i[s],n=v=A=f[s];A<=p?v<=p:v>=p;n=A<=p?++v:--v)0===l[s]?o=n+u[s]:0!==(o=a[l[s]/2+(n-A)-(h-s)]||0)&&(o+=u[s]),this.codeMap[n]=65535&o}t.pos=c}return t.encode=function(t,e){var n,r,i,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y,b,w,x,_,T,E,S,M,C,I,N,B,k,P,D,L,O,R,F,U,j,z,H,Q,G,V,W,Y;switch(I=new or,o=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(f=0,p=function(){var t=[];for(A=0;A<256;++A)t.push(0);return t}(),v={0:0},i={},N=0,D=o.length;N<D;N++)null==v[G=t[r=o[N]]]&&(v[G]=++f),i[r]={old:t[r],new:v[t[r]]},p[r]=v[t[r]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(p),{charMap:i,subtable:I.data,maxGlyphID:f+1};case"unicode":for(M=[],c=[],m=0,v={},n={},g=u=null,B=0,L=o.length;B<L;B++)null==v[b=t[r=o[B]]]&&(v[b]=++m),n[r]={old:b,new:v[b]},a=v[b]-r,null!=g&&a===u||(g&&c.push(g),M.push(r),u=a),g=r;for(g&&c.push(g),c.push(65535),M.push(65535),E=2*(T=M.length),_=2*Math.pow(Math.log(T)/Math.LN2,2),h=Math.log(_/2)/Math.LN2,x=2*T-_,s=[],w=[],d=[],A=k=0,O=M.length;k<O;A=++k){if(S=M[A],l=c[A],65535===S){s.push(0),w.push(0);break}if(S-(C=n[S].new)>=32768)for(s.push(0),w.push(2*(d.length+T-A)),r=P=S;S<=l?P<=l:P>=l;r=S<=l?++P:--P)d.push(n[r].new);else s.push(C-S),w.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*T+2*d.length),I.writeUInt16(0),I.writeUInt16(E),I.writeUInt16(_),I.writeUInt16(h),I.writeUInt16(x),H=0,R=c.length;H<R;H++)r=c[H],I.writeUInt16(r);for(I.writeUInt16(0),Q=0,F=M.length;Q<F;Q++)r=M[Q],I.writeUInt16(r);for(V=0,U=s.length;V<U;V++)a=s[V],I.writeUInt16(a);for(W=0,j=w.length;W<j;W++)y=w[W],I.writeUInt16(y);for(Y=0,z=d.length;Y<z;Y++)f=d[Y],I.writeUInt16(f);return{charMap:n,subtable:I.data,maxGlyphID:m+1}}},t}(),hr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,n,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)e=new cr(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var n,r;return null==e&&(e="macroman"),n=cr.encode(t,e),(r=new or).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),dr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Ar=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),fr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="post",e.prototype.parse=function(t){var e,n,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)e=t.readByte(),r.push(this.names.push(t.readString(e)));return r;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=function(){var e,n,r;for(r=[],i=e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:e>n;i=0<=n?++e:--e)r.push(t.readUInt32());return r}.call(this)}},e}(),pr=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},gr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="name",e.prototype.parse=function(t){var e,n,r,i,o,a,s,u,l,c,h;for(t.pos=this.offset,t.readShort(),e=t.readShort(),a=t.readShort(),n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(s={},i=l=0,c=n.length;l<c;i=++l)r=n[i],t.pos=r.offset,u=t.readString(r.length),o=new pr(u,r),null==s[h=r.nameID]&&(s[h]=[]),s[r.nameID].push(o);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),vr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),mr=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,n,r,i,o,a,s;for(t.pos=this.offset,this.metrics=[],e=0,a=this.file.hhea.numberOfMetrics;0<=a?e<a:e>a;e=0<=a?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],e=n=0;0<=r?n<r:n>r;e=0<=r?++n:--n)i.push(t.readInt16());return i}(),this.widths=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.metrics).length;t<e;t++)i=n[t],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],s=[],e=o=0;0<=r?o<r:o>r;e=0<=r?++o:--o)s.push(this.widths.push(n));return s},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),yr=[].slice,br=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var e,n,r,i,o,a,s,u,l,c;return t in this.cache?this.cache[t]:(i=this.file.loca,e=this.file.contents,n=i.indexOf(t),0===(r=i.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+n,o=(a=new or(e.read(r))).readShort(),u=a.readShort(),c=a.readShort(),s=a.readShort(),l=a.readShort(),this.cache[t]=-1===o?new xr(a,u,c,s,l):new wr(a,o,u,c,s,l),this.cache[t]))},e.prototype.encode=function(t,e,n){var r,i,o,a,s;for(o=[],i=[],a=0,s=e.length;a<s;a++)r=t[e[a]],i.push(o.length),r&&(o=o.concat(r.encode(n)));return i.push(o.length),{table:o,offsets:i}},e}(),wr=function(){function t(t,e,n,r,i,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),xr=function(){function t(t,e,n,r,i){var o,a;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var t,e,n;for(e=new or(yr.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),_r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ur(e,ir),e.prototype.tag="loca",e.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?function(){var e,r;for(r=[],n=0,e=this.length;n<e;n+=2)r.push(2*t.readUInt16());return r}.call(this):function(){var e,r;for(r=[],n=0,e=this.length;n<e;n+=4)r.push(t.readUInt32());return r}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,o=0;o<n.length;++o)if(n[o]=r,i<e.length&&e[i]==o){++i,n[o]=r;var a=this.offsets[o],s=this.offsets[o+1]-a;s>0&&(r+=s)}for(var u=new Array(4*n.length),l=0;l<n.length;++l)u[4*l+3]=255&n[l],u[4*l+2]=(65280&n[l])>>8,u[4*l+1]=(16711680&n[l])>>16,u[4*l]=(4278190080&n[l])>>24;return u},e}(),Tr=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,n,r,i;for(e in r=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[e],t[e]=r[n];return t},t.prototype.glyphsFor=function(t){var e,n,r,i,o,a,s;for(r={},o=0,a=t.length;o<a;o++)r[i=t[o]]=this.font.glyf.glyphFor(i);for(i in e=[],r)null!=(n=r[i])&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(i in s=this.glyphsFor(e))n=s[i],r[i]=n;return r},t.prototype.encode=function(t,e){var n,r,i,o,a,s,u,l,c,h,d,A,f,p,g;for(r in n=hr.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),d={0:0},g=n.charMap)d[(s=g[r]).old]=s.new;for(A in h=n.maxGlyphID,o)A in d||(d[A]=h++);return l=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(d),c=Object.keys(l).sort((function(t,e){return t-e})),f=function(){var t,e,n;for(n=[],t=0,e=c.length;t<e;t++)a=c[t],n.push(l[a]);return n}(),i=this.font.glyf.encode(o,f,d),u=this.font.loca.encode(i.offsets,f),p={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},t}();Fe.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(n){var r,i,o,a;if(Array.isArray(n))return"["+function(){var t,i,o;for(o=[],t=0,i=n.length;t<i;t++)r=n[t],o.push(e.convert(r));return o}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in o=["<<"],n)a=n[i],o.push("/"+i+" "+e.convert(a));return o.push(">>"),o.join("\n")}return""+n},e}();var Er="undefined"!=typeof window,Sr=Er&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),Mr=Er&&"IntersectionObserver"in window,Cr=Er&&"classList"in document.createElement("p"),Ir=Er&&window.devicePixelRatio>1,Nr={elements_selector:".lazy",container:Sr||Er?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},Br=function(t){return Object.assign({},Nr,t)},kr=function(t,e){var n,r="LazyLoad::Initialized",i=new t(e);try{n=new CustomEvent(r,{detail:{instance:i}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,{instance:i})}window.dispatchEvent(n)},Pr="src",Dr="srcset",Lr="sizes",Or="poster",Rr="llOriginalAttrs",Fr="data",Ur="loading",jr="loaded",zr="applied",Hr="error",Qr="native",Gr="data-",Vr="ll-status",Wr=function(t,e){return t.getAttribute(Gr+e)},Yr=function(t){return Wr(t,Vr)},Xr=function(t,e){return function(t,e,n){var r=Gr+e;null!==n?t.setAttribute(r,n):t.removeAttribute(r)}(t,Vr,e)},qr=function(t){return Xr(t,null)},Kr=function(t){return null===Yr(t)},Zr=function(t){return Yr(t)===Qr},Jr=[Ur,jr,zr,Hr],$r=function(t,e,n,r){if(t){if(void 0!==r)return void t(e,n,r);if(void 0!==n)return void t(e,n);t(e)}},ti=function(t,e){Cr?t.classList.add(e):t.className+=(t.className?" ":"")+e},ei=function(t,e){Cr?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},ni=function(t){return t.llTempImage},ri=function(t,e){if(e){var n=e._observer;!n||n.unobserve(t)}},ii=function(t,e){!t||(t.loadingCount+=e)},oi=function(t,e){!t||(t.toLoadCount=e)},ai=function(t){for(var e,n=[],r=0;e=t.children[r];r+=1)"SOURCE"===e.tagName&&n.push(e);return n},si=function(t,e){var n=t.parentNode;n&&"PICTURE"===n.tagName&&ai(n).forEach(e)},ui=function(t,e){ai(t).forEach(e)},li=[Pr],ci=[Pr,Or],hi=[Pr,Dr,Lr],di=[Fr],Ai=function(t){return!!t[Rr]},fi=function(t){return t[Rr]},pi=function(t){return delete t[Rr]},gi=function(t,e){if(!Ai(t)){var n={};e.forEach((function(e){n[e]=t.getAttribute(e)})),t[Rr]=n}},vi=function(t,e){if(Ai(t)){var n=fi(t);e.forEach((function(e){!function(t,e,n){n?t.setAttribute(e,n):t.removeAttribute(e)}(t,e,n[e])}))}},mi=function(t,e,n){ti(t,e.class_applied),Xr(t,zr),n&&(e.unobserve_completed&&ri(t,e),$r(e.callback_applied,t,n))},yi=function(t,e,n){ti(t,e.class_loading),Xr(t,Ur),n&&(ii(n,1),$r(e.callback_loading,t,n))},bi=function(t,e,n){!n||t.setAttribute(e,n)},wi=function(t,e){bi(t,Lr,Wr(t,e.data_sizes)),bi(t,Dr,Wr(t,e.data_srcset)),bi(t,Pr,Wr(t,e.data_src))},xi={IMG:function(t,e){si(t,(function(t){gi(t,hi),wi(t,e)})),gi(t,hi),wi(t,e)},IFRAME:function(t,e){gi(t,li),bi(t,Pr,Wr(t,e.data_src))},VIDEO:function(t,e){ui(t,(function(t){gi(t,li),bi(t,Pr,Wr(t,e.data_src))})),gi(t,ci),bi(t,Or,Wr(t,e.data_poster)),bi(t,Pr,Wr(t,e.data_src)),t.load()},OBJECT:function(t,e){gi(t,di),bi(t,Fr,Wr(t,e.data_src))}},_i=["IMG","IFRAME","VIDEO","OBJECT"],Ti=function(t,e){e&&!function(t){return t.loadingCount>0}(e)&&!function(t){return t.toLoadCount>0}(e)&&$r(t.callback_finish,e)},Ei=function(t,e,n){t.addEventListener(e,n),t.llEvLisnrs[e]=n},Si=function(t,e,n){t.removeEventListener(e,n)},Mi=function(t){return!!t.llEvLisnrs},Ci=function(t){if(Mi(t)){var e=t.llEvLisnrs;for(var n in e){var r=e[n];Si(t,n,r)}delete t.llEvLisnrs}},Ii=function(t,e,n){(function(t){delete t.llTempImage})(t),ii(n,-1),function(t){!t||(t.toLoadCount-=1)}(n),ei(t,e.class_loading),e.unobserve_completed&&ri(t,n)},Ni=function(t,e,n){var r=ni(t)||t;Mi(r)||function(t,e,n){Mi(t)||(t.llEvLisnrs={});var r="VIDEO"===t.tagName?"loadeddata":"load";Ei(t,r,e),Ei(t,"error",n)}(r,(function(i){(function(t,e,n,r){var i=Zr(e);Ii(e,n,r),ti(e,n.class_loaded),Xr(e,jr),$r(n.callback_loaded,e,r),i||Ti(n,r)})(0,t,e,n),Ci(r)}),(function(i){(function(t,e,n,r){var i=Zr(e);Ii(e,n,r),ti(e,n.class_error),Xr(e,Hr),$r(n.callback_error,e,r),n.restore_on_error&&vi(e,hi),i||Ti(n,r)})(0,t,e,n),Ci(r)}))},Bi=function(t,e,n){(function(t){t.llTempImage=document.createElement("IMG")})(t),Ni(t,e,n),function(t){Ai(t)||(t[Rr]={backgroundImage:t.style.backgroundImage})}(t),function(t,e,n){var r=Wr(t,e.data_bg),i=Wr(t,e.data_bg_hidpi),o=Ir&&i?i:r;!o||(t.style.backgroundImage='url("'.concat(o,'")'),ni(t).setAttribute(Pr,o),yi(t,e,n))}(t,e,n),function(t,e,n){var r=Wr(t,e.data_bg_multi),i=Wr(t,e.data_bg_multi_hidpi),o=Ir&&i?i:r;!o||(t.style.backgroundImage=o,mi(t,e,n))}(t,e,n),function(t,e,n){var r=Wr(t,e.data_bg_set);if(r){var i=r.split("|"),o=i.map((function(t){return"image-set(".concat(t,")")}));t.style.backgroundImage=o.join(),""===t.style.backgroundImage&&(o=i.map((function(t){return"-webkit-image-set(".concat(t,")")})),t.style.backgroundImage=o.join()),mi(t,e,n)}}(t,e,n)},ki=function(t,e,n){Ni(t,e,n),function(t,e,n){var r=xi[t.tagName];!r||(r(t,e),yi(t,e,n))}(t,e,n)},Pi=function(t,e,n){!function(t){return _i.indexOf(t.tagName)>-1}(t)?Bi(t,e,n):ki(t,e,n)},Di=function(t,e,n){t.setAttribute("loading","lazy"),Ni(t,e,n),function(t,e){var n=xi[t.tagName];!n||n(t,e)}(t,e),Xr(t,Qr)},Li=function(t){t.removeAttribute(Pr),t.removeAttribute(Dr),t.removeAttribute(Lr)},Oi=function(t){si(t,(function(t){vi(t,hi)})),vi(t,hi)},Ri={IMG:Oi,IFRAME:function(t){vi(t,li)},VIDEO:function(t){ui(t,(function(t){vi(t,li)})),vi(t,ci),t.load()},OBJECT:function(t){vi(t,di)}},Fi=function(t){var e=Ri[t.tagName];e?e(t):function(t){if(Ai(t)){var e=fi(t);t.style.backgroundImage=e.backgroundImage}}(t)},Ui=function(t,e){Fi(t),function(t,e){Kr(t)||Zr(t)||(ei(t,e.class_entered),ei(t,e.class_exited),ei(t,e.class_applied),ei(t,e.class_loading),ei(t,e.class_loaded),ei(t,e.class_error))}(t,e),qr(t),pi(t)},ji=function(t,e,n,r){!n.cancel_on_exit||!function(t){return Yr(t)===Ur}(t)||"IMG"===t.tagName&&(Ci(t),function(t){si(t,(function(t){Li(t)})),Li(t)}(t),Oi(t),ei(t,n.class_loading),ii(r,-1),qr(t),$r(n.callback_cancel,t,e,r))},zi=function(t,e,n,r){var i=function(t){return Jr.indexOf(Yr(t))>=0}(t);Xr(t,"entered"),ti(t,n.class_entered),ei(t,n.class_exited),function(t,e,n){e.unobserve_entered&&ri(t,n)}(t,n,r),$r(n.callback_enter,t,e,r),!i&&Pi(t,n,r)},Hi=["IMG","IFRAME","VIDEO"],Qi=function(t){return t.use_native&&"loading"in HTMLImageElement.prototype},Gi=function(t,e,n){t.forEach((function(t){return function(t){return t.isIntersecting||t.intersectionRatio>0}(t)?zi(t.target,t,e,n):function(t,e,n,r){Kr(t)||(ti(t,n.class_exited),ji(t,e,n,r),$r(n.callback_exit,t,e,r))}(t.target,t,e,n)}))},Vi=function(t,e){!Mr||Qi(t)||(e._observer=new IntersectionObserver((function(n){Gi(n,t,e)}),function(t){return{root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}}(t)))},Wi=function(t){return Array.prototype.slice.call(t)},Yi=function(t){return t.container.querySelectorAll(t.elements_selector)},Xi=function(t){return function(t){return Yr(t)===Hr}(t)},qi=function(t,e){return function(t){return Wi(t).filter(Kr)}(t||Yi(e))},Ki=function(t,e){(function(t){return Wi(t).filter(Xi)})(Yi(t)).forEach((function(e){ei(e,t.class_error),qr(e)})),e.update()},Zi=function(t,e){var n=Br(t);this._settings=n,this.loadingCount=0,Vi(n,this),function(t,e){!Er||(e._onlineHandler=function(){Ki(t,e)},window.addEventListener("online",e._onlineHandler))}(n,this),this.update(e)};Zi.prototype={update:function(t){var e=this._settings,n=qi(t,e);oi(this,n.length),!Sr&&Mr?Qi(e)?function(t,e,n){t.forEach((function(t){-1!==Hi.indexOf(t.tagName)&&Di(t,e,n)})),oi(n,0)}(n,e,this):function(t,e){(function(t){t.disconnect()})(t),function(t,e){e.forEach((function(e){t.observe(e)}))}(t,e)}(this._observer,n):this.loadAll(n)},destroy:function(){this._observer&&this._observer.disconnect(),function(t){!Er||window.removeEventListener("online",t._onlineHandler)}(this),Yi(this._settings).forEach((function(t){pi(t)})),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var e=this,n=this._settings;qi(t,n).forEach((function(t){ri(t,e),Pi(t,n,e)}))},restoreAll:function(){var t=this._settings;Yi(t).forEach((function(e){Ui(e,t)}))}},Zi.load=function(t,e){var n=Br(e);Pi(t,n)},Zi.resetStatus=function(t){qr(t)},Er&&function(t,e){if(e)if(e.length)for(var n,r=0;n=e[r];r+=1)kr(t,n);else kr(t,e)}(Zi,window.lazyLoadOptions);var Ji=function(){function t(e){var n=this,r=e.readonly,i=e.onNewPageIndex,o=e.onPlay;b(this,t),this._pages=[],this.pageIndex=0,this.setPaused=function(){n.$btnPlay.classList.toggle(n.wrapClassName("footer-btn-playing"),!1)},this.setPlaying=function(){n.$btnPlay.classList.toggle(n.wrapClassName("footer-btn-playing"),!0)},this.namespace="netless-app-slide",this.isShowPreview=!1,this.isSmallBox=!1,this.sideEffect=new z,this.readonly=r,this.onNewPageIndex=i,this.onPlay=o,this.render()}return x(t,[{key:"unmount",value:function(){this.$content.remove(),this.$footer.remove()}},{key:"setReadonly",value:function(t){this.readonly=t,this.$content.classList.toggle(this.wrapClassName("readonly"),t),this.$footer.classList.toggle(this.wrapClassName("readonly"),t),this.$pageNumberInput.disabled=t}},{key:"destroy",value:function(){var t;null==(t=this.previewLazyLoad)||t.destroy(),this.sideEffect.flushAll(),this.unmount()}},{key:"setPageIndex",value:function(t){Number.isNaN(t)||(this.pageIndex=t,this.$pageNumberInput.value=String(t+1))}},{key:"refreshTotalPage",value:function(){this.pages.length?this.$totalPage.textContent=" / "+this.pages.length:this.$totalPage.textContent=""}},{key:"setSmallBox",value:function(t){this.isSmallBox!==t&&(this.isSmallBox=t,this.$footer.classList.toggle(this.wrapClassName("float-footer"),t))}},{key:"render",value:function(){return this.renderContent(),this.renderFooter(),this.$content}},{key:"renderContent",value:function(){if(!this.$content){var t=document.createElement("div");t.className=this.wrapClassName("content"),this.$content=t,this.readonly&&t.classList.add(this.wrapClassName("readonly")),t.appendChild(this.renderPreviewMask()),t.appendChild(this.renderPreview())}return this.$content}},{key:"renderPreview",value:function(){var t=this;if(!this.$preview){var e=document.createElement("div");e.className=this.wrapClassName("preview")+" tele-fancy-scrollbar",this.$preview=e,this.refreshPreview(),this.sideEffect.addEventListener(e,"click",(function(e){var n;if(!t.readonly){var r=null==(n=e.target.dataset)?void 0:n.pageIndex;r&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.onNewPageIndex(Number(r)),t.togglePreview(!1))}}))}return this.$preview}},{key:"refreshPreview",value:function(){for(var t,e=this,n=this.$preview,r=this.wrapClassName("preview-page"),i=this.wrapClassName("preview-page-name");n.firstChild;)n.firstChild.remove();this.pages.forEach((function(t,o){var a,s=null!=(a=t.thumbnail)?a:t.src.startsWith("ppt")?void 0:t.src;if(s){var u=String(o),l=document.createElement("a");l.className=r+" "+e.wrapClassName("preview-page-".concat(o)),l.setAttribute("href","#"),l.dataset.pageIndex=u;var c=document.createElement("span");c.className=i,c.textContent=String(o+1),c.dataset.pageIndex=u;var h=document.createElement("img");h.width=t.width,h.height=t.height,h.dataset.src=s,h.dataset.pageIndex=u,l.appendChild(h),l.appendChild(c),n.appendChild(l)}})),null==(t=this.previewLazyLoad)||t.update()}},{key:"renderPreviewMask",value:function(){var t=this;return this.$previewMask||(this.$previewMask=document.createElement("div"),this.$previewMask.className=this.wrapClassName("preview-mask"),this.sideEffect.addEventListener(this.$previewMask,"click",(function(e){t.readonly||e.target===t.$previewMask&&t.togglePreview(!1)}))),this.$previewMask}},{key:"refreshBtnSidebar",value:function(){this.$btnSidebar.style.display=this.pages.length>0?"":"none"}},{key:"renderFooter",value:function(){var t=this;if(!this.$footer){var e=document.createElement("div");e.className=this.wrapClassName("footer"),this.$footer=e,this.readonly&&e.classList.add(this.wrapClassName("readonly")),this.isSmallBox&&e.classList.add(this.wrapClassName("float-footer"));var n=this.renderFooterBtn("btn-sidebar",function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-sidebar")),n.setAttribute("viewBox","0 0 64 64");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z"),n.appendChild(r),n}(this.namespace));this.sideEffect.addEventListener(n,"click",(function(){t.readonly||t.togglePreview()})),this.$btnSidebar=n,this.$btnSidebar.style.display="none",this.$footer.appendChild(n);var r=document.createElement("div");r.className=this.wrapClassName("page-jumps");var i=this.renderFooterBtn("btn-page-back",function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-arrow-left")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z"),n.appendChild(r),n}(this.namespace));if(this.sideEffect.addEventListener(i,"click",(function(){t.readonly||t.onNewPageIndex(t.pageIndex-1)})),r.appendChild(i),this.onPlay){var o=this.renderFooterBtn("btn-page-play",function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-play")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z"),n.appendChild(r),n}(this.namespace),function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-pause")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z"),n.appendChild(r),n}(this.namespace));this.$btnPlay=o,this.sideEffect.addEventListener(o,"click",(function(){t.readonly||(t.setPlaying(),t.onPlay&&t.onPlay())})),r.appendChild(o)}var a=this.renderFooterBtn("btn-page-next",function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-arrow-right")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z"),n.appendChild(r),n}(this.namespace));this.sideEffect.addEventListener(a,"click",(function(){t.readonly||t.onNewPageIndex(t.pageIndex+1)})),r.appendChild(a);var s=document.createElement("div");s.className=this.wrapClassName("page-number");var u=document.createElement("input");u.className=this.wrapClassName("page-number-input"),u.value=String(this.pageIndex+1),this.readonly&&(u.disabled=!0),this.$pageNumberInput=u,this.sideEffect.addEventListener(u,"focus",(function(){u.select()})),this.sideEffect.addEventListener(u,"change",(function(){t.readonly||u.value&&t.onNewPageIndex(Number(u.value)-1)}));var l=document.createElement("span");this.$totalPage=l,s.appendChild(u),s.appendChild(l),this.$footer.appendChild(r),this.$footer.appendChild(s)}return this.$footer}},{key:"renderFooterBtn",value:function(t,e,n){var r=document.createElement("button");return r.className=this.wrapClassName("footer-btn")+" "+this.wrapClassName(t),r.appendChild(e),n&&r.appendChild(n),r}},{key:"togglePreview",value:function(t){if(this.isShowPreview=null!=t?t:!this.isShowPreview,this.$content.classList.toggle(this.wrapClassName("preview-active"),this.isShowPreview),this.isShowPreview){var e=this.$preview.querySelector("."+this.wrapClassName("preview-page-".concat(this.pageIndex)));e&&(this.previewLazyLoad||(this.previewLazyLoad=new Zi({container:this.$preview,elements_selector:".".concat(this.wrapClassName("preview-page>img"))})),this.$preview.scrollTo({top:e.offsetTop-16}))}}},{key:"wrapClassName",value:function(t){return"".concat(this.namespace,"-").concat(t)}},{key:"pages",set:function(t){this._pages=t,this.refreshPreview(),this.refreshTotalPage(),this.refreshBtnSidebar()},get:function(){return this._pages}}]),t}(),$i=new Set(["clicker"]),to=function(){function t(e){var n=this,r=e.box,i=e.view,o=e.mountSlideController,a=e.mountWhiteboard,s=e.baseScenePath,l=e.appId;b(this,t),this.slideController=null,this.isViewMounted=!1,this.onError=function(t){var e,r,i=t.error,o=t.index;n.viewer.setPaused(),null!=(e=n.slideController)&&e.showRenderError&&(n.$overlay.textContent="Error on slide[page=".concat(n.slideController.page,"]: ").concat(i.message),n.$overlay.style.opacity="1"),null!=(r=n.slideController)&&r.onRenderError&&n.slideController.onRenderError(i,o),at.warn("[Slide] render error",i)},this.onRenderEnd=function(){n.$overlay.style.opacity=""},this.refreshPages=function(){n.slideController&&(n.viewer.pages=dt(n.slideController.slide),n.viewer.setPageIndex(n.getPageIndex(n.slideController.page)),n.scaleDocsToFit())},this.scaleDocsToFit=function(){if(n.slideController){var t=n.slideController.slide,e=t.width,r=t.height;e&&r&&(n.whiteboardView.moveCameraToContain({originX:-e/2,originY:-r/2,width:e,height:r,animationMode:"immediately"}),n.whiteboardView.setCameraBound({damping:1,maxContentMode:function(){return n.whiteboardView.camera.scale},minContentMode:function(){return n.whiteboardView.camera.scale},centerX:0,centerY:0,width:e,height:r}),n.isViewMounted||(n.isViewMounted=!0,console.log("[Slide] mount whiteboard view"),n.mountWhiteboard(n.$whiteboardView)))}},this.onPlay=function(){n.slideController&&n.slideController.slide.nextStep()},this.onNewPageIndex=function(t){n.slideController&&n.slideController.jumpToPage(t+1)},this.sideEffect=new z,this.namespace="netless-app-slide",this.toPdf=u(regeneratorRuntime.mark((function t(){var e,r,i,o,a,s,u,l,c,h,d,A,f,p,g,v,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.slideController){t.next=3;break}return n.reportProgress(100,null),t.abrupt("return");case 3:if(e=n.slideController.slide,r=1920,i=document.createElement("canvas"),o=i.getContext("2d"),a=e.slideCount,s=e.width,u=e.height,l=Math.floor(s),c=Math.floor(u),l>r&&(l=r,c=Math.floor(u*l/s)),c>r&&(c=r,l=Math.floor(s*c/u)),i.width=l,i.height=c,(h=document.createElement("canvas")).width=s,h.height=u,(d=h.getContext("2d"))&&n.getWhiteSnapshot&&o){t.next=11;break}return t.abrupt("return",(n.reportProgress(100,null),null));case 11:A=new Fe({format:[l,c],orientation:l>c?"l":"p",compress:!0}),f=1;case 13:if(!(f<=a)){t.next=37;break}return p=null,t.prev=15,t.next=18,n.slideController.slide.snapshotWithTimingEnd(f);case 18:p=t.sent,t.next=23;break;case 21:t.prev=21,t.t0=t.catch(15);case 23:if(!p){t.next=25;break}return t.delegateYield(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=document.createElement("img")).src=p,t.next=4,new Promise((function(t){return e.onload=t}));case 4:o.drawImage(e,0,0,l,c);case 5:case"end":return t.stop()}}),t)}))(),"t1",25);case 25:return d.clearRect(0,0,s,u),n.getWhiteSnapshot(f,h,d),t.prev=26,t.delegateYield(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.toDataURL("image/png"),(n=document.createElement("img")).src=e,t.next=4,new Promise((function(t){return n.onload=t}));case 4:o.drawImage(n,0,0,l,c);case 5:case"end":return t.stop()}}),t)}))(),"t2",28);case 28:t.next=32;break;case 30:t.prev=30,t.t3=t.catch(26);case 32:g=i.toDataURL("image/jpeg",.6),f>1&&A.addPage(),A.addImage(g,"JPEG",0,0,l,c,"","FAST"),o.clearRect(0,0,l,c),Math.ceil(f/a*100)<100&&n.reportProgress(Math.ceil(f/a*100),null);case 34:f++,t.next=13;break;case 37:v=A.output("arraybuffer"),m=n.box.title,n.reportProgress(100,{pdf:v,title:m});case 39:case"end":return t.stop()}}),t,null,[[15,21],[26,30]])}))),this.box=r,this.whiteboardView=i,this.mountSlideController=o,this.mountWhiteboard=a,this.baseScenePath=s,this.appId=l,this.viewer=new Ji({readonly:r.readonly,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlay}),this.sideEffect.add((function(){var t=function(t){n.setReadonly(t)};return r.events.on("readonly",t),function(){return r.events.off("readonly",t)}})),this.sideEffect.add((function(){var t=function(t){"@netless/_request_save_pdf_"===t.data.type&&t.data.appId===n.appId&&n.toPdf().catch((function(){return n.reportProgress(100,null)}))};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}})),this.render()}return x(t,[{key:"render",value:function(){var t=this;this.viewer.$content.appendChild(this.renderSlideContainer()),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.viewer.$content.appendChild(this.renderOverlay()),this.sideEffect.addEventListener(window,"keydown",(function(e){if(t.box.focus&&t.slideController)switch(e.key){case"ArrowUp":case"ArrowLeft":t.slideController.slide.prevStep();break;case"ArrowRight":case"ArrowDown":t.slideController.slide.nextStep()}}))}},{key:"renderOverlay",value:function(){if(!this.$overlay){var t=document.createElement("div");t.className=this.wrapClassName("overlay"),this.$overlay=t}return this.$overlay}},{key:"renderSlideContainer",value:function(){if(!this.$slide){var t=document.createElement("div");t.className=this.wrapClassName("slide"),t.dataset.appKind="Slide",this.$slide=t}return this.$slide}},{key:"renderWhiteboardView",value:function(){return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view")),this.$whiteboardView}},{key:"mount",value:function(){var t=this;return this.box.mountContent(this.viewer.$content),this.box.mountFooter(this.viewer.$footer),this.slideController=this.mountSlideController({anchor:this.$slide,onRenderEnd:this.onRenderEnd,onTransitionStart:this.viewer.setPlaying,onTransitionEnd:this.viewer.setPaused,onReady:this.refreshPages,onError:this.onError}),this.scaleDocsToFit(),this.sideEffect.add((function(){return t.whiteboardView.callbacks.on("onSizeUpdated",t.scaleDocsToFit),function(){return t.whiteboardView.callbacks.off("onSizeUpdated",t.scaleDocsToFit)}})),this}},{key:"getPageIndex",value:function(t){return(t>0?t:1)-1}},{key:"unmount",value:function(){return this.slideController&&(this.slideController.destroy(),this.slideController=null),this.viewer.unmount(),this}},{key:"setReadonly",value:function(t){this.viewer.setReadonly(t)}},{key:"destroy",value:function(){this.sideEffect.flushAll(),this.unmount(),this.viewer.destroy()}},{key:"toggleClickThrough",value:function(t){this.$whiteboardView.style.pointerEvents=!t||$i.has(t)?"none":"auto"}},{key:"wrapClassName",value:function(t){return"".concat(this.namespace,"-").concat(t)}},{key:"getWhiteSnapshot",value:function(t,e,n){var r=this.whiteboardView.size,i=r.width,o=r.height;e.width=i,e.height=o,this.whiteboardView.screenshotToCanvas(n,"".concat(this.baseScenePath,"/").concat(t),i,o,{centerX:0,centerY:0,scale:this.whiteboardView.camera.scale})}},{key:"reportProgress",value:function(t,e){window.postMessage({type:"@netless/_result_save_pdf_",appId:this.appId,progress:t,result:e})}}]),t}(),eo=!1;e.FreezerLength=2;var no=function(t){return"["+t+"]"},ro={map:new Map,boxes:new Map,queue:[],validateQueue:function(){var t=this;for(this.queue.sort((function(e,n){var r,i,o,a;return-((null!=(i=null==(r=t.boxes.get(e))?void 0:r.zIndex)?i:0)-(null!=(a=null==(o=t.boxes.get(n))?void 0:o.zIndex)?a:0))})),st("[Slide] freezer: validate",no(this.queue));this.queue.length>e.FreezerLength;){var n=this.queue.pop(),r=this.map.get(n);r&&(st("[Slide] freezer: validate-freeze",n,no(this.queue)),r.freeze())}},set:function(t,e,n){st("[Slide] freezer: add",t,no(this.queue)),this.map.set(t,e),this.boxes.set(t,n),this.queue.includes(t)||this.queue.unshift(t),this.validateQueue()},delete:function(t){this.map.delete(t),this.boxes.delete(t),this.queue=this.queue.filter((function(e){return e!==t})),st("[Slide] freezer: delete",t,no(this.queue))},focus:function(t){var e=this.map.get(t),n=this.queue.indexOf(t);n>-1&&this.queue.splice(n,1),this.queue.unshift(t),this.validateQueue(),st("[Slide] freezer: focus",t,no(this.queue)),e&&e.unfreeze()}},io=new Set;var oo=new Set;var ao=".netless-app-slide-content{position:relative;height:100%;overflow:hidden}.netless-app-slide-preview-mask{display:none;position:absolute;z-index:200;top:0;left:0;width:100%;height:100%}.netless-app-slide-preview{display:flex;flex-direction:column;align-items:center;position:absolute;z-index:300;top:0;left:0;width:33%;max-width:200px;height:100%;padding-top:10px;transform:translate(-100%);background:rgba(237,237,240,.9);box-shadow:inset -1px 0 #0000001c;transition:transform .4s}.netless-app-slide-preview-active .netless-app-slide-preview-mask{display:block}.netless-app-slide-preview-active .netless-app-slide-preview{transform:translate(0)}.netless-app-slide-preview-page{position:relative;display:block;width:55%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border:7px solid transparent;border-radius:4px;transition:border-color .3s;user-select:none}.netless-app-slide-preview-page:hover,.netless-app-slide-preview-page.netless-app-slide-preview-page-active{border-color:#444e601a}.netless-app-slide-preview-page>img{width:100%;height:auto;box-sizing:border-box;border:1px solid rgba(0,0,0,.5);border-radius:1px;background-color:#fff;box-shadow:0 2px 8px #0000004d}.netless-app-slide-preview-page-name{position:absolute;top:1px;left:-10px;transform:translate(-100%);text-align:right;font-size:12px;color:#5f5f5f;user-select:none}.netless-app-slide-footer{box-sizing:border-box;height:26px;display:flex;align-items:center;padding:0 16px;border-top:1px solid #eeeef7;color:#191919}.netless-app-slide-float-footer{width:100%;min-height:26px;position:absolute;left:0;bottom:0;z-index:2000;background:rgba(249,249,252,.9);transition:opacity .4s}.netless-app-slide-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:1px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-slide-footer-btn:hover{background:rgba(237,237,240,.9)}@media (hover: none){.netless-app-slide-footer-btn:hover{background:transparent!important}}.netless-app-slide-footer-btn>svg{width:100%;height:100%}.netless-app-slide-footer-btn>svg:nth-of-type(2){display:none}.netless-app-slide-footer-btn.netless-app-slide-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-slide-footer-btn.netless-app-slide-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-slide-footer-btn~.netless-app-slide-footer-btn{margin-left:15px}.netless-app-slide-page-jumps{flex:1;display:flex;justify-content:center;align-items:center}.netless-app-slide-page-number{margin-left:auto;font-size:13px;user-select:none;white-space:nowrap;word-break:keep-all}.netless-app-slide-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;background:transparent;transition:background .4s;user-select:text;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-slide-page-number-input:hover,.netless-app-slide-page-number-input:focus,.netless-app-slide-page-number-input:active{background:#fff;box-shadow:#63636333 0 2px 8px}.netless-app-slide-readonly.netless-app-slide-footer{display:none}.telebox-color-scheme-dark .netless-app-slide-page-number-input{color:#a6a6a8}.telebox-color-scheme-dark .netless-app-slide-page-number-input:active,.telebox-color-scheme-dark .netless-app-slide-page-number-input:focus,.telebox-color-scheme-dark .netless-app-slide-page-number-input:hover{color:#222}.telebox-color-scheme-dark .netless-app-slide-footer{color:#a6a6a8;background:#2d2d33;border-top:none}.telebox-color-scheme-dark .netless-app-slide-footer-btn:hover{background:#212126}.telebox-color-scheme-dark .netless-app-slide-preview{background:rgba(50,50,50,.9)}.netless-app-slide-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:hidden}.netless-app-slide-overlay{display:flex;align-items:center;justify-content:center;position:absolute;z-index:200;top:0;left:0;width:100%;height:100%;padding:8px;background:rgba(255,0,0,.25);transition:opacity .3s;opacity:0;pointer-events:none}.netless-app-slide-slide{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.netless-app-slide-slide canvas{transform:scale(var(--netless-app-slide-scale, 1))}\n";var so=function(){function t(e){var n=this;b(this,t),this.slide=null,this.debug=!1,this.sideEffect=new z,this.ready=!1,this.readyPromise=new Promise((function(t){n.resolveReady=function(){n.ready=!0,t()}})),this.hotkeyListener=function(t){if(n.slide)switch(t.key){case"ArrowUp":case"ArrowLeft":n.slide.prevStep();break;case"ArrowRight":case"ArrowDown":n.slide.nextStep()}},this.onPageChanged=function(t){n.viewer.setPageIndex(t-1)},this.onTransitionStart=function(){n.viewer.setPlaying()},this.onTransitionEnd=function(){n.viewer.setPaused()},this.onError=function(t){var e=t.error;n.viewer.setPaused(),console.warn("[Slide] render error",e)},this.destroyed=!1,this.refreshPages=function(){n.slide&&(n.viewer.pages=dt(n.slide),n.viewer.setPageIndex(n.getPageIndex(n.slide.slideState.currentSlideIndex)))},this.onPlay=function(){n.slide&&n.slide.nextStep()},this.onNewPageIndex=function(t){n.slide&&n.slide.slideCount>0&&n.slide.renderSlide(Q(t+1,1,n.slide.slideCount))},this.namespace="netless-app-slide",this.target=e.target,this.bgColor=ht(this.target),this.viewer=new Ji({readonly:!1,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlay}),this.render()}return x(t,[{key:"render",value:function(){this.viewer.$content.appendChild(this.renderSlideContainer()),this.registerHotKeys(window)}},{key:"registerHotKeys",value:function(t){this.sideEffect.addEventListener(t,"keydown",this.hotkeyListener,void 0,"hotkey")}},{key:"mount",value:function(t,e){this.target.appendChild(this.renderStyle()),this.target.appendChild(this.viewer.$content),this.target.appendChild(this.viewer.$footer),this.slide=new R.Slide({anchor:this.$slide,interactive:!0,mode:"local",controller:this.debug,enableGlobalClick:!0,renderOptions:{minFPS:25,maxFPS:30,autoFPS:!0,autoResolution:!0,transactionBgColor:this.bgColor}}),this.registerEventListeners(),this.slide.setResource(t,e),this.slide.renderSlide(1)}},{key:"renderStyle",value:function(){var t=document.createElement("style");return t.appendChild(document.createTextNode(ao)),t}},{key:"registerEventListeners",value:function(){if(this.slide){var t=this.slide;t.on(R.SLIDE_EVENTS.slideChange,this.onPageChanged),t.on(R.SLIDE_EVENTS.renderStart,this.onTransitionStart),t.on(R.SLIDE_EVENTS.renderEnd,this.onTransitionEnd),t.on(R.SLIDE_EVENTS.mainSeqStepStart,this.onTransitionStart),t.on(R.SLIDE_EVENTS.mainSeqStepEnd,this.onTransitionEnd),t.on(R.SLIDE_EVENTS.renderError,this.onError),t.on(R.SLIDE_EVENTS.renderEnd,this.resolveReady),this.readyPromise.then(this.refreshPages)}}},{key:"destroy",value:function(){this.sideEffect.flushAll(),this.slide&&!this.destroyed&&(this.slide.destroy(),this.destroyed=!0),this.viewer.destroy()}},{key:"getPageIndex",value:function(t){return(t>0?t:1)-1}},{key:"renderSlideContainer",value:function(){if(!this.$slide){var t=document.createElement("div");t.className=this.wrapClassName("slide"),t.dataset.appKind="Slide",this.$slide=t}return this.$slide}},{key:"wrapClassName",value:function(t){return"".concat(this.namespace,"-").concat(t)}}]),t}(),uo=R.Slide.usePlugin.bind(R.Slide),lo="0.2.23",co={kind:"Slide",setup:function(t){if(console.log("[Slide] setup @ "+lo),t.getIsWritable()&&t.storage.ensureState(pt),!t.storage.state.taskId)throw new Error("[Slide] no taskId");var e=t.getView();if(!e)throw new Error("[Slide] no view, please set scenePath on addApp()");e.disableCameraTransform=!0;var n=t.getBox();n.mountStyles(ao);try{n.$content.dataset.appSlideVersion=lo}catch(t){}var r=t.getInitScenePath(),i=null,o=function(e){var n=t.getRoom();if(i&&i.slideController){var o=!1;n&&t.getIsWritable()&&(At(n,t,i.slideController.slide,r),o=!0),st("[Slide] page to",e,o?"(synced)":""),i.viewer.setPageIndex(e-1)}};i=new to({box:n,view:e,mountSlideController:function(e){var i=t.getAppOptions()||{},a=new gt(function(t,e){return I(t,N(e))}(L({context:t},e),{onPageChanged:o,onRenderError:i.onRenderError,showRenderError:i.showRenderError}));return eo&&ro.set(t.appId,a,n),at.setAppController(t.appId,a),a.readyPromise.then(e.onReady).then((function(){var n=t.getRoom(),i=!1;n&&t.getIsWritable()&&(At(n,t,a.slide,r),i=!0);var o=a.slide.slideState.currentSlideIndex;st("[Slide] page to",o,i?"(synced)":"","(on ready)"),a.slide.on("renderEnd",e.onRenderEnd)})),a},mountWhiteboard:t.mountView.bind(t),baseScenePath:r,appId:t.appId});var a=t.getRoom(),s=new z;return s.add((function(){var e;return at.setAppContext(t.appId,t),at.enable=(null==(e=t.getAppOptions())?void 0:e.debug)||!1,at.level="debug",function(){return at.deleteApp(t.appId)}})),a&&(i.toggleClickThrough(a.state.memberState.currentApplianceName),s.add((function(){var t=function(t){t.memberState&&i&&i.toggleClickThrough(t.memberState.currentApplianceName)};return a.callbacks.on("onRoomStateChanged",t),function(){return a.callbacks.off("onRoomStateChanged",t)}}))),t.emitter.on("destroy",(function(){st("[Slide] destroy",t.appId),eo&&ro.delete(t.appId),s.flushAll(),i&&(i.destroy(),i=null)})),i.mount(),{viewer:function(){return i},controller:function(){return null==i?void 0:i.slideController},slide:function(){var t;return null==(t=null==i?void 0:i.slideController)?void 0:t.slide},nextStep:function(){var t;return!(!i||!i.slideController)&&(null==(t=null==i?void 0:i.slideController)||t.slide.nextStep(),!0)},prevStep:function(){var t;return!(!i||!i.slideController)&&(null==(t=null==i?void 0:i.slideController)||t.slide.prevStep(),!0)},position:function(){var t=null==i?void 0:i.slideController;if(t)return[t.page,t.pageCount]},nextPage:function(){var t=null==i?void 0:i.slideController;if(t){var e=t.page,n=t.pageCount;if(n>0&&e<n)return t.jumpToPage(e+1),!0}return!1},prevPage:function(){var t=null==i?void 0:i.slideController;if(t){var e=t.page;if(t.pageCount>0&&e>1)return t.jumpToPage(e-1),!0}return!1},jumpToPage:function(t){var e=null==i?void 0:i.slideController;if(e){var n=e.page,r=e.pageCount;if(r>0&&n>0&&n<=r)return e.jumpToPage(t),!0}return!1}}}},ho=function(t,e){return(ho=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ao(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ho(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var fo=function(){return fo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fo.apply(this,arguments)};function po(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function go(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function vo(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}for(var mo=function(){function t(t,e,n,r){this.left=t,this.top=e,this.width=n,this.height=r}return t.prototype.add=function(e,n,r,i){return new t(this.left+e,this.top+n,this.width+r,this.height+i)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find((function(t){return 0!==t.width}));return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),yo=function(t,e){return mo.fromClientRect(t,e.getBoundingClientRect())},bo=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e},wo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var a=t[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},xo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_o="undefined"==typeof Uint8Array?[]:new Uint8Array(256),To=0;To<xo.length;To++)_o[xo.charCodeAt(To)]=To;for(var Eo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",So="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Mo=0;Mo<Eo.length;Mo++)So[Eo.charCodeAt(Mo)]=Mo;for(var Co=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Io=function(){function t(t,e,n,r,i,o){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>5])<<2)+(31&t),this.data[e];if(t<=65535)return e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[e];if(t<this.highStart)return e=2080+(t>>11),e=this.index[e],e+=t>>5&63,e=((e=this.index[e])<<2)+(31&t),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),No="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bo="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ko=0;ko<No.length;ko++)Bo[No.charCodeAt(ko)]=ko;var Po=10,Do=13,Lo=15,Oo=17,Ro=18,Fo=19,Uo=20,jo=21,zo=22,Ho=24,Qo=25,Go=26,Vo=27,Wo=28,Yo=30,Xo=32,qo=33,Ko=34,Zo=35,Jo=37,$o=38,ta=39,ea=40,na=42,ra=[9001,65288],ia="",oa="",aa=function(t,e){var n=function(t){var e,n,r,i,o,a=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),c=Array.isArray(l)?l:new Uint8Array(l);for(e=0;e<s;e+=4)n=So[t.charCodeAt(e)],r=So[t.charCodeAt(e+1)],i=So[t.charCodeAt(e+2)],o=So[t.charCodeAt(e+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&o;return l}(t),r=Array.isArray(n)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n}(n):new Uint32Array(n),i=Array.isArray(n)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n}(n):new Uint16Array(n),o=Co(i,12,r[4]/2),a=2===r[5]?Co(i,(24+r[4])/2):function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))}(r,Math.ceil((24+r[4])/4));return new Io(r[0],r[1],r[2],r[3],o,a)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),sa=[Yo,36],ua=[1,2,3,5],la=[Po,8],ca=[Vo,Go],ha=ua.concat(la),da=[$o,ta,ea,Ko,Zo],Aa=[Lo,Do],fa=function(t,e,n,r){var i=r[n];if(Array.isArray(t)?-1!==t.indexOf(i):t===i)for(var o=n;o<=r.length;){if((u=r[++o])===e)return!0;if(u!==Po)break}if(i===Po)for(o=n;o>0;){var a=r[--o];if(Array.isArray(t)?-1!==t.indexOf(a):t===a)for(var s=n;s<=r.length;){var u;if((u=r[++s])===e)return!0;if(u!==Po)break}if(a!==Po)break}return!1},pa=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r!==Po)return r;n--}return 0},ga=function(t,e,n,r,i){if(0===n[r])return ia;var o=r-1;if(Array.isArray(i)&&!0===i[o])return ia;var a=o-1,s=o+1,u=e[o],l=a>=0?e[a]:0,c=e[s];if(2===u&&3===c)return ia;if(-1!==ua.indexOf(u))return"!";if(-1!==ua.indexOf(c)||-1!==la.indexOf(c))return ia;if(8===pa(o,e))return oa;if(11===aa.get(t[o])||(u===Xo||u===qo)&&11===aa.get(t[s])||7===u||7===c||9===u||-1===[Po,Do,Lo].indexOf(u)&&9===c||-1!==[Oo,Ro,Fo,Ho,Wo].indexOf(c)||pa(o,e)===zo||fa(23,zo,o,e)||fa([Oo,Ro],jo,o,e)||fa(12,12,o,e))return ia;if(u===Po)return oa;if(23===u||23===c)return ia;if(16===c||16===u)return oa;if(-1!==[Do,Lo,jo].indexOf(c)||14===u||36===l&&-1!==Aa.indexOf(u)||u===Wo&&36===c||c===Uo||-1!==sa.indexOf(c)&&u===Qo||-1!==sa.indexOf(u)&&c===Qo||u===Vo&&-1!==[Jo,Xo,qo].indexOf(c)||-1!==[Jo,Xo,qo].indexOf(u)&&c===Go||-1!==sa.indexOf(u)&&-1!==ca.indexOf(c)||-1!==ca.indexOf(u)&&-1!==sa.indexOf(c)||-1!==[Vo,Go].indexOf(u)&&(c===Qo||-1!==[zo,Lo].indexOf(c)&&e[s+1]===Qo)||-1!==[zo,Lo].indexOf(u)&&c===Qo||u===Qo&&-1!==[Qo,Wo,Ho].indexOf(c))return ia;if(-1!==[Qo,Wo,Ho,Oo,Ro].indexOf(c))for(var h=o;h>=0;){if((d=e[h])===Qo)return ia;if(-1===[Wo,Ho].indexOf(d))break;h--}if(-1!==[Vo,Go].indexOf(c))for(h=-1!==[Oo,Ro].indexOf(u)?a:o;h>=0;){var d;if((d=e[h])===Qo)return ia;if(-1===[Wo,Ho].indexOf(d))break;h--}if($o===u&&-1!==[$o,ta,Ko,Zo].indexOf(c)||-1!==[ta,Ko].indexOf(u)&&-1!==[ta,ea].indexOf(c)||-1!==[ea,Zo].indexOf(u)&&c===ea||-1!==da.indexOf(u)&&-1!==[Uo,Go].indexOf(c)||-1!==da.indexOf(c)&&u===Vo||-1!==sa.indexOf(u)&&-1!==sa.indexOf(c)||u===Ho&&-1!==sa.indexOf(c)||-1!==sa.concat(Qo).indexOf(u)&&c===zo&&-1===ra.indexOf(t[s])||-1!==sa.concat(Qo).indexOf(c)&&u===Ro)return ia;if(41===u&&41===c){for(var A=n[o],f=1;A>0&&41===e[--A];)f++;if(f%2!=0)return ia}return u===Xo&&c===qo?ia:oa},va=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=function(t,e){void 0===e&&(e="strict");var n=[],r=[],i=[];return t.forEach((function(t,o){var a=aa.get(t);if(a>50?(i.push(!0),a-=50):i.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return r.push(o),n.push(16);if(4===a||11===a){if(0===o)return r.push(o),n.push(Yo);var s=n[o-1];return-1===ha.indexOf(s)?(r.push(r[o-1]),n.push(s)):(r.push(o),n.push(Yo))}return r.push(o),31===a?n.push("strict"===e?jo:Jo):a===na||29===a?n.push(Yo):43===a?t>=131072&&t<=196605||t>=196608&&t<=262141?n.push(Jo):n.push(Yo):void n.push(a)})),[r,n,i]}(t,e.lineBreak),r=n[0],i=n[1],o=n[2];return("break-all"===e.wordBreak||"break-word"===e.wordBreak)&&(i=i.map((function(t){return-1!==[Qo,Yo,na].indexOf(t)?Jo:t}))),[r,i,"keep-all"===e.wordBreak?o.map((function(e,n){return e&&t[n]>=19968&&t[n]<=40959})):void 0]},ma=function(){function t(t,e,n,r){this.codePoints=t,this.required="!"===e,this.start=n,this.end=r}return t.prototype.slice=function(){return wo.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),ya=45,ba=43,wa=-1,xa=function(t){return t>=48&&t<=57},_a=function(t){return xa(t)||t>=65&&t<=70||t>=97&&t<=102},Ta=function(t){return 10===t||9===t||32===t},Ea=function(t){return function(t){return function(t){return t>=97&&t<=122}(t)||function(t){return t>=65&&t<=90}(t)}(t)||function(t){return t>=128}(t)||95===t},Sa=function(t){return Ea(t)||xa(t)||t===ya},Ma=function(t){return t>=0&&t<=8||11===t||t>=14&&t<=31||127===t},Ca=function(t,e){return 92===t&&10!==e},Ia=function(t,e,n){return t===ya?Ea(e)||Ca(e,n):!!Ea(t)||!(92!==t||!Ca(t,e))},Na=function(t,e,n){return t===ba||t===ya?!!xa(e)||46===e&&xa(n):xa(46===t?e:t)},Ba=function(t){var e=0,n=1;(t[e]===ba||t[e]===ya)&&(t[e]===ya&&(n=-1),e++);for(var r=[];xa(t[e]);)r.push(t[e++]);var i=r.length?parseInt(wo.apply(void 0,r),10):0;46===t[e]&&e++;for(var o=[];xa(t[e]);)o.push(t[e++]);var a=o.length,s=a?parseInt(wo.apply(void 0,o),10):0;(69===t[e]||101===t[e])&&e++;var u=1;(t[e]===ba||t[e]===ya)&&(t[e]===ya&&(u=-1),e++);for(var l=[];xa(t[e]);)l.push(t[e++]);var c=l.length?parseInt(wo.apply(void 0,l),10):0;return n*(i+s*Math.pow(10,-a))*Math.pow(10,u*c)},ka={type:2},Pa={type:3},Da={type:4},La={type:13},Oa={type:8},Ra={type:21},Fa={type:9},Ua={type:10},ja={type:11},za={type:12},Ha={type:14},Qa={type:23},Ga={type:1},Va={type:25},Wa={type:24},Ya={type:26},Xa={type:27},qa={type:28},Ka={type:29},Za={type:31},Ja={type:32},$a=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(bo(t))},t.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==Ja;)t.push(e),e=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(Sa(e)||Ca(n,r)){var i=Ia(e,n,r)?2:1;return{type:5,value:this.consumeName(),flags:i}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),La;break;case 39:return this.consumeStringToken(39);case 40:return ka;case 41:return Pa;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ha;break;case ba:if(Na(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return Da;case ya:var o=t,a=this.peekCodePoint(0),s=this.peekCodePoint(1);if(Na(o,a,s))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Ia(o,a,s))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(a===ya&&62===s)return this.consumeCodePoint(),this.consumeCodePoint(),Wa;break;case 46:if(Na(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(42===u&&47===(u=this.consumeCodePoint()))return this.consumeToken();if(u===wa)return this.consumeToken()}break;case 58:return Ya;case 59:return Xa;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===ya&&this.peekCodePoint(2)===ya)return this.consumeCodePoint(),this.consumeCodePoint(),Va;break;case 64:var l=this.peekCodePoint(0),c=this.peekCodePoint(1),h=this.peekCodePoint(2);if(Ia(l,c,h))return{type:7,value:this.consumeName()};break;case 91:return qa;case 92:if(Ca(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return Ka;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Oa;break;case 123:return ja;case 125:return za;case 117:case 85:var d=this.peekCodePoint(0),A=this.peekCodePoint(1);return d===ba&&(_a(A)||63===A)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Fa;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Ra;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ua;break;case wa:return Ja}return Ta(t)?(this.consumeWhiteSpace(),Za):xa(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):Ea(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:wo(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();_a(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var n=!1;63===e&&t.length<6;)t.push(e),e=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(wo.apply(void 0,t.map((function(t){return 63===t?48:t}))),16),end:parseInt(wo.apply(void 0,t.map((function(t){return 63===t?70:t}))),16)};var r=parseInt(wo.apply(void 0,t),16);if(this.peekCodePoint(0)===ya&&_a(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var i=[];_a(e)&&i.length<6;)i.push(e),e=this.consumeCodePoint();return{type:30,start:r,end:parseInt(wo.apply(void 0,i),16)}}return{type:30,start:r,end:r}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===wa)return{type:22,value:""};var e=this.peekCodePoint(0);if(39===e||34===e){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===wa||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Qa)}for(;;){var r=this.consumeCodePoint();if(r===wa||41===r)return{type:22,value:wo.apply(void 0,t)};if(Ta(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===wa||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:wo.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Qa);if(34===r||39===r||40===r||Ma(r))return this.consumeBadUrlRemnants(),Qa;if(92===r){if(!Ca(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Qa;t.push(this.consumeEscapedCodePoint())}else t.push(r)}},t.prototype.consumeWhiteSpace=function(){for(;Ta(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||t===wa)return;Ca(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var e="";t>0;){var n=Math.min(5e4,t);e+=wo.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),e},t.prototype.consumeStringToken=function(t){for(var e="",n=0;;){var r=this._value[n];if(r===wa||void 0===r||r===t)return{type:0,value:e+=this.consumeStringSlice(n)};if(10===r)return this._value.splice(0,n),Ga;if(92===r){var i=this._value[n+1];i!==wa&&void 0!==i&&(10===i?(e+=this.consumeStringSlice(n),n=-1,this._value.shift()):Ca(r,i)&&(e+=this.consumeStringSlice(n),e+=wo(this.consumeEscapedCodePoint()),n=-1))}n++}},t.prototype.consumeNumber=function(){var t=[],e=4,n=this.peekCodePoint(0);for((n===ba||n===ya)&&t.push(this.consumeCodePoint());xa(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(46===n&&xa(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;xa(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((69===n||101===n)&&((r===ba||r===ya)&&xa(i)||xa(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;xa(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Ba(t),e]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],n=t[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);return Ia(r,i,o)?{type:15,number:e,flags:n,unit:this.consumeName()}:37===r?(this.consumeCodePoint(),{type:16,number:e,flags:n}):{type:17,number:e,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(_a(t)){for(var e=wo(t);_a(this.peekCodePoint(0))&&e.length<6;)e+=wo(this.consumeCodePoint());Ta(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(e,16);return 0===n||function(t){return t>=55296&&t<=57343}(n)||n>1114111?65533:n}return t===wa?65533:t},t.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(Sa(e))t+=wo(e);else{if(!Ca(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=wo(this.consumeEscapedCodePoint())}}},t}(),ts=function(){function t(t){this._tokens=t}return t.create=function(e){var n=new $a;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();31===t.type;)t=this.consumeToken();if(32===t.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do{t=this.consumeToken()}while(31===t.type);if(32===t.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(32===e.type)return t;t.push(e),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},n=this.consumeToken();;){if(32===n.type||ls(n,t))return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?Ja:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),es=function(t){return 15===t.type},ns=function(t){return 17===t.type},rs=function(t){return 20===t.type},is=function(t){return 0===t.type},os=function(t,e){return rs(t)&&t.value===e},as=function(t){return 31!==t.type},ss=function(t){return 31!==t.type&&4!==t.type},us=function(t){var e=[],n=[];return t.forEach((function(t){if(4===t.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(n),void(n=[])}31!==t.type&&n.push(t)})),n.length&&e.push(n),e},ls=function(t,e){return 11===e&&12===t.type||28===e&&29===t.type||2===e&&3===t.type},cs=function(t){return 17===t.type||15===t.type},hs=function(t){return 16===t.type||cs(t)},ds=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},As={type:17,number:0,flags:4},fs={type:16,number:50,flags:4},ps={type:16,number:100,flags:4},gs=function(t,e,n){var r=t[0],i=t[1];return[vs(r,e),vs(void 0!==i?i:r,n)]},vs=function(t,e){if(16===t.type)return t.number/100*e;if(es(t))switch(t.unit){case"rem":case"em":return 16*t.number;default:return t.number}return t.number},ms="grad",ys="turn",bs=function(t,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case ms:return Math.PI/200*e.number;case"rad":return e.number;case ys:return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},ws=function(t){return 15===t.type&&("deg"===t.unit||t.unit===ms||"rad"===t.unit||t.unit===ys)},xs=function(t){switch(t.filter(rs).map((function(t){return t.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[As,As];case"to top":case"bottom":return _s(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[As,ps];case"to right":case"left":return _s(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ps,ps];case"to bottom":case"top":return _s(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ps,As];case"to left":case"right":return _s(270)}return 0},_s=function(t){return Math.PI*t/180},Ts=function(t,e){if(18===e.type){var n=ks[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(5===e.type){if(3===e.value.length){var r=e.value.substring(0,1),i=e.value.substring(1,2),o=e.value.substring(2,3);return Ms(parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16),1)}if(4===e.value.length){r=e.value.substring(0,1),i=e.value.substring(1,2),o=e.value.substring(2,3);var a=e.value.substring(3,4);return Ms(parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16),parseInt(a+a,16)/255)}if(6===e.value.length){r=e.value.substring(0,2),i=e.value.substring(2,4),o=e.value.substring(4,6);return Ms(parseInt(r,16),parseInt(i,16),parseInt(o,16),1)}if(8===e.value.length){r=e.value.substring(0,2),i=e.value.substring(2,4),o=e.value.substring(4,6),a=e.value.substring(6,8);return Ms(parseInt(r,16),parseInt(i,16),parseInt(o,16),parseInt(a,16)/255)}}if(20===e.type){var s=Ds[e.value.toUpperCase()];if(void 0!==s)return s}return Ds.TRANSPARENT},Es=function(t){return 0==(255&t)},Ss=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+r+","+n+","+e/255+")":"rgb("+i+","+r+","+n+")"},Ms=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(255*r)<<0)>>>0},Cs=function(t,e){if(17===t.type)return t.number;if(16===t.type){var n=3===e?1:255;return 3===e?t.number/100*n:Math.round(t.number/100*n)}return 0},Is=function(t,e){var n=e.filter(ss);if(3===n.length){var r=n.map(Cs),i=r[0],o=r[1],a=r[2];return Ms(i,o,a,1)}if(4===n.length){var s=n.map(Cs),u=(i=s[0],o=s[1],a=s[2],s[3]);return Ms(i,o,a,u)}return 0};function Ns(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<.5?e:n<2/3?6*(e-t)*(2/3-n)+t:t}var Bs=function(t,e){var n=e.filter(ss),r=n[0],i=n[1],o=n[2],a=n[3],s=(17===r.type?_s(r.number):bs(t,r))/(2*Math.PI),u=hs(i)?i.number/100:0,l=hs(o)?o.number/100:0,c=void 0!==a&&hs(a)?vs(a,1):1;if(0===u)return Ms(255*l,255*l,255*l,1);var h=l<=.5?l*(u+1):l+u-l*u,d=2*l-h,A=Ns(d,h,s+1/3),f=Ns(d,h,s),p=Ns(d,h,s-1/3);return Ms(255*A,255*f,255*p,c)},ks={hsl:Bs,hsla:Bs,rgb:Is,rgba:Is},Ps=function(t,e){return Ts(t,ts.create(e).parseComponentValue())},Ds={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Ls={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(rs(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Os={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Rs=function(t,e){var n=Ts(t,e[0]),r=e[1];return r&&hs(r)?{color:n,stop:r}:{color:n,stop:null}},Fs=function(t,e){var n=t[0],r=t[t.length-1];null===n.stop&&(n.stop=As),null===r.stop&&(r.stop=ps);for(var i=[],o=0,a=0;a<t.length;a++){var s=t[a].stop;if(null!==s){var u=vs(s,e);u>o?i.push(u):i.push(o),o=u}else i.push(null)}var l=null;for(a=0;a<i.length;a++){var c=i[a];if(null===c)null===l&&(l=a);else if(null!==l){for(var h=a-l,d=(c-i[l-1])/(h+1),A=1;A<=h;A++)i[l+A-1]=d*A;l=null}}return t.map((function(t,n){return{color:t.color,stop:Math.max(Math.min(1,i[n]/e),0)}}))},Us=function(t,e,n){var r="number"==typeof t?t:function(t,e,n){var r=e/2,i=n/2,o=vs(t[0],e)-r,a=i-vs(t[1],n);return(Math.atan2(a,o)+2*Math.PI)%(2*Math.PI)}(t,e,n),i=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),o=e/2,a=n/2,s=i/2,u=Math.sin(r-Math.PI/2)*s,l=Math.cos(r-Math.PI/2)*s;return[i,o-l,o+l,a-u,a+u]},js=function(t,e){return Math.sqrt(t*t+e*e)},zs=function(t,e,n,r,i){return[[0,0],[0,e],[t,0],[t,e]].reduce((function(t,e){var o=e[0],a=e[1],s=js(n-o,r-a);return(i?s<t.optimumDistance:s>t.optimumDistance)?{optimumCorner:e,optimumDistance:s}:t}),{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Hs=function(t,e){var n=_s(180),r=[];return us(e).forEach((function(e,i){if(0===i){var o=e[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value))return void(n=xs(e));if(ws(o))return void(n=(bs(t,o)+_s(270))%_s(360))}var a=Rs(t,e);r.push(a)})),{angle:n,stops:r,type:1}},Qs="closest-side",Gs="farthest-side",Vs="closest-corner",Ws="farthest-corner",Ys="circle",Xs="ellipse",qs="cover",Ks="contain",Zs=function(t,e){var n=0,r=3,i=[],o=[];return us(e).forEach((function(e,a){var s=!0;if(0===a?s=e.reduce((function(t,e){if(rs(e))switch(e.value){case"center":return o.push(fs),!1;case"top":case"left":return o.push(As),!1;case"right":case"bottom":return o.push(ps),!1}else if(hs(e)||cs(e))return o.push(e),!1;return t}),s):1===a&&(s=e.reduce((function(t,e){if(rs(e))switch(e.value){case Ys:return n=0,!1;case Xs:return n=1,!1;case Ks:case Qs:return r=0,!1;case Gs:return r=1,!1;case Vs:return r=2,!1;case qs:case Ws:return r=3,!1}else if(cs(e)||hs(e))return Array.isArray(r)||(r=[]),r.push(e),!1;return t}),s)),s){var u=Rs(t,e);i.push(u)}})),{size:r,shape:n,stops:i,position:o,type:2}},Js=function(t,e){if(22===e.type){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(18===e.type){var r=tu[e.name];if(void 0===r)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)};var $s,tu={"linear-gradient":function(t,e){var n=_s(180),r=[];return us(e).forEach((function(e,i){if(0===i){var o=e[0];if(20===o.type&&"to"===o.value)return void(n=xs(e));if(ws(o))return void(n=bs(t,o))}var a=Rs(t,e);r.push(a)})),{angle:n,stops:r,type:1}},"-moz-linear-gradient":Hs,"-ms-linear-gradient":Hs,"-o-linear-gradient":Hs,"-webkit-linear-gradient":Hs,"radial-gradient":function(t,e){var n=0,r=3,i=[],o=[];return us(e).forEach((function(e,a){var s=!0;if(0===a){var u=!1;s=e.reduce((function(t,e){if(u)if(rs(e))switch(e.value){case"center":return o.push(fs),t;case"top":case"left":return o.push(As),t;case"right":case"bottom":return o.push(ps),t}else(hs(e)||cs(e))&&o.push(e);else if(rs(e))switch(e.value){case Ys:return n=0,!1;case Xs:return n=1,!1;case"at":return u=!0,!1;case Qs:return r=0,!1;case qs:case Gs:return r=1,!1;case Ks:case Vs:return r=2,!1;case Ws:return r=3,!1}else if(cs(e)||hs(e))return Array.isArray(r)||(r=[]),r.push(e),!1;return t}),s)}if(s){var l=Rs(t,e);i.push(l)}})),{size:r,shape:n,stops:i,position:o,type:2}},"-moz-radial-gradient":Zs,"-ms-radial-gradient":Zs,"-o-radial-gradient":Zs,"-webkit-radial-gradient":Zs,"-webkit-gradient":function(t,e){var n=_s(180),r=[],i=1;return us(e).forEach((function(e,n){var o=e[0];if(0===n){if(rs(o)&&"linear"===o.value)return void(i=1);if(rs(o)&&"radial"===o.value)return void(i=2)}if(18===o.type)if("from"===o.name){var a=Ts(t,o.values[0]);r.push({stop:As,color:a})}else if("to"===o.name){a=Ts(t,o.values[0]);r.push({stop:ps,color:a})}else if("color-stop"===o.name){var s=o.values.filter(ss);if(2===s.length){a=Ts(t,s[1]);var u=s[0];ns(u)&&r.push({stop:{type:16,number:100*u.number,flags:u.flags},color:a})}}})),1===i?{angle:(n+_s(180))%_s(360),stops:r,type:i}:{size:3,shape:0,stops:r,position:[],type:i}}},eu={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var n=e[0];return 20===n.type&&"none"===n.value?[]:e.filter((function(t){return ss(t)&&function(t){return!(20===t.type&&"none"===t.value||18===t.type&&!tu[t.name])}(t)})).map((function(e){return Js(t,e)}))}},nu={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(rs(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},ru={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return us(e).map((function(t){return t.filter(hs)})).map(ds)}},iu={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return us(e).map((function(t){return t.filter(rs).map((function(t){return t.value})).join(" ")})).map(ou)}},ou=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"}($s||($s={}));var au,su={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return us(e).map((function(t){return t.filter(uu)}))}},uu=function(t){return rs(t)||hs(t)},lu=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},cu=lu("top"),hu=lu("right"),du=lu("bottom"),Au=lu("left"),fu=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return ds(e.filter(hs))}}},pu=fu("top-left"),gu=fu("top-right"),vu=fu("bottom-right"),mu=fu("bottom-left"),yu=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},bu=yu("top"),wu=yu("right"),xu=yu("bottom"),_u=yu("left"),Tu=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return es(e)?e.number:0}}},Eu=Tu("top"),Su=Tu("right"),Mu=Tu("bottom"),Cu=Tu("left"),Iu={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Nu={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){return"rtl"===e?1:0}},Bu={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(rs).reduce((function(t,e){return t|ku(e.value)}),0)}},ku=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Pu={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Du={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return 20===e.type&&"normal"===e.value?0:17===e.type||15===e.type?e.number:0}};!function(t){t.NORMAL="normal",t.STRICT="strict"}(au||(au={}));var Lu,Ou={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"strict"===e?au.STRICT:au.NORMAL}},Ru={name:"line-height",initialValue:"normal",prefix:!1,type:4},Fu=function(t,e){return rs(t)&&"normal"===t.value?1.2*e:17===t.type?e*t.number:hs(t)?vs(t,e):e},Uu={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return 20===e.type&&"none"===e.value?null:Js(t,e)}},ju={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){return"inside"===e?0:1}},zu={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Hu=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Qu=Hu("top"),Gu=Hu("right"),Vu=Hu("bottom"),Wu=Hu("left"),Yu={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(rs).map((function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Xu={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"break-word"===e?"break-word":"normal"}},qu=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ku=qu("top"),Zu=qu("right"),Ju=qu("bottom"),$u=qu("left"),tl={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},el={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},nl={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&os(e[0],"none")?[]:us(e).map((function(e){for(var n={color:Ds.TRANSPARENT,offsetX:As,offsetY:As,blur:As},r=0,i=0;i<e.length;i++){var o=e[i];cs(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:n.blur=o,r++):n.color=Ts(t,o)}return n}))}},rl={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},il={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var n=ol[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},ol={matrix:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number}));return 6===e.length?e:null},matrix3d:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number})),n=e[0],r=e[1];e[2],e[3];var i=e[4],o=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],s=e[13];return e[14],e[15],16===e.length?[n,r,i,o,a,s]:null}},al={type:16,number:50,flags:4},sl=[al,al],ul={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(hs);return 2!==n.length?sl:[n[0],n[1]]}},ll={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"}(Lu||(Lu={}));for(var cl={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Lu.BREAK_ALL;case"keep-all":return Lu.KEEP_ALL;default:return Lu.NORMAL}}},hl={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(20===e.type)return{auto:!0,order:0};if(ns(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},dl=function(t,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")},Al={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return ns(e)?e.number:1}},fl={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pl={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(rs).map((function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(t){return 0!==t}))}},gl={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach((function(t){switch(t.type){case 20:case 0:n.push(t.value);break;case 17:n.push(t.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}})),n.length&&r.push(n.join(" ")),r.map((function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"}))}},vl={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ml={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(ns(e))return e.number;if(rs(e)){if("bold"===e.value)return 700;return 400}return 400}},yl={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(rs).map((function(t){return t.value}))}},bl={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},wl=function(t,e){return 0!=(t&e)},xl={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var n=e[0];return 20===n.type&&"none"===n.value?[]:e}},_l={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var n=e[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],i=e.filter(as),o=0;o<i.length;o++){var a=i[o],s=i[o+1];if(20===a.type){var u=s&&ns(s)?s.number:1;r.push({counter:a.value,increment:u})}}return r}},Tl={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return[];for(var n=[],r=e.filter(as),i=0;i<r.length;i++){var o=r[i],a=r[i+1];if(rs(o)&&"none"!==o.value){var s=a&&ns(a)?a.number:0;n.push({counter:o.value,reset:s})}}return n}},El={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(es).map((function(e){return dl(t,e)}))}},Sl={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var n=e[0];if(20===n.type&&"none"===n.value)return null;var r=[],i=e.filter(is);if(i.length%2!=0)return null;for(var o=0;o<i.length;o+=2){var a=i[o].value,s=i[o+1].value;r.push({open:a,close:s})}return r}},Ml=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},Cl={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&os(e[0],"none")?[]:us(e).map((function(e){for(var n={color:255,offsetX:As,offsetY:As,blur:As,spread:As,inset:!1},r=0,i=0;i<e.length;i++){var o=e[i];os(o,"inset")?n.inset=!0:cs(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:2===r?n.blur=o:n.spread=o,r++):n.color=Ts(t,o)}return n}))}},Il={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[];return e.filter(rs).forEach((function(t){switch(t.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2)}})),[0,1,2].forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n}},Nl={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Bl={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return es(e)?e.number:0}},kl=function(){function t(t,e){var n,r;this.animationDuration=Ll(t,El,e.animationDuration),this.backgroundClip=Ll(t,Ls,e.backgroundClip),this.backgroundColor=Ll(t,Os,e.backgroundColor),this.backgroundImage=Ll(t,eu,e.backgroundImage),this.backgroundOrigin=Ll(t,nu,e.backgroundOrigin),this.backgroundPosition=Ll(t,ru,e.backgroundPosition),this.backgroundRepeat=Ll(t,iu,e.backgroundRepeat),this.backgroundSize=Ll(t,su,e.backgroundSize),this.borderTopColor=Ll(t,cu,e.borderTopColor),this.borderRightColor=Ll(t,hu,e.borderRightColor),this.borderBottomColor=Ll(t,du,e.borderBottomColor),this.borderLeftColor=Ll(t,Au,e.borderLeftColor),this.borderTopLeftRadius=Ll(t,pu,e.borderTopLeftRadius),this.borderTopRightRadius=Ll(t,gu,e.borderTopRightRadius),this.borderBottomRightRadius=Ll(t,vu,e.borderBottomRightRadius),this.borderBottomLeftRadius=Ll(t,mu,e.borderBottomLeftRadius),this.borderTopStyle=Ll(t,bu,e.borderTopStyle),this.borderRightStyle=Ll(t,wu,e.borderRightStyle),this.borderBottomStyle=Ll(t,xu,e.borderBottomStyle),this.borderLeftStyle=Ll(t,_u,e.borderLeftStyle),this.borderTopWidth=Ll(t,Eu,e.borderTopWidth),this.borderRightWidth=Ll(t,Su,e.borderRightWidth),this.borderBottomWidth=Ll(t,Mu,e.borderBottomWidth),this.borderLeftWidth=Ll(t,Cu,e.borderLeftWidth),this.boxShadow=Ll(t,Cl,e.boxShadow),this.color=Ll(t,Iu,e.color),this.direction=Ll(t,Nu,e.direction),this.display=Ll(t,Bu,e.display),this.float=Ll(t,Pu,e.cssFloat),this.fontFamily=Ll(t,gl,e.fontFamily),this.fontSize=Ll(t,vl,e.fontSize),this.fontStyle=Ll(t,bl,e.fontStyle),this.fontVariant=Ll(t,yl,e.fontVariant),this.fontWeight=Ll(t,ml,e.fontWeight),this.letterSpacing=Ll(t,Du,e.letterSpacing),this.lineBreak=Ll(t,Ou,e.lineBreak),this.lineHeight=Ll(t,Ru,e.lineHeight),this.listStyleImage=Ll(t,Uu,e.listStyleImage),this.listStylePosition=Ll(t,ju,e.listStylePosition),this.listStyleType=Ll(t,zu,e.listStyleType),this.marginTop=Ll(t,Qu,e.marginTop),this.marginRight=Ll(t,Gu,e.marginRight),this.marginBottom=Ll(t,Vu,e.marginBottom),this.marginLeft=Ll(t,Wu,e.marginLeft),this.opacity=Ll(t,Al,e.opacity);var i=Ll(t,Yu,e.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Ll(t,Xu,e.overflowWrap),this.paddingTop=Ll(t,Ku,e.paddingTop),this.paddingRight=Ll(t,Zu,e.paddingRight),this.paddingBottom=Ll(t,Ju,e.paddingBottom),this.paddingLeft=Ll(t,$u,e.paddingLeft),this.paintOrder=Ll(t,Il,e.paintOrder),this.position=Ll(t,el,e.position),this.textAlign=Ll(t,tl,e.textAlign),this.textDecorationColor=Ll(t,fl,null!==(n=e.textDecorationColor)&&void 0!==n?n:e.color),this.textDecorationLine=Ll(t,pl,null!==(r=e.textDecorationLine)&&void 0!==r?r:e.textDecoration),this.textShadow=Ll(t,nl,e.textShadow),this.textTransform=Ll(t,rl,e.textTransform),this.transform=Ll(t,il,e.transform),this.transformOrigin=Ll(t,ul,e.transformOrigin),this.visibility=Ll(t,ll,e.visibility),this.webkitTextStrokeColor=Ll(t,Nl,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ll(t,Bl,e.webkitTextStrokeWidth),this.wordBreak=Ll(t,cl,e.wordBreak),this.zIndex=Ll(t,hl,e.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},t.prototype.isTransparent=function(){return Es(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return 0!==this.position},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return 0!==this.float},t.prototype.isInlineLevel=function(){return wl(this.display,4)||wl(this.display,33554432)||wl(this.display,268435456)||wl(this.display,536870912)||wl(this.display,67108864)||wl(this.display,134217728)},t}(),Pl=function(t,e){this.content=Ll(t,xl,e.content),this.quotes=Ll(t,Sl,e.quotes)},Dl=function(t,e){this.counterIncrement=Ll(t,_l,e.counterIncrement),this.counterReset=Ll(t,Tl,e.counterReset)},Ll=function(t,e,n){var r=new $a,i=null!=n?n.toString():e.initialValue;r.write(i);var o=new ts(r.read());switch(e.type){case 2:var a=o.parseComponentValue();return e.parse(t,rs(a)?a.value:e.initialValue);case 0:return e.parse(t,o.parseComponentValue());case 1:return e.parse(t,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(e.format){case"angle":return bs(t,o.parseComponentValue());case"color":return Ts(t,o.parseComponentValue());case"image":return Js(t,o.parseComponentValue());case"length":var s=o.parseComponentValue();return cs(s)?s:As;case"length-percentage":var u=o.parseComponentValue();return hs(u)?u:As;case"time":return dl(t,o.parseComponentValue())}}},Ol=function(t,e){var n=function(t){switch(t.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(t);return 1===n||e===n},Rl=function(t,e){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,Ol(e,3),this.styles=new kl(t,window.getComputedStyle(e,null)),zc(e)&&(this.styles.animationDuration.some((function(t){return t>0}))&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=yo(this.context,e),Ol(e,4)&&(this.flags|=16)},Fl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ul="undefined"==typeof Uint8Array?[]:new Uint8Array(256),jl=0;jl<Fl.length;jl++)Ul[Fl.charCodeAt(jl)]=jl;for(var zl=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Hl=function(){function t(t,e,n,r,i,o){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>5])<<2)+(31&t),this.data[e];if(t<=65535)return e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[e];if(t<this.highStart)return e=2080+(t>>11),e=this.index[e],e+=t>>5&63,e=((e=this.index[e])<<2)+(31&t),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Ql="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gl="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Vl=0;Vl<Ql.length;Vl++)Gl[Ql.charCodeAt(Vl)]=Vl;var Wl,Yl=8,Xl=9,ql=11,Kl=12,Zl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var a=t[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},Jl=function(t,e){var n=function(t){var e,n,r,i,o,a=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),c=Array.isArray(l)?l:new Uint8Array(l);for(e=0;e<s;e+=4)n=Ul[t.charCodeAt(e)],r=Ul[t.charCodeAt(e+1)],i=Ul[t.charCodeAt(e+2)],o=Ul[t.charCodeAt(e+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&o;return l}(t),r=Array.isArray(n)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n}(n):new Uint32Array(n),i=Array.isArray(n)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n}(n):new Uint16Array(n),o=zl(i,12,r[4]/2),a=2===r[5]?zl(i,(24+r[4])/2):function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))}(r,Math.ceil((24+r[4])/4));return new Hl(r[0],r[1],r[2],r[3],o,a)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),$l="",tc=function(t){return Jl.get(t)},ec=function(t,e,n){var r=n-2,i=e[r],o=e[n-1],a=e[n];if(2===o&&3===a)return $l;if(2===o||3===o||4===o||2===a||3===a||4===a)return"";if(o===Yl&&-1!==[Yl,Xl,ql,Kl].indexOf(a)||(o===ql||o===Xl)&&(a===Xl||10===a)||(o===Kl||10===o)&&10===a||13===a||5===a||7===a||1===o)return $l;if(13===o&&14===a){for(;5===i;)i=e[--r];if(14===i)return $l}if(15===o&&15===a){for(var s=0;15===i;)s++,i=e[--r];if(s%2==0)return $l}return""},nc=function(t){var e=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t),n=e.length,r=0,i=0,o=e.map(tc);return{next:function(){if(r>=n)return{done:!0,value:null};for(var t=$l;r<n&&(t=ec(0,o,++r))===$l;);if(t!==$l||r===n){var a=Zl.apply(null,e.slice(i,r));return i=r,{value:a,done:!1}}return{done:!0,value:null}}}},rc=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},ic=function(t,e,n,r,i){var o="http://www.w3.org/2000/svg",a=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",r.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(s),s.appendChild(i),a},oc=function(t){return new Promise((function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},ac={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n);var r=e.getBoundingClientRect(),i=Math.round(r.height);if(t.body.removeChild(n),123===i)return!0}}return!1}(document);return Object.defineProperty(ac,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ac.SUPPORT_RANGE_BOUNDS&&function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var r=e.firstChild,i=bo(r.data).map((function(t){return wo(t)})),o=0,a={},s=i.every((function(t,e){n.setStart(r,o),n.setEnd(r,o+t.length);var i=n.getBoundingClientRect();o+=t.length;var s=i.x>a.x||i.y>a.y;return a=i,0===e||s}));return t.body.removeChild(e),s}(document);return Object.defineProperty(ac,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch(t){return!1}return!0}(document);return Object.defineProperty(ac,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,o=e.toDataURL();i.src=o;var a=ic(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),oc(a).then((function(e){r.drawImage(e,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var a=t.createElement("div");return a.style.backgroundImage="url("+o+")",a.style.height=n+"px",rc(i)?oc(ic(n,n,0,0,a)):Promise.reject(!1)})).then((function(t){return r.drawImage(t,0,0),rc(r.getImageData(0,0,n,n).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(ac,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(ac,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(ac,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ac,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(ac,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},sc=function(t,e){this.text=t,this.bounds=e},uc=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var o=yo(t,r);return r.firstChild&&i.replaceChild(r.firstChild,r),o}}return mo.EMPTY},lc=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(t,e),i.setEnd(t,e+n),i},cc=function(t){if(ac.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map((function(t){return t.segment}))}return function(t){for(var e,n=nc(t),r=[];!(e=n.next()).done;)e.value&&r.push(e.value.slice());return r}(t)},hc=function(t,e){return 0!==e.letterSpacing?cc(t):function(t,e){if(ac.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map((function(t){return t.segment}))}return Ac(t,e)}(t,e)},dc=[32,160,4961,65792,65793,4153,4241],Ac=function(t,e){for(var n,r=function(t,e){var n=bo(t),r=va(n,e),i=r[0],o=r[1],a=r[2],s=n.length,u=0,l=0;return{next:function(){if(l>=s)return{done:!0,value:null};for(var t=ia;l<s&&(t=ga(n,o,i,++l,a))===ia;);if(t!==ia||l===s){var e=new ma(n,t,u,l);return u=l,{value:e,done:!1}}return{done:!0,value:null}}}}(t,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),i=[],o=function(){if(n.value){var t=n.value.slice(),e=bo(t),r="";e.forEach((function(t){-1===dc.indexOf(t)?r+=wo(t):(r.length&&i.push(r),i.push(wo(t)),r="")})),r.length&&i.push(r)}};!(n=r.next()).done;)o();return i},fc=function(t,e,n){this.text=pc(e.data,n.textTransform),this.textBounds=function(t,e,n,r){var i=hc(e,n),o=[],a=0;return i.forEach((function(e){if(n.textDecorationLine.length||e.trim().length>0)if(ac.SUPPORT_RANGE_BOUNDS){var i=lc(r,a,e.length).getClientRects();if(i.length>1){var s=cc(e),u=0;s.forEach((function(e){o.push(new sc(e,mo.fromDOMRectList(t,lc(r,u+a,e.length).getClientRects()))),u+=e.length}))}else o.push(new sc(e,mo.fromDOMRectList(t,i)))}else{var l=r.splitText(e.length);o.push(new sc(e,uc(t,r))),r=l}else ac.SUPPORT_RANGE_BOUNDS||(r=r.splitText(e.length));a+=e.length})),o}(t,this.text,n,e)},pc=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(gc,vc);case 2:return t.toUpperCase();default:return t}},gc=/(^|\s|:|-|\(|\))([a-z])/g,vc=function(t,e,n){return t.length>0?e+n.toUpperCase():t},mc=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return Ao(e,t),e}(Rl),yc=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return Ao(e,t),e}(Rl),bc=function(t){function e(e,n){var r=t.call(this,e,n)||this,i=new XMLSerializer,o=yo(e,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return Ao(e,t),e}(Rl),wc=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.value=n.value,r}return Ao(e,t),e}(Rl),xc=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.start=n.start,r.reversed="boolean"==typeof n.reversed&&!0===n.reversed,r}return Ao(e,t),e}(Rl),_c=[{type:15,flags:0,unit:"px",number:3}],Tc=[{type:16,flags:0,number:50}],Ec="checkbox",Sc="radio",Mc="password",Cc=707406591,Ic=function(t){function e(e,n){var r=t.call(this,e,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=function(t){var e=t.type===Mc?new Array(t.value.length+1).join(""):t.value;return 0===e.length?t.placeholder||"":e}(n),(r.type===Ec||r.type===Sc)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=function(t){return t.width>t.height?new mo(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new mo(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t}(r.bounds)),r.type){case Ec:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=_c;break;case Sc:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Tc}return r}return Ao(e,t),e}(Rl),Nc=function(t){function e(e,n){var r=t.call(this,e,n)||this,i=n.options[n.selectedIndex||0];return r.value=i&&i.text||"",r}return Ao(e,t),e}(Rl),Bc=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.value=n.value,r}return Ao(e,t),e}(Rl),kc=function(t){function e(e,n){var r=t.call(this,e,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=Oc(e,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Ps(e,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Ds.TRANSPARENT,o=n.contentWindow.document.body?Ps(e,getComputedStyle(n.contentWindow.document.body).backgroundColor):Ds.TRANSPARENT;r.backgroundColor=Es(i)?Es(o)?r.styles.backgroundColor:o:i}}catch(t){}return r}return Ao(e,t),e}(Rl),Pc=["OL","UL","MENU"],Dc=function t(e,n,r,i){for(var o=n.firstChild,a=void 0;o;o=a)if(a=o.nextSibling,Uc(o)&&o.data.trim().length>0)r.textNodes.push(new fc(e,o,r.styles));else if(jc(o))if(eh(o)&&o.assignedNodes)o.assignedNodes().forEach((function(n){return t(e,n,r,i)}));else{var s=Lc(e,o);s.styles.isVisible()&&(Rc(o,s,i)?s.flags|=4:Fc(s.styles)&&(s.flags|=2),-1!==Pc.indexOf(o.tagName)&&(s.flags|=8),r.elements.push(s),o.slot,o.shadowRoot?t(e,o.shadowRoot,s,i):!$c(o)&&!Wc(o)&&!th(o)&&t(e,o,s,i))}},Lc=function(t,e){return Kc(e)?new mc(t,e):Xc(e)?new yc(t,e):Wc(e)?new bc(t,e):Qc(e)?new wc(t,e):Gc(e)?new xc(t,e):Vc(e)?new Ic(t,e):th(e)?new Nc(t,e):$c(e)?new Bc(t,e):Zc(e)?new kc(t,e):new Rl(t,e)},Oc=function(t,e){var n=Lc(t,e);return n.flags|=4,Dc(t,e,n,n),n},Rc=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Yc(t)&&n.styles.isTransparent()},Fc=function(t){return t.isPositioned()||t.isFloating()},Uc=function(t){return t.nodeType===Node.TEXT_NODE},jc=function(t){return t.nodeType===Node.ELEMENT_NODE},zc=function(t){return jc(t)&&void 0!==t.style&&!Hc(t)},Hc=function(t){return"object"==_(t.className)},Qc=function(t){return"LI"===t.tagName},Gc=function(t){return"OL"===t.tagName},Vc=function(t){return"INPUT"===t.tagName},Wc=function(t){return"svg"===t.tagName},Yc=function(t){return"BODY"===t.tagName},Xc=function(t){return"CANVAS"===t.tagName},qc=function(t){return"VIDEO"===t.tagName},Kc=function(t){return"IMG"===t.tagName},Zc=function(t){return"IFRAME"===t.tagName},Jc=function(t){return"STYLE"===t.tagName},$c=function(t){return"TEXTAREA"===t.tagName},th=function(t){return"SELECT"===t.tagName},eh=function(t){return"SLOT"===t.tagName},nh=function(t){return t.tagName.indexOf("-")>0},rh=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},t.prototype.getCounterValues=function(t){return this.counters[t]||[]},t.prototype.pop=function(t){var e=this;t.forEach((function(t){return e.counters[t].pop()}))},t.prototype.parse=function(t){var e=this,n=t.counterIncrement,r=t.counterReset,i=!0;null!==n&&n.forEach((function(t){var n=e.counters[t.counter];n&&0!==t.increment&&(i=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=t.increment)}));var o=[];return i&&r.forEach((function(t){var n=e.counters[t.counter];o.push(t.counter),n||(n=e.counters[t.counter]=[]),n.push(t.reset)})),o},t}(),ih={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},oh={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ah={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},sh={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},uh=function(t,e,n,r,i,o){return t<e||t>n?vh(t,i,o.length>0):r.integers.reduce((function(e,n,i){for(;t>=n;)t-=n,e+=r.values[i];return e}),"")+o},lh=function(t,e,n,r){var i="";do{n||t--,i=r(t)+i,t/=e}while(t*e>=e);return i},ch=function(t,e,n,r,i){var o=n-e+1;return(t<0?"-":"")+(lh(Math.abs(t),o,r,(function(t){return wo(Math.floor(t%o)+e)}))+i)},hh=function(t,e,n){void 0===n&&(n=". ");var r=e.length;return lh(Math.abs(t),r,!1,(function(t){return e[Math.floor(t%r)]}))+n},dh=function(t,e,n,r,i,o){if(t<-9999||t>9999)return vh(t,4,i.length>0);var a=Math.abs(t),s=i;if(0===a)return e[0]+s;for(var u=0;a>0&&u<=4;u++){var l=a%10;0===l&&wl(o,1)&&""!==s?s=e[l]+s:l>1||1===l&&0===u||1===l&&1===u&&wl(o,2)||1===l&&1===u&&wl(o,4)&&t>100||1===l&&u>1&&wl(o,8)?s=e[l]+(u>0?n[u-1]:"")+s:1===l&&u>0&&(s=n[u-1]+s),a=Math.floor(a/10)}return(t<0?r:"")+s},Ah="",fh="",ph="",gh="",vh=function(t,e,n){var r=n?". ":"",i=n?"":"",o=n?", ":"",a=n?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var s=ch(t,48,57,!0,r);return s.length<4?"0"+s:s;case 4:return hh(t,"",i);case 6:return uh(t,1,3999,ih,3,r).toLowerCase();case 7:return uh(t,1,3999,ih,3,r);case 8:return ch(t,945,969,!1,r);case 9:return ch(t,97,122,!1,r);case 10:return ch(t,65,90,!1,r);case 11:return ch(t,1632,1641,!0,r);case 12:case 49:return uh(t,1,9999,oh,3,r);case 35:return uh(t,1,9999,oh,3,r).toLowerCase();case 13:return ch(t,2534,2543,!0,r);case 14:case 30:return ch(t,6112,6121,!0,r);case 15:return hh(t,"",i);case 16:return hh(t,"",i);case 17:case 48:return dh(t,"",Ah,"",i,14);case 47:return dh(t,"",fh,"",i,15);case 42:return dh(t,"",Ah,"",i,14);case 41:return dh(t,"",fh,"",i,15);case 26:return dh(t,"","",ph,i,0);case 25:return dh(t,"","",ph,i,7);case 31:return dh(t,"","",gh,o,7);case 33:return dh(t,"","",gh,o,0);case 32:return dh(t,"","",gh,o,7);case 18:return ch(t,2406,2415,!0,r);case 20:return uh(t,1,19999,sh,3,r);case 21:return ch(t,2790,2799,!0,r);case 22:return ch(t,2662,2671,!0,r);case 22:return uh(t,1,10999,ah,3,r);case 23:return hh(t,"");case 24:return hh(t,"");case 27:return ch(t,3302,3311,!0,r);case 28:return hh(t,"",i);case 29:return hh(t,"",i);case 34:return ch(t,3792,3801,!0,r);case 37:return ch(t,6160,6169,!0,r);case 38:return ch(t,4160,4169,!0,r);case 39:return ch(t,2918,2927,!0,r);case 40:return ch(t,1776,1785,!0,r);case 43:return ch(t,3046,3055,!0,r);case 44:return ch(t,3174,3183,!0,r);case 45:return ch(t,3664,3673,!0,r);case 46:return ch(t,3872,3881,!0,r);default:return ch(t,48,57,!0,r)}},mh="data-html2canvas-ignore",yh=function(){function t(t,e,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=e,this.counters=new rh,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(t,e){var n=this,r=wh(t,e);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,a=r.contentWindow,s=a.document,u=Th(r).then((function(){return po(n,void 0,void 0,(function(){var t,n;return go(this,(function(i){switch(i.label){case 0:return this.scrolledElements.forEach(Ih),a&&(a.scrollTo(e.left,e.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==e.top||a.scrollX!==e.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-e.left,a.scrollY-e.top,0,0))),t=this.options.onclone,void 0===(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:s.fonts&&s.fonts.ready?[4,s.fonts.ready]:[3,2];case 1:i.sent(),i.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,_h(s)]:[3,4];case 3:i.sent(),i.label=4;case 4:return"function"==typeof t?[2,Promise.resolve().then((function(){return t(s,n)})).then((function(){return r}))]:[2,r]}}))}))}));return s.open(),s.write(Mh(document.doctype)+"<html></html>"),Ch(this.referenceElement.ownerDocument,i,o),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),u},t.prototype.createElementClone=function(t){if(Ol(t,2),Xc(t))return this.createCanvasClone(t);if(qc(t))return this.createVideoClone(t);if(Jc(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return Kc(e)&&(Kc(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),nh(e)?this.createCustomElementClone(e):e},t.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return Sh(t.style,e),e},t.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var n=[].slice.call(e.cssRules,0).reduce((function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t}),""),r=t.cloneNode(!1);return r.textContent=n,r}}catch(t){if(this.context.logger.error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var r=t.cloneNode(!1);try{r.width=t.width,r.height=t.height;var i=t.getContext("2d"),o=r.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var a=null!==(e=t.getContext("webgl2"))&&void 0!==e?e:t.getContext("webgl");if(a){var s=a.getContextAttributes();!1===(null==s?void 0:s.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return r}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return r},t.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas");e.width=t.offsetWidth,e.height=t.offsetHeight;var n=e.getContext("2d");try{return n&&(n.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||n.getImageData(0,0,e.width,e.height)),e}catch(e){this.context.logger.info("Unable to clone video as it is tainted",t)}var r=t.ownerDocument.createElement("canvas");return r.width=t.offsetWidth,r.height=t.offsetHeight,r},t.prototype.appendChildNode=function(t,e,n){(!jc(e)||!function(t){return"SCRIPT"===t.tagName}(e)&&!e.hasAttribute(mh)&&("function"!=typeof this.options.ignoreElements||!this.options.ignoreElements(e)))&&(!this.options.copyStyles||!jc(e)||!Jc(e))&&t.appendChild(this.cloneNode(e,n))},t.prototype.cloneChildNodes=function(t,e,n){for(var r=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(jc(i)&&eh(i)&&"function"==typeof i.assignedNodes){var o=i.assignedNodes();o.length&&o.forEach((function(t){return r.appendChildNode(e,t,n)}))}else this.appendChildNode(e,i,n)},t.prototype.cloneNode=function(t,e){if(Uc(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&jc(t)&&(zc(t)||Hc(t))){var r=this.createElementClone(t);r.style.transitionProperty="none";var i=n.getComputedStyle(t),o=n.getComputedStyle(t,":before"),a=n.getComputedStyle(t,":after");this.referenceElement===t&&zc(r)&&(this.clonedReferenceElement=r),Yc(r)&&Ph(r);var s=this.counters.parse(new Dl(this.context,i)),u=this.resolvePseudoContent(t,r,o,Wl.BEFORE);nh(t)&&(e=!0),qc(t)||this.cloneChildNodes(t,r,e),u&&r.insertBefore(u,r.firstChild);var l=this.resolvePseudoContent(t,r,a,Wl.AFTER);return l&&r.appendChild(l),this.counters.pop(s),(i&&(this.options.copyStyles||Hc(t))&&!Zc(t)||e)&&Sh(i,r),(0!==t.scrollTop||0!==t.scrollLeft)&&this.scrolledElements.push([r,t.scrollLeft,t.scrollTop]),($c(t)||th(t))&&($c(r)||th(r))&&(r.value=t.value),r}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,e,n,r){var i=this;if(n){var o=n.content,a=e.ownerDocument;if(a&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==n.display){this.counters.parse(new Dl(this.context,n));var s=new Pl(this.context,n),u=a.createElement("html2canvaspseudoelement");Sh(n,u),s.content.forEach((function(e){if(0===e.type)u.appendChild(a.createTextNode(e.value));else if(22===e.type){var n=a.createElement("img");n.src=e.value,n.style.opacity="1",u.appendChild(n)}else if(18===e.type){if("attr"===e.name){var r=e.values.filter(rs);r.length&&u.appendChild(a.createTextNode(t.getAttribute(r[0].value)||""))}else if("counter"===e.name){var o=e.values.filter(ss),l=o[0],c=o[1];if(l&&rs(l)){var h=i.counters.getCounterValue(l.value),d=c&&rs(c)?zu.parse(i.context,c.value):3;u.appendChild(a.createTextNode(vh(h,d,!1)))}}else if("counters"===e.name){var A=e.values.filter(ss),f=(l=A[0],A[1]);c=A[2];if(l&&rs(l)){var p=i.counters.getCounterValues(l.value),g=c&&rs(c)?zu.parse(i.context,c.value):3,v=f&&0===f.type?f.value:"",m=p.map((function(t){return vh(t,g,!1)})).join(v);u.appendChild(a.createTextNode(m))}}}else if(20===e.type)switch(e.value){case"open-quote":u.appendChild(a.createTextNode(Ml(s.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(a.createTextNode(Ml(s.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(a.createTextNode(e.value))}})),u.className=Nh+" "+Bh;var l=r===Wl.BEFORE?" "+Nh:" "+Bh;return Hc(e)?e.className.baseValue+=l:e.className+=l,u}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(Wl||(Wl={}));var bh,wh=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(mh,"true"),t.body.appendChild(n),n},xh=function(t){return new Promise((function(e){t.complete?e():t.src?(t.onload=e,t.onerror=e):e()}))},_h=function(t){return Promise.all([].slice.call(t.images,0).map(xh))},Th=function(t){return new Promise((function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var n=setInterval((function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(n),e(t))}),50)}}))},Eh=["all","d","content"],Sh=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);-1===Eh.indexOf(r)&&e.style.setProperty(r,t.getPropertyValue(r))}return e},Mh=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},Ch=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},Ih=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},Nh="___html2canvas___pseudoelement_before",Bh="___html2canvas___pseudoelement_after",kh='{\n    content: "" !important;\n    display: none !important;\n}',Ph=function(t){Dh(t,"."+Nh+":before"+kh+"\n         ."+Bh+":after"+kh)},Dh=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},Lh=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),Oh=function(){function t(t,e){this.context=t,this._options=e,this._cache={}}return t.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)||(Qh(t)||jh(t))&&(this._cache[t]=this.loadImage(t)).catch((function(){})),e},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return po(this,void 0,void 0,(function(){var e,n,r,i,o=this;return go(this,(function(a){switch(a.label){case 0:return e=Lh.isSameOrigin(t),n=!zh(t)&&!0===this._options.useCORS&&ac.SUPPORT_CORS_IMAGES&&!e,r=!zh(t)&&!e&&!Qh(t)&&"string"==typeof this._options.proxy&&ac.SUPPORT_CORS_XHR&&!n,e||!1!==this._options.allowTaint||zh(t)||Qh(t)||r||n?(i=t,r?[4,this.proxy(i)]:[3,2]):[2];case 1:i=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise((function(t,e){var r=new Image;r.onload=function(){return t(r)},r.onerror=e,(Hh(i)||n)&&(r.crossOrigin="anonymous"),r.src=i,!0===r.complete&&setTimeout((function(){return t(r)}),500),o._options.imageTimeout>0&&setTimeout((function(){return e("Timed out ("+o._options.imageTimeout+"ms) loading image")}),o._options.imageTimeout)}))];case 3:return[2,a.sent()]}}))}))},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var e=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=t.substring(0,256);return new Promise((function(i,o){var a=ac.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status)if("text"===a)i(s.response);else{var t=new FileReader;t.addEventListener("load",(function(){return i(t.result)}),!1),t.addEventListener("error",(function(t){return o(t)}),!1),t.readAsDataURL(s.response)}else o("Failed to proxy resource "+r+" with status code "+s.status)},s.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(s.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+a),"text"!==a&&s instanceof XMLHttpRequest&&(s.responseType=a),e._options.imageTimeout){var l=e._options.imageTimeout;s.timeout=l,s.ontimeout=function(){return o("Timed out ("+l+"ms) proxying "+r)}}s.send()}))},t}(),Rh=/^data:image\/svg\+xml/i,Fh=/^data:image\/.*;base64,/i,Uh=/^data:image\/.*/i,jh=function(t){return ac.SUPPORT_SVG_DRAWING||!Gh(t)},zh=function(t){return Uh.test(t)},Hh=function(t){return Fh.test(t)},Qh=function(t){return"blob"===t.substr(0,4)},Gh=function(t){return"svg"===t.substr(-3).toLowerCase()||Rh.test(t)},Vh=function(){function t(t,e){this.type=0,this.x=t,this.y=e}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Wh=function(t,e,n){return new Vh(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Yh=function(){function t(t,e,n,r){this.type=1,this.start=t,this.startControl=e,this.endControl=n,this.end=r}return t.prototype.subdivide=function(e,n){var r=Wh(this.start,this.startControl,e),i=Wh(this.startControl,this.endControl,e),o=Wh(this.endControl,this.end,e),a=Wh(r,i,e),s=Wh(i,o,e),u=Wh(a,s,e);return n?new t(this.start,r,a,u):new t(u,s,o,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Xh=function(t){return 1===t.type},qh=function(t){var e=t.styles,n=t.bounds,r=gs(e.borderTopLeftRadius,n.width,n.height),i=r[0],o=r[1],a=gs(e.borderTopRightRadius,n.width,n.height),s=a[0],u=a[1],l=gs(e.borderBottomRightRadius,n.width,n.height),c=l[0],h=l[1],d=gs(e.borderBottomLeftRadius,n.width,n.height),A=d[0],f=d[1],p=[];p.push((i+s)/n.width),p.push((A+c)/n.width),p.push((o+f)/n.height),p.push((u+h)/n.height);var g=Math.max.apply(Math,p);g>1&&(i/=g,o/=g,s/=g,u/=g,c/=g,h/=g,A/=g,f/=g);var v=n.width-s,m=n.height-h,y=n.width-c,b=n.height-f,w=e.borderTopWidth,x=e.borderRightWidth,_=e.borderBottomWidth,T=e.borderLeftWidth,E=vs(e.paddingTop,t.bounds.width),S=vs(e.paddingRight,t.bounds.width),M=vs(e.paddingBottom,t.bounds.width),C=vs(e.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Kh(n.left+T/3,n.top+w/3,i-T/3,o-w/3,bh.TOP_LEFT):new Vh(n.left+T/3,n.top+w/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Kh(n.left+v,n.top+w/3,s-x/3,u-w/3,bh.TOP_RIGHT):new Vh(n.left+n.width-x/3,n.top+w/3),this.bottomRightBorderDoubleOuterBox=c>0||h>0?Kh(n.left+y,n.top+m,c-x/3,h-_/3,bh.BOTTOM_RIGHT):new Vh(n.left+n.width-x/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=A>0||f>0?Kh(n.left+T/3,n.top+b,A-T/3,f-_/3,bh.BOTTOM_LEFT):new Vh(n.left+T/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Kh(n.left+2*T/3,n.top+2*w/3,i-2*T/3,o-2*w/3,bh.TOP_LEFT):new Vh(n.left+2*T/3,n.top+2*w/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Kh(n.left+v,n.top+2*w/3,s-2*x/3,u-2*w/3,bh.TOP_RIGHT):new Vh(n.left+n.width-2*x/3,n.top+2*w/3),this.bottomRightBorderDoubleInnerBox=c>0||h>0?Kh(n.left+y,n.top+m,c-2*x/3,h-2*_/3,bh.BOTTOM_RIGHT):new Vh(n.left+n.width-2*x/3,n.top+n.height-2*_/3),this.bottomLeftBorderDoubleInnerBox=A>0||f>0?Kh(n.left+2*T/3,n.top+b,A-2*T/3,f-2*_/3,bh.BOTTOM_LEFT):new Vh(n.left+2*T/3,n.top+n.height-2*_/3),this.topLeftBorderStroke=i>0||o>0?Kh(n.left+T/2,n.top+w/2,i-T/2,o-w/2,bh.TOP_LEFT):new Vh(n.left+T/2,n.top+w/2),this.topRightBorderStroke=i>0||o>0?Kh(n.left+v,n.top+w/2,s-x/2,u-w/2,bh.TOP_RIGHT):new Vh(n.left+n.width-x/2,n.top+w/2),this.bottomRightBorderStroke=c>0||h>0?Kh(n.left+y,n.top+m,c-x/2,h-_/2,bh.BOTTOM_RIGHT):new Vh(n.left+n.width-x/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=A>0||f>0?Kh(n.left+T/2,n.top+b,A-T/2,f-_/2,bh.BOTTOM_LEFT):new Vh(n.left+T/2,n.top+n.height-_/2),this.topLeftBorderBox=i>0||o>0?Kh(n.left,n.top,i,o,bh.TOP_LEFT):new Vh(n.left,n.top),this.topRightBorderBox=s>0||u>0?Kh(n.left+v,n.top,s,u,bh.TOP_RIGHT):new Vh(n.left+n.width,n.top),this.bottomRightBorderBox=c>0||h>0?Kh(n.left+y,n.top+m,c,h,bh.BOTTOM_RIGHT):new Vh(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=A>0||f>0?Kh(n.left,n.top+b,A,f,bh.BOTTOM_LEFT):new Vh(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||o>0?Kh(n.left+T,n.top+w,Math.max(0,i-T),Math.max(0,o-w),bh.TOP_LEFT):new Vh(n.left+T,n.top+w),this.topRightPaddingBox=s>0||u>0?Kh(n.left+Math.min(v,n.width-x),n.top+w,v>n.width+x?0:Math.max(0,s-x),Math.max(0,u-w),bh.TOP_RIGHT):new Vh(n.left+n.width-x,n.top+w),this.bottomRightPaddingBox=c>0||h>0?Kh(n.left+Math.min(y,n.width-T),n.top+Math.min(m,n.height-_),Math.max(0,c-x),Math.max(0,h-_),bh.BOTTOM_RIGHT):new Vh(n.left+n.width-x,n.top+n.height-_),this.bottomLeftPaddingBox=A>0||f>0?Kh(n.left+T,n.top+Math.min(b,n.height-_),Math.max(0,A-T),Math.max(0,f-_),bh.BOTTOM_LEFT):new Vh(n.left+T,n.top+n.height-_),this.topLeftContentBox=i>0||o>0?Kh(n.left+T+C,n.top+w+E,Math.max(0,i-(T+C)),Math.max(0,o-(w+E)),bh.TOP_LEFT):new Vh(n.left+T+C,n.top+w+E),this.topRightContentBox=s>0||u>0?Kh(n.left+Math.min(v,n.width+T+C),n.top+w+E,v>n.width+T+C?0:s-T+C,u-(w+E),bh.TOP_RIGHT):new Vh(n.left+n.width-(x+S),n.top+w+E),this.bottomRightContentBox=c>0||h>0?Kh(n.left+Math.min(y,n.width-(T+C)),n.top+Math.min(m,n.height+w+E),Math.max(0,c-(x+S)),h-(_+M),bh.BOTTOM_RIGHT):new Vh(n.left+n.width-(x+S),n.top+n.height-(_+M)),this.bottomLeftContentBox=A>0||f>0?Kh(n.left+T+C,n.top+b,Math.max(0,A-(T+C)),f-(_+M),bh.BOTTOM_LEFT):new Vh(n.left+T+C,n.top+n.height-(_+M))};!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(bh||(bh={}));var Kh=function(t,e,n,r,i){var o=(Math.sqrt(2)-1)/3*4,a=n*o,s=r*o,u=t+n,l=e+r;switch(i){case bh.TOP_LEFT:return new Yh(new Vh(t,l),new Vh(t,l-s),new Vh(u-a,e),new Vh(u,e));case bh.TOP_RIGHT:return new Yh(new Vh(t,e),new Vh(t+a,e),new Vh(u,l-s),new Vh(u,l));case bh.BOTTOM_RIGHT:return new Yh(new Vh(u,e),new Vh(u,e+s),new Vh(t+a,l),new Vh(t,l));case bh.BOTTOM_LEFT:default:return new Yh(new Vh(u,l),new Vh(u-a,l),new Vh(t,e+s),new Vh(t,e))}},Zh=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Jh=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},$h=function(t,e,n){this.offsetX=t,this.offsetY=e,this.matrix=n,this.type=0,this.target=6},td=function(t,e){this.path=t,this.target=e,this.type=1},ed=function(t){this.opacity=t,this.type=2,this.target=6},nd=function(t){return 1===t.type},rd=function(t,e){return t.length===e.length&&t.some((function(t,n){return t===e[n]}))},id=function(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},od=function(){function t(t,e){if(this.container=t,this.parent=e,this.effects=[],this.curves=new qh(this.container),this.container.styles.opacity<1&&this.effects.push(new ed(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new $h(n,r,i))}if(0!==this.container.styles.overflowX){var o=Zh(this.curves),a=Jh(this.curves);rd(o,a)?this.effects.push(new td(o,6)):(this.effects.push(new td(o,2)),this.effects.push(new td(a,4)))}}return t.prototype.getEffects=function(t){for(var e=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var i=n.effects.filter((function(t){return!nd(t)}));if(e||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,i),e=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var o=Zh(n.curves),a=Jh(n.curves);rd(o,a)||r.unshift(new td(a,6))}}else r.unshift.apply(r,i);n=n.parent}return r.filter((function(e){return wl(e.target,t)}))},t}(),ad=function t(e,n,r,i){e.container.elements.forEach((function(o){var a=wl(o.flags,4),s=wl(o.flags,2),u=new od(o,e);wl(o.styles.display,2048)&&i.push(u);var l=wl(o.flags,8)?[]:i;if(a||s){var c=a||o.styles.isPositioned()?r:n,h=new id(u);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var d=o.styles.zIndex.order;if(d<0){var A=0;c.negativeZIndex.some((function(t,e){return d>t.element.container.styles.zIndex.order?(A=e,!1):A>0})),c.negativeZIndex.splice(A,0,h)}else if(d>0){var f=0;c.positiveZIndex.some((function(t,e){return d>=t.element.container.styles.zIndex.order?(f=e+1,!1):f>0})),c.positiveZIndex.splice(f,0,h)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(h)}else o.styles.isFloating()?c.nonPositionedFloats.push(h):c.nonPositionedInlineLevel.push(h);t(u,h,a?h:r,l)}else o.styles.isInlineLevel()?n.inlineLevel.push(u):n.nonInlineLevel.push(u),t(u,n,r,l);wl(o.flags,8)&&sd(o,l)}))},sd=function(t,e){for(var n=t instanceof xc?t.start:1,r=t instanceof xc&&t.reversed,i=0;i<e.length;i++){var o=e[i];o.container instanceof wc&&"number"==typeof o.container.value&&0!==o.container.value&&(n=o.container.value),o.listValue=vh(n,o.container.styles.listStyleType,!0),n+=r?-1:1}},ud=function(t){var e=new od(t,null),n=new id(e),r=[];return ad(e,n,n,r),sd(e.container,r),n},ld=function(t,e){switch(e){case 0:return hd(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return hd(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return hd(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return hd(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},cd=function(t,e){var n=[];return Xh(t)?n.push(t.subdivide(.5,!1)):n.push(t),Xh(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},hd=function(t,e,n,r){var i=[];return Xh(t)?i.push(t.subdivide(.5,!1)):i.push(t),Xh(n)?i.push(n.subdivide(.5,!0)):i.push(n),Xh(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Xh(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},dd=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Ad=function(t){var e=t.styles,n=t.bounds,r=vs(e.paddingLeft,n.width),i=vs(e.paddingRight,n.width),o=vs(e.paddingTop,n.width),a=vs(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+o+a))},fd=function(t,e,n){var r=function(t,e){return 0===t?e.bounds:2===t?Ad(e):dd(e)}(md(t.styles.backgroundOrigin,e),t),i=function(t,e){return 0===t?e.bounds:2===t?Ad(e):dd(e)}(md(t.styles.backgroundClip,e),t),o=vd(md(t.styles.backgroundSize,e),n,r),a=o[0],s=o[1],u=gs(md(t.styles.backgroundPosition,e),r.width-a,r.height-s);return[yd(md(t.styles.backgroundRepeat,e),u,o,r,i),Math.round(r.left+u[0]),Math.round(r.top+u[1]),a,s]},pd=function(t){return rs(t)&&t.value===$s.AUTO},gd=function(t){return"number"==typeof t},vd=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=t[0],s=t[1];if(!a)return[0,0];if(hs(a)&&s&&hs(s))return[vs(a,n.width),vs(s,n.height)];var u=gd(o);if(rs(a)&&(a.value===$s.CONTAIN||a.value===$s.COVER))return gd(o)?n.width/n.height<o!=(a.value===$s.COVER)?[n.width,n.width/o]:[n.height*o,n.height]:[n.width,n.height];var l=gd(r),c=gd(i),h=l||c;if(pd(a)&&(!s||pd(s)))return l&&c?[r,i]:u||h?h&&u?[l?r:i*o,c?i:r/o]:[l?r:n.width,c?i:n.height]:[n.width,n.height];if(u){var d=0,A=0;return hs(a)?d=vs(a,n.width):hs(s)&&(A=vs(s,n.height)),pd(a)?d=A*o:(!s||pd(s))&&(A=d/o),[d,A]}var f=null,p=null;if(hs(a)?f=vs(a,n.width):s&&hs(s)&&(p=vs(s,n.height)),null!==f&&(!s||pd(s))&&(p=l&&c?f/r*i:n.height),null!==p&&pd(a)&&(f=l&&c?p/i*r:n.width),null!==f&&null!==p)return[f,p];throw new Error("Unable to calculate background-size for element")},md=function(t,e){var n=t[e];return void 0===n?t[0]:n},yd=function(t,e,n,r,i){var o=e[0],a=e[1],s=n[0],u=n[1];switch(t){case 2:return[new Vh(Math.round(r.left),Math.round(r.top+a)),new Vh(Math.round(r.left+r.width),Math.round(r.top+a)),new Vh(Math.round(r.left+r.width),Math.round(u+r.top+a)),new Vh(Math.round(r.left),Math.round(u+r.top+a))];case 3:return[new Vh(Math.round(r.left+o),Math.round(r.top)),new Vh(Math.round(r.left+o+s),Math.round(r.top)),new Vh(Math.round(r.left+o+s),Math.round(r.height+r.top)),new Vh(Math.round(r.left+o),Math.round(r.height+r.top))];case 1:return[new Vh(Math.round(r.left+o),Math.round(r.top+a)),new Vh(Math.round(r.left+o+s),Math.round(r.top+a)),new Vh(Math.round(r.left+o+s),Math.round(r.top+a+u)),new Vh(Math.round(r.left+o),Math.round(r.top+a+u))];default:return[new Vh(Math.round(i.left),Math.round(i.top)),new Vh(Math.round(i.left+i.width),Math.round(i.top)),new Vh(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Vh(Math.round(i.left),Math.round(i.height+i.top))]}},bd="Hidden Text",wd=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,e){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(bd)),n.appendChild(i),n.appendChild(r);var a=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(bd)),n.style.lineHeight="normal",r.style.verticalAlign="super";var s=r.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:a,middle:s}},t.prototype.getMetrics=function(t,e){var n=t+" "+e;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(t,e)),this._data[n]},t}(),xd=function(t,e){this.context=t,this.options=e},_d=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new wd(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return Ao(e,t),e.prototype.applyEffects=function(t){for(var e=this;this._activeEffects.length;)this.popEffect();t.forEach((function(t){return e.applyEffect(t)}))},e.prototype.applyEffect=function(t){this.ctx.save(),function(t){return 2===t.type}(t)&&(this.ctx.globalAlpha=t.opacity),function(t){return 0===t.type}(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),nd(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return po(this,void 0,void 0,(function(){return go(this,(function(e){switch(e.label){case 0:return t.element.container.styles.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.renderNode=function(t){return po(this,void 0,void 0,(function(){return go(this,(function(e){switch(e.label){case 0:return wl(t.container.flags,16),t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.renderTextWithLetterSpacing=function(t,e,n){var r=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+n):cc(t.text).reduce((function(e,i){return r.ctx.fillText(i,e,t.bounds.top+n),e+r.ctx.measureText(i).width}),t.bounds.left)},e.prototype.createFontStyle=function(t){var e=t.fontVariant.filter((function(t){return"normal"===t||"small-caps"===t})).join(""),n=Cd(t.fontFamily).join(", "),r=es(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,r,n].join(" "),n,r]},e.prototype.renderTextNode=function(t,e){return po(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c=this;return go(this,(function(h){return n=this.createFontStyle(e),r=n[0],i=n[1],o=n[2],this.ctx.font=r,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),s=a.baseline,u=a.middle,l=e.paintOrder,t.textBounds.forEach((function(t){l.forEach((function(n){switch(n){case 0:c.ctx.fillStyle=Ss(e.color),c.renderTextWithLetterSpacing(t,e.letterSpacing,s);var r=e.textShadow;r.length&&t.text.trim().length&&(r.slice(0).reverse().forEach((function(n){c.ctx.shadowColor=Ss(n.color),c.ctx.shadowOffsetX=n.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=n.offsetY.number*c.options.scale,c.ctx.shadowBlur=n.blur.number,c.renderTextWithLetterSpacing(t,e.letterSpacing,s)})),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),e.textDecorationLine.length&&(c.ctx.fillStyle=Ss(e.textDecorationColor||e.color),e.textDecorationLine.forEach((function(e){switch(e){case 1:c.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+s),t.bounds.width,1);break;case 2:c.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:c.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+u),t.bounds.width,1)}})));break;case 1:e.webkitTextStrokeWidth&&t.text.trim().length&&(c.ctx.strokeStyle=Ss(e.webkitTextStrokeColor),c.ctx.lineWidth=e.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+s)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}}))})),[2]}))}))},e.prototype.renderReplacedElement=function(t,e,n){if(n&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var r=Ad(t),i=Jh(e);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,t.intrinsicWidth,t.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return po(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y;return go(this,(function(b){switch(b.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,r=t.curves,i=n.styles,o=0,a=n.textNodes,b.label=1;case 1:return o<a.length?(s=a[o],[4,this.renderTextNode(s,i)]):[3,4];case 2:b.sent(),b.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof mc))return[3,8];b.label=5;case 5:return b.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return g=b.sent(),this.renderReplacedElement(n,r,g),[3,8];case 7:return b.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof yc&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof bc))return[3,12];b.label=9;case 9:return b.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return g=b.sent(),this.renderReplacedElement(n,r,g),[3,12];case 11:return b.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof kc&&n.tree?[4,new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}).render(n.tree)]:[3,14];case 13:u=b.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),b.label=14;case 14:if(n instanceof Ic&&(l=Math.min(n.bounds.width,n.bounds.height),n.type===Ec?n.checked&&(this.ctx.save(),this.path([new Vh(n.bounds.left+.39363*l,n.bounds.top+.79*l),new Vh(n.bounds.left+.16*l,n.bounds.top+.5549*l),new Vh(n.bounds.left+.27347*l,n.bounds.top+.44071*l),new Vh(n.bounds.left+.39694*l,n.bounds.top+.5649*l),new Vh(n.bounds.left+.72983*l,n.bounds.top+.23*l),new Vh(n.bounds.left+.84*l,n.bounds.top+.34085*l),new Vh(n.bounds.left+.39363*l,n.bounds.top+.79*l)]),this.ctx.fillStyle=Ss(Cc),this.ctx.fill(),this.ctx.restore()):n.type===Sc&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+l/2,n.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=Ss(Cc),this.ctx.fill(),this.ctx.restore())),Td(n)&&n.value.length){switch(c=this.createFontStyle(i),m=c[0],h=c[1],d=this.fontMetrics.getMetrics(m,h).baseline,this.ctx.font=m,this.ctx.fillStyle=Ss(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Sd(n.styles.textAlign),y=Ad(n),A=0,n.styles.textAlign){case 1:A+=y.width/2;break;case 2:A+=y.width}f=y.add(A,0,0,-y.height/2+1),this.ctx.save(),this.path([new Vh(y.left,y.top),new Vh(y.left+y.width,y.top),new Vh(y.left+y.width,y.top+y.height),new Vh(y.left,y.top+y.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new sc(n.value,f),i.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!wl(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if(0!==(p=n.styles.listStyleImage).type)return[3,18];g=void 0,v=p.url,b.label=15;case 15:return b.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return g=b.sent(),this.ctx.drawImage(g,n.bounds.left-(g.width+10),n.bounds.top),[3,18];case 17:return b.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==n.styles.listStyleType&&(m=this.createFontStyle(i)[0],this.ctx.font=m,this.ctx.fillStyle=Ss(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",y=new mo(n.bounds.left,n.bounds.top+vs(n.styles.paddingTop,n.bounds.width),n.bounds.width,Fu(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new sc(t.listValue,y),i.letterSpacing,Fu(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),b.label=20;case 20:return[2]}}))}))},e.prototype.renderStackContent=function(t){return po(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,l,c,h,d,A,f,p;return go(this,(function(g){switch(g.label){case 0:return wl(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:g.sent(),e=0,n=t.negativeZIndex,g.label=2;case 2:return e<n.length?(p=n[e],[4,this.renderStack(p)]):[3,5];case 3:g.sent(),g.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:g.sent(),r=0,i=t.nonInlineLevel,g.label=7;case 7:return r<i.length?(p=i[r],[4,this.renderNode(p)]):[3,10];case 8:g.sent(),g.label=9;case 9:return r++,[3,7];case 10:o=0,a=t.nonPositionedFloats,g.label=11;case 11:return o<a.length?(p=a[o],[4,this.renderStack(p)]):[3,14];case 12:g.sent(),g.label=13;case 13:return o++,[3,11];case 14:s=0,u=t.nonPositionedInlineLevel,g.label=15;case 15:return s<u.length?(p=u[s],[4,this.renderStack(p)]):[3,18];case 16:g.sent(),g.label=17;case 17:return s++,[3,15];case 18:l=0,c=t.inlineLevel,g.label=19;case 19:return l<c.length?(p=c[l],[4,this.renderNode(p)]):[3,22];case 20:g.sent(),g.label=21;case 21:return l++,[3,19];case 22:h=0,d=t.zeroOrAutoZIndexOrTransformedOrOpacity,g.label=23;case 23:return h<d.length?(p=d[h],[4,this.renderStack(p)]):[3,26];case 24:g.sent(),g.label=25;case 25:return h++,[3,23];case 26:A=0,f=t.positiveZIndex,g.label=27;case 27:return A<f.length?(p=f[A],[4,this.renderStack(p)]):[3,30];case 28:g.sent(),g.label=29;case 29:return A++,[3,27];case 30:return[2]}}))}))},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var e=this;t.forEach((function(t,n){var r=Xh(t)?t.start:t;0===n?e.ctx.moveTo(r.x,r.y):e.ctx.lineTo(r.x,r.y),Xh(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))},e.prototype.renderRepeat=function(t,e,n,r){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},e.prototype.resizeImage=function(t,e,n){var r;if(t.width===e&&t.height===n)return t;var i=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return i.width=Math.max(1,e),i.height=Math.max(1,n),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,n),i},e.prototype.renderBackgroundImage=function(t){return po(this,void 0,void 0,(function(){var e,n,r,i,o,a;return go(this,(function(s){switch(s.label){case 0:e=t.styles.backgroundImage.length-1,n=function(n){var i,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y,b,w,x,_,T,E,S,M,C,I,N,B,k,P,D;return go(this,(function(L){switch(L.label){case 0:if(0!==n.type)return[3,5];i=void 0,o=n.url,L.label=1;case 1:return L.trys.push([1,3,,4]),[4,r.context.cache.match(o)];case 2:return i=L.sent(),[3,4];case 3:return L.sent(),r.context.logger.error("Error loading background-image "+o),[3,4];case 4:return i&&(a=fd(t,e,[i.width,i.height,i.width/i.height]),y=a[0],E=a[1],S=a[2],x=a[3],_=a[4],v=r.ctx.createPattern(r.resizeImage(i,x,_),"repeat"),r.renderRepeat(y,v,E,S)),[3,6];case 5:!function(t){return 1===t.type}(n)?function(t){return 2===t.type}(n)&&(m=fd(t,e,[null,null,null]),y=m[0],b=m[1],w=m[2],x=m[3],_=m[4],T=0===n.position.length?[fs]:n.position,E=vs(T[0],x),S=vs(T[T.length-1],_),M=function(t,e,n,r,i){var o=0,a=0;switch(t.size){case 0:0===t.shape?o=a=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):1===t.shape&&(o=Math.min(Math.abs(e),Math.abs(e-r)),a=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(0===t.shape)o=a=Math.min(js(e,n),js(e,n-i),js(e-r,n),js(e-r,n-i));else if(1===t.shape){var s=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(e),Math.abs(e-r)),u=zs(r,i,e,n,!0),l=u[0],c=u[1];a=s*(o=js(l-e,(c-n)/s))}break;case 1:0===t.shape?o=a=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):1===t.shape&&(o=Math.max(Math.abs(e),Math.abs(e-r)),a=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(0===t.shape)o=a=Math.max(js(e,n),js(e,n-i),js(e-r,n),js(e-r,n-i));else if(1===t.shape){s=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(e),Math.abs(e-r));var h=zs(r,i,e,n,!1);l=h[0],c=h[1],a=s*(o=js(l-e,(c-n)/s))}}return Array.isArray(t.size)&&(o=vs(t.size[0],r),a=2===t.size.length?vs(t.size[1],i):o),[o,a]}(n,E,S,x,_),C=M[0],I=M[1],C>0&&I>0&&(N=r.ctx.createRadialGradient(b+E,w+S,0,b+E,w+S,C),Fs(n.stops,2*C).forEach((function(t){return N.addColorStop(t.stop,Ss(t.color))})),r.path(y),r.ctx.fillStyle=N,C!==I?(B=t.bounds.left+.5*t.bounds.width,k=t.bounds.top+.5*t.bounds.height,D=1/(P=I/C),r.ctx.save(),r.ctx.translate(B,k),r.ctx.transform(1,0,0,P,0,0),r.ctx.translate(-B,-k),r.ctx.fillRect(b,D*(w-k)+k,x,_*D),r.ctx.restore()):r.ctx.fill())):(s=fd(t,e,[null,null,null]),y=s[0],E=s[1],S=s[2],x=s[3],_=s[4],u=Us(n.angle,x,_),l=u[0],c=u[1],h=u[2],d=u[3],A=u[4],(f=document.createElement("canvas")).width=x,f.height=_,p=f.getContext("2d"),g=p.createLinearGradient(c,d,h,A),Fs(n.stops,l).forEach((function(t){return g.addColorStop(t.stop,Ss(t.color))})),p.fillStyle=g,p.fillRect(0,0,x,_),x>0&&_>0&&(v=r.ctx.createPattern(f,"repeat"),r.renderRepeat(y,v,E,S))),L.label=6;case 6:return e--,[2]}}))},r=this,i=0,o=t.styles.backgroundImage.slice(0).reverse(),s.label=1;case 1:return i<o.length?(a=o[i],[5,n(a)]):[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},e.prototype.renderSolidBorder=function(t,e,n){return po(this,void 0,void 0,(function(){return go(this,(function(r){return this.path(ld(n,e)),this.ctx.fillStyle=Ss(t),this.ctx.fill(),[2]}))}))},e.prototype.renderDoubleBorder=function(t,e,n,r){return po(this,void 0,void 0,(function(){var i,o;return go(this,(function(a){switch(a.label){case 0:return e<3?[4,this.renderSolidBorder(t,n,r)]:[3,2];case 1:return a.sent(),[2];case 2:return i=function(t,e){switch(e){case 0:return hd(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return hd(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return hd(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return hd(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}}(r,n),this.path(i),this.ctx.fillStyle=Ss(t),this.ctx.fill(),o=function(t,e){switch(e){case 0:return hd(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return hd(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return hd(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return hd(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}}(r,n),this.path(o),this.ctx.fill(),[2]}}))}))},e.prototype.renderNodeBackgroundAndBorders=function(t){return po(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,l=this;return go(this,(function(c){switch(c.label){case 0:return this.applyEffects(t.getEffects(2)),e=t.container.styles,n=!Es(e.backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],i=Ed(md(e.backgroundClip,0),t.curves),n||e.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Es(e.backgroundColor)||(this.ctx.fillStyle=Ss(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:c.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){l.ctx.save();var n=Zh(t.curves),r=e.inset?0:1e4,i=function(t,e,n,r,i){return t.map((function(t,o){switch(o){case 0:return t.add(e,n);case 1:return t.add(e+r,n);case 2:return t.add(e+r,n+i);case 3:return t.add(e,n+i)}return t}))}(n,-r+(e.inset?1:-1)*e.spread.number,(e.inset?1:-1)*e.spread.number,e.spread.number*(e.inset?-2:2),e.spread.number*(e.inset?-2:2));e.inset?(l.path(n),l.ctx.clip(),l.mask(i)):(l.mask(n),l.ctx.clip(),l.path(i)),l.ctx.shadowOffsetX=e.offsetX.number+r,l.ctx.shadowOffsetY=e.offsetY.number,l.ctx.shadowColor=Ss(e.color),l.ctx.shadowBlur=e.blur.number,l.ctx.fillStyle=e.inset?Ss(e.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),c.label=2;case 2:o=0,a=0,s=r,c.label=3;case 3:return a<s.length?0!==(u=s[a]).style&&!Es(u.color)&&u.width>0?2!==u.style?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,2)]:[3,11]:[3,13];case 4:return c.sent(),[3,11];case 5:return 3!==u.style?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,3)];case 6:return c.sent(),[3,11];case 7:return 4!==u.style?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,t.curves)];case 8:return c.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,t.curves)];case 10:c.sent(),c.label=11;case 11:o++,c.label=12;case 12:return a++,[3,3];case 13:return[2]}}))}))},e.prototype.renderDashedDottedBorder=function(t,e,n,r,i){return po(this,void 0,void 0,(function(){var o,a,s,u,l,c,h,d,A,f,p,g,v,m,y,b;return go(this,(function(w){return this.ctx.save(),o=function(t,e){switch(e){case 0:return cd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return cd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return cd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return cd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}}(r,n),a=ld(r,n),2===i&&(this.path(a),this.ctx.clip()),Xh(a[0])?(s=a[0].start.x,u=a[0].start.y):(s=a[0].x,u=a[0].y),Xh(a[1])?(l=a[1].end.x,c=a[1].end.y):(l=a[1].x,c=a[1].y),h=0===n||2===n?Math.abs(s-l):Math.abs(u-c),this.ctx.beginPath(),3===i?this.formatPath(o):this.formatPath(a.slice(0,2)),d=e<3?3*e:2*e,A=e<3?2*e:e,3===i&&(d=e,A=e),f=!0,h<=2*d?f=!1:h<=2*d+A?(d*=p=h/(2*d+A),A*=p):(g=Math.floor((h+A)/(d+A)),v=(h-g*d)/(g-1),A=(m=(h-(g+1)*d)/g)<=0||Math.abs(A-v)<Math.abs(A-m)?v:m),f&&(3===i?this.ctx.setLineDash([0,d+A]):this.ctx.setLineDash([d,A])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=Ss(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(Xh(a[0])&&(y=a[3],b=a[0],this.ctx.beginPath(),this.formatPath([new Vh(y.end.x,y.end.y),new Vh(b.start.x,b.start.y)]),this.ctx.stroke()),Xh(a[1])&&(y=a[1],b=a[2],this.ctx.beginPath(),this.formatPath([new Vh(y.end.x,y.end.y),new Vh(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},e.prototype.render=function(t){return po(this,void 0,void 0,(function(){var e;return go(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ss(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),e=ud(t),[4,this.renderStack(e)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},e}(xd),Td=function(t){return t instanceof Bc||t instanceof Nc||t instanceof Ic&&t.type!==Sc&&t.type!==Ec},Ed=function(t,e){switch(t){case 0:return Zh(e);case 2:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(e);default:return Jh(e)}},Sd=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},Md=["-apple-system","system-ui"],Cd=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter((function(t){return-1===Md.indexOf(t)})):t},Id=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return Ao(e,t),e.prototype.render=function(t){return po(this,void 0,void 0,(function(){var e,n;return go(this,(function(r){switch(r.label){case 0:return e=ic(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,Nd(e)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ss(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},e}(xd),Nd=function(t){return new Promise((function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},Bd=function(){function t(t){var e=t.id,n=t.enabled;this.id=e,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,vo([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,vo([this.id,this.getTime()+"ms"],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,vo([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,vo([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.instances={},t}(),kd=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new Bd({id:this.instanceName,enabled:e.logging}),this.cache=null!==(r=e.cache)&&void 0!==r?r:new Oh(this,e)}return t.instanceCount=1,t}();"undefined"!=typeof window&&Lh.setContext(window);var Pd=function(t,e){return po(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,h,d,A,f,p,g,v,m,y,b,w,x,T,E,S,M,C,I,N,B,k,P,D,L,O,R,F,U,j;return go(this,(function(z){switch(z.label){case 0:if(!t||"object"!=_(t))return[2,Promise.reject("Invalid element provided as first argument")];if(!(n=t.ownerDocument))throw new Error("Element is not attached to a Document");if(!(r=n.defaultView))throw new Error("Document is not attached to a Window");return i={allowTaint:null!==(T=e.allowTaint)&&void 0!==T&&T,imageTimeout:null!==(E=e.imageTimeout)&&void 0!==E?E:15e3,proxy:e.proxy,useCORS:null!==(S=e.useCORS)&&void 0!==S&&S},o=fo({logging:null===(M=e.logging)||void 0===M||M,cache:e.cache},i),a={windowWidth:null!==(C=e.windowWidth)&&void 0!==C?C:r.innerWidth,windowHeight:null!==(I=e.windowHeight)&&void 0!==I?I:r.innerHeight,scrollX:null!==(N=e.scrollX)&&void 0!==N?N:r.pageXOffset,scrollY:null!==(B=e.scrollY)&&void 0!==B?B:r.pageYOffset},s=new mo(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),u=new kd(o,s),l=null!==(k=e.foreignObjectRendering)&&void 0!==k&&k,c={allowTaint:null!==(P=e.allowTaint)&&void 0!==P&&P,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:l,copyStyles:l},u.logger.debug("Starting document clone with size "+s.width+"x"+s.height+" scrolled to "+-s.left+","+-s.top),h=new yh(u,t,c),(d=h.clonedReferenceElement)?[4,h.toIFrame(n,s)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return A=z.sent(),f=Yc(d)||function(t){return"HTML"===t.tagName}(d)?function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),i=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new mo(0,0,r,i)}(d.ownerDocument):yo(u,d),p=f.width,g=f.height,v=f.left,m=f.top,y=Dd(u,d,e.backgroundColor),b={canvas:e.canvas,backgroundColor:y,scale:null!==(L=null!==(D=e.scale)&&void 0!==D?D:r.devicePixelRatio)&&void 0!==L?L:1,x:(null!==(O=e.x)&&void 0!==O?O:0)+v,y:(null!==(R=e.y)&&void 0!==R?R:0)+m,width:null!==(F=e.width)&&void 0!==F?F:Math.ceil(p),height:null!==(U=e.height)&&void 0!==U?U:Math.ceil(g)},l?(u.logger.debug("Document cloned, using foreign object rendering"),[4,new Id(u,b).render(d)]):[3,3];case 2:return w=z.sent(),[3,5];case 3:return u.logger.debug("Document cloned, element located at "+v+","+m+" with size "+p+"x"+g+" using computed rendering"),u.logger.debug("Starting DOM parsing"),x=Oc(u,d),y===x.styles.backgroundColor&&(x.styles.backgroundColor=Ds.TRANSPARENT),u.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),[4,new _d(u,b).render(x)];case 4:w=z.sent(),z.label=5;case 5:return(!(null!==(j=e.removeContainer)&&void 0!==j)||j)&&(yh.destroy(A)||u.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),u.logger.debug("Finished rendering"),[2,w]}}))}))},Dd=function(t,e,n){var r=e.ownerDocument,i=r.documentElement?Ps(t,getComputedStyle(r.documentElement).backgroundColor):Ds.TRANSPARENT,o=r.body?Ps(t,getComputedStyle(r.body).backgroundColor):Ds.TRANSPARENT,a="string"==typeof n?Ps(t,n):null===n?Ds.TRANSPARENT:4294967295;return e===r.documentElement?Es(i)?Es(o)?a:o:i:a},Ld=Object.freeze(Object.defineProperty({__proto__:null,default:function(t,e){return void 0===e&&(e={}),Pd(t,e)}},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.4.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.1/LICENSE */function Od(t){return Od="function"==typeof Symbol&&"symbol"==_(Symbol.iterator)?function(t){return _(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_(t)},Od(t)}function Rd(t,e){return(Rd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fd(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Ud(t,e,n){return(Ud=Fd()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Rd(i,n.prototype),i}).apply(null,arguments)}function jd(t){return function(t){if(Array.isArray(t))return zd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return zd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zd(t,e)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Hd=Object.hasOwnProperty,Qd=Object.setPrototypeOf,Gd=Object.isFrozen,Vd=Object.getPrototypeOf,Wd=Object.getOwnPropertyDescriptor,Yd=Object.freeze,Xd=Object.seal,qd=Object.create,Kd="undefined"!=typeof Reflect&&Reflect,Zd=Kd.apply,Jd=Kd.construct;Zd||(Zd=function(t,e,n){return t.apply(e,n)}),Yd||(Yd=function(t){return t}),Xd||(Xd=function(t){return t}),Jd||(Jd=function(t,e){return Ud(t,jd(e))});var $d=cA(Array.prototype.forEach),tA=cA(Array.prototype.pop),eA=cA(Array.prototype.push),nA=cA(String.prototype.toLowerCase),rA=cA(String.prototype.toString),iA=cA(String.prototype.match),oA=cA(String.prototype.replace),aA=cA(String.prototype.indexOf),sA=cA(String.prototype.trim),uA=cA(RegExp.prototype.test),lA=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Jd(t,n)}}(TypeError);function cA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Zd(t,e,r)}}function hA(t,e,n){n=n||nA,Qd&&Qd(t,null);for(var r=e.length;r--;){var i=e[r];if("string"==typeof i){var o=n(i);o!==i&&(Gd(e)||(e[r]=o),i=o)}t[i]=!0}return t}function dA(t){var e,n=qd(null);for(e in t)Zd(Hd,t,[e])&&(n[e]=t[e]);return n}function AA(t,e){for(;null!==t;){var n=Wd(t,e);if(n){if(n.get)return cA(n.get);if("function"==typeof n.value)return cA(n.value)}t=Vd(t)}return function(t){return console.warn("fallback value for",t),null}}var fA=Yd(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pA=Yd(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gA=Yd(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vA=Yd(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mA=Yd(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),yA=Yd(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),bA=Yd(["#text"]),wA=Yd(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),xA=Yd(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_A=Yd(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),TA=Yd(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),EA=Xd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),SA=Xd(/<%[\w\W]*|[\w\W]*%>/gm),MA=Xd(/\${[\w\W]*}/gm),CA=Xd(/^data-[\-\w.\u00B7-\uFFFF]/),IA=Xd(/^aria-[\-\w]+$/),NA=Xd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),BA=Xd(/^(?:\w+script|data):/i),kA=Xd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PA=Xd(/^html$/i),DA=function(){return"undefined"==typeof window?null:window},LA=function(t,e){if("object"!==Od(t)||"function"!=typeof t.createPolicy)return null;var n=null,r="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(r)&&(n=e.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var OA=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DA(),n=function(e){return t(e)};if(n.version="2.4.1",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,i=e.document,o=e.DocumentFragment,a=e.HTMLTemplateElement,s=e.Node,u=e.Element,l=e.NodeFilter,c=e.NamedNodeMap,h=void 0===c?e.NamedNodeMap||e.MozNamedAttrMap:c,d=e.HTMLFormElement,A=e.DOMParser,f=e.trustedTypes,p=u.prototype,g=AA(p,"cloneNode"),v=AA(p,"nextSibling"),m=AA(p,"childNodes"),y=AA(p,"parentNode");if("function"==typeof a){var b=i.createElement("template");b.content&&b.content.ownerDocument&&(i=b.content.ownerDocument)}var w=LA(f,r),x=w?w.createHTML(""):"",_=i,T=_.implementation,E=_.createNodeIterator,S=_.createDocumentFragment,M=_.getElementsByTagName,C=r.importNode,I={};try{I=dA(i).documentMode?i.documentMode:{}}catch(t){}var N={};n.isSupported="function"==typeof y&&T&&void 0!==T.createHTMLDocument&&9!==I;var B,k,P=EA,D=SA,L=MA,O=CA,R=IA,F=BA,U=kA,j=NA,z=null,H=hA({},[].concat(jd(fA),jd(pA),jd(gA),jd(mA),jd(bA))),Q=null,G=hA({},[].concat(jd(wA),jd(xA),jd(_A),jd(TA))),V=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,Y=null,X=!0,q=!0,K=!1,Z=!1,J=!1,$=!1,tt=!1,et=!1,nt=!1,rt=!1,it=!0,ot=!1,at="user-content-",st=!0,ut=!1,lt={},ct=null,ht=hA({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),dt=null,At=hA({},["audio","video","img","source","image","track"]),ft=null,pt=hA({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),gt="http://www.w3.org/1998/Math/MathML",vt="http://www.w3.org/2000/svg",mt="http://www.w3.org/1999/xhtml",yt=mt,bt=!1,wt=null,xt=hA({},[gt,vt,mt],rA),_t=["application/xhtml+xml","text/html"],Tt="text/html",Et=null,St=i.createElement("form"),Mt=function(t){return t instanceof RegExp||t instanceof Function},Ct=function(t){Et&&Et===t||((!t||"object"!==Od(t))&&(t={}),t=dA(t),B=B=-1===_t.indexOf(t.PARSER_MEDIA_TYPE)?Tt:t.PARSER_MEDIA_TYPE,k="application/xhtml+xml"===B?rA:nA,z="ALLOWED_TAGS"in t?hA({},t.ALLOWED_TAGS,k):H,Q="ALLOWED_ATTR"in t?hA({},t.ALLOWED_ATTR,k):G,wt="ALLOWED_NAMESPACES"in t?hA({},t.ALLOWED_NAMESPACES,rA):xt,ft="ADD_URI_SAFE_ATTR"in t?hA(dA(pt),t.ADD_URI_SAFE_ATTR,k):pt,dt="ADD_DATA_URI_TAGS"in t?hA(dA(At),t.ADD_DATA_URI_TAGS,k):At,ct="FORBID_CONTENTS"in t?hA({},t.FORBID_CONTENTS,k):ht,W="FORBID_TAGS"in t?hA({},t.FORBID_TAGS,k):{},Y="FORBID_ATTR"in t?hA({},t.FORBID_ATTR,k):{},lt="USE_PROFILES"in t&&t.USE_PROFILES,X=!1!==t.ALLOW_ARIA_ATTR,q=!1!==t.ALLOW_DATA_ATTR,K=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Z=t.SAFE_FOR_TEMPLATES||!1,J=t.WHOLE_DOCUMENT||!1,et=t.RETURN_DOM||!1,nt=t.RETURN_DOM_FRAGMENT||!1,rt=t.RETURN_TRUSTED_TYPE||!1,tt=t.FORCE_BODY||!1,it=!1!==t.SANITIZE_DOM,ot=t.SANITIZE_NAMED_PROPS||!1,st=!1!==t.KEEP_CONTENT,ut=t.IN_PLACE||!1,j=t.ALLOWED_URI_REGEXP||j,yt=t.NAMESPACE||mt,t.CUSTOM_ELEMENT_HANDLING&&Mt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Mt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Z&&(q=!1),nt&&(et=!0),lt&&(z=hA({},jd(bA)),Q=[],!0===lt.html&&(hA(z,fA),hA(Q,wA)),!0===lt.svg&&(hA(z,pA),hA(Q,xA),hA(Q,TA)),!0===lt.svgFilters&&(hA(z,gA),hA(Q,xA),hA(Q,TA)),!0===lt.mathMl&&(hA(z,mA),hA(Q,_A),hA(Q,TA))),t.ADD_TAGS&&(z===H&&(z=dA(z)),hA(z,t.ADD_TAGS,k)),t.ADD_ATTR&&(Q===G&&(Q=dA(Q)),hA(Q,t.ADD_ATTR,k)),t.ADD_URI_SAFE_ATTR&&hA(ft,t.ADD_URI_SAFE_ATTR,k),t.FORBID_CONTENTS&&(ct===ht&&(ct=dA(ct)),hA(ct,t.FORBID_CONTENTS,k)),st&&(z["#text"]=!0),J&&hA(z,["html","head","body"]),z.table&&(hA(z,["tbody"]),delete W.tbody),Yd&&Yd(t),Et=t)},It=hA({},["mi","mo","mn","ms","mtext"]),Nt=hA({},["foreignobject","desc","title","annotation-xml"]),Bt=hA({},["title","style","font","a","script"]),kt=hA({},pA);hA(kt,gA),hA(kt,vA);var Pt=hA({},mA);hA(Pt,yA);var Dt=function(t){var e=y(t);(!e||!e.tagName)&&(e={namespaceURI:yt,tagName:"template"});var n=nA(t.tagName),r=nA(e.tagName);return!!wt[t.namespaceURI]&&(t.namespaceURI===vt?e.namespaceURI===mt?"svg"===n:e.namespaceURI===gt?"svg"===n&&("annotation-xml"===r||It[r]):Boolean(kt[n]):t.namespaceURI===gt?e.namespaceURI===mt?"math"===n:e.namespaceURI===vt?"math"===n&&Nt[r]:Boolean(Pt[n]):t.namespaceURI===mt?!(e.namespaceURI===vt&&!Nt[r]||e.namespaceURI===gt&&!It[r])&&(!Pt[n]&&(Bt[n]||!kt[n])):!("application/xhtml+xml"!==B||!wt[t.namespaceURI]))},Lt=function(t){eA(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=x}catch(e){t.remove()}}},Ot=function(t,e){try{eA(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){eA(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!Q[t])if(et||nt)try{Lt(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},Rt=function(t){var e,n;if(tt)t="<remove></remove>"+t;else{var r=iA(t,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===B&&yt===mt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var o=w?w.createHTML(t):t;if(yt===mt)try{e=(new A).parseFromString(o,B)}catch(t){}if(!e||!e.documentElement){e=T.createDocument(yt,"template",null);try{e.documentElement.innerHTML=bt?"":o}catch(t){}}var a=e.body||e.documentElement;return t&&n&&a.insertBefore(i.createTextNode(n),a.childNodes[0]||null),yt===mt?M.call(e,J?"html":"body")[0]:J?e.documentElement:a},Ft=function(t){return E.call(t.ownerDocument||t,t,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Ut=function(t){return t instanceof d&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof h)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},jt=function(t){return"object"===Od(s)?t instanceof s:t&&"object"===Od(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},zt=function(t,e,r){!N[t]||$d(N[t],(function(t){t.call(n,e,r,Et)}))},Ht=function(t){var e;if(zt("beforeSanitizeElements",t,null),Ut(t)||uA(/[\u0080-\uFFFF]/,t.nodeName))return Lt(t),!0;var r=k(t.nodeName);if(zt("uponSanitizeElement",t,{tagName:r,allowedTags:z}),t.hasChildNodes()&&!jt(t.firstElementChild)&&(!jt(t.content)||!jt(t.content.firstElementChild))&&uA(/<[/\w]/g,t.innerHTML)&&uA(/<[/\w]/g,t.textContent)||"select"===r&&uA(/<template/i,t.innerHTML))return Lt(t),!0;if(!z[r]||W[r]){if(!W[r]&&Gt(r)&&(V.tagNameCheck instanceof RegExp&&uA(V.tagNameCheck,r)||V.tagNameCheck instanceof Function&&V.tagNameCheck(r)))return!1;if(st&&!ct[r]){var i=y(t)||t.parentNode,o=m(t)||t.childNodes;if(o&&i)for(var a=o.length-1;a>=0;--a)i.insertBefore(g(o[a],!0),v(t))}return Lt(t),!0}return t instanceof u&&!Dt(t)||("noscript"===r||"noembed"===r)&&uA(/<\/no(script|embed)/i,t.innerHTML)?(Lt(t),!0):(Z&&3===t.nodeType&&(e=t.textContent,e=oA(e,P," "),e=oA(e,D," "),e=oA(e,L," "),t.textContent!==e&&(eA(n.removed,{element:t.cloneNode()}),t.textContent=e)),zt("afterSanitizeElements",t,null),!1)},Qt=function(t,e,n){if(it&&("id"===e||"name"===e)&&(n in i||n in St))return!1;if((!q||Y[e]||!uA(O,e))&&(!X||!uA(R,e)))if(!Q[e]||Y[e]){if(!(Gt(t)&&(V.tagNameCheck instanceof RegExp&&uA(V.tagNameCheck,t)||V.tagNameCheck instanceof Function&&V.tagNameCheck(t))&&(V.attributeNameCheck instanceof RegExp&&uA(V.attributeNameCheck,e)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(e))||"is"===e&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&uA(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(!ft[e]&&!uA(j,oA(n,U,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==aA(n,"data:")||!dt[t])&&(!K||uA(F,oA(n,U,"")))&&n)return!1;return!0},Gt=function(t){return t.indexOf("-")>0},Vt=function(t){var e,r,i,o;zt("beforeSanitizeAttributes",t,null);var a=t.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Q};for(o=a.length;o--;){var u=e=a[o],l=u.name,c=u.namespaceURI;if(r="value"===l?e.value:sA(e.value),i=k(l),s.attrName=i,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,zt("uponSanitizeAttribute",t,s),r=s.attrValue,!s.forceKeepAttr&&(Ot(l,t),s.keepAttr)){if(uA(/\/>/i,r)){Ot(l,t);continue}Z&&(r=oA(r,P," "),r=oA(r,D," "),r=oA(r,L," "));var h=k(t.nodeName);if(Qt(h,i,r)){if(ot&&("id"===i||"name"===i)&&(Ot(l,t),r=at+r),w&&"object"===Od(f)&&"function"==typeof f.getAttributeType&&!c)switch(f.getAttributeType(h,i)){case"TrustedHTML":r=w.createHTML(r);break;case"TrustedScriptURL":r=w.createScriptURL(r)}try{c?t.setAttributeNS(c,l,r):t.setAttribute(l,r),tA(n.removed)}catch(t){}}}}zt("afterSanitizeAttributes",t,null)}},Wt=function t(e){var n,r=Ft(e);for(zt("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)zt("uponSanitizeShadowNode",n,null),!Ht(n)&&(n.content instanceof o&&t(n.content),Vt(n));zt("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t){var i,a,u,l,c,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((bt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!jt(t)){if("function"!=typeof t.toString)throw lA("toString is not a function");if("string"!=typeof(t=t.toString()))throw lA("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Od(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof t)return e.toStaticHTML(t);if(jt(t))return e.toStaticHTML(t.outerHTML)}return t}if($||Ct(h),n.removed=[],"string"==typeof t&&(ut=!1),ut){if(t.nodeName){var d=k(t.nodeName);if(!z[d]||W[d])throw lA("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof s)1===(a=(i=Rt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?i=a:i.appendChild(a);else{if(!et&&!Z&&!J&&-1===t.indexOf("<"))return w&&rt?w.createHTML(t):t;if(!(i=Rt(t)))return et?null:rt?x:""}i&&tt&&Lt(i.firstChild);for(var A=Ft(ut?t:i);u=A.nextNode();)3===u.nodeType&&u===l||Ht(u)||(u.content instanceof o&&Wt(u.content),Vt(u),l=u);if(l=null,ut)return t;if(et){if(nt)for(c=S.call(i.ownerDocument);i.firstChild;)c.appendChild(i.firstChild);else c=i;return Q.shadowroot&&(c=C.call(r,c,!0)),c}var f=J?i.outerHTML:i.innerHTML;return J&&z["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&uA(PA,i.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+f),Z&&(f=oA(f,P," "),f=oA(f,D," "),f=oA(f,L," ")),w&&rt?w.createHTML(f):f},n.setConfig=function(t){Ct(t),$=!0},n.clearConfig=function(){Et=null,$=!1},n.isValidAttribute=function(t,e,n){Et||Ct({});var r=k(t),i=k(e);return Qt(r,i,n)},n.addHook=function(t,e){"function"==typeof e&&(N[t]=N[t]||[],eA(N[t],e))},n.removeHook=function(t){if(N[t])return tA(N[t])},n.removeHooks=function(t){N[t]&&(N[t]=[])},n.removeAllHooks=function(){N={}},n}(),RA=Object.freeze(Object.defineProperty({__proto__:null,default:OA},Symbol.toStringTag,{value:"Module"})),FA=function(t){return t&&t.Math==Math&&t},UA=FA("object"==("undefined"==typeof globalThis?"undefined":_(globalThis))&&globalThis)||FA("object"==("undefined"==typeof window?"undefined":_(window))&&window)||FA("object"==("undefined"==typeof self?"undefined":_(self))&&self)||FA("object"==_(O)&&O)||function(){return this}()||Function("return this")(),jA={},zA=function(t){try{return!!t()}catch(t){return!0}},HA=!zA((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),QA=!zA((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),GA=QA,VA=Function.prototype.call,WA=GA?VA.bind(VA):function(){return VA.apply(VA,arguments)},YA={},XA={}.propertyIsEnumerable,qA=Object.getOwnPropertyDescriptor,KA=qA&&!XA.call({1:2},1);YA.f=KA?function(t){var e=qA(this,t);return!!e&&e.enumerable}:XA;var ZA,JA,$A=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},tf=QA,ef=Function.prototype,nf=ef.bind,rf=ef.call,of=tf&&nf.bind(rf,rf),af=tf?function(t){return t&&of(t)}:function(t){return t&&function(){return rf.apply(t,arguments)}},sf=af,uf=sf({}.toString),lf=sf("".slice),cf=function(t){return lf(uf(t),8,-1)},hf=zA,df=cf,Af=Object,ff=af("".split),pf=hf((function(){return!Af("z").propertyIsEnumerable(0)}))?function(t){return"String"==df(t)?ff(t,""):Af(t)}:Af,gf=TypeError,vf=function(t){if(null==t)throw gf("Can't call method on "+t);return t},mf=pf,yf=vf,bf=function(t){return mf(yf(t))},wf=function(t){return"function"==typeof t},xf=wf,_f=function(t){return"object"==_(t)?null!==t:xf(t)},Tf=UA,Ef=wf,Sf=function(t){return Ef(t)?t:void 0},Mf=function(t,e){return arguments.length<2?Sf(Tf[t]):Tf[t]&&Tf[t][e]},Cf=af({}.isPrototypeOf),If=Mf("navigator","userAgent")||"",Nf=UA,Bf=If,kf=Nf.process,Pf=Nf.Deno,Df=kf&&kf.versions||Pf&&Pf.version,Lf=Df&&Df.v8;Lf&&(JA=(ZA=Lf.split("."))[0]>0&&ZA[0]<4?1:+(ZA[0]+ZA[1])),!JA&&Bf&&((!(ZA=Bf.match(/Edge\/(\d+)/))||ZA[1]>=74)&&((ZA=Bf.match(/Chrome\/(\d+)/))&&(JA=+ZA[1])));var Of=JA,Rf=Of,Ff=zA,Uf=!!Object.getOwnPropertySymbols&&!Ff((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Rf&&Rf<41})),jf=Uf&&!Symbol.sham&&"symbol"==_(Symbol.iterator),zf=Mf,Hf=wf,Qf=Cf,Gf=Object,Vf=jf?function(t){return"symbol"==_(t)}:function(t){var e=zf("Symbol");return Hf(e)&&Qf(e.prototype,Gf(t))},Wf=String,Yf=function(t){try{return Wf(t)}catch(t){return"Object"}},Xf=wf,qf=Yf,Kf=TypeError,Zf=function(t){if(Xf(t))return t;throw Kf(qf(t)+" is not a function")},Jf=Zf,$f=function(t,e){var n=t[e];return null==n?void 0:Jf(n)},tp=WA,ep=wf,np=_f,rp=TypeError,ip={exports:{}},op=UA,ap=Object.defineProperty,sp=function(t,e){try{ap(op,t,{value:e,configurable:!0,writable:!0})}catch(n){op[t]=e}return e},up=sp,lp="__core-js_shared__",cp=UA[lp]||up(lp,{}),hp=cp;(ip.exports=function(t,e){return hp[t]||(hp[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.8",mode:"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.8/LICENSE",source:"https://github.com/zloirock/core-js"});var dp=vf,Ap=Object,fp=function(t){return Ap(dp(t))},pp=fp,gp=af({}.hasOwnProperty),vp=Object.hasOwn||function(t,e){return gp(pp(t),e)},mp=af,yp=0,bp=Math.random(),wp=mp(1..toString),xp=function(t){return"Symbol("+(void 0===t?"":t)+")_"+wp(++yp+bp,36)},_p=UA,Tp=ip.exports,Ep=vp,Sp=xp,Mp=Uf,Cp=jf,Ip=Tp("wks"),Np=_p.Symbol,Bp=Np&&Np.for,kp=Cp?Np:Np&&Np.withoutSetter||Sp,Pp=function(t){if(!Ep(Ip,t)||!Mp&&"string"!=typeof Ip[t]){var e="Symbol."+t;Mp&&Ep(Np,t)?Ip[t]=Np[t]:Ip[t]=Cp&&Bp?Bp(e):kp(e)}return Ip[t]},Dp=WA,Lp=_f,Op=Vf,Rp=$f,Fp=function(t,e){var n,r;if("string"===e&&ep(n=t.toString)&&!np(r=tp(n,t))||ep(n=t.valueOf)&&!np(r=tp(n,t))||"string"!==e&&ep(n=t.toString)&&!np(r=tp(n,t)))return r;throw rp("Can't convert object to primitive value")},Up=TypeError,jp=Pp("toPrimitive"),zp=function(t,e){if(!Lp(t)||Op(t))return t;var n,r=Rp(t,jp);if(r){if(void 0===e&&(e="default"),n=Dp(r,t,e),!Lp(n)||Op(n))return n;throw Up("Can't convert object to primitive value")}return void 0===e&&(e="number"),Fp(t,e)},Hp=Vf,Qp=function(t){var e=zp(t,"string");return Hp(e)?e:e+""},Gp=_f,Vp=UA.document,Wp=Gp(Vp)&&Gp(Vp.createElement),Yp=function(t){return Wp?Vp.createElement(t):{}},Xp=Yp,qp=!HA&&!zA((function(){return 7!=Object.defineProperty(Xp("div"),"a",{get:function(){return 7}}).a})),Kp=HA,Zp=WA,Jp=YA,$p=$A,tg=bf,eg=Qp,ng=vp,rg=qp,ig=Object.getOwnPropertyDescriptor;jA.f=Kp?ig:function(t,e){if(t=tg(t),e=eg(e),rg)try{return ig(t,e)}catch(t){}if(ng(t,e))return $p(!Zp(Jp.f,t,e),t[e])};var og={},ag=HA&&zA((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),sg=_f,ug=String,lg=TypeError,cg=function(t){if(sg(t))return t;throw lg(ug(t)+" is not an object")},hg=HA,dg=qp,Ag=ag,fg=cg,pg=Qp,gg=TypeError,vg=Object.defineProperty,mg=Object.getOwnPropertyDescriptor,yg="enumerable",bg="configurable",wg="writable";og.f=hg?Ag?function(t,e,n){if(fg(t),e=pg(e),fg(n),"function"==typeof t&&"prototype"===e&&"value"in n&&wg in n&&!n[wg]){var r=mg(t,e);r&&r[wg]&&(t[e]=n.value,n={configurable:bg in n?n[bg]:r[bg],enumerable:yg in n?n[yg]:r[yg],writable:!1})}return vg(t,e,n)}:vg:function(t,e,n){if(fg(t),e=pg(e),fg(n),dg)try{return vg(t,e,n)}catch(t){}if("get"in n||"set"in n)throw gg("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var xg=og,_g=$A,Tg=HA?function(t,e,n){return xg.f(t,e,_g(1,n))}:function(t,e,n){return t[e]=n,t},Eg={exports:{}},Sg=HA,Mg=vp,Cg=Function.prototype,Ig=Sg&&Object.getOwnPropertyDescriptor,Ng=Mg(Cg,"name"),Bg={EXISTS:Ng,PROPER:Ng&&"something"===function(){}.name,CONFIGURABLE:Ng&&(!Sg||Sg&&Ig(Cg,"name").configurable)},kg=wf,Pg=cp,Dg=af(Function.toString);kg(Pg.inspectSource)||(Pg.inspectSource=function(t){return Dg(t)});var Lg,Og,Rg,Fg=Pg.inspectSource,Ug=wf,jg=Fg,zg=UA.WeakMap,Hg=Ug(zg)&&/native code/.test(jg(zg)),Qg=ip.exports,Gg=xp,Vg=Qg("keys"),Wg=function(t){return Vg[t]||(Vg[t]=Gg(t))},Yg={},Xg=Hg,qg=UA,Kg=af,Zg=_f,Jg=Tg,$g=vp,tv=cp,ev=Wg,nv=Yg,rv="Object already initialized",iv=qg.TypeError,ov=qg.WeakMap;if(Xg||tv.state){var av=tv.state||(tv.state=new ov),sv=Kg(av.get),uv=Kg(av.has),lv=Kg(av.set);Lg=function(t,e){if(uv(av,t))throw new iv(rv);return e.facade=t,lv(av,t,e),e},Og=function(t){return sv(av,t)||{}},Rg=function(t){return uv(av,t)}}else{var cv=ev("state");nv[cv]=!0,Lg=function(t,e){if($g(t,cv))throw new iv(rv);return e.facade=t,Jg(t,cv,e),e},Og=function(t){return $g(t,cv)?t[cv]:{}},Rg=function(t){return $g(t,cv)}}var hv={set:Lg,get:Og,has:Rg,enforce:function(t){return Rg(t)?Og(t):Lg(t,{})},getterFor:function(t){return function(e){var n;if(!Zg(e)||(n=Og(e)).type!==t)throw iv("Incompatible receiver, "+t+" required");return n}}},dv=zA,Av=wf,fv=vp,pv=HA,gv=Bg.CONFIGURABLE,vv=Fg,mv=hv.enforce,yv=hv.get,bv=Object.defineProperty,wv=pv&&!dv((function(){return 8!==bv((function(){}),"length",{value:8}).length})),xv=String(String).split("String"),_v=Eg.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!fv(t,"name")||gv&&t.name!==e)&&bv(t,"name",{value:e,configurable:!0}),wv&&n&&fv(n,"arity")&&t.length!==n.arity&&bv(t,"length",{value:n.arity});try{n&&fv(n,"constructor")&&n.constructor?pv&&bv(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=mv(t);return fv(r,"source")||(r.source=xv.join("string"==typeof e?e:"")),t};Function.prototype.toString=_v((function(){return Av(this)&&yv(this).source||vv(this)}),"toString");var Tv=wf,Ev=Tg,Sv=Eg.exports,Mv=sp,Cv=function(t,e,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:e;return Tv(n)&&Sv(n,o,r),r.global?i?t[e]=n:Mv(e,n):(r.unsafe?t[e]&&(i=!0):delete t[e],i?t[e]=n:Ev(t,e,n)),t},Iv={},Nv=Math.ceil,Bv=Math.floor,kv=Math.trunc||function(t){var e=+t;return(e>0?Bv:Nv)(e)},Pv=kv,Dv=function(t){var e=+t;return e!=e||0===e?0:Pv(e)},Lv=Dv,Ov=Math.max,Rv=Math.min,Fv=function(t,e){var n=Lv(t);return n<0?Ov(n+e,0):Rv(n,e)},Uv=Dv,jv=Math.min,zv=function(t){return t>0?jv(Uv(t),9007199254740991):0},Hv=zv,Qv=function(t){return Hv(t.length)},Gv=bf,Vv=Fv,Wv=Qv,Yv=function(t){return function(e,n,r){var i,o=Gv(e),a=Wv(o),s=Vv(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Xv={includes:Yv(!0),indexOf:Yv(!1)},qv=vp,Kv=bf,Zv=Xv.indexOf,Jv=Yg,$v=af([].push),tm=function(t,e){var n,r=Kv(t),i=0,o=[];for(n in r)!qv(Jv,n)&&qv(r,n)&&$v(o,n);for(;e.length>i;)qv(r,n=e[i++])&&(~Zv(o,n)||$v(o,n));return o},em=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],nm=tm,rm=em.concat("length","prototype");Iv.f=Object.getOwnPropertyNames||function(t){return nm(t,rm)};var im={};im.f=Object.getOwnPropertySymbols;var om=Mf,am=Iv,sm=im,um=cg,lm=af([].concat),cm=om("Reflect","ownKeys")||function(t){var e=am.f(um(t)),n=sm.f;return n?lm(e,n(t)):e},hm=vp,dm=cm,Am=jA,fm=og,pm=zA,gm=wf,vm=/#|\.prototype\./,mm=function(t,e){var n=bm[ym(t)];return n==xm||n!=wm&&(gm(e)?pm(e):!!e)},ym=mm.normalize=function(t){return String(t).replace(vm,".").toLowerCase()},bm=mm.data={},wm=mm.NATIVE="N",xm=mm.POLYFILL="P",_m=mm,Tm=UA,Em=jA.f,Sm=Tg,Mm=Cv,Cm=sp,Im=function(t,e,n){for(var r=dm(e),i=fm.f,o=Am.f,a=0;a<r.length;a++){var s=r[a];!hm(t,s)&&(!n||!hm(n,s))&&i(t,s,o(e,s))}},Nm=_m,Bm=function(t,e){var n,r,i,o,a,s=t.target,u=t.global,l=t.stat;if(n=u?Tm:l?Tm[s]||Cm(s,{}):(Tm[s]||{}).prototype)for(r in e){if(o=e[r],t.dontCallGetSet?i=(a=Em(n,r))&&a.value:i=n[r],!Nm(u?r:s+(l?".":"#")+r,t.forced)&&void 0!==i){if(_(o)==_(i))continue;Im(o,i)}(t.sham||i&&i.sham)&&Sm(o,"sham",!0),Mm(n,r,o,t)}},km="process"==cf(UA.process),Pm=wf,Dm=String,Lm=TypeError,Om=af,Rm=cg,Fm=function(t){if("object"==_(t)||Pm(t))return t;throw Lm("Can't set "+Dm(t)+" as a prototype")},Um=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Om(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Rm(n),Fm(r),e?t(n,r):n.__proto__=r,n}}():void 0),jm=og.f,zm=vp,Hm=Pp("toStringTag"),Qm=function(t,e,n){t&&!n&&(t=t.prototype),t&&!zm(t,Hm)&&jm(t,Hm,{configurable:!0,value:e})},Gm=Mf,Vm=og,Wm=HA,Ym=Pp("species"),Xm=Cf,qm=TypeError,Km={};Km[Pp("toStringTag")]="z";var Zm="[object z]"===String(Km),Jm=wf,$m=cf,ty=Pp("toStringTag"),ey=Object,ny="Arguments"==$m(function(){return arguments}()),ry=Zm?$m:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=ey(t),ty))?n:ny?$m(e):"Object"==(r=$m(e))&&Jm(e.callee)?"Arguments":r},iy=af,oy=zA,ay=wf,sy=ry,uy=Fg,ly=function(){},cy=[],hy=Mf("Reflect","construct"),dy=/^\s*(?:class|function)\b/,Ay=iy(dy.exec),fy=!dy.exec(ly),py=function(t){if(!ay(t))return!1;try{return hy(ly,cy,t),!0}catch(t){return!1}},gy=function(t){if(!ay(t))return!1;switch(sy(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return fy||!!Ay(dy,uy(t))}catch(t){return!0}};gy.sham=!0;var vy,my,yy,by,wy=!hy||oy((function(){var t;return py(py.call)||!py(Object)||!py((function(){t=!0}))||t}))?gy:py,xy=wy,_y=Yf,Ty=TypeError,Ey=cg,Sy=function(t){if(xy(t))return t;throw Ty(_y(t)+" is not a constructor")},My=Pp("species"),Cy=function(t,e){var n,r=Ey(t).constructor;return void 0===r||null==(n=Ey(r)[My])?e:Sy(n)},Iy=QA,Ny=Function.prototype,By=Ny.apply,ky=Ny.call,Py="object"==("undefined"==typeof Reflect?"undefined":_(Reflect))&&Reflect.apply||(Iy?ky.bind(By):function(){return ky.apply(By,arguments)}),Dy=Zf,Ly=QA,Oy=af(af.bind),Ry=function(t,e){return Dy(t),void 0===e?t:Ly?Oy(t,e):function(){return t.apply(e,arguments)}},Fy=Mf("document","documentElement"),Uy=af([].slice),jy=TypeError,zy=/(?:ipad|iphone|ipod).*applewebkit/i.test(If),Hy=UA,Qy=Py,Gy=Ry,Vy=wf,Wy=vp,Yy=zA,Xy=Fy,qy=Uy,Ky=Yp,Zy=function(t,e){if(t<e)throw jy("Not enough arguments");return t},Jy=zy,$y=km,tb=Hy.setImmediate,eb=Hy.clearImmediate,nb=Hy.process,rb=Hy.Dispatch,ib=Hy.Function,ob=Hy.MessageChannel,ab=Hy.String,sb=0,ub={},lb="onreadystatechange";try{vy=Hy.location}catch(t){}var cb=function(t){if(Wy(ub,t)){var e=ub[t];delete ub[t],e()}},hb=function(t){return function(){cb(t)}},db=function(t){cb(t.data)},Ab=function(t){Hy.postMessage(ab(t),vy.protocol+"//"+vy.host)};(!tb||!eb)&&(tb=function(t){Zy(arguments.length,1);var e=Vy(t)?t:ib(t),n=qy(arguments,1);return ub[++sb]=function(){Qy(e,void 0,n)},my(sb),sb},eb=function(t){delete ub[t]},$y?my=function(t){nb.nextTick(hb(t))}:rb&&rb.now?my=function(t){rb.now(hb(t))}:ob&&!Jy?(by=(yy=new ob).port2,yy.port1.onmessage=db,my=Gy(by.postMessage,by)):Hy.addEventListener&&Vy(Hy.postMessage)&&!Hy.importScripts&&vy&&"file:"!==vy.protocol&&!Yy(Ab)?(my=Ab,Hy.addEventListener("message",db,!1)):my=lb in Ky("script")?function(t){Xy.appendChild(Ky("script"))[lb]=function(){Xy.removeChild(this),cb(t)}}:function(t){setTimeout(hb(t),0)});var fb,pb,gb,vb,mb,yb,bb,wb,xb={set:tb,clear:eb},_b=UA,Tb=/ipad|iphone|ipod/i.test(If)&&void 0!==_b.Pebble,Eb=/web0s(?!.*chrome)/i.test(If),Sb=UA,Mb=Ry,Cb=jA.f,Ib=xb.set,Nb=zy,Bb=Tb,kb=Eb,Pb=km,Db=Sb.MutationObserver||Sb.WebKitMutationObserver,Lb=Sb.document,Ob=Sb.process,Rb=Sb.Promise,Fb=Cb(Sb,"queueMicrotask"),Ub=Fb&&Fb.value;Ub||(fb=function(){var t,e;for(Pb&&(t=Ob.domain)&&t.exit();pb;){e=pb.fn,pb=pb.next;try{e()}catch(t){throw pb?vb():gb=void 0,t}}gb=void 0,t&&t.enter()},Nb||Pb||kb||!Db||!Lb?!Bb&&Rb&&Rb.resolve?((bb=Rb.resolve(void 0)).constructor=Rb,wb=Mb(bb.then,bb),vb=function(){wb(fb)}):Pb?vb=function(){Ob.nextTick(fb)}:(Ib=Mb(Ib,Sb),vb=function(){Ib(fb)}):(mb=!0,yb=Lb.createTextNode(""),new Db(fb).observe(yb,{characterData:!0}),vb=function(){yb.data=mb=!mb}));var jb=Ub||function(t){var e={fn:t,next:void 0};gb&&(gb.next=e),pb||(pb=e,vb()),gb=e},zb=UA,Hb=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Qb=function(){this.head=null,this.tail=null};Qb.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var Gb=Qb,Vb=UA.Promise,Wb="object"==("undefined"==typeof window?"undefined":_(window))&&"object"!=("undefined"==typeof Deno?"undefined":_(Deno)),Yb=UA,Xb=Vb,qb=wf,Kb=_m,Zb=Fg,Jb=Pp,$b=Wb,tw=Of;Xb&&Xb.prototype;var ew=Jb("species"),nw=!1,rw=qb(Yb.PromiseRejectionEvent),iw=Kb("Promise",(function(){var t=Zb(Xb),e=t!==String(Xb);if(!e&&66===tw)return!0;if(tw>=51&&/native code/.test(t))return!1;var n=new Xb((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[ew]=r,!(nw=n.then((function(){}))instanceof r)||!e&&$b&&!rw})),ow={CONSTRUCTOR:iw,REJECTION_EVENT:rw,SUBCLASSING:nw},aw={},sw=Zf,uw=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=sw(e),this.reject=sw(n)};aw.f=function(t){return new uw(t)};var lw,cw,hw,dw=Bm,Aw=km,fw=UA,pw=WA,gw=Cv,vw=Um,mw=Qm,yw=function(t){var e=Gm(t),n=Vm.f;Wm&&e&&!e[Ym]&&n(e,Ym,{configurable:!0,get:function(){return this}})},bw=Zf,ww=wf,xw=_f,_w=function(t,e){if(Xm(e,t))return t;throw qm("Incorrect invocation")},Tw=Cy,Ew=xb.set,Sw=jb,Mw=function(t,e){var n=zb.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))},Cw=Hb,Iw=Gb,Nw=hv,Bw=Vb,kw=aw,Pw="Promise",Dw=ow.CONSTRUCTOR,Lw=ow.REJECTION_EVENT,Ow=ow.SUBCLASSING,Rw=Nw.getterFor(Pw),Fw=Nw.set,Uw=Bw&&Bw.prototype,jw=Bw,zw=Uw,Hw=fw.TypeError,Qw=fw.document,Gw=fw.process,Vw=kw.f,Ww=Vw,Yw=!!(Qw&&Qw.createEvent&&fw.dispatchEvent),Xw="unhandledrejection",qw=function(t){var e;return!(!xw(t)||!ww(e=t.then))&&e},Kw=function(t,e){var n,r,i,o=e.value,a=1==e.state,s=a?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(a||(2===e.rejection&&ex(e),e.rejection=1),!0===s?n=o:(c&&c.enter(),n=s(o),c&&(c.exit(),i=!0)),n===t.promise?l(Hw("Promise-chain cycle")):(r=qw(n))?pw(r,n,u,l):u(n)):l(o)}catch(t){c&&!i&&c.exit(),l(t)}},Zw=function(t,e){t.notified||(t.notified=!0,Sw((function(){for(var n,r=t.reactions;n=r.get();)Kw(n,t);t.notified=!1,e&&!t.rejection&&$w(t)})))},Jw=function(t,e,n){var r,i;Yw?((r=Qw.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),fw.dispatchEvent(r)):r={promise:e,reason:n},!Lw&&(i=fw["on"+t])?i(r):t===Xw&&Mw("Unhandled promise rejection",n)},$w=function(t){pw(Ew,fw,(function(){var e,n=t.facade,r=t.value;if(tx(t)&&(e=Cw((function(){Aw?Gw.emit("unhandledRejection",r,n):Jw(Xw,n,r)})),t.rejection=Aw||tx(t)?2:1,e.error))throw e.value}))},tx=function(t){return 1!==t.rejection&&!t.parent},ex=function(t){pw(Ew,fw,(function(){var e=t.facade;Aw?Gw.emit("rejectionHandled",e):Jw("rejectionhandled",e,t.value)}))},nx=function(t,e,n){return function(r){t(e,r,n)}},rx=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Zw(t,!0))},ix=function t(e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===n)throw Hw("Promise can't be resolved itself");var i=qw(n);i?Sw((function(){var r={done:!1};try{pw(i,n,nx(t,r,e),nx(rx,r,e))}catch(t){rx(r,t,e)}})):(e.value=n,e.state=1,Zw(e,!1))}catch(t){rx({done:!1},t,e)}}};if(Dw&&(jw=function(t){_w(this,zw),bw(t),pw(lw,this);var e=Rw(this);try{t(nx(ix,e),nx(rx,e))}catch(t){rx(e,t)}},zw=jw.prototype,(lw=function(t){Fw(this,{type:Pw,done:!1,notified:!1,parent:!1,reactions:new Iw,rejection:!1,state:0,value:void 0})}).prototype=gw(zw,"then",(function(t,e){var n=Rw(this),r=Vw(Tw(this,jw));return n.parent=!0,r.ok=!ww(t)||t,r.fail=ww(e)&&e,r.domain=Aw?Gw.domain:void 0,0==n.state?n.reactions.add(r):Sw((function(){Kw(r,n)})),r.promise})),cw=function(){var t=new lw,e=Rw(t);this.promise=t,this.resolve=nx(ix,e),this.reject=nx(rx,e)},kw.f=Vw=function(t){return t===jw||undefined===t?new cw(t):Ww(t)},ww(Bw)&&Uw!==Object.prototype)){hw=Uw.then,Ow||gw(Uw,"then",(function(t,e){var n=this;return new jw((function(t,e){pw(hw,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete Uw.constructor}catch(t){}vw&&vw(Uw,zw)}dw({global:!0,constructor:!0,wrap:!0,forced:Dw},{Promise:jw}),mw(jw,Pw,!1),yw(Pw);var ox={},ax=ox,sx=Pp("iterator"),ux=Array.prototype,lx=ry,cx=$f,hx=ox,dx=Pp("iterator"),Ax=function(t){if(null!=t)return cx(t,dx)||cx(t,"@@iterator")||hx[lx(t)]},fx=WA,px=Zf,gx=cg,vx=Yf,mx=Ax,yx=TypeError,bx=WA,wx=cg,xx=$f,_x=Ry,Tx=WA,Ex=cg,Sx=Yf,Mx=function(t){return void 0!==t&&(ax.Array===t||ux[sx]===t)},Cx=Qv,Ix=Cf,Nx=function(t,e){var n=arguments.length<2?mx(t):e;if(px(n))return gx(fx(n,t));throw yx(vx(t)+" is not iterable")},Bx=Ax,kx=function(t,e,n){var r,i;wx(t);try{if(!(r=xx(t,"return"))){if("throw"===e)throw n;return n}r=bx(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;return wx(r),n},Px=TypeError,Dx=function(t,e){this.stopped=t,this.result=e},Lx=Dx.prototype,Ox=function(t,e,n){var r,i,o,a,s,u,l,c=n&&n.that,h=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),A=!(!n||!n.INTERRUPTED),f=_x(e,c),p=function(t){return r&&kx(r,"normal",t),new Dx(!0,t)},g=function(t){return h?(Ex(t),A?f(t[0],t[1],p):f(t[0],t[1])):A?f(t,p):f(t)};if(d)r=t;else{if(!(i=Bx(t)))throw Px(Sx(t)+" is not iterable");if(Mx(i)){for(o=0,a=Cx(t);a>o;o++)if((s=g(t[o]))&&Ix(Lx,s))return s;return new Dx(!1)}r=Nx(t,i)}for(u=r.next;!(l=Tx(u,r)).done;){try{s=g(l.value)}catch(t){kx(r,"throw",t)}if("object"==_(s)&&s&&Ix(Lx,s))return s}return new Dx(!1)},Rx=Pp("iterator"),Fx=!1;try{var Ux=0,jx={next:function(){return{done:!!Ux++}},return:function(){Fx=!0}};jx[Rx]=function(){return this},Array.from(jx,(function(){throw 2}))}catch(t){}var zx=Vb,Hx=function(t,e){if(!e&&!Fx)return!1;var n=!1;try{var r={};r[Rx]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Qx=ow.CONSTRUCTOR||!Hx((function(t){zx.all(t).then(void 0,(function(){}))})),Gx=WA,Vx=Zf,Wx=aw,Yx=Hb,Xx=Ox;Bm({target:"Promise",stat:!0,forced:Qx},{all:function(t){var e=this,n=Wx.f(e),r=n.resolve,i=n.reject,o=Yx((function(){var n=Vx(e.resolve),o=[],a=0,s=1;Xx(t,(function(t){var u=a++,l=!1;s++,Gx(n,e,t).then((function(t){l||(l=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise}});var qx=Bm,Kx=ow.CONSTRUCTOR,Zx=Vb,Jx=Mf,$x=wf,t_=Cv,e_=Zx&&Zx.prototype;if(qx({target:"Promise",proto:!0,forced:Kx,real:!0},{catch:function(t){return this.then(void 0,t)}}),$x(Zx)){var n_=Jx("Promise").prototype.catch;e_.catch!==n_&&t_(e_,"catch",n_,{unsafe:!0})}var r_=WA,i_=Zf,o_=aw,a_=Hb,s_=Ox;Bm({target:"Promise",stat:!0,forced:Qx},{race:function(t){var e=this,n=o_.f(e),r=n.reject,i=a_((function(){var i=i_(e.resolve);s_(t,(function(t){r_(i,e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var u_=WA,l_=aw;Bm({target:"Promise",stat:!0,forced:ow.CONSTRUCTOR},{reject:function(t){var e=l_.f(this);return u_(e.reject,void 0,t),e.promise}});var c_=cg,h_=_f,d_=aw,A_=Bm,f_=ow.CONSTRUCTOR,p_=function(t,e){if(c_(t),h_(e)&&e.constructor===t)return e;var n=d_.f(t);return(0,n.resolve)(e),n.promise};function g_(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function v_(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){g_(o,r,i,a,s,"next",t)}function s(t){g_(o,r,i,a,s,"throw",t)}a(void 0)}))}}Mf("Promise"),A_({target:"Promise",stat:!0,forced:f_},{resolve:function(t){return p_(this,t)}});var m_=ry,y_=String,b_=function(t){if("Symbol"===m_(t))throw TypeError("Cannot convert a Symbol value to a string");return y_(t)},w_=cg,x_=function(){var t=w_(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},__=zA,T_=UA.RegExp,E_=__((function(){var t=T_("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),S_=E_||__((function(){return!T_("a","y").sticky})),M_=E_||__((function(){var t=T_("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),C_={BROKEN_CARET:M_,MISSED_STICKY:S_,UNSUPPORTED_Y:E_},I_={},N_=tm,B_=em,k_=Object.keys||function(t){return N_(t,B_)},P_=HA,D_=ag,L_=og,O_=cg,R_=bf,F_=k_;I_.f=P_&&!D_?Object.defineProperties:function(t,e){O_(t);for(var n,r=R_(e),i=F_(e),o=i.length,a=0;o>a;)L_.f(t,n=i[a++],r[n]);return t};var U_,j_=cg,z_=I_,H_=em,Q_=Yg,G_=Fy,V_=Yp,W_="prototype",Y_="script",X_=Wg("IE_PROTO"),q_=function(){},K_=function(t){return"<script>"+t+"</"+Y_+">"},Z_=function(t){t.write(K_("")),t.close();var e=t.parentWindow.Object;return t=null,e},J_=function(){try{U_=new ActiveXObject("htmlfile")}catch(t){}J_="undefined"!=typeof document?document.domain&&U_?Z_(U_):function(){var t,e=V_("iframe");return e.style.display="none",G_.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(K_("document.F=Object")),t.close(),t.F}():Z_(U_);for(var t=H_.length;t--;)delete J_[W_][H_[t]];return J_()};Q_[X_]=!0;var $_=Object.create||function(t,e){var n;return null!==t?(q_[W_]=j_(t),n=new q_,q_[W_]=null,n[X_]=t):n=J_(),void 0===e?n:z_.f(n,e)},tT=zA,eT=UA.RegExp,nT=tT((function(){var t=eT(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),rT=zA,iT=UA.RegExp,oT=rT((function(){var t=iT("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),aT=WA,sT=af,uT=b_,lT=x_,cT=C_,hT=ip.exports,dT=$_,AT=hv.get,fT=nT,pT=oT,gT=hT("native-string-replace",String.prototype.replace),vT=RegExp.prototype.exec,mT=vT,yT=sT("".charAt),bT=sT("".indexOf),wT=sT("".replace),xT=sT("".slice),_T=function(){var t=/a/,e=/b*/g;return aT(vT,t,"a"),aT(vT,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),TT=cT.BROKEN_CARET,ET=void 0!==/()??/.exec("")[1];(_T||ET||TT||fT||pT)&&(mT=function(t){var e,n,r,i,o,a,s,u=this,l=AT(u),c=uT(t),h=l.raw;if(h)return h.lastIndex=u.lastIndex,e=aT(mT,h,c),u.lastIndex=h.lastIndex,e;var d=l.groups,A=TT&&u.sticky,f=aT(lT,u),p=u.source,g=0,v=c;if(A&&(f=wT(f,"y",""),-1===bT(f,"g")&&(f+="g"),v=xT(c,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==yT(c,u.lastIndex-1))&&(p="(?: "+p+")",v=" "+v,g++),n=new RegExp("^(?:"+p+")",f)),ET&&(n=new RegExp("^"+p+"$(?!\\s)",f)),_T&&(r=u.lastIndex),i=aT(vT,A?n:u,v),A?i?(i.input=xT(i.input,g),i[0]=xT(i[0],g),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:_T&&i&&(u.lastIndex=u.global?i.index+i[0].length:r),ET&&i&&i.length>1&&aT(gT,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&d)for(i.groups=a=dT(null),o=0;o<d.length;o++)a[(s=d[o])[0]]=i[s[1]];return i});var ST=mT;Bm({target:"RegExp",proto:!0,forced:/./.exec!==ST},{exec:ST});var MT=af,CT=Cv,IT=ST,NT=zA,BT=Pp,kT=Tg,PT=BT("species"),DT=RegExp.prototype,LT=function(t,e,n,r){var i=BT(t),o=!NT((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!NT((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[PT]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var s=MT(/./[i]),u=e(i,""[t],(function(t,e,n,r,i){var a=MT(t),u=e.exec;return u===IT||u===DT.exec?o&&!i?{done:!0,value:s(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));CT(String.prototype,t,u[0]),CT(DT,i,u[1])}r&&kT(DT[i],"sham",!0)},OT=af,RT=Dv,FT=b_,UT=vf,jT=OT("".charAt),zT=OT("".charCodeAt),HT=OT("".slice),QT=function(t){return function(e,n){var r,i,o=FT(UT(e)),a=RT(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=zT(o,a))<55296||r>56319||a+1===s||(i=zT(o,a+1))<56320||i>57343?t?jT(o,a):r:t?HT(o,a,a+2):i-56320+(r-55296<<10)+65536}},GT={codeAt:QT(!1),charAt:QT(!0)}.charAt,VT=function(t,e,n){return e+(n?GT(t,e).length:1)},WT=WA,YT=cg,XT=wf,qT=cf,KT=ST,ZT=TypeError,JT=function(t,e){var n=t.exec;if(XT(n)){var r=WT(n,t,e);return null!==r&&YT(r),r}if("RegExp"===qT(t))return WT(KT,t,e);throw ZT("RegExp#exec called on incompatible receiver")},$T=WA,tE=cg,eE=zv,nE=b_,rE=vf,iE=$f,oE=VT,aE=JT;LT("match",(function(t,e,n){return[function(e){var n=rE(this),r=null==e?void 0:iE(e,t);return r?$T(r,e,n):new RegExp(e)[t](nE(n))},function(t){var r=tE(this),i=nE(t),o=n(e,r,i);if(o.done)return o.value;if(!r.global)return aE(r,i);var a=r.unicode;r.lastIndex=0;for(var s,u=[],l=0;null!==(s=aE(r,i));){var c=nE(s[0]);u[l]=c,""===c&&(r.lastIndex=oE(i,eE(r.lastIndex),a)),l++}return 0===l?null:u}]}));var sE=af,uE=fp,lE=Math.floor,cE=sE("".charAt),hE=sE("".replace),dE=sE("".slice),AE=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,fE=/\$([$&'`]|\d{1,2})/g,pE=Py,gE=WA,vE=af,mE=LT,yE=zA,bE=cg,wE=wf,xE=Dv,_E=zv,TE=b_,EE=vf,SE=VT,ME=$f,CE=function(t,e,n,r,i,o){var a=n+t.length,s=r.length,u=fE;return void 0!==i&&(i=uE(i),u=AE),hE(o,u,(function(o,u){var l;switch(cE(u,0)){case"$":return"$";case"&":return t;case"`":return dE(e,0,n);case"'":return dE(e,a);case"<":l=i[dE(u,1,-1)];break;default:var c=+u;if(0===c)return o;if(c>s){var h=lE(c/10);return 0===h?o:h<=s?void 0===r[h-1]?cE(u,1):r[h-1]+cE(u,1):o}l=r[c-1]}return void 0===l?"":l}))},IE=JT,NE=Pp("replace"),BE=Math.max,kE=Math.min,PE=vE([].concat),DE=vE([].push),LE=vE("".indexOf),OE=vE("".slice),RE=function(t){return void 0===t?t:String(t)},FE="$0"==="a".replace(/./,"$0"),UE=!!/./[NE]&&""===/./[NE]("a","$0"),jE=!yE((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));mE("replace",(function(t,e,n){var r=UE?"$":"$0";return[function(t,n){var r=EE(this),i=null==t?void 0:ME(t,NE);return i?gE(i,t,r,n):gE(e,TE(r),t,n)},function(t,i){var o=bE(this),a=TE(t);if("string"==typeof i&&-1===LE(i,r)&&-1===LE(i,"$<")){var s=n(e,o,a,i);if(s.done)return s.value}var u=wE(i);u||(i=TE(i));var l=o.global;if(l){var c=o.unicode;o.lastIndex=0}for(var h=[];;){var d=IE(o,a);if(null===d||(DE(h,d),!l))break;""===TE(d[0])&&(o.lastIndex=SE(a,_E(o.lastIndex),c))}for(var A="",f=0,p=0;p<h.length;p++){for(var g=TE((d=h[p])[0]),v=BE(kE(xE(d.index),a.length),0),m=[],y=1;y<d.length;y++)DE(m,RE(d[y]));var b=d.groups;if(u){var w=PE([g],m,v,a);void 0!==b&&DE(w,b);var x=TE(pE(i,void 0,w))}else x=CE(g,a,v,m,b,i);v>=f&&(A+=OE(a,f,v)+x,f=v+g.length)}return A+OE(a,f)}]}),!jE||!FE||UE);var zE=_f,HE=cf,QE=Pp("match"),GE=function(t){var e;return zE(t)&&(void 0!==(e=t[QE])?!!e:"RegExp"==HE(t))},VE=GE,WE=TypeError,YE=function(t){if(VE(t))throw WE("The method doesn't accept regular expressions");return t},XE=Pp("match"),qE=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[XE]=!1,"/./"[t](e)}catch(t){}}return!1},KE=Bm,ZE=af,JE=jA.f,$E=zv,tS=b_,eS=YE,nS=vf,rS=qE,iS=ZE("".startsWith),oS=ZE("".slice),aS=Math.min,sS=rS("startsWith"),uS=!sS&&!!function(){var t=JE(String.prototype,"startsWith");return t&&!t.writable}();KE({target:"String",proto:!0,forced:!uS&&!sS},{startsWith:function(t){var e=tS(nS(this));eS(t);var n=$E(aS(arguments.length>1?arguments[1]:void 0,e.length)),r=tS(t);return iS?iS(e,r,n):oS(e,n,n+r.length)===r}});var lS=Pp,cS=$_,hS=og.f,dS=lS("unscopables"),AS=Array.prototype;null==AS[dS]&&hS(AS,dS,{configurable:!0,value:cS(null)});var fS,pS,gS,vS=!zA((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),mS=vp,yS=wf,bS=fp,wS=vS,xS=Wg("IE_PROTO"),_S=Object,TS=_S.prototype,ES=wS?_S.getPrototypeOf:function(t){var e=bS(t);if(mS(e,xS))return e[xS];var n=e.constructor;return yS(n)&&e instanceof n?n.prototype:e instanceof _S?TS:null},SS=zA,MS=wf,CS=ES,IS=Cv,NS=Pp("iterator"),BS=!1;[].keys&&("next"in(gS=[].keys())?(pS=CS(CS(gS)))!==Object.prototype&&(fS=pS):BS=!0);var kS=null==fS||SS((function(){var t={};return fS[NS].call(t)!==t}));kS&&(fS={}),MS(fS[NS])||IS(fS,NS,(function(){return this}));var PS={IteratorPrototype:fS,BUGGY_SAFARI_ITERATORS:BS},DS=PS.IteratorPrototype,LS=$_,OS=$A,RS=Qm,FS=ox,US=function(){return this},jS=Bm,zS=WA,HS=wf,QS=function(t,e,n,r){var i=e+" Iterator";return t.prototype=LS(DS,{next:OS(+!r,n)}),RS(t,i,!1),FS[i]=US,t},GS=ES,VS=Um,WS=Qm,YS=Tg,XS=Cv,qS=ox,KS=Bg.PROPER,ZS=Bg.CONFIGURABLE,JS=PS.IteratorPrototype,$S=PS.BUGGY_SAFARI_ITERATORS,tM=Pp("iterator"),eM="keys",nM="values",rM="entries",iM=function(){return this},oM=bf,aM=function(t){AS[dS][t]=!0},sM=ox,uM=hv,lM=og.f,cM=function(t,e,n,r,i,o,a){QS(n,e,r);var s,u,l,c=function(t){if(t===i&&p)return p;if(!$S&&t in A)return A[t];switch(t){case eM:case nM:case rM:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,A=t.prototype,f=A[tM]||A["@@iterator"]||i&&A[i],p=!$S&&f||c(i),g="Array"==e&&A.entries||f;if(g&&((s=GS(g.call(new t)))!==Object.prototype&&s.next&&(GS(s)!==JS&&(VS?VS(s,JS):HS(s[tM])||XS(s,tM,iM)),WS(s,h,!0))),KS&&i==nM&&f&&f.name!==nM&&(ZS?YS(A,"name",nM):(d=!0,p=function(){return zS(f,this)})),i)if(u={values:c(nM),keys:o?p:c(eM),entries:c(rM)},a)for(l in u)($S||d||!(l in A))&&XS(A,l,u[l]);else jS({target:e,proto:!0,forced:$S||d},u);return A[tM]!==p&&XS(A,tM,p,{name:i}),qS[e]=p,u},hM=HA,dM="Array Iterator",AM=uM.set,fM=uM.getterFor(dM),pM=cM(Array,"Array",(function(t,e){AM(this,{type:dM,target:oM(t),index:0,kind:e})}),(function(){var t=fM(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),gM=sM.Arguments=sM.Array;if(aM("keys"),aM("values"),aM("entries"),hM&&"values"!==gM.name)try{lM(gM,"name",{value:"values"})}catch(t){}var vM=Yp("span").classList,mM=vM&&vM.constructor&&vM.constructor.prototype,yM=mM===Object.prototype?void 0:mM,bM=UA,wM={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},xM=yM,_M=pM,TM=Tg,EM=Pp,SM=EM("iterator"),MM=EM("toStringTag"),CM=_M.values,IM=function(t,e){if(t){if(t[SM]!==CM)try{TM(t,SM,CM)}catch(e){t[SM]=CM}if(t[MM]||TM(t,MM,e),wM[e])for(var n in _M)if(t[n]!==_M[n])try{TM(t,n,_M[n])}catch(e){t[n]=_M[n]}}};for(var NM in wM)IM(bM[NM]&&bM[NM].prototype,NM);function BM(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}IM(xM,"DOMTokenList");var kM=Zf,PM=fp,DM=pf,LM=Qv,OM=TypeError,RM=function(t){return function(e,n,r,i){kM(n);var o=PM(e),a=DM(o),s=LM(o),u=t?s-1:0,l=t?-1:1;if(r<2)for(;;){if(u in a){i=a[u],u+=l;break}if(u+=l,t?u<0:s<=u)throw OM("Reduce of empty array with no initial value")}for(;t?u>=0:s>u;u+=l)u in a&&(i=n(i,a[u],u,o));return i}},FM={left:RM(!1),right:RM(!0)},UM=zA,jM=function(t,e){var n=[][t];return!!n&&UM((function(){n.call(null,e||function(){return 1},1)}))},zM=FM.left,HM=Of,QM=km;Bm({target:"Array",proto:!0,forced:!jM("reduce")||!QM&&HM>79&&HM<83},{reduce:function(t){var e=arguments.length;return zM(this,t,e,e>1?arguments[1]:void 0)}});var GM=Bm,VM=af,WM=jA.f,YM=zv,XM=b_,qM=YE,KM=vf,ZM=qE,JM=VM("".endsWith),$M=VM("".slice),tC=Math.min,eC=ZM("endsWith"),nC=!eC&&!!function(){var t=WM(String.prototype,"endsWith");return t&&!t.writable}();GM({target:"String",proto:!0,forced:!nC&&!eC},{endsWith:function(t){var e=XM(KM(this));qM(t);var n=arguments.length>1?arguments[1]:void 0,r=e.length,i=void 0===n?r:tC(YM(n),r),o=XM(t);return JM?JM(e,o,i):$M(e,i-o.length,i)===o}});var rC=Qp,iC=og,oC=$A,aC=Fv,sC=Qv,uC=function(t,e,n){var r=rC(e);r in t?iC.f(t,r,oC(0,n)):t[r]=n},lC=Array,cC=Math.max,hC=Py,dC=WA,AC=af,fC=LT,pC=GE,gC=cg,vC=vf,mC=Cy,yC=VT,bC=zv,wC=b_,xC=$f,_C=function(t,e,n){for(var r=sC(t),i=aC(e,r),o=aC(void 0===n?r:n,r),a=lC(cC(o-i,0)),s=0;i<o;i++,s++)uC(a,s,t[i]);return a.length=s,a},TC=JT,EC=ST,SC=zA,MC=C_.UNSUPPORTED_Y,CC=4294967295,IC=Math.min,NC=[].push,BC=AC(/./.exec),kC=AC(NC),PC=AC("".slice),DC=!SC((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));fC("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=wC(vC(this)),i=void 0===n?CC:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!pC(t))return dC(e,r,t,i);for(var o,a,s,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,l+"g");(o=dC(EC,h,r))&&!((a=h.lastIndex)>c&&(kC(u,PC(r,c,o.index)),o.length>1&&o.index<r.length&&hC(NC,u,_C(o,1)),s=o[0].length,c=a,u.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return c===r.length?(s||!BC(h,""))&&kC(u,""):kC(u,PC(r,c)),u.length>i?_C(u,0,i):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:dC(e,this,t,n)}:e,[function(e,n){var i=vC(this),o=null==e?void 0:xC(e,t);return o?dC(o,e,i,n):dC(r,wC(i),e,n)},function(t,i){var o=gC(this),a=wC(t),s=n(r,o,a,i,r!==e);if(s.done)return s.value;var u=mC(o,RegExp),l=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(MC?"g":"y"),h=new u(MC?"^(?:"+o.source+")":o,c),d=void 0===i?CC:i>>>0;if(0===d)return[];if(0===a.length)return null===TC(h,a)?[a]:[];for(var A=0,f=0,p=[];f<a.length;){h.lastIndex=MC?0:f;var g,v=TC(h,MC?PC(a,f):a);if(null===v||(g=IC(bC(h.lastIndex+(MC?f:0)),a.length))===A)f=yC(a,f,l);else{if(kC(p,PC(a,A,f)),p.length===d)return p;for(var m=1;m<=v.length-1;m++)if(kC(p,v[m]),p.length===d)return p;f=A=g}}return kC(p,PC(a,A)),p}]}),!DC,MC);var LC={exports:{}},OC={exports:{}};(function(){var t,e,n,r,i,o;"undefined"!=typeof performance&&null!==performance&&performance.now?OC.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(OC.exports=function(){return(t()-i)/1e6},e=process.hrtime,r=(t=function(){var t;return 1e9*(t=e())[0]+t[1]})(),o=1e9*process.uptime(),i=r-o):Date.now?(OC.exports=function(){return Date.now()-n},n=Date.now()):(OC.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(O);for(var RC=OC.exports,FC="undefined"==typeof window?O:window,UC=["moz","webkit"],jC="AnimationFrame",zC=FC["request"+jC],HC=FC["cancel"+jC]||FC["cancelRequest"+jC],QC=0;!zC&&QC<UC.length;QC++)zC=FC[UC[QC]+"Request"+jC],HC=FC[UC[QC]+"Cancel"+jC]||FC[UC[QC]+"CancelRequest"+jC];if(!zC||!HC){var GC=0,VC=0,WC=[];zC=function(t){if(0===WC.length){var e=RC(),n=Math.max(0,16.666666666666668-(e-GC));GC=n+e,setTimeout((function(){var t=WC.slice(0);WC.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(GC)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(n))}return WC.push({handle:++VC,callback:t,cancelled:!1}),VC},HC=function(t){for(var e=0;e<WC.length;e++)WC[e].handle===t&&(WC[e].cancelled=!0)}}LC.exports=function(t){return zC.call(FC,t)},LC.exports.cancel=function(){HC.apply(FC,arguments)},LC.exports.polyfill=function(t){t||(t=FC),t.requestAnimationFrame=zC,t.cancelAnimationFrame=HC};var YC=LC.exports,XC="\t\n\v\f\r \u2028\u2029\ufeff",qC=vf,KC=b_,ZC=af("".replace),JC="[\t\n\v\f\r \u2028\u2029\ufeff]",$C=RegExp("^"+JC+JC+"*"),tI=RegExp(JC+JC+"*$"),eI=function(t){return function(e){var n=KC(qC(e));return 1&t&&(n=ZC(n,$C,"")),2&t&&(n=ZC(n,tI,"")),n}},nI={start:eI(1),end:eI(2),trim:eI(3)},rI=Bg.PROPER,iI=zA,oI=XC,aI=nI.trim,sI=function(t){return iI((function(){return!!oI[t]()||""!==""[t]()||rI&&oI[t].name!==t}))};Bm({target:"String",proto:!0,forced:sI("trim")},{trim:function(){return aI(this)}});var uI=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,a=i.exec(t);if(a){var s=o(a);this.r=s[0],this.g=s[1],this.b=s[2],s.length>3&&(this.alpha=s[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,r=0;r<n.length;r++)for(var i=n[r].example,o=0;o<i.length;o++)t[t.length]=i[o];for(var a in e)t[t.length]=a;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(r=0;r<t.length;r++)try{var u=document.createElement("li"),l=new RGBColor(t[r]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+l.toHex()+"; color:"+l.toHex(),c.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[r]+" -> "+l.toRGB()+" -> "+l.toHex());u.appendChild(c),u.appendChild(h),s.appendChild(u)}catch(t){}return s}},lI=Bm,cI=Xv.indexOf,hI=jM,dI=af([].indexOf),AI=!!dI&&1/dI([1],1,-0)<0,fI=hI("indexOf");lI({target:"Array",proto:!0,forced:AI||!fI},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return AI?dI(this,t,e)||0:cI(this,t,e)}});var pI=Bm,gI=YE,vI=vf,mI=b_,yI=qE,bI=af("".indexOf);pI({target:"String",proto:!0,forced:!yI("includes")},{includes:function(t){return!!~bI(mI(vI(this)),mI(gI(t)),arguments.length>1?arguments[1]:void 0)}});var wI=cf,xI=Array.isArray||function(t){return"Array"==wI(t)},_I=Bm,TI=xI,EI=af([].reverse),SI=[1,2];_I({target:"Array",proto:!0,forced:String(SI)===String(SI.reverse())},{reverse:function(){return TI(this)&&(this.length=this.length),EI(this)}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var MI=function(t,e){return(MI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function CI(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}MI(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function II(t,e){var n=t[0],r=t[1];return[n*Math.cos(e)-r*Math.sin(e),n*Math.sin(e)+r*Math.cos(e)]}function NI(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)if("number"!=typeof t[n])throw new Error("assertNumbers arguments["+n+"] is not a number. "+_(t[n])+" == typeof "+t[n]);return!0}var BI=Math.PI;function kI(t,e,n){t.lArcFlag=0===t.lArcFlag?0:1,t.sweepFlag=0===t.sweepFlag?0:1;var r=t.rX,i=t.rY,o=t.x,a=t.y;r=Math.abs(t.rX),i=Math.abs(t.rY);var s=II([(e-o)/2,(n-a)/2],-t.xRot/180*BI),u=s[0],l=s[1],c=Math.pow(u,2)/Math.pow(r,2)+Math.pow(l,2)/Math.pow(i,2);1<c&&(r*=Math.sqrt(c),i*=Math.sqrt(c)),t.rX=r,t.rY=i;var h=Math.pow(r,2)*Math.pow(l,2)+Math.pow(i,2)*Math.pow(u,2),d=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(i,2)-h)/h)),A=r*l/i*d,f=-i*u/r*d,p=II([A,f],t.xRot/180*BI);t.cX=p[0]+(e+o)/2,t.cY=p[1]+(n+a)/2,t.phi1=Math.atan2((l-f)/i,(u-A)/r),t.phi2=Math.atan2((-l-f)/i,(-u-A)/r),0===t.sweepFlag&&t.phi2>t.phi1&&(t.phi2-=2*BI),1===t.sweepFlag&&t.phi2<t.phi1&&(t.phi2+=2*BI),t.phi1*=180/BI,t.phi2*=180/BI}function PI(t,e,n){NI(t,e,n);var r=t*t+e*e-n*n;if(0>r)return[];if(0===r)return[[t*n/(t*t+e*e),e*n/(t*t+e*e)]];var i=Math.sqrt(r);return[[(t*n+e*i)/(t*t+e*e),(e*n-t*i)/(t*t+e*e)],[(t*n-e*i)/(t*t+e*e),(e*n+t*i)/(t*t+e*e)]]}var DI,LI=Math.PI/180;function OI(t,e,n){return(1-n)*t+n*e}function RI(t,e,n,r){return t+Math.cos(r/180*BI)*e+Math.sin(r/180*BI)*n}function FI(t,e,n,r){var i=1e-6,o=e-t,a=n-e,s=3*o+3*(r-n)-6*a,u=6*(a-o),l=3*o;return Math.abs(s)<i?[-l/u]:function(t,e,n){void 0===n&&(n=1e-6);var r=t*t/4-e;if(r<-n)return[];if(r<=n)return[-t/2];var i=Math.sqrt(r);return[-t/2-i,-t/2+i]}(u/s,l/s,i)}function UI(t,e,n,r,i){var o=1-i;return t*(o*o*o)+e*(3*o*o*i)+n*(3*o*i*i)+r*(i*i*i)}!function(t){function e(){return i((function(t,e,n){return t.relative&&(void 0!==t.x1&&(t.x1+=e),void 0!==t.y1&&(t.y1+=n),void 0!==t.x2&&(t.x2+=e),void 0!==t.y2&&(t.y2+=n),void 0!==t.x&&(t.x+=e),void 0!==t.y&&(t.y+=n),t.relative=!1),t}))}function n(){var t=NaN,e=NaN,n=NaN,r=NaN;return i((function(i,o,a){return i.type&VI.SMOOTH_CURVE_TO&&(i.type=VI.CURVE_TO,t=isNaN(t)?o:t,e=isNaN(e)?a:e,i.x1=i.relative?o-t:2*o-t,i.y1=i.relative?a-e:2*a-e),i.type&VI.CURVE_TO?(t=i.relative?o+i.x2:i.x2,e=i.relative?a+i.y2:i.y2):(t=NaN,e=NaN),i.type&VI.SMOOTH_QUAD_TO&&(i.type=VI.QUAD_TO,n=isNaN(n)?o:n,r=isNaN(r)?a:r,i.x1=i.relative?o-n:2*o-n,i.y1=i.relative?a-r:2*a-r),i.type&VI.QUAD_TO?(n=i.relative?o+i.x1:i.x1,r=i.relative?a+i.y1:i.y1):(n=NaN,r=NaN),i}))}function r(){var t=NaN,e=NaN;return i((function(n,r,i){if(n.type&VI.SMOOTH_QUAD_TO&&(n.type=VI.QUAD_TO,t=isNaN(t)?r:t,e=isNaN(e)?i:e,n.x1=n.relative?r-t:2*r-t,n.y1=n.relative?i-e:2*i-e),n.type&VI.QUAD_TO){t=n.relative?r+n.x1:n.x1,e=n.relative?i+n.y1:n.y1;var o=n.x1,a=n.y1;n.type=VI.CURVE_TO,n.x1=((n.relative?0:r)+2*o)/3,n.y1=((n.relative?0:i)+2*a)/3,n.x2=(n.x+2*o)/3,n.y2=(n.y+2*a)/3}else t=NaN,e=NaN;return n}))}function i(t){var e=0,n=0,r=NaN,i=NaN;return function(o){if(isNaN(r)&&!(o.type&VI.MOVE_TO))throw new Error("path must start with moveto");var a=t(o,e,n,r,i);return o.type&VI.CLOSE_PATH&&(e=r,n=i),void 0!==o.x&&(e=o.relative?e+o.x:o.x),void 0!==o.y&&(n=o.relative?n+o.y:o.y),o.type&VI.MOVE_TO&&(r=e,i=n),a}}function o(t,e,n,r,o,a){return NI(t,e,n,r,o,a),i((function(i,s,u,l){var c=i.x1,h=i.x2,d=i.relative&&!isNaN(l),A=void 0!==i.x?i.x:d?0:s,f=void 0!==i.y?i.y:d?0:u;function p(t){return t*t}i.type&VI.HORIZ_LINE_TO&&0!==e&&(i.type=VI.LINE_TO,i.y=i.relative?0:u),i.type&VI.VERT_LINE_TO&&0!==n&&(i.type=VI.LINE_TO,i.x=i.relative?0:s),void 0!==i.x&&(i.x=i.x*t+f*n+(d?0:o)),void 0!==i.y&&(i.y=A*e+i.y*r+(d?0:a)),void 0!==i.x1&&(i.x1=i.x1*t+i.y1*n+(d?0:o)),void 0!==i.y1&&(i.y1=c*e+i.y1*r+(d?0:a)),void 0!==i.x2&&(i.x2=i.x2*t+i.y2*n+(d?0:o)),void 0!==i.y2&&(i.y2=h*e+i.y2*r+(d?0:a));var g=t*r-e*n;if(void 0!==i.xRot&&(1!==t||0!==e||0!==n||1!==r))if(0===g)delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag,i.type=VI.LINE_TO;else{var v=i.xRot*Math.PI/180,m=Math.sin(v),y=Math.cos(v),b=1/p(i.rX),w=1/p(i.rY),x=p(y)*b+p(m)*w,_=2*m*y*(b-w),T=p(m)*b+p(y)*w,E=x*r*r-_*e*r+T*e*e,S=_*(t*r+e*n)-2*(x*n*r+T*t*e),M=x*n*n-_*t*n+T*t*t,C=(Math.atan2(S,E-M)+Math.PI)%Math.PI/2,I=Math.sin(C),N=Math.cos(C);i.rX=Math.abs(g)/Math.sqrt(E*p(N)+S*I*N+M*p(I)),i.rY=Math.abs(g)/Math.sqrt(E*p(I)-S*I*N+M*p(N)),i.xRot=180*C/Math.PI}return void 0!==i.sweepFlag&&0>g&&(i.sweepFlag=+!i.sweepFlag),i}))}t.ROUND=function(t){function e(e){return Math.round(e*t)/t}return void 0===t&&(t=1e13),NI(t),function(t){return void 0!==t.x1&&(t.x1=e(t.x1)),void 0!==t.y1&&(t.y1=e(t.y1)),void 0!==t.x2&&(t.x2=e(t.x2)),void 0!==t.y2&&(t.y2=e(t.y2)),void 0!==t.x&&(t.x=e(t.x)),void 0!==t.y&&(t.y=e(t.y)),void 0!==t.rX&&(t.rX=e(t.rX)),void 0!==t.rY&&(t.rY=e(t.rY)),t}},t.TO_ABS=e,t.TO_REL=function(){return i((function(t,e,n){return t.relative||(void 0!==t.x1&&(t.x1-=e),void 0!==t.y1&&(t.y1-=n),void 0!==t.x2&&(t.x2-=e),void 0!==t.y2&&(t.y2-=n),void 0!==t.x&&(t.x-=e),void 0!==t.y&&(t.y-=n),t.relative=!0),t}))},t.NORMALIZE_HVZ=function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),i((function(r,i,o,a,s){if(isNaN(a)&&!(r.type&VI.MOVE_TO))throw new Error("path must start with moveto");return e&&r.type&VI.HORIZ_LINE_TO&&(r.type=VI.LINE_TO,r.y=r.relative?0:o),n&&r.type&VI.VERT_LINE_TO&&(r.type=VI.LINE_TO,r.x=r.relative?0:i),t&&r.type&VI.CLOSE_PATH&&(r.type=VI.LINE_TO,r.x=r.relative?a-i:a,r.y=r.relative?s-o:s),r.type&VI.ARC&&(0===r.rX||0===r.rY)&&(r.type=VI.LINE_TO,delete r.rX,delete r.rY,delete r.xRot,delete r.lArcFlag,delete r.sweepFlag),r}))},t.NORMALIZE_ST=n,t.QT_TO_C=r,t.INFO=i,t.SANITIZE=function(t){void 0===t&&(t=0),NI(t);var e=NaN,n=NaN,r=NaN,o=NaN;return i((function(i,a,s,u,l){var c=Math.abs,h=!1,d=0,A=0;if(i.type&VI.SMOOTH_CURVE_TO&&(d=isNaN(e)?0:a-e,A=isNaN(n)?0:s-n),i.type&(VI.CURVE_TO|VI.SMOOTH_CURVE_TO)?(e=i.relative?a+i.x2:i.x2,n=i.relative?s+i.y2:i.y2):(e=NaN,n=NaN),i.type&VI.SMOOTH_QUAD_TO?(r=isNaN(r)?a:2*a-r,o=isNaN(o)?s:2*s-o):i.type&VI.QUAD_TO?(r=i.relative?a+i.x1:i.x1,o=i.relative?s+i.y1:i.y2):(r=NaN,o=NaN),i.type&VI.LINE_COMMANDS||i.type&VI.ARC&&(0===i.rX||0===i.rY||!i.lArcFlag)||i.type&VI.CURVE_TO||i.type&VI.SMOOTH_CURVE_TO||i.type&VI.QUAD_TO||i.type&VI.SMOOTH_QUAD_TO){var f=void 0===i.x?0:i.relative?i.x:i.x-a,p=void 0===i.y?0:i.relative?i.y:i.y-s;d=isNaN(r)?void 0===i.x1?d:i.relative?i.x:i.x1-a:r-a,A=isNaN(o)?void 0===i.y1?A:i.relative?i.y:i.y1-s:o-s;var g=void 0===i.x2?0:i.relative?i.x:i.x2-a,v=void 0===i.y2?0:i.relative?i.y:i.y2-s;c(f)<=t&&c(p)<=t&&c(d)<=t&&c(A)<=t&&c(g)<=t&&c(v)<=t&&(h=!0)}return i.type&VI.CLOSE_PATH&&c(a-u)<=t&&c(s-l)<=t&&(h=!0),h?[]:i}))},t.MATRIX=o,t.ROTATE=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),NI(t,e,n);var r=Math.sin(t),i=Math.cos(t);return o(i,r,-r,i,e-e*i+n*r,n-e*r-n*i)},t.TRANSLATE=function(t,e){return void 0===e&&(e=0),NI(t,e),o(1,0,0,1,t,e)},t.SCALE=function(t,e){return void 0===e&&(e=t),NI(t,e),o(t,0,0,e,0,0)},t.SKEW_X=function(t){return NI(t),o(1,0,Math.atan(t),1,0,0)},t.SKEW_Y=function(t){return NI(t),o(1,Math.atan(t),0,1,0,0)},t.X_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),NI(t),o(-1,0,0,1,t,0)},t.Y_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),NI(t),o(1,0,0,-1,0,t)},t.A_TO_C=function(){return i((function(t,e,n){return VI.ARC===t.type?function(t,e,n){var r,i,o,a;t.cX||kI(t,e,n);for(var s=Math.min(t.phi1,t.phi2),u=Math.max(t.phi1,t.phi2)-s,l=Math.ceil(u/90),c=new Array(l),h=e,d=n,A=0;A<l;A++){var f=OI(t.phi1,t.phi2,A/l),p=OI(t.phi1,t.phi2,(A+1)/l),g=p-f,v=4/3*Math.tan(g*LI/4),m=[Math.cos(f*LI)-v*Math.sin(f*LI),Math.sin(f*LI)+v*Math.cos(f*LI)],y=m[0],b=m[1],w=[Math.cos(p*LI),Math.sin(p*LI)],x=w[0],_=w[1],T=[x+v*Math.sin(p*LI),_-v*Math.cos(p*LI)],E=T[0],S=T[1];c[A]={relative:t.relative,type:VI.CURVE_TO};var M=function(e,n){var r=II([e*t.rX,n*t.rY],t.xRot),i=r[0],o=r[1];return[t.cX+i,t.cY+o]};r=M(y,b),c[A].x1=r[0],c[A].y1=r[1],i=M(E,S),c[A].x2=i[0],c[A].y2=i[1],o=M(x,_),c[A].x=o[0],c[A].y=o[1],t.relative&&(c[A].x1-=h,c[A].y1-=d,c[A].x2-=h,c[A].y2-=d,c[A].x-=h,c[A].y-=d),h=(a=[c[A].x,c[A].y])[0],d=a[1]}return c}(t,t.relative?0:e,t.relative?0:n):t}))},t.ANNOTATE_ARCS=function(){return i((function(t,e,n){return t.relative&&(e=0,n=0),VI.ARC===t.type&&kI(t,e,n),t}))},t.CLONE=function(){return function(t){var e={};for(var n in t)e[n]=t[n];return e}},t.CALCULATE_BOUNDS=function(){var t=e(),o=r(),a=n(),s=i((function(e,n,r){var i=a(o(t(function(t){var e={};for(var n in t)e[n]=t[n];return e}(e))));function u(t){t>s.maxX&&(s.maxX=t),t<s.minX&&(s.minX=t)}function l(t){t>s.maxY&&(s.maxY=t),t<s.minY&&(s.minY=t)}if(i.type&VI.DRAWING_COMMANDS&&(u(n),l(r)),i.type&VI.HORIZ_LINE_TO&&u(i.x),i.type&VI.VERT_LINE_TO&&l(i.y),i.type&VI.LINE_TO&&(u(i.x),l(i.y)),i.type&VI.CURVE_TO){u(i.x),l(i.y);for(var c=0,h=FI(n,i.x1,i.x2,i.x);c<h.length;c++)0<(M=h[c])&&1>M&&u(UI(n,i.x1,i.x2,i.x,M));for(var d=0,A=FI(r,i.y1,i.y2,i.y);d<A.length;d++)0<(M=A[d])&&1>M&&l(UI(r,i.y1,i.y2,i.y,M))}if(i.type&VI.ARC){u(i.x),l(i.y),kI(i,n,r);for(var f=i.xRot/180*Math.PI,p=Math.cos(f)*i.rX,g=Math.sin(f)*i.rX,v=-Math.sin(f)*i.rY,m=Math.cos(f)*i.rY,y=i.phi1<i.phi2?[i.phi1,i.phi2]:-180>i.phi2?[i.phi2+360,i.phi1+360]:[i.phi2,i.phi1],b=y[0],w=y[1],x=function(t){var e=t[0],n=t[1],r=180*Math.atan2(n,e)/Math.PI;return r<b?r+360:r},_=0,T=PI(v,-p,0).map(x);_<T.length;_++)(M=T[_])>b&&M<w&&u(RI(i.cX,p,v,M));for(var E=0,S=PI(m,-g,0).map(x);E<S.length;E++){var M;(M=S[E])>b&&M<w&&l(RI(i.cY,g,m,M))}}return e}));return s.minX=1/0,s.maxX=-1/0,s.minY=1/0,s.maxY=-1/0,s}}(DI||(DI={}));var jI,zI=function(){function t(){}return t.prototype.round=function(t){return this.transform(DI.ROUND(t))},t.prototype.toAbs=function(){return this.transform(DI.TO_ABS())},t.prototype.toRel=function(){return this.transform(DI.TO_REL())},t.prototype.normalizeHVZ=function(t,e,n){return this.transform(DI.NORMALIZE_HVZ(t,e,n))},t.prototype.normalizeST=function(){return this.transform(DI.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(DI.QT_TO_C())},t.prototype.aToC=function(){return this.transform(DI.A_TO_C())},t.prototype.sanitize=function(t){return this.transform(DI.SANITIZE(t))},t.prototype.translate=function(t,e){return this.transform(DI.TRANSLATE(t,e))},t.prototype.scale=function(t,e){return this.transform(DI.SCALE(t,e))},t.prototype.rotate=function(t,e,n){return this.transform(DI.ROTATE(t,e,n))},t.prototype.matrix=function(t,e,n,r,i,o){return this.transform(DI.MATRIX(t,e,n,r,i,o))},t.prototype.skewX=function(t){return this.transform(DI.SKEW_X(t))},t.prototype.skewY=function(t){return this.transform(DI.SKEW_Y(t))},t.prototype.xSymmetry=function(t){return this.transform(DI.X_AXIS_SYMMETRY(t))},t.prototype.ySymmetry=function(t){return this.transform(DI.Y_AXIS_SYMMETRY(t))},t.prototype.annotateArcs=function(){return this.transform(DI.ANNOTATE_ARCS())},t}(),HI=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},QI=function(t){return"0".charCodeAt(0)<=t.charCodeAt(0)&&t.charCodeAt(0)<="9".charCodeAt(0)},GI=function(t){function e(){var e=t.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return CI(e,t),e.prototype.finish=function(t){if(void 0===t&&(t=[]),this.parse(" ",t),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return t},e.prototype.parse=function(t,e){var n=this;void 0===e&&(e=[]);for(var r=function(t){e.push(t),n.curArgs.length=0,n.canParseCommandOrComma=!0},i=0;i<t.length;i++){var o=t[i],a=!(this.curCommandType!==VI.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=QI(o)&&("0"===this.curNumber&&"0"===o||a);if(!QI(o)||s)if("e"!==o&&"E"!==o)if("-"!==o&&"+"!==o||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==o||this.curNumberHasExp||this.curNumberHasDecimal||a){if(this.curNumber&&-1!==this.curCommandType){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+i);if(this.curCommandType===VI.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+i+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+i+'"');this.curArgs.push(u),this.curArgs.length===WI[this.curCommandType]&&(VI.HORIZ_LINE_TO===this.curCommandType?r({type:VI.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):VI.VERT_LINE_TO===this.curCommandType?r({type:VI.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===VI.MOVE_TO||this.curCommandType===VI.LINE_TO||this.curCommandType===VI.SMOOTH_QUAD_TO?(r({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),VI.MOVE_TO===this.curCommandType&&(this.curCommandType=VI.LINE_TO)):this.curCommandType===VI.CURVE_TO?r({type:VI.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===VI.SMOOTH_CURVE_TO?r({type:VI.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===VI.QUAD_TO?r({type:VI.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===VI.ARC&&r({type:VI.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!HI(o))if(","===o&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==o&&"-"!==o&&"."!==o)if(s)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+i+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+i+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==o&&"Z"!==o)if("h"===o||"H"===o)this.curCommandType=VI.HORIZ_LINE_TO,this.curCommandRelative="h"===o;else if("v"===o||"V"===o)this.curCommandType=VI.VERT_LINE_TO,this.curCommandRelative="v"===o;else if("m"===o||"M"===o)this.curCommandType=VI.MOVE_TO,this.curCommandRelative="m"===o;else if("l"===o||"L"===o)this.curCommandType=VI.LINE_TO,this.curCommandRelative="l"===o;else if("c"===o||"C"===o)this.curCommandType=VI.CURVE_TO,this.curCommandRelative="c"===o;else if("s"===o||"S"===o)this.curCommandType=VI.SMOOTH_CURVE_TO,this.curCommandRelative="s"===o;else if("q"===o||"Q"===o)this.curCommandType=VI.QUAD_TO,this.curCommandRelative="q"===o;else if("t"===o||"T"===o)this.curCommandType=VI.SMOOTH_QUAD_TO,this.curCommandRelative="t"===o;else{if("a"!==o&&"A"!==o)throw new SyntaxError('Unexpected character "'+o+'" at index '+i+".");this.curCommandType=VI.ARC,this.curCommandRelative="a"===o}else e.push({type:VI.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal="."===o}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return e},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(e,n){void 0===n&&(n=[]);for(var r=0,i=Object.getPrototypeOf(this).parse.call(this,e);r<i.length;r++){var o=i[r],a=t(o);Array.isArray(a)?n.push.apply(n,a):n.push(a)}return n}}})},e}(zI),VI=function(t){function e(n){var r=t.call(this)||this;return r.commands="string"==typeof n?e.parse(n):n,r}return CI(e,t),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var t=DI.CALCULATE_BOUNDS();return this.transform(t),t},e.prototype.transform=function(t){for(var e=[],n=0,r=this.commands;n<r.length;n++){var i=t(r[n]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return this.commands=e,this},e.encode=function(t){return function(t){var e="";Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];if(r.type===VI.CLOSE_PATH)e+="z";else if(r.type===VI.HORIZ_LINE_TO)e+=(r.relative?"h":"H")+r.x;else if(r.type===VI.VERT_LINE_TO)e+=(r.relative?"v":"V")+r.y;else if(r.type===VI.MOVE_TO)e+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===VI.LINE_TO)e+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===VI.CURVE_TO)e+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===VI.SMOOTH_CURVE_TO)e+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===VI.QUAD_TO)e+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===VI.SMOOTH_QUAD_TO)e+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==VI.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+n+".");e+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return e}(t)},e.parse=function(t){var e=new GI,n=[];return e.parse(t,n),e.finish(n),n},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(zI),WI=((jI={})[VI.MOVE_TO]=2,jI[VI.LINE_TO]=2,jI[VI.HORIZ_LINE_TO]=1,jI[VI.VERT_LINE_TO]=1,jI[VI.CLOSE_PATH]=0,jI[VI.QUAD_TO]=4,jI[VI.SMOOTH_QUAD_TO]=2,jI[VI.CURVE_TO]=6,jI[VI.SMOOTH_CURVE_TO]=4,jI[VI.ARC]=7,jI),YI=WA,XI=vp,qI=Cf,KI=x_,ZI=RegExp.prototype,JI=Bg.PROPER,$I=Cv,tN=cg,eN=b_,nN=zA,rN=function(t){var e=t.flags;return void 0!==e||"flags"in ZI||XI(t,"flags")||!qI(ZI,t)?e:YI(KI,t)},iN="toString",oN=RegExp.prototype[iN],aN=nN((function(){return"/a/b"!=oN.call({source:"a",flags:"b"})})),sN=JI&&oN.name!=iN;function uN(t){return uN="function"==typeof Symbol&&"symbol"==_(Symbol.iterator)?function(t){return _(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_(t)},uN(t)}(aN||sN)&&$I(RegExp.prototype,iN,(function(){var t=tN(this);return"/"+eN(t.source)+"/"+eN(rN(t))}),{unsafe:!0});var lN=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],cN=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function hN(t,e,n,r,i,o){if(!(isNaN(o)||o<1)){o|=0;var a=function(t,e,n,r,i){if("string"==typeof t&&(t=document.getElementById(t)),!t||"object"!==uN(t)||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var o=t.getContext("2d");try{return o.getImageData(e,n,r,i)}catch(t){throw new Error("unable to access image data: "+t)}}(t,e,n,r,i);a=function(t,e,n,r,i,o){for(var a,s=t.data,u=2*o+1,l=r-1,c=i-1,h=o+1,d=h*(h+1)/2,A=new dN,f=A,p=1;p<u;p++)f=f.next=new dN,p===h&&(a=f);f.next=A;for(var g=null,v=null,m=0,y=0,b=lN[o],w=cN[o],x=0;x<i;x++){f=A;for(var _=s[y],T=s[y+1],E=s[y+2],S=s[y+3],M=0;M<h;M++)f.r=_,f.g=T,f.b=E,f.a=S,f=f.next;for(var C=0,I=0,N=0,B=0,k=h*_,P=h*T,D=h*E,L=h*S,O=d*_,R=d*T,F=d*E,U=d*S,j=1;j<h;j++){var z=y+((l<j?l:j)<<2),H=s[z],Q=s[z+1],G=s[z+2],V=s[z+3],W=h-j;O+=(f.r=H)*W,R+=(f.g=Q)*W,F+=(f.b=G)*W,U+=(f.a=V)*W,C+=H,I+=Q,N+=G,B+=V,f=f.next}g=A,v=a;for(var Y=0;Y<r;Y++){var X=U*b>>w;if(s[y+3]=X,0!==X){var q=255/X;s[y]=(O*b>>w)*q,s[y+1]=(R*b>>w)*q,s[y+2]=(F*b>>w)*q}else s[y]=s[y+1]=s[y+2]=0;O-=k,R-=P,F-=D,U-=L,k-=g.r,P-=g.g,D-=g.b,L-=g.a;var K=Y+o+1;K=m+(K<l?K:l)<<2,O+=C+=g.r=s[K],R+=I+=g.g=s[K+1],F+=N+=g.b=s[K+2],U+=B+=g.a=s[K+3],g=g.next;var Z=v,J=Z.r,$=Z.g,tt=Z.b,et=Z.a;k+=J,P+=$,D+=tt,L+=et,C-=J,I-=$,N-=tt,B-=et,v=v.next,y+=4}m+=r}for(var nt=0;nt<r;nt++){var rt=s[y=nt<<2],it=s[y+1],ot=s[y+2],at=s[y+3],st=h*rt,ut=h*it,lt=h*ot,ct=h*at,ht=d*rt,dt=d*it,At=d*ot,ft=d*at;f=A;for(var pt=0;pt<h;pt++)f.r=rt,f.g=it,f.b=ot,f.a=at,f=f.next;for(var gt=r,vt=0,mt=0,yt=0,bt=0,wt=1;wt<=o;wt++){y=gt+nt<<2;var xt=h-wt;ht+=(f.r=rt=s[y])*xt,dt+=(f.g=it=s[y+1])*xt,At+=(f.b=ot=s[y+2])*xt,ft+=(f.a=at=s[y+3])*xt,bt+=rt,vt+=it,mt+=ot,yt+=at,f=f.next,wt<c&&(gt+=r)}y=nt,g=A,v=a;for(var _t=0;_t<i;_t++){var Tt=y<<2;s[Tt+3]=at=ft*b>>w,at>0?(at=255/at,s[Tt]=(ht*b>>w)*at,s[Tt+1]=(dt*b>>w)*at,s[Tt+2]=(At*b>>w)*at):s[Tt]=s[Tt+1]=s[Tt+2]=0,ht-=st,dt-=ut,At-=lt,ft-=ct,st-=g.r,ut-=g.g,lt-=g.b,ct-=g.a,Tt=nt+((Tt=_t+h)<c?Tt:c)*r<<2,ht+=bt+=g.r=s[Tt],dt+=vt+=g.g=s[Tt+1],At+=mt+=g.b=s[Tt+2],ft+=yt+=g.a=s[Tt+3],g=g.next,st+=rt=v.r,ut+=it=v.g,lt+=ot=v.b,ct+=at=v.a,bt-=rt,vt-=it,mt-=ot,yt-=at,v=v.next,y+=r}}return t}(a,0,0,r,i,o),t.getContext("2d").putImageData(a,e,n)}}var dN=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};var AN=Object.freeze({__proto__:null,offscreen:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.DOMParser,n={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,createCanvas:function(t,e){return new OffscreenCanvas(t,e)},createImage:function(t){return v_(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.next=8,createImageBitmap(r);case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))()}};return("undefined"!=typeof DOMParser||void 0===e)&&Reflect.deleteProperty(n,"DOMParser"),n},node:function(t){var e=t.DOMParser,n=t.canvas;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:t.fetch,createCanvas:n.createCanvas,createImage:n.loadImage}}});function fN(t){return t.replace(/(?!\u3000)\s+/gm," ")}function pN(t){return t.replace(/^[\n \t]+/,"")}function gN(t){return t.replace(/[\n \t]+$/,"")}function vN(t){return((t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}var mN=/^[A-Z-]+$/;function yN(t){return mN.test(t)?t.toLowerCase():t}function bN(t){var e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(t)||[];return e[2]||e[3]||e[4]}function wN(t){if(!t.startsWith("rgb"))return t;var e=3;return t.replace(/\d+(\.\d+)?/g,(function(t,n){return e--&&n?String(Math.round(parseFloat(t))):t}))}var xN=/(\[[^\]]+\])/g,_N=/(#[^\s+>~.[:]+)/g,TN=/(\.[^\s+>~.[:]+)/g,EN=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,SN=/(:[\w-]+\([^)]*\))/gi,MN=/(:[^\s+>~.[:]+)/g,CN=/([^\s+>~.[:]+)/g;function IN(t,e){var n=e.exec(t);return n?[t.replace(e," "),n.length]:[t,0]}function NN(t){var e,n,r,i,o,a,s,u=[0,0,0],c=t.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),h=0;return c=(e=l(IN(c,xN),2))[0],h=e[1],u[1]+=h,c=(n=l(IN(c,_N),2))[0],h=n[1],u[0]+=h,c=(r=l(IN(c,TN),2))[0],h=r[1],u[1]+=h,c=(i=l(IN(c,EN),2))[0],h=i[1],u[2]+=h,c=(o=l(IN(c,SN),2))[0],h=o[1],u[1]+=h,c=(a=l(IN(c,MN),2))[0],h=a[1],u[1]+=h,c=(s=l(IN(c=c.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),CN),2))[0],h=s[1],u[2]+=h,u.join("")}var BN=1e-8;function kN(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function PN(t,e){return(t[0]*e[0]+t[1]*e[1])/(kN(t)*kN(e))}function DN(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(PN(t,e))}function LN(t){return t*t*t}function ON(t){return 3*t*t*(1-t)}function RN(t){return 3*t*(1-t)*(1-t)}function FN(t){return(1-t)*(1-t)*(1-t)}function UN(t){return t*t}function jN(t){return 2*t*(1-t)}function zN(t){return(1-t)*(1-t)}var HN=function(){function t(e,n,r){b(this,t),this.document=e,this.name=n,this.value=r,this.isNormalizedColor=!1}return x(t,[{key:"split",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",n=this.document,r=this.name;return fN(this.getString()).trim().split(e).map((function(e){return new t(n,r,e)}))}},{key:"hasValue",value:function(t){var e=this.value;return null!==e&&""!==e&&(t||0!==e)&&void 0!==e}},{key:"isString",value:function(t){var e=this.value,n="string"==typeof e;return n&&t?t.test(e):n}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"getValue",value:function(t){return void 0===t||this.hasValue()?this.value:t}},{key:"getNumber",value:function(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);var e=this.value,n=parseFloat(e);return this.isString(/%$/)&&(n/=100),n}},{key:"getString",value:function(t){return void 0===t||this.hasValue()?void 0===this.value?"":String(this.value):String(t)}},{key:"getColor",value:function(t){var e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=wN(e),this.value=e),e}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9.-]/g,"")}},{key:"getPixels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var n="boolean"==typeof t?[void 0,t]:[t],r=l(n,2),i=r[0],o=r[1],a=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(a.computeSize("x"),a.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(a.computeSize("x"),a.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*a.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*a.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&o:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*a.computeSize(i);default:var s=this.getNumber();return e&&s<1?s*a.computeSize(i):s}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}},{key:"getDefinition",value:function(){var t=this.getString(),e=/#([^)'"]+)/.exec(t);return e&&(e=e[1]),e||(e=t),this.document.definitions[e]}},{key:"getFillStyleDefinition",value:function(t,e){var n=this.getDefinition();if(!n)return null;if("function"==typeof n.createGradient)return n.createGradient(this.document.ctx,t,e);if("function"==typeof n.createPattern){if(n.getHrefAttribute().hasValue()){var r=n.getAttribute("patternTransform");n=n.getHrefAttribute().getDefinition(),r.hasValue()&&n.getAttribute("patternTransform",!0).setValue(r.value)}return n.createPattern(this.document.ctx,t,e)}return null}},{key:"getTextBaseline",value:function(){return this.hasValue()?t.textBaselineMapping[this.getString()]:null}},{key:"addOpacity",value:function(e){for(var n=this.getColor(),r=n.length,i=0,o=0;o<r&&(","===n[o]&&i++,3!==i);o++);if(e.hasValue()&&this.isString()&&3!==i){var a=new uI(n);a.ok&&(a.alpha=e.getNumber(),n=a.toRGBA())}return new t(this.document,this.name,n)}}],[{key:"empty",value:function(e){return new t(e,"EMPTY","")}}]),t}();HN.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var QN=function(){function t(){b(this,t),this.viewPorts=[]}return x(t,[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(t,e){this.viewPorts.push({width:t,height:e})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getCurrent",value:function(){var t=this.viewPorts;return t[t.length-1]}},{key:"computeSize",value:function(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}}]),t}(),GN=function(){function t(e,n){b(this,t),this.x=e,this.y=n}return x(t,[{key:"angleTo",value:function(t){return Math.atan2(t.y-this.y,t.x-this.x)}},{key:"applyTransform",value:function(t){var e=this.x,n=this.y,r=e*t[0]+n*t[2]+t[4],i=e*t[1]+n*t[3]+t[5];this.x=r,this.y=i}}],[{key:"parse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=vN(e),i=l(r,2),o=i[0],a=void 0===o?n:o,s=i[1],u=void 0===s?n:s;return new t(a,u)}},{key:"parseScale",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=vN(e),i=l(r,2),o=i[0],a=void 0===o?n:o,s=i[1],u=void 0===s?a:s;return new t(a,u)}},{key:"parsePath",value:function(e){for(var n=vN(e),r=n.length,i=[],o=0;o<r;o+=2)i.push(new t(n[o],n[o+1]));return i}}]),t}(),VN=function(){function t(e){b(this,t),this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}return x(t,[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){if(!this.working){var t=this.screen,e=this.onClick,n=this.onMouseMove,r=t.ctx.canvas;r.onclick=e,r.onmousemove=n,this.working=!0}}},{key:"stop",value:function(){if(this.working){var t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}}},{key:"hasEvents",value:function(){return this.working&&this.events.length>0}},{key:"runEvents",value:function(){if(this.working){var t=this.screen,e=this.events,n=this.eventElements,r=t.ctx.canvas.style;r&&(r.cursor=""),e.forEach((function(t,e){for(var r=t.run,i=n[e];i;)r(i),i=i.parent})),this.events=[],this.eventElements=[]}}},{key:"checkPath",value:function(t,e){if(this.working&&e){var n=this.events,r=this.eventElements;n.forEach((function(n,i){var o=n.x,a=n.y;!r[i]&&e.isPointInPath&&e.isPointInPath(o,a)&&(r[i]=t)}))}}},{key:"checkBoundingBox",value:function(t,e){if(this.working&&e){var n=this.events,r=this.eventElements;n.forEach((function(n,i){var o=n.x,a=n.y;!r[i]&&e.isPointInBox(o,a)&&(r[i]=t)}))}}},{key:"mapXY",value:function(t,e){for(var n=this.screen,r=n.window,i=n.ctx,o=new GN(t,e),a=i.canvas;a;)o.x-=a.offsetLeft,o.y-=a.offsetTop,a=a.offsetParent;return r.scrollX&&(o.x+=r.scrollX),r.scrollY&&(o.y+=r.scrollY),o}},{key:"onClick",value:function(t){var e=this.mapXY(t.clientX,t.clientY),n=e.x,r=e.y;this.events.push({type:"onclick",x:n,y:r,run:function(t){t.onClick&&t.onClick()}})}},{key:"onMouseMove",value:function(t){var e=this.mapXY(t.clientX,t.clientY),n=e.x,r=e.y;this.events.push({type:"onmousemove",x:n,y:r,run:function(t){t.onMouseMove&&t.onMouseMove()}})}}]),t}(),WN="undefined"!=typeof window?window:null,YN="undefined"!=typeof fetch?fetch.bind(void 0):null,XN=function(){function t(e){b(this,t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.fetch,i=void 0===r?YN:r,o=n.window,a=void 0===o?WN:o;this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new QN,this.mouse=new VN(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=a,this.fetch=i}return x(t,[{key:"wait",value:function(t){this.waits.push(t)}},{key:"ready",value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var t=this.waits.every((function(t){return t()}));return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}},{key:"setDefaults",value:function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}},{key:"setViewBox",value:function(t){var e=t.document,n=t.ctx,r=t.aspectRatio,i=t.width,o=t.desiredWidth,a=t.height,s=t.desiredHeight,u=t.minX,c=void 0===u?0:u,h=t.minY,d=void 0===h?0:h,A=t.refX,f=t.refY,p=t.clip,g=void 0!==p&&p,v=t.clipX,m=void 0===v?0:v,y=t.clipY,b=void 0===y?0:y,w=l(fN(r).replace(/^defer\s/,"").split(" "),2),x=w[0]||"xMidYMid",_=w[1]||"meet",T=i/o,E=a/s,S=Math.min(T,E),M=Math.max(T,E),C=o,I=s;"meet"===_&&(C*=S,I*=S),"slice"===_&&(C*=M,I*=M);var N=new HN(e,"refX",A),B=new HN(e,"refY",f),k=N.hasValue()&&B.hasValue();if(k&&n.translate(-S*N.getPixels("x"),-S*B.getPixels("y")),g){var P=S*m,D=S*b;n.beginPath(),n.moveTo(P,D),n.lineTo(i,D),n.lineTo(i,a),n.lineTo(P,a),n.closePath(),n.clip()}if(!k){var L="meet"===_&&S===E,O="slice"===_&&M===E,R="meet"===_&&S===T,F="slice"===_&&M===T;x.startsWith("xMid")&&(L||O)&&n.translate(i/2-C/2,0),x.endsWith("YMid")&&(R||F)&&n.translate(0,a/2-I/2),x.startsWith("xMax")&&(L||O)&&n.translate(i-C,0),x.endsWith("YMax")&&(R||F)&&n.translate(0,a-I)}switch(!0){case"none"===x:n.scale(T,E);break;case"meet"===_:n.scale(S,S);break;case"slice"===_:n.scale(M,M)}n.translate(-c,-d)}},{key:"start",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enableRedraw,i=void 0!==r&&r,o=n.ignoreMouse,a=void 0!==o&&o,s=n.ignoreAnimation,u=void 0!==s&&s,l=n.ignoreDimensions,c=void 0!==l&&l,h=n.ignoreClear,d=void 0!==h&&h,A=n.forceRedraw,f=n.scaleWidth,p=n.scaleHeight,g=n.offsetX,v=n.offsetY,m=this.FRAMERATE,y=this.mouse,b=1e3/m;if(this.frameDuration=b,this.readyPromise=new Promise((function(t){e.resolveReady=t})),this.isReady()&&this.render(t,c,d,f,p,g,v),i){var w=Date.now(),x=w,_=0,T=function n(){w=Date.now(),(_=w-x)>=b&&(x=w-_%b,e.shouldUpdate(u,A)&&(e.render(t,c,d,f,p,g,v),y.runEvents())),e.intervalId=YC(n)};a||y.start(),this.intervalId=YC(T)}}},{key:"stop",value:function(){this.intervalId&&(YC.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(t,e){if(!t){var n=this.frameDuration;if(this.animations.reduce((function(t,e){return e.update(n)||t}),!1))return!0}return!!("function"==typeof e&&e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}},{key:"render",value:function(t,e,n,r,i,o,a){var s=this.CLIENT_WIDTH,u=this.CLIENT_HEIGHT,l=this.viewPort,c=this.ctx,h=this.isFirstRender,d=c.canvas;l.clear(),d.width&&d.height?l.setCurrent(d.width,d.height):l.setCurrent(s,u);var A=t.getStyle("width"),f=t.getStyle("height");!e&&(h||"number"!=typeof r&&"number"!=typeof i)&&(A.hasValue()&&(d.width=A.getPixels("x"),d.style&&(d.style.width="".concat(d.width,"px"))),f.hasValue()&&(d.height=f.getPixels("y"),d.style&&(d.style.height="".concat(d.height,"px"))));var p=d.clientWidth||d.width,g=d.clientHeight||d.height;if(e&&A.hasValue()&&f.hasValue()&&(p=A.getPixels("x"),g=f.getPixels("y")),l.setCurrent(p,g),"number"==typeof o&&t.getAttribute("x",!0).setValue(o),"number"==typeof a&&t.getAttribute("y",!0).setValue(a),"number"==typeof r||"number"==typeof i){var v=vN(t.getAttribute("viewBox").getString()),m=0,y=0;if("number"==typeof r){var b=t.getStyle("width");b.hasValue()?m=b.getPixels("x")/r:isNaN(v[2])||(m=v[2]/r)}if("number"==typeof i){var w=t.getStyle("height");w.hasValue()?y=w.getPixels("y")/i:isNaN(v[3])||(y=v[3]/i)}m||(m=y),y||(y=m),t.getAttribute("width",!0).setValue(r),t.getAttribute("height",!0).setValue(i);var x=t.getStyle("transform",!0,!0);x.setValue("".concat(x.getString()," scale(").concat(1/m,", ").concat(1/y,")"))}n||c.clearRect(0,0,p,g),t.render(c),h&&(this.isFirstRender=!1)}}]),t}();XN.defaultWindow=WN,XN.defaultFetch=YN;var qN=XN.defaultFetch,KN="undefined"!=typeof DOMParser?DOMParser:null,ZN=function(){function t(){b(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fetch,r=void 0===n?qN:n,i=e.DOMParser,o=void 0===i?KN:i;this.fetch=r,this.DOMParser=o}return x(t,[{key:"parse",value:function(t){var e=this;return v_(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.startsWith("<")?e.parseFromString(t):e.load(t));case 1:case"end":return n.stop()}}),n)})))()}},{key:"parseFromString",value:function(t){var e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch(n){return this.checkDocument(e.parseFromString(t,"text/xml"))}}},{key:"checkDocument",value:function(t){var e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent);return t}},{key:"load",value:function(t){var e=this;return v_(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.fetch(t);case 2:return r=n.sent,n.next=5,r.text();case 5:return i=n.sent,n.abrupt("return",e.parseFromString(i));case 7:case"end":return n.stop()}}),n)})))()}}]),t}(),JN=function(){function t(e,n){b(this,t),this.type="translate",this.point=null,this.point=GN.parse(n)}return x(t,[{key:"apply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(n||0,r||0)}},{key:"unapply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(-1*n||0,-1*r||0)}},{key:"applyToPoint",value:function(t){var e=this.point,n=e.x,r=e.y;t.applyTransform([1,0,0,1,n||0,r||0])}}]),t}(),$N=function(){function t(e,n,r){b(this,t),this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var i=vN(n);this.angle=new HN(e,"angle",i[0]),this.originX=r[0],this.originY=r[1],this.cx=i[1]||0,this.cy=i[2]||0}return x(t,[{key:"apply",value:function(t){var e=this.cx,n=this.cy,r=this.originX,i=this.originY,o=this.angle,a=e+r.getPixels("x"),s=n+i.getPixels("y");t.translate(a,s),t.rotate(o.getRadians()),t.translate(-a,-s)}},{key:"unapply",value:function(t){var e=this.cx,n=this.cy,r=this.originX,i=this.originY,o=this.angle,a=e+r.getPixels("x"),s=n+i.getPixels("y");t.translate(a,s),t.rotate(-1*o.getRadians()),t.translate(-a,-s)}},{key:"applyToPoint",value:function(t){var e=this.cx,n=this.cy,r=this.angle.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([Math.cos(r),Math.sin(r),-Math.sin(r),Math.cos(r),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}}]),t}(),tB=function(){function t(e,n,r){b(this,t),this.type="scale",this.scale=null,this.originX=null,this.originY=null;var i=GN.parseScale(n);(0===i.x||0===i.y)&&(i.x=BN,i.y=BN),this.scale=i,this.originX=r[0],this.originY=r[1]}return x(t,[{key:"apply",value:function(t){var e=this.scale,n=e.x,r=e.y,i=this.originX,o=this.originY,a=i.getPixels("x"),s=o.getPixels("y");t.translate(a,s),t.scale(n,r||n),t.translate(-a,-s)}},{key:"unapply",value:function(t){var e=this.scale,n=e.x,r=e.y,i=this.originX,o=this.originY,a=i.getPixels("x"),s=o.getPixels("y");t.translate(a,s),t.scale(1/n,1/r||n),t.translate(-a,-s)}},{key:"applyToPoint",value:function(t){var e=this.scale,n=e.x,r=e.y;t.applyTransform([n||0,0,0,r||0,0,0])}}]),t}(),eB=function(){function t(e,n,r){b(this,t),this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=vN(n),this.originX=r[0],this.originY=r[1]}return x(t,[{key:"apply",value:function(t){var e=this.originX,n=this.originY,r=this.matrix,i=e.getPixels("x"),o=n.getPixels("y");t.translate(i,o),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.translate(-i,-o)}},{key:"unapply",value:function(t){var e=this.originX,n=this.originY,r=this.matrix,i=r[0],o=r[2],a=r[4],s=r[1],u=r[3],l=r[5],c=1/(i*(1*u-0*l)-o*(1*s-0*l)+a*(0*s-0*u)),h=e.getPixels("x"),d=n.getPixels("y");t.translate(h,d),t.transform(c*(1*u-0*l),c*(0*l-1*s),c*(0*a-1*o),c*(1*i-0*a),c*(o*l-a*u),c*(a*s-i*l)),t.translate(-h,-d)}},{key:"applyToPoint",value:function(t){t.applyTransform(this.matrix)}}]),t}(),nB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="skew",o.angle=null,o.angle=new HN(t,"angle",r),o}return n}(eB),rB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="skewX",o.matrix=[1,0,Math.tan(o.angle.getRadians()),1,0,0],o}return n}(nB),iB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="skewY",o.matrix=[1,Math.tan(o.angle.getRadians()),0,1,0,0],o}return n}(nB);var oB=function(){function t(e,n,r){var i=this;b(this,t),this.document=e,this.transforms=[];var o=function(t){return fN(t).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}(n);o.forEach((function(e){if("none"!==e){var n=function(t){var e=l(t.split("("),2),n=e[0],r=e[1];return[n.trim(),r.trim().replace(")","")]}(e),o=l(n,2),a=o[0],s=o[1],u=t.transformTypes[a];void 0!==u&&i.transforms.push(new u(i.document,s,r))}}))}return x(t,[{key:"apply",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].apply(t)}},{key:"unapply",value:function(t){for(var e=this.transforms,n=e.length-1;n>=0;n--)e[n].unapply(t)}},{key:"applyToPoint",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].applyToPoint(t)}}],[{key:"fromElement",value:function(e,n){var r=n.getStyle("transform",!1,!0),i=l(n.getStyle("transform-origin",!1,!0).split(),2),o=i[0],a=i[1],s=[o,void 0===a?o:a];return r.hasValue()?new t(e,r.getString(),s):null}}]),t}();oB.transformTypes={translate:JN,rotate:$N,scale:tB,matrix:eB,skewX:rB,skewY:iB};var aB=function(){function t(e,n){var r=this;b(this,t);var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.document=e,this.node=n,this.captureTextNodes=i,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],n&&1===n.nodeType){if(Array.from(n.attributes).forEach((function(t){var n=yN(t.nodeName);r.attributes[n]=new HN(e,n,t.value)})),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var o=this.getAttribute("style").getString().split(";").map((function(t){return t.trim()}));o.forEach((function(t){if(t){var n=l(t.split(":").map((function(t){return t.trim()})),2),i=n[0],o=n[1];r.styles[i]=new HN(e,i,o)}}))}var a=e.definitions,s=this.getAttribute("id");s.hasValue()&&(a[s.getString()]||(a[s.getString()]=this)),Array.from(n.childNodes).forEach((function(t){if(1===t.nodeType)r.addChild(t);else if(i&&(3===t.nodeType||4===t.nodeType)){var n=e.createTextNode(t);n.getText().length>0&&r.addChild(n)}}))}}return x(t,[{key:"getAttribute",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.attributes[t];if(!n&&e){var r=new HN(this.document,t,"");return this.attributes[t]=r,r}return n||HN.empty(this.document)}},{key:"getHrefAttribute",value:function(){for(var t in this.attributes)if("href"===t||t.endsWith(":href"))return this.attributes[t];return HN.empty(this.document)}},{key:"getStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.styles[t];if(r)return r;var i=this.getAttribute(t);if(null!=i&&i.hasValue())return this.styles[t]=i,i;if(!n){var o=this.parent;if(o){var a=o.getStyle(t);if(null!=a&&a.hasValue())return a}}if(e){var s=new HN(this.document,t,"");return this.styles[t]=s,s}return r||HN.empty(this.document)}},{key:"render",value:function(t){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(t.save(),this.getStyle("mask").hasValue()){var e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if("none"!==this.getStyle("filter").getValue("none")){var n=this.getStyle("filter").getDefinition();n&&(this.applyEffects(t),n.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}},{key:"setContext",value:function(t){}},{key:"applyEffects",value:function(t){var e=oB.fromElement(this.document,this);e&&e.apply(t);var n=this.getStyle("clip-path",!1,!0);if(n.hasValue()){var r=n.getDefinition();r&&r.apply(t)}}},{key:"clearContext",value:function(t){}},{key:"renderChildren",value:function(t){this.children.forEach((function(e){e.render(t)}))}},{key:"addChild",value:function(e){var n=e instanceof t?e:this.document.createElement(e);n.parent=this,t.ignoreChildTypes.includes(n.type)||this.children.push(n)}},{key:"matchesSelector",value:function(t){var e,n=this.node;if("function"==typeof n.matches)return n.matches(t);var r=null===(e=n.getAttribute)||void 0===e?void 0:e.call(n,"class");return!(!r||""===r)&&r.split(" ").some((function(e){return".".concat(e)===t}))}},{key:"addStylesFromStyleDefinition",value:function(){var t=this.document,e=t.styles,n=t.stylesSpecificity;for(var r in e)if(!r.startsWith("@")&&this.matchesSelector(r)){var i=e[r],o=n[r];if(i)for(var a in i){var s=this.stylesSpecificity[a];void 0===s&&(s="000"),o>=s&&(this.styles[a]=i[a],this.stylesSpecificity[a]=o)}}}},{key:"removeStyles",value:function(t,e){return e.reduce((function(e,n){var r=t.getStyle(n);if(!r.hasValue())return e;var i=r.getString();return r.setValue(""),[].concat(o(e),[[n,i]])}),[])}},{key:"restoreStyles",value:function(t,e){e.forEach((function(e){var n=l(e,2),r=n[0],i=n[1];t.getStyle(r,!0).setValue(i)}))}},{key:"isFirstChild",value:function(){var t;return 0===(null===(t=this.parent)||void 0===t?void 0:t.children.indexOf(this))}}]),t}();aB.ignoreChildTypes=["title"];var sB=function(t){A(n,t);var e=p(n);function n(t,r,i){return b(this,n),e.call(this,t,r,i)}return n}(aB);function uB(t){var e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function lB(t){return"undefined"==typeof process?t:t.trim().split(",").map(uB).join(",")}function cB(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function hB(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}var dB=function(){function t(e,n,r,i,o,a){b(this,t);var s=a?"string"==typeof a?t.parse(a):a:{};this.fontFamily=o||s.fontFamily,this.fontSize=i||s.fontSize,this.fontStyle=e||s.fontStyle,this.fontWeight=r||s.fontWeight,this.fontVariant=n||s.fontVariant}return x(t,[{key:"toString",value:function(){return[cB(this.fontStyle),this.fontVariant,hB(this.fontWeight),this.fontSize,lB(this.fontFamily)].join(" ").trim()}}],[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,r="",i="",o="",a="",s="",u=fN(e).trim().split(" "),c={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return u.forEach((function(e){var n;switch(!0){case!c.fontStyle&&t.styles.includes(e):"inherit"!==e&&(r=e),c.fontStyle=!0;break;case!c.fontVariant&&t.variants.includes(e):"inherit"!==e&&(i=e),c.fontStyle=!0,c.fontVariant=!0;break;case!c.fontWeight&&t.weights.includes(e):"inherit"!==e&&(o=e),c.fontStyle=!0,c.fontVariant=!0,c.fontWeight=!0;break;case!c.fontSize:"inherit"!==e&&(n=l(e.split("/"),1),a=n[0]),c.fontStyle=!0,c.fontVariant=!0,c.fontWeight=!0,c.fontSize=!0;break;default:"inherit"!==e&&(s+=e)}})),new t(r,i,o,a,s,n)}}]),t}();dB.styles="normal|italic|oblique|inherit",dB.variants="normal|small-caps|inherit",dB.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var AB=function(){function t(){b(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;this.x1=e,this.y1=n,this.x2=r,this.y2=i,this.addPoint(e,n),this.addPoint(r,i)}return x(t,[{key:"addPoint",value:function(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addBoundingBox",value:function(t){if(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2;this.addPoint(e,n),this.addPoint(r,i)}}},{key:"sumCubic",value:function(t,e,n,r,i){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*n+3*(1-t)*Math.pow(t,2)*r+Math.pow(t,3)*i}},{key:"bezierCurveAdd",value:function(t,e,n,r,i){var o=6*e-12*n+6*r,a=-3*e+9*n-9*r+3*i,s=3*n-3*e;if(0!==a){var u=Math.pow(o,2)-4*s*a;if(!(u<0)){var l=(-o+Math.sqrt(u))/(2*a);0<l&&l<1&&(t?this.addX(this.sumCubic(l,e,n,r,i)):this.addY(this.sumCubic(l,e,n,r,i)));var c=(-o-Math.sqrt(u))/(2*a);0<c&&c<1&&(t?this.addX(this.sumCubic(c,e,n,r,i)):this.addY(this.sumCubic(c,e,n,r,i)))}}else{if(0===o)return;var h=-s/o;0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,n,r,i)):this.addY(this.sumCubic(h,e,n,r,i)))}}},{key:"addBezierCurve",value:function(t,e,n,r,i,o,a,s){this.addPoint(t,e),this.addPoint(a,s),this.bezierCurveAdd(!0,t,n,i,a),this.bezierCurveAdd(!1,e,r,o,s)}},{key:"addQuadraticCurve",value:function(t,e,n,r,i,o){var a=t+.6666666666666666*(n-t),s=e+2/3*(r-e),u=a+1/3*(i-t),l=s+1/3*(o-e);this.addBezierCurve(t,e,a,u,s,l,i,o)}},{key:"isPointInBox",value:function(t,e){var n=this.x1,r=this.y1,i=this.x2,o=this.y2;return n<=t&&t<=i&&r<=e&&e<=o}},{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}}]),t}(),fB=function(t){A(n,t);var e=p(n);function n(t){var r;return b(this,n),(r=e.call(this,t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,""))).control=null,r.start=null,r.current=null,r.command=null,r.commands=r.commands,r.i=-1,r.previousCommand=null,r.points=[],r.angles=[],r}return x(n,[{key:"reset",value:function(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new GN(0,0),this.control=new GN(0,0),this.current=new GN(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.commands.length-1}},{key:"next",value:function(){var t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}},{key:"getPoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",n=new GN(this.command[t],this.command[e]);return this.makeAbsolute(n)}},{key:"getAsControlPoint",value:function(t,e){var n=this.getPoint(t,e);return this.control=n,n}},{key:"getAsCurrentPoint",value:function(t,e){var n=this.getPoint(t,e);return this.current=n,n}},{key:"getReflectedControlPoint",value:function(){var t=this.previousCommand.type;if(t!==VI.CURVE_TO&&t!==VI.SMOOTH_CURVE_TO&&t!==VI.QUAD_TO&&t!==VI.SMOOTH_QUAD_TO)return this.current;var e=this.current,n=e.x,r=e.y,i=this.control,o=i.x,a=i.y;return new GN(2*n-o,2*r-a)}},{key:"makeAbsolute",value:function(t){if(this.command.relative){var e=this.current,n=e.x,r=e.y;t.x+=n,t.y+=r}return t}},{key:"addMarker",value:function(t,e,n){var r=this.points,i=this.angles;n&&i.length>0&&!i[i.length-1]&&(i[i.length-1]=r[r.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}},{key:"addMarkerAngle",value:function(t,e){this.points.push(t),this.angles.push(e)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var t=this.angles,e=t.length,n=0;n<e;n++)if(!t[n])for(var r=n+1;r<e;r++)if(t[r]){t[n]=t[r];break}return t}}]),n}(VI),pB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).modifiedEmSizeStack=!1,t}return x(n,[{key:"calculateOpacity",value:function(){for(var t=1,e=this;e;){var n=e.getStyle("opacity",!1,!0);n.hasValue(!0)&&(t*=n.getNumber()),e=e.parent}return t}},{key:"setContext",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){var n=this.getStyle("fill"),r=this.getStyle("fill-opacity"),i=this.getStyle("stroke"),o=this.getStyle("stroke-opacity");if(n.isUrlDefinition()){var a=n.getFillStyleDefinition(this,r);a&&(t.fillStyle=a)}else if(n.hasValue()){"currentColor"===n.getString()&&n.setValue(this.getStyle("color").getColor());var s=n.getColor();"inherit"!==s&&(t.fillStyle="none"===s?"rgba(0,0,0,0)":s)}if(r.hasValue()){var u=new HN(this.document,"fill",t.fillStyle).addOpacity(r).getColor();t.fillStyle=u}if(i.isUrlDefinition()){var l=i.getFillStyleDefinition(this,o);l&&(t.strokeStyle=l)}else if(i.hasValue()){"currentColor"===i.getString()&&i.setValue(this.getStyle("color").getColor());var c=i.getString();"inherit"!==c&&(t.strokeStyle="none"===c?"rgba(0,0,0,0)":c)}if(o.hasValue()){var h=new HN(this.document,"stroke",t.strokeStyle).addOpacity(o).getString();t.strokeStyle=h}var d=this.getStyle("stroke-width");if(d.hasValue()){var A=d.getPixels();t.lineWidth=A||BN}var f=this.getStyle("stroke-linecap"),p=this.getStyle("stroke-linejoin"),g=this.getStyle("stroke-miterlimit"),v=this.getStyle("stroke-dasharray"),m=this.getStyle("stroke-dashoffset");if(f.hasValue()&&(t.lineCap=f.getString()),p.hasValue()&&(t.lineJoin=p.getString()),g.hasValue()&&(t.miterLimit=g.getNumber()),v.hasValue()&&"none"!==v.getString()){var y=vN(v.getString());void 0!==t.setLineDash?t.setLineDash(y):void 0!==t.webkitLineDash?t.webkitLineDash=y:void 0!==t.mozDash&&(1!==y.length||0!==y[0])&&(t.mozDash=y);var b=m.getPixels();void 0!==t.lineDashOffset?t.lineDashOffset=b:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=b:void 0!==t.mozDashOffset&&(t.mozDashOffset=b)}}if(this.modifiedEmSizeStack=!1,void 0!==t.font){var w=this.getStyle("font"),x=this.getStyle("font-style"),_=this.getStyle("font-variant"),T=this.getStyle("font-weight"),E=this.getStyle("font-size"),S=this.getStyle("font-family"),M=new dB(x.getString(),_.getString(),T.getString(),E.hasValue()?"".concat(E.getPixels(!0),"px"):"",S.getString(),dB.parse(w.getString(),t.font));x.setValue(M.fontStyle),_.setValue(M.fontVariant),T.setValue(M.fontWeight),E.setValue(M.fontSize),S.setValue(M.fontFamily),t.font=M.toString(),E.isPixels()&&(this.document.emSize=E.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}},{key:"clearContext",value:function(t){d(y(n.prototype),"clearContext",this).call(this,t),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),n}(aB),gB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="path",o.pathParser=null,o.pathParser=new fB(o.getAttribute("d").getString()),o}return x(n,[{key:"path",value:function(t){var e=this.pathParser,n=new AB;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case fB.MOVE_TO:this.pathM(t,n);break;case fB.LINE_TO:this.pathL(t,n);break;case fB.HORIZ_LINE_TO:this.pathH(t,n);break;case fB.VERT_LINE_TO:this.pathV(t,n);break;case fB.CURVE_TO:this.pathC(t,n);break;case fB.SMOOTH_CURVE_TO:this.pathS(t,n);break;case fB.QUAD_TO:this.pathQ(t,n);break;case fB.SMOOTH_QUAD_TO:this.pathT(t,n);break;case fB.ARC:this.pathA(t,n);break;case fB.CLOSE_PATH:this.pathZ(t,n)}return n}},{key:"getBoundingBox",value:function(t){return this.path()}},{key:"getMarkers",value:function(){var t=this.pathParser,e=t.getMarkerPoints(),n=t.getMarkerAngles();return e.map((function(t,e){return[t,n[e]]}))}},{key:"renderChildren",value:function(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"!==e.getString("inherit")?t.fill(e.getString()):t.fill()),""!==t.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());var n=this.getMarkers();if(n){var r=n.length-1,i=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(i.isUrlDefinition()){var s=i.getDefinition(),u=l(n[0],2),c=u[0],h=u[1];s.render(t,c,h)}if(o.isUrlDefinition())for(var d=o.getDefinition(),A=1;A<r;A++){var f=l(n[A],2),p=f[0],g=f[1];d.render(t,p,g)}if(a.isUrlDefinition()){var v=a.getDefinition(),m=l(n[r],2),y=m[0],b=m[1];v.render(t,y,b)}}}},{key:"pathM",value:function(t,e){var r=this.pathParser,i=n.pathM(r).point,o=i.x,a=i.y;r.addMarker(i),e.addPoint(o,a),t&&t.moveTo(o,a)}},{key:"pathL",value:function(t,e){var r=this.pathParser,i=n.pathL(r),o=i.current,a=i.point,s=a.x,u=a.y;r.addMarker(a,o),e.addPoint(s,u),t&&t.lineTo(s,u)}},{key:"pathH",value:function(t,e){var r=this.pathParser,i=n.pathH(r),o=i.current,a=i.point,s=a.x,u=a.y;r.addMarker(a,o),e.addPoint(s,u),t&&t.lineTo(s,u)}},{key:"pathV",value:function(t,e){var r=this.pathParser,i=n.pathV(r),o=i.current,a=i.point,s=a.x,u=a.y;r.addMarker(a,o),e.addPoint(s,u),t&&t.lineTo(s,u)}},{key:"pathC",value:function(t,e){var r=this.pathParser,i=n.pathC(r),o=i.current,a=i.point,s=i.controlPoint,u=i.currentPoint;r.addMarker(u,s,a),e.addBezierCurve(o.x,o.y,a.x,a.y,s.x,s.y,u.x,u.y),t&&t.bezierCurveTo(a.x,a.y,s.x,s.y,u.x,u.y)}},{key:"pathS",value:function(t,e){var r=this.pathParser,i=n.pathS(r),o=i.current,a=i.point,s=i.controlPoint,u=i.currentPoint;r.addMarker(u,s,a),e.addBezierCurve(o.x,o.y,a.x,a.y,s.x,s.y,u.x,u.y),t&&t.bezierCurveTo(a.x,a.y,s.x,s.y,u.x,u.y)}},{key:"pathQ",value:function(t,e){var r=this.pathParser,i=n.pathQ(r),o=i.current,a=i.controlPoint,s=i.currentPoint;r.addMarker(s,a,a),e.addQuadraticCurve(o.x,o.y,a.x,a.y,s.x,s.y),t&&t.quadraticCurveTo(a.x,a.y,s.x,s.y)}},{key:"pathT",value:function(t,e){var r=this.pathParser,i=n.pathT(r),o=i.current,a=i.controlPoint,s=i.currentPoint;r.addMarker(s,a,a),e.addQuadraticCurve(o.x,o.y,a.x,a.y,s.x,s.y),t&&t.quadraticCurveTo(a.x,a.y,s.x,s.y)}},{key:"pathA",value:function(t,e){var r=this.pathParser,i=n.pathA(r),o=i.currentPoint,a=i.rX,s=i.rY,u=i.sweepFlag,l=i.xAxisRotation,c=i.centp,h=i.a1,d=i.ad,A=1-u?1:-1,f=h+A*(d/2),p=new GN(c.x+a*Math.cos(f),c.y+s*Math.sin(f));if(r.addMarkerAngle(p,f-A*Math.PI/2),r.addMarkerAngle(o,f-A*Math.PI),e.addPoint(o.x,o.y),t&&!isNaN(h)&&!isNaN(d)){var g=a>s?a:s,v=a>s?1:a/s,m=a>s?s/a:1;t.translate(c.x,c.y),t.rotate(l),t.scale(v,m),t.arc(0,0,g,h,h+d,Boolean(1-u)),t.scale(1/v,1/m),t.rotate(-l),t.translate(-c.x,-c.y)}}},{key:"pathZ",value:function(t,e){n.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}}],[{key:"pathM",value:function(t){var e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}},{key:"pathL",value:function(t){return{current:t.current,point:t.getAsCurrentPoint()}}},{key:"pathH",value:function(t){var e=t.current,n=t.command,r=new GN((n.relative?e.x:0)+n.x,e.y);return t.current=r,{current:e,point:r}}},{key:"pathV",value:function(t){var e=t.current,n=t.command,r=new GN(e.x,(n.relative?e.y:0)+n.y);return t.current=r,{current:e,point:r}}},{key:"pathC",value:function(t){return{current:t.current,point:t.getPoint("x1","y1"),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}},{key:"pathS",value:function(t){return{current:t.current,point:t.getReflectedControlPoint(),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}},{key:"pathQ",value:function(t){return{current:t.current,controlPoint:t.getAsControlPoint("x1","y1"),currentPoint:t.getAsCurrentPoint()}}},{key:"pathT",value:function(t){var e=t.current,n=t.getReflectedControlPoint();return t.control=n,{current:e,controlPoint:n,currentPoint:t.getAsCurrentPoint()}}},{key:"pathA",value:function(t){var e=t.current,n=t.command,r=n.rX,i=n.rY,o=n.xRot,a=n.lArcFlag,s=n.sweepFlag,u=o*(Math.PI/180),l=t.getAsCurrentPoint(),c=new GN(Math.cos(u)*(e.x-l.x)/2+Math.sin(u)*(e.y-l.y)/2,-Math.sin(u)*(e.x-l.x)/2+Math.cos(u)*(e.y-l.y)/2),h=Math.pow(c.x,2)/Math.pow(r,2)+Math.pow(c.y,2)/Math.pow(i,2);h>1&&(r*=Math.sqrt(h),i*=Math.sqrt(h));var d=(a===s?-1:1)*Math.sqrt((Math.pow(r,2)*Math.pow(i,2)-Math.pow(r,2)*Math.pow(c.y,2)-Math.pow(i,2)*Math.pow(c.x,2))/(Math.pow(r,2)*Math.pow(c.y,2)+Math.pow(i,2)*Math.pow(c.x,2)));isNaN(d)&&(d=0);var A=new GN(d*r*c.y/i,d*-i*c.x/r),f=new GN((e.x+l.x)/2+Math.cos(u)*A.x-Math.sin(u)*A.y,(e.y+l.y)/2+Math.sin(u)*A.x+Math.cos(u)*A.y),p=DN([1,0],[(c.x-A.x)/r,(c.y-A.y)/i]),g=[(c.x-A.x)/r,(c.y-A.y)/i],v=[(-c.x-A.x)/r,(-c.y-A.y)/i],m=DN(g,v);return PN(g,v)<=-1&&(m=Math.PI),PN(g,v)>=1&&(m=0),{currentPoint:l,rX:r,rY:i,sweepFlag:s,xAxisRotation:u,centp:f,a1:p,ad:m}}},{key:"pathZ",value:function(t){t.current=t.start}}]),n}(pB),vB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="glyph",o.horizAdvX=o.getAttribute("horiz-adv-x").getNumber(),o.unicode=o.getAttribute("unicode").getString(),o.arabicForm=o.getAttribute("arabic-form").getString(),o}return n}(gB),mB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,(this instanceof n?this.constructor:void 0)===n||i)).type="text",o.x=0,o.y=0,o.measureCache=-1,o}return x(n,[{key:"setContext",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];d(y(n.prototype),"setContext",this).call(this,t,e);var r=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();r&&(t.textBaseline=r)}},{key:"initializeCoordinates",value:function(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}},{key:"getBoundingBox",value:function(t){var e=this;if("text"!==this.type)return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);var n=null;return this.children.forEach((function(r,i){var o=e.getChildBoundingBox(t,e,e,i);n?n.addBoundingBox(o):n=o})),n}},{key:"getFontSize",value:function(){var t=this.document,e=this.parent,n=dB.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(n)}},{key:"getTElementBoundingBox",value:function(t){var e=this.getFontSize();return new AB(this.x,this.y-e,this.x+this.measureText(t),this.y)}},{key:"getGlyph",value:function(t,e,n){var r=e[n],i=null;if(t.isArabic){var o=e.length,a=e[n-1],s=e[n+1],u="isolated";if((0===n||" "===a)&&n<o-1&&" "!==s&&(u="terminal"),n>0&&" "!==a&&n<o-1&&" "!==s&&(u="medial"),n>0&&" "!==a&&(n===o-1||" "===s)&&(u="initial"),void 0!==t.glyphs[r]){var l=t.glyphs[r];i=l instanceof vB?l:l[u]}}else i=t.glyphs[r];return i||(i=t.missingGlyph),i}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(t){var e=t||this.node,n=Array.from(e.parentNode.childNodes),r=n.indexOf(e),i=n.length-1,o=fN(e.textContent||"");return 0===r&&(o=pN(o)),r===i&&(o=gN(o)),o}},{key:"renderChildren",value:function(t){var e=this;if("text"===this.type){this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((function(n,r){e.renderChild(t,e,e,r)}));var n=this.document.screen.mouse;n.isWorking()&&n.checkBoundingBox(this,this.getBoundingBox(t))}else this.renderTElementChildren(t)}},{key:"renderTElementChildren",value:function(t){var e=this.document,n=this.parent,r=this.getText(),i=n.getStyle("font-family").getDefinition();if(i)for(var o=i.fontFace.unitsPerEm,a=dB.parse(e.ctx.font),s=n.getStyle("font-size").getNumber(a.fontSize),u=n.getStyle("font-style").getString(a.fontStyle),l=s/o,c=i.isRTL?r.split("").reverse().join(""):r,h=vN(n.getAttribute("dx").getString()),d=c.length,A=0;A<d;A++){var f=this.getGlyph(i,c,A);t.translate(this.x,this.y),t.scale(l,-l);var p=t.lineWidth;t.lineWidth=t.lineWidth*o/s,"italic"===u&&t.transform(1,0,.4,1,0,0),f.render(t),"italic"===u&&t.transform(1,0,-.4,1,0,0),t.lineWidth=p,t.scale(1/l,-1/l),t.translate(-this.x,-this.y),this.x+=s*(f.horizAdvX||i.horizAdvX)/o,void 0!==h[A]&&!isNaN(h[A])&&(this.x+=h[A])}else{var g=this.x,v=this.y;t.fillStyle&&t.fillText(r,g,v),t.strokeStyle&&t.strokeText(r,g,v)}}},{key:"applyAnchoring",value:function(){if(!(this.textChunkStart>=this.leafTexts.length)){var t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),n=0;n="start"===e?t.x-this.minX:"end"===e?t.x-this.maxX:t.x-(this.minX+this.maxX)/2;for(var r=this.textChunkStart;r<this.leafTexts.length;r++)this.leafTexts[r].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}},{key:"adjustChildCoordinatesRecursive",value:function(t){var e=this;this.children.forEach((function(n,r){e.adjustChildCoordinatesRecursiveCore(t,e,e,r)})),this.applyAnchoring()}},{key:"adjustChildCoordinatesRecursiveCore",value:function(t,e,n,r){var i=n.children[r];i.children.length>0?i.children.forEach((function(n,r){e.adjustChildCoordinatesRecursiveCore(t,e,i,r)})):this.adjustChildCoordinates(t,e,n,r)}},{key:"adjustChildCoordinates",value:function(t,e,n,r){var i=n.children[r];if("function"!=typeof i.measureText)return i;t.save(),i.setContext(t,!0);var o=i.getAttribute("x"),a=i.getAttribute("y"),s=i.getAttribute("dx"),u=i.getAttribute("dy"),l=i.getStyle("font-family").getDefinition(),c=Boolean(l)&&l.isRTL;0===r&&(o.hasValue()||o.setValue(i.getInheritedAttribute("x")),a.hasValue()||a.setValue(i.getInheritedAttribute("y")),s.hasValue()||s.setValue(i.getInheritedAttribute("dx")),u.hasValue()||u.setValue(i.getInheritedAttribute("dy")));var h=i.measureText(t);return c&&(e.x-=h),o.hasValue()?(e.applyAnchoring(),i.x=o.getPixels("x"),s.hasValue()&&(i.x+=s.getPixels("x"))):(s.hasValue()&&(e.x+=s.getPixels("x")),i.x=e.x),e.x=i.x,c||(e.x+=h),a.hasValue()?(i.y=a.getPixels("y"),u.hasValue()&&(i.y+=u.getPixels("y"))):(u.hasValue()&&(e.y+=u.getPixels("y")),i.y=e.y),e.y=i.y,e.leafTexts.push(i),e.minX=Math.min(e.minX,i.x,i.x+h),e.maxX=Math.max(e.maxX,i.x,i.x+h),i.clearContext(t),t.restore(),i}},{key:"getChildBoundingBox",value:function(t,e,n,r){var i=n.children[r];if("function"!=typeof i.getBoundingBox)return null;var o=i.getBoundingBox(t);return o?(i.children.forEach((function(n,r){var a=e.getChildBoundingBox(t,e,i,r);o.addBoundingBox(a)})),o):null}},{key:"renderChild",value:function(t,e,n,r){var i=n.children[r];i.render(t),i.children.forEach((function(n,r){e.renderChild(t,e,i,r)}))}},{key:"measureText",value:function(t){var e=this.measureCache;if(~e)return e;var n=this.getText(),r=this.measureTargetText(t,n);return this.measureCache=r,r}},{key:"measureTargetText",value:function(t,e){if(!e.length)return 0;var n=this.parent,r=n.getStyle("font-family").getDefinition();if(r){for(var i=this.getFontSize(),o=r.isRTL?e.split("").reverse().join(""):e,a=vN(n.getAttribute("dx").getString()),s=o.length,u=0,l=0;l<s;l++){u+=(this.getGlyph(r,o,l).horizAdvX||r.horizAdvX)*i/r.fontFace.unitsPerEm,void 0!==a[l]&&!isNaN(a[l])&&(u+=a[l])}return u}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);var c=t.measureText(e).width;return this.clearContext(t),t.restore(),c}},{key:"getInheritedAttribute",value:function(t){for(var e=this;e instanceof n&&e.isFirstChild();){var r=e.parent.getAttribute(t);if(r.hasValue(!0))return r.getValue("0");e=e.parent}return null}}]),n}(pB),yB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,(this instanceof n?this.constructor:void 0)===n||i)).type="tspan",o.text=o.children.length>0?"":o.getTextFromNode(),o}return x(n,[{key:"getText",value:function(){return this.text}}]),n}(mB),bB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="textNode",t}return n}(yB),wB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="svg",t.root=!1,t}return x(n,[{key:"setContext",value:function(t){var e,r=this.document,i=r.screen,o=r.window,a=t.canvas;if(i.setDefaults(t),a.style&&void 0!==t.font&&o&&void 0!==o.getComputedStyle){t.font=o.getComputedStyle(a).getPropertyValue("font");var s=new HN(r,"fontSize",dB.parse(t.font).fontSize);s.hasValue()&&(r.rootEmSize=s.getPixels("y"),r.emSize=r.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var u=i.viewPort,l=u.width,c=u.height;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var h=this.getAttribute("refX"),A=this.getAttribute("refY"),f=this.getAttribute("viewBox"),p=f.hasValue()?vN(f.getString()):null,g=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),v=0,m=0,b=0,w=0;p&&(v=p[0],m=p[1]),this.root||(l=this.getStyle("width").getPixels("x"),c=this.getStyle("height").getPixels("y"),"marker"===this.type&&(b=v,w=m,v=0,m=0)),i.viewPort.setCurrent(l,c),this.node&&(!this.parent||"foreignObject"===(null===(e=this.node.parentNode)||void 0===e?void 0:e.nodeName))&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),d(y(n.prototype),"setContext",this).call(this,t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),p&&(l=p[2],c=p[3]),r.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:i.viewPort.width,desiredWidth:l,height:i.viewPort.height,desiredHeight:c,minX:v,minY:m,refX:h.getValue(),refY:A.getValue(),clip:g,clipX:b,clipY:w}),p&&(i.viewPort.removeCurrent(),i.viewPort.setCurrent(l,c))}},{key:"clearContext",value:function(t){d(y(n.prototype),"clearContext",this).call(this,t),this.document.screen.viewPort.removeCurrent()}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.getAttribute("width",!0),i=this.getAttribute("height",!0),o=this.getAttribute("viewBox"),a=this.getAttribute("style"),s=r.getNumber(0),u=i.getNumber(0);if(n)if("string"==typeof n)this.getAttribute("preserveAspectRatio",!0).setValue(n);else{var l=this.getAttribute("preserveAspectRatio");l.hasValue()&&l.setValue(l.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(r.setValue(t),i.setValue(e),o.hasValue()||o.setValue("0 0 ".concat(s||t," ").concat(u||e)),a.hasValue()){var c=this.getStyle("width"),h=this.getStyle("height");c.hasValue()&&c.setValue("".concat(t,"px")),h.hasValue()&&h.setValue("".concat(e,"px"))}}}]),n}(pB),xB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="rect",t}return x(n,[{key:"path",value:function(t){var e=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),r=this.getStyle("width",!1,!0).getPixels("x"),i=this.getStyle("height",!1,!0).getPixels("y"),o=this.getAttribute("rx"),a=this.getAttribute("ry"),s=o.getPixels("x"),u=a.getPixels("y");if(o.hasValue()&&!a.hasValue()&&(u=s),a.hasValue()&&!o.hasValue()&&(s=u),s=Math.min(s,r/2),u=Math.min(u,i/2),t){var l=(Math.sqrt(2)-1)/3*4;t.beginPath(),i>0&&r>0&&(t.moveTo(e+s,n),t.lineTo(e+r-s,n),t.bezierCurveTo(e+r-s+l*s,n,e+r,n+u-l*u,e+r,n+u),t.lineTo(e+r,n+i-u),t.bezierCurveTo(e+r,n+i-u+l*u,e+r-s+l*s,n+i,e+r-s,n+i),t.lineTo(e+s,n+i),t.bezierCurveTo(e+s-l*s,n+i,e,n+i-u+l*u,e,n+i-u),t.lineTo(e,n+u),t.bezierCurveTo(e,n+u-l*u,e+s-l*s,n,e+s,n),t.closePath())}return new AB(e,n,e+r,n+i)}},{key:"getMarkers",value:function(){return null}}]),n}(gB),_B=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="circle",t}return x(n,[{key:"path",value:function(t){var e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),r=this.getAttribute("r").getPixels();return t&&r>0&&(t.beginPath(),t.arc(e,n,r,0,2*Math.PI,!1),t.closePath()),new AB(e-r,n-r,e+r,n+r)}},{key:"getMarkers",value:function(){return null}}]),n}(gB),TB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="ellipse",t}return x(n,[{key:"path",value:function(t){var e=(Math.sqrt(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),r=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y");return t&&n>0&&r>0&&(t.beginPath(),t.moveTo(i+n,o),t.bezierCurveTo(i+n,o+e*r,i+e*n,o+r,i,o+r),t.bezierCurveTo(i-e*n,o+r,i-n,o+e*r,i-n,o),t.bezierCurveTo(i-n,o-e*r,i-e*n,o-r,i,o-r),t.bezierCurveTo(i+e*n,o-r,i+n,o-e*r,i+n,o),t.closePath()),new AB(i-n,o-r,i+n,o+r)}},{key:"getMarkers",value:function(){return null}}]),n}(gB),EB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="line",t}return x(n,[{key:"getPoints",value:function(){return[new GN(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new GN(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(t){var e=l(this.getPoints(),2),n=e[0],r=n.x,i=n.y,o=e[1],a=o.x,s=o.y;return t&&(t.beginPath(),t.moveTo(r,i),t.lineTo(a,s)),new AB(r,i,a,s)}},{key:"getMarkers",value:function(){var t=l(this.getPoints(),2),e=t[0],n=t[1],r=e.angleTo(n);return[[e,r],[n,r]]}}]),n}(gB),SB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="polyline",o.points=[],o.points=GN.parsePath(o.getAttribute("points").getString()),o}return x(n,[{key:"path",value:function(t){var e=this.points,n=l(e,1)[0],r=n.x,i=n.y,o=new AB(r,i);return t&&(t.beginPath(),t.moveTo(r,i)),e.forEach((function(e){var n=e.x,r=e.y;o.addPoint(n,r),t&&t.lineTo(n,r)})),o}},{key:"getMarkers",value:function(){var t=this.points,e=t.length-1,n=[];return t.forEach((function(r,i){i!==e&&n.push([r,r.angleTo(t[i+1])])})),n.length>0&&n.push([t[t.length-1],n[n.length-1][1]]),n}}]),n}(gB),MB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="polygon",t}return x(n,[{key:"path",value:function(t){var e=d(y(n.prototype),"path",this).call(this,t),r=l(this.points,1)[0],i=r.x,o=r.y;return t&&(t.lineTo(i,o),t.closePath()),e}}]),n}(SB),CB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="pattern",t}return x(n,[{key:"createPattern",value:function(t,e,n){var r=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),o=new wB(this.document,null);o.attributes.viewBox=new HN(this.document,"viewBox",this.getAttribute("viewBox").getValue()),o.attributes.width=new HN(this.document,"width","".concat(r,"px")),o.attributes.height=new HN(this.document,"height","".concat(i,"px")),o.attributes.transform=new HN(this.document,"transform",this.getAttribute("patternTransform").getValue()),o.children=this.children;var a=this.document.createCanvas(r,i),s=a.getContext("2d"),u=this.getAttribute("x"),l=this.getAttribute("y");u.hasValue()&&l.hasValue()&&s.translate(u.getPixels("x",!0),l.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(var c=-1;c<=1;c++)for(var h=-1;h<=1;h++)s.save(),o.attributes.x=new HN(this.document,"x",c*a.width),o.attributes.y=new HN(this.document,"y",h*a.height),o.render(s),s.restore();return t.createPattern(a,"repeat")}}]),n}(aB),IB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="marker",t}return x(n,[{key:"render",value:function(t,e,n){if(e){var r=e.x,i=e.y,o=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(r,i),"auto"===o&&t.rotate(n),"strokeWidth"===a&&t.scale(t.lineWidth,t.lineWidth),t.save();var s=new wB(this.document,null);s.type=this.type,s.attributes.viewBox=new HN(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.refX=new HN(this.document,"refX",this.getAttribute("refX").getValue()),s.attributes.refY=new HN(this.document,"refY",this.getAttribute("refY").getValue()),s.attributes.width=new HN(this.document,"width",this.getAttribute("markerWidth").getValue()),s.attributes.height=new HN(this.document,"height",this.getAttribute("markerHeight").getValue()),s.attributes.overflow=new HN(this.document,"overflow",this.getAttribute("overflow").getValue()),s.attributes.fill=new HN(this.document,"fill",this.getAttribute("fill").getColor("black")),s.attributes.stroke=new HN(this.document,"stroke",this.getAttribute("stroke").getValue("none")),s.children=this.children,s.render(t),t.restore(),"strokeWidth"===a&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===o&&t.rotate(-n),t.translate(-r,-i)}}}]),n}(aB),NB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="defs",t}return x(n,[{key:"render",value:function(){}}]),n}(aB),BB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="g",t}return x(n,[{key:"getBoundingBox",value:function(t){var e=new AB;return this.children.forEach((function(n){e.addBoundingBox(n.getBoundingBox(t))})),e}}]),n}(pB),kB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;b(this,n),(o=e.call(this,t,r,i)).attributesToInherit=["gradientUnits"],o.stops=[];var a=v(o),s=a.stops;return a.children.forEach((function(t){"stop"===t.type&&s.push(t)})),o}return x(n,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(t,e,n){var r=this,i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var o=i.stops,a=this.getGradient(t,e);if(!a)return this.addParentOpacity(n,o[o.length-1].color);if(o.forEach((function(t){a.addColorStop(t.offset,r.addParentOpacity(n,t.color))})),this.getAttribute("gradientTransform").hasValue()){var s=this.document,u=s.screen,c=u.MAX_VIRTUAL_PIXELS,h=l(u.viewPort.viewPorts,1)[0],d=new xB(s,null);d.attributes.x=new HN(s,"x",-c/3),d.attributes.y=new HN(s,"y",-c/3),d.attributes.width=new HN(s,"width",c),d.attributes.height=new HN(s,"height",c);var A=new BB(s,null);A.attributes.transform=new HN(s,"transform",this.getAttribute("gradientTransform").getValue()),A.children=[d];var f=new wB(s,null);f.attributes.x=new HN(s,"x",0),f.attributes.y=new HN(s,"y",0),f.attributes.width=new HN(s,"width",h.width),f.attributes.height=new HN(s,"height",h.height),f.children=[A];var p=s.createCanvas(h.width,h.height),g=p.getContext("2d");return g.fillStyle=a,f.render(g),g.createPattern(p,"no-repeat")}return a}},{key:"inheritStopContainer",value:function(t){var e=this;this.attributesToInherit.forEach((function(n){!e.getAttribute(n).hasValue()&&t.getAttribute(n).hasValue()&&e.getAttribute(n,!0).setValue(t.getAttribute(n).getValue())}))}},{key:"addParentOpacity",value:function(t,e){return t.hasValue()?new HN(this.document,"color",e).addOpacity(t).getColor():e}}]),n}(aB),PB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="linearGradient",o.attributesToInherit.push("x1","y1","x2","y2"),o}return x(n,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=n?e.getBoundingBox(t):null;if(n&&!r)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var i=n?r.x+r.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),o=n?r.y+r.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=n?r.x+r.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),s=n?r.y+r.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===a&&o===s?null:t.createLinearGradient(i,o,a,s)}}]),n}(kB),DB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="radialGradient",o.attributesToInherit.push("cx","cy","r","fx","fy","fr"),o}return x(n,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=e.getBoundingBox(t);if(n&&!r)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var i=n?r.x+r.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),o=n?r.y+r.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=i,s=o;this.getAttribute("fx").hasValue()&&(a=n?r.x+r.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(s=n?r.y+r.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var u=n?(r.width+r.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),l=this.getAttribute("fr").getPixels();return t.createRadialGradient(a,s,l,i,o,u)}}]),n}(kB),LB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;b(this,n),(o=e.call(this,t,r,i)).type="stop";var a=Math.max(0,Math.min(1,o.getAttribute("offset").getNumber())),s=o.getStyle("stop-opacity"),u=o.getStyle("stop-color",!0);return""===u.getString()&&u.setValue("#000"),s.hasValue()&&(u=u.addOpacity(s)),o.offset=a,o.color=u.getColor(),o}return n}(aB),OB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;b(this,n),(o=e.call(this,t,r,i)).type="animate",o.duration=0,o.initialValue=null,o.initialUnits="",o.removed=!1,o.frozen=!1,t.screen.animations.push(v(o)),o.begin=o.getAttribute("begin").getMilliseconds(),o.maxDuration=o.begin+o.getAttribute("dur").getMilliseconds(),o.from=o.getAttribute("from"),o.to=o.getAttribute("to"),o.values=new HN(t,"values",null);var a=o.getAttribute("values");return a.hasValue()&&o.values.setValue(a.getString().split(";")),o}return x(n,[{key:"getProperty",value:function(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}},{key:"calcValue",value:function(){var t=this.initialUnits,e=this.getProgress(),n=e.progress,r=e.from,i=e.to,o=r.getNumber()+(i.getNumber()-r.getNumber())*n;return"%"===t&&(o*=100),"".concat(o).concat(t)}},{key:"update",value:function(t){var e=this.parent,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){var r=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==r||this.frozen){if("remove"===r&&!this.removed)return this.removed=!0,n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=n.getString();return!1}this.duration+=t;var i=!1;if(this.begin<this.duration){var o=this.calcValue(),a=this.getAttribute("type");if(a.hasValue()){var s=a.getString();o="".concat(s,"(").concat(o,")")}n.setValue(o),i=!0}return i}},{key:"getProgress",value:function(){var t=this.document,e=this.values,n={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(e.hasValue()){var r=n.progress*(e.getValue().length-1),i=Math.floor(r),o=Math.ceil(r);n.from=new HN(t,"from",parseFloat(e.getValue()[i])),n.to=new HN(t,"to",parseFloat(e.getValue()[o])),n.progress=(r-i)/(o-i)}else n.from=this.from,n.to=this.to;return n}}]),n}(aB),RB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="animateColor",t}return x(n,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,n=t.from,r=t.to,i=new uI(n.getColor()),o=new uI(r.getColor());if(i.ok&&o.ok){var a=i.r+(o.r-i.r)*e,s=i.g+(o.g-i.g)*e,u=i.b+(o.b-i.b)*e;return"rgb(".concat(Math.floor(a),", ").concat(Math.floor(s),", ").concat(Math.floor(u),")")}return this.getAttribute("from").getColor()}}]),n}(OB),FB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="animateTransform",t}return x(n,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,n=t.from,r=t.to,i=vN(n.getString()),o=vN(r.getString());return i.map((function(t,n){return t+(o[n]-t)*e})).join(" ")}}]),n}(OB),UB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;b(this,n),(o=e.call(this,t,r,i)).type="font",o.glyphs={},o.horizAdvX=o.getAttribute("horiz-adv-x").getNumber();var a,s=t.definitions,u=E(v(o).children);try{for(u.s();!(a=u.n()).done;){var l=a.value;switch(l.type){case"font-face":o.fontFace=l;var c=l.getStyle("font-family");c.hasValue()&&(s[c.getString()]=v(o));break;case"missing-glyph":o.missingGlyph=l;break;case"glyph":var h=l;h.arabicForm?(o.isRTL=!0,o.isArabic=!0,void 0===o.glyphs[h.unicode]&&(o.glyphs[h.unicode]={}),o.glyphs[h.unicode][h.arabicForm]=h):o.glyphs[h.unicode]=h}}}catch(t){u.e(t)}finally{u.f()}return o}return x(n,[{key:"render",value:function(){}}]),n}(aB),jB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="font-face",o.ascent=o.getAttribute("ascent").getNumber(),o.descent=o.getAttribute("descent").getNumber(),o.unitsPerEm=o.getAttribute("units-per-em").getNumber(),o}return n}(aB),zB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="missing-glyph",t.horizAdvX=0,t}return n}(gB),HB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="tref",t}return x(n,[{key:"getText",value:function(){var t=this.getHrefAttribute().getDefinition();if(t){var e=t.children[0];if(e)return e.getText()}return""}}]),n}(mB),QB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;b(this,n),(o=e.call(this,t,r,i)).type="a";var a=r.childNodes,s=a[0],u=a.length>0&&Array.from(a).every((function(t){return 3===t.nodeType}));return o.hasText=u,o.text=u?o.getTextFromNode(s):"",o}return x(n,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(t){if(this.hasText){d(y(n.prototype),"renderChildren",this).call(this,t);var e=this.document,r=this.x,i=this.y,o=e.screen.mouse,a=new HN(e,"fontSize",dB.parse(e.ctx.font).fontSize);o.isWorking()&&o.checkBoundingBox(this,new AB(r,i-a.getPixels("y"),r+this.measureText(t),i))}else if(this.children.length>0){var s=new BB(this.document,null);s.children=this.children,s.parent=this,s.render(t)}}},{key:"onClick",value:function(){var t=this.document.window;t&&t.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}]),n}(mB);function GB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function VB(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?GB(Object(n),!0).forEach((function(e){BM(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GB(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var WB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;b(this,n),(o=e.call(this,t,r,i)).type="textPath",o.textWidth=0,o.textHeight=0,o.pathLength=-1,o.glyphInfo=null,o.letterSpacingCache=[],o.measuresCache=new Map([["",0]]);var a=o.getHrefAttribute().getDefinition();return o.text=o.getTextFromNode(),o.dataArray=o.parsePathData(a),o}return x(n,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(t){var e=this.dataArray;t&&t.beginPath(),e.forEach((function(e){var n=e.type,r=e.points;switch(n){case fB.LINE_TO:t&&t.lineTo(r[0],r[1]);break;case fB.MOVE_TO:t&&t.moveTo(r[0],r[1]);break;case fB.CURVE_TO:t&&t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case fB.QUAD_TO:t&&t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case fB.ARC:var i=l(r,8),o=i[0],a=i[1],s=i[2],u=i[3],c=i[4],h=i[5],d=i[6],A=i[7],f=s>u?s:u,p=s>u?1:s/u,g=s>u?u/s:1;t&&(t.translate(o,a),t.rotate(d),t.scale(p,g),t.arc(0,0,f,c,c+h,Boolean(1-A)),t.scale(1/p,1/g),t.rotate(-d),t.translate(-o,-a));break;case fB.CLOSE_PATH:t&&t.closePath()}}))}},{key:"renderChildren",value:function(t){this.setTextData(t),t.save();var e=this.parent.getStyle("text-decoration").getString(),n=this.getFontSize(),r=this.glyphInfo,i=t.fillStyle;"underline"===e&&t.beginPath(),r.forEach((function(r,i){var o=r.p0,a=r.p1,s=r.rotation,u=r.text;t.save(),t.translate(o.x,o.y),t.rotate(s),t.fillStyle&&t.fillText(u,0,0),t.strokeStyle&&t.strokeText(u,0,0),t.restore(),"underline"===e&&(0===i&&t.moveTo(o.x,o.y+n/8),t.lineTo(a.x,a.y+n/5))})),"underline"===e&&(t.lineWidth=n/20,t.strokeStyle=i,t.stroke(),t.closePath()),t.restore()}},{key:"getLetterSpacingAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}},{key:"findSegmentToFitChar",value:function(t,e,n,r,i,o,a,s,u){var l=o,c=this.measureText(t,s);" "===s&&"justify"===e&&n<r&&(c+=(r-n)/i),u>-1&&(l+=this.getLetterSpacingAt(u));var h=this.textHeight/20,d=this.getEquidistantPointOnPath(l,h,0),A=this.getEquidistantPointOnPath(l+c,h,0),f={p0:d,p1:A},p=d&&A?Math.atan2(A.y-d.y,A.x-d.x):0;if(a){var g=Math.cos(Math.PI/2+p)*a,v=Math.cos(-p)*a;f.p0=VB(VB({},d),{},{x:d.x+g,y:d.y+v}),f.p1=VB(VB({},A),{},{x:A.x+g,y:A.y+v})}return{offset:l+=c,segment:f,rotation:p}}},{key:"measureText",value:function(t,e){var n=this.measuresCache,r=e||this.getText();if(n.has(r))return n.get(r);var i=this.measureTargetText(t,r);return n.set(r,i),i}},{key:"setTextData",value:function(t){var e=this;if(!this.glyphInfo){var n=this.getText(),r=n.split(""),i=n.split(" ").length-1,o=this.parent.getAttribute("dx").split().map((function(t){return t.getPixels("x")})),a=this.parent.getAttribute("dy").getPixels("y"),s=this.parent.getStyle("text-anchor").getString("start"),u=this.getStyle("letter-spacing"),l=this.parent.getStyle("letter-spacing"),c=0;u.hasValue()&&"inherit"!==u.getValue()?u.hasValue()&&"initial"!==u.getValue()&&"unset"!==u.getValue()&&(c=u.getPixels()):c=l.getPixels();var h=[],d=n.length;this.letterSpacingCache=h;for(var A=0;A<d;A++)h.push(void 0!==o[A]?o[A]:c);var f=h.reduce((function(t,e,n){return 0===n?0:t+e||0}),0),p=this.measureText(t),g=Math.max(p+f,0);this.textWidth=p,this.textHeight=this.getFontSize(),this.glyphInfo=[];var v=this.getPathLength(),m=this.getStyle("startOffset").getNumber(0)*v,y=0;("middle"===s||"center"===s)&&(y=-g/2),("end"===s||"right"===s)&&(y=-g),y+=m,r.forEach((function(n,o){var u=e.findSegmentToFitChar(t,s,g,v,i,y,a,n,o),l=u.offset,c=u.segment,h=u.rotation;y=l,c.p0&&c.p1&&e.glyphInfo.push({text:r[o],p0:c.p0,p1:c.p1,rotation:h})}))}}},{key:"parsePathData",value:function(t){if(this.pathLength=-1,!t)return[];var e=[],n=t.pathParser;for(n.reset();!n.isEnd();){var r=n.current,i=r?r.x:0,o=r?r.y:0,a=n.next(),s=a.type,u=[];switch(a.type){case fB.MOVE_TO:this.pathM(n,u);break;case fB.LINE_TO:s=this.pathL(n,u);break;case fB.HORIZ_LINE_TO:s=this.pathH(n,u);break;case fB.VERT_LINE_TO:s=this.pathV(n,u);break;case fB.CURVE_TO:this.pathC(n,u);break;case fB.SMOOTH_CURVE_TO:s=this.pathS(n,u);break;case fB.QUAD_TO:this.pathQ(n,u);break;case fB.SMOOTH_QUAD_TO:s=this.pathT(n,u);break;case fB.ARC:u=this.pathA(n);break;case fB.CLOSE_PATH:gB.pathZ(n)}a.type!==fB.CLOSE_PATH?e.push({type:s,points:u,start:{x:i,y:o},pathLength:this.calcLength(i,o,s,u)}):e.push({type:fB.CLOSE_PATH,points:[],pathLength:0})}return e}},{key:"pathM",value:function(t,e){var n=gB.pathM(t).point,r=n.x,i=n.y;e.push(r,i)}},{key:"pathL",value:function(t,e){var n=gB.pathL(t).point,r=n.x,i=n.y;return e.push(r,i),fB.LINE_TO}},{key:"pathH",value:function(t,e){var n=gB.pathH(t).point,r=n.x,i=n.y;return e.push(r,i),fB.LINE_TO}},{key:"pathV",value:function(t,e){var n=gB.pathV(t).point,r=n.x,i=n.y;return e.push(r,i),fB.LINE_TO}},{key:"pathC",value:function(t,e){var n=gB.pathC(t),r=n.point,i=n.controlPoint,o=n.currentPoint;e.push(r.x,r.y,i.x,i.y,o.x,o.y)}},{key:"pathS",value:function(t,e){var n=gB.pathS(t),r=n.point,i=n.controlPoint,o=n.currentPoint;return e.push(r.x,r.y,i.x,i.y,o.x,o.y),fB.CURVE_TO}},{key:"pathQ",value:function(t,e){var n=gB.pathQ(t),r=n.controlPoint,i=n.currentPoint;e.push(r.x,r.y,i.x,i.y)}},{key:"pathT",value:function(t,e){var n=gB.pathT(t),r=n.controlPoint,i=n.currentPoint;return e.push(r.x,r.y,i.x,i.y),fB.QUAD_TO}},{key:"pathA",value:function(t){var e=gB.pathA(t),n=e.rX,r=e.rY,i=e.sweepFlag,o=e.xAxisRotation,a=e.centp,s=e.a1,u=e.ad;return 0===i&&u>0&&(u-=2*Math.PI),1===i&&u<0&&(u+=2*Math.PI),[a.x,a.y,n,r,s,u,o,i]}},{key:"calcLength",value:function(t,e,n,r){var i=0,o=null,a=null,s=0;switch(n){case fB.LINE_TO:return this.getLineLength(t,e,r[0],r[1]);case fB.CURVE_TO:for(i=0,o=this.getPointOnCubicBezier(0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),s=.01;s<=1;s+=.01)a=this.getPointOnCubicBezier(s,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),i+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;return i;case fB.QUAD_TO:for(i=0,o=this.getPointOnQuadraticBezier(0,t,e,r[0],r[1],r[2],r[3]),s=.01;s<=1;s+=.01)a=this.getPointOnQuadraticBezier(s,t,e,r[0],r[1],r[2],r[3]),i+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;return i;case fB.ARC:i=0;var u=r[4],l=r[5],c=r[4]+l,h=Math.PI/180;if(Math.abs(u-c)<h&&(h=Math.abs(u-c)),o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),l<0)for(s=u-h;s>c;s-=h)a=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(s=u+h;s<c;s+=h)a=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),i+=this.getLineLength(o.x,o.y,a.x,a.y)}return 0}},{key:"getPointOnLine",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n,s=(i-n)/(r-e+BN),u=Math.sqrt(t*t/(1+s*s));r<e&&(u*=-1);var l=s*u,c=null;if(r===e)c={x:o,y:a+l};else if((a-n)/(o-e+BN)===s)c={x:o+u,y:a+l};else{var h=0,d=0,A=this.getLineLength(e,n,r,i);if(A<BN)return null;var f=(o-e)*(r-e)+(a-n)*(i-n);h=e+(f/=A*A)*(r-e),d=n+f*(i-n);var p=this.getLineLength(o,a,h,d),g=Math.sqrt(t*t-p*p);u=Math.sqrt(g*g/(1+s*s)),r<e&&(u*=-1),c={x:h+u,y:d+(l=s*u)}}return c}},{key:"getPointOnPath",value:function(t){var e=this.getPathLength(),n=0,r=null;if(t<-5e-5||t-5e-5>e)return null;var i,o=E(this.dataArray);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!a||!(a.pathLength<5e-5||n+a.pathLength+5e-5<t)){var s=t-n,u=0;switch(a.type){case fB.LINE_TO:r=this.getPointOnLine(s,a.start.x,a.start.y,a.points[0],a.points[1],a.start.x,a.start.y);break;case fB.ARC:var l=a.points[4],c=a.points[5],h=a.points[4]+c;if(u=l+s/a.pathLength*c,c<0&&u<h||c>=0&&u>h)break;r=this.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],u,a.points[6]);break;case fB.CURVE_TO:(u=s/a.pathLength)>1&&(u=1),r=this.getPointOnCubicBezier(u,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);break;case fB.QUAD_TO:(u=s/a.pathLength)>1&&(u=1),r=this.getPointOnQuadraticBezier(u,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3])}if(r)return r;break}n+=a.pathLength}}catch(t){o.e(t)}finally{o.f()}return null}},{key:"getLineLength",value:function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce((function(t,e){return e.pathLength>0?t+e.pathLength:t}),0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(t,e,n,r,i,o,a,s,u){return{x:s*LN(t)+o*ON(t)+r*RN(t)+e*FN(t),y:u*LN(t)+a*ON(t)+i*RN(t)+n*FN(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,n,r,i,o,a){return{x:o*UN(t)+r*jN(t)+e*zN(t),y:a*UN(t)+i*jN(t)+n*zN(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,n,r,i,o){var a=Math.cos(o),s=Math.sin(o),u=n*Math.cos(i),l=r*Math.sin(i);return{x:t+(u*a-l*s),y:e+(u*s+l*a)}}},{key:"buildEquidistantCache",value:function(t,e){var n=this.getPathLength(),r=e||.25,i=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==r){this.equidistantCache={step:i,precision:r,points:[]};for(var o=0,a=0;a<=n;a+=r){var s=this.getPointOnPath(a),u=this.getPointOnPath(a+r);!s||!u||(o+=this.getLineLength(s.x,s.y,u.x,u.y))>=i&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:a}),o-=i)}}}},{key:"getEquidistantPointOnPath",value:function(t,e,n){if(this.buildEquidistantCache(e,n),t<0||t-this.getPathLength()>5e-5)return null;var r=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[r]||null}}]),n}(mB),YB=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,XB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;b(this,n),(o=e.call(this,t,r,i)).type="image",o.loaded=!1;var a=o.getHrefAttribute().getString();if(a){var s=a.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(a);t.images.push(v(o)),s?o.loadSvg(a):o.loadImage(a),o.isSvg=s}return o}return x(n,[{key:"loadImage",value:function(t){var e=this;return v_(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.document.createImage(t);case 3:r=n.sent,e.image=r,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error('Error while loading image "'.concat(t,'":'),n.t0);case 10:e.loaded=!0;case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},{key:"loadSvg",value:function(t){var e=this;return v_(regeneratorRuntime.mark((function n(){var r,i,o,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=YB.exec(t))){n.next=6;break}i=r[5],"base64"===r[4]?e.image=atob(i):e.image=decodeURIComponent(i),n.next=19;break;case 6:return n.prev=6,n.next=9,e.document.fetch(t);case 9:return o=n.sent,n.next=12,o.text();case 12:a=n.sent,e.image=a,n.next=19;break;case 16:n.prev=16,n.t0=n.catch(6),console.error('Error while loading image "'.concat(t,'":'),n.t0);case 19:e.loaded=!0;case 20:case"end":return n.stop()}}),n,null,[[6,16]])})))()}},{key:"renderChildren",value:function(t){var e=this.document,n=this.image,r=this.loaded,i=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(r&&n&&a&&s){if(t.save(),t.translate(i,o),this.isSvg){var u=e.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:s});u.document.documentElement.parent=this,u.render()}else{var l=this.image;e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:l.width,height:s,desiredHeight:l.height}),this.loaded&&(void 0===l.complete||l.complete)&&t.drawImage(l,0,0)}t.restore()}}},{key:"getBoundingBox",value:function(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),r=this.getStyle("height").getPixels("y");return new AB(t,e,t+n,e+r)}}]),n}(pB),qB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="symbol",t}return x(n,[{key:"render",value:function(t){}}]),n}(pB),KB=function(){function t(e){b(this,t),this.document=e,this.loaded=!1,e.fonts.push(this)}return x(t,[{key:"load",value:function(t,e){var n=this;return v_(regeneratorRuntime.mark((function r(){var i,o,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=n.document,r.next=4,i.canvg.parser.load(e);case 4:o=r.sent,a=o.getElementsByTagName("font"),Array.from(a).forEach((function(e){var n=i.createElement(e);i.definitions[t]=n})),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.error('Error while loading font "'.concat(e,'":'),r.t0);case 12:n.loaded=!0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()}}]),t}(),ZB=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="style",fN(Array.from(r.childNodes).map((function(t){return t.textContent})).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach((function(e){var n=e.trim();if(n){var r=n.split("{"),i=r[0].split(","),o=r[1].split(";");i.forEach((function(e){var n=e.trim();if(n){var r=t.styles[n]||{};if(o.forEach((function(e){var n=e.indexOf(":"),i=e.substr(0,n).trim(),o=e.substr(n+1,e.length-n).trim();i&&o&&(r[i]=new HN(t,i,o))})),t.styles[n]=r,t.stylesSpecificity[n]=NN(n),"@font-face"===n){var i=r["font-family"].getString().replace(/"|'/g,"");r.src.getString().split(",").forEach((function(e){if(e.indexOf('format("svg")')>0){var n=bN(e);n&&new KB(t).load(i,n)}}))}}}))}})),o}return n}(aB);ZB.parseExternalUrl=bN;var JB=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="use",t}return x(n,[{key:"setContext",value:function(t){d(y(n.prototype),"setContext",this).call(this,t);var e=this.getAttribute("x"),r=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),r.hasValue()&&t.translate(0,r.getPixels("y"))}},{key:"path",value:function(t){var e=this.element;e&&e.path(t)}},{key:"renderChildren",value:function(t){var e=this.document,n=this.element;if(n){var r=n;if("symbol"===n.type&&((r=new wB(e,null)).attributes.viewBox=new HN(e,"viewBox",n.getAttribute("viewBox").getString()),r.attributes.preserveAspectRatio=new HN(e,"preserveAspectRatio",n.getAttribute("preserveAspectRatio").getString()),r.attributes.overflow=new HN(e,"overflow",n.getAttribute("overflow").getString()),r.children=n.children,n.styles.opacity=new HN(e,"opacity",this.calculateOpacity())),"svg"===r.type){var i=this.getStyle("width",!1,!0),o=this.getStyle("height",!1,!0);i.hasValue()&&(r.attributes.width=new HN(e,"width",i.getString())),o.hasValue()&&(r.attributes.height=new HN(e,"height",o.getString()))}var a=r.parent;r.parent=this,r.render(t),r.parent=a}}},{key:"getBoundingBox",value:function(t){var e=this.element;return e?e.getBoundingBox(t):null}},{key:"elementTransform",value:function(){var t=this.document,e=this.element;return oB.fromElement(t,e)}},{key:"element",get:function(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}]),n}(pB);function $B(t,e,n,r,i,o){return t[n*r*4+4*e+o]}function tk(t,e,n,r,i,o,a){t[n*r*4+4*e+o]=a}function ek(t,e,n){return t[e]*n}function nk(t,e,n,r){return e+Math.cos(t)*n+Math.sin(t)*r}var rk=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;b(this,n),(o=e.call(this,t,r,i)).type="feColorMatrix";var a=vN(o.getAttribute("values").getString());switch(o.getAttribute("type").getString("matrix")){case"saturate":var s=a[0];a=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var u=a[0]*Math.PI/180;a=[nk(u,.213,.787,-.213),nk(u,.715,-.715,-.715),nk(u,.072,-.072,.928),0,0,nk(u,.213,-.213,.143),nk(u,.715,.285,.14),nk(u,.072,-.072,-.283),0,0,nk(u,.213,-.213,-.787),nk(u,.715,-.715,.715),nk(u,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return o.matrix=a,o.includeOpacity=o.getAttribute("includeOpacity").hasValue(),o}return x(n,[{key:"apply",value:function(t,e,n,r,i){for(var o=this.includeOpacity,a=this.matrix,s=t.getImageData(0,0,r,i),u=0;u<i;u++)for(var l=0;l<r;l++){var c=$B(s.data,l,u,r,0,0),h=$B(s.data,l,u,r,0,1),d=$B(s.data,l,u,r,0,2),A=$B(s.data,l,u,r,0,3),f=ek(a,0,c)+ek(a,1,h)+ek(a,2,d)+ek(a,3,A)+ek(a,4,1),p=ek(a,5,c)+ek(a,6,h)+ek(a,7,d)+ek(a,8,A)+ek(a,9,1),g=ek(a,10,c)+ek(a,11,h)+ek(a,12,d)+ek(a,13,A)+ek(a,14,1),v=ek(a,15,c)+ek(a,16,h)+ek(a,17,d)+ek(a,18,A)+ek(a,19,1);o&&(f=0,p=0,g=0,v*=A/255),tk(s.data,l,u,r,0,0,f),tk(s.data,l,u,r,0,1,p),tk(s.data,l,u,r,0,2,g),tk(s.data,l,u,r,0,3,v)}t.clearRect(0,0,r,i),t.putImageData(s,0,0)}}]),n}(aB),ik=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="mask",t}return x(n,[{key:"apply",value:function(t,e){var r=this.document,i=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(!a&&!s){var u=new AB;this.children.forEach((function(e){u.addBoundingBox(e.getBoundingBox(t))})),i=Math.floor(u.x1),o=Math.floor(u.y1),a=Math.floor(u.width),s=Math.floor(u.height)}var l=this.removeStyles(e,n.ignoreStyles),c=r.createCanvas(i+a,o+s),h=c.getContext("2d");r.screen.setDefaults(h),this.renderChildren(h),new rk(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(h,0,0,i+a,o+s);var d=r.createCanvas(i+a,o+s),A=d.getContext("2d");r.screen.setDefaults(A),e.render(A),A.globalCompositeOperation="destination-in",A.fillStyle=h.createPattern(c,"no-repeat"),A.fillRect(0,0,i+a,o+s),t.fillStyle=A.createPattern(d,"no-repeat"),t.fillRect(0,0,i+a,o+s),this.restoreStyles(e,l)}},{key:"render",value:function(t){}}]),n}(aB);ik.ignoreStyles=["mask","transform","clip-path"];var ok=function(){},ak=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="clipPath",t}return x(n,[{key:"apply",value:function(t){var e=this.document,n=Reflect.getPrototypeOf(t),r=t.beginPath,i=t.closePath;n&&(n.beginPath=ok,n.closePath=ok),Reflect.apply(r,t,[]),this.children.forEach((function(r){if(void 0!==r.path){var o=void 0!==r.elementTransform?r.elementTransform():null;o||(o=oB.fromElement(e,r)),o&&o.apply(t),r.path(t),n&&(n.closePath=i),o&&o.unapply(t)}})),Reflect.apply(i,t,[]),t.clip(),n&&(n.beginPath=r,n.closePath=i)}},{key:"render",value:function(t){}}]),n}(aB),sk=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="filter",t}return x(n,[{key:"apply",value:function(t,e){var r=this.document,i=this.children,o=e.getBoundingBox(t);if(o){var a=0,s=0;i.forEach((function(t){var e=t.extraFilterDistance||0;a=Math.max(a,e),s=Math.max(s,e)}));var u=Math.floor(o.width),l=Math.floor(o.height),c=u+2*a,h=l+2*s;if(!(c<1||h<1)){var d=Math.floor(o.x),A=Math.floor(o.y),f=this.removeStyles(e,n.ignoreStyles),p=r.createCanvas(c,h),g=p.getContext("2d");r.screen.setDefaults(g),g.translate(-d+a,-A+s),e.render(g),i.forEach((function(t){"function"==typeof t.apply&&t.apply(g,0,0,c,h)})),t.drawImage(p,0,0,c,h,d-a,A-s,c,h),this.restoreStyles(e,f)}}}},{key:"render",value:function(t){}}]),n}(aB);sk.ignoreStyles=["filter","transform","clip-path"];var uk=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="feDropShadow",o.addStylesFromStyleDefinition(),o}return x(n,[{key:"apply",value:function(t,e,n,r,i){}}]),n}(aB),lk=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="feMorphology",t}return x(n,[{key:"apply",value:function(t,e,n,r,i){}}]),n}(aB),ck=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="feComposite",t}return x(n,[{key:"apply",value:function(t,e,n,r,i){}}]),n}(aB),hk=function(t){A(n,t);var e=p(n);function n(t,r,i){var o;return b(this,n),(o=e.call(this,t,r,i)).type="feGaussianBlur",o.blurRadius=Math.floor(o.getAttribute("stdDeviation").getNumber()),o.extraFilterDistance=o.blurRadius,o}return x(n,[{key:"apply",value:function(t,e,n,r,i){var o=this.document,a=this.blurRadius,s=o.window?o.window.document.body:null,u=t.canvas;u.id=o.getUniqueId(),s&&(u.style.display="none",s.appendChild(u)),hN(u,e,n,r,i,a),s&&s.removeChild(u)}}]),n}(aB),dk=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="title",t}return n}(aB),Ak=function(t){A(n,t);var e=p(n);function n(){var t;return b(this,n),(t=e.apply(this,arguments)).type="desc",t}return n}(aB),fk={svg:wB,rect:xB,circle:_B,ellipse:TB,line:EB,polyline:SB,polygon:MB,path:gB,pattern:CB,marker:IB,defs:NB,linearGradient:PB,radialGradient:DB,stop:LB,animate:OB,animateColor:RB,animateTransform:FB,font:UB,"font-face":jB,"missing-glyph":zB,glyph:vB,text:mB,tspan:yB,tref:HB,a:QB,textPath:WB,image:XB,g:BB,symbol:qB,style:ZB,use:JB,mask:ik,clipPath:ak,filter:sk,feDropShadow:uk,feMorphology:lk,feComposite:ck,feColorMatrix:rk,feGaussianBlur:hk,title:dk,desc:Ak};function pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gk(){return gk=v_(regeneratorRuntime.mark((function t(e){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=document.createElement("img"),t.abrupt("return",(n&&(r.crossOrigin="Anonymous"),new Promise((function(t,n){r.onload=function(){t(r)},r.onerror=function(t,e,r,i,o){n(o)},r.src=e}))));case 2:case"end":return t.stop()}}),t)}))),gk.apply(this,arguments)}var vk=function(){function t(e){b(this,t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.rootEmSize,i=void 0===r?12:r,o=n.emSize,a=void 0===o?12:o,s=n.createCanvas,u=void 0===s?t.createCanvas:s,l=n.createImage,c=void 0===l?t.createImage:l,h=n.anonymousCrossOrigin;this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=i,this.emSize=a,this.createCanvas=u,this.createImage=this.bindCreateImage(c,h),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}return x(t,[{key:"bindCreateImage",value:function(t,e){return"boolean"==typeof e?function(n,r){return t(n,"boolean"==typeof r?r:e)}:t}},{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every((function(t){return t.loaded}))}},{key:"isFontsLoaded",value:function(){return this.fonts.every((function(t){return t.loaded}))}},{key:"createDocumentElement",value:function(t){var e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}},{key:"createElement",value:function(e){var n=e.nodeName.replace(/^[^:]+:/,""),r=t.elementTypes[n];return void 0!==r?new r(this,e):new sB(this,e)}},{key:"createTextNode",value:function(t){return new bB(this,t)}},{key:"setViewBox",value:function(t){this.screen.setViewBox(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pk(Object(n),!0).forEach((function(e){BM(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({document:this},t))}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var t=this.emSizeStack;return t[t.length-1]},set:function(t){this.emSizeStack.push(t)}}]),t}();function mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mk(Object(n),!0).forEach((function(e){BM(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}vk.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},vk.createImage=function(t){return gk.apply(this,arguments)},vk.elementTypes=fk;var bk=function(){function t(e,n){b(this,t);var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.parser=new ZN(r),this.screen=new XN(e,r),this.options=r;var i=new vk(this,r),o=i.createDocumentElement(n);this.document=i,this.documentElement=o}return x(t,[{key:"fork",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.from(e,n,yk(yk({},this.options),r))}},{key:"forkString",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.fromString(e,n,yk(yk({},this.options),r))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:function(){var t=arguments,e=this;return v_(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:{},e.start(yk({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},r)),n.next=4,e.ready();case 4:e.stop();case 5:case"end":return n.stop()}}),n)})))()}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.documentElement,n=this.screen,r=this.options;n.start(e,yk(yk({enableRedraw:!0},r),t))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(t,e,n)}}],[{key:"from",value:function(e,n){var r=arguments;return v_(regeneratorRuntime.mark((function i(){var o,a,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.length>2&&void 0!==r[2]?r[2]:{},a=new ZN(o),i.next=4,a.parse(n);case 4:return s=i.sent,i.abrupt("return",new t(e,s,o));case 6:case"end":return i.stop()}}),i)})))()}},{key:"fromString",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new ZN(r),o=i.parseFromString(n);return new t(e,o,r)}}]),t}(),wk=Object.freeze(Object.defineProperty({__proto__:null,AElement:QB,AnimateColorElement:RB,AnimateElement:OB,AnimateTransformElement:FB,BoundingBox:AB,CB1:LN,CB2:ON,CB3:RN,CB4:FN,Canvg:bk,CircleElement:_B,ClipPathElement:ak,DefsElement:NB,DescElement:Ak,Document:vk,Element:aB,EllipseElement:TB,FeColorMatrixElement:rk,FeCompositeElement:ck,FeDropShadowElement:uk,FeGaussianBlurElement:hk,FeMorphologyElement:lk,FilterElement:sk,Font:dB,FontElement:UB,FontFaceElement:jB,GElement:BB,GlyphElement:vB,GradientElement:kB,ImageElement:XB,LineElement:EB,LinearGradientElement:PB,MarkerElement:IB,MaskElement:ik,Matrix:eB,MissingGlyphElement:zB,Mouse:VN,PSEUDO_ZERO:BN,Parser:ZN,PathElement:gB,PathParser:fB,PatternElement:CB,Point:GN,PolygonElement:MB,PolylineElement:SB,Property:HN,QB1:UN,QB2:jN,QB3:zN,RadialGradientElement:DB,RectElement:xB,RenderedElement:pB,Rotate:$N,SVGElement:wB,SVGFontLoader:KB,Scale:tB,Screen:XN,Skew:nB,SkewX:rB,SkewY:iB,StopElement:LB,StyleElement:ZB,SymbolElement:qB,TRefElement:HB,TSpanElement:yB,TextElement:mB,TextPathElement:WB,TitleElement:dk,Transform:oB,Translate:JN,UnknownElement:sB,UseElement:JB,ViewPort:QN,compressSpaces:fN,default:bk,getSelectorSpecificity:NN,normalizeAttributeName:yN,normalizeColor:wN,parseExternalUrl:bN,presets:AN,toNumbers:vN,trimLeft:pN,trimRight:gN,vectorMagnitude:kN,vectorsAngle:DN,vectorsRatio:PN},Symbol.toStringTag,{value:"Module"}));e.DefaultUrl=ft,e.Slide=R.Slide,e.SlidePreviewer=so,e.addHooks=function(t){eo=!0,t.on("focus",(function(t){var e=t.appId;ro.focus(e)})),t.on("created",(function(t){var e=t.appId;io.forEach((function(t){return t(e)}))})),t.on("destroy",(function(t){var e=t.appId;oo.forEach((function(t){return t(e)}))}))},e.apps=ro,e.default=co,e.getFreezerLength=function(){return e.FreezerLength},e.onCreated=function(t){return io.add(t),function(){return io.delete(t)}},e.onDestroyed=function(t){return oo.add(t),function(){return oo.delete(t)}},e.previewSlide=function(t){var e=t.container,n=t.taskId,r=t.url,i=void 0===r?ft:r,o=t.debug,a=void 0!==o&&o;if(!n)throw new Error("[Slide] taskId is required");e.style.cssText+="display:flex;flex-direction:column";var s=new so({target:e});return s.debug=!!a,s.mount(n,i),s},e.setFreezerLength=function(t){e.FreezerLength=t<1?1/0:t},e.usePlugin=uo,e.version=lo},18808:function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e,n,r,i,o,a,s,u;void 0===CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(t,e,n,r,i,o,a,s){this.save(),this.translate(t,e),this.rotate(i),this.scale(n,r),this.arc(0,0,1,o,a,s),this.restore()}),void 0===CanvasRenderingContext2D.prototype.resetTransform&&(CanvasRenderingContext2D.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)}),void 0===CanvasRenderingContext2D.prototype.getTransform&&(CanvasRenderingContext2D.prototype.getTransform=function(){return this._t2stack&&this._t2stack[this._t2stack.length-1]||{a:1,b:0,c:0,d:1,e:0,f:0}},CanvasRenderingContext2D.prototype.save=(e=CanvasRenderingContext2D.prototype.save,function(){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var t=this._t2stack[this._t2stack.length-1];this._t2stack.push(t&&{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}),e.call(this)}),CanvasRenderingContext2D.prototype.restore=(n=CanvasRenderingContext2D.prototype.restore,function(){this._t2stack&&this._t2stack.pop(),n.call(this)}),CanvasRenderingContext2D.prototype.transform=(r=CanvasRenderingContext2D.prototype.transform,function(t,e,n,i,o,a){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var s=this._t2stack[this._t2stack.length-1],u=s.a*t+s.c*e,l=s.b*t+s.d*e,c=s.a*n+s.c*i,h=s.b*n+s.d*i,d=s.e+s.a*o+s.c*a,A=s.f+s.b*o+s.d*a;s.a=u,s.b=l,s.c=c,s.d=h,s.e=d,s.f=A,r.call(this,t,e,n,i,o,a)}),CanvasRenderingContext2D.prototype.setTransform=(i=CanvasRenderingContext2D.prototype.setTransform,function(e,n,r,o,a,s){if(this._t2stack||(this._t2stack=[{}]),"object"===t(e)||void 0===e){var u=e.a,l=e.b,c=e.c,h=e.d,d=e.e,A=e.f;this._t2stack[this._t2stack.length-1]={a:u,b:l,c:c,d:h,e:d,f:A},i.call(this,u,l,c,h,d,A)}else this._t2stack[this._t2stack.length-1]={a:e,b:n,c:r,d:o,e:a,f:s},i.call(this,e,n,r,o,a,s)}),CanvasRenderingContext2D.prototype.resetTransform=(o=CanvasRenderingContext2D.prototype.resetTransform,function(){this._t2stack||(this._t2stack=[{}]),this._t2stack[this._t2stack.length-1]={a:1,b:0,c:0,d:1,e:0,f:0},o&&o.call(this)}),CanvasRenderingContext2D.prototype.scale=(a=CanvasRenderingContext2D.prototype.scale,function(t,e){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var n=this._t2stack[this._t2stack.length-1];t=t||1,e=e||t,n.a*=t,n.c*=e,n.b*=t,n.d*=e,a.call(this,t,e)}),CanvasRenderingContext2D.prototype.rotate=(s=CanvasRenderingContext2D.prototype.rotate,function(t){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var e=this._t2stack[this._t2stack.length-1],n=Math.cos(-t),r=Math.sin(-t),i=e.a*n-e.c*r,o=e.b*n-e.d*r,a=e.c*n+e.a*r,u=e.d*n+e.b*r;return e.a=i,e.b=o,e.c=a,e.d=u,s.call(this,t)}),CanvasRenderingContext2D.prototype.translate=(u=CanvasRenderingContext2D.prototype.translate,function(t,e){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var n=this._t2stack[this._t2stack.length-1];return n.e+=t*n.a+e*n.c,n.f+=t*n.b+e*n.d,u.call(this,t,e)}))},92710:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==r(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}({"./src/CombinePlayerImplement.ts":function(t,e,n){n.d(e,"a",(function(){return m}));var r=n("@babel/runtime/regenerator"),i=n.n(r),o=n("@babel/runtime/helpers/asyncToGenerator"),a=n.n(o),s=n("@babel/runtime/helpers/classCallCheck"),u=n.n(s),l=n("@babel/runtime/helpers/createClass"),c=n.n(l),h=function(t,e,n){"string"==typeof n?console.log("[Combine-Player][".concat(t,"]: ").concat(e," -"),n):console.log("[Combine-Player][".concat(t,"]: ").concat(e," -"),JSON.stringify(n,null,2))},d=n("./src/StatusContant.ts"),A=n("./src/EventEmitter.ts"),f=n("./src/ErrorConstant.ts");function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var g=function(){function t(e){u()(this,t),this.videoStatus={current:d.b.PauseBuffering,previous:d.b.PauseBuffering},this.whiteboardStatus={current:d.b.PauseBuffering,previous:d.b.PauseBuffering},this.statusLockInfo={isLocked:!1,allowStatusList:[],unLockStatusList:[]},this.events=new A.a,this.table=void 0,this.debug=function(){},this.statusIgnoreCrashByDisabled=[],this.statusIgnoreCrashByDisabledCallback=function(){return Promise.resolve()},e&&(this.debug=h),this.table=this.initTables()}var e;return c()(t,[{key:"one",value:function(t,e){var n=this;return new Promise((function(r,o){n.events.one(t,function(){var t=a()(i.a.mark((function t(n,a,s){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=4;break}return t.next=4,e({previous:n,current:a});case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),o(t.t0);case 10:return t.prev=10,s(),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})));return function(e,n,r){return t.apply(this,arguments)}}())}))}},{key:"setOnCrashByDisabledStatus",value:(e=a()(i.a.mark((function t(e){var n=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.on(d.c.Disabled,function(){var t=a()(i.a.mark((function t(r){var o,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=r.current,a=o.video,s=o.whiteboard,n.shouldCrash(a,s)&&e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"oneButNotCrashByDisabled",value:function(t,e){var n=this;return new Promise((function(r,o){if(0!==n.statusIgnoreCrashByDisabled.length)return o(new Error(f.f));n.statusIgnoreCrashByDisabled.push(t);var s=function(){var t=a()(i.a.mark((function t(a,s,u){var l,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=n.getStatus(d.a.Whiteboard).current,c=n.getStatus(d.a.Video).current,n.shouldCrash(c,l)){t.next=13;break}if(n.statusIgnoreCrashByDisabled=[],n.statusIgnoreCrashByDisabledCallback=function(){return Promise.resolve()},u(),r(),!e){t.next=11;break}return t.next=11,e({previous:a,current:s});case 11:t.next=14;break;case 13:o(new Error(f.a));case 14:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();n.statusIgnoreCrashByDisabledCallback=s,n.events.one(d.c.Disabled,s)}))}},{key:"cancelOneButNotCrashByDisabled",value:function(){this.events.removeListener(d.c.Disabled,this.statusIgnoreCrashByDisabledCallback),this.statusIgnoreCrashByDisabled=[],this.statusIgnoreCrashByDisabledCallback=function(){return Promise.resolve()}}},{key:"on",value:function(t,e){var n=this;return new Promise((function(r,o){n.events.addListener(t,function(){var t=a()(i.a.mark((function t(n,a,s){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e({previous:n,current:a});case 3:r(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),o(t.t0);case 9:return t.prev=9,s(),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(e,n,r){return t.apply(this,arguments)}}())}))}},{key:"off",value:function(t){if("string"==typeof t)this.events.removeAllListener(t);else for(var e=0;e<t.length;e++)this.events.removeAllListener(t[e])}},{key:"destroy",value:function(){this.events.destroy(),this.unlockCombineStatus()}},{key:"setStatus",value:function(t,e){switch(t){case d.a.Video:if(this.videoStatus.current===e)return;this.videoStatus.current=e,this.debug("Single","Video",d.b[e]);break;case d.a.Whiteboard:if(this.whiteboardStatus.current===e)return;this.whiteboardStatus.current=e,this.debug("Single","Whiteboard",d.b[e])}var n=this.whiteboardStatus.current,r=this.videoStatus.current,i=this.table[n][r];this.statusLockInfo.isLocked?this.statusLockInfo.allowStatusList.includes(i.combineStatus)&&(this.statusLockInfo.unLockStatusList.includes(i.combineStatus)&&this.unlockCombineStatus(),this.dispatchEvent(i)):this.dispatchEvent(i)}},{key:"lockCombineStatus",value:function(t,e){this.statusLockInfo.isLocked||(this.statusLockInfo.isLocked=!0,this.statusLockInfo.allowStatusList=t,this.statusLockInfo.unLockStatusList=e)}},{key:"getCombinationStatus",value:function(){var t=this.videoStatus,e=t.previous,n=t.current,r=this.whiteboardStatus,i=r.previous,o=r.current;return{previous:this.table[i][e].combineStatus,current:this.table[o][n].combineStatus}}},{key:"getStatus",value:function(t){switch(t){case d.a.Video:return{previous:this.videoStatus.previous,current:this.videoStatus.current};case d.a.Whiteboard:return{previous:this.whiteboardStatus.previous,current:this.whiteboardStatus.current}}}},{key:"shouldCrash",value:function(t,e){var n,r=!1,i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.statusIgnoreCrashByDisabled[0]);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.video;if(e===o.whiteboard&&a===t){r=!0;break}}}catch(t){i.e(t)}finally{i.f()}return!r}},{key:"unlockCombineStatus",value:function(){this.statusLockInfo.isLocked=!1,this.statusLockInfo.allowStatusList=[],this.statusLockInfo.unLockStatusList=[]}},{key:"setPreviousStatus",value:function(t,e){this.whiteboardStatus.previous=t,this.videoStatus.previous=e}},{key:"dispatchEvent",value:function(t){var e=this,n=t.videoStatus,r=t.whiteboardStatus,i=t.combineStatus,o={whiteboard:this.getStatus(d.a.Whiteboard).previous,video:this.getStatus(d.a.Video).previous},a={whiteboard:r,video:n};this.debug("CombinedStatus",i,{previous:{whiteboard:d.b[o.whiteboard],video:d.b[o.video]},current:{whiteboard:d.b[a.whiteboard],video:d.b[a.video]}}),this.events.emit(i,o,a,(function(){e.setPreviousStatus(r,n)}))}},{key:"initTables",value:function(){var t=function(t){return function(e,n){return Object.freeze({combineStatus:t,whiteboardStatus:e,videoStatus:n})}},e=t(d.c.PauseSeeking),n=t(d.c.PlayingSeeking),r=t(d.c.PauseBuffering),i=t(d.c.PlayingBuffering),o=t(d.c.ToPlay),a=t(d.c.ToPause),s=t(d.c.Pause),u=t(d.c.Playing),l=t(d.c.Disabled),c=t(d.c.Ended);return Object.freeze([Object.freeze([e(d.b.PauseSeeking,d.b.PauseSeeking),e(d.b.PauseSeeking,d.b.Pause),l(d.b.PauseSeeking,d.b.PauseBuffering),l(d.b.PauseSeeking,d.b.PlayingBuffering),l(d.b.PauseSeeking,d.b.Playing),l(d.b.PauseSeeking,d.b.PlayingSeeking),e(d.b.PauseSeeking,d.b.Ended)]),Object.freeze([e(d.b.Pause,d.b.PauseSeeking),s(d.b.Pause,d.b.Pause),r(d.b.Pause,d.b.PauseBuffering),i(d.b.Pause,d.b.PlayingBuffering),o(d.b.Pause,d.b.Playing),n(d.b.Pause,d.b.PlayingSeeking),c(d.b.Pause,d.b.Ended)]),Object.freeze([l(d.b.PauseBuffering,d.b.PauseSeeking),r(d.b.PauseBuffering,d.b.Pause),r(d.b.PauseBuffering,d.b.PauseBuffering),l(d.b.PauseBuffering,d.b.PlayingBuffering),l(d.b.PauseBuffering,d.b.Playing),l(d.b.PauseBuffering,d.b.PlayingSeeking),l(d.b.PauseBuffering,d.b.Ended)]),[l(d.b.PlayingBuffering,d.b.PauseSeeking),i(d.b.PlayingBuffering,d.b.Pause),l(d.b.PlayingBuffering,d.b.PauseBuffering),i(d.b.PlayingBuffering,d.b.PlayingBuffering),a(d.b.PlayingBuffering,d.b.Playing),l(d.b.PlayingBuffering,d.b.PlayingSeeking),l(d.b.PlayingBuffering,d.b.Ended)],Object.freeze([l(d.b.Playing,d.b.PauseSeeking),o(d.b.Playing,d.b.Pause),l(d.b.Playing,d.b.PauseBuffering),a(d.b.Playing,d.b.PlayingBuffering),u(d.b.Playing,d.b.Playing),a(d.b.Playing,d.b.PlayingSeeking),a(d.b.Playing,d.b.Ended)]),Object.freeze([l(d.b.PlayingSeeking,d.b.PauseSeeking),n(d.b.PlayingSeeking,d.b.Pause),l(d.b.PlayingSeeking,d.b.PauseBuffering),l(d.b.PlayingSeeking,d.b.PlayingBuffering),a(d.b.PlayingSeeking,d.b.Playing),n(d.b.PlayingSeeking,d.b.PlayingSeeking),n(d.b.PlayingSeeking,d.b.Ended)]),Object.freeze([e(d.b.Ended,d.b.PauseSeeking),c(d.b.Ended,d.b.Pause),l(d.b.Ended,d.b.PauseBuffering),l(d.b.Ended,d.b.PlayingBuffering),a(d.b.Ended,d.b.Playing),n(d.b.Ended,d.b.PlayingSeeking),c(d.b.Ended,d.b.Ended)])])}}]),t}(),v=function(){function t(){u()(this,t),this.queue=[],this.isHanding=!1}var e;return c()(t,[{key:"append",value:function(t){var e=this;return new Promise((function(n,r){var i={handler:t,resolve:n,reject:r};e.queue.push(i),e.isHanding||e.startHandingTasksLoop()}))}},{key:"destroy",value:function(){this.queue=[]}},{key:"startHandingTasksLoop",value:(e=a()(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,this.isHanding=!0;case 2:if(!(this.queue.length>0)){t.next=20;break}return e=this.queue[0],t.prev=4,t.t0=e,t.next=8,e.handler();case 8:t.t1=t.sent,t.t0.resolve.call(t.t0,t.t1),t.next=15;break;case 12:t.prev=12,t.t2=t.catch(4),e.reject(t.t2);case 15:return t.prev=15,this.queue.shift(),t.finish(15);case 18:t.next=2;break;case 20:t.next=25;break;case 22:throw t.prev=22,t.t3=t.catch(0),new Error(t.t3);case 25:return t.prev=25,this.isHanding=!1,t.finish(25);case 28:case"end":return t.stop()}}),t,this,[[0,22,25,28],[4,12,15,18]])}))),function(){return e.apply(this,arguments)})}]),t}(),m=function(){function t(e){u()(this,t),this.video=void 0,this.whiteboard=void 0,this.videoOptions=void 0,this.stateMachine=void 0,this._playbackRate=1,this.seekTime=NaN,this.triggerSource=d.e.None,this.currentCombineStatus=d.d.PauseBuffering,this.whiteboardEmitter=void 0,this.taskQueue=new v,this.onStatusChangeHandleList=[];var n=e.videoConfig,r=e.whiteboard,i=e.whiteboardEmitter,o=e.debug;this.videoOptions=n.videoOptions,this.video=n.video,this.whiteboard=r,this.whiteboardEmitter=i,this.stateMachine=new g(o),this.initOnCrashByDisabledStatusCallback(),this.initVideo(n.isCanplay),this.initWhiteboard()}var e,n,r,o,s,l,h,A,p,m,y,b,w,x,_,T,E,S;return c()(t,[{key:"setOnStatusChange",value:function(t){this.onStatusChangeHandleList.push(t)}},{key:"removeStatusChange",value:function(t){this.onStatusChangeHandleList=this.onStatusChangeHandleList.filter((function(e){return e!==t}))}},{key:"removeAllStatusChange",value:function(){this.onStatusChangeHandleList=[]}},{key:"getStatus",value:function(){return this.combinedStatus}},{key:"playbackSpeed",value:function(t){this.playbackRate=t}},{key:"stop",value:function(){if(this.currentCombineStatus===d.d.Stopped)throw new Error(f.d);if(this.currentCombineStatus===d.d.Disabled)throw new Error(f.c);this.releaseEvents(),this.onStatusUpdate(d.d.Stopped)}},{key:"play",value:(S=a()(i.a.mark((function t(){var e=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isNotResponse()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.taskQueue.append(a()(i.a.mark((function t(){var n,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.triggerSource=d.e.Plugin,n=e.stateMachine.getCombinationStatus().current,t.t0=n,t.next=t.t0===d.c.Pause?5:t.t0===d.c.PauseBuffering?8:t.t0===d.c.Ended?24:27;break;case 5:return t.next=7,e.playWhenPause();case 7:return t.abrupt("break",27);case 8:if(r=e.stateMachine.getStatus(d.a.Video).current,o=e.stateMachine.getStatus(d.a.Whiteboard).current,r!==d.b.Pause||o!==d.b.PauseBuffering){t.next=15;break}return t.next=13,e.playWhenVideoIsPauseAndWhiteboardIsPauseBuffering();case 13:t.next=23;break;case 15:if(r!==d.b.PauseBuffering||o!==d.b.Pause){t.next=21;break}return e.onStatusUpdate(d.d.PlayingBuffering),t.next=19,e.playWhenPause();case 19:t.next=23;break;case 21:return t.next=23,e.playWhenAllPlayerIsPauseBuffering();case 23:return t.abrupt("break",27);case 24:return t.next=26,e.playWhenEnded();case 26:return t.abrupt("break",27);case 27:if(isNaN(e.seekTime)){t.next=31;break}return t.next=30,e.seekWhenPlaying(e.seekTime);case 30:e.seekTime=NaN;case 31:e.triggerSource=d.e.None;case 32:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t,this)}))),function(){return S.apply(this,arguments)})},{key:"pause",value:(E=a()(i.a.mark((function t(){var e=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isNotResponse()){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",this.taskQueue.append(a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.triggerSource=d.e.Plugin,e.stateMachine.getCombinationStatus().current!==d.c.Playing){t.next=5;break}return t.next=5,e.pauseWhenPlaying();case 5:e.triggerSource=d.e.None;case 6:case"end":return t.stop()}}),t)})))));case 3:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"seek",value:(T=a()(i.a.mark((function t(e){var n=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isNotResponse()){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",this.taskQueue.append(a()(i.a.mark((function t(){var r,o,a,s,u,l,c,h,A;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.whiteboard.progressTime,o=n.video.currentTime(),0!==r||0!==o){t.next=5;break}return 0!==e&&(n.seekTime=e),t.abrupt("return");case 5:n.triggerSource=d.e.Plugin,a=n.stateMachine.getCombinationStatus().current,t.t0=a,t.next=t.t0===d.c.Playing?10:t.t0===d.c.Pause||t.t0===d.c.PauseBuffering?13:t.t0===d.c.Ended?23:30;break;case 10:return t.next=12,n.seekWhenPlaying(e);case 12:return t.abrupt("break",30);case 13:if(s=n.getPlayerDuration(),u=s.video,l=s.whiteboard,!(e>u||e>l)){t.next=20;break}return t.next=18,n.seekWhenPauseFinallyIsEnded(e,s);case 18:t.next=22;break;case 20:return t.next=22,n.seekWhenPause(e);case 22:return t.abrupt("break",30);case 23:if(c=n.getPlayerDuration(),h=c.video,A=c.whiteboard,!(e<=h&&e<=A)){t.next=29;break}return t.next=27,n.seekWhenPause(e);case 27:return t.next=29,n.playWhenPause();case 29:return t.abrupt("break",30);case 30:n.triggerSource=d.e.None;case 31:case"end":return t.stop()}}),t)})))));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return T.apply(this,arguments)})},{key:"initVideo",value:function(t){this.stateMachine.setStatus(d.a.Video,t?d.b.Pause:d.b.PauseBuffering),t||(this.currentCombineStatus=d.d.PauseBuffering),this.initVideoJSEvents()}},{key:"initVideoJSEvents",value:function(){var t=this,e=!1,n=function(e){return a()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.triggerSource!==d.e.None&&t.triggerSource!==d.e.Video){n.next=4;break}return t.triggerSource=d.e.Video,n.next=4,e();case 4:case"end":return n.stop()}}),n)})))};this.video.on("canplay",(function(){var e=t.stateMachine.getStatus(d.a.Whiteboard).current;t.stateMachine.getStatus(d.a.Video).current===d.b.PauseBuffering&&(t.stateMachine.setStatus(d.a.Video,d.b.Pause),e===d.b.Pause&&t.onStatusUpdate(d.d.Pause))})),this.video.on("seeking",n(a()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.taskQueue.append((function(){e=!0}));case 2:case"end":return n.stop()}}),n)}))))),this.video.on("waiting",n(a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.onStatusUpdate(d.d.PlayingBuffering),e.next=3,t.taskQueue.append((function(){return t.pauseWhiteboardWhenVideoWaiting()}));case 3:t.triggerSource=d.e.None;case 4:case"end":return e.stop()}}),e)}))))),this.video.on("playing",n(a()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.taskQueue.append(a()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=2;break}return n.abrupt("return",t.playingWhiteboardWhenVideoPlayingDropFrame());case 2:return n.abrupt("return",t.playingWhiteboardWhenVideoPlaying());case 3:case"end":return n.stop()}}),n)}))));case 2:e=!1,t.triggerSource=d.e.None;case 4:case"end":return n.stop()}}),n)}))))),this.video.on("ended",n(a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.taskQueue.append((function(){return t.pauseWhiteboardWhenVideoEnded()}));case 2:t.triggerSource=d.e.None;case 3:case"end":return e.stop()}}),e)}))))),this.video.on("fullscreenchange",n(a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.taskQueue.append((function(){var e=t.stateMachine.getStatus(d.a.Video).current;e!==d.b.Playing&&e!==d.b.PlayingBuffering||!t.video.isFullscreen()&&t.video.paused()&&(t.whiteboardEmitter.one("pause",(function(){t.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause),t.stateMachine.setStatus(d.a.Video,d.b.Pause),t.onStatusUpdate(d.d.Pause)})),t.whiteboard.pause()),t.triggerSource=d.e.None}));case 2:case"end":return e.stop()}}),e)})))))}},{key:"initWhiteboard",value:function(){this.initWhiteboardIsPlayable(),this.initWhiteboardEvents(),this.stateMachine.setStatus(d.a.Whiteboard,d.b.PauseBuffering),this.currentCombineStatus=d.d.PauseBuffering,this.whiteboard.seekToProgressTime(0)}},{key:"initWhiteboardIsPlayable",value:function(){var t=this;this.whiteboardEmitter.addListener("playableChange",(function(e){var n=t.stateMachine.getStatus(d.a.Whiteboard).current,r=t.stateMachine.getStatus(d.a.Video).current;e&&n===d.b.PauseBuffering&&(t.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause),r===d.b.Pause&&t.onStatusUpdate(d.d.Pause))}))}},{key:"initWhiteboardEvents",value:function(){var t=this,e=function(e){return a()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.triggerSource!==d.e.None&&t.triggerSource!==d.e.Whiteboard){n.next=5;break}return t.triggerSource=d.e.Whiteboard,n.next=4,e();case 4:t.triggerSource=d.e.None;case 5:case"end":return n.stop()}}),n)})))};this.whiteboardEmitter.addListener("buffering",e(a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.taskQueue.append((function(){return t.pauseVideoWhenWhiteboardBuffering()}));case 2:case"end":return e.stop()}}),e)}))))),this.whiteboardEmitter.addListener("playing",e(a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.taskQueue.append((function(){return t.playingVideoWhenWhiteboardPlaying()}));case 2:case"end":return e.stop()}}),e)}))))),this.whiteboardEmitter.addListener("ended",e(a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.taskQueue.append((function(){return t.pauseVideoWhenWhiteboardEnded()}));case 2:case"end":return e.stop()}}),e)})))))}},{key:"playWhenPause",value:(_=a()(i.a.mark((function t(){var e,n,r,o,s=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stateMachine.lockCombineStatus([d.c.ToPlay,d.c.Playing],[d.c.Playing]),e=function(){s.stateMachine.setStatus(d.a.Video,d.b.Playing)},n=function(){s.stateMachine.setStatus(d.a.Whiteboard,d.b.Playing)},this.whiteboardEmitter.one("playing",n),r=this.stateMachine.one(d.c.ToPlay,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.whiteboard.play();case 1:case"end":return t.stop()}}),t)})))),o=this.stateMachine.one(d.c.Playing,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.onStatusUpdate(d.d.Playing);case 1:case"end":return t.stop()}}),t)})))),this.video.one("playing",e),this.video.play(),t.next=10,Promise.all([r,o]);case 10:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"playWhenVideoIsPauseAndWhiteboardIsPauseBuffering",value:(x=a()(i.a.mark((function t(){var e,n,r,o,s,u,l,c,h,A=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stateMachine.lockCombineStatus([d.c.Disabled,d.c.Pause,d.c.PauseBuffering,d.c.ToPlay,d.c.Playing],[d.c.Playing]),e=function(){A.stateMachine.setStatus(d.a.Video,d.b.Playing)},n=function(){A.stateMachine.setStatus(d.a.Video,d.b.Pause)},r=function(){A.stateMachine.setStatus(d.a.Whiteboard,d.b.PlayingBuffering)},o=function(){A.stateMachine.setStatus(d.a.Whiteboard,d.b.Playing)},s=function(){A.whiteboardEmitter.removeListener("playing",o),A.whiteboardEmitter.removeListener("buffering",r),A.video.off("playing",e),A.video.off("pause",n)},this.stateMachine.oneButNotCrashByDisabled([{video:d.b.Playing,whiteboard:d.b.PauseBuffering}],a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.video.pause();case 1:case"end":return t.stop()}}),t)})))).catch((function(t){throw Error(t)})),u=this.stateMachine.one(d.c.PauseBuffering,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.whiteboard.play();case 1:case"end":return t.stop()}}),t)})))),l=this.stateMachine.one(d.c.Pause,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.whiteboard.play();case 1:case"end":return t.stop()}}),t)})))),c=this.stateMachine.one(d.c.ToPlay,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.video.play();case 1:case"end":return t.stop()}}),t)})))),h=this.stateMachine.one(d.c.Playing,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.onStatusUpdate(d.d.Playing),A.stateMachine.off([d.c.PauseBuffering,d.c.Pause,d.c.ToPlay]),s();case 3:case"end":return t.stop()}}),t)})))),this.whiteboardEmitter.one("buffering",r),this.whiteboardEmitter.one("playing",o),this.video.on("playing",e),this.video.one("pause",n),this.video.play(),t.next=18,Promise.all([Promise.race([u,l]),c,h]);case 18:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"playWhenAllPlayerIsPauseBuffering",value:(w=a()(i.a.mark((function t(){var e,n,r,o,s,u,l,c,h,A=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stateMachine.lockCombineStatus([d.c.Disabled,d.c.ToPause,d.c.ToPlay,d.c.Playing],[d.c.Playing]),e=function(){A.stateMachine.setStatus(d.a.Whiteboard,d.b.PlayingBuffering)},n=function(){A.stateMachine.setStatus(d.a.Whiteboard,d.b.Playing)},r=function(){A.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause)},o=function(){A.stateMachine.setStatus(d.a.Video,d.b.Playing)},s=function(){A.stateMachine.setStatus(d.a.Video,d.b.PlayingBuffering)},u=function(){A.stateMachine.setStatus(d.a.Video,d.b.Pause)},this.stateMachine.oneButNotCrashByDisabled([{video:d.b.PlayingBuffering,whiteboard:d.b.PauseBuffering},{video:d.b.PauseBuffering,whiteboard:d.b.PlayingBuffering}],a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.stateMachine.oneButNotCrashByDisabled([{video:d.b.Playing,whiteboard:d.b.PauseBuffering},{video:d.b.PauseBuffering,whiteboard:d.b.Playing}],function(){var t=a()(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.current).video===d.b.Playing?A.video.pause():n.whiteboard===d.b.Playing&&A.whiteboard.pause();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){throw Error(t)}));case 1:case"end":return t.stop()}}),t)})))).catch((function(t){throw Error(t)})),l=this.stateMachine.one(d.c.ToPause,function(){var t=a()(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.current.video===d.b.Playing?A.video.pause():A.whiteboard.pause();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c=this.stateMachine.one(d.c.ToPlay,function(){var t=a()(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.current.video===d.b.Playing?A.whiteboard.play():A.video.play();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),h=this.stateMachine.one(d.c.Playing,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.onStatusUpdate(d.d.Playing),A.stateMachine.cancelOneButNotCrashByDisabled(),A.stateMachine.off([d.c.ToPause,d.c.ToPlay]),A.video.off("playing",o),A.whiteboardEmitter.removeListener("playing",n),A.whiteboardEmitter.removeListener("pause",r);case 6:case"end":return t.stop()}}),t)})))),this.whiteboardEmitter.one("buffering",e),this.whiteboardEmitter.addListener("playing",n),this.whiteboardEmitter.one("pause",r),this.video.on("playing",o),this.video.one("play",s),this.video.one("pause",u),this.video.play(),this.whiteboard.play(),t.next=21,Promise.all([Promise.race([l,c]),h]);case 21:case"end":return t.stop()}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"playWhenEnded",value:(b=a()(i.a.mark((function t(){var e,n,r,o,s,u,l,c,h,A=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.onStatusUpdate(d.d.PlayingBuffering),e=NaN,this.stateMachine.lockCombineStatus([d.c.Pause],[d.c.Pause]),n=function(){A.stateMachine.setStatus(d.a.Whiteboard,d.b.PauseSeeking)},r=function(){A.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause)},o=function(){A.whiteboard.pause()},s=function(){A.video.off("pause",u),A.video.off("play",l),A.video.one("play",(function(){A.video.one("pause",(function(){A.stateMachine.setStatus(d.a.Video,d.b.Pause)})),A.video.pause()})),A.video.play()},u=function(){A.video.play()},l=function(){A.video.pause()},c=function(){A.stateMachine.setStatus(d.a.Video,d.b.PauseSeeking),e=window.setInterval((function(){A.video.readyState()>=d.f.HAVE_CURRENT_DATA&&(clearInterval(e),A.video.play())}),500)},h=this.stateMachine.one(d.c.Pause,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return A.whiteboardEmitter.removeListener("buffering",n),A.whiteboardEmitter.removeListener("playing",o),clearInterval(e),t.next=5,A.playWhenPause();case 5:case"end":return t.stop()}}),t)})))),this.whiteboardEmitter.one("buffering",n),this.whiteboardEmitter.one("pause",r),this.whiteboardEmitter.one("playing",o),this.video.one("seeking",c),this.video.one("seeked",s),this.video.on("play",l),this.video.on("pause",u),this.whiteboard.seekToProgressTime(0),this.video.currentTime(0),t.next=22,h;case 22:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"pauseWhenPlaying",value:(y=a()(i.a.mark((function t(){var e,n,r,o=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stateMachine.lockCombineStatus([d.c.Pause],[d.c.Pause]),e=function(){o.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause)},n=function(){o.stateMachine.setStatus(d.a.Video,d.b.Pause)},r=this.stateMachine.one(d.c.Pause,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.onStatusUpdate(d.d.Pause);case 1:case"end":return t.stop()}}),t)})))),this.whiteboardEmitter.one("pause",e),this.video.one("pause",n),this.whiteboard.pause(),this.video.pause(),t.next=10,r;case 10:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"seekWhenPlaying",value:(m=a()(i.a.mark((function t(e){var n,r,o,s,u,l,c,h,A,f,p,g=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.onStatusUpdate(d.d.PlayingSeeking),n=NaN,r=this.getPlayerDuration(),this.stateMachine.lockCombineStatus([d.c.Pause,d.c.Ended,d.c.PlayingSeeking],[d.c.Pause,d.c.Ended]),o=function(){g.stateMachine.setStatus(d.a.Whiteboard,d.b.PlayingSeeking)},s=function(){e<r.whiteboard&&g.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause)},u=function(){g.whiteboard.pause()},l=function(){g.stateMachine.setStatus(d.a.Whiteboard,d.b.Ended)},c=function(){g.stateMachine.setStatus(d.a.Video,d.b.PlayingSeeking),n=window.setInterval((function(){g.video.readyState()>=d.f.HAVE_CURRENT_DATA&&(clearInterval(n),e<r.video?(g.video.pause(),g.stateMachine.setStatus(d.a.Video,d.b.Pause)):g.stateMachine.setStatus(d.a.Video,d.b.Ended))}),500)},h=function(){clearInterval(n),g.whiteboardEmitter.removeListener("buffering",o),g.whiteboardEmitter.removeListener("pause",s),g.whiteboardEmitter.removeListener("playing",u),g.whiteboardEmitter.removeListener("ended",l),g.video.off("seeking",c)},A=this.stateMachine.one(d.c.PlayingSeeking,function(){var t=a()(i.a.mark((function t(n){var o,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n.current,a=o.video,s=o.whiteboard,a===d.b.Ended&&e<r.whiteboard?g.whiteboard.pause():s===d.b.Ended&&e<r.video&&g.video.pause();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),f=this.stateMachine.one(d.c.Pause,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g.stateMachine.off([d.c.Ended]),h(),t.next=4,g.playWhenPause();case 4:case"end":return t.stop()}}),t)})))),p=this.stateMachine.one(d.c.Ended,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.onStatusUpdate(d.d.Ended),g.stateMachine.off([d.c.Pause]),h();case 3:case"end":return t.stop()}}),t)})))),this.video.one("seeking",c),this.whiteboardEmitter.one("buffering",o),this.whiteboardEmitter.one("pause",s),this.whiteboardEmitter.one("playing",u),this.whiteboardEmitter.one("ended",l),this.whiteboard.seekToProgressTime(e),this.video.currentTime(e/1e3),t.next=22,Promise.all([A,Promise.race([f,p])]);case 22:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"seekWhenPause",value:(p=a()(i.a.mark((function t(e){var n,r,o,s,u,l,c,h=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.onStatusUpdate(d.d.PauseSeeking),n=NaN,this.stateMachine.lockCombineStatus([d.c.Disabled,d.c.Pause],[d.c.Pause]),r=function(){h.stateMachine.setStatus(d.a.Video,d.b.PauseSeeking),n=window.setInterval((function(){h.video.readyState()>=d.f.HAVE_CURRENT_DATA&&(clearInterval(n),h.stateMachine.setStatus(d.a.Video,d.b.Pause))}),500)},o=function(){h.stateMachine.setStatus(d.a.Whiteboard,d.b.PauseSeeking)},s=function(){h.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause)},u=function(){h.whiteboard.pause()},l=function(){clearInterval(n),h.video.off("seeking",r),h.whiteboardEmitter.removeListener("buffering",o),h.whiteboardEmitter.removeListener("pause",s)},this.stateMachine.oneButNotCrashByDisabled([{video:d.b.PauseSeeking,whiteboard:d.b.PauseSeeking}]).catch((function(t){throw Error(t)})),c=this.stateMachine.one(d.c.Pause,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h.onStatusUpdate(d.d.Pause),h.stateMachine.cancelOneButNotCrashByDisabled(),h.stateMachine.off(d.c.Ended),h.whiteboardEmitter.removeListener("playing",u),l();case 5:case"end":return t.stop()}}),t)})))),this.video.one("seeking",r),this.whiteboardEmitter.one("buffering",o),this.whiteboardEmitter.one("playing",u),this.whiteboardEmitter.one("pause",s),this.whiteboard.seekToProgressTime(e),this.video.currentTime(e/1e3),t.next=18,c;case 18:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"seekWhenPauseFinallyIsEnded",value:(A=a()(i.a.mark((function t(e,n){var r,o,s,u,l,c,h,A=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.onStatusUpdate(d.d.PauseSeeking),r=NaN,this.stateMachine.lockCombineStatus([d.c.Disabled,d.c.Ended],[d.c.Ended]),o=function(){A.stateMachine.setStatus(d.a.Video,d.b.PauseSeeking),r=window.setInterval((function(){A.video.readyState()>=d.f.HAVE_CURRENT_DATA&&(clearInterval(r),A.stateMachine.setStatus(d.a.Video,d.b.Pause),e>=n.video&&A.stateMachine.setStatus(d.a.Video,d.b.Ended))}),500)},s=function(){e<n.whiteboard&&A.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause)},u=function(){A.stateMachine.setStatus(d.a.Whiteboard,d.b.PauseSeeking)},l=function(){A.stateMachine.setStatus(d.a.Whiteboard,d.b.Ended)},c=function(){clearInterval(r),A.video.off("seeking",o),A.whiteboardEmitter.removeListener("buffering",u),A.whiteboardEmitter.removeListener("pause",s),A.whiteboardEmitter.removeListener("ended",l)},this.stateMachine.oneButNotCrashByDisabled([{video:d.b.PauseSeeking,whiteboard:d.b.PauseSeeking}]).catch((function(t){throw Error(t)})),h=this.stateMachine.on(d.c.Ended,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.onStatusUpdate(d.d.Ended),A.stateMachine.cancelOneButNotCrashByDisabled(),A.stateMachine.off([d.c.Pause,d.c.Ended]),c();case 4:case"end":return t.stop()}}),t)})))),this.video.one("seeking",o),this.whiteboardEmitter.one("buffering",u),this.whiteboardEmitter.one("pause",s),this.whiteboardEmitter.one("ended",l),this.whiteboard.seekToProgressTime(e),this.video.currentTime(e/1e3),t.next=18,h;case 18:case"end":return t.stop()}}),t,this)}))),function(t,e){return A.apply(this,arguments)})},{key:"pauseWhiteboardWhenVideoWaiting",value:(h=a()(i.a.mark((function t(){var e,n=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("pause"!==this.whiteboard.phase){t.next=2;break}return t.abrupt("return");case 2:return e=this.stateMachine.one(d.c.PlayingBuffering),this.whiteboardEmitter.one("pause",(function(){n.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause)})),this.whiteboard.pause(),this.stateMachine.setStatus(d.a.Video,d.b.PlayingBuffering),t.next=8,e;case 8:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"playingWhiteboardWhenVideoPlayingDropFrame",value:function(){var t=this;this.whiteboardEmitter.one("pause",(function(){t.stateMachine.setStatus(d.a.Whiteboard,d.b.PauseBuffering)}));var e=this.stateMachine.one(d.c.PauseBuffering,a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.triggerSource=d.e.Plugin,e.abrupt("return",t.playWhenVideoIsPauseAndWhiteboardIsPauseBuffering());case 2:case"end":return e.stop()}}),e)}))));return this.video.one("pause",(function(){t.stateMachine.setStatus(d.a.Video,d.b.Pause),t.whiteboard.seekToProgressTime(1e3*t.video.currentTime())})),this.video.pause(),e}},{key:"playingWhiteboardWhenVideoPlaying",value:(l=a()(i.a.mark((function t(){var e,n=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.stateMachine.setStatus(d.a.Video,d.b.Playing),e=this.stateMachine.one(d.c.Playing,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.onStatusUpdate(d.d.Playing);case 1:case"end":return t.stop()}}),t)})))),this.whiteboardEmitter.one("playing",(function(){n.stateMachine.setStatus(d.a.Whiteboard,d.b.Playing)})),this.whiteboard.play(),t.next=6,e;case 6:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"pauseVideoWhenWhiteboardBuffering",value:(s=a()(i.a.mark((function t(){var e,n=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.stateMachine.setStatus(d.a.Whiteboard,d.b.PlayingBuffering),this.onStatusUpdate(d.d.PlayingBuffering),!this.video.paused()){t.next=5;break}return this.stateMachine.setStatus(d.a.Video,d.b.Pause),t.abrupt("return");case 5:return this.video.one("pause",(function(){n.stateMachine.setStatus(d.a.Video,d.b.Pause)})),e=this.stateMachine.one(d.c.PlayingBuffering),this.video.pause(),this.stateMachine.setStatus(d.a.Whiteboard,d.b.PlayingBuffering),t.next=11,e;case 11:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"playingVideoWhenWhiteboardPlaying",value:(o=a()(i.a.mark((function t(){var e,n,r=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.stateMachine.one(d.c.ToPlay,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.video.play();case 1:case"end":return t.stop()}}),t)})))),n=this.stateMachine.one(d.c.Playing,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.onStatusUpdate(d.d.Playing);case 1:case"end":return t.stop()}}),t)})))),this.video.one("playing",(function(){r.stateMachine.setStatus(d.a.Video,d.b.Playing)})),this.stateMachine.setStatus(d.a.Whiteboard,d.b.Playing),t.next=6,Promise.all([e,n]);case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"pauseVideoWhenWhiteboardEnded",value:(r=a()(i.a.mark((function t(){var e,n,r=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.stateMachine.setStatus(d.a.Whiteboard,d.b.Ended),(e=this.stateMachine.getStatus(d.a.Video).current)!==d.b.Ended&&e!==d.b.Pause){t.next=4;break}return t.abrupt("return");case 4:return n=this.stateMachine.one(d.c.Ended,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.onStatusUpdate(d.d.Ended);case 1:case"end":return t.stop()}}),t)})))),this.video.one("pause",(function(){r.stateMachine.setStatus(d.a.Video,d.b.Pause)})),this.video.pause(),t.next=9,n;case 9:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"pauseWhiteboardWhenVideoEnded",value:(n=a()(i.a.mark((function t(){var e,n,r=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.stateMachine.setStatus(d.a.Video,d.b.Ended),(e=this.stateMachine.getStatus(d.a.Whiteboard).current)!==d.b.Ended&&e!==d.b.Pause){t.next=4;break}return t.abrupt("return");case 4:return n=this.stateMachine.one(d.c.Ended,a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.onStatusUpdate(d.d.Ended);case 1:case"end":return t.stop()}}),t)})))),this.whiteboardEmitter.one("pause",(function(){r.stateMachine.setStatus(d.a.Whiteboard,d.b.Pause)})),this.whiteboard.pause(),t.next=9,n;case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"releaseEvents",value:function(){this.taskQueue.destroy(),this.stateMachine.destroy(),this.whiteboardEmitter.destroy(),this.whiteboard.stop(),this.video.off()}},{key:"initOnCrashByDisabledStatusCallback",value:(e=a()(i.a.mark((function t(){var e=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.stateMachine.setOnCrashByDisabledStatus((function(){e.releaseEvents(),e.onStatusUpdate(d.d.Disabled,f.a)}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"onStatusUpdate",value:function(t,e){var n=this;this.isNotResponse()||this.currentCombineStatus!==t&&(this.currentCombineStatus=t,Promise.resolve().then((function(){n.onStatusChangeHandleList.forEach((function(n){"[object AsyncFunction]"==={}.toString.call(n)?n(t,e).catch((function(t){throw Error(t)})):n(t,e)}))})))}},{key:"getPlayerDuration",value:function(){return{whiteboard:this.whiteboard.timeDuration,video:1e3*this.video.duration()}}},{key:"isNotResponse",value:function(){var t=this.currentCombineStatus===d.d.Stopped||this.currentCombineStatus===d.d.Disabled;return t&&console.warn("Currently in the ".concat(this.currentCombineStatus," stage, the program will not respond to the current behavior")),t}},{key:"combinedStatus",get:function(){return this.currentCombineStatus}},{key:"playbackRate",set:function(t){this.isNotResponse()||(this._playbackRate=t,this.whiteboard.playbackSpeed=t,this.video.playbackRate(t))},get:function(){return this._playbackRate}},{key:"timeDuration",get:function(){var t=this.getPlayerDuration(),e=t.video,n=t.whiteboard;return{duration:Math.min(e,n),video:e,whiteboard:n}}}]),t}()},"./src/ErrorConstant.ts":function(t,e,n){n.d(e,"e",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"i",(function(){return c})),n.d(e,"h",(function(){return h}));var r="[Combine-Player]: URL must be passed in during the instance",i="[Combine-Player]: Accidentally enter the prohibited area!",o="[Combine-Player]: In the current context, there can only be one state method that legally monitors disable",a="[Combine-Player]: Combine-player did stop",s="[Combine-Player]: Combine-player did crash",u="[Combine-Player]: Detects that you are passing both videoElementID and videoDOM parameters, please remove one of them",l="[Combine-Player]: Based on the videoElementID you provided, the relevant element could not be found in the page. Please make sure your element ID is correct",c="[Combine-Player]: Based on the videoElementID you provided, it is found that this element is not a video tag. Please make sure that the videoElementID you passed in is correct",h="[Combine-Player]: Based on the videoDOM you provided, it is found that this element is not a video tag. Please make sure that the videoDOM you passed in is correct"},"./src/EventEmitter.ts":function(t,e,n){n.d(e,"a",(function(){return u}));var r=n("@babel/runtime/helpers/classCallCheck"),i=n.n(r),o=n("@babel/runtime/helpers/createClass"),a=n.n(o),s=function(t){return"function"!=typeof t},u=function(){function t(){i()(this,t),this.listeners=void 0,this.listeners=Object.create(null)}return a()(t,[{key:"addListener",value:function(t,e){if(s(e))throw Error("callback is not a function");var n=this.getEvent(t);n?n.push(e):this.listeners[t]=[e]}},{key:"removeListener",value:function(t,e){var n=this.getEvent(t);if(n)for(var r=0;r<n.length;r++){var i=n[r];i!==e&&i.realCallbackFn!==e||(this.listeners[t].splice(r,1),r--)}}},{key:"removeAllListener",value:function(t){this.getEvent(t)&&delete this.listeners[t]}},{key:"destroy",value:function(){var t=this;Object.keys(this.listeners).forEach((function(e){t.removeAllListener(e)}))}},{key:"one",value:function(t,e){var n=this;if(s(e))throw Error("callback is not a function");var r=function r(){"[object AsyncFunction]"==={}.toString.call(e)?e.apply(void 0,arguments).catch((function(t){throw Error(t)})):e.apply(void 0,arguments),n.removeListener(t,r)};r.realCallbackFn=e,this.addListener(t,r)}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=this.getEvent(t);i&&i.forEach((function(t){return t.apply(void 0,n)}))}},{key:"getEvent",value:function(t){return this.listeners[t]||null}}]),t}()},"./src/StatusContant.ts":function(t,e,n){var r,i,o,a,s,u;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return u})),function(t){t[t.PauseSeeking=0]="PauseSeeking",t[t.Pause=1]="Pause",t[t.PauseBuffering=2]="PauseBuffering",t[t.PlayingBuffering=3]="PlayingBuffering",t[t.Playing=4]="Playing",t[t.PlayingSeeking=5]="PlayingSeeking",t[t.Ended=6]="Ended"}(r||(r={})),function(t){t.PauseSeeking="PauseSeeking",t.PlayingSeeking="PlayingSeeking",t.PauseBuffering="PauseBuffering",t.PlayingBuffering="PlayingBuffering",t.ToPlay="ToPlay",t.ToPause="ToPause",t.Pause="Pause",t.Playing="Playing",t.Disabled="Disabled",t.Ended="Ended"}(i||(i={})),function(t){t.PauseSeeking="PauseSeeking",t.PlayingSeeking="PlayingSeeking",t.Pause="Pause",t.PauseBuffering="PauseBuffering",t.PlayingBuffering="PlayingBuffering",t.Playing="Playing",t.Ended="Ended",t.Disabled="Disabled",t.Stopped="Stopped"}(o||(o={})),function(t){t[t.Video=0]="Video",t[t.Whiteboard=1]="Whiteboard"}(a||(a={})),function(t){t[t.None=0]="None",t[t.Video=1]="Video",t[t.Whiteboard=2]="Whiteboard",t[t.Plugin=3]="Plugin"}(s||(s={})),function(t){t[t.HAVE_NOTHING=0]="HAVE_NOTHING",t[t.HAVE_METADATA=1]="HAVE_METADATA",t[t.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",t[t.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",t[t.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(u||(u={}))},"./src/Types.ts":function(t,e){},"./src/Verification.ts":function(t,e,n){n.d(e,"a",(function(){return i}));var r=n("./src/ErrorConstant.ts"),i=function(t){if(!t.url)throw Error(r.e);if(void 0!==t.videoElementID){var e=document.getElementById(t.videoElementID);if(null===e)throw new Error(r.b);if("video"!==e.tagName.toLowerCase())throw new Error(r.i)}if(t.videoElementID&&t.videoDOM)throw new Error(r.g);if(void 0!==t.videoDOM&&"video"!==t.videoDOM.tagName.toLowerCase())throw new Error(r.h)}},"./src/index.ts":function(t,e,n){n.r(e),n.d(e,"default",(function(){return y}));var r=n("@babel/runtime/helpers/defineProperty"),i=n.n(r),o=n("@babel/runtime/helpers/classCallCheck"),a=n.n(o),s=n("@babel/runtime/helpers/createClass"),u=n.n(s),l=n("./src/Verification.ts"),c=n("./src/EventEmitter.ts"),h=n("./src/CombinePlayerImplement.ts"),d=n("video.js"),A=n.n(d),f=n("./src/StatusContant.ts"),p=n("./src/Types.ts");for(var g in p)["default"].indexOf(g)<0&&function(t){n.d(e,t,(function(){return p[t]}))}(g);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"AtomPlayerStatus",(function(){return f.b})),n.d(e,"CombinePlayerStatus",(function(){return f.c})),n.d(e,"PublicCombinedStatus",(function(){return f.d})),n.d(e,"AtomPlayerSource",(function(){return f.a})),n.d(e,"TriggerSource",(function(){return f.e})),n.d(e,"VideoReadyState",(function(){return f.f}));var y=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a()(this,t),this.videoOptions=void 0,this.whiteboard=void 0,this.debug=void 0,Object(l.a)(n);var i=t.videoDefaultOptions(n);this.videoOptions=m(m(m({},i),n),{},{videoJsOptions:m(m({},i.videoJsOptions),n.videoJsOptions)}),this.whiteboard=e,this.debug=r}return u()(t,[{key:"create",value:function(){var t=new c.a;this.handleWhiteboardCallback(t);var e=this.getVideoDOM(),n=A()(e,this.videoOptions.videoJsOptions);return n.src(this.videoOptions.url),new h.a({videoConfig:{videoOptions:this.videoOptions,video:n,isCanplay:n.readyState()>f.f.HAVE_CURRENT_DATA},whiteboard:this.whiteboard,whiteboardEmitter:t,debug:this.debug})}},{key:"getVideoDOM",value:function(){return void 0!==this.videoOptions.videoElementID?document.getElementById(this.videoOptions.videoElementID):this.videoOptions.videoDOM}},{key:"handleWhiteboardCallback",value:function(t){this.whiteboard.callbacks.on("onPhaseChanged",(function(e){t.emit(e)})),this.whiteboard.callbacks.on("onIsPlayableChanged",(function(e){t.emit("playableChange",e)}))}}],[{key:"videoDefaultOptions",value:function(t){var e={videoJsOptions:{preload:"auto"}};return t.videoDOM||t.videoElementID||(e.videoDOM=document.createElement("video")),e}}]),t}()},0:function(t,e,n){t.exports=n("./src/index.ts")},"@babel/runtime/helpers/asyncToGenerator":function(t,e){t.exports=n(34397)},"@babel/runtime/helpers/classCallCheck":function(t,e){t.exports=n(57750)},"@babel/runtime/helpers/createClass":function(t,e){t.exports=n(67338)},"@babel/runtime/helpers/defineProperty":function(t,e){t.exports=n(91566)},"@babel/runtime/regenerator":function(t,e){t.exports=n(64910)},"video.js":function(t,e){t.exports=n(59496)}})},20597:function(t,e,n){var r,i,o,a;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}t=n.nmd(t),window,a=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==s(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5zaGFwZS1jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNjQuNiUiIHk9Ii01OS41JSIgd2lkdGg9IjIyOS4zJSIgaGVpZ2h0PSIyNDYuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd0JsdXJPdXRlcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbXBvc2l0ZT4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMTYgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi00IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iV2hpdGVib2FyZC1HdWlkZWxpbmVzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ0LjAwMDAwMCwgLTc1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNoYXBlLWN1cnNvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgNzUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkh+S7vS00NCIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC4wMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMjAsMjEgQzIwLjQ4NTQxMDMsMjEgMjAuODk4MDg1LDIxLjM0Nzk5OTMgMjAuOTg5OTQ3OSwyMS44NjU0ODc3IEwyMSwyMiBMMjEsMjcgQzIxLDI3LjU1MjI4NDcgMjAuNTUyMjg0NywyOCAyMCwyOCBDMTkuNTE0NTg5NywyOCAxOS4xMDE5MTUsMjcuNjUyMDAwNyAxOS4wMTAwNTIxLDI3LjEzNDUxMjMgTDE5LDI3IEwxOSwyMiBDMTksMjEuNDQ3NzE1MyAxOS40NDc3MTUzLDIxIDIwLDIxIFogTTI3LDE5IEMyNy41NTIyODQ3LDE5IDI4LDE5LjQ0NzcxNTMgMjgsMjAgQzI4LDIwLjQ4NTQxMDMgMjcuNjUyMDAwNywyMC44OTgwODUgMjcuMTM0NTEyMywyMC45ODk5NDc5IEwyNywyMSBMMjIsMjEgQzIxLjQ0NzcxNTMsMjEgMjEsMjAuNTUyMjg0NyAyMSwyMCBDMjEsMTkuNTE0NTg5NyAyMS4zNDc5OTkzLDE5LjEwMTkxNSAyMS44NjU0ODc3LDE5LjAxMDA1MjEgTDIyLDE5IEwyNywxOSBaIE0xOCwxOSBDMTguNTUyMjg0NywxOSAxOSwxOS40NDc3MTUzIDE5LDIwIEMxOSwyMC40ODU0MTAzIDE4LjY1MjAwMDcsMjAuODk4MDg1IDE4LjEzNDUxMjMsMjAuOTg5OTQ3OSBMMTgsMjEgTDEzLDIxIEMxMi40NDc3MTUzLDIxIDEyLDIwLjU1MjI4NDcgMTIsMjAgQzEyLDE5LjUxNDU4OTcgMTIuMzQ3OTk5MywxOS4xMDE5MTUgMTIuODY1NDg3NywxOS4wMTAwNTIxIEwxMywxOSBMMTgsMTkgWiBNMjAsMTIgQzIwLjQ4NTQxMDMsMTIgMjAuODk4MDg1LDEyLjM0Nzk5OTMgMjAuOTg5OTQ3OSwxMi44NjU0ODc3IEwyMSwxMyBMMjEsMTggQzIxLDE4LjU1MjI4NDcgMjAuNTUyMjg0NywxOSAyMCwxOSBDMTkuNTE0NTg5NywxOSAxOS4xMDE5MTUsMTguNjUyMDAwNyAxOS4wMTAwNTIxLDE4LjEzNDUxMjMgTDE5LDE4IEwxOSwxMyBDMTksMTIuNDQ3NzE1MyAxOS40NDc3MTUzLDEyIDIwLDEyIFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTguNSIgeT0iMTciIHdpZHRoPSIzIiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNGRkZGRkYiIHg9IjE3IiB5PSIxOC41IiB3aWR0aD0iNiIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMzI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT50ZXh0LWN1cnNvcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwyNi41IEMxNS43MjM4NTc2LDI2LjUgMTUuNSwyNi4yNzYxNDI0IDE1LjUsMjYgQzE1LjUsMjUuNzU0NTQwMSAxNS42NzY4NzUyLDI1LjU1MDM5MTYgMTUuOTEwMTI0NCwyNS41MDgwNTU3IEwxNiwyNS41IEwxOS41LDI1LjUgTDE5LjUsMTQuNSBMMTYsMTQuNSBDMTUuNzIzODU3NiwxNC41IDE1LjUsMTQuMjc2MTQyNCAxNS41LDE0IEMxNS41LDEzLjc1NDU0MDEgMTUuNjc2ODc1MiwxMy41NTAzOTE2IDE1LjkxMDEyNDQsMTMuNTA4MDU1NyBMMTYsMTMuNSBMMjQsMTMuNSBDMjQuMjc2MTQyNCwxMy41IDI0LjUsMTMuNzIzODU3NiAyNC41LDE0IEMyNC41LDE0LjI0NTQ1OTkgMjQuMzIzMTI0OCwxNC40NDk2MDg0IDI0LjA4OTg3NTYsMTQuNDkxOTQ0MyBMMjQsMTQuNSBMMjAuNSwxNC41IEwyMC41LDI1LjUgTDI0LDI1LjUgQzI0LjI3NjE0MjQsMjUuNSAyNC41LDI1LjcyMzg1NzYgMjQuNSwyNiBDMjQuNSwyNi4yNDU0NTk5IDI0LjMyMzEyNDgsMjYuNDQ5NjA4NCAyNC4wODk4NzU2LDI2LjQ5MTk0NDMgTDI0LDI2LjUgTDE2LDI2LjUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4NC4wJSIgeT0iLTgxLjUlIiB3aWR0aD0iNjY4LjElIiBoZWlnaHQ9IjI5My45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xNiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iLTQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXaGl0ZWJvYXJkLUd1aWRlbGluZXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODguMDAwMDAwLCAtNjcyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0idGV4dC1jdXJzb3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Mi4wMDAwMDAsIDY3Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNDAiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuMDEiIHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSIgZD0iTTE5LDI1IEwxOSwxNSBMMTYsMTUgQzE1LjQ0NzcxNTMsMTUgMTUsMTQuNTUyMjg0NyAxNSwxNCBDMTUsMTMuNTE0NTg5NyAxNS4zNDc5OTkzLDEzLjEwMTkxNSAxNS44NjU0ODc3LDEzLjAxMDA1MjEgTDE2LDEzIEwyNCwxMyBDMjQuNTUyMjg0NywxMyAyNSwxMy40NDc3MTUzIDI1LDE0IEMyNSwxNC40ODU0MTAzIDI0LjY1MjAwMDcsMTQuODk4MDg1IDI0LjEzNDUxMjMsMTQuOTg5OTQ3OSBMMjQsMTUgTDIxLDE1IEwyMSwyNSBMMjQsMjUgQzI0LjU1MjI4NDcsMjUgMjUsMjUuNDQ3NzE1MyAyNSwyNiBDMjUsMjYuNDg1NDEwMyAyNC42NTIwMDA3LDI2Ljg5ODA4NSAyNC4xMzQ1MTIzLDI2Ljk4OTk0NzkgTDI0LDI3IEwxNiwyNyBDMTUuNDQ3NzE1MywyNyAxNSwyNi41NTIyODQ3IDE1LDI2IEMxNSwyNS41MTQ1ODk3IDE1LjM0Nzk5OTMsMjUuMTAxOTE1IDE1Ljg2NTQ4NzcsMjUuMDEwMDUyMSBMMTYsMjUgTDE5LDI1IFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(t,e,n){n.r(e),n.d(e,"CursorTool",(function(){return m}));var r,i=n(0),o=n(1),a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=n(4),h=n.n(c),d=n(5),A=n.n(d),f=n(6),p=n.n(f),g=(n(8),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(t){function e(e){var n=t.call(this,e)||this;return n.renderAvatar=function(t){var e,r="rgb("+t.memberState.strokeColor[0]+", "+t.memberState.strokeColor[1]+", "+t.memberState.strokeColor[2]+")";if(n.detectAvatar(t)){var o=n.detectCursorName(t);return i.createElement("img",{className:"cursor-selector-avatar",style:{width:o?19:28,height:o?19:28,position:o?"initial":"absolute",borderColor:o?"white":r,marginRight:o?4:0},src:null===(e=t.payload)||void 0===e?void 0:e.avatar,alt:"avatar"})}return null},n.getOpacity=function(t){var e=n.getCursorName(t),r=n.detectAvatar(t);return void 0===e&&void 0===r?0:1},n.getCursorName=function(t){return t.payload&&t.payload.cursorName?t.payload.cursorName:void 0},n.getThemeClass=function(t){return t.payload&&t.payload.theme?"cursor-inner-mellow":"cursor-inner"},n.getCursorBackgroundColor=function(t){var e=n.detectCursorName(t);return t.payload&&t.payload.cursorBackgroundColor?t.payload.cursorBackgroundColor:e?"rgb("+t.memberState.strokeColor[0]+", "+t.memberState.strokeColor[1]+", "+t.memberState.strokeColor[2]+")":void 0},n.getCursorTextColor=function(t){return t.payload&&t.payload.cursorTextColor?t.payload.cursorTextColor:"#FFFFFF"},n.getCursorTagBackgroundColor=function(t){return t.payload&&t.payload.cursorTagBackgroundColor?t.payload.cursorTagBackgroundColor:n.getCursorBackgroundColor(t)},n.detectCursorName=function(t){return!(!t.payload||!t.payload.cursorName)},n.detectAvatar=function(t){return!(!t.payload||!t.payload.avatar)},n.renderTag=function(t){return t.payload&&t.payload.cursorTagName?i.createElement("span",{className:"cursor-tag-name",style:{backgroundColor:n.getCursorTagBackgroundColor(t)}},t.payload.cursorTagName):void 0},n}return g(e,t),e.prototype.render=function(){var t=this.props.roomMember,e=this.getCursorName(t);switch(t.memberState.currentApplianceName){case o.ApplianceNames.pencil:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-mid cursor-pencil-offset"},i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(t),backgroundColor:this.getCursorBackgroundColor(t),color:this.getCursorTextColor(t)},className:this.getThemeClass(t)},this.renderAvatar(t),e,this.renderTag(t))),i.createElement("div",null,i.createElement("img",{className:"cursor-pencil-image",src:s.a,alt:"pencilCursor"}))));case o.ApplianceNames.selector:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-mid cursor-selector-offset"},i.createElement("div",null,i.createElement("img",{className:"cursor-selector-image",src:l.a,alt:"selectorCursor"})),i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(t),backgroundColor:this.getCursorBackgroundColor(t),color:this.getCursorTextColor(t)},className:this.getThemeClass(t)},this.renderAvatar(t),e,this.renderTag(t)))));case o.ApplianceNames.eraser:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-mid cursor-pencil-offset"},i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(t),backgroundColor:this.getCursorBackgroundColor(t),color:this.getCursorTextColor(t)},className:this.getThemeClass(t)},this.renderAvatar(t),e,this.renderTag(t))),i.createElement("div",null,i.createElement("img",{className:"cursor-pencil-image",src:h.a,alt:"selectorCursor"}))));case o.ApplianceNames.text:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-text-offset cursor-mid"},i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(t),backgroundColor:this.getCursorBackgroundColor(t),color:this.getCursorTextColor(t)},className:this.getThemeClass(t)},this.renderAvatar(t),e,this.renderTag(t))),i.createElement("div",null,i.createElement("img",{src:p.a,alt:"selectorCursor"}))));default:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-shape-offset cursor-mid"},i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(t),backgroundColor:this.getCursorBackgroundColor(t),color:this.getCursorTextColor(t)},className:this.getThemeClass(t)},this.renderAvatar(t),e,this.renderTag(t))),i.createElement("div",null,i.createElement("img",{src:A.a,alt:"shapeCursor"}))))}},e}(i.Component),m=function(){function t(){this.cursors={},this.roomMembers=[],this.isFirstFrameReady=!1,this.isCursorDisappear=function(t){return!(!t.payload||!t.payload.disappearCursor)}}return t.prototype.createCursor=function(){return{x:64,y:64,width:128,height:128}},t.prototype.onAddedCursor=function(t){for(var e=0,n=this.roomMembers;e<n.length;e++){var r=n[e];if(r.memberId===t.memberId&&!this.isCursorDisappear(r)){t.setReactNode(i.createElement(v,{roomMember:r}));break}}this.cursors[t.memberId]=t},t.prototype.onRemovedCursor=function(t){delete this.cursors[t.memberId]},t.prototype.onMovingCursor=function(){},t.prototype.setRoom=function(t){var e=this;this.setColorAndAppliance(t.state.roomMembers),t.callbacks.on("onRoomStateChanged",(function(t){t.roomMembers&&e.setColorAndAppliance(t.roomMembers)}))},t.prototype.setPlayer=function(t){var e=this;this.isFirstFrameReady&&this.setColorAndAppliance(t.state.roomMembers),t.callbacks.on("onPlayerStateChanged",(function(t){t.roomMembers&&e.setColorAndAppliance(t.roomMembers)})),t.callbacks.on("onLoadFirstFrame",(function(){e.isFirstFrameReady=!0,e.setColorAndAppliance(t.state.roomMembers)}))},t.prototype.setColorAndAppliance=function(t){this.roomMembers=t;for(var e=0,n=t;e<n.length;e++){var r=n[e],o=this.cursors[r.memberId];o&&!this.isCursorDisappear(r)&&o.setReactNode(i.createElement(v,{roomMember:r}))}},t}()},function(t,e,n){var r=n(9),i=n(10);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],u=e.base?s[0]+e.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var h=a(c),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:c,updater:p(d,e),references:1}),r.push(c)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,c=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function d(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var A=null,f=0;function p(t,e){var n,r,i;if(e.singleton){var o=f++;n=A||(A=u(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=u(e),r=d.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(t,e),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(t,e,n){(e=n(11)(!1)).push([t.i,".cursor-box-tool {\n  position: absolute;\n  z-index: 3;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  margin-top: -24px;\n  margin-left: 16px;\n  border: 1px solid white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.cursor-box-tool img {\n  width: 12px;\n}\n.cursor-box {\n  color: white;\n  padding: 4px;\n  border-radius: 2px;\n  width: 100%;\n  height: 100%;\n}\n.cursor-pencil-image {\n  width: 26px;\n  height: 26px;\n}\n.cursor-selector-image {\n  width: 24px;\n  height: 24px;\n}\n.cursor-selector-avatar {\n  border-radius: 50%;\n  border-style: solid;\n  border-width: 2px;\n  border-color: white;\n  margin-bottom: 2px;\n}\n.cursor-inner {\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: row;\n  padding-left: 4px;\n  padding-right: 4px;\n  font-size: 12px;\n}\n.cursor-inner-mellow {\n  height: 32px;\n  border-radius: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: row;\n  padding-left: 16px;\n  padding-right: 16px;\n}\n.cursor-tag-name {\n  font-size: 12px;\n  margin-left: 4px;\n  padding: 2px 8px;\n  border-radius: 4px;\n}\n.cursor-mid {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  width: 180px;\n  height: 64px;\n}\n.cursor-pencil-offset {\n  margin-left: -20px;\n}\n.cursor-selector-offset {\n  margin-left: -22px;\n  margin-top: 56px;\n}\n.cursor-text-offset {\n  margin-left: -30px;\n  margin-top: 18px;\n}\n.cursor-shape-offset {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  width: 180px;\n  height: 64px;\n  margin-left: -30px;\n  margin-top: 12px;\n}\n.cursor-name {\n  width: 100%;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n",""]),t.exports=e},function(t,e,n){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r,i,o=t[1]||"",a=t[3];if(!a)return o;if(e&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}}])},"object"==s(e)&&"object"==s(t)?t.exports=a(n(17328),n(71895)):(i=[n(17328),n(71895)],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))},91037:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.IframeWrapper=void 0;var i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(17328)),o=n(24645);function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}var s,u=(s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},s(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(n){var r=t.call(this,n)||this;return r.styleDom=null,r.ref=i.createRef(),r.state={canDisplay:!0,className:e.hiddenClass},r.injectCss(),o.IframeBridge.emitter.on(o.IframeEvents.Destory,(function(){r.setState({canDisplay:!1})})),o.IframeBridge.emitter.on(o.IframeEvents.StartCreate,(function(){r.setState({canDisplay:!0})})),o.IframeBridge.emitter.on(o.IframeEvents.DispayIframe,(function(){r.setState({className:void 0})})),o.IframeBridge.emitter.on(o.IframeEvents.HideIframe,(function(){r.setState({className:e.hiddenClass})})),o.IframeBridge.emitter.on(o.IframeEvents.GetRootRect,(function(){if(r.ref.current){var t=r.ref.current.parentElement;if(t){var e=t.getBoundingClientRect();o.IframeBridge.emitter.emit(o.IframeEvents.ReplayRootRect,e)}}})),r}return u(e,t),e.prototype.componentDidMount=function(){o.IframeBridge.emitter.emit(o.DomEvents.WrapperDidMount)},e.prototype.componentWillUnmount=function(){var t;this.styleDom&&(null===(t=this.styleDom.parentNode)||void 0===t||t.removeChild(this.styleDom))},e.prototype.componentDidUpdate=function(){o.IframeBridge.emitter.emit(o.IframeEvents.WrapperDidUpdate)},e.prototype.injectCss=function(){var t=document.createElement("style"),n="\n            ."+e.hiddenClass+" {\n                display: none;\n            }\n        ";this.styleDom=t,t.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(t)},e.prototype.render=function(){return i.createElement(i.Fragment,null,this.props.children,this.state.canDisplay&&i.createElement("iframe",{ref:this.ref,id:o.IframeBridge.kind,className:this.state.className}))},e.hiddenClass="netless-iframe-brdige-hidden",e}(i.Component);e.IframeWrapper=l},24645:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r={IframeEvents:!0,DomEvents:!0,IframeBridge:!0};e.IframeBridge=e.DomEvents=e.IframeEvents=void 0;var i,o=n(71895),a=n(10772),s=n(24182),u=(i=n(83532))&&i.__esModule?i:{default:i},l=n(91037);Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===l[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))}));var c,h,d,A=(c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},c(t,e)},function(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(){return f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},f.apply(this,arguments)},p=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},g=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};e.IframeEvents=h,function(t){t.Init="Init",t.AttributesUpdate="AttributesUpdate",t.SetAttributes="SetAttributes",t.RegisterMagixEvent="RegisterMagixEvent",t.RemoveMagixEvent="RemoveMagixEvent",t.RemoveAllMagixEvent="RemoveAllMagixEvent",t.RoomStateChanged="RoomStateChanged",t.DispatchMagixEvent="DispatchMagixEvent",t.ReciveMagixEvent="ReciveMagixEvent",t.NextPage="NextPage",t.PrevPage="PrevPage",t.SDKCreate="SDKCreate",t.OnCreate="OnCreate",t.SetPage="SetPage",t.GetAttributes="GetAttributes",t.Ready="Ready",t.Destory="Destory",t.StartCreate="StartCreate",t.WrapperDidUpdate="WrapperDidUpdate",t.DispayIframe="DispayIframe",t.HideIframe="HideIframe",t.GetRootRect="GetRootRect",t.ReplayRootRect="ReplayRootRect",t.PageTo="PageTo"}(h||(e.IframeEvents=h={})),e.DomEvents=d,function(t){t.WrapperDidMount="WrapperDidMount",t.IframeLoad="IframeLoad"}(d||(e.DomEvents=d={}));var v=function(t){function e(n){var r=t.call(this,n)||this;return r.iframe=null,r.magixEventMap=new Map,r.cssList=[],r.allowAppliances=["clicker"],r.rootRect=null,r.execListenIframe=(0,u.default)((function(t){r.listenIframe(t)}),50),r.onPhaseChangedListener=function(t){t===o.PlayerPhase.Playing&&r.computedStyleAndIframeDisplay()},r.stateChangeListener=function(t){r.postMessage({kind:h.RoomStateChanged,payload:t}),t.cameraState&&(e.emitter.emit(h.GetRootRect),r.computedStyle(t)),t.memberState&&(r.computedZindex(),r.updateStyle()),t.sceneState&&r.computedIframeDisplay(t,r.attributes)},e.emitter.setMaxListeners(100),e.displayer=n.displayer,e.emitter.on("created",(function(){e.emitter.on(h.ReplayRootRect,(function(t){r.rootRect=t})),r.bridgeDisposer=(0,o.autorun)((function(){var t,e=r.attributes;if(e.url){var n=null===(t=r.iframe)||void 0===t?void 0:t.src;n&&n!==e.url&&r.execListenIframe(e)}e.displaySceneDir&&r.computedIframeDisplay(r.displayer.state,e),(e.width||e.height)&&r.iframe&&(r.iframe.width=e.width+"px",r.iframe.height=e.height+"px"),r.postMessage({kind:h.AttributesUpdate,payload:e})}))})),r}return A(e,t),e.onCreate=function(t){e.emitter.emit(h.StartCreate);var n=t.attributes;n.url&&n.height&&n.width&&(e.alreadyCreate||t.insertByOnCreate(f(f({},n),{displayer:this.displayer}))),e.emitter.emit(h.OnCreate,t),e.emitter.emit("created")},e.prototype.onDestroy=function(){this._destory()},e.insert=function(t){return p(this,void 0,void 0,(function(){var n,r,i;return g(this,(function(o){switch(o.label){case 0:return(n=t.room.getInvisiblePlugin(e.kind))?(console.warn("plugin already inserted, can't re-insert"),[2,n]):(r={url:t.url,width:t.width,height:t.height,displaySceneDir:t.displaySceneDir,useClicker:t.useClicker||!1,useSelector:t.useSelector},e.alreadyCreate=!0,[4,t.room.createInvisiblePlugin(e,r)]);case 1:return(i=o.sent()).baseInsert(t),[2,i]}}))}))},e.prototype.insertByOnCreate=function(t){t.displayer.getInvisiblePlugin(e.kind).baseInsert(t)},e.prototype.baseInsert=function(t){var n=this,r=function(){n.getIframe(),n.listenIframe(t),n.listenDisplayerState(),e.emitter.emit(h.GetRootRect)};return this.getIframe()?r():(e.emitter.once(d.WrapperDidMount,r),e.emitter.once(h.WrapperDidUpdate,r)),this.attributes.useSelector&&this.allowAppliances.push("selector"),this.computedStyle(this.displayer.state),this.listenDisplayerCallbacks(),this.getComputedIframeStyle(),window.addEventListener("message",this.messageListener.bind(this)),this},e.prototype.getComputedIframeStyle=function(){var t=this;setTimeout((function(){t.iframe&&getComputedStyle(t.iframe)}),200)},e.prototype.destroy=function(){this._destory(),t.prototype.destroy.call(this)},e.prototype.getIframe=function(){var t=document.getElementById(e.kind);return this.iframe=t,t},e.prototype.setIframeSize=function(t){this.iframe&&(this.iframe.width=t.width+"px",this.iframe.height=t.height+"px",this.setAttributes({width:t.width,height:t.height}))},e.prototype.scaleIframeToFit=function(t){if(void 0===t&&(t=o.AnimationMode.Immediately),this.inDisplaySceneDir){var e=-this.attributes.width/2,n=-this.attributes.height/2,r=this.attributes.width,i=this.attributes.height;this.displayer.moveCameraToContain({originX:e,originY:n,width:r,height:i,animationMode:t})}},e.prototype.handleSetPage=function(t){if(!this.isReplay){var e=t.payload,n=this.displayer,r=n.entireScenes()[this.attributes.displaySceneDir];if(!r||r.length!==e){var i=(0,s.times)(e,(function(t){return{name:String(t+1)}}));n.putScenes(this.attributes.displaySceneDir,i),n.setScenePath(this.attributes.displaySceneDir)}}},e.prototype.listenIframe=function(t){var n=this,r=document.getElementById(e.kind),i=function(t){if(n.postMessage({kind:h.Init,payload:{attributes:n.attributes,roomState:e.displayer.state,currentPage:n.currentPage,observerId:n.displayer.observerId}}),e.emitter.emit(d.IframeLoad,t),e.emitter.on(h.Ready,(function(){var t;n.postMessage(null===(t=n.attributes.lastEvent)||void 0===t?void 0:t.payload)})),n.computedStyleAndIframeDisplay(),(0,o.isRoom)(n.displayer)){var r=n.displayer;r.moveCamera({scale:r.state.cameraState.scale+.005,animationMode:o.AnimationMode.Immediately})}};r.src&&r.removeEventListener("load",i),this.iframe=r,r.src=t.url,r.width=t.width+"px",r.height=t.height+"px",r.addEventListener("load",i)},e.prototype.listenDisplayerState=function(){if(this.isReplay){this.displayer._phase===o.PlayerPhase.Playing&&(this.computedStyleAndIframeDisplay(),!0),this.displayer.callbacks.on("onPhaseChanged",this.onPhaseChangedListener)}this.computedStyleAndIframeDisplay()},e.prototype.computedStyleAndIframeDisplay=function(){this.computedStyle(this.displayer.state),this.computedIframeDisplay(this.displayer.state,this.attributes)},e.prototype.listenDisplayerCallbacks=function(){this.displayer.callbacks.on(this.callbackName,this.stateChangeListener)},Object.defineProperty(e.prototype,"callbackName",{get:function(){return this.isReplay?"onPlayerStateChanged":"onRoomStateChanged"},enumerable:!1,configurable:!0}),e.prototype.computedStyle=function(t){var e=t.cameraState;if(this.iframe){var n=e.width,r=e.height,i=e.scale,o=e.centerX,a=e.centerY,s=this.rootRect||{x:0,y:0},u=["position: absolute;","border: 0.1px solid rgba(0,0,0,0);","top: 0px;","left: 0px;","transform-origin: "+(n/2+s.x+"px")+" "+(r/2+s.y+"px")+";","transform: translate("+(-o*i+(n-this.attributes.width)/2*i)+"px,"+(-a*i+(r-this.attributes.height)/2*i)+"px) scale("+i+", "+i+");"];this.cssList=u,this.computedZindex(),this.updateStyle()}},e.prototype.computedIframeDisplay=function(t,n){t.sceneState.scenePath.startsWith(n.displaySceneDir)?e.emitter.emit(h.DispayIframe):e.emitter.emit(h.HideIframe)},e.prototype.computedZindex=function(){var t="z-index: -1;",e=this.cssList.findIndex((function(e){return e===t}));-1!==e&&this.cssList.splice(e,1),this.isClicker()&&!this.isDisableInput||this.cssList.push(t)},e.prototype.updateStyle=function(){this.iframe&&(this.iframe.style.cssText=this.cssList.join(" "))},e.prototype.messageListener=function(t){if(t.origin===this.iframeOrigin){var e=t.data;switch(e.kind){case h.SetAttributes:this.handleSetAttributes(e);break;case h.RegisterMagixEvent:this.handleRegisterMagixEvent(e);break;case h.RemoveMagixEvent:this.handleRemoveMagixEvent(e);break;case h.DispatchMagixEvent:this.handleDispatchMagixEvent(e);break;case h.RemoveAllMagixEvent:this.handleRemoveAllMagixEvent();break;case h.NextPage:this.handleNextPage();break;case h.PrevPage:this.handlePrevPage();break;case h.SDKCreate:this.handleSDKCreate();break;case h.SetPage:this.handleSetPage(e);break;case h.GetAttributes:this.handleGetAttributes();break;case h.PageTo:this.handlePageTo(e)}}},e.prototype.handleSDKCreate=function(){this.postMessage({kind:h.Init,payload:{attributes:this.attributes,roomState:e.displayer.state,currentPage:this.currentPage,observerId:this.displayer.observerId}})},e.prototype.handleDispatchMagixEvent=function(t){var e=t.payload;this.dispatchMagixEvent(e.event,e.payload)},e.prototype.handleSetAttributes=function(t){this.setAttributes(t.payload)},e.prototype.handleRegisterMagixEvent=function(t){var e=this,n=t.payload,r=function(t){t.authorId!==e.displayer.observerId&&e.postMessage({kind:h.ReciveMagixEvent,payload:t})};this.magixEventMap.set(n,r),this.displayer.addMagixEventListener(n,r)},e.prototype.handleRemoveMagixEvent=function(t){var e=t.payload,n=this.magixEventMap.get(e);this.displayer.removeMagixEventListener(e,n)},e.prototype.handleNextPage=function(){if(this.canOperation){var t=this.currentPage+1;if(t>this.totalPage)return;this.displayer.setSceneIndex(t-1),this.dispatchMagixEvent(h.NextPage,{})}},e.prototype.handlePrevPage=function(){if(this.canOperation){var t=this.currentPage-1;if(t<0)return;this.displayer.setSceneIndex(t-1),this.dispatchMagixEvent(h.PrevPage,{})}},e.prototype.handlePageTo=function(t){if(this.canOperation){var e=t.payload;if(!Number.isSafeInteger(e)||e<=0)return;var n=e-1;this.displayer.setSceneIndex(n),this.dispatchMagixEvent(h.PageTo,n)}},e.prototype.handleRemoveAllMagixEvent=function(){var t=this;this.magixEventMap.forEach((function(e,n){t.displayer.removeMagixEventListener(n,e)})),this.magixEventMap.clear()},e.prototype.handleGetAttributes=function(){this.postMessage({kind:h.GetAttributes,payload:this.attributes})},e.prototype.postMessage=function(t){var e;this.iframe&&(null===(e=this.iframe.contentWindow)||void 0===e||e.postMessage(JSON.parse(JSON.stringify(t)),"*"))},e.prototype.dispatchMagixEvent=function(e,n){this.canOperation&&(t.prototype.setAttributes.call(this,{lastEvent:{name:e,payload:n}}),this.displayer.dispatchMagixEvent(e,n))},Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this.displayer.state.sceneState.index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentPage",{get:function(){return this.currentIndex+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalPage",{get:function(){return this.displayer.state.sceneState.scenes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return!this.displayer.isWritable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReplay",{get:function(){return(0,o.isPlayer)(this.displayer)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inDisplaySceneDir",{get:function(){return this.displayer.state.sceneState.scenePath.startsWith(this.attributes.displaySceneDir)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canOperation",{get:function(){return!this.isReplay&&(!this.readonly&&this.displayer.phase===o.RoomPhase.Connected)},enumerable:!1,configurable:!0}),e.prototype.isClicker=function(){if(this.readonly)return!1;var t=this.displayer.state.memberState.currentApplianceName;return this.allowAppliances.includes(t)},Object.defineProperty(e.prototype,"isDisableInput",{get:function(){return!("disableDeviceInputs"in this.displayer)||this.displayer.disableDeviceInputs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iframeOrigin",{get:function(){return this.iframe?new URL(this.iframe.src).origin:void 0},enumerable:!1,configurable:!0}),e.prototype._destory=function(){var t=this;window.removeEventListener("message",this.messageListener),this.magixEventMap.forEach((function(e,n){t.displayer.removeMagixEventListener(n,e)})),this.displayer.callbacks.off(this.callbackName,this.stateChangeListener),this.displayer.callbacks.off("onPhaseChanged",this.onPhaseChangedListener),this.magixEventMap.clear(),this.iframe&&(e.emitter.emit(h.Destory),this.iframe=null,e.alreadyCreate=!1),this.bridgeDisposer(),e.emitter.removeAllListeners()},e.kind="IframeBridge",e.emitter=new a.EventEmitter2,e.alreadyCreate=!1,e}(o.InvisiblePlugin);e.IframeBridge=v},24182:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.times=void 0;e.times=function(t,e){return new Array(t).fill(0).map((function(t,n){return e(n)}))}},29165:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.RTCPlugin=void 0;var r,i=n(26913),o=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});var a=function(t){function e(n){var r=t.call(this)||this;return r.audioElement=new Audio,r.isPlaying=!1,r._volume=50,r.onError=function(){},r.onMetaLoaded=function(){r.emit("load")},r.onAudioPlay=function(){var t,n,i;r.isPlaying=!0,null===(t=e.audioMixer)||void 0===t||t.startAudioMixing(r.url,!1,!1,1,(n=function(t,n){var i,o,a;r.emit("play");var s=r.audioElement.currentTime;null===(i=e.audioMixer)||void 0===i||i.setAudioMixingPosition(Math.round(1e3*s)),(null===(o=e.audioMixer)||void 0===o?void 0:o.adjustAudioMixingVolume)&&(null===(a=e.audioMixer)||void 0===a||a.adjustAudioMixingVolume(r._volume))},i=0,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===i&&(i+=1,n.apply(null,t))}))},r.onAudioPause=function(){var t;r.isPlaying=!1,null===(t=e.audioMixer)||void 0===t||t.pauseAudioMixing()},r.url=n,r.audioElement.src=n,r.audioElement.volume=0,r.audioElement.muted=!0,r.audioElement.addEventListener("loadedmetadata",r.onMetaLoaded),r.audioElement.addEventListener("error",r.onError),r.audioElement.addEventListener("play",r.onAudioPlay),r.audioElement.addEventListener("pause",r.onAudioPause),r.audioElement.addEventListener("end",r.onAudioPause),r}return o(e,t),e.prototype.play=function(){var t=this;this.audioElement.play().catch((function(){t.emit("play")}))},e.prototype.pause=function(){this.audioElement.pause(),this.emit("pause")},e.prototype.destroy=function(){var t;this.audioElement.currentTime=0,this.audioElement.pause(),null===(t=e.audioMixer)||void 0===t||t.stopAudioMixing()},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.audioElement.currentTime},set:function(t){var n;this.audioElement.currentTime=t,this.isPlaying&&(null===(n=e.audioMixer)||void 0===n||n.setAudioMixingPosition(Math.round(1e3*t)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this.audioElement.paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.audioElement.duration},enumerable:!1,configurable:!0}),e.prototype.volume=function(t){var n,r;this._volume=Math.round(100*t),(null===(n=e.audioMixer)||void 0===n?void 0:n.adjustAudioMixingVolume)&&this.isPlaying&&(null===(r=e.audioMixer)||void 0===r||r.adjustAudioMixingVolume(this._volume))},e.audioMixer=null,e}(i.EventEmitter),s=function(){function t(t){this.hookPoint="Slide.initConfig",this.rtc=t}return t.prototype.after=function(t){return t},t.prototype.before=function(t){var e=t[0];return a.audioMixer=this.rtc,e.rtcAudio=a,[e]},t}();e.RTCPlugin=s},5312:function(t,e,n){function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||A(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,s,"next",t)}function s(t){c(o,r,i,a,s,"throw",t)}a(void 0)}))}}function d(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||A(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperties(e,y({__esModule:{value:!0}},Symbol.toStringTag,{value:"Module"}));var b=n(71895),w=n(89420),x=n(41803),_=n(69170),T=function(t){return"object"===m(t)&&null!==t},E=Object.prototype.hasOwnProperty,S=Object.keys,M="__IsReFiNe";var C=function(){function t(e,n){var r=this;p(this,t),this.refMap=new Map,this.refKeys=new Set,this.genKey=function(){var t;do{t=w.genUID()}while(r.refKeys.has(t));return r.refKeys.add(t),t},this.state={},this.replaceState(e||n||{})}return v(t,[{key:"replaceState",value:function(t){var e=this;if(!T(t))throw new Error("[SyncedStore] replaceState: state must be an object");var n={},r=!1;return new Set([].concat(d(S(this.state)),d(S(t)))).forEach((function(i){var o=e.setValue(i,t[i]);o&&(r=!0,n[i]=o)})),r?n:null}},{key:"toRefState",value:function(){var t=this;return S(this.state).reduce((function(e,n){return e[n]=t.toRefValue(t.state[n]),e}),{})}},{key:"setValue",value:function(t,e){if(T(e)){var n=this.ensureRefValue(e);if(this.state[t]!==n.v){var r=this.deleteRefKey(t);return this.state[t]=n.v,{oldValue:r,newValue:n.v}}}else if(void 0===e){if(function(t,e){return E.call(t,e)}(this.state,t)){var i=this.deleteRefKey(t);return delete this.state[t],{oldValue:i}}}else{var o=e;if(this.state[t]!==o){var a=this.deleteRefKey(t);return this.state[t]=o,{oldValue:a,newValue:o}}}return null}},{key:"toRefValue",value:function(t){return T(t)?this.ensureRefValue(t):t}},{key:"ensureRefValue",value:function(t){if(function(t){return T(t)&&1===t.__IsReFiNe}(t))return this.refMap.set(t.v,t),t;var e=this.refMap.get(t);return e||(e=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.genUID();return y(e={},M,1),y(e,"k",n),y(e,"v",t),e}(t,this.genKey()),this.refMap.set(t,e)),this.refKeys.add(e.k),e}},{key:"deleteRefKey",value:function(t){var e=this.state[t],n=this.refMap.get(e);return n&&this.refKeys.delete(n.k),e}}]),t}(),I="_WM-StOrAgE_",N="_WM-MaIn-StOrAgE_",B=function(){function t(e){var n=this,r=e.plugin$,i=e.isWritable$,o=e.namespace,a=void 0===o?N:o,s=e.defaultState,u=void 0===s?{}:s;if(p(this,t),this._sideEffect=new w.SideEffectManager,this._events=new x.Remitter,this._disconnected=!1,u&&!T(u))throw new Error("Default state for Storage ".concat(a," is not an object."));this.on=this._events.on.bind(this._events),this.off=this._events.off.bind(this._events);var l=function(){var t,e;return null==(e=null==(t=r.value)?void 0:t.attributes[I])?void 0:e[a]};this.namespace=a,this.defaultState=u,this._plugin$=r,this._isWritable$=i,this._refine=new C(b.toJS(l()),u);var c=function(t){t&&n._events.emit("stateChanged",t)},d=function(){var t,e=b.reaction(l,(function(){var e=l();e&&(c(n._refine.replaceState(b.toJS(e))),null==t||t(),t=function(t){var e=function(t){if(!(t.length<=0)){for(var e={},r=!1,i=0;i<t.length;i++){var o=t[i],a=o.key;if(a!==I){var s=b.toJS(o.value),u=n._refine.setValue(a,s);u&&(r=!0,e[a]=u)}}r&&c(e)}};return b.listenUpdated(t,e),function(){return b.unlistenUpdated(t,e)}}(e))}),{fireImmediately:!0});return function(){e(),null==t||t()}};this._sideEffect.addDisposer(this._plugin$.subscribe((function(t){var e=[];if(n._sideEffect.flush("plugin-init"),t){var r=b.toJS(l());T(r)?c(n._refine.replaceState(r)):e.push(function(t){return i.subscribe((function(e){e&&(T(t.attributes[I])||t.updateAttributes([I],{}),T(b.toJS(l()))||t.updateAttributes([I,a],n._refine.toRefState()))}))}(t)),e.push(function(t){var e=d(),n=function(){var t=h(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n===b.RoomPhase.Connected&&(e(),e=d());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t.displayer.callbacks.on("onPhaseChanged",n),function(){t.displayer.callbacks.off("onPhaseChanged",n),e()}}(t))}else c(n._refine.replaceState(u));e.length>0&&n._sideEffect.addDisposer(e,"plugin-init")})))}return v(t,[{key:"setState",value:function(t){var e=this._requireAccess("setState");if(!this.isWritable)throw new Error('Cannot setState on Storage "'.concat(this.namespace,'" without writable access'));for(var n=S(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.updateAttributes([I,this.namespace,i],T(o)?this._refine.ensureRefValue(o):o)}}},{key:"resetState",value:function(){this._requireAccess("resetState").updateAttributes([I,this.namespace],this.defaultState)}},{key:"deleteStorage",value:function(){var t=this._requireAccess("deleteStorage");this.disconnect(),t.updateAttributes([I,this.namespace],void 0)}},{key:"disconnect",value:function(){this._disconnected=!0,this._sideEffect.flushAll(),this._events.emit("disconnected"),this._events.destroy()}},{key:"_requireAccess",value:function(t){if(this._disconnected)throw new Error("Cannot call ".concat(t," on destroyed Storage '").concat(this.namespace,"'."));var e=this._plugin$.value;if(!e)throw new Error("[SyncedStore]: cannot call '".concat(t,"' on Storage '").concat(this.namespace,"' because plugin is not initialized."));if(!this.isWritable)throw new Error("[SyncedStore]: cannot call '".concat(t,"' on Storage '").concat(this.namespace,"' without writable permission"));return e}},{key:"isWritable",get:function(){return this._isWritable$.value}},{key:"state",get:function(){return this._refine.state}},{key:"disconnected",get:function(){return this._disconnected}}]),t}(),k=function(){function t(e,n,r){p(this,t),this._sideEffect=new w.SideEffectManager,this.displayer=e,this._plugin$=n,this._isRoomWritable$=r;var i=b.isRoom(e)?e:null;this._room=i,this._isPluginWritable$=_.combine([this._plugin$,this._isRoomWritable$],(function(t){var e=l(t,2),n=e[0],r=e[1];return null!==n&&r}))}var e;return v(t,[{key:"connectStorage",value:function(t,e){var n=this,r=new B({plugin$:this._plugin$,isWritable$:this._isPluginWritable$,namespace:t,defaultState:e}),i=this._sideEffect.addDisposer((function(){return r.disconnect()})),o=this._sideEffect.addDisposer(r.on("disconnected",(function(){n._sideEffect.remove(i),n._sideEffect.flush(o)})));return r}},{key:"addPluginWritableChangeListener",value:function(t){return this._isPluginWritable$.reaction(t)}},{key:"setRoomWritable",value:(e=h(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._room){t.next=2;break}throw new Error("[SyncedStore]: cannot set room writable in replay mode");case 2:return t.next=4,this._room.setWritable(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"addRoomWritableChangeListener",value:function(t){return this._isRoomWritable$.reaction(t)}},{key:"dispatchEvent",value:function(t,e){if(!this._room)throw new Error("[SyncedStore] cannot dispatch event in replay mode");this._room.dispatchMagixEvent(t,e)}},{key:"addEventListener",value:function(t,e,n){var r=this;return this.displayer.addMagixEventListener(t,e,n),function(){return r.displayer.removeMagixEventListener(t,e)}}},{key:"removeEventListener",value:function(t,e){return this.displayer.removeMagixEventListener(t,e)}},{key:"destroy",value:function(){this._sideEffect.flushAll(),this._isPluginWritable$.destroy()}},{key:"isPluginWritable",get:function(){return this._isPluginWritable$.value}},{key:"isRoomWritable",get:function(){return this._isRoomWritable$.value}}]),t}(),P=function(t){r(i,t);var e,n=o(i);function i(t){var e,r;return p(this,i),e=n.call(this,t),null==(r=i.invisiblePlugins.get(e.displayer))||r.setValue(s(e)),e}return v(i,null,[{key:"init",value:(e=h(regeneratorRuntime.mark((function t(e){var n,r,o,a,s,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new _.Val(!1),(r=function(){return n.setValue(b.isRoom(e)&&e.isWritable)})(),e.callbacks.on("onEnableWriteNowChanged",r),o=new _.Val(e.getInvisiblePlugin(i.kind)),i.invisiblePlugins.set(e,o),a=function(){var t=h(regeneratorRuntime.mark((function t(r){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r||!b.isRoom(e)){t.next=14;break}return t.prev=1,t.next=4,e.createInvisiblePlugin(i,y({},I,{}));case 4:s=t.sent,o.setValue(s),n.unsubscribe(a),t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(1),t.next=13,new Promise((function(t){return setTimeout(t,200)}));case 13:e.getInvisiblePlugin(i.kind)||console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),s=function t(e){e&&(n.unsubscribe(a),o.unsubscribe(t))},!o.value&&b.isRoom(e)&&(n.subscribe(a),o.subscribe(s)),u=new k(e,o,n),l=function t(a){a===b.RoomPhase.Disconnected&&(e.callbacks.off("onPhaseChanged",t),e.callbacks.off("onEnableWriteNowChanged",r),n.destroy(),o.destroy(),i.invisiblePlugins.delete(e))},e.callbacks.on("onPhaseChanged",l),t.abrupt("return",u);case 13:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"onCreate",value:function(t){var e;null==(e=i.invisiblePlugins.get(t.displayer))||e.setValue(t)}}]),i}(b.InvisiblePlugin),D=P;D.kind="SyncedStore",D.invisiblePlugins=new Map,e.MAIN_STORAGE=N,e.STORAGE_NS=I,e.Storage=B,e.SyncedStore=k,e.SyncedStorePlugin=D,e.createPlugin=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.kind;return t=function(t){r(n,t);var e=o(n);function n(){return p(this,n),e.apply(this,arguments)}return n}(D),t.kind=e,t}},89420:function(t,e){function n(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,u,"next",t)}function u(t){n(a,i,o,s,u,"throw",t)}s(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module";var s="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",u=s.length,l=Array(20),c=function(){for(var t=0;t<20;t++)l[t]=s.charAt(Math.random()*u);return l.join("")};function h(t){try{return t()}catch(t){console.error(t)}}e.AsyncSideEffectManager=function(){function t(){i(this,t),this.finished=Promise.resolve(),this.disposers=new Map,this._nextTask=new Map,this._isRunning=new Set}var e,n;return a(t,[{key:"add",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.genUID();return this._isRunning.has(n)?this._nextTask.set(n,(function(){return e._add(t,n)})):this._add(t,n),n}},{key:"_add",value:(n=r(regeneratorRuntime.mark((function t(e,n){var i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._startTask(n),!(i=this.remove(n))){t.next=11;break}return t.prev=3,t.next=6,i();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.error(t.t0);case 11:return t.prev=11,t.next=14,e();case 14:(o=t.sent)&&this.disposers.set(n,Array.isArray(o)?r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(o.map(h)));case 1:case"end":return t.stop()}}),t)}))):o),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(11),console.error(t.t1);case 21:this._endTask(n),(a=this._nextTask.get(n))&&(this._nextTask.delete(n),a());case 24:case"end":return t.stop()}}),t,this,[[3,8],[11,18]])}))),function(t,e){return n.apply(this,arguments)})},{key:"addDisposer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.genUID();return this.add((function(){return t}),e)}},{key:"remove",value:function(t){var e=this.disposers.get(t);return this.disposers.delete(t),e}},{key:"flush",value:function(t){var e=this;this._isRunning.has(t)?this._nextTask.set(t,(function(){return e._flush(t)})):this._flush(t)}},{key:"_flush",value:(e=r(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this.remove(e))){t.next=12;break}return this._startTask(e),t.prev=3,t.next=6,n();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.error(t.t0);case 11:this._endTask(e);case 12:(r=this._nextTask.get(e))&&(this._nextTask.delete(e),r());case 14:case"end":return t.stop()}}),t,this,[[3,8]])}))),function(t){return e.apply(this,arguments)})},{key:"flushAll",value:function(){var t=this;this.disposers.forEach((function(e,n){return t.flush(n)}))}},{key:"genUID",value:function(){var t;do{t=c()}while(this.disposers.has(t));return t}},{key:"_startTask",value:function(t){var e=this;this._isRunning.add(t),this._resolveFinished||(this.finished=new Promise((function(t){e._resolveFinished=t})))}},{key:"_endTask",value:function(t){this._isRunning.delete(t),this._resolveFinished&&this._isRunning.size<=0&&this._nextTask.size<=0&&(this._resolveFinished(),this._resolveFinished=void 0)}}]),t}(),e.SideEffectManager=function(){function t(){i(this,t),this.disposers=new Map}return a(t,[{key:"addDisposer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.genUID();return this.flush(e),this.disposers.set(e,Array.isArray(t)?function(){return t.forEach(h)}:t),e}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.genUID(),n=t();return n?this.addDisposer(n,e):e}},{key:"addEventListener",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.genUID();return t.addEventListener(e,n,r),this.addDisposer((function(){return t.removeEventListener(e,n,r)}),i),i}},{key:"setTimeout",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.genUID(),i=window.setTimeout((function(){n.remove(r),t()}),e);return this.addDisposer((function(){return window.clearTimeout(i)}),r)}},{key:"setInterval",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.genUID(),r=window.setInterval(t,e);return this.addDisposer((function(){return window.clearInterval(r)}),n)}},{key:"remove",value:function(t){var e=this.disposers.get(t);return this.disposers.delete(t),e}},{key:"flush",value:function(t){var e=this.remove(t);if(e)try{e()}catch(t){console.error(t)}}},{key:"flushAll",value:function(){this.disposers.forEach(h),this.disposers.clear()}},{key:"genUID",value:function(){var t;do{t=c()}while(this.disposers.has(t));return t}}]),t}(),e.genUID=c},11559:function(t,e,n){function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}var b=Object.create,w=Object.defineProperty,x=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyNames,T=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,S=function(t){return w(t,"__esModule",{value:!0})},M=function(t){return function(t,e,n){if(e&&"object"===y(e)||"function"==typeof e){var r,i=v(_(e));try{var o=function(){var i=r.value;E.call(t,i)||"default"===i||w(t,i,{get:function(){return e[i]},enumerable:!(n=x(e,i))||n.enumerable})};for(i.s();!(r=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}}return t}(S(w(null!=t?b(T(t)):{},"default",t&&t.__esModule&&"default"in t?{get:function(){return t.default},enumerable:!0}:{value:t,enumerable:!0})),t)},C=function(t,e,n){return function(t,e,n){e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n}(t,"symbol"!==y(e)?e+"":e,n),n};!function(t,e){for(var n in S(t),e)w(t,n,{get:e[n],enumerable:!0})}(e,{PluginId:function(){return P},Version:function(){return k},videoJsPlugin:function(){return Tt}});var I=M(n(17328)),N=M(n(59496)),B=M(n(71895)),k="0.3.8",P="video.js",D={currentTimeMaxError:1,syncInterval:500,retryInterval:15e3},L=D;function O(t,e){if(t.paused)return t.currentTime;var n=function(t){if(t.player)return t.player.beginTimestamp+t.plugin.playerTimestamp;if(t.room)return t.room.calibrationTimestamp}(e);return n?t.currentTime+(n-t.hostTime)/1e3:t.currentTime}var R=navigator.userAgent.includes("Safari"),F="object"==(void 0===n.g?"undefined":y(n.g))&&n.g&&n.g.Object===Object&&n.g,U="object"==("undefined"==typeof self?"undefined":y(self))&&self&&self.Object===Object&&self,j=F||U||Function("return this")(),z=j.Symbol,H=Object.prototype,Q=H.hasOwnProperty,G=H.toString,V=z?z.toStringTag:void 0;var W=function(t){var e=Q.call(t,V),n=t[V];try{t[V]=void 0;var r=!0}catch(t){}var i=G.call(t);return r&&(e?t[V]=n:delete t[V]),i},Y=Object.prototype.toString;var X=function(t){return Y.call(t)},q=z?z.toStringTag:void 0;var K=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":q&&q in Object(t)?W(t):X(t)};var Z=function(t){return null!=t&&"object"==y(t)};var J=function(t){return"symbol"==y(t)||Z(t)&&"[object Symbol]"==K(t)},$=/\s/;var tt=function(t){for(var e=t.length;e--&&$.test(t.charAt(e)););return e},et=/^\s+/;var nt=function(t){return t?t.slice(0,tt(t)+1).replace(et,""):t};var rt=function(t){var e=y(t);return null!=t&&("object"==e||"function"==e)},it=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,at=/^0o[0-7]+$/i,st=parseInt;var ut=function(t){if("number"==typeof t)return t;if(J(t))return NaN;if(rt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=rt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=nt(t);var n=ot.test(t);return n||at.test(t)?st(t.slice(2),n?2:8):it.test(t)?NaN:+t},lt=function(){return j.Date.now()},ct=Math.max,ht=Math.min;var dt=function(t,e,n){var r,i,o,a,s,u,l=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function A(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function f(t){return l=t,s=setTimeout(g,e),c?A(t):a}function p(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-l>=o}function g(){var t=lt();if(p(t))return v(t);s=setTimeout(g,function(t){var n=e-(t-u);return h?ht(n,o-(t-l)):n}(t))}function v(t){return s=void 0,d&&r?A(t):(r=i=void 0,a)}function m(){var t=lt(),n=p(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return f(u);if(h)return clearTimeout(s),s=setTimeout(g,e),A(u)}return void 0===s&&(s=setTimeout(g,e)),a}return e=ut(e)||0,rt(n)&&(c=!!n.leading,o=(h="maxWait"in n)?ct(ut(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},m.flush=function(){return void 0===s?a:v(lt())},m},At=M(n(17328));function ft(t){var e=document.createElement("style"),n=document.createTextNode(t);e.appendChild(n),document.head.appendChild(e)}ft(".vjs-p .player-controller{position:absolute;z-index:100;bottom:0px;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:64px;background-image:linear-gradient(0deg,#000,transparent);transition:opacity .2s}.vjs-p .player-menu-box{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:40px}.vjs-p .player-menu-cell{width:100%;text-align:center;font-size:12px;color:#7a7b7c}.vjs-p .player-multiple-play{width:64px;height:120px}.vjs-p .player-controller-actions-left{display:flex;justify-content:center;align-items:center;flex-shrink:0}.vjs-p .player-right-box{font-size:14px;color:#7a7b7c;cursor:pointer;margin-right:12px}.vjs-p .player-controller-actions{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px;padding-right:8px;margin-top:2px}.vjs-p .player-mid-box-time{font-size:9px;display:flex;justify-content:center;align-items:center;color:#fff;flex-shrink:0;margin-right:8px;font-family:monospace}.vjs-p .player-controller-play{display:flex;align-items:center;justify-content:center;cursor:pointer;padding-right:4px}.vjs-p .player-controller-progress{width:calc(100% - 28px);margin-left:14px;display:flex;align-items:center;justify-content:center;margin-top:8px}.vjs-p .player-volume{display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:16px;margin-left:16px}.vjs-p .player-volume-slider{width:60px;margin-right:12px;display:flex;align-items:center}.vjs-p .player-volume-box{display:flex;flex-direction:row}\n");var pt=M(n(17328));ft(".vjs-p .seek-slider{position:relative;width:100%}.vjs-p .seek-slider:focus{outline:none}.vjs-p .seek-slider .track{padding:10px 0;cursor:pointer;outline:none}.vjs-p .seek-slider .track:focus{border:0;outline:none}.vjs-p .seek-slider .track .main{width:100%;height:3px;background-color:#ffffff4d;border-radius:30px;position:absolute;left:0;top:8.5px;transition:transform .4s;outline:none}.vjs-p .seek-slider .track .main:focus{border:0;outline:none}.vjs-p .seek-slider .track .main .buffered{position:absolute;background-color:#ffffff4d;width:100%;height:100%;transform:scaleX(.8);z-index:2;transform-origin:0 0}.vjs-p .seek-slider .track .main .seek-hover{position:absolute;background-color:#ffffff80;width:100%;height:100%;z-index:1;transform:scaleX(.6);transform-origin:0 0;opacity:0;transition:opacity .4s}.vjs-p .seek-slider .track .main .connect{position:absolute;background-color:#fff;width:100%;height:100%;z-index:3;left:0;transform:scaleX(.13);transform-origin:0 0}.vjs-p .seek-slider .track.active .main{transform:scaleY(2)}.vjs-p .seek-slider .thumb{pointer-events:none;position:absolute;width:12px;height:12px;left:-6px;top:4px;z-index:4;transform:translate(100px)}.vjs-p .seek-slider .thumb .handler{border-radius:100%;width:100%;height:100%;background-color:#fff;opacity:0;transform:scale(.4);cursor:pointer;transition:transform .2s;pointer-events:none}.vjs-p .seek-slider .thumb.active .handler{opacity:1;transform:scale(1)}.vjs-p .seek-slider .hover-time{position:absolute;background-color:#0000004d;line-height:18px;font-size:16px;color:#ddd;top:-25px;left:0;padding:5px 10px;border-radius:5px;box-shadow:0 0 5px #0000004d;opacity:0;transform:translate(150px);pointer-events:none}.vjs-p .seek-slider .hover-time.active{opacity:1}.vjs-p .seek-slider:hover .track .main .seek-hover{opacity:1}\n");var gt=function(t){u(n,t);var e=c(n);function n(t){var r;return o(this,n),r=e.call(this,t),C(d(r),"seeking",!1),C(d(r),"mobileSeeking",!1),C(d(r),"track",null),C(d(r),"hoverTime",null),C(d(r),"offset",0),C(d(r),"secondsPrefix","00:00:"),C(d(r),"minutesPrefix","00:"),C(d(r),"seekPause",!1),C(d(r),"handleTouchSeeking",(function(t){for(var e=0,n=0;n<t.changedTouches.length;n++)e=t.changedTouches[n].pageX;e=e<0?0:e,r.mobileSeeking&&r.changeCurrentTimePosition(e)})),C(d(r),"handleSeeking",(function(t){r.seeking&&r.changeCurrentTimePosition(t.pageX)})),C(d(r),"setTrackWidthState",(function(){r.track&&r.setState({trackWidth:r.track.offsetWidth})})),C(d(r),"handleTrackHover",(function(t,e){if(r.track){var n,i=r.props.scale||1;n=t?0:(e.pageX-r.track.getBoundingClientRect().left)/i,r.setState({seekHoverPosition:n,trackWidth:r.track.offsetWidth})}})),C(d(r),"mouseSeekingHandler",(function(t){r.setSeeking(!1,t),r.onMouseUp()})),C(d(r),"setSeeking",(function(t,e){e.preventDefault(),r.handleSeeking(e),r.seeking=t,r.setState({seekHoverPosition:t?r.state.seekHoverPosition:0})})),C(d(r),"mobileTouchSeekingHandler",(function(){r.setMobileSeeking(!1)})),C(d(r),"setMobileSeeking",(function(t){r.mobileSeeking=t,r.setState({seekHoverPosition:t?r.state.seekHoverPosition:0})})),C(d(r),"renderBufferProgress",(function(){if(r.props.buffered){var t=p(p({},r.getPositionStyle(r.props.buffered)),r.props.bufferColor&&{backgroundColor:r.props.bufferColor});return pt.default.createElement("div",{className:"buffered",style:t})}return null})),C(d(r),"renderProgress",(function(){var t=p(p({},r.getPositionStyle(r.props.current)),r.props.sliderColor&&{backgroundColor:r.props.sliderColor});return pt.default.createElement("div",{className:"connect",style:t})})),C(d(r),"renderHoverProgress",(function(){var t=p(p({},r.getSeekHoverPosition()),r.props.sliderHoverColor&&{backgroundColor:r.props.sliderHoverColor});return pt.default.createElement("div",{className:"seek-hover",style:t})})),C(d(r),"renderThumb",(function(){return pt.default.createElement("div",{className:r.isThumbActive()?"thumb active":"thumb",style:r.getThumbHandlerPosition()},pt.default.createElement("div",{style:{backgroundColor:r.props.thumbColor},className:"handler"}))})),C(d(r),"onMouseDown",(function(t){var e,n;r.props.pause&&!r.props.paused&&(r.props.pause(),r.seekPause=!0),r.setSeeking(!0,t),null==(n=(e=r.props).onSeekStart)||n.call(e)})),C(d(r),"onMouseUp",(function(){var t,e;r.props.play&&r.seekPause&&(r.props.play(),r.seekPause=!1),null==(e=(t=r.props).onSeekEnd)||e.call(t)})),r.props.secondsPrefix&&(r.secondsPrefix=r.props.secondsPrefix),r.props.minutesPrefix&&(r.minutesPrefix=r.props.minutesPrefix),r.state={ready:!1,trackWidth:0,seekHoverPosition:0},r}return s(n,[{key:"componentDidMount",value:function(){this.setTrackWidthState(),window.addEventListener("resize",this.setTrackWidthState),window.addEventListener("mousemove",this.handleSeeking),window.addEventListener("mouseup",this.mouseSeekingHandler),window.addEventListener("touchmove",this.handleTouchSeeking),window.addEventListener("touchend",this.mobileTouchSeekingHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setTrackWidthState),window.removeEventListener("mousemove",this.handleSeeking),window.removeEventListener("mouseup",this.mouseSeekingHandler),window.removeEventListener("touchmove",this.handleTouchSeeking),window.removeEventListener("touchend",this.mobileTouchSeekingHandler)}},{key:"changeCurrentTimePosition",value:function(t){if(this.track){var e=this.props.scale||1,n=(t-this.track.getBoundingClientRect().left)/e;n=Math.min(this.state.trackWidth,Math.max(0,n)),this.setState({seekHoverPosition:n});var r=+(n/this.state.trackWidth*this.props.total).toFixed(0);this.props.onChange(r)}}},{key:"getPositionStyle",value:function(t){var e=100*t/this.props.total;return{transform:"scaleX(".concat(e/100,")")}}},{key:"getThumbHandlerPosition",value:function(){var t=this.state.trackWidth/(this.props.total/this.props.current);return{transform:"translateX(".concat(t,"px)")}}},{key:"getSeekHoverPosition",value:function(){var t=100*this.state.seekHoverPosition/this.state.trackWidth;return{transform:"scaleX(".concat(t/100,")")}}},{key:"getHoverTimePosition",value:function(){var t=0;return this.hoverTime&&(t=this.state.seekHoverPosition-this.hoverTime.offsetWidth/2,this.props.limitTimeTooltipBySides&&(t<0?t=0:t+this.hoverTime.offsetWidth>this.state.trackWidth&&(t=this.state.trackWidth-this.hoverTime.offsetWidth))),{transform:"translateX(".concat(t,"px)")}}},{key:"secondsToTime",value:function(t){t=Math.round(t+this.offset);var e=Math.floor(t/3600),n=t%3600,r=Math.floor(n/60),i=Math.ceil(n%60);return{hh:e.toString(),mm:r<10?"0"+r:r.toString(),ss:i<10?"0"+i:i.toString()}}},{key:"getHoverTime",value:function(){var t=100*this.state.seekHoverPosition/this.state.trackWidth,e=Math.floor(+t*(this.props.total/100)),n=this.secondsToTime(e);return this.props.total+this.offset<60?this.secondsPrefix+n.ss:this.props.total+this.offset<3600?this.minutesPrefix+n.mm+":"+n.ss:n.hh+":"+n.mm+":"+n.ss}},{key:"isThumbActive",value:function(){return this.state.seekHoverPosition>0||this.seeking}},{key:"drawHoverTime",value:function(){var t=this;return this.props.hideHoverTime?null:pt.default.createElement("div",{className:this.isThumbActive()?"hover-time active":"hover-time",style:this.getHoverTimePosition(),ref:function(e){return t.hoverTime=e}},this.getHoverTime())}},{key:"render",value:function(){var t=this;return pt.default.createElement("div",{className:"seek-slider"},pt.default.createElement("div",{className:"track",ref:function(e){return t.track=e},onMouseMove:function(e){return t.handleTrackHover(!1,e)},onMouseLeave:function(e){return t.handleTrackHover(!0,e)},onMouseDown:this.onMouseDown,onTouchStart:function(e){t.setMobileSeeking(!0),t.onMouseDown(e)},onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp},pt.default.createElement("div",{className:"main"},this.renderBufferProgress(),this.renderHoverProgress(),this.renderProgress())),this.drawHoverTime(),this.renderThumb())}}]),n}(pt.Component),vt=function(t){u(n,t);var e=c(n);function n(t){var r;return o(this,n),r=e.call(this,t),C(d(r),"stageVolume",0),C(d(r),"updateVolumeTimer",0),C(d(r),"onVolumeSeeking",!1),C(d(r),"onClickOperationButton",(function(){r.props.paused?r.props.play():r.props.pause()})),C(d(r),"operationButton",(function(){return r.props.paused?At.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBmaWxsLW9wYWNpdHk9Ii4wMSIgZD0iTTAgMGgyMnYyMkgweiIvPjxwYXRoIGQ9Im03LjUxNCA1LjkwOSA3LjA1NyA0LjIzNGExIDEgMCAwIDEgMCAxLjcxNGwtNy4wNTcgNC4yMzRBMSAxIDAgMCAxIDYgMTUuMjM0VjYuNzY2YTEgMSAwIDAgMSAxLjUxNC0uODU3eiIvPjwvZz48L3N2Zz4="}):At.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBmaWxsLW9wYWNpdHk9Ii4wMSIgZD0iTTAgMGgyMnYyMkgweiIvPjxyZWN0IHg9IjciIHk9IjYiIHdpZHRoPSIyIiBoZWlnaHQ9IjEwIiByeD0iMSIvPjxyZWN0IHg9IjEzIiB5PSI2IiB3aWR0aD0iMiIgaGVpZ2h0PSIxMCIgcng9IjEiLz48L2c+PC9zdmc+"})})),C(d(r),"operationVolumeButton",(function(){return r.props.volume>.9?At.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy4wOCA4LjQ0NUg1YS45NjIuOTYyIDAgMCAwLTEgLjkyNHYzLjkwN2EuOTYzLjk2MyAwIDAgMCAuOTYuOTY2bC4wNDYtLjAwMWgyLjAxbDMuMjI3IDIuMjc0Yy41MDIuMzQ0LjkzMi4xMzguOTMyLS4zNDVWNi41MTZjLS4wMDQtLjQ4My0uNDM2LS42OS0uODY2LS4zNDVMNy4wOCA4LjQ0NXptNS43NDUgNC40MTNhLjU3Ni41NzYgMCAwIDAgMCAuODk4LjgwNS44MDUgMCAwIDAgMS4wNzggMCAyLjk0MyAyLjk0MyAwIDAgMC0uMDA0LTQuNTVoLjAwNGEuODA1LjgwNSAwIDAgMC0xLjA3OCAwIC41NzYuNTc2IDAgMCAwIDAgLjg5NiAxLjc5NCAxLjc5NCAwIDAgMSAwIDIuNzU2eiIvPjxwYXRoIGQ9Ik0xNC45MDYgNy40MTJhLjU3Ni41NzYgMCAwIDAgMCAuODk4IDQuMDcyIDQuMDcyIDAgMCAxIDAgNi40MTIuNTc2LjU3NiAwIDAgMCAwIC44OTYuODAzLjgwMyAwIDAgMCAxLjA3NiAwIDUuMjIzIDUuMjIzIDAgMCAwLS4wMDMtOC4yMDhoLjAwM2EuODA0LjgwNCAwIDAgMC0xLjA3Ni4wMDJ6Ii8+PHBhdGggZmlsbC1vcGFjaXR5PSIuMDEiIGQ9Ik0wIDBoMjJ2MjJIMHoiLz48L2c+PC9zdmc+"}):0===r.props.volume?At.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy4wOCA4LjQ0NUg1YS45NjIuOTYyIDAgMCAwLTEgLjkyNHYzLjkwN2EuOTYzLjk2MyAwIDAgMCAuOTYuOTY2bC4wNDYtLjAwMWgyLjAxbDMuMjI3IDIuMjc0Yy41MDIuMzQ0LjkzMi4xMzguOTMyLS4zNDVWNi41MTZjLS4wMDQtLjQ4My0uNDM2LS42OS0uODY2LS4zNDVMNy4wOCA4LjQ0NXoiLz48cGF0aCBmaWxsLW9wYWNpdHk9Ii4wMSIgZD0iTTAgMGgyMnYyMkgweiIvPjwvZz48L3N2Zz4="}):At.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy4wOCA4LjQ0NUg1YS45NjIuOTYyIDAgMCAwLTEgLjkyNHYzLjkwN2EuOTYzLjk2MyAwIDAgMCAuOTYuOTY2bC4wNDYtLjAwMWgyLjAxbDMuMjI3IDIuMjc0Yy41MDIuMzQ0LjkzMi4xMzguOTMyLS4zNDVWNi41MTZjLS4wMDQtLjQ4My0uNDM2LS42OS0uODY2LS4zNDVMNy4wOCA4LjQ0NXptNS43NDUgNC40MTNhLjU3Ni41NzYgMCAwIDAgMCAuODk4LjgwNS44MDUgMCAwIDAgMS4wNzggMCAyLjk0MyAyLjk0MyAwIDAgMC0uMDA0LTQuNTVoLjAwNGEuODA1LjgwNSAwIDAgMC0xLjA3OCAwIC41NzYuNTc2IDAgMCAwIDAgLjg5NiAxLjc5NCAxLjc5NCAwIDAgMSAwIDIuNzU2eiIvPjxwYXRoIGZpbGwtb3BhY2l0eT0iLjAxIiBkPSJNMCAwaDIydjIySDB6Ii8+PC9nPjwvc3ZnPg=="})})),C(d(r),"handleClickVolume",(function(){0===r.props.volume?0!==r.stageVolume?r.props.setVolume(r.stageVolume):r.props.setVolume(1):(r.stageVolume=r.props.volume,r.props.setVolume(0))})),C(d(r),"onChange",(function(t){r.setState({currentTime:t}),t&&r.changeTime(t)})),C(d(r),"changeTime",dt((function(t){r.props.setCurrentTime(t)}),50)),C(d(r),"onVolumeChange",(function(t){r.changeVolume(t),r.setState({seekVolume:t/100})})),C(d(r),"changeVolume",dt((function(t){r.props.setVolume(t/100)}),50)),C(d(r),"onVolumeSeekStart",(function(){r.onVolumeSeeking=!0})),C(d(r),"onVolumeSeekEnd",dt((function(){r.onVolumeSeeking=!1}),500)),C(d(r),"onProgressSeekStart",(function(){return r.setState({isPlayerSeeking:!0})})),C(d(r),"onProgressSeekEnd",dt((function(){r.setState({isPlayerSeeking:!1})}),500)),r.state={isPlayerSeeking:!1,isVolumeHover:!1,seekVolume:1,visible:!0,currentTime:0},r.stageVolume=t.volume,r}return s(n,[{key:"componentDidMount",value:function(){var t=this;this.updateVolumeTimer=setInterval((function(){t.onVolumeSeeking||t.setState({seekVolume:t.props.volume}),t.state.isPlayerSeeking||t.setState({currentTime:t.props.currentTime})}),100)}},{key:"componentWillUnmount",value:function(){this.updateVolumeTimer&&clearInterval(this.updateVolumeTimer)}},{key:"render",value:function(){var t=this,e=this.props,n=e.duration,r=e.currentTime;return At.default.createElement("div",{className:"player-controller",style:{opacity:this.props.visible?"1":"0"}},At.default.createElement("div",{className:"player-controller-progress"},At.default.createElement(gt,{total:n,current:this.state.currentTime,onChange:this.onChange,buffered:this.props.buffered,bufferColor:"rgba(255,255,255,0.3)",hideHoverTime:!0,limitTimeTooltipBySides:!0,onSeekStart:this.onProgressSeekStart,onSeekEnd:this.onProgressSeekEnd,play:this.props.play,pause:this.props.pause,paused:this.props.paused,scale:this.props.scale})),At.default.createElement("div",{className:"player-controller-actions"},At.default.createElement("div",{className:"player-controller-actions-left"},At.default.createElement("div",{onClick:this.onClickOperationButton,className:"player-controller-play"},this.operationButton()),At.default.createElement("div",{className:"player-volume-box",onMouseEnter:function(){return t.setState({isVolumeHover:!0})},onMouseLeave:function(){return t.setState({isVolumeHover:!1})}},At.default.createElement("div",{onClick:this.handleClickVolume,className:"player-volume"},this.operationVolumeButton()),At.default.createElement("div",{className:"player-volume-slider"},At.default.createElement(gt,{total:100,current:100*this.state.seekVolume,onChange:this.onVolumeChange,onSeekStart:this.onVolumeSeekStart,onSeekEnd:this.onVolumeSeekEnd,scale:this.props.scale,limitTimeTooltipBySides:!0,hideHoverTime:!0})))),At.default.createElement("div",{className:"player-mid-box-time"},mt(Math.floor(r/1e3))," /"," ",mt(Math.floor(n/1e3)))))}}]),n}(At.Component);function mt(t){var e=t%60,n=(t-e)/60;if(n>=60){var r=n%60;return"".concat(yt((n-r)/60),":").concat(yt(r),":").concat(yt(e))}return"".concat(yt(n),":").concat(yt(e))}function yt(t){return t<=9?"0".concat(t):"".concat(t)}ft('.vjs-p{display:flex;flex-grow:1;position:relative}.vjs-p *{pointer-events:auto}.vjs-p.disabled *{pointer-events:none}.vjs-p .videojs-plugin-close-icon,.vjs-p .player-controller,.vjs-p .videojs-plugin-muted-alert{pointer-events:auto}.vjs-p.disabled .videojs-plugin-close-icon,.vjs-p.disabled .player-controller{pointer-events:none}.vjs-p .video-js-plugin-header{position:absolute;z-index:100;top:-.5px;height:30px;width:100%;display:flex;background:linear-gradient(rgba(0,0,0,.85),rgba(0,0,0,.45) 40%,rgba(0,0,0,0));transition:opacity .2s;user-select:none}.vjs-p .video-js-plugin-title{padding:10px;font-size:14px;color:#fff}.vjs-p .video-js-plugin-player{position:absolute;top:0;left:0;right:0;bottom:0}.video-js,[data-vjs-player]{width:100%;height:100%}.vjs-p .videojs-plugin-close-icon.disabled{display:none}.vjs-p .videojs-plugin-close-icon{pointer-events:auto;z-index:42;color:#fff;position:absolute;top:0;right:0;width:32px;height:32px;font-size:20px;display:flex;align-items:center;justify-content:center}.vjs-p .videojs-plugin-muted-alert{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43}.vjs-p .videojs-plugin-muted-alert:before{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43;content:"";background:rgba(0,0,0,.3);font-family:VideoJS;font-size:2em;display:flex;align-items:center;justify-content:center;color:#fff}.vjs-p .videojs-plugin-recovery-mode{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:44}.vjs-p .videojs-plugin-recovery-mode button{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}\n');var bt=M(n(17328));function wt(t){var e=t.scale,n=void 0===e?1:e,r=t.size,i=t.children;return bt.default.createElement("div",{style:{width:r.width/n,height:r.height/n,transform:"scale(".concat(n,")"),transformOrigin:"top left",display:"flex",overflow:"hidden"}},i)}var xt=function(t){u(n,t);var e=c(n);function n(){return o(this,n),e.apply(this,arguments)}return s(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.cnode,r=e.size,i=e.scale;return I.default.createElement(B.CNode,{context:n},I.default.createElement(wt,{size:r,scale:i},I.default.createElement(B.RoomConsumer,null,(function(e){return e&&I.default.createElement(_t,p({room:e},t.props))})),I.default.createElement(B.PlayerConsumer,null,(function(e){return e&&I.default.createElement(_t,p({player:e},t.props))}))))}}]),n}(I.Component),_t=function(t){u(n,t);var e=c(n);function n(t){var r;return o(this,n),r=e.call(this,t),C(d(r),"closeIcon",null),C(d(r),"alertMask",null),C(d(r),"container",I.default.createRef()),C(d(r),"player"),C(d(r),"controllerHiddenTimer",0),C(d(r),"syncPlayerTimer",0),C(d(r),"retryCount",0),C(d(r),"decreaseRetryTimer",0),C(d(r),"disposer"),C(d(r),"showController",(function(){r.setState({controllerVisible:!0}),r.debounceHidingController()})),C(d(r),"play",(function(){var t,e=null==(t=r.props.room)?void 0:t.calibrationTimestamp;r.debug(">>> play",{paused:!1,hostTime:e}),r.isEnabled()&&r.props.plugin.putAttributes({paused:!1,hostTime:e})})),C(d(r),"pause",(function(){var t=r.getAttributes();if(t){var e=O(t,r.props);r.debug(">>> pause",{paused:!0,currentTime:e}),r.isEnabled()&&r.props.plugin.putAttributes({paused:!0,currentTime:e})}})),C(d(r),"setVolume",(function(t){r.debug(">>> volume",{volume:t}),r.isEnabled()&&r.props.plugin.putAttributes({volume:t}),r.isEnabled()&&r.props.plugin.putAttributes({volume:t,muted:0===t})})),C(d(r),"setCurrentTime",(function(t){var e,n=null==(e=r.props.room)?void 0:e.calibrationTimestamp;r.debug(">>> seek",{currentTime:t/1e3,hostTime:n}),r.isEnabled()&&r.props.plugin.putAttributes({currentTime:t/1e3,hostTime:n})})),C(d(r),"resetPlayer",(function(){var t;null==(t=r.player)||t.autoplay(!1),r.debug(">>> ended",{paused:!0,currentTime:0}),r.isEnabled()&&r.props.plugin.putAttributes({paused:!0,currentTime:0})})),C(d(r),"syncPlayerWithAttributes",(function(){var t;r.props.plugin.context;var e=r.getAttributes();if(e){var n=r.player;if(n){n.paused()!==e.paused&&(r.debug("<<< paused -> %o",e.paused),e.paused?n.pause():null==(t=n.play())||t.catch(r.catchPlayFail)),n.muted()!==e.muted&&(r.debug("<<< muted -> %o",e.muted),n.muted(e.muted)),n.volume()!==e.volume&&(r.debug("<<< volume -> %o",e.volume),n.volume(e.volume));var i=O(e,r.props);i>n.duration()?r.resetPlayer():Math.abs(n.currentTime()-i)>L.currentTimeMaxError&&(r.debug("<<< currentTime -> %o",i),n.currentTime(i))}}})),C(d(r),"debounceHidingController",(function(){r.controllerHiddenTimer&&(clearTimeout(r.controllerHiddenTimer),r.controllerHiddenTimer=0),r.controllerHiddenTimer=setTimeout((function(){r.setState({controllerVisible:!1}),r.controllerHiddenTimer=0}),3e3)})),C(d(r),"decreaseRetryCount",(function(){r.player&&r.retryCount>0&&(r.retryCount=r.retryCount-1)})),C(d(r),"catchPlayFail",(function(t){var e,n,i=String(t);if(R&&i.includes("NotAllowedError")||i.includes("interact"))null==(e=r.player)||e.autoplay("any"),r.setState({NoSound:!0});else{var o=null==(n=r.player)?void 0:n.error();o&&(r.retryCount<=3?(r.initPlayer(),r.retryCount=r.retryCount+1):(r.debug("catch videojs media error",o),r.setState({MediaError:!0}))),r.debug("catch error",t)}})),C(d(r),"fixPlayFail",(function(){r.debug("try to fix play state"),r.setState({NoSound:!1});var t=r.getAttributes(),e=t.muted,n=t.volume;r.player&&(r.player.muted(e),r.player.volume(n))})),C(d(r),"initPlayer",i(regeneratorRuntime.mark((function t(){var e,n,i,o,a,s,u,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(e=r.player)||e.dispose(),r.player=void 0,r.debug("creating elements ..."),n=r.getAttributes(),i=n.type,o=n.src,a=n.poster,(s=document.createElement("div")).setAttribute("data-vjs-player",""),(u=document.createElement("video")).className="video-js",a&&(u.poster=a),u.setAttribute("playsInline",""),u.setAttribute("webkit-playsinline",""),l=document.createElement("source"),new URL(o).pathname.endsWith(".m3u8")?l.type="application/x-mpegURL":u.src=o,l.src=o,i&&(l.type=i),u.appendChild(l),s.appendChild(u),r.container.current.appendChild(s),t.next=20,new Promise((function(t){return(window.requestAnimationFrame||window.setTimeout)(t)}));case 20:r.debug("initializing videojs() ..."),c=(0,N.default)(u),r.player=c,c.one("loadedmetadata",r.gracefullyUpdate),c.on("ready",(function(){var t,e;null==(e=(t=L).onPlayer)||e.call(t,c),c.on("timeupdate",r.gracefullyUpdate),c.on("volumechange",r.gracefullyUpdate),c.on("seeked",r.gracefullyUpdate),c.on("play",r.gracefullyUpdate),c.on("pause",r.gracefullyUpdate),c.on("ended",r.resetPlayer)})),c.on("error",r.catchPlayFail),r.setState({MediaError:!1});case 27:case"end":return t.stop()}}),t)})))),C(d(r),"gracefullyUpdate",(function(){return r.setState({updater:!r.state.updater})})),C(d(r),"setupClose",(function(t){t&&(t.addEventListener("touchstart",r.removeSelf),t.addEventListener("click",r.removeSelf)),r.closeIcon=t})),C(d(r),"setupAlert",(function(t){t&&(t.addEventListener("touchstart",r.fixPlayFail),t.addEventListener("click",r.fixPlayFail)),r.alertMask=t})),C(d(r),"setupReload",(function(t){t&&(t.addEventListener("touchstart",r.initPlayer),t.addEventListener("click",r.initPlayer))})),C(d(r),"removeSelf",(function(){return r.props.plugin.remove()})),r.state={NoSound:!1,MediaError:!1,updater:!1,controllerVisible:!1},t.room&&function(t){if(!t.calibrationTimestamp)throw new Error("@netless/video-js-plugin@".concat(k," requires white-web-sdk@^2.13.8 to work properly."))}(t.room),r}return s(n,[{key:"getAttributes",value:function(){var t,e=this.props.plugin.attributes;if(e){var n=[B.PlayerPhase.Pause,B.PlayerPhase.Ended,B.PlayerPhase.Stopped];if(!e.paused&&n.includes(null==(t=this.props.player)?void 0:t.phase)){var r=O(e,this.props);e=p(p({},e),{},{currentTime:r,paused:!0})}return e}}},{key:"render",value:function(){var t,e,n,r;if(!this.props.room&&!this.props.player)return null;var i=this.getAttributes();if(!i)return null;var o=1e3*((null==(t=this.player)?void 0:t.duration())||1e3),a=(null==(e=this.player)?void 0:e.bufferedPercent())||0;return I.default.createElement("div",{className:this.isEnabled()?"vjs-p":"vjs-p disabled",onMouseEnter:this.showController,onMouseMove:this.showController},I.default.createElement("div",{className:"video-js-plugin-player",ref:this.container}),I.default.createElement("div",{className:"video-js-plugin-header"},i.title&&I.default.createElement("div",{className:"video-js-plugin-title"},i.title),(null==(n=i.close)||n)&&I.default.createElement("div",{className:"videojs-plugin-close-icon",ref:this.setupClose},"")),I.default.createElement(vt,{duration:o,volume:i.volume,setVolume:this.setVolume,paused:i.paused,play:this.play,pause:this.pause,currentTime:1e3*O(i,this.props),setCurrentTime:this.setCurrentTime,buffered:o*a,scale:this.props.scale,visible:!0}),!(null==(r=this.props.plugin.context)?void 0:r.hideMuteAlert)&&this.state.NoSound&&I.default.createElement("div",{ref:this.setupAlert,className:"videojs-plugin-muted-alert"}),this.state.MediaError&&I.default.createElement("div",{className:"videojs-plugin-recovery-mode"},I.default.createElement("button",{ref:this.setupReload},"Reload Player")))}},{key:"debug",value:function(t){var e;if(null==(e=this.props.plugin.context)?void 0:e.verbose){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(L.log||console.log).apply(void 0,["[VideoJS Plugin] ".concat(t)].concat(r))}}},{key:"componentDidMount",value:function(){this.debug("plugin version =",k),this.debug("sdk version =",B.WhiteVersion),this.debug("video.js version =",N.default.VERSION),this.initPlayer(),this.disposer=(0,B.autorun)(this.syncPlayerWithAttributes),this.syncPlayerTimer=setInterval(this.syncPlayerWithAttributes,L.syncInterval),this.decreaseRetryTimer=setInterval(this.decreaseRetryCount,L.retryInterval)}},{key:"componentWillUnmount",value:function(){var t,e;null==(t=this.disposer)||t.call(this),null==(e=this.player)||e.dispose(),clearInterval(this.syncPlayerTimer),clearInterval(this.decreaseRetryTimer)}},{key:"isEnabled",value:function(){var t;if(!(null==(t=this.props.room)?void 0:t.isWritable))return!1;var e=this.props.plugin.context||{},n=e.identity,r=e.enable;return(void 0!==n||void 0!==r)&&(n?["host","publisher"].includes(n):Boolean(r))}}]),n}(I.Component),Tt=function(t){var e;return t&&(e=t,L=p(p({},D),e)),{kind:P,render:xt,defaultAttributes:{src:"",poster:"",hostTime:0,currentTime:0,paused:!0,muted:!1,volume:1,close:!0}}}},14976:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.bridge=void 0;var l=n(90783),c=function(){function t(){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.registerMap={normal:{},async:{},progress:{}},this.postReady=function(){window._dsInit||(window._dsInit=!0,setTimeout((function(){e.bridge.call("_dsb.dsinit")}),0))},this.handleMessageFromNative=function(t){var e=t.method,r=t.data,i=t.callbackId,a=JSON.parse(r),s={id:i,complete:!0,data:void 0},u=n.getFunction(e);if(u){var l=u.type,c=u.function,h=u.obj;switch(l){case"normal":var A=c;s.data=A.apply(h,a),n.call(d,s);break;case"async":var f=c;if(f.then){f.apply(h,a).then((function(t){s.data=t,n.call(d,s)})).catch((function(t){}))}else{var p=c,g=[].concat(o(a),[function(t){s.data=t,n.call(d,s)}]);p.apply(h,g)}break;case"progress":var v=c,m=[].concat(o(a),[function(t,e){s.data=t,s.complete=!1!==e,n.call(d,s)}]);v.apply(h,m)}}}}var n,a,s;return n=t,(a=[{key:"call",value:function(t,e){var n,r,i={data:void 0===e?null:e};window._dsbridge?window._dsbridge.call(t,JSON.stringify(i)):(null===(r=null===(n=window.webkit)||void 0===n?void 0:n.messageHandlers)||void 0===r?void 0:r.asyncBridge)&&window.webkit.messageHandlers.asyncBridge.postMessage({method:t,arg:JSON.stringify(i)})}},{key:"asyncCall",value:function(t,e){var n={data:void 0===e?null:e};return new Promise((function(e){var r,i,o=(0,l.v4)();window[o]=function(t){e(t)},n[h]=o,window._dsbridge?window._dsbridge.call(t,JSON.stringify(n)):(null===(i=null===(r=window.webkit)||void 0===r?void 0:r.messageHandlers)||void 0===i?void 0:i.asyncBridge)&&window.webkit.messageHandlers.asyncBridge.postMessage({method:t,arg:JSON.stringify(n)})}))}},{key:"syncCall",value:function(t,e){var n={data:void 0===e?null:e};return window._dsbridge?window._dsbridge.call(t,JSON.stringify(e)):window._dswk&&prompt("_dsbridge="+t,JSON.stringify(n)),JSON.parse("{}").data}},{key:"register",value:function(t,e){this.postReady(),this.registerMap.normal[t]=e}},{key:"registerAsync",value:function(t,e){this.postReady(),this.registerMap.async[t]=e}},{key:"registerProgress",value:function(t,e){this.postReady(),this.registerMap.progress[t]=e}},{key:"splitNativeMethod",value:function(t){var e=t.split("."),n=e.pop();return[e.join("."),n]}},{key:"getFunction",value:function(t){for(var e in this.registerMap)if(Object.prototype.hasOwnProperty.call(this.registerMap,e)){var n=this.registerMap[e],o=n[t];if(o&&"function"==typeof o)return{type:e,function:o,obj:void 0};var a=i(this.splitNativeMethod(t),2),s=a[0],u=a[1],l=n[s]||{};if("object"===r(l)&&"function"==typeof l[u])return{type:e,function:l[u],obj:l}}}}])&&u(n.prototype,a),s&&u(n,s),t}(),h="_dscbstub",d="_dsb.returnValue";e.bridge=new c,window._handleMessageFromNative=e.bridge.handleMessageFromNative},38203:function(t,e,n){var r=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]},i=function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(13324),e),i(n(79888),e),i(n(14976),e)},5397:function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Bridge=void 0;var i=n(90783),o=n(5419),a=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.methods=new Map,this.asyncMethods=new Map,this.queue=new Map,this.verbose=!1,this.isAndroid=function(){return/android/i.test(navigator.userAgent)||/android/i.test("".concat(window.__platform))},this.listen=function(t){e.recv(t.data)},this.isAndroid()?document.addEventListener("message",this.listen):window.addEventListener("message",this.listen)}var e,n,a;return e=t,n=[{key:"enableLog",value:function(){this.verbose=!0}},{key:"destroy",value:function(){window.removeEventListener("message",this.listen),document.addEventListener("message",this.listen)}},{key:"call",value:function(t,e,n){var r=this;return new Promise((function(a,s){var u=(0,i.v4)(),l=(0,o.bridgeMessageTemplate)(o.BridgeEventType.evt,u,t,e);r.queue.set(u,{ack:!1,resolve:a,reject:s,method:t,callback:n}),window.ReactNativeWebView.postMessage(l)}))}},{key:"register",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n?this.asyncMethods.set(t,e):this.methods.set(t,e)}},{key:"registerAsyn",value:function(t,e){this.asyncMethods.set(t,e)}},{key:"recv",value:function(t){if("string"==typeof t){var e=(0,o.parseBridgeMessage)(t),n=e.type,r=e.actionId,i=e.method,a=e.payload;switch(this.verbose&&console.log({type:n,actionId:r,method:i,payload:a}),n){case o.BridgeEventType.req:var s={data:void 0,actionId:r,complete:!0},u=function(t,e){try{s.data=t.apply(e,a);var n=(0,o.bridgeMessageTemplate)(o.BridgeEventType.ack,r,o.ackTypeSuccess,s);window.ReactNativeWebView.postMessage(n)}catch(t){var i=(0,o.bridgeMessageTemplate)(o.BridgeEventType.ack,r,o.ackTypeError,t);window.ReactNativeWebView.postMessage(i)}},l=function(t,e){a.push((function(t,e){s.data=t,s.complete=!1!==e;var n="",i=!1;if("string"==typeof t)try{var a=JSON.parse(t);i=!(!a.error&&!a.__error)}catch(t){}else i=!(!t||!t.error&&!t.__error);n=i?(0,o.bridgeMessageTemplate)(o.BridgeEventType.ack,r,o.ackTypeError,s.data):(0,o.bridgeMessageTemplate)(o.BridgeEventType.ack,r,o.ackTypeSuccess,s),window.ReactNativeWebView.postMessage(n)}));try{t.apply(e,a)}catch(t){var n=(0,o.bridgeMessageTemplate)(o.BridgeEventType.ack,r,o.ackTypeError,t);window.ReactNativeWebView.postMessage(n)}},c=this.methods.get(i),h=this.asyncMethods.get(i);if(c)u(c,this.methods);else if(h)l(h,this.asyncMethods);else{var d=i.split(".");if(d.length<2)return;var A=d.pop(),f=d.join("."),p=this.methods.get(f);if(p){var g=p[A];if(g&&"function"==typeof g)return void u(g,p)}var v=this.asyncMethods.get(f);if(v){var m=v[A];if(m&&"function"==typeof m)return void l(m,v)}console.log("method ".concat(i," not found"))}break;case o.BridgeEventType.ack:var y=a;if(this.queue.has(r)){var b=this.queue.get(r);b.ack=!0,i===o.ackTypeError?b.reject(a):(b.resolve(y.data),b.callback&&b.callback(y.data)),y.complete&&this.queue.delete(r)}}}}}],n&&r(e.prototype,n),a&&r(e,a),t}();e.Bridge=a},5419:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseBridgeMessage=e.bridgeMessageTemplate=e.ackTypeError=e.ackTypeSuccess=e.BridgeEventType=void 0,function(t){t.req="req",t.evt="evt",t.ack="ack"}(e.BridgeEventType||(e.BridgeEventType={})),e.ackTypeSuccess="success",e.ackTypeError="error",e.bridgeMessageTemplate=function(t,e,n,r){return JSON.stringify({type:t,actionId:e,method:n,payload:r})},e.parseBridgeMessage=function(t){try{var e=JSON.parse(t);return{type:e.type,actionId:e.actionId,method:e.method,payload:e.payload}}catch(e){return console.log("parse bridge message ".concat(t," failed: "),e),{type:"fail",actionId:"",method:"",payload:t}}}},13324:function(t,e,n){var r=Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]},i=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.RNBridge=e.RNCommon=void 0,e.RNCommon=o(n(5419));var a=n(5397);Object.defineProperty(e,"RNBridge",{enumerable:!0,get:function(){return a.Bridge}})},79888:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},87980:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}
/*! For license information please see index.js.LICENSE.txt */var i;t=n.nmd(t),window,i=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==r(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(e,n){e.exports=t},function(t,e,n){(function(t,i){n.d(e,"a",(function(){return te}));var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function a(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}var c=[];Object.freeze(c);var h={};Object.freeze(h);var d={};function A(){return"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:d}function f(){return++Nt.mobxGuid}function p(t){throw g(!1,t),"X"}function g(t,e){if(!t)throw new Error("[mobx] "+(e||"An invariant failed, however the error is obfuscated because this is an production build."))}function v(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var m=function(){};function y(t){return null!==t&&"object"==r(t)}function b(t){if(null===t||"object"!=r(t))return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function w(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function x(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function _(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return y(t)&&!0===t[n]}}function T(t){return void 0!==A().Map&&t instanceof A().Map}function E(t){return t instanceof Set}function S(t){for(var e=[];;){var n=t.next();if(n.done)break;e.push(n.value)}return e}function M(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function C(t){return null===t?null:"object"==r(t)?""+t:t}function I(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function N(t,e){x(t,I(),e)}function B(t){return t[I()]=P,t}function k(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function P(){return this}var D=function(){function t(t){void 0===t&&(t="Atom@"+f()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=rt.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return Ot(this)},t.prototype.reportChanged=function(){Dt(),function(t){if(t.lowestObserverState!==rt.STALE){t.lowestObserverState=rt.STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===rt.UP_TO_DATE&&(r.isTracing!==it.NONE&&Rt(r,t),r.onBecomeStale()),r.dependenciesState=rt.STALE}}}(this),Lt()},t.prototype.toString=function(){return this.name},t}(),L=_("Atom",D);function O(t,e){return t===e}var R={identity:O,structural:function(t,e){return Ye(t,e)},default:function(t,e){return function(t,e){return"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(t,e)||O(t,e)},shallow:function(t,e){return Ye(t,e,1)}},F={},U={};function j(t,e){var n=e?F:U;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return z(this),this[t]},set:function(e){z(this),this[t]=e}})}function z(t){if(!0!==t.__mobxDidRunLazyInitializers){var e=t.__mobxDecorators;if(e)for(var n in w(t,"__mobxDidRunLazyInitializers",!0),e){var r=e[n];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function H(t,e){return function(){var n,r=function(r,i,o,a){if(!0===a)return e(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var u=r.__mobxDecorators;w(r,"__mobxDecorators",s({},u))}return r.__mobxDecorators[i]={prop:i,propertyCreator:e,descriptor:o,decoratorTarget:r,decoratorArguments:n},j(i,t)};return Q(arguments)?(n=c,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function Q(t){return(2===t.length||3===t.length)&&"string"==typeof t[1]||4===t.length&&!0===t[3]}function G(t,e,n){return ae(t)?t:Array.isArray(t)?et.array(t,{name:n}):b(t)?et.object(t,void 0,{name:n}):T(t)?et.map(t,{name:n}):E(t)?et.set(t,{name:n}):t}function V(t){return t}function W(t){g(t);var e=H(!0,(function(e,n,r,i,o){!function(t,e,n,r){var i=Fe(t);if(le(i)){var o=he(i,{object:t,name:e,type:"add",newValue:n});if(!o)return;n=o.newValue}n=(i.values[e]=new Et(n,r,i.name+"."+e,!1)).value,Object.defineProperty(t,e,function(t){return Ue[t]||(Ue[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(e){this.$mobx.write(this,t,e)}})}(e)),i.keys&&i.keys.push(e),function(t,e,n,r){var i=de(t),o=Ht(),a=i||o?{type:"add",object:e,name:n,newValue:r}:null;o&&Gt(s(s({},a),{name:t.name,key:n})),i&&fe(t,a),o&&Wt()}(i,t,e,n)}(e,n,r?r.initializer?r.initializer.call(e):r.value:void 0,t)})),n=(void 0!==i&&i.env,e);return n.enhancer=t,n}var Y={deep:!0,name:void 0,defaultDecorator:void 0};function X(t){return null==t?Y:"string"==typeof t?{name:t,deep:!0}:t}function q(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?V:G}Object.freeze(Y),Object.freeze({deep:!1,name:void 0,defaultDecorator:void 0});var K=W(G),Z=W((function(t,e,n){return null==t||Qe(t)||Ie(t)||Pe(t)||Oe(t)?t:Array.isArray(t)?et.array(t,{name:n,deep:!1}):b(t)?et.object(t,void 0,{name:n,deep:!1}):T(t)?et.map(t,{name:n,deep:!1}):E(t)?et.set(t,{name:n,deep:!1}):p(!1)})),J=W(V),$=W((function(t,e,n){return Ye(t,e)?e:t})),tt={box:function(t,e){arguments.length>2&&nt("box");var n=X(e);return new Et(t,q(n),n.name,!0,n.equals)},shallowBox:function(t,e){return arguments.length>2&&nt("shallowBox"),et.box(t,{name:e,deep:!1})},array:function(t,e){arguments.length>2&&nt("array");var n=X(e);return new _e(t,q(n),n.name)},shallowArray:function(t,e){return arguments.length>2&&nt("shallowArray"),et.array(t,{name:e,deep:!1})},map:function(t,e){arguments.length>2&&nt("map");var n=X(e);return new Be(t,q(n),n.name)},shallowMap:function(t,e){return arguments.length>2&&nt("shallowMap"),et.map(t,{name:e,deep:!1})},set:function(t,e){arguments.length>2&&nt("set");var n=X(e);return new Le(t,q(n),n.name)},object:function(t,e,n){"string"==typeof arguments[1]&&nt("object");var r=X(n);return re({},t,e,r)},shallowObject:function(t,e){return"string"==typeof arguments[1]&&nt("shallowObject"),et.object(t,{},{name:e,deep:!1})},ref:J,shallow:Z,deep:K,struct:$},et=function t(e,n,r){if("string"==typeof arguments[1])return K.apply(null,arguments);if(ae(e))return e;var i=b(e)?t.object(e,n,r):Array.isArray(e)?t.array(e,n):T(e)?t.map(e,n):E(e)?t.set(e,n):e;if(i!==e)return i;p(!1)};function nt(t){p("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(tt).forEach((function(t){return et[t]=tt[t]}));var rt,it,ot=H(!1,(function(t,e,n,r,i){var o=n.get,a=n.set,u=i[0]||{};!function(t,e,n){var r=Fe(t);n.name=r.name+"."+e,n.context=t,r.values[e]=new St(n),Object.defineProperty(t,e,function(t){return je[t]||(je[t]={configurable:Nt.computedConfigurable,enumerable:!1,get:function(){return ze(this).read(this,t)},set:function(e){ze(this).write(this,t,e)}})}(e))}(t,e,s({get:o,set:a},u))}));ot({equals:R.structural}),function(t){t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE"}(rt||(rt={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(it||(it={}));var at=function(t){this.cause=t};function st(t){return t instanceof at}function ut(t){switch(t.dependenciesState){case rt.UP_TO_DATE:return!1;case rt.NOT_TRACKING:case rt.STALE:return!0;case rt.POSSIBLY_STALE:for(var e=pt(!0),n=At(),r=t.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(Mt(a)){if(Nt.disableErrorBoundaries)a.get();else try{a.get()}catch(t){return ft(n),gt(e),!0}if(t.dependenciesState===rt.STALE)return ft(n),gt(e),!0}}return vt(t),ft(n),gt(e),!1}}function lt(t){var e=t.observers.length>0;Nt.computationDepth>0&&e&&p(!1),Nt.allowStateChanges||!e&&"strict"!==Nt.enforceActions||p(!1)}function ct(t,e,n){var r=pt(!0);vt(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Nt.runId;var i,o=Nt.trackingDerivation;if(Nt.trackingDerivation=t,!0===Nt.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(t){i=new at(t)}return Nt.trackingDerivation=o,function(t){for(var e=t.observing,n=t.observing=t.newObserving,r=rt.UP_TO_DATE,i=0,o=t.unboundDepsCount,a=0;a<o;a++)0===(s=n[a]).diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState);for(n.length=i,t.newObserving=null,o=e.length;o--;)0===(s=e[o]).diffValue&&kt(s,t),s.diffValue=0;for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,Bt(s,t))}r!==rt.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),t.observing.length,gt(r),i}function ht(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)kt(e[n],t);t.dependenciesState=rt.NOT_TRACKING}function dt(t){var e=At(),n=t();return ft(e),n}function At(){var t=Nt.trackingDerivation;return Nt.trackingDerivation=null,t}function ft(t){Nt.trackingDerivation=t}function pt(t){var e=Nt.allowStateReads;return Nt.allowStateReads=t,e}function gt(t){Nt.allowStateReads=t}function vt(t){if(t.dependenciesState!==rt.UP_TO_DATE){t.dependenciesState=rt.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=rt.UP_TO_DATE}}var mt=0,yt=1,bt=Object.getOwnPropertyDescriptor((function(){}),"name");function wt(t,e){var n=function(){return xt(t,e,this,arguments)};return n.isMobxAction=!0,n}function xt(t,e,n,r){var i=function(t,e,n){var r=Ht()&&!!t,i=0;if(r){i=Date.now();var o=n&&n.length||0,a=new Array(o);if(o>0)for(var s=0;s<o;s++)a[s]=n[s];Gt({type:"action",name:t,object:e,arguments:a})}var u=At();Dt();var l={prevDerivation:u,prevAllowStateChanges:_t(!0),prevAllowStateReads:pt(!0),notifySpy:r,startTime:i,actionId:yt++,parentActionId:mt};return mt=l.actionId,l}(t,n,r);try{return e.apply(n,r)}catch(t){throw i.error=t,t}finally{!function(t){mt!==t.actionId&&p("invalid action stack. did you forget to finish an action?"),mt=t.parentActionId,void 0!==t.error&&(Nt.suppressReactionErrors=!0),Tt(t.prevAllowStateChanges),gt(t.prevAllowStateReads),Lt(),ft(t.prevDerivation),t.notifySpy&&Wt({time:Date.now()-t.startTime}),Nt.suppressReactionErrors=!1}(i)}}function _t(t){var e=Nt.allowStateChanges;return Nt.allowStateChanges=t,e}function Tt(t){Nt.allowStateChanges=t}bt&&bt.configurable;var Et=function(t){function e(e,n,r,i,o){void 0===r&&(r="ObservableValue@"+f()),void 0===i&&(i=!0),void 0===o&&(o=R.default);var a=t.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=o,a.hasUnreportedChange=!1,a.value=n(e,void 0,r),i&&Ht()&&Qt({type:"create",name:a.name,newValue:""+a.value}),a}return a(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){var e=this.value;if((t=this.prepareNewValue(t))!==Nt.UNCHANGED){var n=Ht();n&&Gt({type:"update",name:this.name,newValue:t,oldValue:e}),this.setNewValue(t),n&&Wt()}},e.prototype.prepareNewValue=function(t){if(lt(this),le(this)){var e=he(this,{object:this,type:"update",newValue:t});if(!e)return Nt.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Nt.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),de(this)&&fe(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return ce(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),Ae(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return C(this.get())},e}(D);Et.prototype[M()]=Et.prototype.valueOf,_("ObservableValue",Et);var St=function(){function t(t){this.dependenciesState=rt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=rt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+f(),this.value=new at(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=it.NONE,g(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+f(),t.set&&(this.setter=wt(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?R.structural:R.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){!function(t){if(t.lowestObserverState===rt.UP_TO_DATE){t.lowestObserverState=rt.POSSIBLY_STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===rt.UP_TO_DATE&&(r.dependenciesState=rt.POSSIBLY_STALE,r.isTracing!==it.NONE&&Rt(r,t),r.onBecomeStale())}}}(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){this.isComputing&&p("Cycle detected in computation "+this.name+": "+this.derivation),0!==Nt.inBatch||0!==this.observers.length||this.keepAlive?(Ot(this),ut(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState!==rt.STALE){t.lowestObserverState=rt.STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===rt.POSSIBLY_STALE?r.dependenciesState=rt.STALE:r.dependenciesState===rt.UP_TO_DATE&&(t.lowestObserverState=rt.UP_TO_DATE)}}}(this)):ut(this)&&(this.warnAboutUntrackedRead(),Dt(),this.value=this.computeValue(!1),Lt());var t=this.value;if(st(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(st(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){g(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else g(!1,!1)},t.prototype.trackAndCompute=function(){Ht()&&Qt({object:this.scope,type:"compute",name:this.name});var t=this.value,e=this.dependenciesState===rt.NOT_TRACKING,n=this.computeValue(!0),r=e||st(t)||st(n)||!this.equals(t,n);return r&&(this.value=n),r},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Nt.computationDepth++,t)e=ct(this,this.derivation,this.scope);else if(!0===Nt.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new at(t)}return Nt.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(ht(this),this.value=void 0)},t.prototype.observe=function(t,e){var n=this,r=!0,i=void 0;return function(t,e){void 0===e&&(e=h);var n,r=e&&e.name||t.name||"Autorun@"+f();if(e.scheduler||e.delay){var i=$t(e),o=!1;n=new Ft(r,(function(){o||(o=!0,i((function(){o=!1,n.isDisposed||n.track(a)})))}),e.onError,e.requiresObservable)}else n=new Ft(r,(function(){this.track(a)}),e.onError,e.requiresObservable);function a(){t(n)}return n.schedule(),n.getDisposer()}((function(){var o=n.get();if(!r||e){var a=At();t({type:"update",object:n,newValue:o,oldValue:i}),ft(a)}r=!1,i=o}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return C(this.get())},t}();St.prototype[M()]=St.prototype.valueOf;var Mt=_("ComputedValue",St),Ct=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},It=!0,Nt=function(){var t=A();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(It=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Ct).version&&(It=!1),It?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Ct):(setTimeout((function(){p("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Ct)}();function Bt(t,e){var n=t.observers.length;n&&(t.observersIndexes[e.__mapid]=n),t.observers[n]=e,t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function kt(t,e){if(1===t.observers.length)t.observers.length=0,Pt(t);else{var n=t.observers,r=t.observersIndexes,i=n.pop();if(i!==e){var o=r[e.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[e.__mapid]}}function Pt(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Nt.pendingUnobservations.push(t))}function Dt(){Nt.inBatch++}function Lt(){if(0==--Nt.inBatch){Ut();for(var t=Nt.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof St&&n.suspend())}Nt.pendingUnobservations=[]}}function Ot(t){var e=Nt.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.length&&Nt.inBatch>0&&Pt(t),!1)}function Rt(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===it.BREAK){var n=[];!function t(e,n,r){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return t(e,n,r+1)})))}((r=t,ie(Ge(r,void 0))),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof St?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r}var Ft=function(){function t(t,e,n,r){void 0===t&&(t="Reaction@"+f()),void 0===r&&(r=!1),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=rt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+f(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=it.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Nt.pendingReactions.push(this),Ut())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(Dt(),this._isScheduled=!1,ut(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Ht()&&Qt({name:this.name,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation(t)}}Lt()}},t.prototype.track=function(t){Dt();var e,n=Ht();n&&(e=Date.now(),Gt({name:this.name,type:"reaction"})),this._isRunning=!0;var r=ct(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ht(this),st(r)&&this.reportExceptionInDerivation(r.cause),n&&Wt({time:Date.now()-e}),Lt()},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Nt.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Nt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,t),Ht()&&Qt({type:"error",name:this.name,message:n,error:""+t}),Nt.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Dt(),ht(this),Lt()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"==typeof t[t.length-1]&&(n=t.pop());var r=se(t);if(!r)return p(!1);r.isTracing===it.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?it.BREAK:it.LOG}(this,t)},t}();function Ut(){Nt.inBatch>0||Nt.isRunningReactions||function(t){t()}(jt)}function jt(){Nt.isRunningReactions=!0;for(var t=Nt.pendingReactions,e=0;t.length>0;){100==++e&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Nt.isRunningReactions=!1}var zt=_("Reaction",Ft);function Ht(){return!!Nt.spyListeners.length}function Qt(t){if(Nt.spyListeners.length)for(var e=Nt.spyListeners,n=0,r=e.length;n<r;n++)e[n](t)}function Gt(t){Qt(s(s({},t),{spyReportStart:!0}))}var Vt={spyReportEnd:!0};function Wt(t){Qt(t?s(s({},t),{spyReportEnd:!0}):Vt)}function Yt(){p(!1)}function Xt(t){return function(e,n,r){if(r){if(r.value)return{value:wt(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return wt(t,i.call(this))}}}return qt(t).apply(this,arguments)}}function qt(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){w(this,n,Kt(t,e))}})}}var Kt=function(t,e,n,r){return 1===arguments.length&&"function"==typeof t?wt(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?wt(t,e):1===arguments.length&&"string"==typeof t?Xt(t):!0!==r?Xt(e).apply(null,arguments):void(t[e]=wt(t.name||e,n.value))};function Zt(t,e,n){w(t,e,wt(e,n.bind(t)))}Kt.bound=function(t,e,n,r){return!0===r?(Zt(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Zt(this,e,n.value||n.initializer.call(this)),this[e]},set:Yt}:{enumerable:!1,configurable:!0,set:function(t){Zt(this,e,t)},get:function(){}}};var Jt=function(t){return t()};function $t(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Jt}function te(t,e,n){void 0===n&&(n=h),"boolean"==typeof n&&(n={fireImmediately:n});var r,i,o,a=n.name||"Reaction@"+f(),s=Kt(a,n.onError?(r=n.onError,i=e,function(){try{return i.apply(this,arguments)}catch(t){r.call(this,t)}}):e),u=!n.scheduler&&!n.delay,l=$t(n),c=!0,d=!1,A=n.compareStructural?R.structural:n.equals||R.default,p=new Ft(a,(function(){c||u?g():d||(d=!0,l(g))}),n.onError,n.requiresObservable);function g(){if(d=!1,!p.isDisposed){var e=!1;p.track((function(){var n=t(p);e=c||!A(o,n),o=n})),c&&n.fireImmediately&&s(o,p),c||!0!==e||s(o,p),c&&(c=!1)}}return p.schedule(),p.getDisposer()}function ee(t,e,n){return ne("onBecomeUnobserved",t,e,n)}function ne(t,e,n,r){var i="function"==typeof r?Ge(e,n):Ge(e),o="function"==typeof r?r:n,a=i[t];return"function"!=typeof a?p(!1):(i[t]=function(){a.call(this),o.call(this)},function(){i[t]=a})}function re(t,e,n,r){var i=(r=X(r)).defaultDecorator||(!1===r.deep?J:K);z(t),Fe(t,r.name,i.enhancer),Dt();try{for(var o in e){var a=Object.getOwnPropertyDescriptor(e,o),s=(n&&o in n?n[o]:a.get?ot:i)(t,o,a,!0);s&&Object.defineProperty(t,o,s)}}finally{Lt()}return t}function ie(t){var e,n,r={name:t.name};return t.observing&&t.observing.length>0&&(r.dependencies=(e=t.observing,n=[],e.forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n).map(ie)),r}function oe(t,e){if(null==t)return!1;if(void 0!==e){if(Qe(t)){var n=t.$mobx;return n.values&&!!n.values[e]}return!1}return Qe(t)||!!t.$mobx||L(t)||zt(t)||Mt(t)}function ae(t){return 1!==arguments.length&&p(!1),oe(t)}function se(t){switch(t.length){case 0:return Nt.trackingDerivation;case 1:return Ge(t[0]);case 2:return Ge(t[0],t[1])}}function ue(t,e){void 0===e&&(e=void 0),Dt();try{return t.apply(e)}finally{Lt()}}function le(t){return void 0!==t.interceptors&&t.interceptors.length>0}function ce(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),v((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function he(t,e){var n=At();try{var r=t.interceptors;if(r)for(var i=0,o=r.length;i<o&&(g(!(e=r[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{ft(n)}}function de(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function Ae(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),v((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function fe(t,e){var n=At(),r=t.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](e);ft(n)}}Object.create(Error.prototype);var pe,ge,ve,me,ye=(pe=!1,ge={},Object.defineProperty(ge,"0",{set:function(){pe=!0}}),Object.create(ge)[0]=1,!1===pe),be=0,we=function(){};ve=we,me=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(ve.prototype,me):void 0!==ve.prototype.__proto__?ve.prototype.__proto__=me:ve.prototype=me,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(t){Object.defineProperty(we.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})}));var xe=function(){function t(t,e,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new D(t||"ObservableArray@"+f()),this.enhancer=function(n,r){return e(n,r,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return ce(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Ae(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),r=0;r<t-e;r++)n[r]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e,e>0&&t+e+1>be&&Me(t+e+1)},t.prototype.spliceWithArray=function(t,e,n){var r=this;lt(this.atom);var i=this.values.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:null==e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=c),le(this)){var o=he(this,{object:this.array,type:"splice",index:t,removedCount:e,added:n});if(!o)return c;e=o.removedCount,n=o.added}var a=(n=0===n.length?n:n.map((function(t){return r.enhancer(t,void 0)}))).length-e;this.updateArrayLength(i,a);var s=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,s),this.dehanceValues(s)},t.prototype.spliceItemsIntoValues=function(t,e,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,l([t,e],n));var i=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),i},t.prototype.notifyArrayChildUpdate=function(t,e,n){var r=!this.owned&&Ht(),i=de(this),o=i||r?{object:this.array,type:"update",index:t,newValue:e,oldValue:n}:null;r&&Gt(s(s({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&fe(this,o),r&&Wt()},t.prototype.notifyArraySplice=function(t,e,n){var r=!this.owned&&Ht(),i=de(this),o=i||r?{object:this.array,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;r&&Gt(s(s({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&fe(this,o),r&&Wt()},t}(),_e=function(t){function e(e,n,r,i){void 0===r&&(r="ObservableArray@"+f()),void 0===i&&(i=!1);var o=t.call(this)||this,a=new xe(r,n,o,i);if(x(o,"$mobx",a),e&&e.length){var s=_t(!0);o.spliceWithArray(0,0,e),Tt(s)}return ye&&Object.defineProperty(a.array,"0",Te),o}return a(e,t),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,e){return void 0===e&&(e=!1),this.$mobx.observe(t,e)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map((function(t){return Ie(t)?t.peek():t})))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,e,n){void 0===n&&(n=0);var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},e.prototype.findIndex=function(t,e,n){void 0===n&&(n=0);for(var r=this.peek(),i=r.length,o=n;o<i;o++)if(t.call(e,r[o],o,this))return o;return-1},e.prototype.splice=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,e)}return this.$mobx.spliceWithArray(t,e,n)},e.prototype.spliceWithArray=function(t,e,n){return this.$mobx.spliceWithArray(t,e,n)},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,t),n.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(0,0,t),n.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var e=this.slice();return e.sort.apply(e,arguments)},e.prototype.remove=function(t){var e=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return e>-1&&(this.splice(e,1),!0)},e.prototype.move=function(t,e){function n(t){if(t<0)throw new Error("[mobx.array] Index out of bounds: "+t+" is negative");var e=this.$mobx.values.length;if(t>=e)throw new Error("[mobx.array] Index out of bounds: "+t+" is not smaller than "+e)}if(n.call(this,t),n.call(this,e),t!==e){var r,i=this.$mobx.values;r=t<e?l(i.slice(0,t),i.slice(t+1,e+1),[i[t]],i.slice(e+1)):l(i.slice(0,e),[i[t]],i.slice(e,t),i.slice(t+1)),this.replace(r)}},e.prototype.get=function(t){var e=this.$mobx;if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,e){var n=this.$mobx,r=n.values;if(t<r.length){lt(n.atom);var i=r[t];if(le(n)){var o=he(n,{type:"update",object:this,index:t,newValue:e});if(!o)return;e=o.newValue}(e=n.enhancer(e,i))!==i&&(r[t]=e,n.notifyArrayChildUpdate(t,e,i))}else{if(t!==r.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length);n.spliceWithArray(t,0,[e])}},e}(we);N(_e.prototype,(function(){this.$mobx.atom.reportObserved();var t=this,e=0;return B({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(_e.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}}),w(_e.prototype,k(),"Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(t){var e=Array.prototype[t];g("function"==typeof e,"Base function not defined on Array prototype: '"+t+"'"),w(_e.prototype,t,(function(){return e.apply(this.peek(),arguments)}))})),function(t,e){for(var n=0;n<e.length;n++)w(t,e[n],t[e[n]])}(_e.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var Te=Ee(0);function Ee(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(e){this.set(t,e)}}}function Se(t){Object.defineProperty(_e.prototype,""+t,Ee(t))}function Me(t){for(var e=be;e<t;e++)Se(e);be=t}Me(1e3);var Ce=_("ObservableArrayAdministration",xe);function Ie(t){return y(t)&&Ce(t.$mobx)}var Ne={},Be=function(){function t(t,e,n){if(void 0===e&&(e=G),void 0===n&&(n="ObservableMap@"+f()),this.enhancer=e,this.name=n,this.$mobx=Ne,this._keys=new _e(void 0,V,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!Nt.trackingDerivation)return this._has(t);var n=this._hasMap.get(t);if(!n){var r=n=new Et(this._has(t),V,this.name+"."+ke(t)+"?",!1);this._hasMap.set(t,r),ee(r,(function(){return e._hasMap.delete(t)}))}return n.get()},t.prototype.set=function(t,e){var n=this._has(t);if(le(this)){var r=he(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(le(this)&&!(i=he(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var n=Ht(),r=de(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return n&&Gt(s(s({},i),{name:this.name,key:t})),ue((function(){e._keys.remove(t),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)})),r&&fe(this,i),n&&Wt(),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);n&&n.setNewValue(e)},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if((e=n.prepareNewValue(e))!==Nt.UNCHANGED){var r=Ht(),i=de(this),o=i||r?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;r&&Gt(s(s({},o),{name:this.name,key:t})),n.setNewValue(e),i&&fe(this,o),r&&Wt()}},t.prototype._addValue=function(t,e){var n=this;ue((function(){var r=new Et(e,n.enhancer,n.name+"."+ke(t),!1);n._data.set(t,r),e=r.value,n._updateHasMapEntry(t,!0),n._keys.push(t)}));var r=Ht(),i=de(this),o=i||r?{type:"add",object:this,name:t,newValue:e}:null;r&&Gt(s(s({},o),{name:this.name,key:t})),i&&fe(this,o),r&&Wt()},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keys[I()]()},t.prototype.values=function(){var t=this,e=0;return B({next:function(){return e<t._keys.length?{value:t.get(t._keys[e++]),done:!1}:{value:void 0,done:!0}}})},t.prototype.entries=function(){var t=this,e=0;return B({next:function(){if(e<t._keys.length){var n=t._keys[e++];return{value:[n,t.get(n)],done:!1}}return{done:!0}}})},t.prototype.forEach=function(t,e){var n=this;this._keys.forEach((function(r){return t.call(e,n.get(r),r,n)}))},t.prototype.merge=function(t){var e=this;return Pe(t)&&(t=t.toJS()),ue((function(){b(t)?Object.keys(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=u(t,2),r=n[0],i=n[1];return e.set(r,i)})):T(t)?t.constructor!==Map?p("Cannot initialize from classes that inherit from Map: "+t.constructor.name):t.forEach((function(t,n){return e.set(n,t)})):null!=t&&p("Cannot initialize map from "+t)})),this},t.prototype.clear=function(){var t=this;ue((function(){dt((function(){t._keys.slice().forEach((function(e){return t.delete(e)}))}))}))},t.prototype.replace=function(t){var e=this;return ue((function(){for(var n,r=T(n=t)||Pe(n)?n:Array.isArray(n)?new Map(n):b(n)?new Map(Object.entries(n)):p("Cannot convert to map from '"+n+"'"),i=e._keys,o=Array.from(r.keys()),a=!1,s=0;s<i.length;s++){var u=i[s];i.length===o.length&&u!==o[s]&&(a=!0),r.has(u)||(a=!0,e.delete(u))}r.forEach((function(t,n){e._data.has(n)||(a=!0),e.set(n,t)})),a&&e._keys.replace(o)})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t=this,e={};return this._keys.forEach((function(n){return e["symbol"==r(n)?n:ke(n)]=t.get(n)})),e},t.prototype.toJS=function(){var t=this,e=new Map;return this._keys.forEach((function(n){return e.set(n,t.get(n))})),e},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+this._keys.map((function(e){return ke(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return Ae(this,t)},t.prototype.intercept=function(t){return ce(this,t)},t}();function ke(t){return t&&t.toString?t.toString():new String(t).toString()}N(Be.prototype,(function(){return this.entries()})),x(Be.prototype,k(),"Map");var Pe=_("ObservableMap",Be),De={},Le=function(){function t(t,e,n){if(void 0===e&&(e=G),void 0===n&&(n="ObservableSet@"+f()),this.name=n,this.$mobx=De,this._data=new Set,this._atom=function(t,e,n){void 0===e&&(e=m),void 0===n&&(n=m);var r=new D(t);return ne("onBecomeObserved",r,e,void 0),ee(r,n),r}(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,r){return e(t,r,n)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;ue((function(){dt((function(){t._data.forEach((function(e){t.delete(e)}))}))}))},t.prototype.forEach=function(t,e){var n=this;this._data.forEach((function(r){t.call(e,r,r,n)}))},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if(lt(this._atom),le(this)&&!(i=he(this,{type:"add",object:this,newValue:t})))return this;if(!this.has(t)){ue((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var n=Ht(),r=de(this),i=r||n?{type:"add",object:this,newValue:t}:null;r&&fe(this,i)}return this},t.prototype.delete=function(t){var e=this;if(le(this)&&!(i=he(this,{type:"delete",object:this,oldValue:t})))return!1;if(this.has(t)){var n=Ht(),r=de(this),i=r||n?{type:"delete",object:this,oldValue:t}:null;return ue((function(){e._atom.reportChanged(),e._data.delete(t)})),r&&fe(this,i),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=S(this.keys()),n=S(this.values());return B({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t,e=this,n=0;return void 0!==this._data.values?t=S(this._data.values()):(t=[],this._data.forEach((function(e){return t.push(e)}))),B({next:function(){return n<t.length?{value:e.dehanceValue(t[n++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return Oe(t)&&(t=t.toJS()),ue((function(){Array.isArray(t)||E(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&p("Cannot initialize set from "+t)})),this},t.prototype.observe=function(t,e){return Ae(this,t)},t.prototype.intercept=function(t){return ce(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+S(this.keys()).join(", ")+" ]"},t}();N(Le.prototype,(function(){return this.values()})),x(Le.prototype,k(),"Set");var Oe=_("ObservableSet",Le),Re=function(){function t(t,e,n){this.target=t,this.name=e,this.defaultEnhancer=n,this.values={}}return t.prototype.read=function(t,e){if(this.target===t||(this.illegalAccess(t,e),this.values[e]))return this.values[e].get()},t.prototype.write=function(t,e,n){var r=this.target;r!==t&&this.illegalAccess(t,e);var i=this.values[e];if(i instanceof St)i.set(n);else{if(le(this)){if(!(u=he(this,{type:"update",object:r,name:e,newValue:n})))return;n=u.newValue}if((n=i.prepareNewValue(n))!==Nt.UNCHANGED){var o=de(this),a=Ht(),u=o||a?{type:"update",object:r,oldValue:i.value,name:e,newValue:n}:null;a&&Gt(s(s({},u),{name:this.name,key:e})),i.setNewValue(n),o&&fe(this,u),a&&Wt()}}},t.prototype.remove=function(t){if(this.values[t]){var e=this.target;if(le(this)&&!(o=he(this,{object:e,name:t,type:"remove"})))return;try{Dt();var n=de(this),r=Ht(),i=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var o=n||r?{type:"remove",object:e,oldValue:i,name:t}:null;r&&Gt(s(s({},o),{name:this.name,key:t})),n&&fe(this,o),r&&Wt()}finally{Lt()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return Ae(this,t)},t.prototype.intercept=function(t){return ce(this,t)},t.prototype.getKeys=function(){var t=this;return void 0===this.keys&&(this.keys=new _e(Object.keys(this.values).filter((function(e){return t.values[e]instanceof Et})),V,"keys("+this.name+")",!0)),this.keys.slice()},t}();function Fe(t,e,n){void 0===e&&(e=""),void 0===n&&(n=G);var r=t.$mobx;return r||(b(t)||(e=(t.constructor.name||"ObservableObject")+"@"+f()),e||(e="ObservableObject@"+f()),x(t,"$mobx",r=new Re(t,e,n)),r)}var Ue=Object.create(null),je=Object.create(null);function ze(t){return t.$mobx||(z(t),t.$mobx)}var He=_("ObservableObjectAdministration",Re);function Qe(t){return!!y(t)&&(z(t),He(t.$mobx))}function Ge(t,e){if("object"==r(t)&&null!==t){if(Ie(t))return void 0!==e&&p(!1),t.$mobx.atom;if(Oe(t))return t.$mobx;if(Pe(t)){var n=t;return void 0===e?Ge(n._keys):((i=n._data.get(e)||n._hasMap.get(e))||p(!1),i)}var i;if(z(t),e&&!t.$mobx&&t[e],Qe(t))return e?((i=t.$mobx.values[e])||p(!1),i):p(!1);if(L(t)||Mt(t)||zt(t))return t}else if("function"==typeof t&&zt(t.$mobx))return t.$mobx;return p(!1)}function Ve(t,e){return t||p("Expecting some object"),void 0!==e?Ve(Ge(t,e)):L(t)||Mt(t)||zt(t)||Pe(t)||Oe(t)?t:(z(t),t.$mobx?t.$mobx:void p(!1))}var We=Object.prototype.toString;function Ye(t,e,n){return void 0===n&&(n=-1),function t(e,n,i,o,a){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return!1;if(e!=e)return n!=n;var s=r(e);if("function"!==s&&"object"!==s&&"object"!=r(n))return!1;e=Xe(e),n=Xe(n);var u=We.call(e);if(u!==We.call(n))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n)}var l="[object Array]"===u;if(!l){if("object"!=r(e)||"object"!=r(n))return!1;var c=e.constructor,h=n.constructor;if(c!==h&&!("function"==typeof c&&c instanceof c&&"function"==typeof h&&h instanceof h)&&"constructor"in e&&"constructor"in n)return!1}if(0===i)return!1;i<0&&(i=-1),a=a||[];for(var d=(o=o||[]).length;d--;)if(o[d]===e)return a[d]===n;if(o.push(e),a.push(n),l){if((d=e.length)!==n.length)return!1;for(;d--;)if(!t(e[d],n[d],i-1,o,a))return!1}else{var A=Object.keys(e),f=void 0;if(d=A.length,Object.keys(n).length!==d)return!1;for(;d--;)if(!qe(n,f=A[d])||!t(e[f],n[f],i-1,o,a))return!1}return o.pop(),a.pop(),!0}(t,e,n)}function Xe(t){return Ie(t)?t.peek():T(t)||Pe(t)||E(t)||Oe(t)?S(t.entries()):t}function qe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}"object"==("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":r(__MOBX_DEVTOOLS_GLOBAL_HOOK__))&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return Nt.spyListeners.push(t),v((function(){Nt.spyListeners=Nt.spyListeners.filter((function(e){return e!==t}))}))},extras:{getDebugName:function(t,e){return(void 0!==e?Ge(t,e):Qe(t)||Pe(t)||Oe(t)?Ve(t):Ge(t)).name}},$mobx:"$mobx"})}).call(this,n(10),n(11))},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjlweCIgaGVpZ2h0PSIyNXB4IiB2aWV3Qm94PSIwIDAgMjkgMjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5hdWRpbyAoMik8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImF1ZGlvLSgyKSIgZmlsbD0iIzMzMzMzMyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI1LjQzMDUxODIsMTEuNTAwNTQ0OCBMMjUuMjgwOTU4OSwxMS41MDA1NDQ4IEwyNS4yODA5NTg5LDEwLjMxNDkyMTcgQzI1LjI4MDk1ODksNC42Mjc1MjMxOSAyMC40NDg4MzQyLDAgMTQuNTA5MDY0MiwwIEM4LjU2OTI5NDI0LDAgMy43MzcxNjk0Nyw0LjYyNzUyMzE5IDMuNzM3MTY5NDcsMTAuMzE0OTIxNyBMMy43MzcxNjk0NywxMS41MDA1NDQ4IEwzLjU2NzY2ODk0LDExLjUwMDU0NDggQzEuNjAwNzM3NjQsMTEuNTAwNTQ0OCAwLDEzLjAzMjg3MyAwLDE0LjkxNzI5NTMgTDAsMTcuODQ5OTE2MiBDMCwxOS43MzQzMzg1IDEuNjAwNzM3NjQsMjEuMjY2NjY2NyAzLjU2NzY2ODk0LDIxLjI2NjY2NjcgTDUuMzM2MDk0MjcsMjEuMjY2NjY2NyBDNi4xNzkwNjQ4MiwyMS4yNjY2NjY3IDYuODYyNTA1NDcsMjAuNjExODc5MyA2Ljg2MjUwNTQ3LDE5LjgwNTI5NjMgTDYuODYyNTA1NDcsMTIuOTYxOTE1MiBDNi44NjI1MDU0NywxMi4xNTQ0MzQgNi4xNzkwNjQ4MiwxMS41MDA1NDQ4IDUuMzM2MDk0MjcsMTEuNTAwNTQ0OCBMNS4yNjM1ODA2NywxMS41MDA1NDQ4IEw1LjI2MzU4MDY3LDEwLjMxNDkyMTcgQzUuMjYzNTgwNjcsNS40MzMyMDgwNCA5LjQxMTM1ODM4LDEuNDYyMjY4NTkgMTQuNTA5MDY0MiwxLjQ2MjI2ODU5IEMxOS42MDY3NywxLjQ2MjI2ODU5IDIzLjc1NDU0NzcsNS40MzQxMDYyNCAyMy43NTQ1NDc3LDEwLjMxNDkyMTcgTDIzLjc1NDU0NzcsMTEuNTAwNTQ0OCBMMjMuNjYyOTk5MywxMS41MDA1NDQ4IEMyMi44MjAwMjg4LDExLjUwMDU0NDggMjIuMTM2NTg4MSwxMi4xNTUzMzIyIDIyLjEzNjU4ODEsMTIuOTYxOTE1MiBMMjIuMTM2NTg4MSwxOS44MDQzOTgxIEMyMi4xMzY1ODgxLDIwLjYxMTg3OTMgMjIuODIwMDI4OCwyMS4yNjU3Njg1IDIzLjY2Mjk5OTMsMjEuMjY1NzY4NSBMMjUuNDMxNDI0NiwyMS4yNjU3Njg1IEMyNy4zOTkyNjI0LDIxLjI2NTc2ODUgMjksMTkuNzMzNDQwMyAyOSwxNy44NDkwMTggTDI5LDE0LjkxNjM5NzEgQzI4Ljk5OTA5MzYsMTMuMDMyODczIDI3LjM5ODM1NTksMTEuNTAwNTQ0OCAyNS40MzA1MTgyLDExLjUwMDU0NDggWiBNNS4zMzcwMDA2OSwxMi45NjE5MTUyIEw1LjMzNzAwMDY5LDE5LjgwNDM5ODEgTDMuNTY3NjY4OTQsMTkuODA0Mzk4MSBDMi40NDQ2MTQ2MiwxOS44MDQzOTgxIDEuNTI2NDExMiwxOC45MjQxNjI3IDEuNTI2NDExMiwxNy44NDkwMTggTDEuNTI2NDExMiwxNC45MTYzOTcxIEMxLjUyNjQxMTIsMTMuODQxMjUyNCAyLjQ0NDYxNDYyLDEyLjk2MTAxNyAzLjU2NzY2ODk0LDEyLjk2MTAxNyBMNS4zMzcwMDA2OSwxMi45NjEwMTcgTDUuMzM3MDAwNjksMTIuOTYxOTE1MiBaIE0yNy40NzI2ODI0LDE3Ljg0OTAxOCBDMjcuNDcyNjgyNCwxOC45MjQxNjI3IDI2LjU1NDQ3OSwxOS44MDQzOTgxIDI1LjQzMDUxODIsMTkuODA0Mzk4MSBMMjMuNjYyMDkyOSwxOS44MDQzOTgxIEwyMy42NjIwOTI5LDEyLjk2MTkxNTIgTDI1LjQzMDUxODIsMTIuOTYxOTE1MiBDMjYuNTUzNTcyNSwxMi45NjE5MTUyIDI3LjQ3MjY4MjQsMTMuODQxMjUyNCAyNy40NzI2ODI0LDE0LjkxNzI5NTMgTDI3LjQ3MjY4MjQsMTcuODQ5MDE4IEwyNy40NzI2ODI0LDE3Ljg0OTAxOCBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNi41OTYwNTI2LDI0LjE2NjY2NjcgQzE2LjIyNDkwODgsMjQuMTY3MjA3MSAxNS45MTM3MTA1LDIzLjg5MDA3ODIgMTUuODc2MTQzOSwyMy41MjU1NzE1IEwxNC45NTk3MzYyLDE0LjYxMjg4MTYgTDE0LjAyNjU4NjUsMTkuODQ1MTUwOCBDMTMuOTcyMTM4OSwyMC4xNTk2OTMzIDEzLjcxMjY5MjMsMjAuNDAwMjY4NyAxMy4zOTEyODU2LDIwLjQzNDI0MjIgQzEzLjA2OTg3ODksMjAuNDY4MjE1NyAxMi43NjQ3MTc4LDIwLjI4NzMyMDggMTIuNjQ0MDQ0NiwxOS45OTEyODkgTDExLjIwNTk4OTYsMTYuNTIyMjQ2NyBMMTAuNzU2NTk3NCwxOC40Nzg1ODQ3IEMxMC42ODE2MzQ2LDE4LjgwMzY4NzQgMTAuMzg4NTMzMywxOS4wMzQxNTI0IDEwLjA1MDc4NzMsMTkuMDMzNTYxOSBMOC40NTY3NjY2NywxOS4wMzM1NjE5IEM4LjI2NTEzMzg3LDE5LjAzMzc5MjcgOC4wODEyNTY5OCwxOC45NTg4NjM3IDcuOTQ1NTg2ODgsMTguODI1MjU4MyBDNy44MDk5MTY3OCwxOC42OTE2NTI5IDcuNzMzNTY2ODksMTguNTEwMzE1NSA3LjczMzMzMzMzLDE4LjMyMTEzODIgQzcuNzMzNTY2ODksMTguMTMxOTYxIDcuODA5OTE2NzgsMTcuOTUwNjIzNSA3Ljk0NTU4Njg4LDE3LjgxNzAxODEgQzguMDgxMjU2OTgsMTcuNjgzNDEyNyA4LjI2NTEzMzg3LDE3LjYwODQ4MzcgOC40NTY3NjY2NywxNy42MDg3MTQ1IEw5LjQ3Mjc0NTUyLDE3LjYwODcxNDUgTDEwLjMwMTkxODIsMTMuOTk5NjIzMSBDMTAuMzczNjM5LDEzLjY5NzE5MzQgMTAuNjM0NzI2MywxMy40NzQ5MjA5IDEwLjk0ODI5NiwxMy40NDkzMzk4IEMxMS4yNjE4NjU3LDEzLjQyMzc1ODYgMTEuNTU2MzcyNCwxMy42MDA3MDU1IDExLjY3NzQxMDgsMTMuODg3NDA5OSBMMTMuMDM1MjgwMiwxNy4xNjMzNDEgTDE0LjQzOTg1MTEsOS4yODkyNzYwNCBDMTQuNTA0NjU5OSw4LjkzOTM5MjYzIDE0LjgxOTAyODksOC42ODg5NzQ2NiAxNS4xNzkxNDU0LDguNzAwMzczOTMgQzE1LjUzOTgzMTMsOC43MTI4NjAzMiAxNS44MzU4Njk5LDguOTg2MTY3MTUgMTUuODcyNjE5Miw5LjM0MDU5ODM5IEwxNi45NzE0MjcyLDIwLjAxOTk5NDcgTDE3LjU3ODU0NzMsMTguMTg0NTY4NiBDMTcuNjc1ODg3OCwxNy44OTA4ODIgMTcuOTUzNzE2MiwxNy42OTI0Njc2IDE4LjI2NjczNDIsMTcuNjkzMDkxOSBMMTkuNTQxNzc0NCwxNy42OTMwOTE5IEMxOS44MDgxMTEzLDE3LjY4MDA5NTEgMjAuMDYwMDQ5LDE3LjgxMjk2ODMgMjAuMTk3MTYzOCwxOC4wMzg3NDc0IEMyMC4zMzQyNzg3LDE4LjI2NDUyNjYgMjAuMzM0Mjc4NywxOC41NDY1MDQ3IDIwLjE5NzE2MzgsMTguNzcyMjgzOCBDMjAuMDYwMDQ5LDE4Ljk5ODA2MyAxOS44MDgxMTEzLDE5LjEzMDkzNjEgMTkuNTQxNzc0NCwxOS4xMTc5MzkzIEwxOC43OTE5MDYyLDE5LjExNzkzOTMgTDE3LjI4NTEyMDYsMjMuNjczNDQ5NSBDMTcuMTg3MTIzLDIzLjk2NzI4NDUgMTYuOTA5NDE4MywyNC4xNjYwNTgxIDE2LjU5NjA1MjYsMjQuMTY2NjY2NyIgaWQ9Iui3r+W+hCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,n){t.exports=e},function(t,e,n){var r=n(7),i=n(8);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzZweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzYgMzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSLpobXpnaIxIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i57yW57uELTIiPgogICAgICAgICAgICA8ZyBpZD0i5aOw6Z+zIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1LjkzMDg4NTEsMC42MTgyMDU2MjUgTDcuMTgxNzAzNjYsNi40NDQwMDc4NCBMMy42MDM0NDU2Miw2LjQ0NDAwNzg0IEMxLjYyODMzMTAzLDYuNDQ0MDA3ODQgMC4wMjUxODc1OTM3LDguMjc3NjY4NjMgMC4wMjUxODc1OTM3LDEwLjUzMDQ1MTkgTDAuMDI1MTg3NTkzNywyMS40MzI4NzQ5IEMwLjAyNTE4NzU5MzcsMjMuNjkwODk3MiAxLjYyODMzMSwyNS41MTkzMTg5IDMuNjAzNDQ1NjIsMjUuNTE5MzE4OSBMNy4xODE3MDM2NiwyNS41MTkzMTg5IEwxNS45MjU2NDYsMzEuMzUwMzYwMiBDMTcuMDI1ODQyNSwzMi4wNzg1ODU1IDE4LjQzNTE0MTgsMzIuMTQ2NjkyOSAxOS41OTgyMDY2LDMxLjUyMzI0ODIgQzIwLjc2MTI3MTQsMzAuODk5ODAzNSAyMS40ODQyNTc3LDI5LjY4OTU4NzQgMjEuNDg5NDk2NywyOC4zNzQ1OTA3IEwyMS40ODk0OTY3LDMuNTkzOTc1MTMgQzIxLjQ4OTQ5NjcsMi4yNzM3MzkzOCAyMC43NjEyNzE0LDEuMDYzNTIzMjUgMTkuNTk4MjA2NiwwLjQ0NTMxNzYyNSBDMTguNDM1MTQxNywtMC4xODMzNjYwNjIgMTcuMDI1ODQyNSwtMC4xMTUyNTg2NTYgMTUuOTMwODg1MSwwLjYxODIwNTYyNSBMMTUuOTMwODg1MSwwLjYxODIwNTYyNSBaIE03LjE4MTcwMzY2LDIzLjEzNTU1OTkgTDMuNjAzNDQ1NjIsMjMuMTM1NTU5OSBDMy4wMjE5MTMyMiwyMy4xMzU1NTk5IDIuNDA4OTQ2NTksMjIuNDM4NzY4OCAyLjQwODk0NjU5LDIxLjQzMjg3NDkgTDIuNDA4OTQ2NTksMTAuNTM1NjkwOSBDMi40MDg5NDY1OSw5LjUyOTc5NyAzLjAxNjY3NDE2LDguODMzMDA1OTEgMy42MDM0NDU2Miw4LjgzMzAwNTkxIEw3LjE4MTcwMzY2LDguODMzMDA1OTEgTDcuMTgxNzAzNjYsMjMuMTM1NTU5OSBaIE0xOS4xMDU3Mzc3LDI4LjM3NDU5MDcgQzE5LjEwNTczNzcsMjguODE0NjY5MyAxOC44NjQ3NDIzLDI5LjIxODA3NDcgMTguNDc3MDU0LDI5LjQyMjM5NjggQzE4LjA4OTM2NTcsMjkuNjMxOTU4MSAxNy42MTc4NTI5LDI5LjYwNTc2MjkgMTcuMjU2MzU5OCwyOS4zNjQ3Njc1IEw5LjU2NTQ2MjY2LDI0LjI0NjIzNDQgTDkuNTY1NDYyNjYsNy43MjIzMzEzOCBMMTcuMjUxMTIwOCwyLjU5ODU1OTI4IEMxNy42MTc4NTMsMi4zNTc1NjM4OCAxOC4wODkzNjU4LDIuMzMxMzY4NzIgMTguNDcxODE1LDIuNTQwOTI5OTQgQzE4Ljg1OTUwMzIsMi43NTA0OTExNiAxOS4xMDA0OTg3LDMuMTUzODk2NTMgMTkuMTAwNDk4NywzLjU5Mzk3NTEzIEwxOS4xMDA0OTg3LDI4LjM3NDU5MDcgTDE5LjEwNTczNzcsMjguMzc0NTkwNyBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUuMDAwMDAwLCAxMi4wMDAwMDApIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01LjY4NDM0MTg5ZS0xNCwwIEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuNTA2NzA2MmUtMTQsLTEuNzc2MzU2ODRlLTE1IEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC40NjU4MDksIDQuNDY1ODA5KSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC00LjQ2NTgwOSwgLTQuNDY1ODA5KSAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg=="},function(t,e,n){var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],u=e.base?s[0]+e.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var h=a(c),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:c,updater:p(d,e),references:1}),r.push(c)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,c=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function d(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var A=null,f=0;function p(t,e){var n,r,i;if(e.singleton){var o=f++;n=A||(A=u(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=u(e),r=d.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(t,e),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(t,e,n){(e=n(9)(!1)).push([t.i,".media-mute-box {\n  position: absolute;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.media-mute-box-inner {\n  width: 88px;\n  cursor: pointer;\n  height: 64px;\n  border-radius: 8px;\n  background-color: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n.media-mute-box-inner span {\n  color: white;\n}\n.media-mute-box-inner img {\n  width: 24px;\n}\n.plugin-audio-box {\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  transform-origin: top left;\n}\n.plugin-audio-box-nav {\n  width: 100%;\n  height: 32px;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  background-image: linear-gradient(180deg, #E0E1E0 0%, #CDCDCC 100%);\n  display: flex;\n  flex-direction: row;\n  flex-shrink: 0;\n  justify-content: space-between;\n  align-items: center;\n  cursor: default;\n}\n.plugin-audio-box-nav span {\n  margin-left: 6px;\n  font-size: 12px;\n  font-weight: bold;\n}\n.plugin-audio-box-body {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #F2F4F5;\n}\n.white-plugin-audio-box {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.white-plugin-audio {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n}\n.plugin-audio-box-delete {\n  width: 22px;\n  height: 22px;\n  background-color: #FF756E;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 8px;\n  cursor: pointer;\n  opacity: 0.6;\n}\n.plugin-audio-box-delete img {\n  width: 14px;\n}\n.plugin-audio-box-delete:hover {\n  opacity: 1;\n}\n",""]),t.exports=e},function(t,e,n){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r,i,o=t[1]||"",a=t[3];if(!a)return o;if(e&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,h=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&A())}function A(){if(!c){var t=s(d);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||c||s(A)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){n.r(e);var r,i,o=n(0),a=n(3),s=(n(4),n(1)),u=n(5),l=n(2),c=n(6),h=function(){function t(t){this.player=t,this.isFirstSync=!0}return t.prototype.syncProgress=function(t){this.isFirstSync?(this.isFirstSync=!1,this.player.currentTime=t):Math.abs(this.player.currentTime-t)>=2&&(this.player.currentTime=t)},t}(),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),A=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},f=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},p=function(t){return new Promise((function(e){return setTimeout(e,t)}))};!function(t){t.host="host",t.guest="guest",t.listener="listener"}(i||(i={}));var g,v,m=function(t){function e(e){var n=t.call(this,e)||this;return n.selfUserInf=null,n.playerState=!1,n.handleStartCondition=function(){return A(n,void 0,void 0,(function(){var t,e=this;return f(this,(function(n){switch(n.label){case 0:return t=this.props.plugin,this.setMyIdentityRoom(),[4,this.handleNativePlayerState(t.attributes.play)];case 1:return n.sent(),this.playerState=t.attributes.play,this.player.current&&(this.handleFirstSeek(),this.player.current.currentTime=t.attributes.currentTime,this.player.current.addEventListener("play",(function(){e.handleRemotePlayState(!0)})),this.player.current.addEventListener("pause",(function(){e.handleRemotePlayState(!1)})),this.player.current.addEventListener("seeked",(function(){if(e.player.current){var n=t.attributes.currentTime;e.handleRemoteSeekData(n)}})),this.player.current.addEventListener("volumechange",(function(t){e.handleRemoteVolumeChange(t.target.volume),e.handleRemoteMuteState(t.target.muted)}))),[2]}}))}))},n.isHost=function(){return!(!n.selfUserInf||n.selfUserInf.identity!==i.host)},n.setMyIdentityRoom=function(){var t=n.props.plugin;t.context&&t.context.identity&&(n.selfUserInf={identity:t.context.identity})},n.handleNativePlayerState=function(t){return A(n,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];n.label=1;case 1:return n.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return n.sent(),[3,6];case 3:return""+(e=n.sent()).name!="NotAllowedError"&&""+e.name!="AbortError"?[3,5]:(this.setState({selfMute:!0}),[4,this.player.current.play()]);case 4:n.sent(),n.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),n.label=8;case 8:return[2]}}))}))},n.handleRemoteSeekData=function(t){var e=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({seek:t})},n.handleRemoteMuteState=function(t){var e=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({mute:t})},n.handleRemoteVolumeChange=function(t){var e=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({volume:t})},n.handleRemotePlayState=function(t){var e=n.props.plugin;n.playerState=t;var r=e.attributes.currentTime;n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({play:t,seek:r,seekTime:Date.now()/1e3})},n.lastSyncProgressTimestamp=0,n.onTimeUpdate=function(t){var e=n.props.plugin,r=Date.now();r-n.lastSyncProgressTimestamp>1e3&&(n.lastSyncProgressTimestamp=r,n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({currentTime:t,play:n.playerState}))},n.handleSeekReaction=function(t,e){n.isHost()||n.player.current&&void 0!==e&&(n.player.current.currentTime=t+Date.now()/1e3-e)},n.handleRemove=function(){return A(n,void 0,void 0,(function(){var t;return f(this,(function(e){switch(e.label){case 0:return t=this.props.plugin,this.handleRemotePlayState(!1),[4,p(300)];case 1:return e.sent(),t.remove(),[2]}}))}))},n.timeUpdate=function(){if(n.player.current){var t=n.player.current.currentTime;n.onTimeUpdate(t)}},n.detectAudioClickEnable=function(){var t=n.props.plugin;return t.context&&t.context.identity?t.context.identity!==i.host?"none":"auto":"none"},n.renderMuteBox=function(){var t=n.props.plugin;return t.context&&t.context.identity&&t.context.identity!==i.host&&n.state.selfMute?o.createElement("div",{className:"media-mute-box"},o.createElement("div",{onClick:function(){n.setState({selfMute:!1})},onTouchStart:function(){n.setState({selfMute:!1})},style:{pointerEvents:"auto"},className:"media-mute-box-inner"},o.createElement("img",{src:u,alt:"mute_icon"}),o.createElement("span",null,"unmute"))):null},n.renderDeleteBtn=function(){var t=n.props.plugin;return t.context&&t.context.identity&&t.context.identity===i.host?o.createElement("div",{style:{pointerEvents:"auto"},className:"plugin-audio-box-delete",onClick:n.handleRemove},o.createElement("img",{src:c,alt:"delete_icon"})):null},n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:o.createElement("div",{className:"plugin-audio-box-nav"},o.createElement("div",null,o.createElement("img",{style:{width:20,marginLeft:8},src:l,alt:"audio_plugin"}),o.createElement("span",null,"Audio Player")),n.renderDeleteBtn())},n.handleFirstSeek=function(t){if(!t){var e,r=n.props.plugin,i=Date.now()/1e3;e=r.attributes.seekTime?r.attributes.seek+i-r.attributes.seekTime:r.attributes.seek,n.syncNode.syncProgress(e)}},n.player=o.createRef(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionSeekTimeDisposer=n.startSeekTimeReaction(),n.reactionSyncDisposer=n.startSyncReaction(),n.state={play:!1,seek:0,selfMute:!1,currentTime:0,mute:!1,volume:1,isEnd:!1},n}return d(e,t),e.prototype.componentDidMount=function(){return A(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.syncNode=new h(this.player.current),[4,this.handleStartCondition()];case 1:return t.sent(),[2]}}))}))},e.prototype.startPlayReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.play}),(function(e){return A(t,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.isHost()?[3,2]:[4,this.handleNativePlayerState(e)];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.startSeekTimeReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.seekTime}),(function(n){t.handleSeekReaction(e.attributes.seek,n)}))},e.prototype.startSeekReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.seek}),(function(n){t.handleSeekReaction(n,e.attributes.seekTime)}))},e.prototype.startSyncReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.currentTime}),(function(e){return A(t,void 0,void 0,(function(){return f(this,(function(t){return this.isHost()||this.player.current&&Math.abs(e-this.player.current.currentTime)>2&&(this.player.current.currentTime=e),[2]}))}))}))},e.prototype.startVolumeReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.volume}),(function(e){t.isHost()||t.player.current&&(t.player.current.volume=e)}))},e.prototype.startMuteTimeReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.mute}),(function(e){t.isHost()||t.setState({mute:e})}))},e.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionSyncDisposer(),this.player.current&&this.player.current.pause()},e.prototype.render=function(){var t=this,e=this.props,n=e.size,r=e.plugin,a=e.scale,s=0===a?1:a,u=navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return o.createElement("div",{className:"plugin-audio-box",style:{width:n.width/s,height:n.height/s,transform:"scale("+s+")"}},this.renderNavigation(),o.createElement("div",{className:"plugin-audio-box-body"},this.renderMuteBox(),o.createElement("div",{className:"white-plugin-audio-box"},o.createElement("audio",{className:"white-plugin-audio",src:r.attributes.pluginAudioUrl,ref:this.player,muted:this.state.mute?this.state.mute:this.state.selfMute,style:{width:"100%",height:54,pointerEvents:this.detectAudioClickEnable(),outline:"none"},onLoadedMetadataCapture:function(){return A(t,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return u?[4,p(300)]:[3,2];case 1:t.sent(),this.handleFirstSeek(this.state.isEnd),t.label=2;case 2:return[2]}}))}))},onEnded:function(){return A(t,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.player.current?this.selfUserInf?this.selfUserInf.identity!==i.host?[3,2]:(r.putAttributes({seek:0,seekTime:void 0,currentTime:0}),[4,p(500)]):[3,5]:[3,7];case 1:return t.sent(),this.player.current.load(),[3,4];case 2:return[4,p(1e3)];case 3:t.sent(),this.player.current.load(),t.label=4;case 4:return[3,7];case 5:return[4,p(1e3)];case 6:t.sent(),this.player.current.load(),t.label=7;case 7:return this.setState({isEnd:!0}),[2]}}))}))},controls:!0,controlsList:"nodownload nofullscreen",onTimeUpdate:this.timeUpdate,preload:"auto"}))))},e}(o.Component),y=(v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},w=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(t){t.host="host",t.guest="guest",t.listener="listener"}(g||(g={}));var x=function(t){function e(e){var n=t.call(this,e)||this;return n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:o.createElement("div",{className:"plugin-audio-box-nav"},o.createElement("div",null,o.createElement("img",{style:{width:20,marginLeft:8},src:l,alt:"audio_plugin"}),o.createElement("span",null,"Audio Player")))},n.player=o.createRef(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionReplayPlayingDisposer=n.startReplayPlayingReaction(),n.state={mute:!1},n}return y(e,t),e.prototype.componentDidMount=function(){this.syncNode=new h(this.player.current)},e.prototype.startPlayReaction=function(){var t=this;return Object(s.a)((function(){return t.props.plugin.attributes.play}),(function(e){return b(t,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:if(!e)return[3,7];if(!this.player.current)return[3,6];t.label=1;case 1:return t.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return t.sent(),[3,6];case 3:return""+t.sent().name!="NotAllowedError"?[3,5]:[4,this.player.current.play()];case 4:t.sent(),t.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),t.label=8;case 8:return[2]}}))}))}))},e.prototype.startSeekReaction=function(){var t=this;return Object(s.a)((function(){return t.props.plugin.playerTimestamp}),(function(e){var n=t.props.plugin.attributes,r=n.seek,i=n.seekTime;if(void 0!==i){var o=r+(t.props.player.beginTimestamp+e)/1e3-i;t.syncNode.syncProgress(o)}}))},e.prototype.startReplayPlayingReaction=function(){var t=this;return Object(s.a)((function(){return t.props.plugin.isPlaying}),(function(e){return b(t,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:if(!e)return[3,7];if(!this.player.current)return[3,6];t.label=1;case 1:return t.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return t.sent(),[3,6];case 3:return""+t.sent().name!="NotAllowedError"?[3,5]:[4,this.player.current.play()];case 4:t.sent(),t.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),t.label=8;case 8:return[2]}}))}))}))},e.prototype.startVolumeReaction=function(){var t=this;return Object(s.a)((function(){return t.props.plugin.attributes.volume}),(function(e){t.player.current&&(t.player.current.volume=e)}))},e.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionReplayPlayingDisposer()},e.prototype.startMuteTimeReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.mute}),(function(e){t.setState({mute:e})}))},e.prototype.render=function(){var t=this.props,e=t.size,n=t.plugin,r=t.scale,i=0===r?1:r;return o.createElement("div",{className:"plugin-audio-box",style:{width:e.width/i,height:e.height/i,transform:"scale("+i+")"}},this.renderNavigation(),o.createElement("div",{className:"plugin-audio-box-body"},o.createElement("div",{className:"white-plugin-audio-box"},o.createElement("audio",{"webkit-playsinline":"true",playsInline:!0,className:"white-plugin-audio",src:n.attributes.pluginAudioUrl,ref:this.player,muted:this.state.mute,style:{width:"100%",height:"100%",pointerEvents:"none",outline:"none"},controls:!0,controlsList:"nodownload nofullscreen",preload:"auto"}))))},e}(o.Component);n.d(e,"audioPlugin",(function(){return M}));var _,T=(_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),E=function(){return(E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},S=function(t){function e(e){return t.call(this,e)||this}return T(e,t),e.prototype.render=function(){var t=this;return o.createElement(a.CNode,{context:this.props.cnode},o.createElement(a.RoomConsumer,null,(function(e){return e?o.createElement(m,E({},t.props)):null})),o.createElement(a.PlayerConsumer,null,(function(e){return e?o.createElement(x,E({},t.props,{player:e})):null})))},e}(o.Component),M=Object.freeze({kind:"audio",render:S,defaultAttributes:{play:!1,seek:0,mute:!1,volume:1,currentTime:0},hitTest:function(t){var e=t.component.context.getMemberState();return!(e&&"eraser"===e.currentApplianceName)}})}])},"object"==r(e)&&"object"==r(t)?t.exports=i(n(17328),n(71895)):n.amdD([,],i)},25275:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var i;t=n.nmd(t),window,i=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==r(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjlweCIgaGVpZ2h0PSIyNXB4IiB2aWV3Qm94PSIwIDAgMjkgMjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5hdWRpbyAoMik8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImF1ZGlvLSgyKSIgZmlsbD0iIzMzMzMzMyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI1LjQzMDUxODIsMTEuNTAwNTQ0OCBMMjUuMjgwOTU4OSwxMS41MDA1NDQ4IEwyNS4yODA5NTg5LDEwLjMxNDkyMTcgQzI1LjI4MDk1ODksNC42Mjc1MjMxOSAyMC40NDg4MzQyLDAgMTQuNTA5MDY0MiwwIEM4LjU2OTI5NDI0LDAgMy43MzcxNjk0Nyw0LjYyNzUyMzE5IDMuNzM3MTY5NDcsMTAuMzE0OTIxNyBMMy43MzcxNjk0NywxMS41MDA1NDQ4IEwzLjU2NzY2ODk0LDExLjUwMDU0NDggQzEuNjAwNzM3NjQsMTEuNTAwNTQ0OCAwLDEzLjAzMjg3MyAwLDE0LjkxNzI5NTMgTDAsMTcuODQ5OTE2MiBDMCwxOS43MzQzMzg1IDEuNjAwNzM3NjQsMjEuMjY2NjY2NyAzLjU2NzY2ODk0LDIxLjI2NjY2NjcgTDUuMzM2MDk0MjcsMjEuMjY2NjY2NyBDNi4xNzkwNjQ4MiwyMS4yNjY2NjY3IDYuODYyNTA1NDcsMjAuNjExODc5MyA2Ljg2MjUwNTQ3LDE5LjgwNTI5NjMgTDYuODYyNTA1NDcsMTIuOTYxOTE1MiBDNi44NjI1MDU0NywxMi4xNTQ0MzQgNi4xNzkwNjQ4MiwxMS41MDA1NDQ4IDUuMzM2MDk0MjcsMTEuNTAwNTQ0OCBMNS4yNjM1ODA2NywxMS41MDA1NDQ4IEw1LjI2MzU4MDY3LDEwLjMxNDkyMTcgQzUuMjYzNTgwNjcsNS40MzMyMDgwNCA5LjQxMTM1ODM4LDEuNDYyMjY4NTkgMTQuNTA5MDY0MiwxLjQ2MjI2ODU5IEMxOS42MDY3NywxLjQ2MjI2ODU5IDIzLjc1NDU0NzcsNS40MzQxMDYyNCAyMy43NTQ1NDc3LDEwLjMxNDkyMTcgTDIzLjc1NDU0NzcsMTEuNTAwNTQ0OCBMMjMuNjYyOTk5MywxMS41MDA1NDQ4IEMyMi44MjAwMjg4LDExLjUwMDU0NDggMjIuMTM2NTg4MSwxMi4xNTUzMzIyIDIyLjEzNjU4ODEsMTIuOTYxOTE1MiBMMjIuMTM2NTg4MSwxOS44MDQzOTgxIEMyMi4xMzY1ODgxLDIwLjYxMTg3OTMgMjIuODIwMDI4OCwyMS4yNjU3Njg1IDIzLjY2Mjk5OTMsMjEuMjY1NzY4NSBMMjUuNDMxNDI0NiwyMS4yNjU3Njg1IEMyNy4zOTkyNjI0LDIxLjI2NTc2ODUgMjksMTkuNzMzNDQwMyAyOSwxNy44NDkwMTggTDI5LDE0LjkxNjM5NzEgQzI4Ljk5OTA5MzYsMTMuMDMyODczIDI3LjM5ODM1NTksMTEuNTAwNTQ0OCAyNS40MzA1MTgyLDExLjUwMDU0NDggWiBNNS4zMzcwMDA2OSwxMi45NjE5MTUyIEw1LjMzNzAwMDY5LDE5LjgwNDM5ODEgTDMuNTY3NjY4OTQsMTkuODA0Mzk4MSBDMi40NDQ2MTQ2MiwxOS44MDQzOTgxIDEuNTI2NDExMiwxOC45MjQxNjI3IDEuNTI2NDExMiwxNy44NDkwMTggTDEuNTI2NDExMiwxNC45MTYzOTcxIEMxLjUyNjQxMTIsMTMuODQxMjUyNCAyLjQ0NDYxNDYyLDEyLjk2MTAxNyAzLjU2NzY2ODk0LDEyLjk2MTAxNyBMNS4zMzcwMDA2OSwxMi45NjEwMTcgTDUuMzM3MDAwNjksMTIuOTYxOTE1MiBaIE0yNy40NzI2ODI0LDE3Ljg0OTAxOCBDMjcuNDcyNjgyNCwxOC45MjQxNjI3IDI2LjU1NDQ3OSwxOS44MDQzOTgxIDI1LjQzMDUxODIsMTkuODA0Mzk4MSBMMjMuNjYyMDkyOSwxOS44MDQzOTgxIEwyMy42NjIwOTI5LDEyLjk2MTkxNTIgTDI1LjQzMDUxODIsMTIuOTYxOTE1MiBDMjYuNTUzNTcyNSwxMi45NjE5MTUyIDI3LjQ3MjY4MjQsMTMuODQxMjUyNCAyNy40NzI2ODI0LDE0LjkxNzI5NTMgTDI3LjQ3MjY4MjQsMTcuODQ5MDE4IEwyNy40NzI2ODI0LDE3Ljg0OTAxOCBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNi41OTYwNTI2LDI0LjE2NjY2NjcgQzE2LjIyNDkwODgsMjQuMTY3MjA3MSAxNS45MTM3MTA1LDIzLjg5MDA3ODIgMTUuODc2MTQzOSwyMy41MjU1NzE1IEwxNC45NTk3MzYyLDE0LjYxMjg4MTYgTDE0LjAyNjU4NjUsMTkuODQ1MTUwOCBDMTMuOTcyMTM4OSwyMC4xNTk2OTMzIDEzLjcxMjY5MjMsMjAuNDAwMjY4NyAxMy4zOTEyODU2LDIwLjQzNDI0MjIgQzEzLjA2OTg3ODksMjAuNDY4MjE1NyAxMi43NjQ3MTc4LDIwLjI4NzMyMDggMTIuNjQ0MDQ0NiwxOS45OTEyODkgTDExLjIwNTk4OTYsMTYuNTIyMjQ2NyBMMTAuNzU2NTk3NCwxOC40Nzg1ODQ3IEMxMC42ODE2MzQ2LDE4LjgwMzY4NzQgMTAuMzg4NTMzMywxOS4wMzQxNTI0IDEwLjA1MDc4NzMsMTkuMDMzNTYxOSBMOC40NTY3NjY2NywxOS4wMzM1NjE5IEM4LjI2NTEzMzg3LDE5LjAzMzc5MjcgOC4wODEyNTY5OCwxOC45NTg4NjM3IDcuOTQ1NTg2ODgsMTguODI1MjU4MyBDNy44MDk5MTY3OCwxOC42OTE2NTI5IDcuNzMzNTY2ODksMTguNTEwMzE1NSA3LjczMzMzMzMzLDE4LjMyMTEzODIgQzcuNzMzNTY2ODksMTguMTMxOTYxIDcuODA5OTE2NzgsMTcuOTUwNjIzNSA3Ljk0NTU4Njg4LDE3LjgxNzAxODEgQzguMDgxMjU2OTgsMTcuNjgzNDEyNyA4LjI2NTEzMzg3LDE3LjYwODQ4MzcgOC40NTY3NjY2NywxNy42MDg3MTQ1IEw5LjQ3Mjc0NTUyLDE3LjYwODcxNDUgTDEwLjMwMTkxODIsMTMuOTk5NjIzMSBDMTAuMzczNjM5LDEzLjY5NzE5MzQgMTAuNjM0NzI2MywxMy40NzQ5MjA5IDEwLjk0ODI5NiwxMy40NDkzMzk4IEMxMS4yNjE4NjU3LDEzLjQyMzc1ODYgMTEuNTU2MzcyNCwxMy42MDA3MDU1IDExLjY3NzQxMDgsMTMuODg3NDA5OSBMMTMuMDM1MjgwMiwxNy4xNjMzNDEgTDE0LjQzOTg1MTEsOS4yODkyNzYwNCBDMTQuNTA0NjU5OSw4LjkzOTM5MjYzIDE0LjgxOTAyODksOC42ODg5NzQ2NiAxNS4xNzkxNDU0LDguNzAwMzczOTMgQzE1LjUzOTgzMTMsOC43MTI4NjAzMiAxNS44MzU4Njk5LDguOTg2MTY3MTUgMTUuODcyNjE5Miw5LjM0MDU5ODM5IEwxNi45NzE0MjcyLDIwLjAxOTk5NDcgTDE3LjU3ODU0NzMsMTguMTg0NTY4NiBDMTcuNjc1ODg3OCwxNy44OTA4ODIgMTcuOTUzNzE2MiwxNy42OTI0Njc2IDE4LjI2NjczNDIsMTcuNjkzMDkxOSBMMTkuNTQxNzc0NCwxNy42OTMwOTE5IEMxOS44MDgxMTEzLDE3LjY4MDA5NTEgMjAuMDYwMDQ5LDE3LjgxMjk2ODMgMjAuMTk3MTYzOCwxOC4wMzg3NDc0IEMyMC4zMzQyNzg3LDE4LjI2NDUyNjYgMjAuMzM0Mjc4NywxOC41NDY1MDQ3IDIwLjE5NzE2MzgsMTguNzcyMjgzOCBDMjAuMDYwMDQ5LDE4Ljk5ODA2MyAxOS44MDgxMTEzLDE5LjEzMDkzNjEgMTkuNTQxNzc0NCwxOS4xMTc5MzkzIEwxOC43OTE5MDYyLDE5LjExNzkzOTMgTDE3LjI4NTEyMDYsMjMuNjczNDQ5NSBDMTcuMTg3MTIzLDIzLjk2NzI4NDUgMTYuOTA5NDE4MywyNC4xNjYwNTgxIDE2LjU5NjA1MjYsMjQuMTY2NjY2NyIgaWQ9Iui3r+W+hCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg=="},function(t,e,n){var r=n(5),i=n(6);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],u=e.base?s[0]+e.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var h=a(c),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:c,updater:p(d,e),references:1}),r.push(c)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,c=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function d(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var A=null,f=0;function p(t,e){var n,r,i;if(e.singleton){var o=f++;n=A||(A=u(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=u(e),r=d.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(t,e),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(t,e,n){(e=n(7)(!1)).push([t.i,".white-audio-plugin-container {\n  display: flex;\n  flex-flow: column nowrap;\n  transform-origin: top left;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n}\n.white-audio-plugin-nav {\n  height: 32px;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  background-image: linear-gradient(180deg, #e0e1e0 0%, #cdcdcc 100%);\n}\n.white-audio-plugin-nav > img {\n  width: 20px;\n  margin-left: 8px;\n}\n.white-audio-plugin-nav-title {\n  margin-left: 6px;\n  font-size: 12px;\n  font-weight: bold;\n  flex-grow: 1;\n}\n.white-audio-plugin-nav-delete {\n  width: 22px;\n  height: 22px;\n  border: 0;\n  background-color: #ff756e;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 8px;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n.white-audio-plugin-nav-delete > img {\n  width: 14px;\n}\n.white-audio-plugin-nav-delete:hover {\n  opacity: 1;\n}\n.white-audio-plugin-body {\n  flex-grow: 1;\n  background-color: #f2f4f5;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  justify-content: center;\n}\n.white-audio-plugin-body > audio {\n  flex-grow: 1;\n  outline: none;\n}\n",""]),t.exports=e},function(t,e,n){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r,i,o=t[1]||"",a=t[3];if(!a)return o;if(e&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e,n){n.r(e);var r=n(0),i=n.n(r),o=n(1),a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=(n(4),function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))});function h(t){return c(this,void 0,void 0,(function(){return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,t.play()];case 1:return e.sent(),[2,!0];case 2:return e.sent(),t.muted=!0,[4,t.play()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}var d,A=function(t){return new Promise((function(e){return window.setTimeout(e,t)}))},f=function(){function t(){this.map=new Map}return t.prototype.changed=function(t,e){return!(this.map.has(t)&&function t(e,n){return e===n||!!Array.isArray(e)&&e.every((function(e,r){return t(e,n[r])}))}(this.map.get(t),e)||(this.map.set(t,e),0))},t.prototype.clear=function(){this.map.clear()},t}(),p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},v=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.render=function(){var t=this;return i.a.createElement(o.CNode,{context:this.props.cnode},i.a.createElement(o.RoomConsumer,{children:function(e){return e&&i.a.createElement(b,g({},t.props,{room:e}))}}),i.a.createElement(o.PlayerConsumer,{children:function(e){return e&&i.a.createElement(b,g({},t.props,{player:e}))}}))},e}(r.Component),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.disposers=[],e.changedMap=new f,e.player=Object(r.createRef)(),e.timestamp=function(){return{currentTime:e.player.current.currentTime,hostTime:Date.now()}},e.removeSelf=function(){return v(e,void 0,void 0,(function(){var t;return m(this,(function(e){switch(e.label){case 0:return(t=this.props.plugin).putAttributes(g({paused:!0},this.timestamp())),[4,A(300)];case 1:return e.sent(),t.remove(),[2]}}))}))},e}return p(e,t),e.prototype.isHost=function(){return this.props.room&&this.props.plugin.context&&"host"===this.props.plugin.context.identity},e.prototype.componentDidMount=function(){this.props.room&&(this.isHost()?this.setupHost():this.setupNonHost()),this.props.player&&this.setupNonHost()},e.prototype.setupHost=function(){var t=this,e=this.props.plugin,n=this.player.current;n.currentTime=e.attributes.currentTime,n.addEventListener("play",(function(){e.putAttributes(g({paused:!1},t.timestamp()))})),n.addEventListener("pause",(function(){e.putAttributes(g({paused:!0},t.timestamp()))})),n.addEventListener("seeked",(function(){e.putAttributes(t.timestamp())})),n.addEventListener("volumechange",(function(){e.putAttributes({volume:n.volume,muted:n.muted})}));var r,i=NaN;n.addEventListener("timeupdate",(function(){i||(i=window.setTimeout((function(){i=NaN,e.putAttributes(t.timestamp())}),2e3))})),this.disposers.push((function(){return window.clearTimeout(i)})),n.addEventListener("ended",(function(){return v(t,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return e.putAttributes(g({paused:!0},this.timestamp())),[4,A(500)];case 1:return t.sent(),n.load(),[2]}}))}))})),/iPad|iPhone|iPod/.test(navigator.platform)&&(r=function(){n.currentTime=e.attributes.currentTime},window.requestAnimationFrame((function(){window.requestAnimationFrame(r)})))},e.prototype.setupNonHost=function(){var t=this,e=this.props.plugin,n=this.player.current,r=Object(o.autorun)((function(){return v(t,void 0,void 0,(function(){var t,r,i,o,a,s,u,l,c,d,A;return m(this,(function(f){switch(f.label){case 0:return t=e.isPlaying,r=e.playerTimestamp,i=e.playbackSpeed,o=e.attributes,a=o.paused,s=o.volume,u=o.muted,l=o.currentTime,c=o.hostTime,this.changedMap.changed("paused",[a,t])?!a&&t?[3,1]:(n.pause(),[3,3]):[3,3];case 1:return[4,h(n)];case 2:f.sent(),f.label=3;case 3:return this.changedMap.changed("volume",[s,u])&&(n.volume=e.attributes.volume,n.muted=e.attributes.muted),this.changedMap.changed("time",[l,c])&&c>0&&(d=Date.now(),this.props.player&&(d=this.props.player.beginTimestamp+r),A=l+(d-c)/1e3,Math.abs(n.currentTime-A)>2&&(n.currentTime=A)),this.changedMap.changed("rate",i)&&(n.playbackRate=i),[2]}}))}))}));this.disposers.push(r),this.disposers.push((function(){return t.changedMap.clear()}))},e.prototype.componentWillUnmount=function(){var t;null===(t=this.player.current)||void 0===t||t.pause(),this.disposers.forEach((function(t){return t()}))},Object.defineProperty(e.prototype,"containerStyle",{get:function(){var t=this.props,e=t.size,n=t.scale||1;return{width:e.width/n,height:e.height/n,transform:"scale("+n+")"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointerEventsStyle",{get:function(){return{pointerEvents:this.isHost()?"auto":"none"}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t=this.props,e=t.room,n=t.player,r=t.plugin;return e||n?i.a.createElement("div",{className:"white-audio-plugin-container",style:this.containerStyle},!r.attributes.isNavigationDisable&&i.a.createElement("div",{className:"white-audio-plugin-nav"},i.a.createElement("img",{src:s.a,alt:"audio_plugin"}),i.a.createElement("span",{className:"white-audio-plugin-nav-title"},"Audio Player"),i.a.createElement("span",{className:"white-audio-plugin-nav-delete",style:this.pointerEventsStyle,onClick:this.removeSelf},i.a.createElement("img",{src:l.a,alt:"delete_icon"}))),i.a.createElement("div",{className:"white-audio-plugin-body"},i.a.createElement("audio",{src:r.attributes.src,style:this.pointerEventsStyle,controls:!!e,controlsList:"nodownload nofullscreen",preload:"auto",ref:this.player}))):null},e}(r.Component);n.d(e,"audioPlugin2",(function(){return w}));var w=Object.freeze({kind:"audio2",render:y,defaultAttributes:{src:"",hostTime:0,currentTime:0,paused:!0,muted:!1,volume:1},hitTest:function(t){var e=t.component.context.getMemberState();return!("eraser"===(null==e?void 0:e.currentApplianceName))}})}])},"object"==r(e)&&"object"==r(t)?t.exports=i(n(17328),n(71895)):n.amdD([,],i)},44112:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}
/*! For license information please see index.js.LICENSE.txt */var i;t=n.nmd(t),window,i=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==r(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(e,n){e.exports=t},function(t,e,n){(function(t,i){n.d(e,"a",(function(){return ne}));var o=[];Object.freeze(o);var a={};Object.freeze(a);var s={};function u(){return"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:s}function l(){return++kt.mobxGuid}function c(t){throw h(!1,t),"X"}function h(t,e){if(!t)throw new Error("[mobx] "+(e||"An invariant failed, however the error is obfuscated because this is an production build."))}function d(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var A=function(){};function f(t){return null!==t&&"object"==r(t)}function p(t){if(null===t||"object"!=r(t))return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function g(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function v(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function m(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return f(t)&&!0===t[n]}}function y(t){return void 0!==u().Map&&t instanceof u().Map}function b(t){return t instanceof Set}function w(t){for(var e=[];;){var n=t.next();if(n.done)break;e.push(n.value)}return e}function x(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function _(t){return null===t?null:"object"==r(t)?""+t:t}function T(t,e){for(var n=t.next();!n.done;)e(n.value),n=t.next()}function E(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function S(t,e){v(t,E(),e)}function M(t){return t[E()]=I,t}function C(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function I(){return this}var N=function(){function t(t){void 0===t&&(t="Atom@"+l()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ot.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return Ft(this)},t.prototype.reportChanged=function(){Ot(),function(t){if(t.lowestObserverState!==ot.STALE){t.lowestObserverState=ot.STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===ot.UP_TO_DATE&&(r.isTracing!==at.NONE&&Ut(r,t),r.onBecomeStale()),r.dependenciesState=ot.STALE}}}(this),Rt()},t.prototype.toString=function(){return this.name},t}(),B=m("Atom",N);function k(t,e,n){void 0===e&&(e=A),void 0===n&&(n=A);var r=new N(t);return ie("onBecomeObserved",r,e,void 0),re(r,n),r}function P(t,e){return t===e}var D={identity:P,structural:function(t,e){return qe(t,e)},default:function(t,e){return function(t,e){return"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(t,e)||P(t,e)},shallow:function(t,e){return qe(t,e,1)}},L=function(t,e){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function O(t,e){function n(){this.constructor=t}L(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var R=function(){return(R=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function F(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function U(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(F(arguments[e]));return t}var j={},z={};function H(t,e){var n=e?j:z;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return Q(this),this[t]},set:function(e){Q(this),this[t]=e}})}function Q(t){if(!0!==t.__mobxDidRunLazyInitializers){var e=t.__mobxDecorators;if(e)for(var n in g(t,"__mobxDidRunLazyInitializers",!0),e){var r=e[n];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function G(t,e){return function(){var n,r=function(r,i,o,a){if(!0===a)return e(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var s=r.__mobxDecorators;g(r,"__mobxDecorators",R({},s))}return r.__mobxDecorators[i]={prop:i,propertyCreator:e,descriptor:o,decoratorTarget:r,decoratorArguments:n},H(i,t)};return V(arguments)?(n=o,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function V(t){return(2===t.length||3===t.length)&&"string"==typeof t[1]||4===t.length&&!0===t[3]}function W(t,e,n){return ue(t)?t:Array.isArray(t)?rt.array(t,{name:n}):p(t)?rt.object(t,void 0,{name:n}):y(t)?rt.map(t,{name:n}):b(t)?rt.set(t,{name:n}):t}function Y(t){return t}function X(t){h(t);var e=G(!0,(function(e,n,r,i,o){!function(t,e,n,r){var i=je(t);if(he(i)){var o=Ae(i,{object:t,name:e,type:"add",newValue:n});if(!o)return;n=o.newValue}n=(i.values[e]=new Mt(n,r,i.name+"."+e,!1)).value,Object.defineProperty(t,e,function(t){return ze[t]||(ze[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(e){this.$mobx.write(this,t,e)}})}(e)),i.keys&&i.keys.push(e),function(t,e,n,r){var i=fe(t),o=Gt(),a=i||o?{type:"add",object:e,name:n,newValue:r}:null;o&&Wt(R(R({},a),{name:t.name,key:n})),i&&ge(t,a),o&&Xt()}(i,t,e,n)}(e,n,r?r.initializer?r.initializer.call(e):r.value:void 0,t)})),n=(void 0!==i&&i.env,e);return n.enhancer=t,n}var q={deep:!0,name:void 0,defaultDecorator:void 0};function K(t){return null==t?q:"string"==typeof t?{name:t,deep:!0}:t}function Z(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?Y:W}Object.freeze(q),Object.freeze({deep:!1,name:void 0,defaultDecorator:void 0});var J=X(W),$=X((function(t,e,n){return null==t||Ve(t)||Be(t)||Le(t)||Fe(t)?t:Array.isArray(t)?rt.array(t,{name:n,deep:!1}):p(t)?rt.object(t,void 0,{name:n,deep:!1}):y(t)?rt.map(t,{name:n,deep:!1}):b(t)?rt.set(t,{name:n,deep:!1}):c(!1)})),tt=X(Y),et=X((function(t,e,n){return qe(t,e)?e:t})),nt={box:function(t,e){arguments.length>2&&it("box");var n=K(e);return new Mt(t,Z(n),n.name,!0,n.equals)},shallowBox:function(t,e){return arguments.length>2&&it("shallowBox"),rt.box(t,{name:e,deep:!1})},array:function(t,e){arguments.length>2&&it("array");var n=K(e);return new Ee(t,Z(n),n.name)},shallowArray:function(t,e){return arguments.length>2&&it("shallowArray"),rt.array(t,{name:e,deep:!1})},map:function(t,e){arguments.length>2&&it("map");var n=K(e);return new Pe(t,Z(n),n.name)},shallowMap:function(t,e){return arguments.length>2&&it("shallowMap"),rt.map(t,{name:e,deep:!1})},set:function(t,e){arguments.length>2&&it("set");var n=K(e);return new Re(t,Z(n),n.name)},object:function(t,e,n){"string"==typeof arguments[1]&&it("object");var r=K(n);return oe({},t,e,r)},shallowObject:function(t,e){return"string"==typeof arguments[1]&&it("shallowObject"),rt.object(t,{},{name:e,deep:!1})},ref:tt,shallow:$,deep:J,struct:et},rt=function t(e,n,r){if("string"==typeof arguments[1])return J.apply(null,arguments);if(ue(e))return e;var i=p(e)?t.object(e,n,r):Array.isArray(e)?t.array(e,n):y(e)?t.map(e,n):b(e)?t.set(e,n):e;if(i!==e)return i;c(!1)};function it(t){c("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(nt).forEach((function(t){return rt[t]=nt[t]}));var ot,at,st=G(!1,(function(t,e,n,r,i){var o=n.get,a=n.set,s=i[0]||{};!function(t,e,n){var r=je(t);n.name=r.name+"."+e,n.context=t,r.values[e]=new Ct(n),Object.defineProperty(t,e,function(t){return He[t]||(He[t]={configurable:kt.computedConfigurable,enumerable:!1,get:function(){return Qe(this).read(this,t)},set:function(e){Qe(this).write(this,t,e)}})}(e))}(t,e,R({get:o,set:a},s))}));st({equals:D.structural}),function(t){t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE"}(ot||(ot={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(at||(at={}));var ut=function(t){this.cause=t};function lt(t){return t instanceof ut}function ct(t){switch(t.dependenciesState){case ot.UP_TO_DATE:return!1;case ot.NOT_TRACKING:case ot.STALE:return!0;case ot.POSSIBLY_STALE:for(var e=vt(!0),n=pt(),r=t.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(It(a)){if(kt.disableErrorBoundaries)a.get();else try{a.get()}catch(t){return gt(n),mt(e),!0}if(t.dependenciesState===ot.STALE)return gt(n),mt(e),!0}}return yt(t),gt(n),mt(e),!1}}function ht(t){var e=t.observers.length>0;kt.computationDepth>0&&e&&c(!1),kt.allowStateChanges||!e&&"strict"!==kt.enforceActions||c(!1)}function dt(t,e,n){var r=vt(!0);yt(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++kt.runId;var i,o=kt.trackingDerivation;if(kt.trackingDerivation=t,!0===kt.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(t){i=new ut(t)}return kt.trackingDerivation=o,function(t){for(var e=t.observing,n=t.observing=t.newObserving,r=ot.UP_TO_DATE,i=0,o=t.unboundDepsCount,a=0;a<o;a++)0===(s=n[a]).diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState);for(n.length=i,t.newObserving=null,o=e.length;o--;)0===(s=e[o]).diffValue&&Dt(s,t),s.diffValue=0;for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,Pt(s,t))}r!==ot.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),t.observing.length,mt(r),i}function At(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)Dt(e[n],t);t.dependenciesState=ot.NOT_TRACKING}function ft(t){var e=pt(),n=t();return gt(e),n}function pt(){var t=kt.trackingDerivation;return kt.trackingDerivation=null,t}function gt(t){kt.trackingDerivation=t}function vt(t){var e=kt.allowStateReads;return kt.allowStateReads=t,e}function mt(t){kt.allowStateReads=t}function yt(t){if(t.dependenciesState!==ot.UP_TO_DATE){t.dependenciesState=ot.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=ot.UP_TO_DATE}}var bt=0,wt=1,xt=Object.getOwnPropertyDescriptor((function(){}),"name");function _t(t,e){var n=function(){return Tt(t,e,this,arguments)};return n.isMobxAction=!0,n}function Tt(t,e,n,r){var i=function(t,e,n){var r=Gt()&&!!t,i=0;if(r){i=Date.now();var o=n&&n.length||0,a=new Array(o);if(o>0)for(var s=0;s<o;s++)a[s]=n[s];Wt({type:"action",name:t,object:e,arguments:a})}var u=pt();Ot();var l={prevDerivation:u,prevAllowStateChanges:Et(!0),prevAllowStateReads:vt(!0),notifySpy:r,startTime:i,actionId:wt++,parentActionId:bt};return bt=l.actionId,l}(t,n,r);try{return e.apply(n,r)}catch(t){throw i.error=t,t}finally{!function(t){bt!==t.actionId&&c("invalid action stack. did you forget to finish an action?"),bt=t.parentActionId,void 0!==t.error&&(kt.suppressReactionErrors=!0),St(t.prevAllowStateChanges),mt(t.prevAllowStateReads),Rt(),gt(t.prevDerivation),t.notifySpy&&Xt({time:Date.now()-t.startTime}),kt.suppressReactionErrors=!1}(i)}}function Et(t){var e=kt.allowStateChanges;return kt.allowStateChanges=t,e}function St(t){kt.allowStateChanges=t}xt&&xt.configurable;var Mt=function(t){function e(e,n,r,i,o){void 0===r&&(r="ObservableValue@"+l()),void 0===i&&(i=!0),void 0===o&&(o=D.default);var a=t.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=o,a.hasUnreportedChange=!1,a.value=n(e,void 0,r),i&&Gt()&&Vt({type:"create",name:a.name,newValue:""+a.value}),a}return O(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){var e=this.value;if((t=this.prepareNewValue(t))!==kt.UNCHANGED){var n=Gt();n&&Wt({type:"update",name:this.name,newValue:t,oldValue:e}),this.setNewValue(t),n&&Xt()}},e.prototype.prepareNewValue=function(t){if(ht(this),he(this)){var e=Ae(this,{object:this,type:"update",newValue:t});if(!e)return kt.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?kt.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),fe(this)&&ge(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return de(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),pe(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return _(this.get())},e}(N);Mt.prototype[x()]=Mt.prototype.valueOf,m("ObservableValue",Mt);var Ct=function(){function t(t){this.dependenciesState=ot.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ot.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+l(),this.value=new ut(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=at.NONE,h(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+l(),t.set&&(this.setter=_t(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?D.structural:D.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){!function(t){if(t.lowestObserverState===ot.UP_TO_DATE){t.lowestObserverState=ot.POSSIBLY_STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===ot.UP_TO_DATE&&(r.dependenciesState=ot.POSSIBLY_STALE,r.isTracing!==at.NONE&&Ut(r,t),r.onBecomeStale())}}}(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){this.isComputing&&c("Cycle detected in computation "+this.name+": "+this.derivation),0!==kt.inBatch||0!==this.observers.length||this.keepAlive?(Ft(this),ct(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState!==ot.STALE){t.lowestObserverState=ot.STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===ot.POSSIBLY_STALE?r.dependenciesState=ot.STALE:r.dependenciesState===ot.UP_TO_DATE&&(t.lowestObserverState=ot.UP_TO_DATE)}}}(this)):ct(this)&&(this.warnAboutUntrackedRead(),Ot(),this.value=this.computeValue(!1),Rt());var t=this.value;if(lt(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(lt(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){h(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else h(!1,!1)},t.prototype.trackAndCompute=function(){Gt()&&Vt({object:this.scope,type:"compute",name:this.name});var t=this.value,e=this.dependenciesState===ot.NOT_TRACKING,n=this.computeValue(!0),r=e||lt(t)||lt(n)||!this.equals(t,n);return r&&(this.value=n),r},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,kt.computationDepth++,t)e=dt(this,this.derivation,this.scope);else if(!0===kt.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new ut(t)}return kt.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(At(this),this.value=void 0)},t.prototype.observe=function(t,e){var n=this,r=!0,i=void 0;return function(t,e){void 0===e&&(e=a);var n,r=e&&e.name||t.name||"Autorun@"+l();if(e.scheduler||e.delay){var i=ee(e),o=!1;n=new jt(r,(function(){o||(o=!0,i((function(){o=!1,n.isDisposed||n.track(s)})))}),e.onError,e.requiresObservable)}else n=new jt(r,(function(){this.track(s)}),e.onError,e.requiresObservable);function s(){t(n)}return n.schedule(),n.getDisposer()}((function(){var o=n.get();if(!r||e){var a=pt();t({type:"update",object:n,newValue:o,oldValue:i}),gt(a)}r=!1,i=o}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return _(this.get())},t}();Ct.prototype[x()]=Ct.prototype.valueOf;var It=m("ComputedValue",Ct),Nt=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Bt=!0,kt=function(){var t=u();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(Bt=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Nt).version&&(Bt=!1),Bt?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Nt):(setTimeout((function(){c("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Nt)}();function Pt(t,e){var n=t.observers.length;n&&(t.observersIndexes[e.__mapid]=n),t.observers[n]=e,t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function Dt(t,e){if(1===t.observers.length)t.observers.length=0,Lt(t);else{var n=t.observers,r=t.observersIndexes,i=n.pop();if(i!==e){var o=r[e.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[e.__mapid]}}function Lt(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,kt.pendingUnobservations.push(t))}function Ot(){kt.inBatch++}function Rt(){if(0==--kt.inBatch){zt();for(var t=kt.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof Ct&&n.suspend())}kt.pendingUnobservations=[]}}function Ft(t){var e=kt.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.length&&kt.inBatch>0&&Lt(t),!1)}function Ut(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===at.BREAK){var n=[];!function t(e,n,r){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return t(e,n,r+1)})))}((r=t,ae(We(r,void 0))),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof Ct?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r}var jt=function(){function t(t,e,n,r){void 0===t&&(t="Reaction@"+l()),void 0===r&&(r=!1),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=ot.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+l(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=at.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,kt.pendingReactions.push(this),zt())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(Ot(),this._isScheduled=!1,ct(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Gt()&&Vt({name:this.name,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation(t)}}Rt()}},t.prototype.track=function(t){Ot();var e,n=Gt();n&&(e=Date.now(),Wt({name:this.name,type:"reaction"})),this._isRunning=!0;var r=dt(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&At(this),lt(r)&&this.reportExceptionInDerivation(r.cause),n&&Xt({time:Date.now()-e}),Rt()},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(kt.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";kt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,t),Gt()&&Vt({type:"error",name:this.name,message:n,error:""+t}),kt.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ot(),At(this),Rt()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"==typeof t[t.length-1]&&(n=t.pop());var r=le(t);if(!r)return c(!1);r.isTracing===at.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?at.BREAK:at.LOG}(this,t)},t}();function zt(){kt.inBatch>0||kt.isRunningReactions||function(t){t()}(Ht)}function Ht(){kt.isRunningReactions=!0;for(var t=kt.pendingReactions,e=0;t.length>0;){100==++e&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}kt.isRunningReactions=!1}var Qt=m("Reaction",jt);function Gt(){return!!kt.spyListeners.length}function Vt(t){if(kt.spyListeners.length)for(var e=kt.spyListeners,n=0,r=e.length;n<r;n++)e[n](t)}function Wt(t){Vt(R(R({},t),{spyReportStart:!0}))}var Yt={spyReportEnd:!0};function Xt(t){Vt(t?R(R({},t),{spyReportEnd:!0}):Yt)}function qt(){c(!1)}function Kt(t){return function(e,n,r){if(r){if(r.value)return{value:_t(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return _t(t,i.call(this))}}}return Zt(t).apply(this,arguments)}}function Zt(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){g(this,n,Jt(t,e))}})}}var Jt=function(t,e,n,r){return 1===arguments.length&&"function"==typeof t?_t(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?_t(t,e):1===arguments.length&&"string"==typeof t?Kt(t):!0!==r?Kt(e).apply(null,arguments):void(t[e]=_t(t.name||e,n.value))};function $t(t,e,n){g(t,e,_t(e,n.bind(t)))}Jt.bound=function(t,e,n,r){return!0===r?($t(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return $t(this,e,n.value||n.initializer.call(this)),this[e]},set:qt}:{enumerable:!1,configurable:!0,set:function(t){$t(this,e,t)},get:function(){}}};var te=function(t){return t()};function ee(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:te}function ne(t,e,n){void 0===n&&(n=a),"boolean"==typeof n&&(n={fireImmediately:n});var r,i,o,s=n.name||"Reaction@"+l(),u=Jt(s,n.onError?(r=n.onError,i=e,function(){try{return i.apply(this,arguments)}catch(t){r.call(this,t)}}):e),c=!n.scheduler&&!n.delay,h=ee(n),d=!0,A=!1,f=n.compareStructural?D.structural:n.equals||D.default,p=new jt(s,(function(){d||c?g():A||(A=!0,h(g))}),n.onError,n.requiresObservable);function g(){if(A=!1,!p.isDisposed){var e=!1;p.track((function(){var n=t(p);e=d||!f(o,n),o=n})),d&&n.fireImmediately&&u(o,p),d||!0!==e||u(o,p),d&&(d=!1)}}return p.schedule(),p.getDisposer()}function re(t,e,n){return ie("onBecomeUnobserved",t,e,n)}function ie(t,e,n,r){var i="function"==typeof r?We(e,n):We(e),o="function"==typeof r?r:n,a=i[t];return"function"!=typeof a?c(!1):(i[t]=function(){a.call(this),o.call(this)},function(){i[t]=a})}function oe(t,e,n,r){var i=(r=K(r)).defaultDecorator||(!1===r.deep?tt:J);Q(t),je(t,r.name,i.enhancer),Ot();try{for(var o=Object.getOwnPropertyNames(e),a=0,s=o.length;a<s;a++){var u=o[a],l=Object.getOwnPropertyDescriptor(e,u),c=(n&&u in n?n[u]:l.get?st:i)(t,u,l,!0);c&&Object.defineProperty(t,u,c)}}finally{Rt()}return t}function ae(t){var e,n,r={name:t.name};return t.observing&&t.observing.length>0&&(r.dependencies=(e=t.observing,n=[],e.forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n).map(ae)),r}function se(t,e){if(null==t)return!1;if(void 0!==e){if(Ve(t)){var n=t.$mobx;return n.values&&!!n.values[e]}return!1}return Ve(t)||!!t.$mobx||B(t)||Qt(t)||It(t)}function ue(t){return 1!==arguments.length&&c(!1),se(t)}function le(t){switch(t.length){case 0:return kt.trackingDerivation;case 1:return We(t[0]);case 2:return We(t[0],t[1])}}function ce(t,e){void 0===e&&(e=void 0),Ot();try{return t.apply(e)}finally{Rt()}}function he(t){return void 0!==t.interceptors&&t.interceptors.length>0}function de(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),d((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function Ae(t,e){var n=pt();try{var r=t.interceptors;if(r)for(var i=0,o=r.length;i<o&&(h(!(e=r[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{gt(n)}}function fe(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function pe(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),d((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function ge(t,e){var n=pt(),r=t.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](e);gt(n)}}Object.create(Error.prototype);var ve,me,ye,be,we=(ve=!1,me={},Object.defineProperty(me,"0",{set:function(){ve=!0}}),Object.create(me)[0]=1,!1===ve),xe=0,_e=function(){};ye=_e,be=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(ye.prototype,be):void 0!==ye.prototype.__proto__?ye.prototype.__proto__=be:ye.prototype=be,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(t){Object.defineProperty(_e.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})}));var Te=function(){function t(t,e,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new N(t||"ObservableArray@"+l()),this.enhancer=function(n,r){return e(n,r,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return de(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),pe(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),r=0;r<t-e;r++)n[r]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e,e>0&&t+e+1>xe&&Ie(t+e+1)},t.prototype.spliceWithArray=function(t,e,n){var r=this;ht(this.atom);var i=this.values.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:null==e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=o),he(this)){var a=Ae(this,{object:this.array,type:"splice",index:t,removedCount:e,added:n});if(!a)return o;e=a.removedCount,n=a.added}var s=(n=0===n.length?n:n.map((function(t){return r.enhancer(t,void 0)}))).length-e;this.updateArrayLength(i,s);var u=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,u),this.dehanceValues(u)},t.prototype.spliceItemsIntoValues=function(t,e,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,U([t,e],n));var i=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),i},t.prototype.notifyArrayChildUpdate=function(t,e,n){var r=!this.owned&&Gt(),i=fe(this),o=i||r?{object:this.array,type:"update",index:t,newValue:e,oldValue:n}:null;r&&Wt(R(R({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&ge(this,o),r&&Xt()},t.prototype.notifyArraySplice=function(t,e,n){var r=!this.owned&&Gt(),i=fe(this),o=i||r?{object:this.array,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;r&&Wt(R(R({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&ge(this,o),r&&Xt()},t}(),Ee=function(t){function e(e,n,r,i){void 0===r&&(r="ObservableArray@"+l()),void 0===i&&(i=!1);var o=t.call(this)||this,a=new Te(r,n,o,i);if(v(o,"$mobx",a),e&&e.length){var s=Et(!0);o.spliceWithArray(0,0,e),St(s)}return we&&Object.defineProperty(a.array,"0",Se),o}return O(e,t),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,e){return void 0===e&&(e=!1),this.$mobx.observe(t,e)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map((function(t){return Be(t)?t.peek():t})))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,e,n){void 0===n&&(n=0);var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},e.prototype.findIndex=function(t,e,n){void 0===n&&(n=0);for(var r=this.peek(),i=r.length,o=n;o<i;o++)if(t.call(e,r[o],o,this))return o;return-1},e.prototype.splice=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,e)}return this.$mobx.spliceWithArray(t,e,n)},e.prototype.spliceWithArray=function(t,e,n){return this.$mobx.spliceWithArray(t,e,n)},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,t),n.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(0,0,t),n.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var e=this.slice();return e.sort.apply(e,arguments)},e.prototype.remove=function(t){var e=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return e>-1&&(this.splice(e,1),!0)},e.prototype.move=function(t,e){function n(t){if(t<0)throw new Error("[mobx.array] Index out of bounds: "+t+" is negative");var e=this.$mobx.values.length;if(t>=e)throw new Error("[mobx.array] Index out of bounds: "+t+" is not smaller than "+e)}if(n.call(this,t),n.call(this,e),t!==e){var r,i=this.$mobx.values;r=t<e?U(i.slice(0,t),i.slice(t+1,e+1),[i[t]],i.slice(e+1)):U(i.slice(0,e),[i[t]],i.slice(e,t),i.slice(t+1)),this.replace(r)}},e.prototype.get=function(t){var e=this.$mobx;if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,e){var n=this.$mobx,r=n.values;if(t<r.length){ht(n.atom);var i=r[t];if(he(n)){var o=Ae(n,{type:"update",object:this,index:t,newValue:e});if(!o)return;e=o.newValue}(e=n.enhancer(e,i))!==i&&(r[t]=e,n.notifyArrayChildUpdate(t,e,i))}else{if(t!==r.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length);n.spliceWithArray(t,0,[e])}},e}(_e);S(Ee.prototype,(function(){this.$mobx.atom.reportObserved();var t=this,e=0;return M({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(Ee.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}}),g(Ee.prototype,C(),"Array"),["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(t){var e=Array.prototype[t];h("function"==typeof e,"Base function not defined on Array prototype: '"+t+"'"),g(Ee.prototype,t,(function(){return e.apply(this.peek(),arguments)}))})),["every","filter","forEach","map","some"].forEach((function(t){h("function"==typeof Array.prototype[t],"Base function not defined on Array prototype: '"+t+"'"),g(Ee.prototype,t,(function(e,n){var r=this,i=this.$mobx;return i.atom.reportObserved(),i.dehanceValues(i.values)[t]((function(t,i){return e.call(n,t,i,r)}),n)}))})),["reduce","reduceRight"].forEach((function(t){g(Ee.prototype,t,(function(){var e=this,n=this.$mobx;n.atom.reportObserved();var r=arguments[0];return arguments[0]=function(t,i,o){return i=n.dehanceValue(i),r(t,i,o,e)},n.values[t].apply(n.values,arguments)}))})),function(t,e){for(var n=0;n<e.length;n++)g(t,e[n],t[e[n]])}(Ee.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var Se=Me(0);function Me(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(e){this.set(t,e)}}}function Ce(t){Object.defineProperty(Ee.prototype,""+t,Me(t))}function Ie(t){for(var e=xe;e<t;e++)Ce(e);xe=t}Ie(1e3);var Ne=m("ObservableArrayAdministration",Te);function Be(t){return f(t)&&Ne(t.$mobx)}var ke={},Pe=function(){function t(t,e,n){if(void 0===e&&(e=W),void 0===n&&(n="ObservableMap@"+l()),this.enhancer=e,this.name=n,this.$mobx=ke,this._keysAtom=k(this.name+".keys()"),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!kt.trackingDerivation)return this._has(t);var n=this._hasMap.get(t);if(!n){var r=n=new Mt(this._has(t),Y,this.name+"."+De(t)+"?",!1);this._hasMap.set(t,r),re(r,(function(){return e._hasMap.delete(t)}))}return n.get()},t.prototype.set=function(t,e){var n=this._has(t);if(he(this)){var r=Ae(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(ht(this._keysAtom),he(this)&&!(i=Ae(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var n=Gt(),r=fe(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return n&&Wt(R(R({},i),{name:this.name,key:t})),ce((function(){e._keysAtom.reportChanged(),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)})),r&&ge(this,i),n&&Xt(),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);n&&n.setNewValue(e)},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if((e=n.prepareNewValue(e))!==kt.UNCHANGED){var r=Gt(),i=fe(this),o=i||r?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;r&&Wt(R(R({},o),{name:this.name,key:t})),n.setNewValue(e),i&&ge(this,o),r&&Xt()}},t.prototype._addValue=function(t,e){var n=this;ht(this._keysAtom),ce((function(){var r=new Mt(e,n.enhancer,n.name+"."+De(t),!1);n._data.set(t,r),e=r.value,n._updateHasMapEntry(t,!0),n._keysAtom.reportChanged()}));var r=Gt(),i=fe(this),o=i||r?{type:"add",object:this,name:t,newValue:e}:null;r&&Wt(R(R({},o),{name:this.name,key:t})),i&&ge(this,o),r&&Xt()},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},t.prototype.values=function(){var t=this,e=this.keys();return M({next:function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:t.get(i)}}})},t.prototype.entries=function(){var t=this,e=this.keys();return M({next:function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,t.get(i)]}}})},t.prototype.forEach=function(t,e){var n=this;this._keysAtom.reportObserved(),this._data.forEach((function(r,i){return t.call(e,n.get(i),i,n)}))},t.prototype.merge=function(t){var e=this;return Le(t)&&(t=t.toJS()),ce((function(){var n=Et(!0);try{p(t)?Object.keys(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=F(t,2),r=n[0],i=n[1];return e.set(r,i)})):y(t)?t.constructor!==Map?c("Cannot initialize from classes that inherit from Map: "+t.constructor.name):t.forEach((function(t,n){return e.set(n,t)})):null!=t&&c("Cannot initialize map from "+t)}finally{St(n)}})),this},t.prototype.clear=function(){var t=this;ce((function(){ft((function(){t._data.forEach((function(e,n){return t.delete(n)}))}))}))},t.prototype.replace=function(t){var e=this;return ce((function(){var n=function(t){if(y(t)||Le(t))return t;if(Array.isArray(t))return new Map(t);if(p(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}return c("Cannot convert to map from '"+t+"'")}(t),r=new Map,i=!1;if(T(e._data.keys(),(function(t){if(!n.has(t))if(e.delete(t))i=!0;else{var o=e._data.get(t);r.set(t,o)}})),T(n.entries(),(function(t){var n=F(t,2),o=n[0],a=n[1],s=e._data.has(o);if(e.set(o,a),e._data.has(o)){var u=e._data.get(o);r.set(o,u),s||(i=!0)}})),!i)if(e._data.size!==r.size)e._keysAtom.reportChanged();else for(var o=e._data.keys(),a=r.keys(),s=o.next(),u=a.next();!s.done;){if(s.value!==u.value){e._keysAtom.reportChanged();break}s=o.next(),u=a.next()}e._data=r})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t=this,e={};return this.forEach((function(n,i){return e["symbol"==r(i)?i:De(i)]=t.get(i)})),e},t.prototype.toJS=function(){return new Map(this)},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+w(this.keys()).map((function(e){return De(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return pe(this,t)},t.prototype.intercept=function(t){return de(this,t)},t}();function De(t){return t&&t.toString?t.toString():new String(t).toString()}S(Pe.prototype,(function(){return this.entries()})),v(Pe.prototype,C(),"Map");var Le=m("ObservableMap",Pe),Oe={},Re=function(){function t(t,e,n){if(void 0===e&&(e=W),void 0===n&&(n="ObservableSet@"+l()),this.name=n,this.$mobx=Oe,this._data=new Set,this._atom=k(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,r){return e(t,r,n)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;ce((function(){ft((function(){t._data.forEach((function(e){t.delete(e)}))}))}))},t.prototype.forEach=function(t,e){var n=this;this._atom.reportObserved(),this._data.forEach((function(r){t.call(e,r,r,n)}))},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if(ht(this._atom),he(this)&&!(i=Ae(this,{type:"add",object:this,newValue:t})))return this;if(!this.has(t)){ce((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var n=Gt(),r=fe(this),i=r||n?{type:"add",object:this,newValue:t}:null;r&&ge(this,i)}return this},t.prototype.delete=function(t){var e=this;if(he(this)&&!(i=Ae(this,{type:"delete",object:this,oldValue:t})))return!1;if(this.has(t)){var n=Gt(),r=fe(this),i=r||n?{type:"delete",object:this,oldValue:t}:null;return ce((function(){e._atom.reportChanged(),e._data.delete(t)})),r&&ge(this,i),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=w(this.keys()),n=w(this.values());return M({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t,e=this,n=0;return void 0!==this._data.values?t=w(this._data.values()):(t=[],this._data.forEach((function(e){return t.push(e)}))),M({next:function(){return n<t.length?{value:e.dehanceValue(t[n++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return Fe(t)&&(t=t.toJS()),ce((function(){var n=Et(!0);try{Array.isArray(t)||b(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&c("Cannot initialize set from "+t)}finally{St(n)}})),this},t.prototype.observe=function(t,e){return pe(this,t)},t.prototype.intercept=function(t){return de(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+w(this.keys()).join(", ")+" ]"},t}();S(Re.prototype,(function(){return this.values()})),v(Re.prototype,C(),"Set");var Fe=m("ObservableSet",Re),Ue=function(){function t(t,e,n){this.target=t,this.name=e,this.defaultEnhancer=n,this.values={}}return t.prototype.read=function(t,e){if(this.target===t||(this.illegalAccess(t,e),this.values[e]))return this.values[e].get()},t.prototype.write=function(t,e,n){var r=this.target;r!==t&&this.illegalAccess(t,e);var i=this.values[e];if(i instanceof Ct)i.set(n);else{if(he(this)){if(!(s=Ae(this,{type:"update",object:r,name:e,newValue:n})))return;n=s.newValue}if((n=i.prepareNewValue(n))!==kt.UNCHANGED){var o=fe(this),a=Gt(),s=o||a?{type:"update",object:r,oldValue:i.value,name:e,newValue:n}:null;a&&Wt(R(R({},s),{name:this.name,key:e})),i.setNewValue(n),o&&ge(this,s),a&&Xt()}}},t.prototype.remove=function(t){if(this.values[t]){var e=this.target;if(he(this)&&!(o=Ae(this,{object:e,name:t,type:"remove"})))return;try{Ot();var n=fe(this),r=Gt(),i=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var o=n||r?{type:"remove",object:e,oldValue:i,name:t}:null;r&&Wt(R(R({},o),{name:this.name,key:t})),n&&ge(this,o),r&&Xt()}finally{Rt()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return pe(this,t)},t.prototype.intercept=function(t){return de(this,t)},t.prototype.getKeys=function(){var t=this;return void 0===this.keys&&(this.keys=new Ee(Object.keys(this.values).filter((function(e){return t.values[e]instanceof Mt})),Y,"keys("+this.name+")",!0)),this.keys.slice()},t}();function je(t,e,n){void 0===e&&(e=""),void 0===n&&(n=W);var r=t.$mobx;return r||(p(t)||(e=(t.constructor.name||"ObservableObject")+"@"+l()),e||(e="ObservableObject@"+l()),v(t,"$mobx",r=new Ue(t,e,n)),r)}var ze=Object.create(null),He=Object.create(null);function Qe(t){return t.$mobx||(Q(t),t.$mobx)}var Ge=m("ObservableObjectAdministration",Ue);function Ve(t){return!!f(t)&&(Q(t),Ge(t.$mobx))}function We(t,e){if("object"==r(t)&&null!==t){if(Be(t))return void 0!==e&&c(!1),t.$mobx.atom;if(Fe(t))return t.$mobx;if(Le(t)){var n=t;return void 0===e?n._keysAtom:((i=n._data.get(e)||n._hasMap.get(e))||c(!1),i)}var i;if(Q(t),e&&!t.$mobx&&t[e],Ve(t))return e?((i=t.$mobx.values[e])||c(!1),i):c(!1);if(B(t)||It(t)||Qt(t))return t}else if("function"==typeof t&&Qt(t.$mobx))return t.$mobx;return c(!1)}function Ye(t,e){return t||c("Expecting some object"),void 0!==e?Ye(We(t,e)):B(t)||It(t)||Qt(t)||Le(t)||Fe(t)?t:(Q(t),t.$mobx?t.$mobx:void c(!1))}var Xe=Object.prototype.toString;function qe(t,e,n){return void 0===n&&(n=-1),function t(e,n,i,o,a){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return!1;if(e!=e)return n!=n;var s=r(e);if("function"!==s&&"object"!==s&&"object"!=r(n))return!1;e=Ke(e),n=Ke(n);var u=Xe.call(e);if(u!==Xe.call(n))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n)}var l="[object Array]"===u;if(!l){if("object"!=r(e)||"object"!=r(n))return!1;var c=e.constructor,h=n.constructor;if(c!==h&&!("function"==typeof c&&c instanceof c&&"function"==typeof h&&h instanceof h)&&"constructor"in e&&"constructor"in n)return!1}if(0===i)return!1;i<0&&(i=-1),a=a||[];for(var d=(o=o||[]).length;d--;)if(o[d]===e)return a[d]===n;if(o.push(e),a.push(n),l){if((d=e.length)!==n.length)return!1;for(;d--;)if(!t(e[d],n[d],i-1,o,a))return!1}else{var A=Object.keys(e),f=void 0;if(d=A.length,Object.keys(n).length!==d)return!1;for(;d--;)if(!Ze(n,f=A[d])||!t(e[f],n[f],i-1,o,a))return!1}return o.pop(),a.pop(),!0}(t,e,n)}function Ke(t){return Be(t)?t.peek():y(t)||Le(t)||b(t)||Fe(t)?w(t.entries()):t}function Ze(t,e){return Object.prototype.hasOwnProperty.call(t,e)}"object"==("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":r(__MOBX_DEVTOOLS_GLOBAL_HOOK__))&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return kt.spyListeners.push(t),d((function(){kt.spyListeners=kt.spyListeners.filter((function(e){return e!==t}))}))},extras:{getDebugName:function(t,e){return(void 0!==e?We(t,e):Ve(t)||Le(t)||Fe(t)?Ye(t):We(t)).name}},$mobx:"$mobx"})}).call(this,n(10),n(11))},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzFweCIgaGVpZ2h0PSIyN3B4IiB2aWV3Qm94PSIwIDAgMzEgMjciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT52aWRlbyAoMSk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InZpZGVvLSgxKSIgZmlsbD0iIzJDMkMyQyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI2LjY3NTIyODEsMjYuMDgzNTA4OCBMMy43NTI2MzE1OCwyNi4wODM1MDg4IEMxLjY4NTk2NDksMjYuMDgzNTA4OCAwLDI0LjMyNTc1NDQgMCwyMi4xNTQ2NjY3IEwwLDMuOTMxMDE3NTQgQzAsMS43NjY0NTYxNSAxLjY3OTQzODU5LDAgMy43NTI2MzE1OCwwIEwyNi42NzUyMjgxLDAgQzI4Ljc0MTg5NDcsMCAzMC40MzAwMzUxLDEuNzU5OTI5ODMgMzAuNDMwMDM1MSwzLjkzMTAxNzU0IEwzMC40MzAwMzUxLDIyLjE1NDY2NjcgQzMwLjQyMTMzMzQsMjQuMzE3MDUyNiAyOC43NDE4OTQ3LDI2LjA4MzUwODggMjYuNjc1MjI4MSwyNi4wODM1MDg4IFogTTMuNzUyNjMxNTgsMS40MjQ5MTIyNyBDMi40MzIxNDAzNiwxLjQyNDkxMjI3IDEuMzU1Mjk4MjUsMi41NTM5NjQ5IDEuMzU1Mjk4MjUsMy45Mzc1NDM4NSBMMS4zNTUyOTgyNSwyMi4xNjExOTMgQzEuMzU1Mjk4MjUsMjMuNTQ0NzcxOSAyLjQzMjE0MDM2LDI0LjY3MTY0OTEgMy43NTI2MzE1OCwyNC42NzE2NDkxIEwyNi42NzUyMjgxLDI0LjY3MTY0OTEgQzI3Ljk5NTcxOTMsMjQuNjcxNjQ5MSAyOS4wNzQ3MzY4LDIzLjU0NDc3MTkgMjkuMDc0NzM2OCwyMi4xNjExOTMgTDI5LjA3NDczNjgsMy45MzEwMTc1NCBDMjkuMDc0NzM2OCwyLjU0NzQzODU5IDI3Ljk5NTcxOTMsMS40MTgzODU5NiAyNi42NzUyMjgxLDEuNDE4Mzg1OTYgTDMuNzUyNjMxNTgsMS40MTgzODU5NiBMMy43NTI2MzE1OCwxLjQyNDkxMjI3IFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTUuMDI3NDM4NTksMjYuMDc2OTgyNSBDNC42NDU1MTEzLDI2LjA2NjMwNjUgNC4zNDM1NjQwOSwyNS43NDk3OTU5IDQuMzUwODc3MiwyNS4zNjc3ODk1IEw0LjM1MDg3NzIsMC43MDkxOTI5OTEgQzQuMzUwODc3MiwwLjMxNzYxNDA0NCA0LjY1NTQzODU5LDAgNS4wMjc0Mzg1OSwwIEM1LjQxMDIyMjg5LDAuMDA5NTAzMDE3NzYgNS43MTM0NzI3OSwwLjMyNjM2MDI4OCA1LjcwNjE3NTQzLDAuNzA5MTkyOTkxIEw1LjcwNjE3NTQzLDI1LjM2Nzc4OTUgQzUuNzA2MTc1NDMsMjUuNzU5MzY4NCA1LjQwODE0MDMzLDI2LjA3Njk4MjUgNS4wMjc0Mzg1OSwyNi4wNzY5ODI1IEw1LjAyNzQzODU5LDI2LjA3Njk4MjUgWiBNMjUuMDE1MzY4NCwyNi4wNzY5ODI1IEMyNC42MzM0NDExLDI2LjA2NjMwNjYgMjQuMzMxNDkzOSwyNS43NDk3OTYgMjQuMzM4ODA3LDI1LjM2Nzc4OTUgTDI0LjMzODgwNywwLjcwOTE5Mjk5MSBDMjQuMzM4ODA3LDAuMzE3NjE0MDQ0IDI0LjY0MzM2ODQsMCAyNS4wMTUzNjg0LDAgQzI1LjM5ODE1MjcsMC4wMDk1MDMwMTc3NiAyNS43MDE0MDI2LDAuMzI2MzYwMjg4IDI1LjY5NDEwNTMsMC43MDkxOTI5OTEgTDI1LjY5NDEwNTMsMjUuMzY3Nzg5NSBDMjUuNzAxNDAyNiwyNS43NTA2MjIyIDI1LjM5ODE1MjcsMjYuMDY3NDc5NCAyNS4wMTUzNjg0LDI2LjA3Njk4MjUgTDI1LjAxNTM2ODQsMjYuMDc2OTgyNSBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjYyMDYzMTU4LDcuOTQ0NzAxNzUgTDAuNjAwNDIxMDUzLDcuOTQ0NzAxNzUgQzAuMjY5NzU0Mzc3LDcuOTQ0NzAxNzUgMCw3LjYyNDkxMjI3IDAsNy4yMzU1MDg3OCBDMCw2Ljg0MzkyOTgzIDAuMjY5NzU0Mzc3LDYuNTI2MzE1NzkgMC42MDA0MjEwNTMsNi41MjYzMTU3OSBMNC42MjA2MzE1OCw2LjUyNjMxNTc5IEM0Ljk1MTI5ODI1LDYuNTI2MzE1NzkgNS4yMjEwNTI2Myw2Ljg0NjEwNTI2IDUuMjIxMDUyNjMsNy4yMzU1MDg3OCBDNS4yMjEwNTI2Myw3LjYyNzA4NzczIDQuOTU3ODI0NTcsNy45NDQ3MDE3NSA0LjYyMDYzMTU4LDcuOTQ0NzAxNzUgWiBNNC42MjA2MzE1OCwxMy41MDcyOTgzIEwwLjYwMDQyMTA1MywxMy41MDcyOTgzIEMwLjI2OTc1NDM3NywxMy41MDcyOTgzIDAsMTMuMTg3NTA4OCAwLDEyLjc5ODEwNTMgQzAsMTIuNDA2NTI2MyAwLjI2OTc1NDM3NywxMi4wODg5MTIzIDAuNjAwNDIxMDUzLDEyLjA4ODkxMjMgTDQuNjIwNjMxNTgsMTIuMDg4OTEyMyBDNC45NTEyOTgyNSwxMi4wODg5MTIzIDUuMjIxMDUyNjMsMTIuNDA2NTI2MyA1LjIyMTA1MjYzLDEyLjc5ODEwNTMgQzUuMjIxMDUyNjMsMTMuMTg3NTA4OCA0Ljk1NzgyNDU3LDEzLjUwNzI5ODMgNC42MjA2MzE1OCwxMy41MDcyOTgzIEw0LjYyMDYzMTU4LDEzLjUwNzI5ODMgWiBNNC42MjA2MzE1OCwxOS43NzAzODYgTDAuNjAwNDIxMDUzLDE5Ljc3MDM4NiBDMC4yNjk3NTQzNzcsMTkuNzcwMzg2IDAsMTkuNDUwNTk2NSAwLDE5LjA2MTE5MyBDMCwxOC42Njk2MTQgMC4yNjk3NTQzNzcsMTguMzUyIDAuNjAwNDIxMDUzLDE4LjM1MiBMNC42MjA2MzE1OCwxOC4zNTIgQzQuOTUxMjk4MjUsMTguMzUyIDUuMjIxMDUyNjMsMTguNjcxNzg5NSA1LjIyMTA1MjYzLDE5LjA2MTE5MyBDNS4yMjEwNTI2MywxOS40NTI3NzE5IDQuOTU3ODI0NTcsMTkuNzcwMzg2IDQuNjIwNjMxNTgsMTkuNzcwMzg2IEw0LjYyMDYzMTU4LDE5Ljc3MDM4NiBaIE0yOS4zNzA1OTY1LDcuOTQ0NzAxNzUgTDI1LjAxNzU0MzksNy45NDQ3MDE3NSBDMjQuNjU4NTk2NSw3Ljk0NDcwMTc1IDI0LjM2NzA4NzcsNy42MjQ5MTIyNyAyNC4zNjcwODc3LDcuMjM1NTA4NzggQzI0LjM2NzA4NzcsNi44NDM5Mjk4MyAyNC42NTg1OTY1LDYuNTI2MzE1NzkgMjUuMDE3NTQzOSw2LjUyNjMxNTc5IEwyOS4zNjg0MjExLDYuNTI2MzE1NzkgQzI5LjcyNTE5Myw2LjUyNjMxNTc5IDMwLjAxODg3NzIsNi44NDYxMDUyNiAzMC4wMTg4NzcyLDcuMjM1NTA4NzggQzMwLjAxODg3NzIsNy42MjcwODc3MyAyOS43MjUxOTMsNy45NDQ3MDE3NSAyOS4zNjg0MjExLDcuOTQ0NzAxNzUgTDI5LjM3MDU5NjUsNy45NDQ3MDE3NSBaIE0yOS4zNzA1OTY1LDEzLjUwNzI5ODMgTDI1LjAxNzU0MzksMTMuNTA3Mjk4MyBDMjQuNjU4NTk2NSwxMy41MDcyOTgzIDI0LjM2NzA4NzcsMTMuMTg3NTA4OCAyNC4zNjcwODc3LDEyLjc5ODEwNTMgQzI0LjM2NzA4NzcsMTIuNDA2NTI2MyAyNC42NTg1OTY1LDEyLjA4ODkxMjMgMjUuMDE3NTQzOSwxMi4wODg5MTIzIEwyOS4zNjg0MjExLDEyLjA4ODkxMjMgQzI5LjcyNTE5MywxMi4wODg5MTIzIDMwLjAxODg3NzIsMTIuNDA2NTI2MyAzMC4wMTg4NzcyLDEyLjc5ODEwNTMgQzMwLjAxODg3NzIsMTMuMTg3NTA4OCAyOS43MjUxOTMsMTMuNTA3Mjk4MyAyOS4zNjg0MjExLDEzLjUwNzI5ODMgTDI5LjM3MDU5NjUsMTMuNTA3Mjk4MyBaIE0yOS4zNzA1OTY1LDE5Ljc3MDM4NiBMMjUuMDE3NTQzOSwxOS43NzAzODYgQzI0LjY1ODU5NjUsMTkuNzcwMzg2IDI0LjM2NzA4NzcsMTkuNDUwNTk2NSAyNC4zNjcwODc3LDE5LjA2MTE5MyBDMjQuMzY3MDg3NywxOC42Njk2MTQgMjQuNjU4NTk2NSwxOC4zNTIgMjUuMDE3NTQzOSwxOC4zNTIgTDI5LjM2ODQyMTEsMTguMzUyIEMyOS43MjUxOTMsMTguMzUyIDMwLjAxODg3NzIsMTguNjcxNzg5NSAzMC4wMTg4NzcyLDE5LjA2MTE5MyBDMzAuMDE4ODc3MiwxOS40NTI3NzE5IDI5LjcyNTE5MywxOS43NzAzODYgMjkuMzY4NDIxMSwxOS43NzAzODYgTDI5LjM3MDU5NjUsMTkuNzcwMzg2IFogTTExLjU1Mzc1NDQsMTguODYzMjY3MyBDMTEuNDM1MDcwMSwxOC44NjQ1Mzk2IDExLjMxODM0NzIsMTguODMyOTExNCAxMS4yMTY1NjE0LDE4Ljc3MTg1OTYgQzExLjAwMzE1OTUsMTguNjM5NDU1MiAxMC44NzQ0NjIzLDE4LjQwNTE2MDIgMTAuODc3MTUwNCwxOC4xNTQwMzUxIEwxMC44NzcxNTA0LDkuNDE1Mjk4MjUgQzEwLjg3NDQ2MjMsOS4xNjQxNzMxMiAxMS4wMDMxNTk1LDguOTI5ODc4MSAxMS4yMTY1NjE0LDguNzk3NDczNjggQzExLjQyNDA1NzUsOC42Njk5NjExNyAxMS42ODU2MjY3LDguNjY5OTYxMTcgMTEuODkzMTIyOCw4Ljc5NzQ3MzY4IEwxOS4xMjIxMDUzLDEzLjE2NzkyOTggQzE5LjMzNDg0MDgsMTMuMjk5OTMwNiAxOS40NjM0NDE2LDEzLjUzMzIyNTcgMTkuNDYxNTE2MywxMy43ODM1Nzg5IEMxOS40NjQyMDQ0LDE0LjAzNDcwNDEgMTkuMzM1NTA3MSwxNC4yNjg5OTkxIDE5LjEyMjEwNTMsMTQuNDAxNDAzNSBMMTEuODkzMTIyOCwxOC43NjUzMzMzIEMxMS43OTA3OTE2LDE4LjgyNzczMDMgMTEuNjczNTk2NywxOC44NjE1MzY1IDExLjU1Mzc1NDQsMTguODYzMjY3MyBaIE0xMi4yMzI0OTEyLDEwLjY0MDA3MDIgTDEyLjIzMjQ5MTIsMTYuOTI3MDg3NyBMMTcuNDI5NjE0LDEzLjc4MzU3ODkgTDEyLjIzMDMxNTgsMTAuNjQyMjQ1NiBMMTIuMjMyNDkxMiwxMC42NDAwNzAyIFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,n){t.exports=e},function(t,e,n){var r=n(7),i=n(8);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzZweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzYgMzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSLpobXpnaIxIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i57yW57uELTIiPgogICAgICAgICAgICA8ZyBpZD0i5aOw6Z+zIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1LjkzMDg4NTEsMC42MTgyMDU2MjUgTDcuMTgxNzAzNjYsNi40NDQwMDc4NCBMMy42MDM0NDU2Miw2LjQ0NDAwNzg0IEMxLjYyODMzMTAzLDYuNDQ0MDA3ODQgMC4wMjUxODc1OTM3LDguMjc3NjY4NjMgMC4wMjUxODc1OTM3LDEwLjUzMDQ1MTkgTDAuMDI1MTg3NTkzNywyMS40MzI4NzQ5IEMwLjAyNTE4NzU5MzcsMjMuNjkwODk3MiAxLjYyODMzMSwyNS41MTkzMTg5IDMuNjAzNDQ1NjIsMjUuNTE5MzE4OSBMNy4xODE3MDM2NiwyNS41MTkzMTg5IEwxNS45MjU2NDYsMzEuMzUwMzYwMiBDMTcuMDI1ODQyNSwzMi4wNzg1ODU1IDE4LjQzNTE0MTgsMzIuMTQ2NjkyOSAxOS41OTgyMDY2LDMxLjUyMzI0ODIgQzIwLjc2MTI3MTQsMzAuODk5ODAzNSAyMS40ODQyNTc3LDI5LjY4OTU4NzQgMjEuNDg5NDk2NywyOC4zNzQ1OTA3IEwyMS40ODk0OTY3LDMuNTkzOTc1MTMgQzIxLjQ4OTQ5NjcsMi4yNzM3MzkzOCAyMC43NjEyNzE0LDEuMDYzNTIzMjUgMTkuNTk4MjA2NiwwLjQ0NTMxNzYyNSBDMTguNDM1MTQxNywtMC4xODMzNjYwNjIgMTcuMDI1ODQyNSwtMC4xMTUyNTg2NTYgMTUuOTMwODg1MSwwLjYxODIwNTYyNSBMMTUuOTMwODg1MSwwLjYxODIwNTYyNSBaIE03LjE4MTcwMzY2LDIzLjEzNTU1OTkgTDMuNjAzNDQ1NjIsMjMuMTM1NTU5OSBDMy4wMjE5MTMyMiwyMy4xMzU1NTk5IDIuNDA4OTQ2NTksMjIuNDM4NzY4OCAyLjQwODk0NjU5LDIxLjQzMjg3NDkgTDIuNDA4OTQ2NTksMTAuNTM1NjkwOSBDMi40MDg5NDY1OSw5LjUyOTc5NyAzLjAxNjY3NDE2LDguODMzMDA1OTEgMy42MDM0NDU2Miw4LjgzMzAwNTkxIEw3LjE4MTcwMzY2LDguODMzMDA1OTEgTDcuMTgxNzAzNjYsMjMuMTM1NTU5OSBaIE0xOS4xMDU3Mzc3LDI4LjM3NDU5MDcgQzE5LjEwNTczNzcsMjguODE0NjY5MyAxOC44NjQ3NDIzLDI5LjIxODA3NDcgMTguNDc3MDU0LDI5LjQyMjM5NjggQzE4LjA4OTM2NTcsMjkuNjMxOTU4MSAxNy42MTc4NTI5LDI5LjYwNTc2MjkgMTcuMjU2MzU5OCwyOS4zNjQ3Njc1IEw5LjU2NTQ2MjY2LDI0LjI0NjIzNDQgTDkuNTY1NDYyNjYsNy43MjIzMzEzOCBMMTcuMjUxMTIwOCwyLjU5ODU1OTI4IEMxNy42MTc4NTMsMi4zNTc1NjM4OCAxOC4wODkzNjU4LDIuMzMxMzY4NzIgMTguNDcxODE1LDIuNTQwOTI5OTQgQzE4Ljg1OTUwMzIsMi43NTA0OTExNiAxOS4xMDA0OTg3LDMuMTUzODk2NTMgMTkuMTAwNDk4NywzLjU5Mzk3NTEzIEwxOS4xMDA0OTg3LDI4LjM3NDU5MDcgTDE5LjEwNTczNzcsMjguMzc0NTkwNyBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUuMDAwMDAwLCAxMi4wMDAwMDApIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01LjY4NDM0MTg5ZS0xNCwwIEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuNTA2NzA2MmUtMTQsLTEuNzc2MzU2ODRlLTE1IEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC40NjU4MDksIDQuNDY1ODA5KSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC00LjQ2NTgwOSwgLTQuNDY1ODA5KSAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg=="},function(t,e,n){var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],u=e.base?s[0]+e.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var h=a(c),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:c,updater:p(d,e),references:1}),r.push(c)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,c=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function d(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var A=null,f=0;function p(t,e){var n,r,i;if(e.singleton){var o=f++;n=A||(A=u(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=u(e),r=d.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(t,e),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(t,e,n){(e=n(9)(!1)).push([t.i,".media-mute-box {\n  position: absolute;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.media-mute-box-inner {\n  width: 88px;\n  cursor: pointer;\n  height: 64px;\n  border-radius: 8px;\n  background-color: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n.media-mute-box-inner span {\n  color: white;\n}\n.media-mute-box-inner img {\n  width: 24px;\n}\n.plugin-video-box {\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  transform-origin: top left;\n}\n.plugin-video-box-nav {\n  width: 100%;\n  height: 32px;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  background-image: linear-gradient(180deg, #E0E1E0 0%, #CDCDCC 100%);\n  display: flex;\n  flex-direction: row;\n  flex-shrink: 0;\n  justify-content: space-between;\n  align-items: center;\n  cursor: default;\n}\n.plugin-video-box-nav span {\n  margin-left: 6px;\n  font-size: 12px;\n  font-weight: bold;\n}\n.plugin-video-box-body {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: black;\n}\n.white-plugin-video-box {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.white-plugin-video-box video::-webkit-media-controls-fullscreen-button {\n  display: none !important;\n}\n.white-plugin-video {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n}\n.plugin-video-box-delete {\n  width: 22px;\n  height: 22px;\n  background-color: #FF756E;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 8px;\n  cursor: pointer;\n  opacity: 0.6;\n}\n.plugin-video-box-delete img {\n  width: 14px;\n}\n.plugin-video-box-delete:hover {\n  opacity: 1;\n}\n",""]),t.exports=e},function(t,e,n){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r,i,o=t[1]||"",a=t[3];if(!a)return o;if(e&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,l=[],c=!1,h=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&A())}function A(){if(!c){var t=s(d);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||c||s(A)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){n.r(e);var r,i,o=n(0),a=n(3),s=(n(4),n(1)),u=n(5),l=n(2),c=n(6),h=function(){function t(t){this.player=t,this.isFirstSync=!0}return t.prototype.syncProgress=function(t){this.isFirstSync?(this.isFirstSync=!1,this.player.currentTime=t):Math.abs(this.player.currentTime-t)>=2&&(this.player.currentTime=t)},t}(),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),A=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},f=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},p=function(t){return new Promise((function(e){return setTimeout(e,t)}))};!function(t){t.host="host",t.guest="guest",t.listener="listener"}(i||(i={}));var g,v=function(t){function e(e){var n=t.call(this,e)||this;return n.selfUserInf=null,n.playerState=!1,n.handleStartCondition=function(){return A(n,void 0,void 0,(function(){var t,e=this;return f(this,(function(n){switch(n.label){case 0:return t=this.props.plugin,this.setMyIdentityRoom(),[4,this.handleNativePlayerState(t.attributes.play)];case 1:return n.sent(),this.playerState=t.attributes.play,this.player.current&&(this.handleFirstSeek(),this.player.current.addEventListener("play",(function(){e.handleRemotePlayState(!0)})),this.player.current.addEventListener("pause",(function(){e.handleRemotePlayState(!1)})),this.player.current.addEventListener("seeked",(function(){if(e.player.current){var n=t.attributes.currentTime;e.handleRemoteSeekData(n)}})),this.player.current.addEventListener("volumechange",(function(t){e.handleRemoteVolumeChange(t.target.volume),e.handleRemoteMuteState(t.target.muted)}))),[2]}}))}))},n.handleFirstSeek=function(t){if(!t){var e,r=n.props.plugin,i=Date.now()/1e3;e=r.attributes.seekTime?r.attributes.seek+i-r.attributes.seekTime:r.attributes.seek,n.syncNode.syncProgress(e)}},n.isHost=function(){return!(!n.selfUserInf||n.selfUserInf.identity!==i.host)},n.setMyIdentityRoom=function(){var t=n.props.plugin;t.context&&t.context.identity&&(n.selfUserInf={identity:t.context.identity})},n.handleRemoteSeekData=function(t){var e=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({seek:t,seekTime:Date.now()/1e3})},n.handleRemoteMuteState=function(t){var e=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({mute:t})},n.handleRemoteVolumeChange=function(t){var e=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({volume:t})},n.handleRemotePlayState=function(t){var e=n.props.plugin;n.playerState=t;var r=e.attributes.currentTime;n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({play:t,seek:r,seekTime:Date.now()/1e3})},n.lastSyncProgressTimestamp=0,n.onTimeUpdate=function(t){var e=n.props.plugin,r=Date.now();r-n.lastSyncProgressTimestamp>1e3&&(n.lastSyncProgressTimestamp=r,n.selfUserInf&&n.selfUserInf.identity===i.host&&e.putAttributes({currentTime:t,play:n.playerState}))},n.handleNativePlayerState=function(t){return A(n,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];n.label=1;case 1:return n.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return n.sent(),[3,6];case 3:return""+(e=n.sent()).name!="NotAllowedError"&&""+e.name!="AbortError"?[3,5]:(this.setState({selfMute:!0}),[4,this.player.current.play()]);case 4:n.sent(),n.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),n.label=8;case 8:return[2]}}))}))},n.handleSeekReaction=function(t,e){return A(n,void 0,void 0,(function(){return f(this,(function(n){return this.isHost()||this.player.current&&void 0!==e&&(this.player.current.currentTime=t+Date.now()/1e3-e),[2]}))}))},n.timeUpdate=function(){if(n.player.current){var t=n.player.current.currentTime;n.onTimeUpdate(t)}},n.detectVideoClickEnable=function(){var t=n.props.plugin;return t.context&&t.context.identity?t.context.identity!==i.host?"none":"auto":"none"},n.renderMuteBox=function(){var t=n.props.plugin;return t.context&&t.context.identity&&t.context.identity!==i.host&&n.state.selfMute?o.createElement("div",{className:"media-mute-box"},o.createElement("div",{onClick:function(){n.setState({selfMute:!1})},onTouchStart:function(){n.setState({selfMute:!1})},style:{pointerEvents:"auto"},className:"media-mute-box-inner"},o.createElement("img",{src:u,alt:"mute_icon"}),o.createElement("span",null,"unmute"))):null},n.handleRemove=function(){return A(n,void 0,void 0,(function(){var t;return f(this,(function(e){switch(e.label){case 0:return t=this.props.plugin,this.handleRemotePlayState(!1),[4,p(300)];case 1:return e.sent(),t.remove(),[2]}}))}))},n.renderDeleteBtn=function(){var t=n.props.plugin;return t.context&&t.context.identity&&t.context.identity===i.host?o.createElement("div",{style:{pointerEvents:"auto"},className:"plugin-audio-box-delete",onClick:n.handleRemove},o.createElement("img",{src:c,alt:"delete"})):null},n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:o.createElement("div",{className:"plugin-video-box-nav"},o.createElement("div",null,o.createElement("img",{style:{width:20,marginLeft:8},src:l,alt:"video_plugin"}),o.createElement("span",null,"Video Player")),n.renderDeleteBtn())},n.handleOnEnd=function(){return A(n,void 0,void 0,(function(){var t;return f(this,(function(e){switch(e.label){case 0:return t=this.props.plugin,this.player.current?this.selfUserInf?this.selfUserInf.identity!==i.host?[3,2]:(t.putAttributes({seek:0,seekTime:void 0,currentTime:0}),[4,p(500)]):[3,5]:[3,7];case 1:return e.sent(),this.player.current.load(),[3,4];case 2:return[4,p(1e3)];case 3:e.sent(),this.player.current.load(),e.label=4;case 4:return[3,7];case 5:return[4,p(1e3)];case 6:e.sent(),this.player.current.load(),e.label=7;case 7:return this.setState({isEnd:!0}),[2]}}))}))},n.handleOnLoadedMetadataCapture=function(){return A(n,void 0,void 0,(function(){var t,e;return f(this,(function(n){switch(n.label){case 0:return t=navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),e=this.state.isEnd,t?[4,p(300)]:[3,2];case 1:n.sent(),this.handleFirstSeek(e),n.label=2;case 2:return[2]}}))}))},n.player=o.createRef(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionSeekTimeDisposer=n.startSeekTimeReaction(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionSyncDisposer=n.startSyncReaction(),n.state={play:!1,seek:0,selfMute:!1,currentTime:0,mute:!1,volume:1,isEnd:!1},n}return d(e,t),e.prototype.componentDidMount=function(){return A(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.syncNode=new h(this.player.current),[4,this.handleStartCondition()];case 1:return t.sent(),[2]}}))}))},e.prototype.startPlayReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.play}),(function(e){return A(t,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.isHost()?[3,2]:[4,this.handleNativePlayerState(e)];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.startSeekReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.seek}),(function(n){return A(t,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,this.handleSeekReaction(n,e.attributes.seekTime)];case 1:return t.sent(),[2]}}))}))}))},e.prototype.startSyncReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.currentTime}),(function(e){return A(t,void 0,void 0,(function(){return f(this,(function(t){return this.isHost()||this.player.current&&Math.abs(e-this.player.current.currentTime)>2&&(this.player.current.currentTime=e),[2]}))}))}))},e.prototype.startSeekTimeReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.seekTime}),(function(n){return A(t,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,this.handleSeekReaction(e.attributes.seek,n)];case 1:return t.sent(),[2]}}))}))}))},e.prototype.startVolumeReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.volume}),(function(e){t.isHost()||t.player.current&&(t.player.current.volume=e)}))},e.prototype.startMuteTimeReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.mute}),(function(e){t.isHost()||t.setState({mute:e})}))},e.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionSeekTimeDisposer(),this.reactionSyncDisposer(),this.player.current&&this.player.current.pause()},e.prototype.render=function(){var t=this.props,e=t.size,n=t.plugin,r=t.scale,i=this.state,a=i.mute,s=i.selfMute,u=0===r?1:r;return o.createElement("div",{className:"plugin-video-box",style:{width:e.width/u,height:e.height/u,transform:"scale("+u+")"}},this.renderNavigation(),o.createElement("div",{className:"plugin-video-box-body"},this.renderMuteBox(),o.createElement("div",{className:"white-plugin-video-box"},o.createElement("video",{"webkit-playsinline":"true",playsInline:!0,poster:n.attributes.poster,className:"white-plugin-video",src:n.attributes.pluginVideoUrl,ref:this.player,muted:a||s,style:{width:"100%",height:"100%",pointerEvents:this.detectVideoClickEnable(),outline:"none"},disablePictureInPicture:!0,onLoadedMetadataCapture:this.handleOnLoadedMetadataCapture,onEnded:this.handleOnEnd,controls:!0,controlsList:"nodownload nofullscreen",onTimeUpdate:this.timeUpdate,preload:"metadata"}))))},e}(o.Component),m=(g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},b=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},w=function(t){function e(e){var n=t.call(this,e)||this;return n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:o.createElement("div",{className:"plugin-video-box-nav"},o.createElement("div",null,o.createElement("img",{style:{width:20,marginLeft:8},src:l,alt:"video_plugin"}),o.createElement("span",null,"Video Player")))},n.player=o.createRef(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionReplayPlayingDisposer=n.startReplayPlayingReaction(),n.state={mute:!1},n}return m(e,t),e.prototype.componentDidMount=function(){this.syncNode=new h(this.player.current)},e.prototype.startPlayReaction=function(){var t=this;return Object(s.a)((function(){return t.props.plugin.attributes.play}),(function(e){return y(t,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:if(!e)return[3,7];if(!this.player.current)return[3,6];t.label=1;case 1:return t.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return t.sent(),[3,6];case 3:return""+t.sent().name!="NotAllowedError"?[3,5]:[4,this.player.current.play()];case 4:t.sent(),t.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),t.label=8;case 8:return[2]}}))}))}))},e.prototype.startSeekReaction=function(){var t=this;return Object(s.a)((function(){return t.props.plugin.playerTimestamp}),(function(e){var n=t.props.plugin.attributes,r=n.seek,i=n.seekTime;if(void 0!==i){var o=r+(t.props.player.beginTimestamp+e)/1e3-i;t.syncNode.syncProgress(o)}}))},e.prototype.startReplayPlayingReaction=function(){var t=this;return Object(s.a)((function(){return t.props.plugin.isPlaying}),(function(e){return y(t,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:if(!e)return[3,7];if(!this.player.current)return[3,6];t.label=1;case 1:return t.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return t.sent(),[3,6];case 3:return""+t.sent().name!="NotAllowedError"?[3,5]:[4,this.player.current.play()];case 4:t.sent(),t.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),t.label=8;case 8:return[2]}}))}))}))},e.prototype.startVolumeReaction=function(){var t=this;return Object(s.a)((function(){return t.props.plugin.attributes.volume}),(function(e){t.player.current&&(t.player.current.volume=e)}))},e.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionReplayPlayingDisposer()},e.prototype.startMuteTimeReaction=function(){var t=this,e=this.props.plugin;return Object(s.a)((function(){return e.attributes.mute}),(function(e){t.setState({mute:e})}))},e.prototype.render=function(){var t=this.props,e=t.size,n=t.plugin,r=t.scale,i=0===r?1:r;return o.createElement("div",{className:"plugin-video-box",style:{width:e.width/i,height:e.height/i,transform:"scale("+i+")"}},this.renderNavigation(),o.createElement("div",{className:"plugin-video-box-body"},o.createElement("div",{className:"white-plugin-video-box"},o.createElement("video",{"webkit-playsinline":"true",playsInline:!0,poster:n.attributes.poster?n.attributes.poster:void 0,className:"white-plugin-video",src:n.attributes.pluginVideoUrl,ref:this.player,muted:this.state.mute,style:{width:"100%",height:"100%",pointerEvents:"none",outline:"none"},controls:!1,preload:"auto"}))))},e}(o.Component);n.d(e,"videoPlugin",(function(){return S}));var x,_=(x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),T=function(){return(T=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},E=function(t){function e(e){return t.call(this,e)||this}return _(e,t),e.prototype.render=function(){var t=this;return o.createElement(a.CNode,{context:this.props.cnode},o.createElement(a.RoomConsumer,null,(function(e){return e?o.createElement(v,T({},t.props,{room:e})):null})),o.createElement(a.PlayerConsumer,null,(function(e){return e?o.createElement(w,T({},t.props,{player:e})):null})))},e}(o.Component),S=Object.freeze({kind:"video",render:E,defaultAttributes:{play:!1,seek:0,mute:!1,volume:1,currentTime:0},hitTest:function(t){var e=t.component.context.getMemberState();return!(e&&"eraser"===e.currentApplianceName)}})}])},"object"==r(e)&&"object"==r(t)?t.exports=i(n(17328),n(71895)):n.amdD([,],i)},56868:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var i;t=n.nmd(t),window,i=function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==r(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzFweCIgaGVpZ2h0PSIyN3B4IiB2aWV3Qm94PSIwIDAgMzEgMjciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT52aWRlbyAoMSk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InZpZGVvLSgxKSIgZmlsbD0iIzJDMkMyQyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI2LjY3NTIyODEsMjYuMDgzNTA4OCBMMy43NTI2MzE1OCwyNi4wODM1MDg4IEMxLjY4NTk2NDksMjYuMDgzNTA4OCAwLDI0LjMyNTc1NDQgMCwyMi4xNTQ2NjY3IEwwLDMuOTMxMDE3NTQgQzAsMS43NjY0NTYxNSAxLjY3OTQzODU5LDAgMy43NTI2MzE1OCwwIEwyNi42NzUyMjgxLDAgQzI4Ljc0MTg5NDcsMCAzMC40MzAwMzUxLDEuNzU5OTI5ODMgMzAuNDMwMDM1MSwzLjkzMTAxNzU0IEwzMC40MzAwMzUxLDIyLjE1NDY2NjcgQzMwLjQyMTMzMzQsMjQuMzE3MDUyNiAyOC43NDE4OTQ3LDI2LjA4MzUwODggMjYuNjc1MjI4MSwyNi4wODM1MDg4IFogTTMuNzUyNjMxNTgsMS40MjQ5MTIyNyBDMi40MzIxNDAzNiwxLjQyNDkxMjI3IDEuMzU1Mjk4MjUsMi41NTM5NjQ5IDEuMzU1Mjk4MjUsMy45Mzc1NDM4NSBMMS4zNTUyOTgyNSwyMi4xNjExOTMgQzEuMzU1Mjk4MjUsMjMuNTQ0NzcxOSAyLjQzMjE0MDM2LDI0LjY3MTY0OTEgMy43NTI2MzE1OCwyNC42NzE2NDkxIEwyNi42NzUyMjgxLDI0LjY3MTY0OTEgQzI3Ljk5NTcxOTMsMjQuNjcxNjQ5MSAyOS4wNzQ3MzY4LDIzLjU0NDc3MTkgMjkuMDc0NzM2OCwyMi4xNjExOTMgTDI5LjA3NDczNjgsMy45MzEwMTc1NCBDMjkuMDc0NzM2OCwyLjU0NzQzODU5IDI3Ljk5NTcxOTMsMS40MTgzODU5NiAyNi42NzUyMjgxLDEuNDE4Mzg1OTYgTDMuNzUyNjMxNTgsMS40MTgzODU5NiBMMy43NTI2MzE1OCwxLjQyNDkxMjI3IFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTUuMDI3NDM4NTksMjYuMDc2OTgyNSBDNC42NDU1MTEzLDI2LjA2NjMwNjUgNC4zNDM1NjQwOSwyNS43NDk3OTU5IDQuMzUwODc3MiwyNS4zNjc3ODk1IEw0LjM1MDg3NzIsMC43MDkxOTI5OTEgQzQuMzUwODc3MiwwLjMxNzYxNDA0NCA0LjY1NTQzODU5LDAgNS4wMjc0Mzg1OSwwIEM1LjQxMDIyMjg5LDAuMDA5NTAzMDE3NzYgNS43MTM0NzI3OSwwLjMyNjM2MDI4OCA1LjcwNjE3NTQzLDAuNzA5MTkyOTkxIEw1LjcwNjE3NTQzLDI1LjM2Nzc4OTUgQzUuNzA2MTc1NDMsMjUuNzU5MzY4NCA1LjQwODE0MDMzLDI2LjA3Njk4MjUgNS4wMjc0Mzg1OSwyNi4wNzY5ODI1IEw1LjAyNzQzODU5LDI2LjA3Njk4MjUgWiBNMjUuMDE1MzY4NCwyNi4wNzY5ODI1IEMyNC42MzM0NDExLDI2LjA2NjMwNjYgMjQuMzMxNDkzOSwyNS43NDk3OTYgMjQuMzM4ODA3LDI1LjM2Nzc4OTUgTDI0LjMzODgwNywwLjcwOTE5Mjk5MSBDMjQuMzM4ODA3LDAuMzE3NjE0MDQ0IDI0LjY0MzM2ODQsMCAyNS4wMTUzNjg0LDAgQzI1LjM5ODE1MjcsMC4wMDk1MDMwMTc3NiAyNS43MDE0MDI2LDAuMzI2MzYwMjg4IDI1LjY5NDEwNTMsMC43MDkxOTI5OTEgTDI1LjY5NDEwNTMsMjUuMzY3Nzg5NSBDMjUuNzAxNDAyNiwyNS43NTA2MjIyIDI1LjM5ODE1MjcsMjYuMDY3NDc5NCAyNS4wMTUzNjg0LDI2LjA3Njk4MjUgTDI1LjAxNTM2ODQsMjYuMDc2OTgyNSBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjYyMDYzMTU4LDcuOTQ0NzAxNzUgTDAuNjAwNDIxMDUzLDcuOTQ0NzAxNzUgQzAuMjY5NzU0Mzc3LDcuOTQ0NzAxNzUgMCw3LjYyNDkxMjI3IDAsNy4yMzU1MDg3OCBDMCw2Ljg0MzkyOTgzIDAuMjY5NzU0Mzc3LDYuNTI2MzE1NzkgMC42MDA0MjEwNTMsNi41MjYzMTU3OSBMNC42MjA2MzE1OCw2LjUyNjMxNTc5IEM0Ljk1MTI5ODI1LDYuNTI2MzE1NzkgNS4yMjEwNTI2Myw2Ljg0NjEwNTI2IDUuMjIxMDUyNjMsNy4yMzU1MDg3OCBDNS4yMjEwNTI2Myw3LjYyNzA4NzczIDQuOTU3ODI0NTcsNy45NDQ3MDE3NSA0LjYyMDYzMTU4LDcuOTQ0NzAxNzUgWiBNNC42MjA2MzE1OCwxMy41MDcyOTgzIEwwLjYwMDQyMTA1MywxMy41MDcyOTgzIEMwLjI2OTc1NDM3NywxMy41MDcyOTgzIDAsMTMuMTg3NTA4OCAwLDEyLjc5ODEwNTMgQzAsMTIuNDA2NTI2MyAwLjI2OTc1NDM3NywxMi4wODg5MTIzIDAuNjAwNDIxMDUzLDEyLjA4ODkxMjMgTDQuNjIwNjMxNTgsMTIuMDg4OTEyMyBDNC45NTEyOTgyNSwxMi4wODg5MTIzIDUuMjIxMDUyNjMsMTIuNDA2NTI2MyA1LjIyMTA1MjYzLDEyLjc5ODEwNTMgQzUuMjIxMDUyNjMsMTMuMTg3NTA4OCA0Ljk1NzgyNDU3LDEzLjUwNzI5ODMgNC42MjA2MzE1OCwxMy41MDcyOTgzIEw0LjYyMDYzMTU4LDEzLjUwNzI5ODMgWiBNNC42MjA2MzE1OCwxOS43NzAzODYgTDAuNjAwNDIxMDUzLDE5Ljc3MDM4NiBDMC4yNjk3NTQzNzcsMTkuNzcwMzg2IDAsMTkuNDUwNTk2NSAwLDE5LjA2MTE5MyBDMCwxOC42Njk2MTQgMC4yNjk3NTQzNzcsMTguMzUyIDAuNjAwNDIxMDUzLDE4LjM1MiBMNC42MjA2MzE1OCwxOC4zNTIgQzQuOTUxMjk4MjUsMTguMzUyIDUuMjIxMDUyNjMsMTguNjcxNzg5NSA1LjIyMTA1MjYzLDE5LjA2MTE5MyBDNS4yMjEwNTI2MywxOS40NTI3NzE5IDQuOTU3ODI0NTcsMTkuNzcwMzg2IDQuNjIwNjMxNTgsMTkuNzcwMzg2IEw0LjYyMDYzMTU4LDE5Ljc3MDM4NiBaIE0yOS4zNzA1OTY1LDcuOTQ0NzAxNzUgTDI1LjAxNzU0MzksNy45NDQ3MDE3NSBDMjQuNjU4NTk2NSw3Ljk0NDcwMTc1IDI0LjM2NzA4NzcsNy42MjQ5MTIyNyAyNC4zNjcwODc3LDcuMjM1NTA4NzggQzI0LjM2NzA4NzcsNi44NDM5Mjk4MyAyNC42NTg1OTY1LDYuNTI2MzE1NzkgMjUuMDE3NTQzOSw2LjUyNjMxNTc5IEwyOS4zNjg0MjExLDYuNTI2MzE1NzkgQzI5LjcyNTE5Myw2LjUyNjMxNTc5IDMwLjAxODg3NzIsNi44NDYxMDUyNiAzMC4wMTg4NzcyLDcuMjM1NTA4NzggQzMwLjAxODg3NzIsNy42MjcwODc3MyAyOS43MjUxOTMsNy45NDQ3MDE3NSAyOS4zNjg0MjExLDcuOTQ0NzAxNzUgTDI5LjM3MDU5NjUsNy45NDQ3MDE3NSBaIE0yOS4zNzA1OTY1LDEzLjUwNzI5ODMgTDI1LjAxNzU0MzksMTMuNTA3Mjk4MyBDMjQuNjU4NTk2NSwxMy41MDcyOTgzIDI0LjM2NzA4NzcsMTMuMTg3NTA4OCAyNC4zNjcwODc3LDEyLjc5ODEwNTMgQzI0LjM2NzA4NzcsMTIuNDA2NTI2MyAyNC42NTg1OTY1LDEyLjA4ODkxMjMgMjUuMDE3NTQzOSwxMi4wODg5MTIzIEwyOS4zNjg0MjExLDEyLjA4ODkxMjMgQzI5LjcyNTE5MywxMi4wODg5MTIzIDMwLjAxODg3NzIsMTIuNDA2NTI2MyAzMC4wMTg4NzcyLDEyLjc5ODEwNTMgQzMwLjAxODg3NzIsMTMuMTg3NTA4OCAyOS43MjUxOTMsMTMuNTA3Mjk4MyAyOS4zNjg0MjExLDEzLjUwNzI5ODMgTDI5LjM3MDU5NjUsMTMuNTA3Mjk4MyBaIE0yOS4zNzA1OTY1LDE5Ljc3MDM4NiBMMjUuMDE3NTQzOSwxOS43NzAzODYgQzI0LjY1ODU5NjUsMTkuNzcwMzg2IDI0LjM2NzA4NzcsMTkuNDUwNTk2NSAyNC4zNjcwODc3LDE5LjA2MTE5MyBDMjQuMzY3MDg3NywxOC42Njk2MTQgMjQuNjU4NTk2NSwxOC4zNTIgMjUuMDE3NTQzOSwxOC4zNTIgTDI5LjM2ODQyMTEsMTguMzUyIEMyOS43MjUxOTMsMTguMzUyIDMwLjAxODg3NzIsMTguNjcxNzg5NSAzMC4wMTg4NzcyLDE5LjA2MTE5MyBDMzAuMDE4ODc3MiwxOS40NTI3NzE5IDI5LjcyNTE5MywxOS43NzAzODYgMjkuMzY4NDIxMSwxOS43NzAzODYgTDI5LjM3MDU5NjUsMTkuNzcwMzg2IFogTTExLjU1Mzc1NDQsMTguODYzMjY3MyBDMTEuNDM1MDcwMSwxOC44NjQ1Mzk2IDExLjMxODM0NzIsMTguODMyOTExNCAxMS4yMTY1NjE0LDE4Ljc3MTg1OTYgQzExLjAwMzE1OTUsMTguNjM5NDU1MiAxMC44NzQ0NjIzLDE4LjQwNTE2MDIgMTAuODc3MTUwNCwxOC4xNTQwMzUxIEwxMC44NzcxNTA0LDkuNDE1Mjk4MjUgQzEwLjg3NDQ2MjMsOS4xNjQxNzMxMiAxMS4wMDMxNTk1LDguOTI5ODc4MSAxMS4yMTY1NjE0LDguNzk3NDczNjggQzExLjQyNDA1NzUsOC42Njk5NjExNyAxMS42ODU2MjY3LDguNjY5OTYxMTcgMTEuODkzMTIyOCw4Ljc5NzQ3MzY4IEwxOS4xMjIxMDUzLDEzLjE2NzkyOTggQzE5LjMzNDg0MDgsMTMuMjk5OTMwNiAxOS40NjM0NDE2LDEzLjUzMzIyNTcgMTkuNDYxNTE2MywxMy43ODM1Nzg5IEMxOS40NjQyMDQ0LDE0LjAzNDcwNDEgMTkuMzM1NTA3MSwxNC4yNjg5OTkxIDE5LjEyMjEwNTMsMTQuNDAxNDAzNSBMMTEuODkzMTIyOCwxOC43NjUzMzMzIEMxMS43OTA3OTE2LDE4LjgyNzczMDMgMTEuNjczNTk2NywxOC44NjE1MzY1IDExLjU1Mzc1NDQsMTguODYzMjY3MyBaIE0xMi4yMzI0OTEyLDEwLjY0MDA3MDIgTDEyLjIzMjQ5MTIsMTYuOTI3MDg3NyBMMTcuNDI5NjE0LDEzLjc4MzU3ODkgTDEyLjIzMDMxNTgsMTAuNjQyMjQ1NiBMMTIuMjMyNDkxMiwxMC42NDAwNzAyIFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg=="},function(t,e,n){var r=n(5),i=n(6);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],u=e.base?s[0]+e.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var h=a(c),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:c,updater:p(d,e),references:1}),r.push(c)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,c=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function d(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var A=null,f=0;function p(t,e){var n,r,i;if(e.singleton){var o=f++;n=A||(A=u(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=u(e),r=d.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(t,e),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(t,e,n){(e=n(7)(!1)).push([t.i,".white-video-plugin-container {\n  display: flex;\n  flex-flow: column nowrap;\n  transform-origin: top left;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n}\n.white-video-plugin-nav {\n  height: 32px;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  background-image: linear-gradient(180deg, #e0e1e0 0%, #cdcdcc 100%);\n}\n.white-video-plugin-nav > img {\n  width: 20px;\n  margin-left: 8px;\n}\n.white-video-plugin-nav-title {\n  margin-left: 6px;\n  font-size: 12px;\n  font-weight: bold;\n  flex-grow: 1;\n}\n.white-video-plugin-nav-delete {\n  width: 22px;\n  height: 22px;\n  border: 0;\n  background-color: #ff756e;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 8px;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n.white-video-plugin-nav-delete > img {\n  width: 14px;\n}\n.white-video-plugin-nav-delete:hover {\n  opacity: 1;\n}\n.white-video-plugin-body {\n  flex-grow: 1;\n  background-color: #f2f4f5;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  justify-content: center;\n  height: calc(100% - 32px);\n}\n.white-video-plugin-body > audio {\n  flex-grow: 1;\n  outline: none;\n}\n",""]),t.exports=e},function(t,e,n){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r,i,o=t[1]||"",a=t[3];if(!a)return o;if(e&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e,n){n.r(e);var r=n(0),i=n.n(r),o=n(1),a=n(2),s=n.n(a),u=n(3),l=n.n(u),c=(n(4),function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))});function h(t){return c(this,void 0,void 0,(function(){return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,t.play()];case 1:return e.sent(),[2,!0];case 2:return e.sent(),t.muted=!0,[4,t.play()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}var d,A=function(t){return new Promise((function(e){return window.setTimeout(e,t)}))},f=function(){function t(){this.map=new Map}return t.prototype.changed=function(t,e){return!(this.map.has(t)&&function t(e,n){return e===n||!!Array.isArray(e)&&e.every((function(e,r){return t(e,n[r])}))}(this.map.get(t),e)||(this.map.set(t,e),0))},t.prototype.clear=function(){this.map.clear()},t}(),p=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},v=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.render=function(){var t=this;return i.a.createElement(o.CNode,{context:this.props.cnode},i.a.createElement(o.RoomConsumer,{children:function(e){return e&&i.a.createElement(b,g({},t.props,{room:e}))}}),i.a.createElement(o.PlayerConsumer,{children:function(e){return e&&i.a.createElement(b,g({},t.props,{player:e}))}}))},e}(r.Component),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.disposers=[],e.changedMap=new f,e.player=Object(r.createRef)(),e.timestamp=function(){return{currentTime:e.player.current.currentTime,hostTime:Date.now()}},e.removeSelf=function(){return v(e,void 0,void 0,(function(){var t;return m(this,(function(e){switch(e.label){case 0:return(t=this.props.plugin).putAttributes(g({paused:!0},this.timestamp())),[4,A(300)];case 1:return e.sent(),t.remove(),[2]}}))}))},e}return p(e,t),e.prototype.isHost=function(){return this.props.room&&this.props.plugin.context&&"host"===this.props.plugin.context.identity},e.prototype.componentDidMount=function(){this.props.room&&(this.isHost()?this.setupHost():this.setupNonHost()),this.props.player&&this.setupNonHost()},e.prototype.setupHost=function(){var t=this,e=this.props.plugin,n=this.player.current;n.currentTime=e.attributes.currentTime,n.addEventListener("play",(function(){e.putAttributes(g({paused:!1},t.timestamp()))})),n.addEventListener("pause",(function(){e.putAttributes(g({paused:!0},t.timestamp()))})),n.addEventListener("seeked",(function(){e.putAttributes(t.timestamp())})),n.addEventListener("volumechange",(function(){e.putAttributes({volume:n.volume,muted:n.muted})}));var r,i=NaN;n.addEventListener("timeupdate",(function(){i||(i=window.setTimeout((function(){i=NaN,e.putAttributes(t.timestamp())}),2e3))})),this.disposers.push((function(){return window.clearTimeout(i)})),n.addEventListener("ended",(function(){return v(t,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return e.putAttributes(g({paused:!0},this.timestamp())),[4,A(500)];case 1:return t.sent(),n.load(),[2]}}))}))})),/iPad|iPhone|iPod/.test(navigator.platform)&&(r=function(){n.currentTime=e.attributes.currentTime},window.requestAnimationFrame((function(){window.requestAnimationFrame(r)})))},e.prototype.setupNonHost=function(){var t=this,e=this.props.plugin,n=this.player.current,r=Object(o.autorun)((function(){return v(t,void 0,void 0,(function(){var t,r,i,o,a,s,u,l,c,d,A;return m(this,(function(f){switch(f.label){case 0:return t=e.isPlaying,r=e.playerTimestamp,i=e.playbackSpeed,o=e.attributes,a=o.paused,s=o.volume,u=o.muted,l=o.currentTime,c=o.hostTime,this.changedMap.changed("paused",[a,t])?!a&&t?[3,1]:(n.pause(),[3,3]):[3,3];case 1:return[4,h(n)];case 2:f.sent(),f.label=3;case 3:return this.changedMap.changed("volume",[s,u])&&(n.volume=e.attributes.volume,n.muted=e.attributes.muted),this.changedMap.changed("time",[l,c])&&c>0&&(d=Date.now(),this.props.player&&(d=this.props.player.beginTimestamp+r),A=l+(d-c)/1e3,Math.abs(n.currentTime-A)>2&&(n.currentTime=A)),this.changedMap.changed("rate",i)&&(n.playbackRate=i),[2]}}))}))}));this.disposers.push(r),this.disposers.push((function(){return t.changedMap.clear()}))},e.prototype.componentWillUnmount=function(){var t;null===(t=this.player.current)||void 0===t||t.pause(),this.disposers.forEach((function(t){return t()}))},Object.defineProperty(e.prototype,"containerStyle",{get:function(){var t=this.props,e=t.size,n=t.scale||1;return{width:e.width/n,height:e.height/n,transform:"scale("+n+")"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointerEventsStyle",{get:function(){return{pointerEvents:this.isHost()?"auto":"none"}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t=this.props,e=t.room,n=t.player,r=t.plugin;return e||n?i.a.createElement("div",{className:"white-video-plugin-container",style:this.containerStyle},!r.attributes.isNavigationDisable&&i.a.createElement("div",{className:"white-video-plugin-nav"},i.a.createElement("img",{src:s.a,alt:"video_plugin"}),i.a.createElement("span",{className:"white-video-plugin-nav-title"},"Video Player"),i.a.createElement("span",{className:"white-video-plugin-nav-delete",style:this.pointerEventsStyle,onClick:this.removeSelf},i.a.createElement("img",{src:l.a,alt:"delete_icon"}))),i.a.createElement("div",{className:"white-video-plugin-body"},i.a.createElement("video",{src:r.attributes.src,style:g({maxWidth:"100%",maxHeight:"100%"},this.pointerEventsStyle),controls:!!e,controlsList:"nodownload nofullscreen",preload:"metadata",ref:this.player,playsInline:!0,"webkit-playsinline":"true",poster:r.attributes.poster,disablePictureInPicture:!0}))):null},e}(r.Component);n.d(e,"videoPlugin2",(function(){return w}));var w=Object.freeze({kind:"video2",render:y,defaultAttributes:{src:"",hostTime:0,currentTime:0,paused:!0,muted:!1,volume:1},hitTest:function(t){var e=t.component.context.getMemberState();return!("eraser"===(null==e?void 0:e.currentApplianceName))}})}])},"object"==r(e)&&"object"==r(t)?t.exports=i(n(17328),n(71895)):n.amdD([,],i)},18371:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.playerStateNameSpace=e.playerNameSpace=e.sdkNameSpace=e.roomStateNamespace=e.roomNamespace=e.roomSyncNamespace=e.pptNamespace=e.ScaleMode=void 0,function(t){t[t.Scale=0]="Scale",t[t.AspectFit=1]="AspectFit",t[t.AspectFitScale=2]="AspectFitScale",t[t.AspectFitSpace=3]="AspectFitSpace",t[t.AspectFill=4]="AspectFill",t[t.AspectFillScale=5]="AspectFillScale"}(e.ScaleMode||(e.ScaleMode={})),e.pptNamespace="ppt",e.roomSyncNamespace="room.sync",e.roomNamespace="room",e.roomStateNamespace="room.state",e.sdkNameSpace="sdk",e.playerNameSpace="player",e.playerStateNameSpace="player.state"},61918:function(t,e,n){var r;function i(t,e,n){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},i(t,e,n||t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||T(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||T(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function u(t){var e=A();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e="function"==typeof Map?new Map:void 0;return h=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return d(t,arguments,p(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,t)},h(t)}function d(t,e,n){return d=A()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i},d.apply(null,arguments)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function g(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){g(o,r,i,a,s,"next",t)}function s(t){g(o,r,i,a,s,"throw",t)}a(void 0)}))}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=T(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function T(t,e){if(t){if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var S=Object.defineProperty,M=Object.defineProperties,C=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,k=function(t,e,n){return e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},P=function(t,e){for(var n in e||(e={}))N.call(e,n)&&k(t,n,e[n]);if(I){var r,i=_(I(e));try{for(i.s();!(r=i.n()).done;){n=r.value;B.call(e,n)&&k(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t},D=function(t,e){return M(t,C(e))};Object.defineProperties(e,x({__esModule:{value:!0}},Symbol.toStringTag,{value:"Module"}));var L=n(11377),O=n(11157),R=n(88600),F=n(71895),U=n(90783),j=n(95685),z=n(51013),H=n(59496);function Q(t){return t&&"object"==w(t)&&"default"in t?t:{default:t}}var G,V,W=Q(L),Y=Q(O),X=Q(H),q=((G=q||{}).AppMove="AppMove",G.AppFocus="AppFocus",G.AppResize="AppResize",G.AppBoxStateChange="AppBoxStateChange",G.GetAttributes="GetAttributes",G.UpdateWindowManagerWrapper="UpdateWindowManagerWrapper",G.InitReplay="InitReplay",G.WindowCreated="WindowCreated",G.SetMainViewScenePath="SetMainViewScenePath",G.SetMainViewSceneIndex="SetMainViewSceneIndex",G.SetAppFocusIndex="SetAppFocusIndex",G.SwitchViewsToFreedom="SwitchViewsToFreedom",G.MoveCamera="MoveCamera",G.MoveCameraToContain="MoveCameraToContain",G.CursorMove="CursorMove",G.RootDirRemoved="RootDirRemoved",G.Refresh="Refresh",G.InitMainViewCamera="InitMainViewCamera",G),K="__WindowManger",Z="__WindowMangerEnsureReconnected__",J=function(t){return t.Size="size",t.Position="position",t.SceneIndex="SceneIndex",t.ZIndex="zIndex",t}(J||{}),$=function(t){return t.setBoxSize="setBoxSize",t.setBoxMinSize="setBoxMinSize",t.destroy="destroy",t}($||{}),tt=function(t){return t.StartCreate="StartCreate",t}(tt||{}),et=function(t){return t.Leave="leave",t.Normal="normal",t}(et||{}),nt="2.16.1",rt="/",it="/init",ot=new Y.default,at=function(){function t(){var e=this;m(this,t),this.list=[],this.isEmit=!1,this.invoked=function(){e.currentInvoker=void 0,0===e.list.length&&(e.clear(),e.emitReady())},this.clear=function(){clearInterval(e.timer),e.timer=void 0}}return b(t,[{key:"initInterval",value:function(){var t=this;return setInterval((function(){t.invoke()}),50)}},{key:"push",value:function(t){this.list.push(t),this.invoke(),void 0===this.timer&&this.list.length>0&&(this.timer=this.initInterval())}},{key:"invoke",value:function(){var t=this;if(0!==this.list.length&&void 0===this.currentInvoker){var e=this.list.shift();e&&(this.currentInvoker=e,e().then((function(){t.invoked()})).catch((function(e){console.error("[WindowManager]: create app error: ".concat(e.message)),t.invoked()})))}}},{key:"emitReady",value:function(){this.isEmit||setTimeout((function(){ot.emit("ready")}),50),this.isEmit=!0}},{key:"empty",value:function(){this.list=[],this.clear()}},{key:"destroy",value:function(){this.timer&&this.clear()}}]),t}(),st=new Y.default,ut=function(){var t=v(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,e){var n=indexedDB.open("__WindowManagerAppCache",2);n.onerror=function(t){e(t)},n.onupgradeneeded=function(t){var e=t.target.result;e.objectStoreNames.contains("apps")||e.createObjectStore("apps",{keyPath:"kind"}).createIndex("kind","kind",{unique:!0})},n.onsuccess=function(){var e=n.result;t(e)}}));case 2:V=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),lt=function(t,e){if(V)return function(t,e){return new Promise((function(n,r){var i=t.transaction(["apps"],"readwrite").objectStore("apps").add(e);i.onsuccess=function(){return n()},i.onerror=function(){return r()}}))}(V,{kind:t,sourceCode:e})},ct=function(){var t=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!V){t.next=6;break}return t.next=3,ht(V,e);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=null;case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function ht(t,e){return new Promise((function(n,r){var i=t.transaction(["apps"]).objectStore("apps").index("kind").get(e);i.onerror=function(t){return r(t)},i.onsuccess=function(){i.result?n(i.result):n(null)}}))}var dt=function(){var t=v(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct(e);case 2:if(!(n=t.sent)){t.next=5;break}return t.abrupt("return",n.sourceCode);case 5:return t.next=7,gt(e,{timeout:1e4});case 7:return t.next=9,t.sent.text();case 9:return r=t.sent,t.next=12,lt(e,r);case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),At=function(t,e){var n=Function(t+"\n;return ".concat(e))();return void 0===n&&(n=window[e]),n},ft=function(){var t=v(regeneratorRuntime.mark((function t(e,n,r){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r||"NetlessApp"+n,ot.emit("loadApp",{kind:n,status:"start"}),t.prev=2,t.next=5,dt(e);case 5:if((o=t.sent)&&0!==o.length){t.next=8;break}throw ot.emit("loadApp",{kind:n,status:"failed",reason:"script is empty."}),new Error("[WindowManager]: script is empty.");case 8:t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(2),ot.emit("loadApp",{kind:n,status:"failed",reason:t.t0.message}),t.t0;case 13:return t.abrupt("return",pt(o,i,n));case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n,r){return t.apply(this,arguments)}}(),pt=function(t,e,n){try{var r=At(t,e);return ot.emit("loadApp",{kind:n,status:"success"}),r}catch(r){if(r.message.includes("Can only have one anonymous define call per script file")){var i=window.define;"function"==typeof i&&i.amd&&delete i.amd;var o=At(t,e);return ot.emit("loadApp",{kind:n,status:"success"}),o}throw ot.emit("loadApp",{kind:n,status:"failed",reason:r.message}),r}};function gt(t,e){return vt.apply(this,arguments)}function vt(){return vt=v(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.timeout,i=void 0===r?1e4:r,o=new AbortController,a=setTimeout((function(){return o.abort()}),i),t.next=6,fetch(e,D(P({},n),{signal:o.signal,headers:{"content-type":"text/plain"}}));case 6:return s=t.sent,t.abrupt("return",(clearTimeout(a),s));case 8:case"end":return t.stop()}}),t)}))),vt.apply(this,arguments)}var mt=function(){function t(){var e=this;m(this,t),this.kindEmitters=new Map,this.registered=new Map,this.appClassesCache=new Map,this.appClasses=new Map,this.syncRegisterApp=null,this.onSyncRegisterAppChange=function(t){e.register({kind:t.kind,src:t.src})}}var e,n;return b(t,[{key:"setSyncRegisterApp",value:function(t){this.syncRegisterApp=t}},{key:"register",value:(n=v(regeneratorRuntime.mark((function t(e){var n,r,i,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.appClassesCache.delete(e.kind),this.registered.set(e.kind,e),"string"==typeof(n=e.src)&&(r=function(){var t=v(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ft(n,e.kind,e.name);case 2:return r=t.sent,t.abrupt("return",r.__esModule?r.default:r);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),this.syncRegisterApp&&this.syncRegisterApp({kind:e.kind,src:n,name:e.name})),"function"==typeof n&&(r=function(){var t=v(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:if(!(e=t.sent)){t.next=5;break}return t.abrupt("return",((e.__esModule||e.default)&&(e=e.default),e));case 5:throw new Error("[WindowManager]: load remote script failed, ".concat(n));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),"object"==w(n)&&(r=function(){var t=v(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),this.appClasses.set(e.kind,v(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.appClassesCache.get(e.kind),t.abrupt("return",(n||(n=r(),o.appClassesCache.set(e.kind,n)),n));case 2:case"end":return t.stop()}}),t)})))),e.addHooks&&(i=this.createKindEmitter(e.kind))&&e.addHooks(i);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"unregister",value:function(t){this.appClasses.delete(t),this.appClassesCache.delete(t),this.registered.delete(t);var e=this.kindEmitters.get(t);e&&(e.clearListeners(),this.kindEmitters.delete(t))}},{key:"notifyApp",value:(e=v(regeneratorRuntime.mark((function t(e,n,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.kindEmitters.get(e),t.next=3,null==i?void 0:i.emit(n,r);case 3:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"createKindEmitter",value:function(t){if(!this.kindEmitters.has(t)){var e=new Y.default;this.kindEmitters.set(t,e)}return this.kindEmitters.get(t)}}]),t}(),yt=new mt,bt=function(){var t=v(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null==(n=yt.appClasses.get(e))?void 0:n();case 2:return i=t.sent,t.abrupt("return",i&&(null==(r=i.config)?void 0:r.singleton)?e:"".concat(e,"-").concat(U.v4().replace("-","").slice(0,8)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),wt=function(t,e){if(t.focusScenePath!==e)return t.focusScenePath=e,t},xt=function(t,e){if(t&&t.isWritable&&t.state.sceneState.scenePath!==e){var n="/"===e?"":e;t.setScenePath(n)}},_t=function(t,e,n){t&&t.scenePathType(e)!==F.ScenePathType.None&&t.removeScenes(e,n)};R.debounce((function(t,e){t.emit("mainViewModeChange",e)}),200);var Tt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Et(t)[e];if(r){var i=r[n];if(i){var o=i.name;return e===rt?"/".concat(o):"".concat(e,"/").concat(o)}}},Et=function(t){return t.entireScenes()},St=function(t,e,n,r){return null==t?void 0:t.putScenes(e,n,r)},Mt=function(t){var e=t.split("/");e.pop();var n=e.join("/");return""===n&&(n="/"),n},Ct=function(t){return t.endsWith("/")?t.slice(0,-1):t},It=function(t){var e=t.split(".").map((function(t){return t.padStart(2,"0")})).join("");return parseInt(e)},Nt=function(t){return new Promise((function(e){return setTimeout(e,t)}))},Bt=function(t){return 1===t.split("").reduce((function(t,e){return e===rt&&(t+=1),t}),0)},kt=function(){function t(e){var n=this;m(this,t),this.manager=e,this.displayer=this.manager.displayer,this.mainMagixEventListener=function(t){if(t.authorId!==n.displayer.observerId){var e=t.payload;switch(e.eventName){case q.AppMove:n.appMoveHandler(e.payload);break;case q.AppResize:n.appResizeHandler(e.payload);break;case q.AppBoxStateChange:n.boxStateChangeHandler(e.payload);break;case q.SetMainViewScenePath:n.setMainViewScenePathHandler(e.payload);break;case q.MoveCamera:n.moveCameraHandler(e.payload);break;case q.MoveCameraToContain:n.moveCameraToContainHandler(e.payload);break;case q.CursorMove:n.cursorMoveHandler(e.payload);break;case q.RootDirRemoved:n.rootDirRemovedHandler();break;case q.Refresh:n.refreshHandler();break;case q.InitMainViewCamera:n.initMainViewCameraHandler();break;case q.SetAppFocusIndex:n.setAppFocusViewIndexHandler(e.payload)}}},this.appMoveHandler=function(t){var e;null==(e=n.boxManager)||e.moveBox(t)},this.appResizeHandler=function(t){var e,r;null==(e=n.boxManager)||e.resizeBox(Object.assign(t,{skipUpdate:!0})),null==(r=n.manager.room)||r.refreshViewSize()},this.boxStateChangeHandler=function(t){ot.emit("boxStateChange",t)},this.setMainViewScenePathHandler=function(t){var e=t.nextScenePath;wt(n.manager.mainView,e),ot.emit("mainViewScenePathChange",e)},this.moveCameraHandler=function(t){R.isEqual(R.omit(t,["animationMode"]),P({},n.manager.mainView.camera))||n.manager.mainView.moveCamera(t)},this.moveCameraToContainHandler=function(t){n.manager.mainView.moveCameraToContain(t)},this.cursorMoveHandler=function(t){st.emit("cursorMove",t)},this.rootDirRemovedHandler=function(){n.manager.createRootDirScenesCallback(),n.manager.mainViewProxy.rebind(),st.emit("rootDirRemoved")},this.refreshHandler=function(){n.manager.windowManger._refresh()},this.initMainViewCameraHandler=function(){n.manager.mainViewProxy.addCameraReaction()},this.setAppFocusViewIndexHandler=function(t){if("main"===t.type)n.manager.setSceneIndexWithoutSync(t.index);else if("app"===t.type&&t.appID){var e=n.manager.appProxies.get(t.appID);e&&e.setSceneIndexWithoutSync(t.index)}}}return b(t,[{key:"addListeners",value:function(){this.displayer.addMagixEventListener(K,this.mainMagixEventListener)}},{key:"removeListeners",value:function(){this.displayer.removeMagixEventListener(K,this.mainMagixEventListener)}},{key:"boxManager",get:function(){return this.manager.boxManager}}]),t}(),Pt=function(t){s(n,t);var e=u(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).message="[WindowManager]: app duplicate exists and cannot be created again",t}return n}(h(Error)),Dt=function(t){s(n,t);var e=u(n);function n(t){return m(this,n),e.call(this,"[WindowManager]: app ".concat(t," need register or provide src"))}return n}(h(Error)),Lt=function(t){s(n,t);var e=u(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).message="[WindowManager]: AppManager must be initialized",t}return n}(h(Error)),Ot=function(t){s(n,t);var e=u(n);function n(t){return m(this,n),e.call(this,"[WindowManager]: white-web-sdk version must large than ".concat(t))}return n}(h(Error)),Rt=function(t){s(n,t);var e=u(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).message="[WindowManager]: kind must be a valid string",t}return n}(h(Error)),Ft=function(t){s(n,t);var e=u(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).message="[WindowManager]: box need created",t}return n}(h(Error)),Ut=function(t){s(n,t);var e=u(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).message='[WindowManager]: ScenePath should start with "/"',t}return n}(h(Error)),jt=function(t){s(n,t);var e=u(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).message="[WindowManager]: boxManager not found",t}return n}(h(Error)),zt=function(t){s(n,t);var e=u(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).message="[WindowManager]: room phase only Connected can be bindContainer",t}return n}(h(Error)),Ht=function(t){return function(e,n){if(void 0!==e){if(F.listenUpdated){var r=function(e){e.map((function(t){return t.kind})).includes(t)&&n()};return F.listenUpdated(e,r),n(),function(){return F.unlistenUpdated(e,r)}}return F.reaction((function(){return e}),(function(){n()}),{fireImmediately:!0})}}},Qt=function(t,e,n){var r=null,i=F.reaction(t,(function(){r&&(r(),r=null);var i=t();R.isObject(i)?(r=function(){return F.unlistenUpdated(i,e)},F.listenUpdated(i,e)):null==n||n(i)}),{fireImmediately:!0});return function(){null==r||r(),i()}},Gt=Ht(F.UpdateEventKind.Removed);Ht(F.UpdateEventKind.Inserted);var Vt=Object.keys;function Wt(t){return Boolean(R.has(t,"__isRef"))}var Yt=function(){function t(){m(this,t),this.listeners=new Set}return b(t,[{key:"dispatch",value:function(t){this.listeners.forEach((function(e){return e(t)}))}},{key:"addListener",value:function(t){this.listeners.add(t)}},{key:"removeListener",value:function(t){this.listeners.delete(t)}},{key:"length",get:function(){return this.listeners.size}}]),t}(),Xt="_WM-STORAGE_",qt=function(){function t(e,n,r){var i=this;if(m(this,t),this._sideEffect=new j.SideEffectManager,this._destroyed=!1,this._refMap=new WeakMap,this._lastValue=new Map,this.onStateChanged=new Yt,r&&!R.isObject(r))throw new Error("Default state for Storage ".concat(n," is not an object."));this._context=e,this.id=n||null,this._state={};var o=this._getRawState(this._state);this._context.getIsWritable()&&(null===this.id?e.isAddApp&&r&&this.setState(r):(o===this._state||!R.isObject(o))&&(R.get(this._context.getAttributes(),[Xt])||this._context.updateAttributes([Xt],{}),this._context.updateAttributes([Xt,this.id],this._state),r&&this.setState(r))),Vt(o).forEach((function(t){if(null!==i.id||t!==Xt)try{var e=R.isObject(o[t])?JSON.parse(JSON.stringify(o[t])):o[t];Wt(e)?(i._state[t]=e.v,R.isObject(e.v)&&i._refMap.set(e.v,e)):i._state[t]=e}catch(e){console.error(e)}})),this._sideEffect.addDisposer(Qt((function(){return null===i.id?e.getAttributes():R.get(e.getAttributes(),[Xt,i.id])}),this._updateProperties.bind(this),this.destroy.bind(this)))}return b(t,[{key:"addStateChangedListener",value:function(t){var e=this;return this.onStateChanged.addListener(t),function(){return e.onStateChanged.removeListener(t)}}},{key:"ensureState",value:function(t){var e=this;return this.setState(Vt(t).reduce((function(n,r){return R.has(e._state,r)||(n[r]=t[r]),n}),{}))}},{key:"setState",value:function(t){var e=this;if(this._destroyed)console.error(new Error('Cannot call setState on destroyed Storage "'.concat(this.id,'".')));else if(this._context.getIsWritable()){var n=Vt(t);n.length>0&&n.forEach((function(n){var r=t[n];if(r!==e._state[n])if(void 0===r)e._lastValue.set(n,e._state[n]),delete e._state[n],e._setRawState(n,r);else{e._lastValue.set(n,e._state[n]),e._state[n]=r;var i=r;if(R.isObject(r)){var o=e._refMap.get(r);o||(o=function(t){return{k:j.genUID(),v:t,__isRef:!0}}(r),e._refMap.set(r,o)),i=o}e._setRawState(n,i)}}))}else console.error(new Error('Cannot setState on Storage "'.concat(this.id,'" without writable access')),t)}},{key:"emptyStorage",value:function(){if(!(R.size(this._state)<=0)){if(this._destroyed)return void console.error(new Error('Cannot empty destroyed Storage "'.concat(this.id,'".')));if(!this._context.getIsWritable())return void console.error(new Error('Cannot empty Storage "'.concat(this.id,'" without writable access.')));this.setState(R.mapValues(this._state,R.noop))}}},{key:"deleteStorage",value:function(){if(null===this.id)throw new Error("Cannot delete main Storage");this._context.getIsWritable()?(this.destroy(),this._context.updateAttributes([Xt,this.id],void 0)):console.error(new Error('Cannot delete Storage "'.concat(this.id,'" without writable access.')))}},{key:"destroy",value:function(){this._destroyed=!0,this._sideEffect.flushAll()}},{key:"_getRawState",value:function(t){var e;return null===this.id?null!=(e=this._context.getAttributes())?e:t:R.get(this._context.getAttributes(),[Xt,this.id],t)}},{key:"_setRawState",value:function(t,e){if(null===this.id){if(t===Xt)throw new Error('Cannot set attribute internal filed "'.concat(Xt,'"'));return this._context.updateAttributes([t],e)}return this._context.updateAttributes([Xt,this.id,t],e)}},{key:"_updateProperties",value:function(t){var e;if(this._destroyed)console.error(new Error('Cannot call _updateProperties on destroyed Storage "'.concat(this.id,'".')));else if(t.length>0){for(var n={},r=0;r<t.length;r++)try{var i=t[r],o=i.key;if(null===this.id&&o===Xt)continue;var a=R.isObject(i.value)?JSON.parse(JSON.stringify(i.value)):i.value,s=void 0;if(2===(this._lastValue.has(o)&&(s=this._lastValue.get(o),this._lastValue.delete(o)),i.kind))R.has(this._state,o)&&(s=this._state[o],delete this._state[o]),n[o]={oldValue:s};else{var u=a;if(Wt(a)){var l=a.k,c=a.v,h=this._state[o];R.isObject(h)&&(null==(e=this._refMap.get(h))?void 0:e.k)===l?u=h:(u=c,R.isObject(c)&&this._refMap.set(c,a))}u!==this._state[o]&&(s=this._state[o],this._state[o]=u),n[o]={newValue:u,oldValue:s}}}catch(i){console.error(i)}this.onStateChanged.dispatch(n)}}},{key:"state",get:function(){return this._destroyed&&console.warn('Accessing state on destroyed Storage "'.concat(this.id,'"')),this._state}},{key:"destroyed",get:function(){return this._destroyed}}]),t}(),Kt=function(){function t(e,n,r,i,o){var s=this;m(this,t),this.manager=e,this.boxManager=n,this.appId=r,this.appProxy=i,this.appOptions=o,this.mobxUtils={autorun:F.autorun,reaction:F.reaction,toJS:F.toJS},this.objectUtils={listenUpdated:F.listenUpdated,unlistenUpdated:F.unlistenUpdated,listenDisposed:F.listenDisposed,unlistenDisposed:F.unlistenDisposed},this.store=this.manager.store,this.isReplay=this.manager.isReplay,this.getDisplayer=function(){return s.manager.displayer},this.getAttributes=function(){return s.appProxy.attributes},this.getScenes=function(){var t=s.store.getAppAttributes(s.appId);return null!=t&&t.isDynamicPPT?s.appProxy.scenes:null==t?void 0:t.options.scenes},this.getView=function(){return s.appProxy.view},this.mountView=function(t){var e=s.getView();e&&(e.divElement=t,setTimeout((function(){var t;null==(t=s.getRoom())||t.refreshViewSize()}),1e3))},this.getInitScenePath=function(){return s.manager.getAppInitPath(s.appId)},this.getIsWritable=function(){return s.manager.canOperate},this.getBox=function(){var t=s.boxManager.getBox(s.appId);if(t)return t;throw new Ft},this.getRoom=function(){return s.manager.room},this.setAttributes=function(t){s.manager.safeSetAttributes(x({},s.appId,t))},this.updateAttributes=function(t,e){s.manager.attributes[s.appId]&&s.manager.safeUpdateAttributes([s.appId].concat(a(t)),e)},this.setScenePath=function(){var t=v(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!s.appProxy.box||(s.appProxy.setFullPath(e),null==(n=s.getRoom())||n.setScenePath(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getAppOptions=function(){return"function"==typeof s.appOptions?s.appOptions():s.appOptions},this.createStorage=function(t,e){var n=new qt(s,t,e);return s.emitter.on("destroy",(function(){n.destroy()})),n},this.dispatchMagixEvent=function(){var t,e="".concat(s.appId,":").concat(arguments.length<=0?void 0:arguments[0]);return null==(t=s.manager.room)?void 0:t.dispatchMagixEvent(e,arguments.length<=1?void 0:arguments[1])},this.addMagixEventListener=function(t,e,n){var r="".concat(s.appId,":").concat(t);return s.manager.displayer.addMagixEventListener(r,e,n),function(){return s.manager.displayer.removeMagixEventListener(r,e)}},this.removeMagixEventListener=this.manager.displayer.removeMagixEventListener.bind(this.manager.displayer),this.nextPage=v(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.pageState.index+1,t.abrupt("return",e>s.pageState.length-1?(console.warn("[WindowManager] nextPage: index out of range"),!1):(s.appProxy.setSceneIndex(e),!0));case 2:case"end":return t.stop()}}),t)}))),this.prevPage=v(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.pageState.index-1,t.abrupt("return",e<0?(console.warn("[WindowManager] prevPage: index out of range"),!1):(s.appProxy.setSceneIndex(e),!0));case 2:case"end":return t.stop()}}),t)}))),this.addPage=function(){var t=v(regeneratorRuntime.mark((function t(e){var n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=null==e?void 0:e.after,r=null==e?void 0:e.scene,(i=s.appProxy.scenePath)&&(n?(o=s.pageState.index+1,St(s.manager.room,i,[r||{}],o)):St(s.manager.room,i,[r||{}]));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.removePage=function(){var t=v(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0===e?s.pageState.index:e,t.abrupt("return",1===s.pageState.length?(console.warn("[WindowManager]: can not remove the last page"),!1):n<0||n>=s.pageState.length?(console.warn("[WindowManager]: page index ".concat(e," out of range")),!1):s.appProxy.removeSceneByIndex(n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.emitter=i.appEmitter,this.isAddApp=i.isAddApp}return b(t,[{key:"storage",get:function(){return this._storage||(this._storage=new qt(this)),this._storage}},{key:"pageState",get:function(){return this.appProxy.pageState}}]),t}(),Zt=function(){function t(e){var n=this;m(this,t),this.params=e,this.sceneNode=null,this.onSceneChange=function(t){n.sceneNode=t,n.params.notifyPageStateChange()};var r=this.params,i=r.displayer,o=r.scenePath;o&&(this.sceneNode=i.createScenesCallback(o,{onAddScene:this.onSceneChange,onRemoveScene:this.onSceneChange}))}return b(t,[{key:"getFullPath",value:function(t){var e,n=null==(e=this.sceneNode)?void 0:e.scenes;if(this.params.scenePath&&n){var r=n[t];if(r)return"".concat(this.params.scenePath,"/").concat(r)}}},{key:"toObject",value:function(){var t,e;return{index:(null==(t=this.params.view)?void 0:t.focusSceneIndex)||0,length:(null==(e=this.sceneNode)?void 0:e.scenes.length)||0}}},{key:"destroy",value:function(){var t;null==(t=this.sceneNode)||t.dispose()}}]),t}(),Jt=function(t){return t.Apps="apps",t.Focus="focus",t.State="state",t.BoxState="boxState",t.MainViewCamera="mainViewCamera",t.MainViewSize="mainViewSize",t.Broadcaster="broadcaster",t.Cursors="cursors",t.Position="position",t.CursorState="cursorState",t.FullPath="fullPath",t.Registered="registered",t}(Jt||{}),$t=new(function(){function t(e){var n=this;m(this,t),this.context=e,this.setAppFocus=function(t,e){e?n.context.safeSetAttributes({focus:t}):n.context.safeSetAttributes({focus:void 0})}}return b(t,[{key:"setContext",value:function(t){this.context=t}},{key:"apps",value:function(){return R.get(this.attributes,["apps"])}},{key:"getAppAttributes",value:function(t){return R.get(this.apps(),[t])}},{key:"getAppState",value:function(t){return R.get(this.apps(),[t,"state"])}},{key:"getMaximized",value:function(){return R.get(this.attributes,["maximized"])}},{key:"getMinimized",value:function(){return R.get(this.attributes,["minimized"])}},{key:"setupAppAttributes",value:function(t,e,n){var r;this.attributes.apps||this.context.safeSetAttributes({apps:{}});var i=["scenePath","title"];n||i.push("scenes");var o=R.pick(t.options,i),a={kind:t.kind,options:o,isDynamicPPT:n};"string"==typeof t.src&&(a.src=t.src),a.createdAt=Date.now(),this.context.safeUpdateAttributes(["apps",e],a),this.context.safeUpdateAttributes(["apps",e,"state"],(x(r={},J.Size,{}),x(r,J.Position,{}),x(r,J.SceneIndex,0),r))}},{key:"updateAppState",value:function(t,e,n){R.get(this.attributes,["apps",t,"state"])&&this.context.safeUpdateAttributes(["apps",t,"state",e],n)}},{key:"cleanAppAttributes",value:function(t){this.context.safeUpdateAttributes(["apps",t],void 0),this.context.safeSetAttributes(x({},t,void 0)),this.attributes.focus===t&&this.cleanFocus()}},{key:"cleanFocus",value:function(){this.context.safeSetAttributes({focus:void 0})}},{key:"getAppSceneIndex",value:function(t){var e;return null==(e=this.getAppState(t))?void 0:e[J.SceneIndex]}},{key:"getAppScenePath",value:function(t){var e,n;return null==(n=null==(e=this.getAppAttributes(t))?void 0:e.options)?void 0:n.scenePath}},{key:"getMainViewScenePath",value:function(){return this.attributes._mainScenePath}},{key:"getMainViewSceneIndex",value:function(){return this.attributes._mainSceneIndex}},{key:"getBoxState",value:function(){return this.attributes.boxState}},{key:"setMainViewScenePath",value:function(t){this.context.safeSetAttributes({_mainScenePath:t})}},{key:"setMainViewSceneIndex",value:function(t){this.context.safeSetAttributes({_mainSceneIndex:t})}},{key:"getMainViewCamera",value:function(){return R.get(this.attributes,["mainViewCamera"])}},{key:"getMainViewSize",value:function(){return R.get(this.attributes,["mainViewSize"])}},{key:"setMainViewCamera",value:function(t){this.context.safeSetAttributes({mainViewCamera:P({},t)})}},{key:"setMainViewSize",value:function(t){this.context.safeSetAttributes({mainViewSize:P({},t)})}},{key:"setMainViewCameraAndSize",value:function(t,e){this.context.safeSetAttributes({mainViewCamera:P({},t),mainViewSize:P({},e)})}},{key:"updateCursor",value:function(t,e){R.get(this.attributes,["cursors"])||this.context.safeUpdateAttributes(["cursors"],{}),R.get(this.attributes,["cursors",t])||this.context.safeUpdateAttributes(["cursors",t],{}),this.context.safeUpdateAttributes(["cursors",t,"position"],e)}},{key:"updateCursorState",value:function(t,e){R.get(this.attributes,["cursors",t])||this.context.safeUpdateAttributes(["cursors",t],{}),this.context.safeUpdateAttributes(["cursors",t,"cursorState"],e)}},{key:"getCursorState",value:function(t){return R.get(this.attributes,["cursors",t,"cursorState"])}},{key:"cleanCursor",value:function(t){this.context.safeUpdateAttributes(["cursors",t],void 0)}},{key:"setMainViewFocusPath",value:function(t){var e=this.getMainViewScenePath();e&&wt(t,e)}},{key:"attributes",get:function(){return this.context.getAttributes()}},{key:"focus",get:function(){return R.get(this.attributes,["focus"])}}]),t}())({getAttributes:function(){throw new Error("getAttributes not implemented")},safeSetAttributes:function(){throw new Error("safeSetAttributes not implemented")},safeUpdateAttributes:function(){throw new Error("safeUpdateAttributes not implemented")}}),te=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Ay.debug&&(t=console).log.apply(t,["[WindowManager]:"].concat(n))},ee=function(t,e){var n=e.length-1;return t===e.index?t===n?t-1:e.index+1:e.index},ne=new Y.default,re=function(){function t(e,n,r,i){var o,a=this;m(this,t),this.params=e,this.manager=n,this.boxManager=this.manager.boxManager,this.appProxies=this.manager.appProxies,this.viewManager=this.manager.viewManager,this.store=this.manager.store,this.status="normal",this.getAppInitState=function(t){var e,n,r=a.store.getAppState(t);if(r){var i=null==r?void 0:r[J.Position],o=a.store.focus,s=null==r?void 0:r[J.Size],u=null==r?void 0:r[J.SceneIndex],l={maximized:null==(e=a.attributes)?void 0:e.maximized,minimized:null==(n=a.attributes)?void 0:n.minimized,zIndex:null==r?void 0:r.zIndex};return i&&(l=D(P({},l),{id:t,x:i.x,y:i.y})),o===t&&(l=D(P({},l),{focus:!0})),s&&(l=D(P({},l),{width:s.width,height:s.height})),u&&(l=D(P({},l),{sceneIndex:u})),l}},this.appAttributesUpdateListener=function(t){var e,n,r;null==(e=a.manager.refresher)||e.add(t,(function(){return F.autorun((function(){var e=a.manager.attributes[t];e&&a.appEmitter.emit("attributesUpdate",e)}))})),null==(n=a.manager.refresher)||n.add(a.stateKey,(function(){return F.autorun((function(){var e,n,r,i=null==(e=a.appAttributes)?void 0:e.state;(null==i?void 0:i.zIndex)>0&&i.zIndex!==(null==(n=a.box)?void 0:n.zIndex)&&(null==(r=a.boxManager)||r.setZIndex(t,i.zIndex))}))})),null==(r=a.manager.refresher)||r.add("".concat(t,"-fullPath"),(function(){return F.autorun((function(){var t,e=null==(t=a.appAttributes)?void 0:t.fullPath;a.setFocusScenePathHandler(e),a._prevFullPath!==e&&(a.notifyPageStateChange(),a._prevFullPath=e)}))}))},this.setFocusScenePathHandler=R.debounce((function(t){var e;a.view&&t&&t!==(null==(e=a.view)?void 0:e.focusScenePath)&&wt(a.view,t)}),50),this.notifyPageStateChange=R.debounce((function(){a.appEmitter.emit("pageStateChange",a.pageState)}),50),this.kind=e.kind,this.id=r,this.stateKey="".concat(this.id,"_state"),this.appProxies.set(this.id,this),this.appEmitter=new Y.default,this.appListener=this.makeAppEventListener(this.id),this.isAddApp=i,this.initScenes(),null!=(o=this.params.options)&&o.scenePath&&this.createView(),this._pageState=new Zt({displayer:this.manager.displayer,scenePath:this.scenePath,view:this.view,notifyPageStateChange:this.notifyPageStateChange})}var e,n,r,i,o,a,s,u;return b(t,[{key:"initScenes",value:function(){var t,e=this.params.options;e&&(this.scenePath=e.scenePath,(null==(t=this.appAttributes)?void 0:t.isDynamicPPT)&&this.scenePath?this.scenes=Et(this.manager.displayer)[this.scenePath]:this.scenes=e.scenes)}},{key:"getFullScenePath",value:function(){if(this.scenePath)return R.get(this.appAttributes,[Jt.FullPath])||this.getFullScenePathFromScenes()}},{key:"getFullScenePathFromScenes",value:function(){var t=R.get(this.appAttributes,["state","SceneIndex"],0),e=function(t,e,n){var r;if(t&&e){var i=null==(r=Et(t)[e])?void 0:r[n];if(i)return"".concat(e,"/").concat(i.name)}}(this.manager.room,this.scenePath,t);return e&&this.setFullPath(e),e}},{key:"setFullPath",value:function(t){this.manager.safeUpdateAttributes(["apps",this.id,Jt.FullPath],t)}},{key:"baseInsertApp",value:(u=v(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.length>0&&void 0!==a[0]&&a[0],(r=this.params).kind){t.next=4;break}throw new Error("[WindowManager]: kind require");case 4:return t.next=6,null==(n=yt.appClasses.get(r.kind))?void 0:n();case 6:if(i=t.sent,o=yt.registered.get(r.kind),!i){t.next=13;break}return t.next=11,this.setupApp(this.id,e,i,r.options,null==o?void 0:o.appOptions);case 11:t.next=14;break;case 13:throw new Error("[WindowManager]: app load failed ".concat(r.kind," ").concat(r.src));case 14:return t.abrupt("return",(st.emit("updateManagerRect"),{appId:this.id,app:i}));case 15:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"setupApp",value:(s=v(regeneratorRuntime.mark((function t(e,n,r,i,o){var a,s,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(te("setupApp",e,r,i),this.boxManager){t.next=2;break}throw new jt;case 2:s=new Kt(this.manager,this.boxManager,e,this,o),this.appContext=s,t.prev=4,st.once("".concat(e).concat(q.WindowCreated)).then(v(regeneratorRuntime.mark((function t(){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n||(o=u.getAppInitState(e),null==(i=u.boxManager)||i.updateBoxState(o)),u.appEmitter.onAny(u.appListener),u.appAttributesUpdateListener(e),u.setViewFocusScenePath(),setTimeout(v(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("setup app",r),t.next=3,r.setup(s);case 3:n=t.sent,u.appResult=n,yt.notifyApp(u.kind,"created",{appId:e,result:n}),u.afterSetupApp(o),u.fixMobileSize();case 5:case"end":return t.stop()}}),t)}))),50);case 1:case"end":return t.stop()}}),t)})))),null==(a=this.boxManager)||a.createBox({appId:e,app:r,options:i,canOperate:this.manager.canOperate,smartPosition:this.isAddApp}),this.isAddApp&&this.box&&(this.store.updateAppState(e,J.ZIndex,this.box.zIndex),this.store.updateAppState(e,J.Size,{width:this.box.intrinsicWidth,height:this.box.intrinsicHeight}),this.boxManager.focusBox({appId:e},!1)),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(4),console.error(t.t0),new Error("[WindowManager]: app setup error: ".concat(t.t0.message));case 11:case"end":return t.stop()}}),t,this,[[4,8]])}))),function(t,e,n,r,i){return s.apply(this,arguments)})},{key:"fixMobileSize",value:function(){var t,e,n=null==(t=this.boxManager)?void 0:t.getBox(this.id);n&&(null==(e=this.boxManager)||e.resizeBox({appId:this.id,width:n.intrinsicWidth+.001,height:n.intrinsicHeight+.001,skipUpdate:!0}))}},{key:"afterSetupApp",value:function(t){var e;t&&(null==t||!t.x||!t.y)&&(null==(e=this.boxManager)||e.setBoxInitState(this.id))}},{key:"onSeek",value:(a=v(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.appEmitter.emit("seek",e).catch((function(t){console.log("[WindowManager]: emit seek error: ".concat(t.message))})),r=this.getAppInitState(this.id),null==(n=this.boxManager)||n.updateBoxState(r);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"onReconnected",value:(o=v(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Boolean(this.manager.attributes.apps[this.id])){e.next=4;break}return e.next=3,this.destroy(!0,!1,!0);case 3:return e.abrupt("return");case 4:return this.appEmitter.emit("reconnected",void 0),r=this.getAppInitState(this.id),e.next=8,this.destroy(!0,!1,!0);case 8:return i=this.params,e.next=11,new t(i,this.manager,this.id,this.isAddApp).baseInsertApp(!0);case 11:null==(n=this.boxManager)||n.updateBoxState(r);case 12:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"onRemoveScene",value:(i=v(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.scenePath&&e.startsWith(this.scenePath+"/")&&(n=this.pageState.index,(r=this._pageState.getFullPath(n))||(n=0,r=this._pageState.getFullPath(n)),r&&this.setFullPath(r),this.setViewFocusScenePath(),this.view&&(this.view.focusSceneIndex=n));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"emitAppSceneStateChange",value:function(t){this.appEmitter.emit("sceneStateChange",t)}},{key:"emitAppIsWritableChange",value:function(){this.appEmitter.emit("writableChange",this.isWritable)}},{key:"makeAppEventListener",value:function(t){var e=this;return function(n,r){var i,o,a,s;if(e.manager.canOperate)switch(n){case"setBoxSize":null==(i=e.boxManager)||i.resizeBox({appId:t,width:r.width,height:r.height,skipUpdate:!1});break;case"setBoxMinSize":null==(o=e.boxManager)||o.setBoxMinSize({appId:t,minWidth:r.minwidth,minHeight:r.minheight});break;case"setBoxTitle":null==(a=e.boxManager)||a.setBoxTitle({appId:t,title:r.title});break;case $.destroy:if("destroyed"===e.status)return;e.destroy(!0,!1,!0,null==r?void 0:r.error),null!=r&&r.error&&console.error(null==r?void 0:r.error);break;case"focus":null==(s=e.boxManager)||s.focusBox({appId:e.id}),ne.emit("focus",{appId:e.id})}}}},{key:"setScenePath",value:function(){if(this.manager.canOperate){var t=this.getFullScenePath();this.manager.room&&t&&this.view&&xt(this.manager.room,t)}}},{key:"setViewFocusScenePath",value:function(){var t=this.getFullScenePath();return t&&this.view&&wt(this.view,t),t}},{key:"createView",value:(r=v(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.viewManager.createView(this.id);case 2:return e=t.sent,t.abrupt("return",(this.setViewFocusScenePath(),e));case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"removeSceneByIndex",value:(n=v(regeneratorRuntime.mark((function t(e){var n,r,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this._pageState.getFullPath(e))){t.next=6;break}return r=ee(e,this.pageState),t.abrupt("return",(this.setSceneIndexWithoutSync(r),this.manager.dispatchInternalEvent(q.SetAppFocusIndex,{type:"app",appID:this.id,index:r}),setTimeout((function(){_t(i.manager.room,n,e)}),100),!0));case 6:return t.abrupt("return",!1);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"setSceneIndexWithoutSync",value:function(t){this.view&&(this.view.focusSceneIndex=t)}},{key:"setSceneIndex",value:function(t){if(this.view){this.view.focusSceneIndex=t;var e=this._pageState.getFullPath(t);e&&this.setFullPath(e)}}},{key:"destroy",value:(e=v(regeneratorRuntime.mark((function t(e,n,r,i){var o,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("destroyed"===this.status){t.next=13;break}return this.status="destroyed",t.prev=2,t.next=5,yt.notifyApp(this.kind,"destroy",{appId:this.id});case 5:return t.next=7,this.appEmitter.emit("destroy",{error:i});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error("[WindowManager]: notifyApp error",t.t0.message,t.t0.stack);case 12:this.appEmitter.clearListeners(),st.emit("destroy-".concat(this.id),{error:i}),e&&(null==(o=this.boxManager)||o.closeBox(this.id,r)),n&&(this.store.cleanAppAttributes(this.id),this.scenePath&&_t(this.manager.room,this.scenePath)),this.appProxies.delete(this.id),this._pageState.destroy(),this.viewManager.destroyView(this.id),this.manager.appStatus.delete(this.id),null==(a=this.manager.refresher)||a.remove(this.id),null==(s=this.manager.refresher)||s.remove(this.stateKey),null==(u=this.manager.refresher)||u.remove("".concat(this.id,"-fullPath")),this._prevFullPath=void 0;case 13:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(t,n,r,i){return e.apply(this,arguments)})},{key:"close",value:function(){return this.destroy(!0,!0,!1)}},{key:"view",get:function(){return this.manager.viewManager.getView(this.id)}},{key:"viewIndex",get:function(){var t;return null==(t=this.view)?void 0:t.focusSceneIndex}},{key:"isWritable",get:function(){var t;return this.manager.canOperate&&!(null!=(t=this.box)&&t.readonly)}},{key:"attributes",get:function(){return this.manager.attributes[this.id]}},{key:"appAttributes",get:function(){return this.store.getAppAttributes(this.id)}},{key:"box",get:function(){var t;return null==(t=this.boxManager)?void 0:t.getBox(this.id)}},{key:"pageState",get:function(){return this._pageState.toObject()}}]),t}(),ie=function(){function t(e){m(this,t),this.displayer=e,this.views=new Map}return b(t,[{key:"createView",value:function(t){var e=oe(this.displayer);return this.views.set(t,e),e}},{key:"getView",value:function(t){return this.views.get(t)}},{key:"destroyView",value:function(t){var e=this.views.get(t);if(e){try{e.release()}catch(t){}this.views.delete(t)}}},{key:"setViewScenePath",value:function(t,e){var n=this.views.get(t);n&&(n.focusScenePath=e)}},{key:"destroy",value:function(){this.views.forEach((function(t){try{t.release()}catch(t){}})),this.views.clear()}}]),t}(),oe=function(t){var e=t.views.createView();return ae(e),e},ae=function(t){t.setCameraBound({maxContentMode:function(){return 10},minContentMode:function(){return.1}})},se=function(){function t(e){var n=this;m(this,t),this.manager=e,this.started=!1,this.mainViewIsAddListener=!1,this.store=this.manager.store,this.viewMode=this.manager.windowManger.viewMode,this.sideEffectManager=new j.SideEffectManager,this.startListenWritableChange=function(){n.sideEffectManager.add((function(){return st.on("writableChange",(function(t){t&&n.ensureCameraAndSize()}))}))},this.addCameraReaction=function(){var t;null==(t=n.manager.refresher)||t.add(Jt.MainViewCamera,n.cameraReaction)},this.cameraReaction=function(){return F.reaction((function(){return n.mainViewCamera}),(function(t){t&&t.id!==n.manager.uid&&(n.moveCameraToContian(n.mainViewSize),n.moveCamera(t))}),{fireImmediately:!0})},this.sizeChangeHandler=R.debounce((function(t){t&&n.viewMode===F.ViewMode.Broadcaster&&(n.moveCameraToContian(t),n.moveCamera(n.mainViewCamera))}),30),this.onUpdateContainerSizeRatio=function(){var t=n.store.getMainViewSize();n.sizeChangeHandler(t)},this.onCameraUpdatedByDevice=function(t){n.viewMode!==F.ViewMode.Follower&&(n.store.setMainViewCamera(D(P({},t),{id:n.manager.uid})),R.isEqual(n.mainViewSize,D(P({},n.mainView.size),{id:n.manager.uid}))||n.setMainViewSize(n.view.size))},this.mainViewClickListener=function(){n.mainViewClickHandler()},this.setMainViewSize=R.debounce((function(t){n.store.setMainViewSize(D(P({},t),{id:n.manager.uid}))}),50),this.onCameraOrSizeUpdated=function(){ot.emit("cameraStateChange",n.cameraState)},this.setViewMode=function(t){n.viewMode=t},this.mainView=this.createMainView(),this.moveCameraSizeByAttributes(),st.once("mainViewMounted").then((function(){n.addMainViewListener(),n.start(),n.ensureCameraAndSize(),n.startListenWritableChange()}));var r=function(){n.sizeChangeHandler(n.mainViewSize)};this.sideEffectManager.add((function(){return st.on("playgroundSizeChange",r)})),this.sideEffectManager.add((function(){return st.on("containerSizeRatioUpdate",n.onUpdateContainerSizeRatio)})),this.sideEffectManager.add((function(){return st.on("startReconnect",(function(){n.didRelease||n.mainView.release()}))}))}var e;return b(t,[{key:"ensureCameraAndSize",value:function(){this.viewMode===F.ViewMode.Broadcaster&&(!this.mainViewCamera||!this.mainViewSize)&&(this.manager.dispatchInternalEvent(q.InitMainViewCamera),this.setCameraAndSize())}},{key:"moveCameraSizeByAttributes",value:function(){this.moveCameraToContian(this.mainViewSize),this.moveCamera(this.mainViewCamera)}},{key:"start",value:function(){this.started||(this.sizeChangeHandler(this.mainViewSize),this.addCameraListener(),this.addCameraReaction(),this.started=!0)}},{key:"setCameraAndSize",value:function(){var t=D(P({},this.mainView.camera),{id:this.manager.uid}),e=D(P({},this.mainView.size),{id:this.manager.uid});this.store.setMainViewCameraAndSize(t,e)}},{key:"createMainView",value:function(){var t=oe(this.manager.displayer),e=this.store.getMainViewScenePath();return e&&wt(t,e),t}},{key:"onReconnect",value:function(){if(this.didRelease)this.rebind();else{var t=this.store.getMainViewScenePath();this.setFocusScenePath(t)}}},{key:"setFocusScenePath",value:function(t){if(t)return wt(this.view,t)}},{key:"rebind",value:function(){var t=this.mainView.divElement,e=this.mainView.disableCameraTransform;this.stop(),this.didRelease||this.mainView.release(),this.removeMainViewListener(),this.mainView=this.createMainView(),this.mainView.disableCameraTransform=e,this.mainView.divElement=t,this.addMainViewListener(),this.start()}},{key:"addMainViewListener",value:function(){this.mainViewIsAddListener||this.view.divElement&&(this.view.divElement.addEventListener("click",this.mainViewClickListener),this.view.divElement.addEventListener("touchend",this.mainViewClickListener),this.mainViewIsAddListener=!0)}},{key:"removeMainViewListener",value:function(){this.view.divElement&&(this.view.divElement.removeEventListener("click",this.mainViewClickListener),this.view.divElement.removeEventListener("touchend",this.mainViewClickListener)),this.mainViewIsAddListener=!1}},{key:"mainViewClickHandler",value:(e=v(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!this.manager.canOperate||(this.store.cleanFocus(),null==(e=this.manager.boxManager)||e.blurAllBox());case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"addCameraListener",value:function(){this.view.callbacks.on("onCameraUpdatedByDevice",this.onCameraUpdatedByDevice),this.view.callbacks.on("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.on("onSizeUpdated",this.onCameraOrSizeUpdated)}},{key:"removeCameraListener",value:function(){this.view.callbacks.off("onCameraUpdatedByDevice",this.onCameraUpdatedByDevice),this.view.callbacks.off("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.off("onSizeUpdated",this.onCameraOrSizeUpdated)}},{key:"moveCameraToContian",value:function(t){R.isEmpty(t)||(this.view.moveCameraToContain({width:t.width,height:t.height,originX:-t.width/2,originY:-t.height/2,animationMode:F.AnimationMode.Immediately}),this.scale=this.view.camera.scale)}},{key:"moveCamera",value:function(t){if(!R.isEmpty(t)){if(R.isEqual(t,this.view.camera))return;var e=t.centerX,n=t.centerY,r=t.scale*(this.scale||1);this.view.moveCamera({centerX:e,centerY:n,scale:r,animationMode:F.AnimationMode.Immediately})}}},{key:"stop",value:function(){var t,e;this.removeCameraListener(),null==(t=this.manager.refresher)||t.remove(Jt.MainViewCamera),null==(e=this.manager.refresher)||e.remove(Jt.MainViewSize),this.started=!1}},{key:"destroy",value:function(){this.removeMainViewListener(),this.stop(),this.sideEffectManager.flushAll()}},{key:"mainViewCamera",get:function(){return this.store.getMainViewCamera()}},{key:"mainViewSize",get:function(){return this.store.getMainViewSize()}},{key:"didRelease",get:function(){return R.get(this.view,["didRelease"])}},{key:"view",get:function(){return this.mainView}},{key:"cameraState",get:function(){return P(P({},this.view.camera),this.view.size)}}]),t}(),ue=function(){function t(e){var n=this;m(this,t),this.context=e,this.addRedoUndoListeners=function(t){if(void 0===t)n.addViewCallbacks(n.context.mainView(),n.onCanRedoStepsUpdate,n.onCanUndoStepsUpdate);else{var e=n.context.getAppProxy(t);e&&e.view&&n.addViewCallbacks(e.view,n.onCanRedoStepsUpdate,n.onCanUndoStepsUpdate)}},this.addViewCallbacks=function(t,e,n){e(t.canRedoSteps),n(t.canUndoSteps),t.callbacks.on("onCanRedoStepsUpdate",e),t.callbacks.on("onCanUndoStepsUpdate",n)},this.disposeViewCallbacks=function(t){t.callbacks.off("onCanRedoStepsUpdate",n.onCanRedoStepsUpdate),t.callbacks.off("onCanUndoStepsUpdate",n.onCanUndoStepsUpdate)},this.onCanRedoStepsUpdate=function(t){ot.emit("canRedoStepsChange",t)},this.onCanUndoStepsUpdate=function(t){ot.emit("canUndoStepsChange",t)},this.disposePrevFocusViewRedoUndoListeners=function(t){var e;if(void 0===t)e=n.context.mainView();else{var r=n.context.getAppProxy(t);r&&r.view&&(e=r.view)}e&&n.disposeViewCallbacks(e)},st.on("focusedChange",(function(t){n.disposePrevFocusViewRedoUndoListeners(t.prev),setTimeout((function(){n.addRedoUndoListeners(t.focused)}),0)})),st.on("rootDirRemoved",(function(){n.disposePrevFocusViewRedoUndoListeners(e.focus()),n.addRedoUndoListeners(e.focus())})),this.addRedoUndoListeners(e.focus())}return b(t,[{key:"destroy",value:function(){this.disposePrevFocusViewRedoUndoListeners(this.context.focus())}}]),t}(),le=function(){function t(e){var n=this;m(this,t),this.windowManger=e,this.appProxies=new Map,this.appStatus=new Map,this.store=$t,this.isReplay=this.windowManger.isReplay,this.mainViewScenesLength=0,this.callbacksNode=null,this.appCreateQueue=new at,this.sideEffectManager=new j.SideEffectManager,this.sceneState=null,this.rootDirRemoving=!1,this.onRemoveScenes=function(){var t=v(regeneratorRuntime.mark((function t(e){var r,i,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((o=e.scenePath)!==rt){t.next=6;break}return t.next=4,n.onRootDirRemoved();case 4:return n.dispatchInternalEvent(q.RootDirRemoved),t.abrupt("return");case 6:if(!Bt(o)){t.next=14;break}return a=n.mainView.focusSceneIndex||0,(s=null==(r=n.callbacksNode)?void 0:r.scenes[a])||(a=0,s=null==(i=n.callbacksNode)?void 0:i.scenes[a]),s&&n.setMainViewScenePath("".concat(rt).concat(s)),t.next=12,n.setMainViewSceneIndex(a);case 12:t.next=15;break;case 14:n.appProxies.forEach((function(t){t.onRemoveScene(o)}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.onReadonlyChanged=function(){n.appProxies.forEach((function(t){t.emitAppIsWritableChange()}))},this.onPlayerSeekStart=v(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.closeAll();case 2:case"end":return t.stop()}}),t)}))),this.onPlayerSeekDone=function(){var t=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.attributesUpdateCallback(n.attributes.apps);case 2:n.appProxies.forEach((function(t){t.onSeek(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createRootDirScenesCallback=function(){var t,e=!1;n.callbacksNode&&(n.callbacksNode.dispose(),e=!0),n.callbacksNode=n.displayer.createScenesCallback(rt,{onAddScene:n.onSceneChange,onRemoveScene:(t=v(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.onSceneChange(e);case 2:st.emit("rootDirSceneRemoved",r);case 3:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})}),n.callbacksNode&&(n.updateSceneState(n.callbacksNode),n.mainViewScenesLength=n.callbacksNode.scenes.length,e&&n.emitMainViewScenesChange(n.callbacksNode.scenes.length))},this.removeSceneByIndex=function(){var t=v(regeneratorRuntime.mark((function t(e){var r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=ee(e,n.windowManger.pageState),n.setSceneIndexWithoutSync(i),n.dispatchInternalEvent(q.SetAppFocusIndex,{type:"main",index:i}),o=null==(r=n.callbacksNode)?void 0:r.scenes[e],t.abrupt("return",(setTimeout((function(){o&&_t(n.room,"".concat(rt).concat(o),e)}),100),new Promise((function(t,e){st.once("rootDirSceneRemoved").then((function(e){e===o&&t(!0)})).catch((function(t){console.log("[WindowManager]: removePage error: ".concat(t)),e(!1)}))}))));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.setSceneIndexWithoutSync=function(t){var e,r=null==(e=n.callbacksNode)?void 0:e.scenes[t];r&&n.mainViewProxy.setFocusScenePath("".concat(rt).concat(r))},this.onSceneChange=function(t){return n.mainViewScenesLength=t.scenes.length,n.updateSceneState(t),n.emitMainViewScenesChange(n.mainViewScenesLength)},this.emitMainViewScenesChange=function(t){return Promise.all([ot.emit("mainViewScenesLengthChange",t),st.emit("changePageState")])},this.updateSceneState=function(t){var e=n.store.getMainViewSceneIndex()||0,r=t.scenes[e];r||(r=t.scenes[n.mainView.focusSceneIndex||0]),n.sceneState={scenePath:"".concat(rt).concat(r),contextPath:t.path,index:e,scenes:t.scenes.map((function(t){return{name:t}})),sceneName:r},ot.emit("sceneStateChange",n.sceneState)},this.onBoxMove=function(t){n.dispatchInternalEvent(q.AppMove,t),n.store.updateAppState(t.appId,J.Position,{x:t.x,y:t.y})},this.onBoxResize=function(t){t.width&&t.height&&(n.dispatchInternalEvent(q.AppResize,t),n.store.updateAppState(t.appId,J.Size,{width:t.width,height:t.height}))},this.onBoxFocus=function(t){n.windowManger.safeSetAttributes({focus:t.appId})},this.onBoxClose=function(t){var e=n.appProxies.get(t.appId);e&&e.destroy(!1,!0,!0,t.error)},this.onBoxStateChange=function(t){n.dispatchInternalEvent(q.AppBoxStateChange,t)},this.addAppsChangeListener=function(){var t;null==(t=n.refresher)||t.add("apps",(function(){return Qt((function(){return n.attributes.apps}),(function(){n.attributesUpdateCallback(n.attributes.apps)}))}))},this.addAppCloseListener=function(){var t;null==(t=n.refresher)||t.add("appsClose",(function(){return Gt(n.attributes.apps,(function(){n.onAppDelete(n.attributes.apps)}))}))},this.onMainViewIndexChange=function(t){void 0!==t&&n._prevSceneIndex!==t&&(ot.emit("mainViewSceneIndexChange",t),st.emit("changePageState"),n.callbacksNode&&n.updateSceneState(n.callbacksNode),n._prevSceneIndex=t)},this.onFocusChange=function(t){var e;n._prevFocused!==t&&(ot.emit("focusedChange",t),st.emit("focusedChange",{focused:t,prev:n._prevFocused}),n._prevFocused=t,void 0!==t&&(null==(e=n.boxManager)||e.focusBox({appId:t}),setTimeout((function(){var e=n.appProxies.get(t);e&&yt.notifyApp(e.kind,"focus",{appId:t})}),0)))},this.attributesUpdateCallback=R.debounce((function(t){return n._attributesUpdateCallback(t)}),100),this.onRegisteredChange=function(t){!t||Object.entries(t).forEach((function(t){var e=o(t,2),n=e[0],r=e[1];yt.appClasses.has(n)||yt.register({kind:n,src:r.src,name:r.name})}))},this.onMinimized=function(t){var e,r;(null==(e=n.boxManager)?void 0:e.minimized)!==t&&(!0===t&&(null==(r=n.boxManager)||r.blurAllBox()),setTimeout((function(){var e;null==(e=n.boxManager)||e.setMinimized(Boolean(t))}),0))},this.onAppDelete=function(){var t=v(regeneratorRuntime.mark((function t(e){var r,i,a,s,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object.keys(e),i=_(n.appProxies.entries()),t.prev=2,i.s();case 4:if((a=i.n()).done){t.next=12;break}if(s=o(a.value,2),u=s[0],l=s[1],t.t0=r.includes(u),t.t0){t.next=10;break}return t.next=10,l.destroy(!0,!1,!0);case 10:t.next=4;break;case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(2),i.e(t.t1);case 17:return t.prev=17,i.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[2,14,17,20]])})));return function(e){return t.apply(this,arguments)}}(),this.closeAll=v(regeneratorRuntime.mark((function t(){var e,r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=_(n.appProxies.entries()),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=9;break}return i=o(r.value,2),i[0],a=i[1],t.next=7,a.destroy(!0,!1,!0);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))),this.displayerStateListener=function(t){var e=t.sceneState;if(e){var r=e.scenePath;n.appProxies.forEach((function(t){t.scenePath&&r.startsWith(t.scenePath)&&(t.emitAppSceneStateChange(e),t.setFullPath(r))}))}n.appProxies.forEach((function(e){e.appEmitter.emit("roomStateChange",t)})),st.emit("observerIdChange",n.displayer.observerId)},this.displayerWritableListener=function(t){var e,r,i=!t,o=void 0===n.windowManger.readonly||!1===n.windowManger.readonly;void 0===n.windowManger.readonly?null==(e=n.boxManager)||e.setReadonly(t):null==(r=n.boxManager)||r.setReadonly(!(i&&o)),n.appProxies.forEach((function(t){t.emitAppIsWritableChange()})),st.emit("writableChange",i)},this.updateSceneIndex=function(){var t=n.store.getMainViewScenePath(),e=Mt(t),r=Et(n.displayer)[e];if(r.length){var i=t.replace(e,"").replace("/",""),o=r.findIndex((function(t){return t.name===i}));R.isInteger(o)&&o>=0&&n.safeSetAttributes({_mainSceneIndex:o})}},this.updateRootDirRemoving=function(t){n.rootDirRemoving=t},this.displayer=e.displayer,this.store.setContext({getAttributes:function(){return n.attributes},safeSetAttributes:function(t){return n.safeSetAttributes(t)},safeUpdateAttributes:function(t,e){return n.safeUpdateAttributes(t,e)}}),this.mainViewProxy=new se(this),this.viewManager=new ie(this.displayer),this.appListeners=new kt(this),this.displayer.callbacks.on(this.eventName,this.displayerStateListener),this.appListeners.addListeners(),this.refresher=hy,this.refresher.setRoom(this.room),this.refresher.setContext({emitter:st}),this.sideEffectManager.add((function(){return function(){var t,e,r;n.appCreateQueue.destroy(),n.mainViewProxy.destroy(),null==(t=n.refresher)||t.destroy(),n.viewManager.destroy(),null==(e=n.boxManager)||e.destroy(),null==(r=n.callbacksNode)||r.dispose()}})),st.once("onCreated").then((function(){return n.onCreated()})),st.on("onReconnected",(function(){return n.onReconnected()})),F.isPlayer(this.displayer)&&(st.on("seekStart",this.onPlayerSeekStart),st.on("seek",this.onPlayerSeekDone)),st.on("removeScenes",this.onRemoveScenes),st.on("setReadonly",this.onReadonlyChanged),this.createRootDirScenesCallback(),yt.setSyncRegisterApp((function(t){n.safeUpdateAttributes([Jt.Registered,t.kind],t)}))}var e,n,r,i,a,s,u,l,c,h,d;return b(t,[{key:"onRootDirRemoved",value:(d=v(regeneratorRuntime.mark((function t(){var e,n,r,i,a,s,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=!(u.length>0&&void 0!==u[0])||u[0],this.setMainViewScenePath(it),this.createRootDirScenesCallback(),n=_(this.appProxies.entries()),t.prev=3,n.s();case 5:if((r=n.n()).done){t.next=13;break}if(i=o(r.value,2),a=i[0],s=i[1],t.t0=s.view,!t.t0){t.next=11;break}return t.next=11,this.closeApp(a,e);case 11:t.next=5;break;case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(3),n.e(t.t1);case 18:return t.prev=18,n.f(),t.finish(18);case 21:this.mainViewProxy.rebind(),st.emit("rootDirRemoved"),this.updateRootDirRemoving(!1);case 22:case"end":return t.stop()}}),t,this,[[3,15,18,21]])}))),function(){return d.apply(this,arguments)})},{key:"getMainViewSceneDir",value:function(){var t=this.store.getMainViewScenePath();if(t)return Mt(t);throw new Error("[WindowManager]: mainViewSceneDir not found")}},{key:"onCreated",value:(h=v(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.attributesUpdateCallback(this.attributes.apps);case 2:if(st.emit("updateManagerRect"),ne.on("move",this.onBoxMove),ne.on("resize",this.onBoxResize),ne.on("focus",this.onBoxFocus),ne.on("close",this.onBoxClose),ne.on("boxStateChange",this.onBoxStateChange),this.addAppsChangeListener(),this.addAppCloseListener(),null==(e=this.refresher)||e.add("maximized",(function(){return F.autorun((function(){var t,e=u.attributes.maximized;null==(t=u.boxManager)||t.setMaximized(Boolean(e))}))})),null==(n=this.refresher)||n.add("minimized",(function(){return F.autorun((function(){var t=u.attributes.minimized;u.onMinimized(t)}))})),null==(r=this.refresher)||r.add("mainViewIndex",(function(){return F.autorun((function(){var t=R.get(u.attributes,"_mainSceneIndex");u.onMainViewIndexChange(t)}))})),null==(i=this.refresher)||i.add("focusedChange",(function(){return F.autorun((function(){var t=R.get(u.attributes,"focus");u.onFocusChange(t)}))})),null==(o=this.refresher)||o.add("registeredChange",(function(){return F.autorun((function(){var t=R.get(u.attributes,Jt.Registered);u.onRegisteredChange(t)}))})),this.attributes.apps&&0!==Object.keys(this.attributes.apps).length){t.next=20;break}if(s=this.store.getMainViewScenePath()){t.next=19;break}return t.abrupt("return");case 19:this.resetScenePath(s);case 20:this.displayerWritableListener(!(null!=(a=this.room)&&a.isWritable)),this.displayer.callbacks.on("onEnableWriteNowChanged",this.displayerWritableListener),this._prevFocused=this.attributes.focus,this.sideEffectManager.add((function(){var t=new ue({mainView:function(){return u.mainViewProxy.view},focus:function(){return u.attributes.focus},getAppProxy:function(t){return u.appProxies.get(t)}});return function(){return t.destroy()}}));case 21:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"_attributesUpdateCallback",value:(c=v(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&Ay.container){0===(n=Object.keys(e)).length&&this.appCreateQueue.emitReady(),r=n.map((function(t){return{id:t,createdAt:e[t].createdAt}})),i=_(R.orderBy(r,"createdAt","asc"));try{for(a=function(){var t=o.value.id;if(!s.appProxies.has(t)&&!s.appStatus.has(t)){var n=e[t];try{if(!s.attributes[t])throw new Error("appAttributes is undefined");s.appCreateQueue.push((function(){return s.appStatus.set(t,tt.StartCreate),s.baseInsertApp({kind:n.kind,options:n.options,isDynamicPPT:n.isDynamicPPT},t,!1)})),s.focusByAttributes(e)}catch(t){console.warn("[WindowManager]: Insert App Error",t)}}},i.s();!(o=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}}case 1:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"refresh",value:function(){this.attributesUpdateCallback(this.attributes.apps)}},{key:"setBoxManager",value:function(t){this.boxManager=t}},{key:"resetMaximized",value:function(){var t;null==(t=this.boxManager)||t.setMaximized(Boolean(this.store.getMaximized()))}},{key:"resetMinimized",value:function(){var t;null==(t=this.boxManager)||t.setMinimized(Boolean(this.store.getMinimized()))}},{key:"bindMainView",value:function(t,e){var n=this.mainViewProxy.view;n.disableCameraTransform=e,n.divElement=t,n.focusScenePath||this.setMainViewFocusPath(),st.emit("mainViewMounted")}},{key:"setMainViewFocusPath",value:function(t){var e,n=t||this.store.getMainViewScenePath();if(n)return wt(this.mainView,n),(null==(e=this.mainView)?void 0:e.focusScenePath)===n}},{key:"resetScenePath",value:function(t){this.displayer.state.sceneState.scenePath!==t&&xt(this.room,t)}},{key:"addApp",value:(l=v(regeneratorRuntime.mark((function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return te("addApp",e),t.next=3,this.beforeAddApp(e,n);case 3:return r=t.sent,i=r.appId,o=r.needFocus,t.next=8,this.baseInsertApp(e,i,!0,o);case 8:return a=t.sent,t.abrupt("return",(this.afterAddApp(a),null==a?void 0:a.id));case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return l.apply(this,arguments)})},{key:"beforeAddApp",value:(u=v(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt(e.kind);case 2:return o=t.sent,this.appStatus.set(o,tt.StartCreate),a=null!=(r=e.attributes)?r:{},this.safeUpdateAttributes([o],a),this.store.setupAppAttributes(e,o,n),s=!(null!=(i=this.boxManager)&&i.minimized),t.abrupt("return",(s&&this.store.setAppFocus(o,!0),{appId:o,needFocus:s}));case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"afterAddApp",value:function(t){var e,n;if(t&&t.box){var r=t.box;ne.emit("move",{appId:t.id,x:null==r?void 0:r.intrinsicX,y:null==r?void 0:r.intrinsicY}),this.store.updateAppState(t.id,J.ZIndex,r.zIndex)}null!=(e=this.boxManager)&&e.minimized&&(null==(n=this.boxManager)||n.setMinimized(!1,!1))}},{key:"closeApp",value:(s=v(regeneratorRuntime.mark((function t(e){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=!(i.length>1&&void 0!==i[1])||i[1],(r=this.appProxies.get(e))&&r.destroy(!0,n,!1);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"baseInsertApp",value:(a=v(regeneratorRuntime.mark((function t(e,n,r,i){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.appProxies.has(n)){t.next=3;break}return console.warn("[WindowManager]: app duplicate exists and cannot be created again"),t.abrupt("return");case 3:if(!(o=new re(e,this,n,r))){t.next=9;break}return t.next=7,o.baseInsertApp(i);case 7:return this.appStatus.delete(n),t.abrupt("return",o);case 9:throw this.appStatus.delete(n),new Error("[WindowManger]: initialize AppProxy failed");case 10:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return a.apply(this,arguments)})},{key:"safeSetAttributes",value:function(t){this.windowManger.safeSetAttributes(t)}},{key:"safeUpdateAttributes",value:function(t,e){this.windowManger.safeUpdateAttributes(t,e)}},{key:"setMainViewScenePath",value:(i=v(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.room){t.next=17;break}if(n=this.displayer.scenePathType(e),Mt(e)===rt){t.next=4;break}throw new Error('[WindowManager]: main view scenePath must in root dir "/"');case 4:if(n!==F.ScenePathType.None){t.next=6;break}throw new Error("[WindowManager]: ".concat(e," not valid scene"));case 6:if(n!==F.ScenePathType.Page){t.next=11;break}return t.next=9,this._setMainViewScenePath(e);case 9:t.next=17;break;case 11:if(n!==F.ScenePathType.Dir){t.next=17;break}if(r=Tt(this.displayer,e),t.t0=r,!t.t0){t.next=17;break}return t.next=17,this._setMainViewScenePath(r);case 17:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"_setMainViewScenePath",value:(r=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setMainViewFocusPath(e)&&(this.safeSetAttributes({_mainScenePath:e}),this.store.setMainViewFocusPath(this.mainView),this.updateSceneIndex(),this.dispatchSetMainViewScenePath(e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"setMainViewSceneIndex",value:(n=v(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.room){t.next=9;break}if(this.store.getMainViewSceneIndex()!==e){t.next=3;break}return t.abrupt("return");case 3:if(r=null==(n=this.callbacksNode)?void 0:n.scenes[e],i="".concat(rt).concat(r),!r){t.next=8;break}this.setMainViewFocusPath(i)&&(this.store.setMainViewScenePath(i),this.safeSetAttributes({_mainSceneIndex:e}),this.dispatchSetMainViewScenePath(i)),t.next=9;break;case 8:throw new Error("[WindowManager]: ".concat(e," not valid index"));case 9:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"dispatchSetMainViewScenePath",value:function(t){this.dispatchInternalEvent(q.SetMainViewScenePath,{nextScenePath:t}),xt(this.room,t)}},{key:"getAppInitPath",value:function(t){var e,n=this.store.getAppAttributes(t);if(n)return null==(e=null==n?void 0:n.options)?void 0:e.scenePath}},{key:"safeDispatchMagixEvent",value:function(t,e){this.canOperate&&this.displayer.dispatchMagixEvent(t,e)}},{key:"focusByAttributes",value:function(t){var e;if(t&&Object.keys(t).length===(null==(e=this.boxManager)?void 0:e.boxSize)){var n=this.store.focus;n&&this.boxManager.focusBox({appId:n})}}},{key:"onReconnected",value:(e=v(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.attributesUpdateCallback(this.attributes.apps),e=Array.from(this.appProxies.values()).map((function(t){return t.onReconnected()})),this.mainViewProxy.onReconnect(),t.next=5,Promise.all(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"notifyContainerRectUpdate",value:function(t){this.appProxies.forEach((function(e){e.appEmitter.emit("containerRectUpdate",t)}))}},{key:"dispatchInternalEvent",value:function(t,e){this.safeDispatchMagixEvent(K,{eventName:t,payload:e})}},{key:"destroy",value:function(){this.displayer.callbacks.off(this.eventName,this.displayerStateListener),this.displayer.callbacks.off("onEnableWriteNowChanged",this.displayerWritableListener),this.appListeners.removeListeners(),ne.clearListeners(),st.clearListeners(),this.appProxies.size&&this.appProxies.forEach((function(t){t.destroy(!0,!1,!0)})),ot.clearListeners(),this.sideEffectManager.flushAll(),this._prevFocused=void 0,this._prevSceneIndex=void 0}},{key:"eventName",get:function(){return F.isRoom(this.displayer)?"onRoomStateChanged":"onPlayerStateChanged"}},{key:"attributes",get:function(){return this.windowManger.attributes}},{key:"canOperate",get:function(){return this.windowManger.canOperate}},{key:"room",get:function(){return F.isRoom(this.displayer)?this.displayer:void 0}},{key:"mainView",get:function(){return this.mainViewProxy.view}},{key:"focusApp",get:function(){if(this.store.focus)return this.appProxies.get(this.store.focus)}},{key:"uid",get:function(){var t;return(null==(t=this.room)?void 0:t.uid)||""}}]),t}(),ce=function(){if(It(F.WhiteVersion)<It(nt))throw new Ot(nt)},he=function(){var t=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.createInvisiblePlugin(Ay,{});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),'invisible plugin "WindowManager" exits'!==t.t0.message){t.next=12;break}return t.next=11,Nt(200);case 11:return t.abrupt("return",e.getInvisiblePlugin(Ay.kind));case 12:te("createInvisiblePlugin failed",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),de=window.ResizeObserver||z.ResizeObserver,Ae=function(){function t(e){m(this,t),this.emitter=e}return b(t,[{key:"observePlaygroundSize",value:function(t,e,n){var r=this;this.updateSizer(t.getBoundingClientRect(),e,n),this.containerResizeObserver=new de((function(t){var i,o=null==(i=t[0])?void 0:i.contentRect;o&&(r.updateSizer(o,e,n),r.emitter.emit("playgroundSizeChange",o))})),this.disposer=this.emitter.on("containerSizeRatioUpdate",(function(){var i=t.getBoundingClientRect();r.updateSizer(i,e,n),r.emitter.emit("playgroundSizeChange",i)})),this.containerResizeObserver.observe(t)}},{key:"updateSizer",value:function(t,e,n){var r=t.width,i=t.height;r&&i&&(i/r>Ay.containerSizeRatio?(i=r*Ay.containerSizeRatio,e.classList.toggle("netless-window-manager-sizer-horizontal",!0)):(r=i/Ay.containerSizeRatio,e.classList.toggle("netless-window-manager-sizer-horizontal",!1)),n.style.width="".concat(r,"px"),n.style.height="".concat(i,"px"))}},{key:"disconnect",value:function(){var t;null==(t=this.containerResizeObserver)||t.disconnect(),R.isFunction(this.disposer)&&(this.disposer(),this.disposer=void 0)}}],[{key:"create",value:function(e,n,r,i){var o=new t(i);return o.observePlaygroundSize(e,n,r),o}}]),t}(),fe={exports:{}},pe={},ge=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;function ye(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var be=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=ye(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))ve.call(n,a)&&(i[a]=n[a]);if(ge){r=ge(n);for(var s=0;s<r.length;s++)me.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},we=be,xe="function"==typeof Symbol&&Symbol.for,_e=xe?Symbol.for("react.element"):60103,Te=xe?Symbol.for("react.portal"):60106,Ee=xe?Symbol.for("react.fragment"):60107,Se=xe?Symbol.for("react.strict_mode"):60108,Me=xe?Symbol.for("react.profiler"):60114,Ce=xe?Symbol.for("react.provider"):60109,Ie=xe?Symbol.for("react.context"):60110,Ne=xe?Symbol.for("react.forward_ref"):60112,Be=xe?Symbol.for("react.suspense"):60113,ke=xe?Symbol.for("react.memo"):60115,Pe=xe?Symbol.for("react.lazy"):60116,De="function"==typeof Symbol&&Symbol.iterator;
/** @license React v16.14.0
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/function Le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Re={};function Fe(t,e,n){this.props=t,this.context=e,this.refs=Re,this.updater=n||Oe}function Ue(){}function je(t,e,n){this.props=t,this.context=e,this.refs=Re,this.updater=n||Oe}Fe.prototype.isReactComponent={},Fe.prototype.setState=function(t,e){if("object"!=w(t)&&"function"!=typeof t&&null!=t)throw Error(Le(85));this.updater.enqueueSetState(this,t,e,"setState")},Fe.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},Ue.prototype=Fe.prototype;var ze=je.prototype=new Ue;ze.constructor=je,we(ze,Fe.prototype),ze.isPureReactComponent=!0;var He={current:null},Qe=Object.prototype.hasOwnProperty,Ge={key:!0,ref:!0,__self:!0,__source:!0};function Ve(t,e,n){var r,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)Qe.call(e,r)&&!Ge.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:_e,type:t,key:o,ref:a,props:i,_owner:He.current}}function We(t){return"object"==w(t)&&null!==t&&t.$$typeof===_e}var Ye=/\/+/g,Xe=[];function qe(t,e,n,r){if(Xe.length){var i=Xe.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function Ke(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>Xe.length&&Xe.push(t)}function Ze(t,e,n,r){var i=w(t);("undefined"===i||"boolean"===i)&&(t=null);var o=!1;if(null===t)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _e:case Te:o=!0}}if(o)return n(r,t,""===e?"."+$e(t,0):e),1;if(o=0,e=""===e?".":e+":",Array.isArray(t))for(var a=0;a<t.length;a++){var s=e+$e(i=t[a],a);o+=Ze(i,s,n,r)}else if(null===t||"object"!=w(t)?s=null:s="function"==typeof(s=De&&t[De]||t["@@iterator"])?s:null,"function"==typeof s)for(t=s.call(t),a=0;!(i=t.next()).done;)o+=Ze(i=i.value,s=e+$e(i,a++),n,r);else if("object"===i)throw n=""+t,Error(Le(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return o}function Je(t,e,n){return null==t?0:Ze(t,"",e,n)}function $e(t,e){return"object"==w(t)&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function tn(t,e){t.func.call(t.context,e,t.count++)}function en(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?nn(t,r,n,(function(t){return t})):null!=t&&(We(t)&&(t=function(t,e){return{$$typeof:_e,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(Ye,"$&/")+"/")+n)),r.push(t))}function nn(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(Ye,"$&/")+"/"),Je(t,en,e=qe(e,o,r,i)),Ke(e)}var rn={current:null};function on(){var t=rn.current;if(null===t)throw Error(Le(321));return t}var an={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:He,IsSomeRendererActing:{current:!1},assign:we};pe.Children={map:function(t,e,n){if(null==t)return t;var r=[];return nn(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;Je(t,tn,e=qe(null,null,e,n)),Ke(e)},count:function(t){return Je(t,(function(){return null}),null)},toArray:function(t){var e=[];return nn(t,e,null,(function(t){return t})),e},only:function(t){if(!We(t))throw Error(Le(143));return t}},pe.Component=Fe,pe.Fragment=Ee,pe.Profiler=Me,pe.PureComponent=je,pe.StrictMode=Se,pe.Suspense=Be,pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=an,pe.cloneElement=function(t,e,n){if(null==t)throw Error(Le(267,t));var r=we({},t.props),i=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=He.current),void 0!==e.key&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)Qe.call(e,u)&&!Ge.hasOwnProperty(u)&&(r[u]=void 0===e[u]&&void 0!==s?s[u]:e[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:_e,type:t.type,key:i,ref:o,props:r,_owner:a}},pe.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:Ie,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:Ce,_context:t},t.Consumer=t},pe.createElement=Ve,pe.createFactory=function(t){var e=Ve.bind(null,t);return e.type=t,e},pe.createRef=function(){return{current:null}},pe.forwardRef=function(t){return{$$typeof:Ne,render:t}},pe.isValidElement=We,pe.lazy=function(t){return{$$typeof:Pe,_ctor:t,_status:-1,_result:null}},pe.memo=function(t,e){return{$$typeof:ke,type:t,compare:void 0===e?null:e}},pe.useCallback=function(t,e){return on().useCallback(t,e)},pe.useContext=function(t,e){return on().useContext(t,e)},pe.useDebugValue=function(){},pe.useEffect=function(t,e){return on().useEffect(t,e)},pe.useImperativeHandle=function(t,e,n){return on().useImperativeHandle(t,e,n)},pe.useLayoutEffect=function(t,e){return on().useLayoutEffect(t,e)},pe.useMemo=function(t,e){return on().useMemo(t,e)},pe.useReducer=function(t,e,n){return on().useReducer(t,e,n)},pe.useRef=function(t){return on().useRef(t)},pe.useState=function(t){return on().useState(t)},pe.version="16.14.0",fe.exports=pe;var sn=fe.exports,un=Object.defineProperty,ln=Object.defineProperties,cn=Object.getOwnPropertyDescriptors,hn=Object.getOwnPropertySymbols,dn=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,fn=function(t,e,n){return e in t?un(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},pn=function(t,e){for(var n in e||(e={}))dn.call(e,n)&&fn(t,n,e[n]);if(hn){var r,i=_(hn(e));try{for(i.s();!(r=i.n()).done;){n=r.value;An.call(e,n)&&fn(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t},gn=function(t,e){return ln(t,cn(e))},vn={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,o),!0;case 6:return c.fn.call(c.context,e,r,i,o,a),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,A=c.length;for(l=0;l<A;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,r);break;case 4:c[l].fn.call(c[l].context,e,r,i);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn===e&&(!i||s.once)&&(!r||s.context===r)&&a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s}(vn);var mn=vn.exports,yn=function(){return yn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},yn.apply(this,arguments)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bn(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var wn=0,xn="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),n=Math.max(0,16.7-(e-wn));wn=e+n,setTimeout((function(){return t(wn)}),n)},_n=1/60*1e3,Tn=!0,En=!1,Sn=!1,Mn={delta:0,timestamp:0},Cn=["read","update","preRender","render","postRender"],In=function(t){return En=t},Nn=Cn.reduce((function(t,e){return t[e]=function(t){var e=[],n=[],r=0,i=!1,o=0,a=new WeakSet,s=new WeakSet,u={cancel:function(t){var e=n.indexOf(t);a.add(t),-1!==e&&n.splice(e,1)},process:function(l){var c,h;if(i=!0,e=(c=[n,e])[0],(n=c[1]).length=0,r=e.length)for(o=0;o<r;o++)(h=e[o])(l),!0===s.has(h)&&!a.has(h)&&(u.schedule(h),t(!0));i=!1},schedule:function(t,o,u){void 0===o&&(o=!1),void 0===u&&(u=!1);var l=u&&i,c=l?e:n;a.delete(t),o&&s.add(t),-1===c.indexOf(t)&&(c.push(t),l&&(r=e.length))}};return u}(In),t}),{}),Bn=Cn.reduce((function(t,e){var n=Nn[e];return t[e]=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),En||Dn(),n.schedule(t,e,r),t},t}),{}),kn=function(t){return Nn[t].process(Mn)},Pn=function t(e){En=!1,Mn.delta=Tn?_n:Math.max(Math.min(e-Mn.timestamp,40),1),Tn||(_n=Mn.delta),Mn.timestamp=e,Sn=!0,Cn.forEach(kn),Sn=!1,En&&(Tn=!1,xn(t))},Dn=function(){En=!0,Tn=!0,Sn||xn(Pn)},Ln=function(){return Ln=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ln.apply(this,arguments)},On=function(t,e){return function(n){return Math.max(Math.min(n,e),t)}},Rn=function(t){return t%1?Number(t.toFixed(5)):t},Fn=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,Un={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},jn=Ln(Ln({},Un),{transform:On(0,1)}),zn=Ln(Ln({},Un),{default:1}),Hn=function(t){return{test:function(e){return"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}},Qn=Hn("deg"),Gn=Hn("%"),Vn=Hn("px"),Wn=Ln(Ln({},Gn),{parse:function(t){return Gn.parse(t)/100},transform:function(t){return Gn.transform(100*t)}}),Yn=On(0,255),Xn=function(t){return void 0!==t.red},qn=function(t){return void 0!==t.hue};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kn=function(t){return function(e){if("string"!=typeof e)return e;for(var n={},r=function(t){return function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))}(t).replace(/(,|\/)/g," ").split(/ \s*/)}(e),i=0;i<4;i++)n[t[i]]=void 0!==r[i]?parseFloat(r[i]):1;return n}},Zn=Ln(Ln({},Un),{transform:function(t){return Math.round(Yn(t))}});function Jn(t,e){return t.startsWith(e)&&Fn.test(t)}var $n,tr={test:function(t){return"string"==typeof t?Jn(t,"rgb"):Xn(t)},parse:Kn(["red","green","blue","alpha"]),transform:function(t){var e=t.red,n=t.green,r=t.blue,i=t.alpha,o=void 0===i?1:i;return function(t){var e=t.red,n=t.green,r=t.blue,i=t.alpha;return"rgba("+e+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({red:Zn.transform(e),green:Zn.transform(n),blue:Zn.transform(r),alpha:Rn(jn.transform(o))})}},er={test:function(t){return"string"==typeof t?Jn(t,"hsl"):qn(t)},parse:Kn(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha,o=void 0===i?1:i;return function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha;return"hsla("+e+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({hue:Math.round(e),saturation:Gn.transform(Rn(n)),lightness:Gn.transform(Rn(r)),alpha:Rn(jn.transform(o))})}},nr=Ln(Ln({},tr),{test:function(t){return"string"==typeof t&&Jn(t,"#")},parse:function(t){var e="",n="",r="";return t.length>4?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),e+=e,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),rr={test:function(t){return"string"==typeof t&&Fn.test(t)||Xn(t)||qn(t)},parse:function(t){return tr.test(t)?tr.parse(t):er.test(t)?er.parse(t):nr.test(t)?nr.parse(t):t},transform:function(t){return Xn(t)?tr.transform(t):qn(t)?er.transform(t):t}},ir=function(t){var e=t.onRead,n=t.onRender,r=t.uncachedValues,i=void 0===r?new Set:r,o=t.useCache,a=void 0===o||o;return function(t){void 0===t&&(t={});var r=bn(t,[]),o={},s=[],u=!1;function l(t,e){t.startsWith("--")&&(r.hasCSSVariable=!0);var n=o[t];o[t]=e,o[t]!==n&&(-1===s.indexOf(t)&&s.push(t),u||(u=!0,Bn.render(c.render)))}var c={get:function(t,n){return void 0===n&&(n=!1),!n&&a&&!i.has(t)&&void 0!==o[t]?o[t]:e(t,r)},set:function(t,e){if("string"==typeof t)l(t,e);else for(var n in t)l(n,t[n]);return this},render:function(t){return void 0===t&&(t=!1),(u||!0===t)&&(n(o,r,s),u=!1,s.length=0),this}};return c}},or=/([a-z])([A-Z])/g,ar=function(t){return t.replace(or,"$1-$2").toLowerCase()},sr=new Map,ur=new Map,lr=["Webkit","Moz","O","ms",""],cr=lr.length,hr="undefined"!=typeof document,dr=function(t,e){return ur.set(t,ar(e))},Ar=function(t,e){void 0===e&&(e=!1);var n=e?ur:sr;return n.has(t)||(hr?function(t){$n=$n||document.createElement("div");for(var e=0;e<cr;e++){var n=lr[e],r=""===n,i=r?t:n+t.charAt(0).toUpperCase()+t.slice(1);if(i in $n.style||r){if(r&&"clipPath"===t&&ur.has(t))return;sr.set(t,i),dr(t,(r?"":"-")+ar(i))}}}(t):function(t){dr(t,t)}(t)),n.get(t)||t},fr=["","X","Y","Z"],pr=["translate","scale","rotate","skew","transformPerspective"].reduce((function(t,e){return fr.reduce((function(t,n){return t.push(e+n),t}),t)}),["x","y","z"]),gr=pr.reduce((function(t,e){return t[e]=!0,t}),{});function vr(t){return!0===gr[t]}function mr(t,e){return pr.indexOf(t)-pr.indexOf(e)}var yr=new Set(["originX","originY","originZ"]);function br(t){return yr.has(t)}var wr=yn(yn({},Un),{transform:Math.round}),xr={color:rr,backgroundColor:rr,outlineColor:rr,fill:rr,stroke:rr,borderColor:rr,borderTopColor:rr,borderRightColor:rr,borderBottomColor:rr,borderLeftColor:rr,borderWidth:Vn,borderTopWidth:Vn,borderRightWidth:Vn,borderBottomWidth:Vn,borderLeftWidth:Vn,borderRadius:Vn,radius:Vn,borderTopLeftRadius:Vn,borderTopRightRadius:Vn,borderBottomRightRadius:Vn,borderBottomLeftRadius:Vn,width:Vn,maxWidth:Vn,height:Vn,maxHeight:Vn,size:Vn,top:Vn,right:Vn,bottom:Vn,left:Vn,padding:Vn,paddingTop:Vn,paddingRight:Vn,paddingBottom:Vn,paddingLeft:Vn,margin:Vn,marginTop:Vn,marginRight:Vn,marginBottom:Vn,marginLeft:Vn,rotate:Qn,rotateX:Qn,rotateY:Qn,rotateZ:Qn,scale:zn,scaleX:zn,scaleY:zn,scaleZ:zn,skew:Qn,skewX:Qn,skewY:Qn,distance:Vn,translateX:Vn,translateY:Vn,translateZ:Vn,x:Vn,y:Vn,z:Vn,perspective:Vn,opacity:jn,originX:Wn,originY:Wn,originZ:Vn,zIndex:wr,fillOpacity:jn,strokeOpacity:jn,numOctaves:wr},_r=function(t){return xr[t]},Tr=function(t,e){return e&&"number"==typeof t?e.transform(t):t},Er="scrollLeft",Sr="scrollTop",Mr=new Set([Er,Sr]),Cr=new Set([Er,Sr,"transform"]),Ir={x:"translateX",y:"translateY",z:"translateZ"};function Nr(t){return"function"==typeof t}function Br(t,e,n,r,i,o,a,s){void 0===e&&(e=!0),void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i={}),void 0===o&&(o=[]),void 0===a&&(a=!1),void 0===s&&(s=!0);var u=!0,l=!1,c=!1;for(var h in t){var d=t[h],A=_r(h),f=Tr(d,A);vr(h)?(l=!0,r[h]=f,o.push(h),u&&(A.default&&d!==A.default||!A.default&&0!==d)&&(u=!1)):br(h)?(i[h]=f,c=!0):(!Cr.has(h)||!Nr(f))&&(n[Ar(h,a)]=f)}return(l||"function"==typeof t.transform)&&(n.transform=function(t,e,n,r,i,o){void 0===o&&(o=!0);var a="",s=!1;n.sort(mr);for(var u=n.length,l=0;l<u;l++){var c=n[l];a+=(Ir[c]||c)+"("+e[c]+") ",s="z"===c||s}return!s&&i?a+="translateZ(0)":a=a.trim(),Nr(t.transform)?a=t.transform(e,r?"":a):o&&r&&(a="none"),a}(t,r,o,u,e,s)),c&&(n.transformOrigin=(i.originX||"50%")+" "+(i.originY||"50%")+" "+(i.originZ||0)),n}function kr(t){var e=void 0===t?{}:t,n=e.enableHardwareAcceleration,r=void 0===n||n,i=e.isDashCase,o=void 0===i||i,a=e.allowTransformNone,s=void 0===a||a,u={},l={},c={},h=[];return function(t){return h.length=0,Br(t,r,u,l,c,h,o,s),u}}var Pr=ir({onRead:function(t,e){var n=e.element,r=e.preparseOutput,i=_r(t);if(vr(t))return i&&i.default||0;if(Mr.has(t))return n[t];var o=window.getComputedStyle(n,null).getPropertyValue(Ar(t,!0))||0;return r&&i&&i.test(o)&&i.parse?i.parse(o):o},onRender:function(t,e,n){var r=e.element,i=e.buildStyles,o=e.hasCSSVariable;if(Object.assign(r.style,i(t)),o)for(var a=n.length,s=0;s<a;s++){var u=n[s];u.startsWith("--")&&r.style.setProperty(u,t[u])}-1!==n.indexOf(Er)&&(r[Er]=t[Er]),-1!==n.indexOf(Sr)&&(r[Sr]=t[Sr])},uncachedValues:Mr});var Dr=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),Lr=function(t,e){return Vn.transform(t*e)},Or={x:0,y:0,width:0,height:0};function Rr(t,e,n){return"string"==typeof t?t:Vn.transform(e+n*t)}var Fr={enableHardwareAcceleration:!1,isDashCase:!1};function Ur(t,e,n,r,i,o){void 0===e&&(e=Or),void 0===r&&(r=kr(Fr)),void 0===i&&(i={style:{}}),void 0===o&&(o=!0);var a=t.attrX,s=t.attrY,u=t.originX,l=t.originY,c=t.pathLength,h=t.pathSpacing,d=void 0===h?1:h,A=t.pathOffset,f=void 0===A?0:A,p=r(bn(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]));for(var g in p){if("transform"===g)i.style.transform=p[g];else i[o&&!Dr.has(g)?ar(g):g]=p[g]}return(void 0!==u||void 0!==l||p.transform)&&(i.style.transformOrigin=function(t,e,n){return Rr(e,t.x,t.width)+" "+Rr(n,t.y,t.height)}(e,void 0!==u?u:.5,void 0!==l?l:.5)),void 0!==a&&(i.x=a),void 0!==s&&(i.y=s),void 0!==n&&void 0!==c&&(i[o?"stroke-dashoffset":"strokeDashoffset"]=Lr(-f,n),i[o?"stroke-dasharray":"strokeDasharray"]=Lr(c,n)+" "+Lr(d,n)),i}function jr(t,e,n){void 0===n&&(n=!0);var r={style:{}},i=kr(Fr);return function(o){return Ur(o,t,e,i,r,n)}}var zr=ir({onRead:function(t,e){var n=e.element;if(vr(t=Dr.has(t)?t:ar(t))){var r=_r(t);return r&&r.default||0}return n.getAttribute(t)},onRender:function(t,e){var n=e.element,r=(0,e.buildAttrs)(t);for(var i in r)"style"===i?Object.assign(n.style,r.style):n.setAttribute(i,r[i])}}),Hr=ir({useCache:!1,onRead:function(t){return"scrollTop"===t?window.pageYOffset:window.pageXOffset},onRender:function(t){var e=t.scrollTop,n=void 0===e?0:e,r=t.scrollLeft,i=void 0===r?0:r;return window.scrollTo(i,n)}}),Qr=new WeakMap,Gr=function(t,e){var n;return t===window?n=Hr(t):function(t){return t instanceof HTMLElement||"function"==typeof t.click}(t)?n=function(t,e){void 0===e&&(e={});var n=e.enableHardwareAcceleration,r=e.allowTransformNone,i=bn(e,["enableHardwareAcceleration","allowTransformNone"]);return Pr(yn({element:t,buildStyles:kr({enableHardwareAcceleration:n,allowTransformNone:r}),preparseOutput:!0},i))}(t,e):function(t){return t instanceof SVGElement||"ownerSVGElement"in t}(t)&&(n=function(t){var e=function(t){try{return function(t){return"function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}(t)}catch(t){return{x:0,y:0,width:0,height:0}}}(t),n=function(t){return"path"===t.tagName}(t)&&t.getTotalLength?t.getTotalLength():void 0;return zr({element:t,buildAttrs:jr(e,n)})}(t)),Qr.set(t,n),n};function Vr(t,e){return function(t,e){return Qr.has(t)?Qr.get(t):Gr(t,e)}("string"==typeof t?document.querySelector(t):t,e)}var Wr,Yr,Xr,qr,Kr,Zr=function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!=w(t)||!t||"object"!=w(e)||!e)return!1;var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(e),u=0;u<o.length;u++){var l=o[u];if(!s(l))return!1;var c=t[l],h=e[l];if(!1===(i=n?n.call(r,c,h,l):void 0)||void 0===i&&c!==h)return!1}return!0},Jr="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",$r=Jr.length,ti=Array(20),ei=function(){for(var t=0;t<20;t++)ti[t]=Jr.charAt(Math.random()*$r);return ti.join("")},ni=function(){function t(){m(this,t),this.disposers=new Map}return b(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei();return this.flush(e),this.disposers.set(e,t()),e}},{key:"addDisposer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei();return this.flush(e),this.disposers.set(e,t),e}},{key:"addEventListener",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ei();return this.add((function(){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}),i),i}},{key:"setTimeout",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ei();return this.add((function(){var i=window.setTimeout((function(){n.remove(r),t()}),e);return function(){return window.clearTimeout(i)}}),r)}},{key:"setInterval",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ei();return this.add((function(){var n=window.setInterval(t,e);return function(){return window.clearInterval(n)}}),n)}},{key:"remove",value:function(t){var e=this.disposers.get(t);return this.disposers.delete(t),e}},{key:"flush",value:function(t){var e=this.remove(t);if(e)try{e()}catch(t){console.error(t)}}},{key:"flushAll",value:function(){this.disposers.forEach((function(t){try{t()}catch(t){console.error(t)}})),this.disposers.clear()}}]),t}(),ri=Object.defineProperty,ii=(n(80782),function(t,e,n){return r=t,i="symbol"!=w(e)?e+"":e,o=n,i in r?ri(r,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[i]=o,n;var r,i,o}),oi=function(){function t(e,n){m(this,t),ii(this,"_value"),ii(this,"_beforeDestroys"),ii(this,"_subscribers"),this._value=e,n&&(this.compare=n)}return b(t,[{key:"setValue",value:function(t,e){if(!this.compare(t,this._value)){var n=this._value;this._value=t,this._subscribers&&this._subscribers.forEach((function(r){return r(t,n,e)}))}}},{key:"reaction",value:function(t){var e=this;return this._subscribers||(this._subscribers=new Set),this._subscribers.add(t),function(){e._subscribers&&e._subscribers.delete(t)}}},{key:"subscribe",value:function(t,e){var n=this.reaction(t);return t(this._value,void 0,e),n}},{key:"derive",value:function(e,n,r){var i=new t(e(this.value,void 0,r),n),o=this.reaction((function(t,n,r){i.setValue(e(t,n,r))}));return i.addBeforeDestroy(o),i}},{key:"destroy",value:function(){this._beforeDestroys&&(this._beforeDestroys.forEach((function(t){return t()})),this._beforeDestroys.clear()),this._subscribers&&this._subscribers.clear()}},{key:"addBeforeDestroy",value:function(t){var e=this;return this._beforeDestroys||(this._beforeDestroys=new Set),this._beforeDestroys.add(t),function(){e._beforeDestroys&&e._beforeDestroys.delete(t)}}},{key:"compare",value:function(t,e){return t===e}},{key:"value",get:function(){return this._value}}]),t}();function ai(t,e){Object.keys(e).forEach((function(n){!function(t,e,n){var r,i;Object.defineProperties(t,(x(r={},e,{get:function(){return n.value}}),x(r,"_".concat(e,"$"),{value:n}),x(r,"set".concat((i=e)[0].toUpperCase()+i.slice(1)),{value:function(t,e){return n.setValue(t,e)}}),r))}(t,n,e[n])}))}function si(t){var e=function(e){var n=t.addDisposer((function(){e.destroy()}));return e.addBeforeDestroy((function(){t.remove(n)})),e};return{bindSideEffect:e,combine:function(t,n,r,i){return e(function(t,e,n,r){var i=t.map((function(t){return t.value})),o=new oi(e(i,void 0,r),n);return t.forEach((function(t,n){var r=t.reaction((function(t,r,a){var s=i.slice();s[n]=t;var u=i;i=s,o.setValue(e(s,u,a),a)}));o.addBeforeDestroy(r)})),o}(t,n,r,i))},createVal:function(t,n){return e(new oi(t,n))}}}!function(t){t.Light="light",t.Dark="dark",t.Auto="auto"}(Wr||(Wr={})),function(t){t.Normal="normal",t.Minimized="minimized",t.Maximized="maximized"}(Yr||(Yr={})),function(t){t.DarkMode="dark_mode",t.PrefersColorScheme="prefers_color_scheme",t.Close="close",t.Focus="focus",t.Blur="blur",t.Move="move",t.Resize="resize",t.IntrinsicMove="intrinsic_move",t.IntrinsicResize="intrinsic_resize",t.VisualResize="visual_resize",t.ZIndex="z_index",t.State="state",t.Minimized="minimized",t.Maximized="maximized",t.Readonly="readonly",t.Destroyed="destroyed"}(Xr||(Xr={})),function(t){t.Close="close",t.Maximize="maximize",t.Minimize="minimize"}(qr||(qr={})),function(t){t.North="n",t.South="s",t.West="w",t.East="e",t.NorthWest="nw",t.NorthEast="ne",t.SouthEast="se",t.SouthWest="sw"}(Kr||(Kr={}));var ui="dh";function li(t,e,n){return Math.min(Math.max(t,e),n)}function ci(t){t.stopPropagation(),t.cancelable&&t.preventDefault()}function hi(t){return t.touches?t.touches[0]:t}function di(){return Date.now().toString().slice(6)+Math.random().toString().slice(2,8)}var Ai=1;function fi(){return"New Box ".concat(Ai++)}function pi(t){return Boolean(t)}function gi(t){return!t}var vi=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.readonly,i=void 0!==r&&r,o=n.title,a=n.buttons,s=n.onEvent,u=n.onDragStart,l=n.namespace,c=void 0===l?"telebox":l,h=n.state,d=void 0===h?Yr.Normal:h;m(this,t),this.$btns=[],this.sideEffect=new ni,this.lastTitleBarClick={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarClick=function(t){var n;if(!(e.readonly||0!==t.button||null!=(n=t.target.dataset)&&n.teleTitleBarNoDblClick)){ci(t);var r=Date.now();r-e.lastTitleBarClick.timestamp<=500?Math.abs(t.clientX-e.lastTitleBarClick.clientX)<=5&&Math.abs(t.clientY-e.lastTitleBarClick.clientY)<=5&&e.onEvent&&e.onEvent({type:qr.Maximize}):e.onDragStart&&e.onDragStart(t),e.lastTitleBarClick.timestamp=r,e.lastTitleBarClick.clientX=t.clientX,e.lastTitleBarClick.clientY=t.clientY}},this.lastTitleBarTouch={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarTouch=function(t){var n;if(!(e.readonly||null!=(n=t.target.dataset)&&n.teleTitleBarNoDblClick)){ci(t);var r=Date.now(),i=t.touches[0]||{},o=i.clientX,a=void 0===o?e.lastTitleBarTouch.clientX+100:o,s=i.clientY,u=void 0===s?e.lastTitleBarTouch.clientY+100:s;r-e.lastTitleBarTouch.timestamp<=500?Math.abs(a-e.lastTitleBarTouch.clientX)<=10&&Math.abs(u-e.lastTitleBarTouch.clientY)<=10&&e.onEvent&&e.onEvent({type:qr.Maximize}):e.onDragStart&&e.onDragStart(t),e.lastTitleBarTouch.timestamp=r,e.lastTitleBarTouch.clientX=a,e.lastTitleBarTouch.clientY=u}},this.readonly=i,this.onEvent=s,this.onDragStart=u,this.namespace=c,this.title=o,this.state=d,this.buttons=a||[{type:qr.Minimize,iconClassName:this.wrapClassName("titlebar-icon-minimize")},{type:qr.Maximize,iconClassName:this.wrapClassName("titlebar-icon-maximize"),isActive:function(t){return t===Yr.Maximized}},{type:qr.Close,iconClassName:this.wrapClassName("titlebar-icon-close")}],this.$dragArea=this.renderDragArea()}return b(t,[{key:"setTitle",value:function(t){this.title=t,this.$title&&(this.$title.textContent=t,this.$title.title=t)}},{key:"setState",value:function(t){var e=this;this.state!==t&&(this.state=t,this.buttons.forEach((function(n,r){n.isActive&&e.$btns[r].classList.toggle("is-active",n.isActive(t))})))}},{key:"setReadonly",value:function(t){this.readonly!==t&&(this.readonly=t)}},{key:"render",value:function(){var t=this;if(!this.$titleBar){this.$titleBar=document.createElement("div"),this.$titleBar.className=this.wrapClassName("titlebar");var e=document.createElement("div");e.className=this.wrapClassName("title-area"),e.dataset.teleBoxHandle=ui,this.$title=document.createElement("h1"),this.$title.className=this.wrapClassName("title"),this.$title.dataset.teleBoxHandle=ui,this.title&&(this.$title.textContent=this.title,this.$title.title=this.title),e.appendChild(this.$title),e.appendChild(this.$dragArea);var n=document.createElement("div");n.className=this.wrapClassName("titlebar-btns"),this.buttons.forEach((function(e,r){var i=e.iconClassName,o=e.isActive,a=String(r),s=document.createElement("button");s.className="".concat(t.wrapClassName("titlebar-btn")," ").concat(i),s.dataset.teleTitleBarBtnIndex=a,s.dataset.teleTitleBarNoDblClick="true",o&&s.classList.toggle("is-active",o(t.state)),t.$btns.push(s),n.appendChild(s)})),this.sideEffect.addEventListener(n,"click",(function(e){var n;if(!t.readonly){var r=e.target,i=Number(null==(n=r.dataset)?void 0:n.teleTitleBarBtnIndex);if(!Number.isNaN(i)&&i<t.buttons.length){ci(e);var o=t.buttons[i];t.onEvent&&t.onEvent({type:o.type,value:o.value})}}})),this.$titleBar.appendChild(e),this.$titleBar.appendChild(n)}return this.$titleBar}},{key:"renderDragArea",value:function(){var t=document.createElement("div");return t.className=this.wrapClassName("drag-area"),t.dataset.teleBoxHandle=ui,this.sideEffect.addEventListener(t,"mousedown",this.handleTitleBarClick),this.sideEffect.addEventListener(t,"touchstart",this.handleTitleBarTouch,{passive:!0}),t}},{key:"dragHandle",value:function(){return this.$titleBar}},{key:"wrapClassName",value:function(t){return"".concat(this.namespace,"-").concat(t)}},{key:"destroy",value:function(){this.sideEffect.flushAll(),this.$titleBar&&(this.$titleBar=void 0,this.$title=void 0,this.$btns.length=0,this.onDragStart=void 0,this.onEvent=void 0)}}]),t}(),mi=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.id,i=void 0===r?di():r,a=n.title,s=void 0===a?fi():a,u=n.prefersColorScheme,l=void 0===u?Wr.Light:u,c=n.darkMode,h=n.visible,d=void 0===h||h,A=n.width,f=void 0===A?.5:A,p=n.height,g=void 0===p?.5:p,v=n.minWidth,y=void 0===v?0:v,b=n.minHeight,w=void 0===b?0:b,x=n.x,_=void 0===x?.1:x,T=n.y,E=void 0===T?.1:T,S=n.minimized,M=void 0!==S&&S,C=n.maximized,I=void 0!==C&&C,N=n.readonly,B=void 0!==N&&N,k=n.resizable,P=void 0===k||k,D=n.draggable,L=void 0===D||D,O=n.fence,R=void 0===O||O,F=n.fixRatio,U=void 0!==F&&F,j=n.focus,z=void 0!==j&&j,H=n.zIndex,Q=void 0===H?100:H,G=n.namespace,V=void 0===G?"telebox":G,W=n.titleBar,Y=n.content,X=n.footer,q=n.styles,K=n.containerRect,Z=void 0===K?{x:0,y:0,width:window.innerWidth,height:window.innerHeight}:K,J=n.collectorRect;m(this,t),this._renderSideEffect=new ni,this.handleTrackStart=function(t){var n;return null==(n=e._handleTrackStart)?void 0:n.call(e,t)},this._sideEffect=new ni,this._valSideEffectBinder=si(this._sideEffect);var $=this._valSideEffectBinder,tt=$.combine,et=$.createVal;this.id=i,this.namespace=V,this.events=new mn,this._delegateEvents=new mn;var nt=et(l);nt.reaction((function(t,n,r){r||e.events.emit(Xr.PrefersColorScheme,t)}));var rt=et(Boolean(c));null==c&&nt.subscribe((function(t,n,r){e._sideEffect.add((function(){if("auto"===t){var e=window.matchMedia("(prefers-color-scheme: dark)");if(e){rt.setValue(e.matches,r);var n=function(t){rt.setValue(t.matches,r)};return e.addListener(n),function(){return e.removeListener(n)}}return yi}return rt.setValue("dark"===t,r),yi}),"prefers-color-scheme")})),rt.reaction((function(t,n,r){r||e.events.emit(Xr.DarkMode,t)}));var it=et(Z,Zr),ot=et(J,Zr),at=et(s),st=et(d);st.reaction((function(t,n,r){!r&&!t&&e.events.emit(Xr.Close)}));var ut=et(B);ut.reaction((function(t,n,r){r||e.events.emit(Xr.Readonly,t)}));var lt=et(P),ct=et(L),ht=et(R),dt=et(U),At=et(Q);At.reaction((function(t,n,r){r||e.events.emit(Xr.ZIndex,t)}));var ft=et(z);ft.reaction((function(t,n,r){r||e.events.emit(t?Xr.Focus:Xr.Blur)}));var pt=et(M);pt.reaction((function(t,n,r){r||e.events.emit(Xr.Minimized,t)}));var gt=et(I);gt.reaction((function(t,n,r){r||e.events.emit(Xr.Maximized,t)}));var vt=tt([pt,gt],(function(t){var e=o(t,2),n=e[0],r=e[1];return n?Yr.Minimized:r?Yr.Maximized:Yr.Normal}));vt.reaction((function(t,n,r){r||e.events.emit(Xr.State,t)}));var mt=et({width:li(y,0,1),height:li(w,0,1)},Zr),yt=et({width:li(f,mt.value.width,1),height:li(g,mt.value.height,1)},Zr);mt.reaction((function(t,e,n){yt.setValue({width:li(f,t.width,1),height:li(g,t.height,1)},n)})),yt.reaction((function(t,n,r){r||e.events.emit(Xr.IntrinsicResize,t)}));var bt=tt([yt,gt],(function(t){var e=o(t,2),n=e[0];return e[1]?{width:1,height:1}:n}),Zr);bt.reaction((function(t,n,r){r||e.events.emit(Xr.Resize,t)}));var wt=tt([bt,pt,it,ot],(function(t){var e=o(t,4),n=e[0],r=e[1],i=e[2],a=e[3];return r&&a?{width:a.width/n.width/i.width,height:a.height/n.height/i.height}:n}),Zr);wt.reaction((function(t,n,r){r||e.events.emit(Xr.VisualResize,t)}));var xt=et({x:li(_,0,1),y:li(E,0,1)},Zr);xt.reaction((function(t,n,r){r||e.events.emit(Xr.IntrinsicMove,t)}));var _t=tt([xt,yt,it,ot,pt,gt],(function(t){var e=o(t,6),n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],u=e[5];return s&&a?u?{x:(a.x+a.width/2)/i.width-.5,y:(a.y+a.height/2)/i.height-.5}:{x:(a.x+a.width/2)/i.width-r.width/2,y:(a.y+a.height/2)/i.height-r.height/2}:u?{x:0,y:0}:n}),Zr);_t.reaction((function(t,n,r){r||e.events.emit(Xr.Move,t)})),this.titleBar=W||new vi({readonly:ut.value,title:at.value,namespace:this.namespace,onDragStart:function(t){var n;return null==(n=e._handleTrackStart)?void 0:n.call(e,t)},onEvent:function(t){if(e._delegateEvents.listeners.length>0)e._delegateEvents.emit(t.type);else switch(t.type){case qr.Maximize:gt.setValue(!gt.value);break;case qr.Minimize:pt.setValue(!0);break;case qr.Close:st.setValue(!1);break;default:console.error("Unsupported titleBar event:",t)}}}),ut.reaction((function(t){e.titleBar.setReadonly(t)}));var Tt=et(Y),Et=et(X),St=et(q);ai(this,{prefersColorScheme:nt,darkMode:rt,containerRect:it,collectorRect:ot,title:at,visible:st,readonly:ut,resizable:lt,draggable:ct,fence:ht,fixRatio:dt,focus:ft,zIndex:At,minimized:pt,maximized:gt,$userContent:Tt,$userFooter:Et,$userStyles:St}),this._state$=vt,this._minSize$=mt,this._size$=bt,this._intrinsicSize$=yt,this._visualSize$=wt,this._coord$=_t,this._intrinsicCoord$=xt,this.fixRatio&&this.transform(_t.value.x,_t.value.y,bt.value.width,bt.value.height,!0),this.$box=this.render()}return b(t,[{key:"setState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t){case Yr.Maximized:this.setMinimized(!1,e),this.setMaximized(!0,e);break;case Yr.Minimized:this.setMinimized(!0,e),this.setMaximized(!1,e);break;default:this.setMinimized(!1,e),this.setMaximized(!1,e)}return this}},{key:"setMinWidth",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._minSize$.setValue({width:t,height:this.minHeight},e),this}},{key:"setMinHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._minSize$.setValue({width:this.minWidth,height:t},e),this}},{key:"resize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._intrinsicSize$.setValue({width:t,height:e},n),this}},{key:"move",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._intrinsicCoord$.setValue({x:t,y:e},n),this}},{key:"transform",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.fixRatio){var o=this.intrinsicHeight/this.intrinsicWidth*n;e!==this.intrinsicY&&(e-=o-r),r=o}return e<0&&(e=0,r>this.intrinsicHeight&&(r=this.intrinsicHeight)),this._intrinsicCoord$.setValue({x:n>=this.minWidth?t:this.intrinsicX,y:r>=this.minHeight?e:this.intrinsicY},i),this._intrinsicSize$.setValue({width:li(n,this.minWidth,1),height:li(r,this.minHeight,1)},i),this}},{key:"mount",value:function(t){return t.appendChild(this.render()),this}},{key:"unmount",value:function(){return this.$box&&this.$box.remove(),this}},{key:"mountContent",value:function(t){return this.set$userContent(t),this}},{key:"unmountContent",value:function(){return this.set$userContent(void 0),this}},{key:"mountFooter",value:function(t){return this.set$userFooter(t),this}},{key:"unmountFooter",value:function(){return this.set$userFooter(void 0),this}},{key:"getUserStyles",value:function(){return this.$userStyles}},{key:"mountStyles",value:function(t){var e;return"string"==typeof t?(e=document.createElement("style")).textContent=t:e=t,this.set$userStyles(e),this}},{key:"unmountStyles",value:function(){return this.set$userStyles(void 0),this}},{key:"render",value:function(t){var e=this;if(t){if(t===this.$box)return this.$box;this.$box=t}else{if(this.$box)return this.$box;this.$box=document.createElement("div")}this._renderSideEffect.flushAll(),this.$box.classList.add(this.wrapClassName("box"));var n=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pi;return e._renderSideEffect.add((function(){var o=e.wrapClassName(r);return n.subscribe((function(e){t.classList.toggle(o,i(e))}))}))};n(this.$box,this._readonly$,"readonly"),n(this.$box,this._draggable$,"no-drag",gi),n(this.$box,this._resizable$,"no-resize",gi),n(this.$box,this._focus$,"blur",gi),n(this.$box,this._darkMode$,"color-scheme-dark"),n(this.$box,this._darkMode$,"color-scheme-light",gi),this._renderSideEffect.add((function(){var t=e.wrapClassName("minimized"),n=e.wrapClassName("maximized"),r="box-maximized-timer";return e._state$.subscribe((function(i){e.$box.classList.toggle(t,i===Yr.Minimized),i===Yr.Maximized?(e._renderSideEffect.flush(r),e.$box.classList.toggle(n,!0)):e._renderSideEffect.setTimeout((function(){e.$box.classList.toggle(n,!1)}),0,r)}))})),this._renderSideEffect.add((function(){return e._visible$.subscribe((function(t){e.$box.style.display=t?"block":"none"}))})),this._renderSideEffect.add((function(){return e._zIndex$.subscribe((function(t){e.$box.style.zIndex=String(t)}))}));var r=Vr(this.$box);this.$box.dataset.teleBoxID=this.id,this.$box.style.width=this.absoluteWidth+"px",this.$box.style.height=this.absoluteHeight+"px";var i=this.x*this.containerRect.width+this.containerRect.x,a=this.y*this.containerRect.height+this.containerRect.y;this.$box.style.transform="translate(".concat(i-10,"px,").concat(a-10,"px)"),this._valSideEffectBinder.combine([this._coord$,this._size$,this._minimized$,this._containerRect$,this._collectorRect$],(function(t){var e=o(t,5),n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],u=r.width*a.width,l=r.height*a.height;return{width:u+(i&&s?1:0),height:l+(i&&s?1:0),x:n.x*a.width,y:n.y*a.height,scaleX:i&&s?s.width/u:1,scaleY:i&&s?s.height/l:1}}),Zr).subscribe((function(t){r.set(t)})),r.set({x:i,y:a});var s=document.createElement("div");s.className=this.wrapClassName("box-main"),this.$box.appendChild(s);var u=document.createElement("div");u.className=this.wrapClassName("titlebar-wrap"),u.appendChild(this.titleBar.render()),this.$titleBar=u;var l=document.createElement("div");l.className=this.wrapClassName("content-wrap");var c=document.createElement("div");c.className=this.wrapClassName("content")+" tele-fancy-scrollbar",this.$content=c,this._renderSideEffect.add((function(){var t;return e._$userStyles$.subscribe((function(e){t&&t.remove(),t=e,e&&l.appendChild(e)}))})),this._renderSideEffect.add((function(){var t;return e._$userContent$.subscribe((function(e){t&&t.remove(),t=e,e&&c.appendChild(e)}))})),l.appendChild(c);var h=document.createElement("div");return h.className=this.wrapClassName("footer-wrap"),this.$footer=h,this._renderSideEffect.add((function(){var t;return e._$userFooter$.subscribe((function(e){t&&t.remove(),t=e,e&&h.appendChild(e)}))})),s.appendChild(u),s.appendChild(l),s.appendChild(h),this._renderResizeHandlers(),this.$box}},{key:"_renderResizeHandlers",value:function(){var t=this,e=document.createElement("div");e.className=this.wrapClassName("resize-handles"),Object.values(Kr).forEach((function(n){var r=document.createElement("div");r.className=t.wrapClassName(n)+" "+t.wrapClassName("resize-handle"),r.dataset.teleBoxHandle=n,e.appendChild(r)})),this.$box.appendChild(e);var n,r,i="handle-tracking-listener",o=this.wrapClassName("transforming"),a=0,s=0,u=0,l=0,c=0,h=0,d=function(e){if(t.state===Yr.Normal){ci(e);var n=hi(e),i=n.pageX,o=n.pageY;o<0&&(o=0);var d=(i-c)/t.containerRect.width,A=(o-h)/t.containerRect.height;switch(r){case Kr.North:t.transform(t.x,s+A,t.width,l-A);break;case Kr.South:t.transform(t.x,t.y,t.width,l+A);break;case Kr.West:t.transform(a+d,t.y,u-d,t.height);break;case Kr.East:t.transform(t.x,t.y,u+d,t.height);break;case Kr.NorthWest:t.transform(a+d,s+A,u-d,l-A);break;case Kr.NorthEast:t.transform(t.x,s+A,u+d,l-A);break;case Kr.SouthEast:t.transform(t.x,t.y,u+d,l+A);break;case Kr.SouthWest:t.transform(a+d,t.y,u-d,l+A);break;default:if(t.fence)t.move(li(a+d,0,1-t.width),li(s+A,0,1-t.height));else{var f=20/t.containerRect.width,p=20/t.containerRect.height;t.move(li(a+d,f-t.width,1-f),li(s+A,0,1-p))}}}},A=function(e){r=void 0,n&&(ci(e),t.$box.classList.toggle(o,!1),t._sideEffect.flush(i),n.remove())},f=function(e){var f;if(!(t.readonly||null!=e.button&&0!==e.button||!t.draggable||r||t.state!==Yr.Normal)){var p=e.target;if(null!=(f=p.dataset)&&f.teleBoxHandle){var g;ci(e),a=t.x,s=t.y,u=t.width,l=t.height,g=hi(e),c=g.pageX,h=g.pageY,r=p.dataset.teleBoxHandle,n||(n=document.createElement("div"));var v=r?t.wrapClassName("cursor-".concat(r)):"";n.className=t.wrapClassName("track-mask".concat(v?" ".concat(v):"")),t.$box.appendChild(n),t.$box.classList.add(o),t._sideEffect.add((function(){return window.addEventListener("mousemove",d),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("mouseup",A),window.addEventListener("touchend",A,{passive:!1}),window.addEventListener("touchcancel",A,{passive:!1}),function(){window.removeEventListener("mousemove",d),window.removeEventListener("touchmove",d),window.removeEventListener("mouseup",A),window.removeEventListener("touchend",A),window.removeEventListener("touchcancel",A)}}),i)}}};this._handleTrackStart=f,this._sideEffect.addEventListener(e,"mousedown",f,{},"box-resizeHandles-mousedown"),this._sideEffect.addEventListener(e,"touchstart",f,{passive:!1},"box-resizeHandles-touchstart")}},{key:"destroy",value:function(){this.$box.remove(),this.events.emit(Xr.Destroyed),this._sideEffect.flushAll(),this._renderSideEffect.flushAll(),this.events.removeAllListeners(),this._delegateEvents.removeAllListeners()}},{key:"wrapClassName",value:function(t){return"".concat(this.namespace,"-").concat(t)}},{key:"darkMode",get:function(){return this._darkMode$.value}},{key:"state",get:function(){return this._state$.value}},{key:"minWidth",get:function(){return this._minSize$.value.width}},{key:"minHeight",get:function(){return this._minSize$.value.height}},{key:"intrinsicWidth",get:function(){return this._intrinsicSize$.value.width}},{key:"intrinsicHeight",get:function(){return this._intrinsicSize$.value.height}},{key:"width",get:function(){return this._size$.value.width}},{key:"height",get:function(){return this._size$.value.height}},{key:"absoluteWidth",get:function(){return this.width*this.containerRect.width}},{key:"absoluteHeight",get:function(){return this.height*this.containerRect.height}},{key:"visualWidth",get:function(){return this._visualSize$.value.width}},{key:"visualHeight",get:function(){return this._visualSize$.value.height}},{key:"intrinsicX",get:function(){return this._intrinsicCoord$.value.x}},{key:"intrinsicY",get:function(){return this._intrinsicCoord$.value.y}},{key:"x",get:function(){return this._coord$.value.x}},{key:"y",get:function(){return this._coord$.value.y}}]),t}();function yi(){}var bi,wi=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.visible,i=void 0===r||r,o=n.readonly,a=void 0!==o&&o,s=n.darkMode,u=void 0!==s&&s,l=n.namespace,c=void 0===l?"telebox":l,h=n.styles,d=void 0===h?{}:h,A=n.onClick;m(this,t),this.handleCollectorClick=function(){!e._readonly&&e.onClick&&e.onClick()},this._visible=i,this._readonly=a,this._darkMode=u,this.namespace=c,this.styles=d,this.onClick=A}return b(t,[{key:"mount",value:function(t){return t.appendChild(this.render()),this}},{key:"unmount",value:function(){return this.$collector&&this.$collector.remove(),this}},{key:"setVisible",value:function(t){return this._visible!==t&&(this._visible=t,this.$collector&&this.$collector.classList.toggle(this.wrapClassName("collector-visible"),t)),this}},{key:"setReadonly",value:function(t){return this._readonly!==t&&(this._readonly=t,this.$collector&&this.$collector.classList.toggle(this.wrapClassName("collector-readonly"),t)),this}},{key:"setDarkMode",value:function(t){return this._darkMode!==t&&(this._darkMode=t,this.$collector&&(this.$collector.classList.toggle(this.wrapClassName("color-scheme-dark"),t),this.$collector.classList.toggle(this.wrapClassName("color-scheme-light"),!t))),this}},{key:"setStyles",value:function(t){if(Object.assign(this.styles,t),this.$collector){var e=this.$collector;Object.keys(t).forEach((function(n){var r=t[n];null!=r&&(e.style[n]=r)}))}return this}},{key:"render",value:function(){return this.$collector||(this.$collector=document.createElement("button"),this.$collector.className=this.wrapClassName("collector"),this.$collector.style.backgroundImage="url('".concat("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxOCAxNiI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxwYXRoIHN0cm9rZT0iIzdCODhBMCIgc3Ryb2tlLXdpZHRoPSIxLjQiIGQ9Ik0uNyAxLjJoMTYuNnYxMy42SC43eiIgLz4KICAgICAgICA8cGF0aCBmaWxsPSIjN0I4OEEwIiBkPSJNNCA1LjVoNnYxLjRINHpNNCA5LjVoMTB2MS40SDR6IiAvPgogICAgPC9nPgo8L3N2Zz4K","')"),this.$collector.addEventListener("click",this.handleCollectorClick),this._visible&&this.$collector.classList.add(this.wrapClassName("collector-visible")),this._readonly&&this.$collector.classList.add(this.wrapClassName("collector-readonly")),this.$collector.classList.add(this.wrapClassName(this._darkMode?"color-scheme-dark":"color-scheme-light")),this.setStyles(this.styles)),this.$collector}},{key:"destroy",value:function(){this.$collector&&(this.$collector.removeEventListener("click",this.handleCollectorClick),this.$collector.remove(),this.$collector=void 0),this.onClick=void 0}},{key:"wrapClassName",value:function(t){return"".concat(this.namespace,"-").concat(t)}},{key:"visible",get:function(){return this._visible}},{key:"readonly",get:function(){return this._readonly}},{key:"darkMode",get:function(){return this._darkMode}}]),t}();!function(t){t.Focused="focused",t.Blurred="blurred",t.Created="created",t.Removed="removed",t.State="state",t.Maximized="maximized",t.Minimized="minimized",t.Move="move",t.Resize="resize",t.IntrinsicMove="intrinsic_move",t.IntrinsicResize="intrinsic_resize",t.VisualResize="visual_resize",t.ZIndex="z_index",t.PrefersColorScheme="prefers_color_scheme",t.DarkMode="dark_mode"}(bi||(bi={}));var xi,_i,Ti=function(t){s(n,t);var e=u(n);function n(t){var r;return m(this,n),(r=e.call(this,t)).boxes=t.boxes,r.focusedBox=t.focusedBox,r.containerRect=t.containerRect,r.darkMode=t.darkMode,r}return b(n,[{key:"focusBox",value:function(t){var e;if(!this.focusedBox||this.focusedBox!==t){if(this.$titles&&this.state===Yr.Maximized)for(var n=this.$titles.firstElementChild.children,r=n.length-1;r>=0;r-=1){var i=n[r],o=null==(e=i.dataset)?void 0:e.teleBoxID;o&&(t&&o===t.id?i.classList.toggle(this.wrapClassName("titles-tab-focus"),!0):this.focusedBox&&o===this.focusedBox.id&&i.classList.toggle(this.wrapClassName("titles-tab-focus"),!1))}this.focusedBox=t}}},{key:"setContainerRect",value:function(t){if(this.containerRect=t,this.$titleBar){var e=t.x,n=t.y,r=t.width;this.$titleBar.style.transform="translate(".concat(e,"px, ").concat(n,"px)"),this.$titleBar.style.width=r+"px"}}},{key:"setBoxes",value:function(t){this.boxes=t,this.updateTitles()}},{key:"setState",value:function(t){i(p(n.prototype),"setState",this).call(this,t),this.$titleBar&&this.$titleBar.classList.toggle(this.wrapClassName("max-titlebar-maximized"),t===Yr.Maximized),this.updateTitles()}},{key:"setReadonly",value:function(t){i(p(n.prototype),"setReadonly",this).call(this,t),this.$titleBar&&this.$titleBar.classList.toggle(this.wrapClassName("readonly"),this.readonly)}},{key:"setDarkMode",value:function(t){t!==this.darkMode&&(this.darkMode=t,this.$titleBar&&(this.$titleBar.classList.toggle(this.wrapClassName("color-scheme-dark"),t),this.$titleBar.classList.toggle(this.wrapClassName("color-scheme-light"),!t)))}},{key:"render",value:function(){var t=i(p(n.prototype),"render",this).call(this),e=this.containerRect,r=e.x,o=e.y,a=e.width;t.style.transform="translate(".concat(r,"px, ").concat(o,"px)"),t.style.width=a+"px",t.classList.add(this.wrapClassName("max-titlebar")),t.classList.toggle(this.wrapClassName("max-titlebar-maximized"),this.state===Yr.Maximized),t.classList.toggle(this.wrapClassName("readonly"),this.readonly),t.classList.add(this.wrapClassName(this.darkMode?"color-scheme-dark":"color-scheme-light"));var s=document.createElement("div");return s.classList.add(this.wrapClassName("titles-area")),t.insertBefore(s,t.firstElementChild),this.updateTitles(),t}},{key:"destroy",value:function(){i(p(n.prototype),"destroy",this).call(this),this.$titles=void 0,this.boxes.length=0,this.focusedBox=void 0}},{key:"updateTitles",value:function(){this.$titleBar&&this.state===Yr.Maximized&&(this.$titleBar.classList.toggle(this.wrapClassName("max-titlebar-single-title"),1===this.boxes.length),1===this.boxes.length?this.setTitle(this.boxes[0].title):this.$titleBar.replaceChild(this.renderTitles(),this.$titleBar.firstElementChild))}},{key:"renderTitles",value:function(){var t=this;this.$titles=document.createElement("div"),this.$titles.className=this.wrapClassName("titles"),this.$titles.addEventListener("wheel",(function(t){t.currentTarget.scrollBy({left:t.deltaY>0?250:-250,behavior:"smooth"})}),{passive:!1});var e=document.createElement("div");return e.className=this.wrapClassName("titles-content"),this.$titles.appendChild(e),this.boxes.forEach((function(n){var r=document.createElement("button");r.className=t.wrapClassName("titles-tab"),r.textContent=n.title,r.dataset.teleBoxID=n.id,r.dataset.teleTitleBarNoDblClick="true",t.focusedBox&&n.id===t.focusedBox.id&&r.classList.add(t.wrapClassName("titles-tab-focus")),e.appendChild(r)})),this.$titles}}]),n}(vi),Ei=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.root,i=void 0===r?document.body:r,a=n.prefersColorScheme,s=void 0===a?Wr.Light:a,u=n.minimized,l=void 0!==u&&u,c=n.maximized,h=void 0!==c&&c,d=n.fence,A=void 0===d||d,f=n.containerRect,p=void 0===f?{x:0,y:0,width:window.innerWidth,height:window.innerHeight}:f,g=n.collector,v=n.namespace,y=void 0===v?"telebox":v,b=n.readonly,w=void 0!==b&&b;m(this,t),this.events=new mn,this._sideEffect=new ni;var x=si(this._sideEffect),_=x.combine,T=x.createVal;this.root=i,this.namespace=y,this.boxes$=T([]),this.topBox$=this.boxes$.derive((function(t){if(t.length>0)return t.reduce((function(t,e){return t.zIndex>e.zIndex?t:e}))}));var E=window.matchMedia("(prefers-color-scheme: dark)"),S=T(!1);E&&(S.setValue(E.matches),this._sideEffect.add((function(){var t=function(t){S.setValue(t.matches)};return E.addListener(t),function(){return E.removeListener(t)}})));var M=T(s);M.reaction((function(t,n,r){e.boxes.forEach((function(e){return e.setPrefersColorScheme(t,r)})),r||e.events.emit(bi.PrefersColorScheme,t)})),this._darkMode$=_([S,M],(function(t){var e=o(t,2),n=e[0],r=e[1];return"auto"===r?n:"dark"===r})),this._darkMode$.reaction((function(t,n,r){e.boxes.forEach((function(e){return e.setDarkMode(t,r)})),r||e.events.emit(bi.DarkMode,t)}));var C=T(w);C.reaction((function(t,n,r){e.boxes.forEach((function(e){return e.setReadonly(t,r)}))}));var I=T(l),N=T(h);N.reaction((function(t,n,r){e.boxes.forEach((function(e){return e.setMaximized(t,r)})),r||e.events.emit(bi.Maximized,t)}));var B=_([I,N],(function(t){var e=o(t,2),n=e[0],r=e[1];return n?Yr.Minimized:r?Yr.Maximized:Yr.Normal}));B.reaction((function(t,n,r){e.maxTitleBar.setState(t),r||e.events.emit(bi.State,t)}));var k=T(A);k.subscribe((function(t,n,r){e.boxes.forEach((function(e){return e.setFence(t,r)}))}));var P=T(p,Zr);P.reaction((function(t,n,r){e.boxes.forEach((function(e){return e.setContainerRect(t,r)})),e.maxTitleBar.setContainerRect(t)}));var D=T(null===g?null:g||new wi({visible:l,readonly:w,namespace:y}).mount(i));D.subscribe((function(t){t&&(t.setVisible(I.value),t.setReadonly(C.value),t.setDarkMode(e._darkMode$.value),e._sideEffect.add((function(){return t.onClick=function(){C.value||I.setValue(!1)},function(){return t.destroy()}}),"collect-onClick"))})),C.subscribe((function(t){var e;return null==(e=D.value)?void 0:e.setReadonly(t)})),this._darkMode$.subscribe((function(t){var e;null==(e=D.value)||e.setDarkMode(t)}));var L=function(){var t;if(null!=(t=D.value)&&t.$collector){var n=D.value.$collector.getBoundingClientRect(),r=n.x,i=n.y,o=n.width,a=n.height,s=e.root.getBoundingClientRect();return{x:r-s.x,y:i-s.y,width:o,height:a}}},O=T(I.value?L():void 0);O.subscribe((function(t,n,r){e.boxes.forEach((function(e){e.setCollectorRect(t,r)}))})),I.subscribe((function(t,n,r){var i,o;null==(i=D.value)||i.setVisible(t),t&&null!=(o=D.value)&&o.$collector&&O.setValue(L()),e.boxes.forEach((function(e){return e.setMinimized(t,r)})),r||e.events.emit(bi.Minimized,t)}));var R=this.wrapClassName("titlebar-icon-close"),F=function(t){var n;if(!C.value){var r=t.target;if(r.tagName)for(var i=r;i;i=i.parentElement){if(i.classList&&i.classList.contains(R))return;var o=null==(n=i.dataset)?void 0:n.teleBoxID;if(o){var a=e.getBox(o);if(a)return e.focusBox(a),void e.makeBoxTop(a)}}}};this._sideEffect.addEventListener(window,"mousedown",F,!0),this._sideEffect.addEventListener(window,"touchstart",F,!0),this.maxTitleBar=new Ti({darkMode:this.darkMode,readonly:C.value,namespace:this.namespace,state:B.value,boxes:this.boxes$.value,containerRect:P.value,onEvent:function(t){switch(t.type){case qr.Maximize:N.setValue(!N.value);break;case qr.Minimize:I.setValue(!0);break;case Xr.Close:e.removeTopBox(),e.focusTopBox()}}}),C.subscribe((function(t){return e.maxTitleBar.setReadonly(t)})),this._darkMode$.subscribe((function(t){e.maxTitleBar.setDarkMode(t)})),this.boxes$.reaction((function(t){e.maxTitleBar.setBoxes(t)})),ai(this,{prefersColorScheme:M,containerRect:P,collector:D,collectorRect:O,readonly:C,fence:k,minimized:I,maximized:N}),this._state$=B,this.root.appendChild(this.maxTitleBar.render())}return b(t,[{key:"setState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t){case Yr.Maximized:this.setMinimized(!1,e),this.setMaximized(!0,e);break;case Yr.Minimized:this.setMinimized(!0,e),this.setMaximized(!1,e);break;default:this.setMinimized(!1,e),this.setMaximized(!1,e)}return this}},{key:"create",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new mi(gn(pn({zIndex:this.topBox?this.topBox.zIndex+1:100},n?this.smartPosition(e):e),{darkMode:this.darkMode,prefersColorScheme:this.prefersColorScheme,maximized:this.maximized,minimized:this.minimized,fence:this.fence,namespace:this.namespace,containerRect:this.containerRect,readonly:this.readonly,collectorRect:this.collectorRect}));return r.mount(this.root),r.focus&&(this.focusBox(r),n&&this.makeBoxTop(r)),this.boxes$.setValue([].concat(a(this.boxes),[r])),r._delegateEvents.on(qr.Maximize,(function(){t.setMaximized(!t.maximized)})),r._delegateEvents.on(qr.Minimize,(function(){t.setMinimized(!0)})),r._delegateEvents.on(qr.Close,(function(){t.remove(r),t.focusTopBox()})),r._coord$.reaction((function(e,n,i){i||t.events.emit(bi.Move,r)})),r._size$.reaction((function(e,n,i){i||t.events.emit(bi.Resize,r)})),r._intrinsicCoord$.reaction((function(e,n,i){i||t.events.emit(bi.IntrinsicMove,r)})),r._intrinsicSize$.reaction((function(e,n,i){i||t.events.emit(bi.IntrinsicResize,r)})),r._visualSize$.reaction((function(e,n,i){i||t.events.emit(bi.VisualResize,r)})),r._zIndex$.reaction((function(e,n,i){if(t.boxes.length>0){var o=t.boxes.reduce((function(t,e){return t.zIndex>e.zIndex?t:e}));t.topBox$.setValue(o)}i||t.events.emit(bi.ZIndex,r)})),this.events.emit(bi.Created,r),r}},{key:"query",value:function(t){return t?this.boxes.filter(this.teleBoxMatcher(t)):a(this.boxes)}},{key:"queryOne",value:function(t){return t?this.boxes.find(this.teleBoxMatcher(t)):this.boxes[0]}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.boxes.find((function(e){return e.id===t}));if(r)return this.updateBox(r,e,n)}},{key:"updateAll",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.boxes.forEach((function(r){e.updateBox(r,t,n)}))}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getBoxIndex(t);if(n>=0){var r=this.boxes.slice(),i=r.splice(n,1);return this.boxes$.setValue(r),i.forEach((function(t){return t.destroy()})),e||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(bi.Removed,i)),i[0]}}},{key:"removeTopBox",value:function(){if(this.topBox)return this.remove(this.topBox)}},{key:"removeAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boxes$.value;return this.boxes$.setValue([]),e.forEach((function(t){return t.destroy()})),t||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(bi.Removed,e)),e}},{key:"destroy",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.events.removeAllListeners(),this._sideEffect.flushAll(),this.removeAll(e),Object.keys(this).forEach((function(e){var n=t[e];n instanceof oi&&n.destroy()}))}},{key:"wrapClassName",value:function(t){return"".concat(this.namespace,"-").concat(t)}},{key:"focusBox",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getBox(t);r&&(this.boxes.forEach((function(t){if(r===t){var i=!1;r.focus||(i=!0,r.setFocus(!0,n)),i&&!n&&e.events.emit(bi.Focused,r)}else t.focus&&e.blurBox(t,n)})),this.maxTitleBar.focusBox(r))}},{key:"focusTopBox",value:function(){if(this.topBox&&!this.topBox.focus)return this.focusBox(this.topBox)}},{key:"blurBox",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getBox(t);n&&(n.focus&&(n.setFocus(!1,e),e||this.events.emit(bi.Blurred,n)),this.maxTitleBar.focusedBox===n&&this.maxTitleBar.focusBox())}},{key:"blurAll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.boxes.forEach((function(n){n.focus&&(n.setFocus(!1,e),e||t.events.emit(bi.Blurred,n))})),this.maxTitleBar.focusedBox&&this.maxTitleBar.focusBox()}},{key:"teleBoxMatcher",value:function(t){var e=Object.keys(t);return function(n){return e.every((function(e){return t[e]===n[e]}))}}},{key:"updateBox",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(null!=e.x||null!=e.y)&&t.move(null==e.x?t.intrinsicX:e.x,null==e.y?t.intrinsicY:e.y,n),(null!=e.width||null!=e.height)&&t.resize(null==e.width?t.intrinsicWidth:e.width,null==e.height?t.intrinsicHeight:e.height,n),null!=e.title&&(t.setTitle(e.title),this.maxTitleBar.updateTitles()),null!=e.visible&&t.setVisible(e.visible,n),null!=e.minHeight&&t.setMinHeight(e.minHeight,n),null!=e.minWidth&&t.setMinWidth(e.minWidth,n),null!=e.resizable&&t.setResizable(e.resizable,n),null!=e.draggable&&t.setDraggable(e.draggable,n),null!=e.fixRatio&&t.setFixRatio(e.fixRatio,n),null!=e.zIndex&&t.setZIndex(e.zIndex,n),null!=e.content&&t.mountContent(e.content),null!=e.footer&&t.mountFooter(e.footer)}},{key:"smartPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=t.y,r=t.width,i=void 0===r?.5:r,o=t.height,a=void 0===o?.5:o;if(null==e){var s=20;this.topBox&&((s=this.topBox.intrinsicX*this.containerRect.width+20)>this.containerRect.width-i*this.containerRect.width&&(s=20)),e=s/this.containerRect.width}if(null==n){var u=20;this.topBox&&((u=this.topBox.intrinsicY*this.containerRect.height+20)>this.containerRect.height-a*this.containerRect.height&&(u=20)),n=u/this.containerRect.height}return gn(pn({},t),{x:e,y:n,width:i,height:a})}},{key:"makeBoxTop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.topBox&&t!==this.topBox&&t.setZIndex(this.topBox.zIndex+1,e)}},{key:"getBoxIndex",value:function(t){return"string"==typeof t?this.boxes.findIndex((function(e){return e.id===t})):this.boxes.findIndex((function(e){return e===t}))}},{key:"getBox",value:function(t){return"string"==typeof t?this.boxes.find((function(e){return e.id===t})):t}},{key:"boxes",get:function(){return this.boxes$.value}},{key:"topBox",get:function(){return this.topBox$.value}},{key:"darkMode",get:function(){return this._darkMode$.value}},{key:"state",get:function(){return this._state$.value}}]),t}(),Si=function(){function t(e,n){var r=this;m(this,t),this.context=e,this.createTeleBoxManagerConfig=n;var i=e.emitter,o=e.callbacks,a=e.boxEmitter;this.teleBoxManager=this.setupBoxManager(n),this.teleBoxManager._state$.reaction((function(t){o.emit("boxStateChange",t),i.emit("boxStateChange",t)})),this.teleBoxManager._darkMode$.reaction((function(t){o.emit("darkModeChange",t)})),this.teleBoxManager._prefersColorScheme$.reaction((function(t){o.emit("prefersColorSchemeChange",t)})),this.teleBoxManager._minimized$.reaction((function(t){t||setTimeout((function(){var t=.001*(Math.random()>.5?1:-1);r.teleBoxManager.boxes.forEach((function(e){e.resize(e.intrinsicWidth+t,e.intrinsicHeight+t,!0)}))}),400)})),this.teleBoxManager.events.on("minimized",(function(t){if(r.context.safeSetAttributes({minimized:t}),t)r.context.cleanFocus(),r.blurAllBox();else{var e=r.getTopBox();e&&(r.context.setAppFocus(e.id),r.focusBox({appId:e.id},!1))}})),this.teleBoxManager.events.on("maximized",(function(t){r.context.safeSetAttributes({maximized:t})})),this.teleBoxManager.events.on("removed",(function(t){t.forEach((function(t){a.emit("close",{appId:t.id})}))})),this.teleBoxManager.events.on("intrinsic_move",R.debounce((function(t){a.emit("move",{appId:t.id,x:t.intrinsicX,y:t.intrinsicY})}),50)),this.teleBoxManager.events.on("intrinsic_resize",R.debounce((function(t){a.emit("resize",{appId:t.id,width:t.intrinsicWidth,height:t.intrinsicHeight})}),200)),this.teleBoxManager.events.on("focused",(function(t){t&&(r.canOperate?a.emit("focus",{appId:t.id}):r.teleBoxManager.blurBox(t.id))})),this.teleBoxManager.events.on("z_index",(function(t){r.context.updateAppState(t.id,J.ZIndex,t.zIndex)})),i.on("playgroundSizeChange",(function(){return r.updateManagerRect()})),i.on("updateManagerRect",(function(){return r.updateManagerRect()}))}return b(t,[{key:"createBox",value:function(t){var e,n,r;if(this.teleBoxManager){var i=null!=(e=t.app.config)?e:{},o=i.minwidth,a=void 0===o?.4722222222222222:o,s=i.minheight,u=void 0===s?.4722222222222222:s,l=null!=(n=t.app.config)?n:{},c=l.width,h=l.height,d=(null==(r=t.options)?void 0:r.title)||t.appId,A=this.teleBoxManager.containerRect;a>1&&(a/=A.width),u>1&&(u/=A.height);var f={title:d,minWidth:a,minHeight:u,width:c,height:h,id:t.appId};this.teleBoxManager.create(f,t.smartPosition),this.context.emitter.emit("".concat(t.appId).concat(q.WindowCreated))}}},{key:"setBoxInitState",value:function(t){var e=this.teleBoxManager.queryOne({id:t});e&&e.state===Yr.Maximized&&this.context.boxEmitter.emit("resize",{appId:t,x:e.x,y:e.y,width:e.intrinsicWidth,height:e.intrinsicHeight})}},{key:"setupBoxManager",value:function(t){var e=Ay.wrapper?Ay.wrapper:document.body,n=e.getBoundingClientRect(),r={root:e,containerRect:{x:0,y:0,width:n.width,height:n.height},fence:!1,prefersColorScheme:null==t?void 0:t.prefersColorScheme},i=new Ei(r);this.teleBoxManager&&this.teleBoxManager.destroy(),this.teleBoxManager=i;var o=(null==t?void 0:t.collectorContainer)||Ay.wrapper;return o&&this.setCollectorContainer(o),i}},{key:"setCollectorContainer",value:function(t){var e,n=new wi({styles:null==(e=this.createTeleBoxManagerConfig)?void 0:e.collectorStyles}).mount(t);this.teleBoxManager.setCollector(n)}},{key:"getBox",value:function(t){return this.teleBoxManager.queryOne({id:t})}},{key:"closeBox",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.teleBoxManager.remove(t,e)}},{key:"boxIsFocus",value:function(t){var e=this.getBox(t);return null==e?void 0:e.focus}},{key:"getFocusBox",value:function(){return this.teleBoxManager.query({focus:!0})[0]}},{key:"getTopBox",value:function(){return this.teleBoxManager.topBox}},{key:"updateBoxState",value:function(t){var e=this;if(t){var n=this.getBox(t.id);n&&(this.teleBoxManager.update(n.id,{x:t.x,y:t.y,width:t.width||.5,height:t.height||.5,zIndex:t.zIndex},!0),setTimeout((function(){t.focus&&e.teleBoxManager.focusBox(n.id,!0),null!=t.maximized&&e.teleBoxManager.setMaximized(Boolean(t.maximized),!0),null!=t.minimized&&e.teleBoxManager.setMinimized(Boolean(t.minimized),!0)}),50),this.context.callbacks.emit("boxStateChange",this.teleBoxManager.state))}}},{key:"updateManagerRect",value:function(){var t,e=null==(t=this.mainView.divElement)?void 0:t.getBoundingClientRect();if(e&&e.width>0&&e.height>0){var n={x:0,y:0,width:e.width,height:e.height};this.teleBoxManager.setContainerRect(n),this.context.notifyContainerRectUpdate(this.teleBoxManager.containerRect)}}},{key:"moveBox",value:function(t){var e=t.appId,n=t.x,r=t.y;this.teleBoxManager.update(e,{x:n,y:r},!0)}},{key:"focusBox",value:function(t){var e=t.appId,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.teleBoxManager.focusBox(e,n)}},{key:"resizeBox",value:function(t){var e=t.appId,n=t.width,r=t.height,i=t.skipUpdate;this.teleBoxManager.update(e,{width:n,height:r},i)}},{key:"setBoxMinSize",value:function(t){this.teleBoxManager.update(t.appId,{minWidth:t.minWidth,minHeight:t.minHeight},!0)}},{key:"setBoxTitle",value:function(t){this.teleBoxManager.update(t.appId,{title:t.title},!0)}},{key:"blurAllBox",value:function(){this.teleBoxManager.blurAll()}},{key:"updateAll",value:function(t){this.teleBoxManager.updateAll(t)}},{key:"setMaximized",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==this.maximized&&this.teleBoxManager.setMaximized(t,e)}},{key:"setMinimized",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.teleBoxManager.setMinimized(t,e)}},{key:"focusTopBox",value:function(){if(this.teleBoxManager.query().length>=1){var t=this.getTopBox();t&&this.focusBox({appId:t.id},!1)}}},{key:"updateBox",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.teleBoxManager.update(t,e,n)}},{key:"setReadonly",value:function(t){this.teleBoxManager.setReadonly(t)}},{key:"setPrefersColorScheme",value:function(t){this.teleBoxManager.setPrefersColorScheme(t)}},{key:"setZIndex",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.teleBoxManager.update(t,{zIndex:e},n)}},{key:"destroy",value:function(){this.teleBoxManager.destroy()}},{key:"mainView",get:function(){return this.context.getMainView()}},{key:"canOperate",get:function(){return this.context.canOperate()}},{key:"boxState",get:function(){return this.teleBoxManager.state}},{key:"maximized",get:function(){return this.teleBoxManager.maximized}},{key:"minimized",get:function(){return this.teleBoxManager.minimized}},{key:"darkMode",get:function(){return this.teleBoxManager.darkMode}},{key:"prefersColorScheme",get:function(){return this.teleBoxManager.prefersColorScheme}},{key:"boxSize",get:function(){return this.teleBoxManager.boxes.length}}]),t}();function Mi(){}function Ci(t){return t()}function Ii(){return Object.create(null)}function Ni(t){t.forEach(Ci)}function Bi(t){return"function"==typeof t}function ki(t,e){return t!=t?e==e:t!==e||t&&"object"==w(t)||"function"==typeof t}function Pi(t,e){return xi||(xi=document.createElement("a")),xi.href=e,t===xi.href}function Di(t,e){t.appendChild(e)}function Li(t,e,n){t.insertBefore(e,n||null)}function Oi(t){t.parentNode.removeChild(t)}function Ri(t){return document.createElement(t)}function Fi(t){return document.createTextNode(t)}function Ui(){return Fi(" ")}function ji(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function zi(t){return Array.from(t.childNodes)}function Hi(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Qi(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Gi(t){_i=t}var Vi=[],Wi=[],Yi=[],Xi=[],qi=Promise.resolve(),Ki=!1;function Zi(t){Yi.push(t)}var Ji=new Set,$i=0;function to(){var t=_i;do{for(;$i<Vi.length;){var e=Vi[$i];$i++,Gi(e),eo(e.$$)}for(Gi(null),Vi.length=0,$i=0;Wi.length;)Wi.pop()();for(var n=0;n<Yi.length;n+=1){var r=Yi[n];Ji.has(r)||(Ji.add(r),r())}Yi.length=0}while(Vi.length);for(;Xi.length;)Xi.pop()();Ki=!1,Ji.clear(),Gi(t)}function eo(t){if(null!==t.fragment){t.update(),Ni(t.before_update);var e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Zi)}}var no=new Set;function ro(t,e){t&&t.i&&(no.delete(t),t.i(e))}function io(t,e,n,r){var i=t.$$,o=i.fragment,s=i.on_mount,u=i.on_destroy,l=i.after_update;o&&o.m(e,n),r||Zi((function(){var e=s.map(Ci).filter(Bi);u?u.push.apply(u,a(e)):Ni(e),t.$$.on_mount=[]})),l.forEach(Zi)}function oo(t,e){-1===t.$$.dirty[0]&&(Vi.push(t),Ki||(Ki=!0,qi.then(to)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}var ao=function(){function t(){m(this,t)}return b(t,[{key:"$destroy",value:function(){(function(t,e){var n=t.$$;null!==n.fragment&&(Ni(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])})(this,1),this.$destroy=Mi}},{key:"$on",value:function(t,e){var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}}},{key:"$set",value:function(t){this.$$set&&!function(t){return 0===Object.keys(t).length}(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}]),t}();function so(t){var e,n,r,i,o,a,s,u=t[16]&&uo(t),l=t[17]&&lo(t);return{c:function(){e=Ri("div"),n=Ri("div"),u&&u.c(),r=Ui(),i=Ri("span"),o=Fi(t[0]),a=Ui(),l&&l.c(),Qi(i,"overflow","hidden"),Qi(i,"white-space","nowrap"),Qi(i,"text-overflow","ellipsis"),Qi(i,"max-width","80px"),ji(n,"class",t[8]),Qi(n,"background-color",t[2]),Qi(n,"color",t[9]),Qi(n,"opacity",t[11]),ji(e,"class",s="netless-window-manager-cursor-name "+t[14]+" "+t[13])},m:function(t,s){Li(t,e,s),Di(e,n),u&&u.m(n,null),Di(n,r),Di(n,i),Di(i,o),Di(n,a),l&&l.m(n,null)},p:function(t,i){t[16]?u?u.p(t,i):((u=uo(t)).c(),u.m(n,r)):u&&(u.d(1),u=null),1&i&&Hi(o,t[0]),t[17]?l?l.p(t,i):((l=lo(t)).c(),l.m(n,null)):l&&(l.d(1),l=null),256&i&&ji(n,"class",t[8]),4&i&&Qi(n,"background-color",t[2]),512&i&&Qi(n,"color",t[9]),2048&i&&Qi(n,"opacity",t[11]),24576&i&&s!==(s="netless-window-manager-cursor-name "+t[14]+" "+t[13])&&ji(e,"class",s)},d:function(t){t&&Oi(e),u&&u.d(),l&&l.d()}}}function uo(t){var e,n;return{c:function(){ji(e=Ri("img"),"class","netless-window-manager-cursor-selector-avatar"),ji(e,"style",t[18]()),Pi(e.src,n=t[7])||ji(e,"src",n),ji(e,"alt","avatar")},m:function(t,n){Li(t,e,n)},p:function(t,r){128&r&&!Pi(e.src,n=t[7])&&ji(e,"src",n)},d:function(t){t&&Oi(e)}}}function lo(t){var e,n;return{c:function(){e=Ri("span"),n=Fi(t[1]),ji(e,"class","netless-window-manager-cursor-tag-name"),Qi(e,"background-color",t[10])},m:function(t,r){Li(t,e,r),Di(e,n)},p:function(t,r){2&r&&Hi(n,t[1]),1024&r&&Qi(e,"background-color",t[10])},d:function(t){t&&Oi(e)}}}function co(t){var e,n,r,i,a,s,u=!t[12]&&so(t);return{c:function(){e=Ri("div"),u&&u.c(),n=Ui(),r=Ri("div"),ji(i=Ri("img"),"class",a="netless-window-manager-cursor-"+t[3]+"-image "+t[13]),Pi(i.src,s=t[6])||ji(i,"src",s),ji(i,"alt",t[3]),ji(r,"class","cursor-image-wrapper"),ji(e,"class","netless-window-manager-cursor-mid"),Qi(e,"transform","translateX("+t[4]+"px) translateY("+t[5]+"px)"),Qi(e,"display",t[15])},m:function(t,o){Li(t,e,o),u&&u.m(e,null),Di(e,n),Di(e,r),Di(r,i)},p:function(t,r){var l=o(r,1)[0];t[12]?u&&(u.d(1),u=null):u?u.p(t,l):((u=so(t)).c(),u.m(e,n)),8200&l&&a!==(a="netless-window-manager-cursor-"+t[3]+"-image "+t[13])&&ji(i,"class",a),64&l&&!Pi(i.src,s=t[6])&&ji(i,"src",s),8&l&&ji(i,"alt",t[3]),48&l&&Qi(e,"transform","translateX("+t[4]+"px) translateY("+t[5]+"px)"),32768&l&&Qi(e,"display",t[15])},i:Mi,o:Mi,d:function(t){t&&Oi(e),u&&u.d()}}}function ho(t,e,n){var r,i,a,s,u,l,c,h,d=e.cursorName,A=e.tagName,f=e.backgroundColor,p=e.appliance,g=e.x,v=e.y,m=e.src,y=e.visible,b=e.avatar,w=e.theme,x=e.color,_=e.cursorTagBackgroundColor,T=e.opacity,E=e.pencilEraserSize;return t.$$set=function(t){"cursorName"in t&&n(0,d=t.cursorName),"tagName"in t&&n(1,A=t.tagName),"backgroundColor"in t&&n(2,f=t.backgroundColor),"appliance"in t&&n(3,p=t.appliance),"x"in t&&n(4,g=t.x),"y"in t&&n(5,v=t.y),"src"in t&&n(6,m=t.src),"visible"in t&&n(19,y=t.visible),"avatar"in t&&n(7,b=t.avatar),"theme"in t&&n(8,w=t.theme),"color"in t&&n(9,x=t.color),"cursorTagBackgroundColor"in t&&n(10,_=t.cursorTagBackgroundColor),"opacity"in t&&n(11,T=t.opacity),"pencilEraserSize"in t&&n(20,E=t.pencilEraserSize)},t.$$.update=function(){1&t.$$.dirty&&(r=!R.isEmpty(d)),2&t.$$.dirty&&n(17,i=!R.isEmpty(A)),128&t.$$.dirty&&n(16,a=!R.isEmpty(b)),524288&t.$$.dirty&&n(15,s=y?"initial":"none"),8&t.$$.dirty&&n(12,u=p===F.ApplianceNames.laserPointer),4104&t.$$.dirty&&n(21,l=u||p===F.ApplianceNames.pencilEraser),2097152&t.$$.dirty&&n(14,c=l?"netless-window-manager-laserPointer-pencilEraser-offset":""),1048576&t.$$.dirty&&n(13,h=3===E?"netless-window-manager-pencilEraser-3-offset":"")},[d,A,f,p,g,v,m,b,w,x,_,T,u,h,c,s,a,i,function(){return Object.entries({width:(r?19:28)+"px",height:(r?19:28)+"px",position:r?"initial":"absolute","border-color":r?"white":f,"margin-right":(r?4:0)+"px"}).map((function(t){var e=o(t,2),n=e[0],r=e[1];return"".concat(n,": ").concat(r)})).join(";")},y,E,l]}var Ao=function(t){s(n,t);var e=u(n);function n(t){var r;return m(this,n),function(t,e,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],u=_i;Gi(t);var l=t.$$={fragment:null,ctx:null,props:o,update:Mi,not_equal:i,bound:Ii(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ii(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);var c=!1;if(l.ctx=n?n(t,e.props||{},(function(e,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return l.ctx&&i(l.ctx[e],l.ctx[e]=r)&&(!l.skip_bound&&l.bound[e]&&l.bound[e](r),c&&oo(t,e)),n})):[],l.update(),c=!0,Ni(l.before_update),l.fragment=!!r&&r(l.ctx),e.target){if(e.hydrate){var h=zi(e.target);l.fragment&&l.fragment.l(h),h.forEach(Oi)}else l.fragment&&l.fragment.c();e.intro&&ro(t.$$.fragment),io(t,e.target,e.anchor,e.customElement),to()}Gi(u)}(c(r=e.call(this)),t,ho,co,ki,{cursorName:0,tagName:1,backgroundColor:2,appliance:3,x:4,y:5,src:6,visible:19,avatar:7,theme:8,color:9,cursorTagBackgroundColor:10,opacity:11,pencilEraserSize:20}),r}return n}(ao),fo=function(){function t(e,n,r,i){var o=this;m(this,t),this.manager=e,this.memberId=n,this.cursorManager=r,this.wrapper=i,this.move=function(t){var e;if("main"===t.type){var n=o.cursorManager.wrapperRect;o.component&&n&&(o.autoHidden(),o.moveCursor(t,n,o.manager.mainView))}else{var r=o.cursorManager.focusView,i=null==(e=null==r?void 0:r.divElement)?void 0:e.getBoundingClientRect(),a=null==r?void 0:r.camera;r&&i&&a&&o.component&&(o.autoHidden(),o.moveCursor(t,i,r))}},this.leave=function(){o.hide()},this.updateMember(),this.createCursor(),this.autoHidden()}var e;return b(t,[{key:"moveCursor",value:function(t,e,n){var r,i,o=t.x,a=t.y,s=t.type,u=null==n?void 0:n.screen.convertPointToScreen(o,a);if(u){var l=u.x-2,c=u.y-18;if("app"===s){var h=this.cursorManager.wrapperRect;h&&(l=l+e.x-h.x,c=c+e.y-h.y)}u.x<0||u.x>e.width||u.y<0||u.y>e.height?null==(r=this.component)||r.$set({visible:!1,x:l,y:c}):null==(i=this.component)||i.$set({visible:!0,x:l,y:c})}}},{key:"autoHidden",value:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout((function(){t.hide()}),1e4)}},{key:"createCursor",value:(e=v(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.member&&this.wrapper&&(this.component=new Ao({target:this.wrapper,props:this.initProps()}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initProps",value:function(){var t;return{x:0,y:0,appliance:this.memberApplianceName,avatar:this.memberAvatar,src:this.getIcon(),visible:!1,backgroundColor:this.memberColor,cursorName:this.memberCursorName,theme:this.memberTheme,color:this.memberCursorTextColor,cursorTagBackgroundColor:this.memberCursorTagBackgroundColor,opacity:this.memberOpacity,tagName:this.memberTagName,pencilEraserSize:null==(t=this.member)?void 0:t.memberState.pencilEraserSize}}},{key:"getIcon",value:function(){var t;if(this.member){var e=this.cursorManager.applianceIcons,n=e[F.ApplianceNames.shape];if(this.memberApplianceName===F.ApplianceNames.pencilEraser){var r=(null==(t=this.member)?void 0:t.memberState.pencilEraserSize)||1;n=e["".concat(this.memberApplianceName).concat(r)]}else n=e[this.memberApplianceName||F.ApplianceNames.shape];return n||e[F.ApplianceNames.shape]}}},{key:"updateMember",value:function(){return this.member=function(t,e){var n=null==t?void 0:t.state.roomMembers;return null==n?void 0:n.find((function(t){var n;return(null==(n=t.payload)?void 0:n.uid)===e}))}(this.manager.room,this.memberId),this.updateComponent(),this.member}},{key:"updateComponent",value:function(){var t;null==(t=this.component)||t.$set(R.omit(this.initProps(),["x","y"]))}},{key:"destroy",value:function(){this.component&&this.component.$destroy(),this.cursorManager.cursorInstances.delete(this.memberId),this.timer&&clearTimeout(this.timer)}},{key:"hide",value:function(){this.component&&(this.component.$set({visible:!1}),this.destroy())}},{key:"memberApplianceName",get:function(){var t,e;return null==(e=null==(t=this.member)?void 0:t.memberState)?void 0:e.currentApplianceName}},{key:"memberColor",get:function(){var t,e;return"rgb(".concat(null==(e=null==(t=this.member)?void 0:t.memberState)?void 0:e.strokeColor.join(","),")")}},{key:"payload",get:function(){var t;return null==(t=this.member)?void 0:t.payload}},{key:"memberCursorName",get:function(){var t,e;return(null==(t=this.payload)?void 0:t.nickName)||(null==(e=this.payload)?void 0:e.cursorName)||this.memberId}},{key:"memberTheme",get:function(){var t;return null!=(t=this.payload)&&t.theme?"netless-window-manager-cursor-inner-mellow":"netless-window-manager-cursor-inner"}},{key:"memberCursorTextColor",get:function(){var t;return(null==(t=this.payload)?void 0:t.cursorTextColor)||"#FFFFFF"}},{key:"memberCursorTagBackgroundColor",get:function(){var t;return(null==(t=this.payload)?void 0:t.cursorTagBackgroundColor)||this.memberColor}},{key:"memberAvatar",get:function(){var t;return null==(t=this.payload)?void 0:t.avatar}},{key:"memberOpacity",get:function(){return this.memberCursorName||this.memberAvatar?1:0}},{key:"memberTagName",get:function(){var t;return null==(t=this.payload)?void 0:t.cursorTagName}}]),t}(),po=(x(r={},F.ApplianceNames.pencil,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg=="),x(r,F.ApplianceNames.selector,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg=="),x(r,F.ApplianceNames.eraser,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII="),x(r,F.ApplianceNames.shape,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5zaGFwZS1jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNjQuNiUiIHk9Ii01OS41JSIgd2lkdGg9IjIyOS4zJSIgaGVpZ2h0PSIyNDYuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd0JsdXJPdXRlcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbXBvc2l0ZT4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMTYgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi00IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iV2hpdGVib2FyZC1HdWlkZWxpbmVzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ0LjAwMDAwMCwgLTc1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNoYXBlLWN1cnNvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgNzUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkh+S7vS00NCIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC4wMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMjAsMjEgQzIwLjQ4NTQxMDMsMjEgMjAuODk4MDg1LDIxLjM0Nzk5OTMgMjAuOTg5OTQ3OSwyMS44NjU0ODc3IEwyMSwyMiBMMjEsMjcgQzIxLDI3LjU1MjI4NDcgMjAuNTUyMjg0NywyOCAyMCwyOCBDMTkuNTE0NTg5NywyOCAxOS4xMDE5MTUsMjcuNjUyMDAwNyAxOS4wMTAwNTIxLDI3LjEzNDUxMjMgTDE5LDI3IEwxOSwyMiBDMTksMjEuNDQ3NzE1MyAxOS40NDc3MTUzLDIxIDIwLDIxIFogTTI3LDE5IEMyNy41NTIyODQ3LDE5IDI4LDE5LjQ0NzcxNTMgMjgsMjAgQzI4LDIwLjQ4NTQxMDMgMjcuNjUyMDAwNywyMC44OTgwODUgMjcuMTM0NTEyMywyMC45ODk5NDc5IEwyNywyMSBMMjIsMjEgQzIxLjQ0NzcxNTMsMjEgMjEsMjAuNTUyMjg0NyAyMSwyMCBDMjEsMTkuNTE0NTg5NyAyMS4zNDc5OTkzLDE5LjEwMTkxNSAyMS44NjU0ODc3LDE5LjAxMDA1MjEgTDIyLDE5IEwyNywxOSBaIE0xOCwxOSBDMTguNTUyMjg0NywxOSAxOSwxOS40NDc3MTUzIDE5LDIwIEMxOSwyMC40ODU0MTAzIDE4LjY1MjAwMDcsMjAuODk4MDg1IDE4LjEzNDUxMjMsMjAuOTg5OTQ3OSBMMTgsMjEgTDEzLDIxIEMxMi40NDc3MTUzLDIxIDEyLDIwLjU1MjI4NDcgMTIsMjAgQzEyLDE5LjUxNDU4OTcgMTIuMzQ3OTk5MywxOS4xMDE5MTUgMTIuODY1NDg3NywxOS4wMTAwNTIxIEwxMywxOSBMMTgsMTkgWiBNMjAsMTIgQzIwLjQ4NTQxMDMsMTIgMjAuODk4MDg1LDEyLjM0Nzk5OTMgMjAuOTg5OTQ3OSwxMi44NjU0ODc3IEwyMSwxMyBMMjEsMTggQzIxLDE4LjU1MjI4NDcgMjAuNTUyMjg0NywxOSAyMCwxOSBDMTkuNTE0NTg5NywxOSAxOS4xMDE5MTUsMTguNjUyMDAwNyAxOS4wMTAwNTIxLDE4LjEzNDUxMjMgTDE5LDE4IEwxOSwxMyBDMTksMTIuNDQ3NzE1MyAxOS40NDc3MTUzLDEyIDIwLDEyIFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTguNSIgeT0iMTciIHdpZHRoPSIzIiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNGRkZGRkYiIHg9IjE3IiB5PSIxOC41IiB3aWR0aD0iNiIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMzI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"),x(r,F.ApplianceNames.text,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT50ZXh0LWN1cnNvcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwyNi41IEMxNS43MjM4NTc2LDI2LjUgMTUuNSwyNi4yNzYxNDI0IDE1LjUsMjYgQzE1LjUsMjUuNzU0NTQwMSAxNS42NzY4NzUyLDI1LjU1MDM5MTYgMTUuOTEwMTI0NCwyNS41MDgwNTU3IEwxNiwyNS41IEwxOS41LDI1LjUgTDE5LjUsMTQuNSBMMTYsMTQuNSBDMTUuNzIzODU3NiwxNC41IDE1LjUsMTQuMjc2MTQyNCAxNS41LDE0IEMxNS41LDEzLjc1NDU0MDEgMTUuNjc2ODc1MiwxMy41NTAzOTE2IDE1LjkxMDEyNDQsMTMuNTA4MDU1NyBMMTYsMTMuNSBMMjQsMTMuNSBDMjQuMjc2MTQyNCwxMy41IDI0LjUsMTMuNzIzODU3NiAyNC41LDE0IEMyNC41LDE0LjI0NTQ1OTkgMjQuMzIzMTI0OCwxNC40NDk2MDg0IDI0LjA4OTg3NTYsMTQuNDkxOTQ0MyBMMjQsMTQuNSBMMjAuNSwxNC41IEwyMC41LDI1LjUgTDI0LDI1LjUgQzI0LjI3NjE0MjQsMjUuNSAyNC41LDI1LjcyMzg1NzYgMjQuNSwyNiBDMjQuNSwyNi4yNDU0NTk5IDI0LjMyMzEyNDgsMjYuNDQ5NjA4NCAyNC4wODk4NzU2LDI2LjQ5MTk0NDMgTDI0LDI2LjUgTDE2LDI2LjUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4NC4wJSIgeT0iLTgxLjUlIiB3aWR0aD0iNjY4LjElIiBoZWlnaHQ9IjI5My45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xNiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iLTQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXaGl0ZWJvYXJkLUd1aWRlbGluZXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODguMDAwMDAwLCAtNjcyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0idGV4dC1jdXJzb3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Mi4wMDAwMDAsIDY3Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNDAiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuMDEiIHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSIgZD0iTTE5LDI1IEwxOSwxNSBMMTYsMTUgQzE1LjQ0NzcxNTMsMTUgMTUsMTQuNTUyMjg0NyAxNSwxNCBDMTUsMTMuNTE0NTg5NyAxNS4zNDc5OTkzLDEzLjEwMTkxNSAxNS44NjU0ODc3LDEzLjAxMDA1MjEgTDE2LDEzIEwyNCwxMyBDMjQuNTUyMjg0NywxMyAyNSwxMy40NDc3MTUzIDI1LDE0IEMyNSwxNC40ODU0MTAzIDI0LjY1MjAwMDcsMTQuODk4MDg1IDI0LjEzNDUxMjMsMTQuOTg5OTQ3OSBMMjQsMTUgTDIxLDE1IEwyMSwyNSBMMjQsMjUgQzI0LjU1MjI4NDcsMjUgMjUsMjUuNDQ3NzE1MyAyNSwyNiBDMjUsMjYuNDg1NDEwMyAyNC42NTIwMDA3LDI2Ljg5ODA4NSAyNC4xMzQ1MTIzLDI2Ljk4OTk0NzkgTDI0LDI3IEwxNiwyNyBDMTUuNDQ3NzE1MywyNyAxNSwyNi41NTIyODQ3IDE1LDI2IEMxNSwyNS41MTQ1ODk3IDE1LjM0Nzk5OTMsMjUuMTAxOTE1IDE1Ljg2NTQ4NzcsMjUuMDEwMDUyMSBMMTYsMjUgTDE5LDI1IFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="),x(r,F.ApplianceNames.laserPointer,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjhweCIgaGVpZ2h0PSIyOHB4IiB2aWV3Qm94PSIwIDAgMjggMjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxmaWx0ZXIgeD0iLTEyMC4wJSIgeT0iLTEyMC4wJSIgd2lkdGg9IjM0MC4wJSIgaGVpZ2h0PSIzNDAuMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNCIgaW49IlNvdXJjZUdyYXBoaWMiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjAwMDAwMCwgOS4wMDAwMDApIiBmaWxsPSIjRkYwMTAwIj4KICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2iIiBmaWx0ZXI9InVybCgjZmlsdGVyLTEpIiBjeD0iNSIgY3k9IjUiIHI9IjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8cGF0aCBkPSJNNSw4IEM2LjY1Njg1NDI1LDggOCw2LjY1Njg1NDI1IDgsNSBDOCwzLjM0MzE0NTc1IDYuNjU2ODU0MjUsMiA1LDIgQzMuMzQzMTQ1NzUsMiAyLDMuMzQzMTQ1NzUgMiw1IEMyLDYuNjU2ODU0MjUgMy4zNDMxNDU3NSw4IDUsOCBaIE01LDYuMjg1NzE0MjkgQzQuMjg5OTE5NjEsNi4yODU3MTQyOSAzLjcxNDI4NTcxLDUuNzEwMDgwMzkgMy43MTQyODU3MSw1IEMzLjcxNDI4NTcxLDQuMjg5OTE5NjEgNC4yODk5MTk2MSwzLjcxNDI4NTcxIDUsMy43MTQyODU3MSBDNS43MTAwODAzOSwzLjcxNDI4NTcxIDYuMjg1NzE0MjksNC4yODk5MTk2MSA2LjI4NTcxNDI5LDUgQzYuMjg1NzE0MjksNS43MTAwODAzOSA1LjcxMDA4MDM5LDYuMjg1NzE0MjkgNSw2LjI4NTcxNDI5IFoiIGlkPSLmpK3lnIblvaIiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"),x(r,"pencilEraser1","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAxOCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIxNyIgaGVpZ2h0PSIyNSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K"),x(r,"pencilEraser2","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCAyNiAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIyNSIgaGVpZ2h0PSIzMyIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K"),x(r,"pencilEraser3","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCAzNCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIzMyIgaGVpZ2h0PSI0OSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K"),r),go=function(){function t(e,n,r){var i,o=this;m(this,t),this.manager=e,this.enableCursor=n,this.cursorInstances=new Map,this.sideEffectManager=new j.SideEffectManager,this.store=this.manager.store,this.applianceIcons=po,this.onCursorMove=function(t){var e=o.initCursorInstance(t.uid);if(t.state===et.Leave)e.leave();else{var n=e.updateMember();o.canMoveCursor(n)&&e.move(t.position)}},this.initCursorInstance=function(t){var e=o.cursorInstances.get(t);return e||(e=new fo(o.manager,t,o,Ay.wrapper),o.cursorInstances.set(t,e)),e},this.mouseMoveListener=R.throttle((function(t){"touch"===t.pointerType&&!t.isPrimary||o.updateCursor(o.getType(t),t.clientX,t.clientY)}),48),this.getPoint=function(t,e,n){var r,i=null==(r=null==t?void 0:t.divElement)?void 0:r.getBoundingClientRect();if(i)return null==t?void 0:t.convertToPointInWorld({x:e-i.x,y:n-i.y})},this.getType=function(t){var e,n=t.target,r=o.manager.focusApp;switch(n.parentElement){case o.mainViewElement:return{type:"main"};case null==(e=null==r?void 0:r.view)?void 0:e.divElement:return{type:"app"};default:return{type:"main"}}},this.mouseLeaveListener=function(){o.hideCursor(o.manager.uid)},this.roomMembers=null==(i=this.manager.room)?void 0:i.state.roomMembers;var a=Ay.wrapper;a&&this.setupWrapper(a),this.sideEffectManager.add((function(){return st.on("cursorMove",o.onCursorMove)})),this.sideEffectManager.add((function(){return st.on("playgroundSizeChange",(function(){return o.updateContainerRect()}))})),r&&(this.applianceIcons=P(P({},po),r))}return b(t,[{key:"canMoveCursor",value:function(t){var e=(null==t?void 0:t.memberState.currentApplianceName)===F.ApplianceNames.laserPointer;return this.enableCursor||e}},{key:"setupWrapper",value:function(t){var e=this;this.sideEffectManager.add((function(){return t.addEventListener("pointerenter",e.mouseMoveListener),t.addEventListener("pointermove",e.mouseMoveListener),t.addEventListener("pointerleave",e.mouseLeaveListener),function(){t.removeEventListener("pointerenter",e.mouseMoveListener),t.removeEventListener("pointermove",e.mouseMoveListener),t.removeEventListener("pointerleave",e.mouseLeaveListener)}})),this.wrapperRect=t.getBoundingClientRect()}},{key:"setMainViewDivElement",value:function(t){this.mainViewElement=t}},{key:"updateCursor",value:function(t,e,n){if(this.wrapperRect&&this.manager.canOperate){var r="main"===t.type?this.manager.mainView:this.focusView,i=this.getPoint(r,e,n);i&&this.manager.dispatchInternalEvent(q.CursorMove,{uid:this.manager.uid,position:{x:i.x,y:i.y,type:t.type}})}}},{key:"updateContainerRect",value:function(){var t,e;this.containerRect=null==(t=Ay.container)?void 0:t.getBoundingClientRect(),this.wrapperRect=null==(e=Ay.wrapper)?void 0:e.getBoundingClientRect()}},{key:"deleteCursor",value:function(t){this.store.cleanCursor(t);var e=this.cursorInstances.get(t);e&&e.destroy()}},{key:"hideCursor",value:function(t){var e=this.cursorInstances.get(t);e&&e.hide()}},{key:"destroy",value:function(){this.sideEffectManager.flushAll(),this.cursorInstances.size&&(this.cursorInstances.forEach((function(t){t.destroy()})),this.cursorInstances.clear())}},{key:"boxState",get:function(){return this.store.getBoxState()}},{key:"focusView",get:function(){var t;return null==(t=this.manager.focusApp)?void 0:t.view}}]),t}(),vo=function(){function t(e){var n=this;m(this,t),this.manager=e,st.on("changePageState",(function(){ot.emit("pageStateChange",n.toObject())}))}return b(t,[{key:"toObject",value:function(){return{index:this.index>=this.length?this.length-1:this.index,length:this.length}}},{key:"index",get:function(){var t;return(null==(t=this.manager)?void 0:t.store.getMainViewSceneIndex())||0}},{key:"length",get:function(){var t;return(null==(t=this.manager)?void 0:t.mainViewScenesLength)||0}}]),t}(),mo=function(){function t(e){var n=this;m(this,t),this.ctx=e,this.reactors=new Map,this.disposers=new Map,this.onPhaseChanged=function(){var t=v(regeneratorRuntime.mark((function t(e){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e===F.RoomPhase.Reconnecting&&n.ctx.emitter.emit("startReconnect"),t.t0=e===F.RoomPhase.Connected&&n.phase===F.RoomPhase.Reconnecting,!t.t0){t.next=10;break}if(null==(r=n.room)||!r.isWritable){t.next=7;break}null==(i=n.room)||i.dispatchMagixEvent(Z,{}),t.next=10;break;case 7:return t.next=9,Nt(500);case 9:n.onReconnected();case 10:n.phase=e;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.onReconnected=R.debounce((function(){n._onReconnected()}),1e3),this._onReconnected=function(){te("onReconnected refresh reactors"),n.releaseDisposers(),n.reactors.forEach((function(t,e){R.isFunction(t)&&n.disposers.set(e,t())})),n.ctx.emitter.emit("onReconnected")}}return b(t,[{key:"setRoom",value:function(t){var e=this;this.room=t,this.phase=null==t?void 0:t.phase,t&&(t.callbacks.off("onPhaseChanged",this.onPhaseChanged),t.callbacks.on("onPhaseChanged",this.onPhaseChanged),t.addMagixEventListener(Z,(function(n){n.authorId===t.observerId&&e.onReconnected()}),{fireSelfEventAfterCommit:!0}))}},{key:"setContext",value:function(t){this.ctx=t}},{key:"releaseDisposers",value:function(){this.disposers.forEach((function(t){R.isFunction(t)&&t()})),this.disposers.clear()}},{key:"refresh",value:function(){this._onReconnected()}},{key:"add",value:function(t,e){var n=this.disposers.get(t);n&&R.isFunction(n)&&n(),R.isFunction(e)&&(this.reactors.set(t,e),this.disposers.set(t,e()))}},{key:"remove",value:function(t){this.reactors.has(t)&&this.reactors.delete(t);var e=this.disposers.get(t);e&&(R.isFunction(e)&&e(),this.disposers.delete(t))}},{key:"hasReactor",value:function(t){return this.reactors.has(t)}},{key:"destroy",value:function(){var t,e;null==(t=this.room)||t.callbacks.off("onPhaseChanged",this.onPhaseChanged),null==(e=this.room)||e.removeMagixEventListener(Z,this.onReconnected),this.releaseDisposers()}}]),t}(),yo=function(t,e){if(F.isPlayer(t))wo(t);else{if(t=t,Object.getOwnPropertyDescriptor(t,"disableCameraTransform"))return;Object.defineProperty(t,"disableCameraTransform",{get:function(){return e.mainView.disableCameraTransform},set:function(t){e.mainView.disableCameraTransform=t}}),Object.defineProperty(t,"canUndoSteps",{get:function(){return e.canUndoSteps}}),Object.defineProperty(t,"canRedoSteps",{get:function(){return e.canRedoSteps}}),t.moveCamera=function(t){return e.moveCamera(t)},t.moveCameraToContain=function(){return e.moveCameraToContain.apply(e,arguments)},t.convertToPointInWorld=function(){var t;return(t=e.mainView).convertToPointInWorld.apply(t,arguments)},t.setCameraBound=function(){var t;return(t=e.mainView).setCameraBound.apply(t,arguments)},t.scenePreview=function(){var t;return(t=e.mainView).scenePreview.apply(t,arguments)},t.fillSceneSnapshot=function(){var t;return(t=e.mainView).fillSceneSnapshot.apply(t,arguments)},t.generateScreenshot=function(){var t;return(t=e.mainView).generateScreenshot.apply(t,arguments)},t.setMemberState=function(){var t;return(t=e.mainView).setMemberState.apply(t,arguments)},t.redo=function(){return e.redo()},t.undo=function(){return e.undo()},t.cleanCurrentScene=function(){return e.cleanCurrentScene()},t.delete=function(){return e.delete()},t.copy=function(){return e.copy()},t.paste=function(){return e.paste()},t.duplicate=function(){return e.duplicate()},t.insertImage=function(){return e.insertImage.apply(e,arguments)},t.completeImageUpload=function(){return e.completeImageUpload.apply(e,arguments)},t.insertText=function(){return e.insertText.apply(e,arguments)},t.lockImage=function(){return e.lockImage.apply(e,arguments)},t.lockImages=function(){return e.lockImages.apply(e,arguments)},bo(t,e)}},bo=function(t,e){var n=t.removeScenes;t.removeScenes=function(r,i){var o;r===rt&&(null==(o=e.appManager)||o.updateRootDirRemoving(!0));var a=n.call(t,r);return st.emit("removeScenes",{scenePath:r,index:i}),a}},wo=function(t){var e=t.seekToProgressTime;function n(){return(n=v(regeneratorRuntime.mark((function n(r){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,st.emit("seekStart");case 2:return n.next=4,e.call(t,r);case 4:return i=n.sent,n.abrupt("return",(st.emit("seek",r),i));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}t.seekToProgressTime=function(t){return n.apply(this,arguments)}},xo=Object.defineProperty,_o=Object.defineProperties,To=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,Mo=Object.prototype.propertyIsEnumerable,Co=function(t,e,n){return e in t?xo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Io=function(t,e){for(var n in e||(e={}))So.call(e,n)&&Co(t,n,e[n]);if(Eo){var r,i=_(Eo(e));try{for(i.s();!(r=i.n()).done;){n=r.value;Mo.call(e,n)&&Co(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t},No=function(t,e){return _o(t,To(e))},Bo=function(t,e,n,r){if("length"!==n&&"prototype"!==n&&"arguments"!==n&&"caller"!==n){var i=Object.getOwnPropertyDescriptor(t,n),o=Object.getOwnPropertyDescriptor(e,n);!ko(i,o)&&r||Object.defineProperty(t,n,o)}},ko=function(t,e){return void 0===t||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},Po=function(t,e){var n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},Do=function(t,e){return"/* Wrapped ".concat(t,"*/\n").concat(e)},Lo=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Oo=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Ro=function(t,e,n){var r=""===n?"":"with ".concat(n.trim(),"() "),i=Do.bind(null,r,e.toString());Object.defineProperty(i,"name",Oo),Object.defineProperty(t,"toString",No(Io({},Lo),{value:i}))};function Fo(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.ignoreNonConfigurable,o=void 0!==i&&i,a=t.name,s=_(Reflect.ownKeys(e));try{for(s.s();!(n=s.n()).done;){var u=n.value;Bo(t,e,u,o)}}catch(t){s.e(t)}finally{s.f()}return Po(t,e),Ro(t,e,a),t}var Uo,jo="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",zo=jo.length,Ho=Array(20),Qo=function(){for(var t=0;t<20;t++)Ho[t]=jo.charAt(Math.random()*zo);return Ho.join("")},Go=function(){function t(){m(this,t),this.disposers=new Map}return b(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qo();return this.flush(e),this.disposers.set(e,t()),e}},{key:"addDisposer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qo();return this.flush(e),this.disposers.set(e,t),e}},{key:"addEventListener",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qo();return this.add((function(){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}),i),i}},{key:"setTimeout",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qo();return this.add((function(){var i=window.setTimeout((function(){n.remove(r),t()}),e);return function(){return window.clearTimeout(i)}}),r)}},{key:"setInterval",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qo();return this.add((function(){var n=window.setInterval(t,e);return function(){return window.clearInterval(n)}}),n)}},{key:"remove",value:function(t){var e=this.disposers.get(t);return this.disposers.delete(t),e}},{key:"flush",value:function(t){var e=this.remove(t);if(e)try{e()}catch(t){console.error(t)}}},{key:"flushAll",value:function(){this.disposers.forEach((function(t){try{t()}catch(t){console.error(t)}})),this.disposers.clear()}}]),t}(),Vo=[],Wo="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(Uo||(Uo={}));var Yo,Xo=function(t){return Object.freeze(t)},qo=function(t,e){this.inlineSize=t,this.blockSize=e,Xo(this)},Ko=function(){function t(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Xo(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Zo=function(t){return t instanceof SVGElement&&"getBBox"in t},Jo=function(t){if(Zo(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||t.getClientRects().length)},$o=function(t){var e,n;if(t instanceof Element)return!0;var r=null===(n=null===(e=t)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&t instanceof r.Element)},ta="undefined"!=typeof window?window:{},ea=new WeakMap,na=/auto|scroll/,ra=/^tb|vertical/,ia=/msie|trident/i.test(ta.navigator&&ta.navigator.userAgent),oa=function(t){return parseFloat(t||"0")},aa=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),new qo((n?e:t)||0,(n?t:e)||0)},sa=Xo({devicePixelContentBoxSize:aa(),borderBoxSize:aa(),contentBoxSize:aa(),contentRect:new Ko(0,0,0,0)}),ua=function(t,e){if(void 0===e&&(e=!1),ea.has(t)&&!e)return ea.get(t);if(Jo(t))return ea.set(t,sa),sa;var n=getComputedStyle(t),r=Zo(t)&&t.ownerSVGElement&&t.getBBox(),i=!ia&&"border-box"===n.boxSizing,o=ra.test(n.writingMode||""),a=!r&&na.test(n.overflowY||""),s=!r&&na.test(n.overflowX||""),u=r?0:oa(n.paddingTop),l=r?0:oa(n.paddingRight),c=r?0:oa(n.paddingBottom),h=r?0:oa(n.paddingLeft),d=r?0:oa(n.borderTopWidth),A=r?0:oa(n.borderRightWidth),f=r?0:oa(n.borderBottomWidth),p=h+l,g=u+c,v=(r?0:oa(n.borderLeftWidth))+A,m=d+f,y=s?t.offsetHeight-m-t.clientHeight:0,b=a?t.offsetWidth-v-t.clientWidth:0,w=i?p+v:0,x=i?g+m:0,_=r?r.width:oa(n.width)-w-b,T=r?r.height:oa(n.height)-x-y,E=_+p+b+v,S=T+g+y+m,M=Xo({devicePixelContentBoxSize:aa(Math.round(_*devicePixelRatio),Math.round(T*devicePixelRatio),o),borderBoxSize:aa(E,S,o),contentBoxSize:aa(_,T,o),contentRect:new Ko(h,u,_,T)});return ea.set(t,M),M},la=function(t,e,n){var r=ua(t,n),i=r.borderBoxSize,o=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(e){case Uo.DEVICE_PIXEL_CONTENT_BOX:return a;case Uo.BORDER_BOX:return i;default:return o}},ca=function(t){var e=ua(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=Xo([e.borderBoxSize]),this.contentBoxSize=Xo([e.contentBoxSize]),this.devicePixelContentBoxSize=Xo([e.devicePixelContentBoxSize])},ha=function(t){if(Jo(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},da=function(){var t=1/0,e=[];Vo.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(e){var n=new ca(e.target),i=ha(e.target);r.push(n),e.lastReportedSize=la(e.target,e.observedBox),i<t&&(t=i)})),e.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=e;n<r.length;n++){(0,r[n])()}return t},Aa=function(t){Vo.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(ha(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},fa=function(){var t=0;for(Aa(t);Vo.some((function(t){return t.activeTargets.length>0}));)t=da(),Aa(t);return Vo.some((function(t){return t.skippedTargets.length>0}))&&function(){var t;"function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:Wo}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=Wo),window.dispatchEvent(t)}(),t>0},pa=[],ga=function(t){if(!Yo){var e=0,n=document.createTextNode("");new MutationObserver((function(){return pa.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),Yo=function(){n.textContent=""+(e?e--:e++)}}pa.push(t),Yo()},va=0,ma={attributes:!0,characterData:!0,childList:!0,subtree:!0},ya=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],ba=function(t){return void 0===t&&(t=0),Date.now()+t},wa=!1,xa=function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!wa){wa=!0;var n=ba(t);!function(t){ga((function(){requestAnimationFrame(t)}))}((function(){var r=!1;try{r=fa()}finally{if(wa=!1,t=n-ba(),!va)return;r?e.run(1e3):t>0?e.run(t):e.start()}}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,ma)};document.body?e():ta.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ya.forEach((function(e){return ta.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),ya.forEach((function(e){return ta.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}(),_a=new xa,Ta=function(t){!va&&t>0&&_a.start(),!(va+=t)&&_a.stop()},Ea=function(){function t(t,e){this.target=t,this.observedBox=e||Uo.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t=la(this.target,this.observedBox,!0);return function(t){return!Zo(t)&&!function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)&&"inline"===getComputedStyle(t).display}(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},t}(),Sa=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},Ma=new WeakMap,Ca=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Ia=function(){function t(){}return t.connect=function(t,e){var n=new Sa(t,e);Ma.set(t,n)},t.observe=function(t,e,n){var r=Ma.get(t),i=0===r.observationTargets.length;Ca(r.observationTargets,e)<0&&(i&&Vo.push(r),r.observationTargets.push(new Ea(e,n&&n.box)),Ta(1),_a.schedule())},t.unobserve=function(t,e){var n=Ma.get(t),r=Ca(n.observationTargets,e),i=1===n.observationTargets.length;r>=0&&(i&&Vo.splice(Vo.indexOf(n),1),n.observationTargets.splice(r,1),Ta(-1))},t.disconnect=function(t){var e=this,n=Ma.get(t);n.observationTargets.slice().forEach((function(n){return e.unobserve(t,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},t}(),Na=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Ia.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!$o(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Ia.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!$o(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Ia.unobserve(this,t)},t.prototype.disconnect=function(){Ia.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();var Ba="undefined"!=typeof window,ka=Ba&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),Pa=Ba&&"IntersectionObserver"in window,Da=Ba&&"classList"in document.createElement("p"),La=Ba&&window.devicePixelRatio>1,Oa={elements_selector:".lazy",container:ka||Ba?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},Ra=function(t){return Object.assign({},Oa,t)},Fa=function(t,e){var n,r="LazyLoad::Initialized",i=new t(e);try{n=new CustomEvent(r,{detail:{instance:i}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,{instance:i})}window.dispatchEvent(n)},Ua="src",ja="srcset",za="sizes",Ha="poster",Qa="llOriginalAttrs",Ga="data",Va="loading",Wa="loaded",Ya="applied",Xa="error",qa="native",Ka="data-",Za="ll-status",Ja=function(t,e){return t.getAttribute(Ka+e)},$a=function(t){return Ja(t,Za)},ts=function(t,e){return function(t,e,n){var r=Ka+e;null!==n?t.setAttribute(r,n):t.removeAttribute(r)}(t,Za,e)},es=function(t){return ts(t,null)},ns=function(t){return null===$a(t)},rs=function(t){return $a(t)===qa},is=[Va,Wa,Ya,Xa],os=function(t,e,n,r){if(t){if(void 0!==r)return void t(e,n,r);if(void 0!==n)return void t(e,n);t(e)}},as=function(t,e){Da?t.classList.add(e):t.className+=(t.className?" ":"")+e},ss=function(t,e){Da?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},us=function(t){return t.llTempImage},ls=function(t,e){if(e){var n=e._observer;!n||n.unobserve(t)}},cs=function(t,e){!t||(t.loadingCount+=e)},hs=function(t,e){!t||(t.toLoadCount=e)},ds=function(t){for(var e,n=[],r=0;e=t.children[r];r+=1)"SOURCE"===e.tagName&&n.push(e);return n},As=function(t,e){var n=t.parentNode;n&&"PICTURE"===n.tagName&&ds(n).forEach(e)},fs=function(t,e){ds(t).forEach(e)},ps=[Ua],gs=[Ua,Ha],vs=[Ua,ja,za],ms=[Ga],ys=function(t){return!!t[Qa]},bs=function(t){return t[Qa]},ws=function(t){return delete t[Qa]},xs=function(t,e){if(!ys(t)){var n={};e.forEach((function(e){n[e]=t.getAttribute(e)})),t[Qa]=n}},_s=function(t,e){if(ys(t)){var n=bs(t);e.forEach((function(e){!function(t,e,n){n?t.setAttribute(e,n):t.removeAttribute(e)}(t,e,n[e])}))}},Ts=function(t,e,n){as(t,e.class_loading),ts(t,Va),n&&(cs(n,1),os(e.callback_loading,t,n))},Es=function(t,e,n){!n||t.setAttribute(e,n)},Ss=function(t,e){Es(t,za,Ja(t,e.data_sizes)),Es(t,ja,Ja(t,e.data_srcset)),Es(t,Ua,Ja(t,e.data_src))},Ms=function(t,e,n){var r=Ja(t,e.data_bg_multi),i=Ja(t,e.data_bg_multi_hidpi),o=La&&i?i:r;!o||(t.style.backgroundImage=o,function(t,e,n){as(t,e.class_applied),ts(t,Ya),n&&(e.unobserve_completed&&ls(t,e),os(e.callback_applied,t,n))}(t,e,n))},Cs={IMG:function(t,e){As(t,(function(t){xs(t,vs),Ss(t,e)})),xs(t,vs),Ss(t,e)},IFRAME:function(t,e){xs(t,ps),Es(t,Ua,Ja(t,e.data_src))},VIDEO:function(t,e){fs(t,(function(t){xs(t,ps),Es(t,Ua,Ja(t,e.data_src))})),xs(t,gs),Es(t,Ha,Ja(t,e.data_poster)),Es(t,Ua,Ja(t,e.data_src)),t.load()},OBJECT:function(t,e){xs(t,ms),Es(t,Ga,Ja(t,e.data_src))}},Is=["IMG","IFRAME","VIDEO","OBJECT"],Ns=function(t,e){e&&!function(t){return t.loadingCount>0}(e)&&!function(t){return t.toLoadCount>0}(e)&&os(t.callback_finish,e)},Bs=function(t,e,n){t.addEventListener(e,n),t.llEvLisnrs[e]=n},ks=function(t,e,n){t.removeEventListener(e,n)},Ps=function(t){return!!t.llEvLisnrs},Ds=function(t){if(Ps(t)){var e=t.llEvLisnrs;for(var n in e){var r=e[n];ks(t,n,r)}delete t.llEvLisnrs}},Ls=function(t,e,n){(function(t){delete t.llTempImage})(t),cs(n,-1),function(t){!t||(t.toLoadCount-=1)}(n),ss(t,e.class_loading),e.unobserve_completed&&ls(t,n)},Os=function(t,e,n){var r=us(t)||t;Ps(r)||function(t,e,n){Ps(t)||(t.llEvLisnrs={});var r="VIDEO"===t.tagName?"loadeddata":"load";Bs(t,r,e),Bs(t,"error",n)}(r,(function(i){(function(t,e,n,r){var i=rs(e);Ls(e,n,r),as(e,n.class_loaded),ts(e,Wa),os(n.callback_loaded,e,r),i||Ns(n,r)})(0,t,e,n),Ds(r)}),(function(i){(function(t,e,n,r){var i=rs(e);Ls(e,n,r),as(e,n.class_error),ts(e,Xa),os(n.callback_error,e,r),i||Ns(n,r)})(0,t,e,n),Ds(r)}))},Rs=function(t,e,n){(function(t){t.llTempImage=document.createElement("IMG")})(t),Os(t,e,n),function(t){ys(t)||(t[Qa]={backgroundImage:t.style.backgroundImage})}(t),function(t,e,n){var r=Ja(t,e.data_bg),i=Ja(t,e.data_bg_hidpi),o=La&&i?i:r;!o||(t.style.backgroundImage='url("'.concat(o,'")'),us(t).setAttribute(Ua,o),Ts(t,e,n))}(t,e,n),Ms(t,e,n)},Fs=function(t,e,n){Os(t,e,n),function(t,e,n){var r=Cs[t.tagName];!r||(r(t,e),Ts(t,e,n))}(t,e,n)},Us=function(t,e,n){!function(t){return Is.indexOf(t.tagName)>-1}(t)?Rs(t,e,n):Fs(t,e,n)},js=function(t,e,n){t.setAttribute("loading","lazy"),Os(t,e,n),function(t,e){var n=Cs[t.tagName];!n||n(t,e)}(t,e),ts(t,qa)},zs=function(t){t.removeAttribute(Ua),t.removeAttribute(ja),t.removeAttribute(za)},Hs=function(t){As(t,(function(t){_s(t,vs)})),_s(t,vs)},Qs={IMG:Hs,IFRAME:function(t){_s(t,ps)},VIDEO:function(t){fs(t,(function(t){_s(t,ps)})),_s(t,gs),t.load()},OBJECT:function(t){_s(t,ms)}},Gs=function(t){var e=Qs[t.tagName];e?e(t):function(t){if(ys(t)){var e=bs(t);t.style.backgroundImage=e.backgroundImage}}(t)},Vs=function(t,e){Gs(t),function(t,e){ns(t)||rs(t)||(ss(t,e.class_entered),ss(t,e.class_exited),ss(t,e.class_applied),ss(t,e.class_loading),ss(t,e.class_loaded),ss(t,e.class_error))}(t,e),es(t),ws(t)},Ws=function(t,e,n,r){!n.cancel_on_exit||!function(t){return $a(t)===Va}(t)||"IMG"===t.tagName&&(Ds(t),function(t){As(t,(function(t){zs(t)})),zs(t)}(t),Hs(t),ss(t,n.class_loading),cs(r,-1),es(t),os(n.callback_cancel,t,e,r))},Ys=function(t,e,n,r){var i=function(t){return is.indexOf($a(t))>=0}(t);ts(t,"entered"),as(t,n.class_entered),ss(t,n.class_exited),function(t,e,n){e.unobserve_entered&&ls(t,n)}(t,n,r),os(n.callback_enter,t,e,r),!i&&Us(t,n,r)},Xs=["IMG","IFRAME","VIDEO"],qs=function(t){return t.use_native&&"loading"in HTMLImageElement.prototype},Ks=function(t,e,n){t.forEach((function(t){return function(t){return t.isIntersecting||t.intersectionRatio>0}(t)?Ys(t.target,t,e,n):function(t,e,n,r){ns(t)||(as(t,n.class_exited),Ws(t,e,n,r),os(n.callback_exit,t,e,r))}(t.target,t,e,n)}))},Zs=function(t,e){!Pa||qs(t)||(e._observer=new IntersectionObserver((function(n){Ks(n,t,e)}),function(t){return{root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}}(t)))},Js=function(t){return Array.prototype.slice.call(t)},$s=function(t){return t.container.querySelectorAll(t.elements_selector)},tu=function(t){return function(t){return $a(t)===Xa}(t)},eu=function(t,e){return function(t){return Js(t).filter(ns)}(t||$s(e))},nu=function(t,e){(function(t){return Js(t).filter(tu)})($s(t)).forEach((function(e){ss(e,t.class_error),es(e)})),e.update()},ru=function(t,e){var n=Ra(t);this._settings=n,this.loadingCount=0,Zs(n,this),function(t,e){!Ba||window.addEventListener("online",(function(){nu(t,e)}))}(n,this),this.update(e)};ru.prototype={update:function(t){var e=this._settings,n=eu(t,e);hs(this,n.length),!ka&&Pa?qs(e)?function(t,e,n){t.forEach((function(t){-1!==Xs.indexOf(t.tagName)&&js(t,e,n)})),hs(n,0)}(n,e,this):function(t,e){(function(t){t.disconnect()})(t),function(t,e){e.forEach((function(e){t.observe(e)}))}(t,e)}(this._observer,n):this.loadAll(n)},destroy:function(){this._observer&&this._observer.disconnect(),$s(this._settings).forEach((function(t){ws(t)})),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var e=this,n=this._settings;eu(t,n).forEach((function(t){ls(t,e),Us(t,n,e)}))},restoreAll:function(){var t=this._settings;$s(t).forEach((function(e){Vs(e,t)}))}},ru.load=function(t,e){var n=Ra(e);Us(t,n)},ru.resetStatus=function(t){es(t)},Ba&&function(t,e){if(e)if(e.length)for(var n,r=0;n=e[r];r+=1)Fa(t,n);else Fa(t,e)}(ru,window.lazyLoadOptions);var iu=function(){function t(e){var n=e.readonly,r=e.box,i=e.pages,o=e.onNewPageIndex,a=e.onPlay;if(m(this,t),this.pageIndex=0,this.namespace="netless-app-docs-viewer",this.isShowPreview=!1,this.isSmallBox=!1,this.sideEffect=new Go,i.length<=0)throw new Error("[DocsViewer] Empty pages.");this.readonly=n,this.box=r,this.pages=i,this.onNewPageIndex=o,this.onPlay=a,this.render()}return b(t,[{key:"mount",value:function(){var t=this;this.box.mountContent(this.$content),this.box.mountFooter(this.$footer),this.sideEffect.add((function(){var e=new ru({container:t.$preview,elements_selector:".".concat(t.wrapClassName("preview-page>img"))});return function(){return e.destroy()}}),"preview-lazyload")}},{key:"unmount",value:function(){this.$content.remove(),this.$footer.remove()}},{key:"setReadonly",value:function(t){this.readonly!==t&&(this.readonly=t,this.$content.classList.toggle(this.wrapClassName("readonly"),t),this.$footer.classList.toggle(this.wrapClassName("readonly"),t),this.$pageNumberInput.disabled=t)}},{key:"destroy",value:function(){this.sideEffect.flushAll(),this.unmount()}},{key:"setPageIndex",value:function(t){Number.isNaN(t)||(this.pageIndex=t,this.$pageNumberInput.value=String(t+1))}},{key:"setSmallBox",value:function(t){this.isSmallBox!==t&&(this.isSmallBox=t,this.$footer.classList.toggle(this.wrapClassName("float-footer"),t))}},{key:"render",value:function(){return this.renderContent(),this.renderFooter(),this.$content}},{key:"renderContent",value:function(){if(!this.$content){var t=document.createElement("div");t.className=this.wrapClassName("content"),this.$content=t,this.readonly&&t.classList.add(this.wrapClassName("readonly")),t.appendChild(this.renderPreviewMask()),t.appendChild(this.renderPreview())}return this.$content}},{key:"renderPreview",value:function(){var t=this;if(!this.$preview){var e=document.createElement("div");e.className=this.wrapClassName("preview")+" tele-fancy-scrollbar",this.$preview=e;var n=this.wrapClassName("preview-page"),r=this.wrapClassName("preview-page-name");this.pages.forEach((function(i,o){var a,s=null!=(a=i.thumbnail)?a:i.src.startsWith("ppt")?void 0:i.src;if(s){var u=String(o),l=document.createElement("a");l.className=n+" "+t.wrapClassName("preview-page-".concat(o)),l.setAttribute("href","#"),l.dataset.pageIndex=u;var c=document.createElement("span");c.className=r,c.textContent=String(o+1),c.dataset.pageIndex=u;var h=document.createElement("img");h.width=i.width,h.height=i.height,h.dataset.src=s,h.dataset.pageIndex=u,l.appendChild(h),l.appendChild(c),e.appendChild(l)}})),this.sideEffect.addEventListener(e,"click",(function(e){var n;if(!t.readonly){var r=null==(n=e.target.dataset)?void 0:n.pageIndex;r&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.onNewPageIndex(Number(r)),t.togglePreview(!1))}}))}return this.$preview}},{key:"renderPreviewMask",value:function(){var t=this;return this.$previewMask||(this.$previewMask=document.createElement("div"),this.$previewMask.className=this.wrapClassName("preview-mask"),this.sideEffect.addEventListener(this.$previewMask,"click",(function(e){t.readonly||e.target===t.$previewMask&&t.togglePreview(!1)}))),this.$previewMask}},{key:"renderFooter",value:function(){var t=this;if(!this.$footer){var e=document.createElement("div");if(e.className=this.wrapClassName("footer"),this.$footer=e,this.readonly&&e.classList.add(this.wrapClassName("readonly")),this.isSmallBox&&e.classList.add(this.wrapClassName("float-footer")),this.pages.some((function(t){return t.thumbnail||!t.src.startsWith("ppt")}))){var n=this.renderFooterBtn("btn-sidebar",function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-sidebar")),n.setAttribute("viewBox","0 0 64 64");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z"),n.appendChild(r),n}(this.namespace));this.sideEffect.addEventListener(n,"click",(function(){t.readonly||t.togglePreview()})),this.$footer.appendChild(n)}var r=document.createElement("div");r.className=this.wrapClassName("page-jumps");var i=this.renderFooterBtn("btn-page-back",function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-arrow-left")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z"),n.appendChild(r),n}(this.namespace));if(this.sideEffect.addEventListener(i,"click",(function(){t.readonly||t.onNewPageIndex(t.pageIndex-1)})),r.appendChild(i),this.onPlay){var o=this.renderFooterBtn("btn-page-play",function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-play")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z"),n.appendChild(r),n}(this.namespace),function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-pause")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z"),n.appendChild(r),n}(this.namespace));this.sideEffect.addEventListener(o,"click",(function(){t.readonly||(o.classList.toggle(t.wrapClassName("footer-btn-playing"),!0),t.onPlay&&t.onPlay(),t.sideEffect.setTimeout((function(){o.classList.toggle(t.wrapClassName("footer-btn-playing"),!1)}),500,"returnPlay"))})),r.appendChild(o)}var a=this.renderFooterBtn("btn-page-next",function(t){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.setAttribute("class","".concat(t,"-footer-icon-arrow-right")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(e,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z"),n.appendChild(r),n}(this.namespace));this.sideEffect.addEventListener(a,"click",(function(){t.readonly||t.onNewPageIndex(t.pageIndex+1)})),r.appendChild(a);var s=document.createElement("div");s.className=this.wrapClassName("page-number");var u=document.createElement("input");u.className=this.wrapClassName("page-number-input"),u.value=String(this.pageIndex+1),this.readonly&&(u.disabled=!0),this.$pageNumberInput=u,this.sideEffect.addEventListener(u,"focus",(function(){u.select()})),this.sideEffect.addEventListener(u,"change",(function(){t.readonly||u.value&&t.onNewPageIndex(Number(u.value)-1)}));var l=document.createElement("span");l.textContent=" / "+this.pages.length,s.appendChild(u),s.appendChild(l),this.$footer.appendChild(r),this.$footer.appendChild(s)}return this.$footer}},{key:"renderFooterBtn",value:function(t,e,n){var r=document.createElement("button");return r.className=this.wrapClassName("footer-btn")+" "+this.wrapClassName(t),r.appendChild(e),n&&r.appendChild(n),r}},{key:"togglePreview",value:function(t){if(this.isShowPreview=null!=t?t:!this.isShowPreview,this.$content.classList.toggle(this.wrapClassName("preview-active"),this.isShowPreview),this.isShowPreview){var e=this.$preview.querySelector("."+this.wrapClassName("preview-page-".concat(this.pageIndex)));e&&this.$preview.scrollTo({top:e.offsetTop-16})}}},{key:"wrapClassName",value:function(t){return"".concat(this.namespace,"-").concat(t)}}]),t}();function ou(t,e,n){return Math.min(Math.max(t,e),n)}function au(t){return t.touches?t.touches[0]:t}function su(t){t.stopPropagation(),t.cancelable&&t.preventDefault()}var uu=function(){function t(e){var n,r,i,o=this;m(this,t),this.velocity=0,this.paused=!0,this._animationFrameID=null,this._loopTimestamp=0,this.looper=function(t){if(!o.paused){var e=Math.floor((t-o._loopTimestamp)/1e3*60)+1;for(o._loopTimestamp=t;e-- >0;)o.stepper();o.onStep(o.current,o),!o.paused&&o.current!==o.target&&window.requestAnimationFrame(o.looper)}},this.current=null!=(n=e.start)?n:0,this.target=this.current,this.stiffness=null!=(r=e.stiffness)?r:170,this.damping=null!=(i=e.damping)?i:26,this.onStep=e.onStep}return b(t,[{key:"stepTo",value:function(t,e){this.paused&&null!=e&&(this.current=e),this.paused=!1,this.target=t,this.onStep(this.current,this),this._loopTimestamp=Date.now(),window.requestAnimationFrame(this.looper)}},{key:"pause",value:function(){this.paused=!0}},{key:"destroy",value:function(){this.pause()}},{key:"stepper",value:function(){var t=-this.stiffness*(this.current-this.target),e=-this.damping*this.velocity,n=this.velocity+(t+e)/60,r=this.current+n/60;Math.abs(n-0)<.01&&Math.abs(r-this.target)<.01?(this.current=this.target,this.velocity=0):(this.current=r,this.velocity=n)}}]),t}(),lu=function(){function t(e,n,r,i){m(this,t),this.scale=1,this.lastVisit=Date.now(),this.pageOffsetY=0,this.pageOffsetX=0,this.visible=!0,this.index=e,this.page=n,this.scale=r,this.pageOffsetX=(i-n.width)/2;var o=document.createElement("div");o.className="page-renderer-page",o.dataset.index="".concat(e),o.style.width="".concat(n.width*r,"px"),o.style.height="".concat(n.height*r,"px"),n.thumbnail&&(o.style.backgroundImage='url("'.concat(n.thumbnail,'")'));var a=document.createElement("img");a.className="page-renderer-page-img",a.width=n.width,a.height=n.height,a.src=n.src,o.appendChild(a),this.$page=o}return b(t,[{key:"translateY",value:function(t){Math.abs(t-this.pageOffsetY)>=.001&&(this.pageOffsetY=t,this.$page.style.transform="translate(".concat(this.pageOffsetX*this.scale,"px, ").concat(this.pageOffsetY*this.scale,"px)"))}},{key:"setScale",value:function(t){Math.abs(t-this.scale)>=.001&&(this.scale=t,this.$page.style.width="".concat(this.page.width*this.scale,"px"),this.$page.style.height="".concat(this.page.height*this.scale,"px"),this.$page.style.transform="translate(".concat(this.pageOffsetX*this.scale,"px, ").concat(this.pageOffsetY*this.scale,"px)"))}},{key:"setVisible",value:function(t){t!==this.visible&&(this.visible=t,this.$page.style.opacity=t?"1":"0")}}]),t}(),cu=window.requestIdleCallback||function(t){return window.setTimeout(t,5e3)},hu=window.cancelIdleCallback||window.clearTimeout,du=function(){function t(e,n,r){var i=this;m(this,t),this.pages=e,this.pagesIntrinsicWidth=n,this.scale=r,this.els=new Map,this.maxElCount=200,this.gcTimer=null,this.gc=function(){if(i.gcTimer=null,i.els.size>i.maxElCount)for(var t=a(i.els.values()).sort((function(t,e){return e.lastVisit-t.lastVisit})),e=Math.floor(i.maxElCount/4);e<t.length;e++)i.els.delete(t[e].index)}}return b(t,[{key:"getEl",value:function(t){var e=this.els.get(t);return e||(e=new lu(t,this.pages[t],this.scale,this.pagesIntrinsicWidth),this.els.set(t,e)),e.lastVisit=Date.now(),this.els.size>this.maxElCount&&null===this.gcTimer&&(this.gcTimer=cu(this.gc)),e}},{key:"setScale",value:function(t){t!==this.scale&&(this.scale=t,this.els.forEach((function(e){return e.setScale(t)})))}},{key:"destroy",value:function(){this.els.clear(),null!==this.gcTimer&&(hu(this.gcTimer),this.gcTimer=null)}}]),t}(),Au=function(){function t(e){var n=this;m(this,t),this._hwaTimeout=NaN,this._turnOffHWA=function(){window.clearTimeout(n._hwaTimeout),n._hwaTimeout=NaN,n.$pages.classList.toggle("is-hwa",!1)},this.pagesScrollTop=e.pagesScrollTop||0,this.containerWidth=e.containerWidth||1,this.containerHeight=e.containerHeight||1,this.pages=e.pages.map((function(t){if(t.thumbnail)return t;try{var e=new URL(t.src);return e.searchParams.set("x-oss-process","image/resize,l_50"),No(Io({},t),{thumbnail:e.toString()})}catch(e){return console.error(e),t}}));var r=Array(this.pages.length),i=1/0,o=0;this.pagesIntrinsicHeight=this.pages.reduce((function(t,e,n){return r[n]=t,e.width>o&&(o=e.width),e.height<=i&&(i=e.height),t+e.height}),0),this.pagesIntrinsicWidth=o,this.pagesMinHeight=i,this.pagesIntrinsicYs=r,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.onPageIndexChanged=e.onPageIndexChanged,this.pageScrollIndex=0,0!==this.pagesScrollTop&&(this.pageScrollIndex=this.findScrollPageIndex(),this.onPageIndexChanged&&this.pageScrollIndex>0&&this.onPageIndexChanged(this.pageScrollIndex)),this.pageElManager=new du(this.pages,o,this.scale),this.$pages=this.renderPages()}return b(t,[{key:"setContainerSize",value:function(t,e){t>0&&e>0&&(t!==this.containerWidth||e!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=e,this.$pages.style.width="".concat(this.containerWidth,"px"),this.$pages.style.height="".concat(this.containerHeight,"px"),this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.pageElManager.setScale(this.scale),this.$pages.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}},{key:"renderPages",value:function(){var t=document.createElement("div");return t.className="page-renderer-pages-container",t.style.width="".concat(this.containerWidth,"px"),t.style.height="".concat(this.containerHeight,"px"),t}},{key:"pagesScrollTo",value:function(t,e){if(t=ou(t,0,this.pagesIntrinsicHeight-this.containerHeight/this.scale),e||Math.abs(t-this.pagesScrollTop)>=.001){this._turnOnHWA(),this.pagesScrollTop=t;for(var n=this.findScrollPageIndex(),r=Math.max(n-this.threshold,0),i=Math.min(n+this.threshold,this.pages.length-1),o=0;o<this.$pages.children.length;o++){var a=this.$pages.children[o],s=Number(a.dataset.index);s>=r&&s<=i||(a.remove(),o--)}for(var u=r;u<=i;u++){var l=this.pageElManager.getEl(u);l.$page.parentElement!==this.$pages&&this.$pages.appendChild(l.$page),l.translateY(this.pagesIntrinsicYs[u]-this.pagesScrollTop)}n!==this.pageScrollIndex&&(this.pageScrollIndex=n,this.onPageIndexChanged&&this.onPageIndexChanged(n))}}},{key:"findScrollPageIndex",value:function(){for(var t=0;t<this.pagesIntrinsicYs.length;t++)if(this.pagesIntrinsicYs[t]+this.pages[t].height-this.pagesScrollTop>=.001)return t;return this.pagesIntrinsicYs.length-1}},{key:"mount",value:function(t){t.appendChild(this.$pages),this.pagesScrollTo(this.pagesScrollTop,!0)}},{key:"unmount",value:function(){this.$pages.remove()}},{key:"destroy",value:function(){this.unmount(),this.onPageIndexChanged=void 0,this.pageElManager.destroy(),this._hwaTimeout&&(window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN)}},{key:"_calcScale",value:function(){return this.containerWidth/this.pagesIntrinsicWidth||1}},{key:"_calcThreshold",value:function(){return ou(Math.ceil(this.containerHeight/this.scale/this.pagesMinHeight/2),1,this.pages.length)}},{key:"_turnOnHWA",value:function(){this._hwaTimeout?window.clearTimeout(this._hwaTimeout):this.$pages.classList.toggle("is-hwa",!0),this._hwaTimeout=window.setTimeout(this._turnOffHWA,1e3)}}]),t}(),fu=function(){function t(e){m(this,t),this.sideEffect=new Go,this.pagesScrollTop=e.pagesScrollTop||0,this.containerWidth=e.containerWidth||1,this.containerHeight=e.containerHeight||1,this.pagesWidth=e.pagesWidth||1,this.pagesHeight=e.pagesHeight||1,this.scale=this._calcScale(),this.scrollbarMinHeight=e.scrollbarMinHeight||30,this.scrollbarHeight=this._calcScrollbarHeight(),this.readonly=e.readonly,this.wrapClassName=e.wrapClassName,this.onDragScroll=e.onDragScroll,this.$scrollbar=this.renderScrollbar()}return b(t,[{key:"mount",value:function(t){t.appendChild(this.$scrollbar),this.pagesScrollTo(this.pagesScrollTop,!0)}},{key:"unmount",value:function(){this.$scrollbar.remove()}},{key:"setReadonly",value:function(t){this.readonly=t}},{key:"setContainerSize",value:function(t,e){t>0&&e>0&&(t!==this.containerWidth||e!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=e,this.scale=this._calcScale(),this._updateScrollbarHeight(),this.$scrollbar.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}},{key:"pagesScrollTo",value:function(t,e){var n=this;if(t=ou(t,0,this.pagesHeight-this.containerHeight/this.scale),e||Math.abs(t-this.pagesScrollTop)>=.001){this.pagesScrollTop=t;var r=this.pagesScrollTop*this.scale/(this.pagesHeight*this.scale-this.containerHeight)*(this.containerHeight-this.scrollbarHeight);window.requestAnimationFrame?window.requestAnimationFrame((function(){n.$scrollbar.style.transform="translateY(".concat(r,"px)")})):this.$scrollbar.style.transform="translateY(".concat(r,"px)")}}},{key:"destroy",value:function(){this.unmount(),this.onDragScroll=void 0,this.sideEffect.flushAll()}},{key:"renderScrollbar",value:function(){var t=this,e=document.createElement("button");e.className=this.wrapClassName("scrollbar"),e.style.minHeight="".concat(this.scrollbarMinHeight,"px"),e.style.height="".concat(this.scrollbarHeight,"px");var n=function(n){if(!(t.readonly||null!=n.button&&0!==n.button)){su(n);var r=t.wrapClassName("scrollbar-dragging");e.classList.toggle(r,!0);var i=t.pagesScrollTop,o=au(n).clientY,a=function(e){if(!t.readonly){var n=(au(e).clientY-o)/t.scale;Math.abs(n)>0&&t.onDragScroll&&t.onDragScroll(i+n*(t.pagesHeight*t.scale/t.containerHeight))}},s=function t(){e.classList.toggle(r,!1),window.removeEventListener("mousemove",a,!0),window.removeEventListener("touchmove",a,!0),window.removeEventListener("mouseup",t,!0),window.removeEventListener("touchend",t,!0),window.removeEventListener("touchcancel",t,!0)};window.addEventListener("mousemove",a,!0),window.addEventListener("touchmove",a,!0),window.addEventListener("mouseup",s,!0),window.addEventListener("touchend",s,!0),window.addEventListener("touchcancel",s,!0)}};return this.sideEffect.addEventListener(e,"mousedown",n),this.sideEffect.addEventListener(e,"touchstart",n),e}},{key:"_calcScale",value:function(){return this.containerWidth/this.pagesWidth||1}},{key:"_calcScrollbarHeight",value:function(){return ou(this.containerHeight/(this.pagesHeight*this.scale)*this.containerHeight,this.scrollbarMinHeight,this.containerHeight)}},{key:"_updateScrollbarHeight",value:function(){var t=this._calcScrollbarHeight();Math.abs(t-this.scrollbarHeight)>.001&&(this.scrollbarHeight=t,this.$scrollbar.style.height="".concat(t,"px"))}}]),t}(),pu=window.ResizeObserver||Na,gu=640,vu=function(){function t(e){var n=this,r=e.whiteboardView,i=e.readonly,o=e.box,a=e.pages,s=e.pageScrollTop,u=void 0===s?0:s,l=e.mountWhiteboard,c=e.onUserScroll;m(this,t),this.sideEffect=new Go,this.userScrolling=!1,this.onNewPageIndex=function(t){n.scrollToPage(t)},this.whiteboardView=r,this.readonly=i,this.box=o,this.pages=a,this.mountWhiteboard=l,this._onUserScroll=c;var h=this.debounce((function(){n.userScrolling=!1,n._onUserScroll&&n._onUserScroll(n.pageRenderer.pagesScrollTop)}),{wait:80},"debounce-updateUserScroll");this.updateUserScroll=function(){n.userScrolling=!0,h()},this.viewer=new iu({readonly:i,box:o,pages:a,onNewPageIndex:this.onNewPageIndex});var d=this.whiteboardView.size,A=d.width,f=d.height;this.pageRenderer=new Au({pagesScrollTop:u,pages:this.pages,containerWidth:A,containerHeight:f,onPageIndexChanged:this.viewer.setPageIndex.bind(this.viewer)}),this.scrollbar=new fu({pagesScrollTop:this.pageRenderer.pagesScrollTop,containerWidth:A,containerHeight:f,pagesWidth:this.pageRenderer.pagesIntrinsicWidth,pagesHeight:this.pageRenderer.pagesIntrinsicHeight,readonly:this.readonly,wrapClassName:this.wrapClassName.bind(this),onDragScroll:function(t){n.pageScrollTo(t),n.updateUserScroll()}}),this.pageScrollStepper=new uu({start:this.pageRenderer.pagesScrollTop,onStep:function(t){n.pageScrollTo(t)}}),this.render()}return b(t,[{key:"mount",value:function(){var t=this;this.viewer.mount(),this.setupScrollListener();var e=this.debounce(this.renderRatioHeight.bind(this),{wait:80});return this.sideEffect.add((function(){var n=new pu(e);return n.observe(t.viewer.$content),function(){return n.disconnect()}})),this.sideEffect.setTimeout((function(){t.userScrolling||t.pageScrollTo(t.pageRenderer.pagesScrollTop)}),100),this}},{key:"unmount",value:function(){return this.viewer.unmount(),this}},{key:"setReadonly",value:function(t){this.readonly!==t&&(this.readonly=t,this.viewer.setReadonly(t),this.scrollbar.setReadonly(t))}},{key:"destroy",value:function(){this.sideEffect.flushAll(),this.pageScrollStepper.destroy(),this._onUserScroll=void 0,this.unmount(),this.viewer.destroy(),this.pageRenderer.destroy(),this.scrollbar.destroy()}},{key:"syncPageScrollTop",value:function(t){!this.userScrolling&&t>=0&&Math.abs(this.pageRenderer.pagesScrollTop-t)>.01&&this.pageScrollStepper.stepTo(t,this.pageRenderer.pagesScrollTop)}},{key:"render",value:function(){this.pageRenderer.mount(this.viewer.$content),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.scrollbar.mount(this.viewer.$content),this.renderRatioHeight()}},{key:"renderRatioHeight",value:function(){var t=this.box.absoluteHeight,e=t<=gu;if(this.viewer.setSmallBox(e),e){var n=26/t,r=Math.max((.08125-(n+0))/2,0);if(this.box.$titleBar){var i=n+r;this.box.$titleBar.style.height="".concat(100*i,"%")}if(this.box.$footer){var o=0+r;this.box.$footer.style.height="".concat(100*o,"%")}}else{if(this.box.$titleBar){var a=Math.max(26/gu,26/t);this.box.$titleBar.style.height="".concat(100*a,"%")}if(this.box.$footer){var s=Math.max(26/gu,26/t);this.box.$footer.style.height="".concat(100*s,"%")}}}},{key:"renderWhiteboardView",value:function(){var t=this;return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.mountWhiteboard(this.$whiteboardView),this.sideEffect.addEventListener(this.$whiteboardView,"wheel",(function(e){su(e),t.readonly||(t.pageScrollTo(t.pageRenderer.pagesScrollTop+e.deltaY),t.updateUserScroll())}),{passive:!1,capture:!0}),this.sideEffect.addEventListener(this.$whiteboardView,"touchmove",(function(e){t.readonly||e.touches.length<=1||t.updateUserScroll()}),{passive:!0,capture:!0})),this.$whiteboardView}},{key:"scrollTopPageToEl",value:function(t){return t*this.pageRenderer.scale}},{key:"scrollTopElToPage",value:function(t){return t/this.pageRenderer.scale}},{key:"elScrollTo",value:function(t){this.pageScrollTo(this.scrollTopElToPage(t))}},{key:"pageScrollTo",value:function(t){var e=this.scrollTopElToPage(this.whiteboardView.size.height/2);this.whiteboardView.moveCamera({centerY:ou(t+e,e,this.pageRenderer.pagesIntrinsicHeight-e),animationMode:"immediately"})}},{key:"scrollToPage",value:function(t){if(!this.readonly&&!Number.isNaN(t)){var e=this.pageRenderer.pagesIntrinsicYs[t];e>=0&&(this.pageScrollTo(e+5/this.pageRenderer.scale),this.updateUserScroll())}}},{key:"setupScrollListener",value:function(){var t=this;this.sideEffect.add((function(){var e=function(e){var n=t.whiteboardView.size,r=n.width,i=n.height;if(!(r<=0||i<=0)){var o=e.centerY-t.pageRenderer.containerHeight/t.pageRenderer.scale/2;t.pageRenderer.pagesScrollTo(o),t.scrollbar.pagesScrollTo(o)}};return t.whiteboardView.callbacks.on("onCameraUpdated",e),function(){return t.whiteboardView.callbacks.off("onCameraUpdated",e)}})),this.sideEffect.add((function(){var e=function(e){var n=e.width,r=e.height;if(!(n<=0||r<=0)){t.pageRenderer.setContainerSize(n,r),t.scrollbar.setContainerSize(n,r);var i=t.pageRenderer,o=i.pagesIntrinsicWidth,a=i.pagesIntrinsicHeight;t.whiteboardView.moveCameraToContain({originX:0,originY:t.pageRenderer.pagesScrollTop,width:o,height:r/t.pageRenderer.scale,animationMode:"immediately"}),t.whiteboardView.setCameraBound({damping:1,maxContentMode:function(){return t.pageRenderer.scale},minContentMode:function(){return t.pageRenderer.scale},centerX:o/2,centerY:a/2,width:o,height:a})}};return t.whiteboardView.callbacks.on("onSizeUpdated",e),function(){t.whiteboardView.callbacks.off("onSizeUpdated",e)}}),"whiteboard-size-update"),this.sideEffect.addEventListener(window,"keyup",(function(e){if(!t.readonly&&t.box.focus&&!t.box.minimized){var n=null;switch(e.key){case"PageDown":n=t.pageRenderer.pagesScrollTop+t.pageRenderer.containerHeight/t.pageRenderer.scale;break;case"PageUp":n=t.pageRenderer.pagesScrollTop-t.pageRenderer.containerHeight/t.pageRenderer.scale;break;case"ArrowDown":n=t.pageRenderer.pagesScrollTop+t.pageRenderer.containerHeight/4/t.pageRenderer.scale;break;case"ArrowUp":n=t.pageRenderer.pagesScrollTop-t.pageRenderer.containerHeight/4/t.pageRenderer.scale}null!==n&&(t._onUserScroll?t._onUserScroll(n):(t.pageScrollTo(n),t.updateUserScroll()))}}),{capture:!0})}},{key:"debounce",value:function(t,e,n){var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof t)throw new TypeError("Expected the first argument to be a function, got `".concat(w(t),"`"));var n,r,i,o=e.wait,a=void 0===o?0:o,s=e.maxWait,u=void 0===s?Number.Infinity:s,l=e.before,c=void 0!==l&&l,h=e.after,d=void 0===h||h;if(!c&&!d)throw new Error("Both `before` and `after` are false, function wouldn't be called.");var A=function(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];var l=this,h=function(){n=void 0,r&&(clearTimeout(r),r=void 0),d&&(i=t.apply(l,o))},A=function(){r=void 0,n&&(clearTimeout(n),n=void 0),d&&(i=t.apply(l,o))},f=c&&!n;return clearTimeout(n),n=setTimeout(h,a),u>0&&u!==Number.Infinity&&!r&&(r=setTimeout(A,u)),f&&(i=t.apply(l,o)),i};return Fo(A,t),A.cancel=function(){n&&(clearTimeout(n),n=void 0),r&&(clearTimeout(r),r=void 0)},A}(t,e);return this.sideEffect.addDisposer((function(){return r.cancel()}),n),r}},{key:"wrapClassName",value:function(t){return"netless-app-docs-viewer-static-"+t}}]),t}(),mu=function(){function t(e){var n=this,r=e.context,i=e.whiteboardView,o=e.box,a=e.pages;m(this,t),this.sideEffect=new Go,this.onPlayPPT=function(){var t=n.context.getRoom();t&&t.pptNextStep()},this._scaleDocsToFitImpl=function(){var t=n.pages[n.getPageIndex()];t&&(n.whiteboardView.moveCameraToContain({originX:-t.width/2,originY:-t.height/2,width:t.width,height:t.height,animationMode:"immediately"}),n.whiteboardView.setCameraBound({damping:1,maxContentMode:function(){return n.whiteboardView.camera.scale},minContentMode:function(){return n.whiteboardView.camera.scale},centerX:0,centerY:0,width:t.width,height:t.height}))},this._scaleDocsToFitDebounced=function(){n.sideEffect.setTimeout(n._scaleDocsToFitImpl,1e3,"_scaleDocsToFitDebounced")},this.scaleDocsToFit=function(){n._scaleDocsToFitImpl(),n._scaleDocsToFitDebounced()},this.onNewPageIndex=function(t){n.jumpToPage(t,!0)},this.context=r,this.whiteboardView=i,this.box=o,this.pages=a,this.displayer=r.getDisplayer(),this.viewer=new iu({readonly:!r.getIsWritable(),box:o,pages:a,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlayPPT}),this.render(),this.sideEffect.add((function(){var t=function(t){n.viewer.setReadonly(!t)};return n.context.emitter.on("writableChange",t),function(){return n.context.emitter.off("writableChange",t)}})),this.sideEffect.add((function(){var t=function(t){n.jumpToPage(t.index)};return n.context.emitter.on("sceneStateChange",t),function(){return n.context.emitter.off("sceneStateChange",t)}}))}return b(t,[{key:"mount",value:function(){var t=this;this.viewer.mount();var e=this.getPageIndex();return 0!==e&&this.jumpToPage(e),this.scaleDocsToFit(),this.sideEffect.add((function(){return t.whiteboardView.callbacks.on("onSizeUpdated",t.scaleDocsToFit),function(){t.whiteboardView.callbacks.off("onSizeUpdated",t.scaleDocsToFit)}})),this}},{key:"unmount",value:function(){return this.viewer.unmount(),this}},{key:"destroy",value:function(){this.sideEffect.flushAll(),this.unmount(),this.viewer.destroy()}},{key:"getPageIndex",value:function(){return this.displayer.state.sceneState.index}},{key:"jumpToPage",value:function(t,e){var n,r;if((t=ou(t,0,this.pages.length-1))!==this.getPageIndex()&&this.context.getIsWritable()){var i=this.context.getInitScenePath(),o=null==(r=null==(n=this.context.getScenes())?void 0:n[t])?void 0:r.name;i&&o&&this.context.setScenePath("".concat(i,"/").concat(o)),this.scaleDocsToFit()}if(t!==this.viewer.pageIndex&&this.viewer.setPageIndex(t),e){var a=this.context.getRoom();if(a){var s=a.state.globalState.__pptState;a.setGlobalState({__pptState:s&&{uuid:s.uuid,pageIndex:t,disableAutoPlay:s.disableAutoPlay}})}}}},{key:"render",value:function(){var t=this;this.viewer.$content.appendChild(this.renderMask()),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.sideEffect.addEventListener(window,"keydown",(function(e){var n;if(t.box.focus)switch(e.key){case"ArrowUp":case"ArrowLeft":t.jumpToPage(t.getPageIndex()-1,!0);break;case"ArrowRight":case"ArrowDown":null==(n=t.context.getRoom())||n.pptNextStep()}}))}},{key:"renderMask",value:function(){if(!this.$mask){var t=document.createElement("div");t.className=this.wrapClassName("mask"),this.$mask=t,document.createElement("button").className=this.wrapClassName("back"),document.createElement("button").className=this.wrapClassName("next")}return this.$mask}},{key:"renderWhiteboardView",value:function(){var t=this;return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.sideEffect.addEventListener(this.$whiteboardView,"click",(function(e){var n,r=t.context.getRoom();if(r&&"clicker"===r.state.memberState.currentApplianceName){for(var i=e.target;i;i=i.parentElement)if(null!=(n=i.classList)&&n.contains("ppt-event-source"))return;r.pptNextStep()}})),this.context.mountView(this.$whiteboardView)),this.$whiteboardView}},{key:"wrapClassName",value:function(t){return"netless-app-docs-viewer-dynamic-"+t}}]),t}(),yu={kind:"DocsViewer",setup:function(t){var e=t.getBox(),n=t.getScenes();if(!n)throw new Error("[Docs Viewer]: scenes not found.");var r=t.getView();if(!r)throw new Error("[Docs Viewer]: no whiteboard view.");var i=n.map((function(t){var e=t.ppt;return e?{width:e.width,height:e.height,src:e.src,thumbnail:e.previewURL}:null})).filter((function(t){return Boolean(t)}));if(i.length<=0)throw new Error("[Docs Viewer]: empty scenes.");e.mountStyles(".netless-app-docs-viewer-content{position:relative;height:100%;overflow:hidden}.netless-app-docs-viewer-preview-mask{display:none;position:absolute;z-index:200;top:0;left:0;width:100%;height:100%}.netless-app-docs-viewer-preview{display:flex;flex-direction:column;align-items:center;position:absolute;z-index:300;top:0;left:0;width:33%;max-width:200px;height:100%;padding-top:10px;transform:translate(-100%);background:rgba(237,237,240,.9);box-shadow:inset -1px 0 #0000001c;transition:transform .4s}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview-mask{display:block}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview{transform:translate(0)}.netless-app-docs-viewer-preview-page{position:relative;display:block;width:55%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border:7px solid transparent;border-radius:4px;transition:border-color .3s;user-select:none}.netless-app-docs-viewer-preview-page:hover,.netless-app-docs-viewer-preview-page.netless-app-docs-viewer-preview-page-active{border-color:#444e601a}.netless-app-docs-viewer-preview-page>img{width:100%;height:auto;box-sizing:border-box;border:1px solid rgba(0,0,0,.5);border-radius:1px;background-color:#fff;box-shadow:0 2px 8px #0000004d}.netless-app-docs-viewer-preview-page-name{position:absolute;top:1px;left:-10px;transform:translate(-100%);text-align:right;font-size:12px;color:#5f5f5f;user-select:none}.netless-app-docs-viewer-footer{box-sizing:border-box;height:26px;display:flex;align-items:center;padding:0 16px;border-top:1px solid #eeeef7;color:#191919}.netless-app-docs-viewer-float-footer{width:100%;min-height:26px;position:absolute;left:0;bottom:0;z-index:2000;background:rgba(249,249,252,.9);transition:opacity .4s}.netless-app-docs-viewer-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:1px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-footer-btn:hover{background:rgba(237,237,240,.9)}@media (hover: none){.netless-app-docs-viewer-footer-btn:hover{background:transparent!important}}.netless-app-docs-viewer-footer-btn>svg{width:100%;height:100%}.netless-app-docs-viewer-footer-btn>svg:nth-of-type(2){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-docs-viewer-footer-btn~.netless-app-docs-viewer-footer-btn{margin-left:15px}.netless-app-docs-viewer-page-jumps{flex:1;display:flex;justify-content:center;align-items:center}.netless-app-docs-viewer-page-number{margin-left:auto;font-size:13px;user-select:none;white-space:nowrap;word-break:keep-all}.netless-app-docs-viewer-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;background:transparent;transition:background .4s;user-select:text;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-page-number-input:active{background:#fff;box-shadow:#63636333 0 2px 8px}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn:hover{background:transparent}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:active{background:transparent;box-shadow:none}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:disabled{color:inherit}.netless-app-docs-viewer-readonly.netless-app-docs-viewer-float-footer{display:none}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input{color:#a6a6a8}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:active,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:focus,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:hover{color:#222}.telebox-color-scheme-dark .netless-app-docs-viewer-footer{color:#a6a6a8;background:#2d2d33;border-top:none}.telebox-color-scheme-dark .netless-app-docs-viewer-footer-btn:hover{background:#212126}.telebox-color-scheme-dark .netless-app-docs-viewer-preview{background:rgba(50,50,50,.9)}.netless-app-docs-viewer-static-scrollbar{position:absolute;top:0;right:0;z-index:2147483647;width:8px;min-height:30px;margin:0;padding:0;border:none;outline:none;border-radius:4px;background:rgba(68,78,96,.4);box-shadow:1px 1px 8px #ffffffb3;opacity:0;transition:background .4s,opacity .4s 3s,transform .2s;user-select:none}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging{background:rgba(68,78,96,.6);opacity:1;transition:background .4s,opacity .4s 3s!important}.netless-app-docs-viewer-static-scrollbar:hover,.netless-app-docs-viewer-static-scrollbar:focus{background:rgba(68,78,96,.5)}.netless-app-docs-viewer-static-scrollbar:active{background:rgba(68,78,96,.6)}.netless-app-docs-viewer-content:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-static-scrollbar{display:none}.netless-app-docs-viewer-static-pages:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.page-renderer-pages-container{position:relative;overflow:hidden}.page-renderer-page{position:absolute;top:0;left:0;background-position:center;background-size:cover;background-repeat:no-repeat}.page-renderer-pages-container.is-hwa .page-renderer-page{will-change:transform}.page-renderer-page-img{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-pages{overflow:hidden;position:relative;height:100%;user-select:none}.netless-app-docs-viewer-static-page{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-wb-view,.netless-app-docs-viewer-dynamic-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:hidden}.netless-app-docs-viewer-dynamic-wb-view .cursor-clicker .ppt-event-source{cursor:pointer}\n"),i[0].src.startsWith("ppt")?function(t,e,n,r){e.disableCameraTransform=!0;var i=new mu({context:t,whiteboardView:e,box:n,pages:r}).mount();t.mountView(i.$whiteboardView),t.isAddApp&&e.callbacks.once("onSizeUpdated",(function(e){var i=e.width,o=e.height;if(r.length>0&&"maximized"!==n.state){var a=r[0],s=a.width,u=a.height/s*i-o;0!==u&&t.getIsWritable()&&t.emitter.emit("setBoxSize",{width:n.width,height:n.height+u/n.containerRect.height})}}))}(t,r,e,i):function(t,e,n,r){var i;e.disableCameraTransform=!t.getIsWritable();var o=new vu({whiteboardView:e,readonly:!t.getIsWritable(),box:n,pages:r,pageScrollTop:null==(i=t.getAttributes())?void 0:i.pageScrollTop,mountWhiteboard:t.mountView.bind(t),onUserScroll:function(e){var r;(null==(r=t.getAttributes())?void 0:r.pageScrollTop)!==e&&!n.readonly&&t.updateAttributes(["pageScrollTop"],e)}}).mount();t.emitter.on("attributesUpdate",(function(t){t&&null!=t.pageScrollTop&&o.syncPageScrollTop(t.pageScrollTop)})),t.emitter.on("writableChange",(function(t){o.setReadonly(!t),e.disableCameraTransform=!t}))}(t,r,e,i)}};var bu={exports:{}},wu={},xu={exports:{}},_u={};
/** @license React v0.19.1
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/!function(t){var e,n,r,i,o;if("undefined"==typeof window||"function"!=typeof MessageChannel){var a=null,s=null,u=function e(){if(null!==a)try{var n=t.unstable_now();a(!0,n),a=null}catch(t){throw setTimeout(e,0),t}},l=Date.now();t.unstable_now=function(){return Date.now()-l},e=function(t){null!==a?setTimeout(e,0,t):(a=t,setTimeout(u,0))},n=function(t,e){s=setTimeout(t,e)},r=function(){clearTimeout(s)},i=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var c=window.performance,h=window.Date,d=window.setTimeout,A=window.clearTimeout;if("undefined"!=typeof console){var f=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==w(c)&&"function"==typeof c.now)t.unstable_now=function(){return c.now()};else{var p=h.now();t.unstable_now=function(){return h.now()-p}}var g=!1,v=null,m=-1,y=5,b=0;i=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):y=0<t?Math.floor(1e3/t):5};var x=new MessageChannel,_=x.port2;x.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();b=e+y;try{v(!0,e)?_.postMessage(null):(g=!1,v=null)}catch(t){throw _.postMessage(null),t}}else g=!1},e=function(t){v=t,g||(g=!0,_.postMessage(null))},n=function(e,n){m=d((function(){e(t.unstable_now())}),n)},r=function(){A(m),m=-1}}function T(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<M(i,e)))break t;t[r]=e,t[n]=i,n=r}}function E(t){return void 0===(t=t[0])?null:t}function S(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>M(a,n))void 0!==u&&0>M(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>M(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function M(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var C=[],I=[],N=1,B=null,k=3,P=!1,D=!1,L=!1;function O(t){for(var e=E(I);null!==e;){if(null===e.callback)S(I);else{if(!(e.startTime<=t))break;S(I),e.sortIndex=e.expirationTime,T(C,e)}e=E(I)}}function R(t){if(L=!1,O(t),!D)if(null!==E(C))D=!0,e(F);else{var r=E(I);null!==r&&n(R,r.startTime-t)}}function F(e,o){D=!1,L&&(L=!1,r()),P=!0;var a=k;try{for(O(o),B=E(C);null!==B&&(!(B.expirationTime>o)||e&&!i());){var s=B.callback;if(null!==s){B.callback=null,k=B.priorityLevel;var u=s(B.expirationTime<=o);o=t.unstable_now(),"function"==typeof u?B.callback=u:B===E(C)&&S(C),O(o)}else S(C);B=E(C)}if(null!==B)var l=!0;else{var c=E(I);null!==c&&n(R,c.startTime-o),l=!1}return l}finally{B=null,k=a,P=!1}}function U(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var j=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(t){t.callback=null},t.unstable_continueExecution=function(){D||P||(D=!0,e(F))},t.unstable_getCurrentPriorityLevel=function(){return k},t.unstable_getFirstCallbackNode=function(){return E(C)},t.unstable_next=function(t){switch(k){case 1:case 2:case 3:var e=3;break;default:e=k}var n=k;k=e;try{return t()}finally{k=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=j,t.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=k;k=t;try{return e()}finally{k=n}},t.unstable_scheduleCallback=function(i,o,a){var s=t.unstable_now();if("object"==w(a)&&null!==a){var u=a.delay;u="number"==typeof u&&0<u?s+u:s,a="number"==typeof a.timeout?a.timeout:U(i)}else a=U(i),u=s;return i={id:N++,callback:o,priorityLevel:i,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(i.sortIndex=u,T(I,i),null===E(C)&&i===E(I)&&(L?r():L=!0,n(R,u-s))):(i.sortIndex=a,T(C,i),D||P||(D=!0,e(F))),i},t.unstable_shouldYield=function(){var e=t.unstable_now();O(e);var n=E(C);return n!==B&&null!==B&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<B.expirationTime||i()},t.unstable_wrapCallback=function(t){var e=k;return function(){var n=k;k=e;try{return t.apply(this,arguments)}finally{k=n}}}}(_u),xu.exports=_u;
/** @license React v16.14.0
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/
var Tu=fe.exports,Eu=be,Su=xu.exports;function Mu(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Tu)throw Error(Mu(227));function Cu(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this.onError(t)}}var Iu=!1,Nu=null,Bu=!1,ku=null,Pu={onError:function(t){Iu=!0,Nu=t}};function Du(t,e,n,r,i,o,a,s,u){Iu=!1,Nu=null,Cu.apply(Pu,arguments)}var Lu=null,Ou=null,Ru=null;function Fu(t,e,n){var r=t.type||"unknown-event";t.currentTarget=Ru(n),function(t,e,n,r,i,o,a,s,u){if(Du.apply(this,arguments),Iu){if(!Iu)throw Error(Mu(198));var l=Nu;Iu=!1,Nu=null,Bu||(Bu=!0,ku=l)}}(r,e,void 0,t),t.currentTarget=null}var Uu=null,ju={};function zu(){if(Uu)for(var t in ju){var e=ju[t],n=Uu.indexOf(t);if(!(-1<n))throw Error(Mu(96,t));if(!Qu[n]){if(!e.extractEvents)throw Error(Mu(97,t));for(var r in Qu[n]=e,n=e.eventTypes){var i=void 0,o=n[r],a=e,s=r;if(Gu.hasOwnProperty(s))throw Error(Mu(99,s));Gu[s]=o;var u=o.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&Hu(u[i],a,s);i=!0}else o.registrationName?(Hu(o.registrationName,a,s),i=!0):i=!1;if(!i)throw Error(Mu(98,r,t))}}}}function Hu(t,e,n){if(Vu[t])throw Error(Mu(100,t));Vu[t]=e,Wu[t]=e.eventTypes[n].dependencies}var Qu=[],Gu={},Vu={},Wu={};function Yu(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!ju.hasOwnProperty(e)||ju[e]!==r){if(ju[e])throw Error(Mu(102,e));ju[e]=r,n=!0}}n&&zu()}var Xu=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),qu=null,Ku=null,Zu=null;function Ju(t){if(t=Ou(t)){if("function"!=typeof qu)throw Error(Mu(280));var e=t.stateNode;e&&(e=Lu(e),qu(t.stateNode,t.type,e))}}function $u(t){Ku?Zu?Zu.push(t):Zu=[t]:Ku=t}function tl(){if(Ku){var t=Ku,e=Zu;if(Zu=Ku=null,Ju(t),e)for(t=0;t<e.length;t++)Ju(e[t])}}function el(t,e){return t(e)}function nl(t,e,n,r,i){return t(e,n,r,i)}function rl(){}var il=el,ol=!1,al=!1;function sl(){(null!==Ku||null!==Zu)&&(rl(),tl())}function ul(t,e,n){if(al)return t(e,n);al=!0;try{return il(t,e,n)}finally{al=!1,sl()}}var ll=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cl=Object.prototype.hasOwnProperty,hl={},dl={};function Al(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(w(e)){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fl(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var pl={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){pl[t]=new fl(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];pl[e]=new fl(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){pl[t]=new fl(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){pl[t]=new fl(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){pl[t]=new fl(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){pl[t]=new fl(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){pl[t]=new fl(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){pl[t]=new fl(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){pl[t]=new fl(t,5,!1,t.toLowerCase(),null,!1)}));var gl=/[\-:]([a-z])/g;function vl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(gl,vl);pl[e]=new fl(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(gl,vl);pl[e]=new fl(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(gl,vl);pl[e]=new fl(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){pl[t]=new fl(t,1,!1,t.toLowerCase(),null,!1)})),pl.xlinkHref=new fl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){pl[t]=new fl(t,1,!1,t.toLowerCase(),null,!0)}));var ml=Tu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function yl(t,e,n,r){var i=pl.hasOwnProperty(e)?pl[e]:null;(null!==i?0===i.type:!r&&!(!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1]))||(Al(e,n,i,r)&&(n=null),r||null===i?function(t){return!!cl.call(dl,t)||!cl.call(hl,t)&&(ll.test(t)?dl[t]=!0:(hl[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}ml.hasOwnProperty("ReactCurrentDispatcher")||(ml.ReactCurrentDispatcher={current:null}),ml.hasOwnProperty("ReactCurrentBatchConfig")||(ml.ReactCurrentBatchConfig={suspense:null});var bl=/^(.*)[\\\/]/,wl="function"==typeof Symbol&&Symbol.for,xl=wl?Symbol.for("react.element"):60103,_l=wl?Symbol.for("react.portal"):60106,Tl=wl?Symbol.for("react.fragment"):60107,El=wl?Symbol.for("react.strict_mode"):60108,Sl=wl?Symbol.for("react.profiler"):60114,Ml=wl?Symbol.for("react.provider"):60109,Cl=wl?Symbol.for("react.context"):60110,Il=wl?Symbol.for("react.concurrent_mode"):60111,Nl=wl?Symbol.for("react.forward_ref"):60112,Bl=wl?Symbol.for("react.suspense"):60113,kl=wl?Symbol.for("react.suspense_list"):60120,Pl=wl?Symbol.for("react.memo"):60115,Dl=wl?Symbol.for("react.lazy"):60116,Ll=wl?Symbol.for("react.block"):60121,Ol="function"==typeof Symbol&&Symbol.iterator;function Rl(t){return null===t||"object"!=w(t)?null:"function"==typeof(t=Ol&&t[Ol]||t["@@iterator"])?t:null}function Fl(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case Tl:return"Fragment";case _l:return"Portal";case Sl:return"Profiler";case El:return"StrictMode";case Bl:return"Suspense";case kl:return"SuspenseList"}if("object"==w(t))switch(t.$$typeof){case Cl:return"Context.Consumer";case Ml:return"Context.Provider";case Nl:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case Pl:return Fl(t.type);case Ll:return Fl(t.render);case Dl:if(t=1===t._status?t._result:null)return Fl(t)}return null}function Ul(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=Fl(t.type);n=null,r&&(n=Fl(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(bl,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function jl(t){switch(w(t)){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function zl(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Hl(t){t._valueTracker||(t._valueTracker=function(t){var e=zl(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Ql(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zl(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Gl(t,e){var n=e.checked;return Eu({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Vl(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=jl(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Wl(t,e){null!=(e=e.checked)&&yl(t,"checked",e,!1)}function Yl(t,e){Wl(t,e);var n=jl(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?ql(t,e.type,n):e.hasOwnProperty("defaultValue")&&ql(t,e.type,jl(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Xl(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function ql(t,e,n){("number"!==e||t.ownerDocument.activeElement!==t)&&(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Kl(t,e){return t=Eu({children:void 0},e),(e=function(t){var e="";return Tu.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function Zl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Jl(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(Mu(91));return Eu({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $l(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(Mu(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Mu(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:jl(n)}}function tc(t,e){var n=jl(e.value),r=jl(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function ec(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var nc="http://www.w3.org/1999/xhtml",rc="http://www.w3.org/2000/svg";function ic(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oc(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ic(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ac,sc=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==rc||"innerHTML"in t)t.innerHTML=e;else{for((ac=ac||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ac.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function uc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cc={animationend:lc("Animation","AnimationEnd"),animationiteration:lc("Animation","AnimationIteration"),animationstart:lc("Animation","AnimationStart"),transitionend:lc("Transition","TransitionEnd")},hc={},dc={};function Ac(t){if(hc[t])return hc[t];if(!cc[t])return t;var e,n=cc[t];for(e in n)if(n.hasOwnProperty(e)&&e in dc)return hc[t]=n[e];return t}Xu&&(dc=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);var fc=Ac("animationend"),pc=Ac("animationiteration"),gc=Ac("animationstart"),vc=Ac("transitionend"),mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yc=new("function"==typeof WeakMap?WeakMap:Map);function bc(t){var e=yc.get(t);return void 0===e&&(e=new Map,yc.set(t,e)),e}function wc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function xc(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function _c(t){if(wc(t)!==t)throw Error(Mu(188))}function Tc(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=wc(t)))throw Error(Mu(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return _c(i),t;if(o===r)return _c(i),e;o=o.sibling}throw Error(Mu(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(Mu(189))}}if(n.alternate!==r)throw Error(Mu(190))}if(3!==n.tag)throw Error(Mu(188));return n.stateNode.current===n?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Ec(t,e){if(null==e)throw Error(Mu(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function Sc(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var Mc=null;function Cc(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)Fu(t,e[r],n[r]);else e&&Fu(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function Ic(t){if(null!==t&&(Mc=Ec(Mc,t)),t=Mc,Mc=null,t){if(Sc(t,Cc),Mc)throw Error(Mu(95));if(Bu)throw t=ku,Bu=!1,ku=null,t}}function Nc(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Bc(t){if(!Xu)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var kc=[];function Pc(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>kc.length&&kc.push(t)}function Dc(t,e,n,r){if(kc.length){var i=kc.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function Lc(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=Zh(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=Nc(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<Qu.length;u++){var l=Qu[u];l&&(l=l.extractEvents(r,e,o,i,a))&&(s=Ec(s,l))}Ic(s)}}function Oc(t,e,n){if(!n.has(t)){switch(t){case"scroll":gh(e,"scroll",!0);break;case"focus":case"blur":gh(e,"focus",!0),gh(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":Bc(t)&&gh(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===mc.indexOf(t)&&ph(t,e)}n.set(t,null)}}var Rc,Fc,Uc,jc=!1,zc=[],Hc=null,Qc=null,Gc=null,Vc=new Map,Wc=new Map,Yc=[],Xc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),qc="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Kc(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Zc(t,e){switch(t){case"focus":case"blur":Hc=null;break;case"dragenter":case"dragleave":Qc=null;break;case"mouseover":case"mouseout":Gc=null;break;case"pointerover":case"pointerout":Vc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(e.pointerId)}}function Jc(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Kc(e,n,r,i,o),null!==e&&(null!==(e=Jh(e))&&Fc(e)),t):(t.eventSystemFlags|=r,t)}function $c(t){var e=Zh(t.target);if(null!==e){var n=wc(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=xc(n)))return t.blockedOn=e,void Su.unstable_runWithPriority(t.priority,(function(){Uc(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function th(t){if(null!==t.blockedOn)return!1;var e=bh(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Jh(e);return null!==n&&Fc(n),t.blockedOn=e,!1}return!0}function eh(t,e,n){th(t)&&n.delete(e)}function nh(){for(jc=!1;0<zc.length;){var t=zc[0];if(null!==t.blockedOn){null!==(t=Jh(t.blockedOn))&&Rc(t);break}var e=bh(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:zc.shift()}null!==Hc&&th(Hc)&&(Hc=null),null!==Qc&&th(Qc)&&(Qc=null),null!==Gc&&th(Gc)&&(Gc=null),Vc.forEach(eh),Wc.forEach(eh)}function rh(t,e){t.blockedOn===e&&(t.blockedOn=null,jc||(jc=!0,Su.unstable_scheduleCallback(Su.unstable_NormalPriority,nh)))}function ih(t){function e(e){return rh(e,t)}if(0<zc.length){rh(zc[0],t);for(var n=1;n<zc.length;n++){var r=zc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Hc&&rh(Hc,t),null!==Qc&&rh(Qc,t),null!==Gc&&rh(Gc,t),Vc.forEach(e),Wc.forEach(e),n=0;n<Yc.length;n++)(r=Yc[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Yc.length&&null===(n=Yc[0]).blockedOn;)$c(n),null===n.blockedOn&&Yc.shift()}var oh={},ah=new Map,sh=new Map,uh=["abort","abort",fc,"animationEnd",pc,"animationIteration",gc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",vc,"transitionEnd","waiting","waiting"];function lh(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},sh.set(r,e),ah.set(r,o),oh[i]=o}}lh("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),lh("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),lh(uh,2);for(var ch="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),hh=0;hh<ch.length;hh++)sh.set(ch[hh],0);var dh=Su.unstable_UserBlockingPriority,Ah=Su.unstable_runWithPriority,fh=!0;function ph(t,e){gh(e,t,!1)}function gh(t,e,n){var r=sh.get(e);switch(void 0===r?2:r){case 0:r=vh.bind(null,e,1,t);break;case 1:r=mh.bind(null,e,1,t);break;default:r=yh.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function vh(t,e,n,r){ol||rl();var i=yh,o=ol;ol=!0;try{nl(i,t,e,n,r)}finally{(ol=o)||sl()}}function mh(t,e,n,r){Ah(dh,yh.bind(null,t,e,n,r))}function yh(t,e,n,r){if(fh)if(0<zc.length&&-1<Xc.indexOf(t))t=Kc(null,t,e,n,r),zc.push(t);else{var i=bh(t,e,n,r);if(null===i)Zc(t,r);else if(-1<Xc.indexOf(t))t=Kc(i,t,e,n,r),zc.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return Hc=Jc(Hc,t,e,n,r,i),!0;case"dragenter":return Qc=Jc(Qc,t,e,n,r,i),!0;case"mouseover":return Gc=Jc(Gc,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Vc.set(o,Jc(Vc.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Wc.set(o,Jc(Wc.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){Zc(t,r),t=Dc(t,r,null,e);try{ul(Lc,t)}finally{Pc(t)}}}}function bh(t,e,n,r){if(null!==(n=Zh(n=Nc(r)))){var i=wc(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=xc(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=Dc(t,r,n,e);try{ul(Lc,t)}finally{Pc(t)}return null}var wh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xh=["Webkit","ms","Moz","O"];function _h(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||wh.hasOwnProperty(t)&&wh[t]?(""+e).trim():e+"px"}function Th(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_h(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(wh).forEach((function(t){xh.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wh[e]=wh[t]}))}));var Eh=Eu({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sh(t,e){if(e){if(Eh[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(Mu(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(Mu(60));if("object"!=w(e.dangerouslySetInnerHTML)||!("__html"in e.dangerouslySetInnerHTML))throw Error(Mu(61))}if(null!=e.style&&"object"!=w(e.style))throw Error(Mu(62,""))}}function Mh(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ch=nc;function Ih(t,e){var n=bc(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=Wu[e];for(var r=0;r<e.length;r++)Oc(e[r],t,n)}function Nh(){}function Bh(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function kh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ph(t,e){var n,r=kh(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=kh(r)}}function Dh(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?Dh(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function Lh(){for(var t=window,e=Bh();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=Bh((t=e.contentWindow).document)}return e}function Oh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Rh="$?",Fh="$!",Uh=null,jh=null;function zh(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Hh(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==w(e.dangerouslySetInnerHTML)&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Qh="function"==typeof setTimeout?setTimeout:void 0,Gh="function"==typeof clearTimeout?clearTimeout:void 0;function Vh(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Wh(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||n===Fh||n===Rh){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Yh=Math.random().toString(36).slice(2),Xh="__reactInternalInstance$"+Yh,qh="__reactEventHandlers$"+Yh,Kh="__reactContainere$"+Yh;function Zh(t){var e=t[Xh];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kh]||n[Xh]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Wh(t);null!==t;){if(n=t[Xh])return n;t=Wh(t)}return e}n=(t=n).parentNode}return null}function Jh(t){return!(t=t[Xh]||t[Kh])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function $h(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(Mu(33))}function td(t){return t[qh]||null}function ed(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function nd(t,e){var n=t.stateNode;if(!n)return null;var r=Lu(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(Mu(231,e,w(n)));return n}function rd(t,e,n){(e=nd(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=Ec(n._dispatchListeners,e),n._dispatchInstances=Ec(n._dispatchInstances,t))}function id(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=ed(e);for(e=n.length;0<e--;)rd(n[e],"captured",t);for(e=0;e<n.length;e++)rd(n[e],"bubbled",t)}}function od(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=nd(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=Ec(n._dispatchListeners,e),n._dispatchInstances=Ec(n._dispatchInstances,t))}function ad(t){t&&t.dispatchConfig.registrationName&&od(t._targetInst,null,t)}function sd(t){Sc(t,id)}var ud=null,ld=null,cd=null;function hd(){if(cd)return cd;var t,e,n=ld,r=n.length,i="value"in ud?ud.value:ud.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return cd=i.slice(t,1<e?1-e:void 0)}function dd(){return!0}function Ad(){return!1}function fd(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?dd:Ad,this.isPropagationStopped=Ad,this}function pd(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function gd(t){if(!(t instanceof this))throw Error(Mu(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function vd(t){t.eventPool=[],t.getPooled=pd,t.release=gd}Eu(fd.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=dd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=dd)},persist:function(){this.isPersistent=dd},isPersistent:Ad,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Ad,this._dispatchInstances=this._dispatchListeners=null}}),fd.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},fd.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var i=new e;return Eu(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=Eu({},r.Interface,t),n.extend=r.extend,vd(n),n},vd(fd);var md=fd.extend({data:null}),yd=fd.extend({data:null}),bd=[9,13,27,32],wd=Xu&&"CompositionEvent"in window,xd=null;Xu&&"documentMode"in document&&(xd=document.documentMode);var _d=Xu&&"TextEvent"in window&&!xd,Td=Xu&&(!wd||xd&&8<xd&&11>=xd),Ed=String.fromCharCode(32),Sd={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Md=!1;function Cd(t,e){switch(t){case"keyup":return-1!==bd.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Id(t){return"object"==w(t=t.detail)&&"data"in t?t.data:null}var Nd=!1;var Bd={eventTypes:Sd,extractEvents:function(t,e,n,r){var i;if(wd)t:{switch(t){case"compositionstart":var o=Sd.compositionStart;break t;case"compositionend":o=Sd.compositionEnd;break t;case"compositionupdate":o=Sd.compositionUpdate;break t}o=void 0}else Nd?Cd(t,n)&&(o=Sd.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=Sd.compositionStart);return o?(Td&&"ko"!==n.locale&&(Nd||o!==Sd.compositionStart?o===Sd.compositionEnd&&Nd&&(i=hd()):(ld="value"in(ud=r)?ud.value:ud.textContent,Nd=!0)),o=md.getPooled(o,e,n,r),i?o.data=i:null!==(i=Id(n))&&(o.data=i),sd(o),i=o):i=null,(t=_d?function(t,e){switch(t){case"compositionend":return Id(e);case"keypress":return 32!==e.which?null:(Md=!0,Ed);case"textInput":return(t=e.data)===Ed&&Md?null:t;default:return null}}(t,n):function(t,e){if(Nd)return"compositionend"===t||!wd&&Cd(t,e)?(t=hd(),cd=ld=ud=null,Nd=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Td&&"ko"!==e.locale?null:e.data}}(t,n))?((e=yd.getPooled(Sd.beforeInput,e,n,r)).data=t,sd(e)):e=null,null===i?e:null===e?i:[i,e]}},kd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!kd[t.type]:"textarea"===e}var Dd={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ld(t,e,n){return(t=fd.getPooled(Dd.change,t,e,n)).type="change",$u(n),sd(t),t}var Od=null,Rd=null;function Fd(t){Ic(t)}function Ud(t){if(Ql($h(t)))return t}function jd(t,e){if("change"===t)return e}var zd=!1;function Hd(){Od&&(Od.detachEvent("onpropertychange",Qd),Rd=Od=null)}function Qd(t){if("value"===t.propertyName&&Ud(Rd))if(t=Ld(Rd,t,Nc(t)),ol)Ic(t);else{ol=!0;try{el(Fd,t)}finally{ol=!1,sl()}}}function Gd(t,e,n){"focus"===t?(Hd(),Rd=n,(Od=e).attachEvent("onpropertychange",Qd)):"blur"===t&&Hd()}function Vd(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Ud(Rd)}function Wd(t,e){if("click"===t)return Ud(e)}function Yd(t,e){if("input"===t||"change"===t)return Ud(e)}Xu&&(zd=Bc("input")&&(!document.documentMode||9<document.documentMode));var Xd={eventTypes:Dd,_isInputEventSupported:zd,extractEvents:function(t,e,n,r){var i=e?$h(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=jd;else if(Pd(i))if(zd)a=Yd;else{a=Vd;var s=Gd}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Wd);if(a&&(a=a(t,e)))return Ld(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&ql(i,"number",i.value)}},qd=fd.extend({view:null,detail:null}),Kd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zd(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Kd[t])&&!!e[t]}function Jd(){return Zd}var $d=0,tA=0,eA=!1,nA=!1,rA=qd.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Jd,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=$d;return $d=t.screenX,eA?"mousemove"===t.type?t.screenX-e:0:(eA=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=tA;return tA=t.screenY,nA?"mousemove"===t.type?t.screenY-e:0:(nA=!0,0)}}),iA=rA.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),oA={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},aA={eventTypes:oA,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=e,null!==(e=(e=n.relatedTarget||n.toElement)?Zh(e):null)&&(e!==wc(e)||5!==e.tag&&6!==e.tag)&&(e=null)):a=null;if(a===e)return null;if("mouseout"===t||"mouseover"===t)var s=rA,u=oA.mouseLeave,l=oA.mouseEnter,c="mouse";else("pointerout"===t||"pointerover"===t)&&(s=iA,u=oA.pointerLeave,l=oA.pointerEnter,c="pointer");if(t=null==a?o:$h(a),o=null==e?o:$h(e),(u=s.getPooled(u,a,n,r)).type=c+"leave",u.target=t,u.relatedTarget=o,(n=s.getPooled(l,e,n,r)).type=c+"enter",n.target=o,n.relatedTarget=t,c=e,(r=a)&&c)t:{for(l=c,a=0,t=s=r;t;t=ed(t))a++;for(t=0,e=l;e;e=ed(e))t++;for(;0<a-t;)s=ed(s),a--;for(;0<t-a;)l=ed(l),t--;for(;a--;){if(s===l||s===l.alternate)break t;s=ed(s),l=ed(l)}s=null}else s=null;for(l=s,s=[];r&&r!==l&&(null===(a=r.alternate)||a!==l);)s.push(r),r=ed(r);for(r=[];c&&c!==l&&(null===(a=c.alternate)||a!==l);)r.push(c),c=ed(c);for(c=0;c<s.length;c++)od(s[c],"bubbled",u);for(c=r.length;0<c--;)od(r[c],"captured",n);return 0==(64&i)?[u]:[u,n]}};var sA="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},uA=Object.prototype.hasOwnProperty;function lA(t,e){if(sA(t,e))return!0;if("object"!=w(t)||null===t||"object"!=w(e)||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!uA.call(e,n[r])||!sA(t[n[r]],e[n[r]]))return!1;return!0}var cA=Xu&&"documentMode"in document&&11>=document.documentMode,hA={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},dA=null,AA=null,fA=null,pA=!1;function gA(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return pA||null==dA||dA!==Bh(n)?null:("selectionStart"in(n=dA)&&Oh(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},fA&&lA(fA,n)?null:(fA=n,(t=fd.getPooled(hA.select,AA,t,e)).type="select",t.target=dA,sd(t),t))}var vA={eventTypes:hA,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=bc(i),o=Wu.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?$h(e):window,t){case"focus":(Pd(i)||"true"===i.contentEditable)&&(dA=i,AA=e,fA=null);break;case"blur":fA=AA=dA=null;break;case"mousedown":pA=!0;break;case"contextmenu":case"mouseup":case"dragend":return pA=!1,gA(n,r);case"selectionchange":if(cA)break;case"keydown":case"keyup":return gA(n,r)}return null}},mA=fd.extend({animationName:null,elapsedTime:null,pseudoElement:null}),yA=fd.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bA=qd.extend({relatedTarget:null});function wA(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var xA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_A={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TA=qd.extend({key:function(t){if(t.key){var e=xA[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=wA(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?_A[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Jd,charCode:function(t){return"keypress"===t.type?wA(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?wA(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),EA=rA.extend({dataTransfer:null}),SA=qd.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Jd}),MA=fd.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),CA=rA.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),IA={eventTypes:oh,extractEvents:function(t,e,n,r){var i=ah.get(t);if(!i)return null;switch(t){case"keypress":if(0===wA(n))return null;case"keydown":case"keyup":t=TA;break;case"blur":case"focus":t=bA;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=rA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=EA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=SA;break;case fc:case pc:case gc:t=mA;break;case vc:t=MA;break;case"scroll":t=qd;break;case"wheel":t=CA;break;case"copy":case"cut":case"paste":t=yA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=iA;break;default:t=fd}return sd(e=t.getPooled(i,e,n,r)),e}};if(Uu)throw Error(Mu(101));Uu=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),zu(),Lu=td,Ou=Jh,Ru=$h,Yu({SimpleEventPlugin:IA,EnterLeaveEventPlugin:aA,ChangeEventPlugin:Xd,SelectEventPlugin:vA,BeforeInputEventPlugin:Bd});var NA=[],BA=-1;function kA(t){0>BA||(t.current=NA[BA],NA[BA]=null,BA--)}function PA(t,e){BA++,NA[BA]=t.current,t.current=e}var DA={},LA={current:DA},OA={current:!1},RA=DA;function FA(t,e){var n=t.type.contextTypes;if(!n)return DA;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function UA(t){return null!=(t=t.childContextTypes)}function jA(){kA(OA),kA(LA)}function zA(t,e,n){if(LA.current!==DA)throw Error(Mu(168));PA(LA,e),PA(OA,n)}function HA(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(Mu(108,Fl(e)||"Unknown",i));return Eu({},n,{},r)}function QA(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||DA,RA=LA.current,PA(LA,t),PA(OA,OA.current),!0}function GA(t,e,n){var r=t.stateNode;if(!r)throw Error(Mu(169));n?(t=HA(t,e,RA),r.__reactInternalMemoizedMergedChildContext=t,kA(OA),kA(LA),PA(LA,t)):kA(OA),PA(OA,n)}var VA=Su.unstable_runWithPriority,WA=Su.unstable_scheduleCallback,YA=Su.unstable_cancelCallback,XA=Su.unstable_requestPaint,qA=Su.unstable_now,KA=Su.unstable_getCurrentPriorityLevel,ZA=Su.unstable_ImmediatePriority,JA=Su.unstable_UserBlockingPriority,$A=Su.unstable_NormalPriority,tf=Su.unstable_LowPriority,ef=Su.unstable_IdlePriority,nf={},rf=Su.unstable_shouldYield,of=void 0!==XA?XA:function(){},af=null,sf=null,uf=!1,lf=qA(),cf=1e4>lf?qA:function(){return qA()-lf};function hf(){switch(KA()){case ZA:return 99;case JA:return 98;case $A:return 97;case tf:return 96;case ef:return 95;default:throw Error(Mu(332))}}function df(t){switch(t){case 99:return ZA;case 98:return JA;case 97:return $A;case 96:return tf;case 95:return ef;default:throw Error(Mu(332))}}function Af(t,e){return t=df(t),VA(t,e)}function ff(t,e,n){return t=df(t),WA(t,e,n)}function pf(t){return null===af?(af=[t],sf=WA(ZA,vf)):af.push(t),nf}function gf(){if(null!==sf){var t=sf;sf=null,YA(t)}vf()}function vf(){if(!uf&&null!==af){uf=!0;var t=0;try{var e=af;Af(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),af=null}catch(e){throw null!==af&&(af=af.slice(t+1)),WA(ZA,gf),e}finally{uf=!1}}}function mf(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function yf(t,e){if(t&&t.defaultProps)for(var n in e=Eu({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var bf={current:null},wf=null,xf=null,_f=null;function Tf(){_f=xf=wf=null}function Ef(t){var e=bf.current;kA(bf),t.type._context._currentValue=e}function Sf(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function Mf(t,e){wf=t,_f=xf=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(tg=!0),t.firstContext=null)}function Cf(t,e){if(_f!==t&&!1!==e&&0!==e)if(("number"!=typeof e||1073741823===e)&&(_f=t,e=1073741823),e={context:t,observedBits:e,next:null},null===xf){if(null===wf)throw Error(Mu(308));xf=e,wf.dependencies={expirationTime:0,firstContext:e,responders:null}}else xf=xf.next=e;return t._currentValue}var If=!1;function Nf(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Bf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function kf(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function Pf(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function Df(t,e){var n=t.alternate;null!==n&&Bf(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function Lf(t,e,n,r){var i=t.updateQueue;If=!1;var o=i.baseQueue,a=i.shared.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}o=a,i.shared.pending=null,null!==(s=t.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=a))}if(null!==o){s=o.next;var u=i.baseState,l=0,c=null,h=null,d=null;if(null!==s)for(var A=s;;){if((a=A.expirationTime)<r){var f={expirationTime:A.expirationTime,suspenseConfig:A.suspenseConfig,tag:A.tag,payload:A.payload,callback:A.callback,next:null};null===d?(h=d=f,c=u):d=d.next=f,a>l&&(l=a)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:A.suspenseConfig,tag:A.tag,payload:A.payload,callback:A.callback,next:null}),Pv(a,A.suspenseConfig);t:{var p=t,g=A;switch(a=e,f=n,g.tag){case 1:if("function"==typeof(p=g.payload)){u=p.call(f,u,a);break t}u=p;break t;case 3:p.effectTag=-4097&p.effectTag|64;case 0:if(null==(a="function"==typeof(p=g.payload)?p.call(f,u,a):p))break t;u=Eu({},u,a);break t;case 2:If=!0}}null!==A.callback&&(t.effectTag|=32,null===(a=i.effects)?i.effects=[A]:a.push(A))}if(null===(A=A.next)||A===s){if(null===(a=i.shared.pending))break;A=o.next=a.next,a.next=s,i.baseQueue=o=a,i.shared.pending=null}}null===d?c=u:d.next=h,i.baseState=c,i.baseQueue=d,Dv(l),t.expirationTime=l,t.memoizedState=u}}function Of(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(Mu(191,r));r.call(i)}}}var Rf=ml.ReactCurrentBatchConfig,Ff=(new Tu.Component).refs;function Uf(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:Eu({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var jf={isMounted:function(t){return!!(t=t._reactInternalFiber)&&wc(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=bv(),i=Rf.suspense;(i=kf(r=wv(r,t,i),i)).payload=e,null!=n&&(i.callback=n),Pf(t,i),xv(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=bv(),i=Rf.suspense;(i=kf(r=wv(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),Pf(t,i),xv(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=bv(),r=Rf.suspense;(r=kf(n=wv(n,t,r),r)).tag=2,null!=e&&(r.callback=e),Pf(t,r),xv(t,n)}};function zf(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!lA(n,r)||!lA(i,o))}function Hf(t,e,n){var r=!1,i=DA,o=e.contextType;return"object"==w(o)&&null!==o?o=Cf(o):(i=UA(e)?RA:LA.current,o=(r=null!=(r=e.contextTypes))?FA(t,i):DA),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=jf,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Qf(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jf.enqueueReplaceState(e,e.state,null)}function Gf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Ff,Nf(t);var o=e.contextType;"object"==w(o)&&null!==o?i.context=Cf(o):(o=UA(e)?RA:LA.current,i.context=FA(t,o)),Lf(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(Uf(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&jf.enqueueReplaceState(i,i.state,null),Lf(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var Vf=Array.isArray;function Wf(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=w(t)){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Mu(309));var r=n.stateNode}if(!r)throw Error(Mu(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===Ff&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(Mu(284));if(!n._owner)throw Error(Mu(290,t))}return t}function Yf(t,e){if("textarea"!==t.type)throw Error(Mu(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Xf(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=tm(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function s(t,e,n,r){return null===e||6!==e.tag?((e=rm(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Wf(t,e,n),r.return=t,r):((r=em(n.type,n.key,n.props,null,t.mode,r)).ref=Wf(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=im(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function c(t,e,n,r,o){return null===e||7!==e.tag?((e=nm(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=rm(""+e,t.mode,n)).return=t,e;if("object"==w(e)&&null!==e){switch(e.$$typeof){case xl:return(n=em(e.type,e.key,e.props,null,t.mode,n)).ref=Wf(t,null,e),n.return=t,n;case _l:return(e=im(e,t.mode,n)).return=t,e}if(Vf(e)||Rl(e))return(e=nm(e,t.mode,n,null)).return=t,e;Yf(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(t,e,""+n,r);if("object"==w(n)&&null!==n){switch(n.$$typeof){case xl:return n.key===i?n.type===Tl?c(t,e,n.props.children,r,i):u(t,e,n,r):null;case _l:return n.key===i?l(t,e,n,r):null}if(Vf(n)||Rl(n))return null!==i?null:c(t,e,n,r,null);Yf(t,n)}return null}function A(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return s(e,t=t.get(n)||null,""+r,i);if("object"==w(r)&&null!==r){switch(r.$$typeof){case xl:return t=t.get(null===r.key?n:r.key)||null,r.type===Tl?c(e,t,r.props.children,i,r.key):u(e,t,r,i);case _l:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(Vf(r)||Rl(r))return c(e,t=t.get(n)||null,r,i,null);Yf(e,r)}return null}return function(s,u,l,c){var f="object"==w(l)&&null!==l&&l.type===Tl&&null===l.key;f&&(l=l.props.children);var p="object"==w(l)&&null!==l;if(p)switch(l.$$typeof){case xl:t:{for(p=l.key,f=u;null!==f;){if(f.key===p){if(7===f.tag){if(l.type===Tl){n(s,f.sibling),(u=i(f,l.props.children)).return=s,s=u;break t}}else if(f.elementType===l.type){n(s,f.sibling),(u=i(f,l.props)).ref=Wf(s,f,l),u.return=s,s=u;break t}n(s,f);break}e(s,f),f=f.sibling}l.type===Tl?((u=nm(l.props.children,s.mode,c,l.key)).return=s,s=u):((c=em(l.type,l.key,l.props,null,s.mode,c)).ref=Wf(s,u,l),c.return=s,s=c)}return a(s);case _l:t:{for(f=l.key;null!==u;){if(u.key===f){if(4===u.tag&&u.stateNode.containerInfo===l.containerInfo&&u.stateNode.implementation===l.implementation){n(s,u.sibling),(u=i(u,l.children||[])).return=s,s=u;break t}n(s,u);break}e(s,u),u=u.sibling}(u=im(l,s.mode,c)).return=s,s=u}return a(s)}if("string"==typeof l||"number"==typeof l)return l=""+l,null!==u&&6===u.tag?(n(s,u.sibling),(u=i(u,l)).return=s,s=u):(n(s,u),(u=rm(l,s.mode,c)).return=s,s=u),a(s);if(Vf(l))return function(i,a,s,u){for(var l=null,c=null,f=a,p=a=0,g=null;null!==f&&p<s.length;p++){f.index>p?(g=f,f=null):g=f.sibling;var v=d(i,f,s[p],u);if(null===v){null===f&&(f=g);break}t&&f&&null===v.alternate&&e(i,f),a=o(v,a,p),null===c?l=v:c.sibling=v,c=v,f=g}if(p===s.length)return n(i,f),l;if(null===f){for(;p<s.length;p++)null!==(f=h(i,s[p],u))&&(a=o(f,a,p),null===c?l=f:c.sibling=f,c=f);return l}for(f=r(i,f);p<s.length;p++)null!==(g=A(f,i,p,s[p],u))&&(t&&null!==g.alternate&&f.delete(null===g.key?p:g.key),a=o(g,a,p),null===c?l=g:c.sibling=g,c=g);return t&&f.forEach((function(t){return e(i,t)})),l}(s,u,l,c);if(Rl(l))return function(i,a,s,u){var l=Rl(s);if("function"!=typeof l)throw Error(Mu(150));if(null==(s=l.call(s)))throw Error(Mu(151));for(var c=l=null,f=a,p=a=0,g=null,v=s.next();null!==f&&!v.done;p++,v=s.next()){f.index>p?(g=f,f=null):g=f.sibling;var m=d(i,f,v.value,u);if(null===m){null===f&&(f=g);break}t&&f&&null===m.alternate&&e(i,f),a=o(m,a,p),null===c?l=m:c.sibling=m,c=m,f=g}if(v.done)return n(i,f),l;if(null===f){for(;!v.done;p++,v=s.next())null!==(v=h(i,v.value,u))&&(a=o(v,a,p),null===c?l=v:c.sibling=v,c=v);return l}for(f=r(i,f);!v.done;p++,v=s.next())null!==(v=A(f,i,p,v.value,u))&&(t&&null!==v.alternate&&f.delete(null===v.key?p:v.key),a=o(v,a,p),null===c?l=v:c.sibling=v,c=v);return t&&f.forEach((function(t){return e(i,t)})),l}(s,u,l,c);if(p&&Yf(s,l),void 0===l&&!f)switch(s.tag){case 1:case 0:throw s=s.type,Error(Mu(152,s.displayName||s.name||"Component"))}return n(s,u)}}var qf=Xf(!0),Kf=Xf(!1),Zf={},Jf={current:Zf},$f={current:Zf},tp={current:Zf};function ep(t){if(t===Zf)throw Error(Mu(174));return t}function np(t,e){switch(PA(tp,e),PA($f,t),PA(Jf,Zf),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oc(null,"");break;default:e=oc(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}kA(Jf),PA(Jf,e)}function rp(){kA(Jf),kA($f),kA(tp)}function ip(t){ep(tp.current);var e=ep(Jf.current),n=oc(e,t.type);e!==n&&(PA($f,t),PA(Jf,n))}function op(t){$f.current===t&&(kA(Jf),kA($f))}var ap={current:0};function sp(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===Rh||n.data===Fh))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function up(t,e){return{responder:t,props:e}}var lp=ml.ReactCurrentDispatcher,cp=ml.ReactCurrentBatchConfig,hp=0,dp=null,Ap=null,fp=null,pp=!1;function gp(){throw Error(Mu(321))}function vp(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sA(t[n],e[n]))return!1;return!0}function mp(t,e,n,r,i,o){if(hp=o,dp=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,lp.current=null===t||null===t.memoizedState?zp:Hp,t=n(r,i),e.expirationTime===hp){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(Mu(301));o+=1,fp=Ap=null,e.updateQueue=null,lp.current=Qp,t=n(r,i)}while(e.expirationTime===hp)}if(lp.current=jp,e=null!==Ap&&null!==Ap.next,hp=0,fp=Ap=dp=null,pp=!1,e)throw Error(Mu(300));return t}function yp(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fp?dp.memoizedState=fp=t:fp=fp.next=t,fp}function bp(){if(null===Ap){var t=dp.alternate;t=null!==t?t.memoizedState:null}else t=Ap.next;var e=null===fp?dp.memoizedState:fp.next;if(null!==e)fp=e,Ap=t;else{if(null===t)throw Error(Mu(310));t={memoizedState:(Ap=t).memoizedState,baseState:Ap.baseState,baseQueue:Ap.baseQueue,queue:Ap.queue,next:null},null===fp?dp.memoizedState=fp=t:fp=fp.next=t}return fp}function wp(t,e){return"function"==typeof e?e(t):e}function xp(t){var e=bp(),n=e.queue;if(null===n)throw Error(Mu(311));n.lastRenderedReducer=t;var r=Ap,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,u=i;do{var l=u.expirationTime;if(l<hp){var c={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,l>dp.expirationTime&&(dp.expirationTime=l,Dv(l))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),Pv(l,u.suspenseConfig),r=u.eagerReducer===t?u.eagerState:t(r,u.action);u=u.next}while(null!==u&&u!==i);null===s?o=r:s.next=a,sA(r,e.memoizedState)||(tg=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=s,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function _p(t){var e=bp(),n=e.queue;if(null===n)throw Error(Mu(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);sA(o,e.memoizedState)||(tg=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Tp(t){var e=yp();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:wp,lastRenderedState:t}).dispatch=Up.bind(null,dp,t),[e.memoizedState,t]}function Ep(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=dp.updateQueue)?(e={lastEffect:null},dp.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Sp(){return bp().memoizedState}function Mp(t,e,n,r){var i=yp();dp.effectTag|=t,i.memoizedState=Ep(1|e,n,void 0,void 0===r?null:r)}function Cp(t,e,n,r){var i=bp();r=void 0===r?null:r;var o=void 0;if(null!==Ap){var a=Ap.memoizedState;if(o=a.destroy,null!==r&&vp(r,a.deps))return void Ep(e,n,o,r)}dp.effectTag|=t,i.memoizedState=Ep(1|e,n,o,r)}function Ip(t,e){return Mp(516,4,t,e)}function Np(t,e){return Cp(516,4,t,e)}function Bp(t,e){return Cp(4,2,t,e)}function kp(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Pp(t,e,n){return n=null!=n?n.concat([t]):null,Cp(4,2,kp.bind(null,e,t),n)}function Dp(){}function Lp(t,e){return yp().memoizedState=[t,void 0===e?null:e],t}function Op(t,e){var n=bp();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&vp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rp(t,e){var n=bp();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&vp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Fp(t,e,n){var r=hf();Af(98>r?98:r,(function(){t(!0)})),Af(97<r?97:r,(function(){var r=cp.suspense;cp.suspense=void 0===e?null:e;try{t(!1),n()}finally{cp.suspense=r}}))}function Up(t,e,n){var r=bv(),i=Rf.suspense;i={expirationTime:r=wv(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===dp||null!==o&&o===dp)pp=!0,i.expirationTime=hp,dp.expirationTime=hp;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,sA(s,a))return}catch(t){}xv(t,r)}}var jp={readContext:Cf,useCallback:gp,useContext:gp,useEffect:gp,useImperativeHandle:gp,useLayoutEffect:gp,useMemo:gp,useReducer:gp,useRef:gp,useState:gp,useDebugValue:gp,useResponder:gp,useDeferredValue:gp,useTransition:gp},zp={readContext:Cf,useCallback:Lp,useContext:Cf,useEffect:Ip,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Mp(4,2,kp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mp(4,2,t,e)},useMemo:function(t,e){var n=yp();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yp();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Up.bind(null,dp,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},yp().memoizedState=t},useState:Tp,useDebugValue:Dp,useResponder:up,useDeferredValue:function(t,e){var n=Tp(t),r=n[0],i=n[1];return Ip((function(){var n=cp.suspense;cp.suspense=void 0===e?null:e;try{i(t)}finally{cp.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Tp(!1),n=e[0];return e=e[1],[Lp(Fp.bind(null,e,t),[e,t]),n]}},Hp={readContext:Cf,useCallback:Op,useContext:Cf,useEffect:Np,useImperativeHandle:Pp,useLayoutEffect:Bp,useMemo:Rp,useReducer:xp,useRef:Sp,useState:function(){return xp(wp)},useDebugValue:Dp,useResponder:up,useDeferredValue:function(t,e){var n=xp(wp),r=n[0],i=n[1];return Np((function(){var n=cp.suspense;cp.suspense=void 0===e?null:e;try{i(t)}finally{cp.suspense=n}}),[t,e]),r},useTransition:function(t){var e=xp(wp),n=e[0];return e=e[1],[Op(Fp.bind(null,e,t),[e,t]),n]}},Qp={readContext:Cf,useCallback:Op,useContext:Cf,useEffect:Np,useImperativeHandle:Pp,useLayoutEffect:Bp,useMemo:Rp,useReducer:_p,useRef:Sp,useState:function(){return _p(wp)},useDebugValue:Dp,useResponder:up,useDeferredValue:function(t,e){var n=_p(wp),r=n[0],i=n[1];return Np((function(){var n=cp.suspense;cp.suspense=void 0===e?null:e;try{i(t)}finally{cp.suspense=n}}),[t,e]),r},useTransition:function(t){var e=_p(wp),n=e[0];return e=e[1],[Op(Fp.bind(null,e,t),[e,t]),n]}},Gp=null,Vp=null,Wp=!1;function Yp(t,e){var n=Jv(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Xp(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function qp(t){if(Wp){var e=Vp;if(e){var n=e;if(!Xp(t,e)){if(!(e=Vh(n.nextSibling))||!Xp(t,e))return t.effectTag=-1025&t.effectTag|2,Wp=!1,void(Gp=t);Yp(Gp,n)}Gp=t,Vp=Vh(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Wp=!1,Gp=t}}function Kp(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Gp=t}function Zp(t){if(t!==Gp)return!1;if(!Wp)return Kp(t),Wp=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Hh(e,t.memoizedProps))for(e=Vp;e;)Yp(t,e),e=Vh(e.nextSibling);if(Kp(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(Mu(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Vp=Vh(t.nextSibling);break t}e--}else"$"!==n&&n!==Fh&&n!==Rh||e++}t=t.nextSibling}Vp=null}}else Vp=Gp?Vh(t.stateNode.nextSibling):null;return!0}function Jp(){Vp=Gp=null,Wp=!1}var $p=ml.ReactCurrentOwner,tg=!1;function eg(t,e,n,r){e.child=null===t?Kf(e,null,n,r):qf(e,t.child,n,r)}function ng(t,e,n,r,i){n=n.render;var o=e.ref;return Mf(e,i),r=mp(t,e,n,r,o,i),null===t||tg?(e.effectTag|=1,eg(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),mg(t,e,i))}function rg(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!=typeof a||$v(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=em(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,ig(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:lA)(i,r)&&t.ref===e.ref)?mg(t,e,o):(e.effectTag|=1,(t=tm(a,r)).ref=e.ref,t.return=e,e.child=t)}function ig(t,e,n,r,i,o){return null!==t&&lA(t.memoizedProps,r)&&t.ref===e.ref&&(tg=!1,i<o)?(e.expirationTime=t.expirationTime,mg(t,e,o)):ag(t,e,n,r,o)}function og(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function ag(t,e,n,r,i){var o=UA(n)?RA:LA.current;return o=FA(e,o),Mf(e,i),n=mp(t,e,n,r,o,i),null===t||tg?(e.effectTag|=1,eg(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),mg(t,e,i))}function sg(t,e,n,r,i){if(UA(n)){var o=!0;QA(e)}else o=!1;if(Mf(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Hf(e,n,r),Gf(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==w(l)&&null!==l?l=Cf(l):l=FA(e,l=UA(n)?RA:LA.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Qf(e,a,r,l),If=!1;var d=e.memoizedState;a.state=d,Lf(e,r,a,i),u=e.memoizedState,s!==r||d!==u||OA.current||If?("function"==typeof c&&(Uf(e,n,c,r),u=e.memoizedState),(s=If||zf(e,n,s,r,d,u,l))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,Bf(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:yf(e.type,s),u=a.context,"object"==w(l=n.contextType)&&null!==l?l=Cf(l):l=FA(e,l=UA(n)?RA:LA.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Qf(e,a,r,l),If=!1,u=e.memoizedState,a.state=u,Lf(e,r,a,i),d=e.memoizedState,s!==r||u!==d||OA.current||If?("function"==typeof c&&(Uf(e,n,c,r),d=e.memoizedState),(c=If||zf(e,n,s,r,u,d,l))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,l)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return ug(t,e,n,r,o,i)}function ug(t,e,n,r,i,o){og(t,e);var a=0!=(64&e.effectTag);if(!r&&!a)return i&&GA(e,n,!1),mg(t,e,o);r=e.stateNode,$p.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=qf(e,t.child,null,o),e.child=qf(e,null,s,o)):eg(t,e,s,o),e.memoizedState=r.state,i&&GA(e,n,!0),e.child}function lg(t){var e=t.stateNode;e.pendingContext?zA(0,e.pendingContext,e.pendingContext!==e.context):e.context&&zA(0,e.context,!1),np(t,e.containerInfo)}var cg,hg,dg,Ag={dehydrated:null,retryTime:0};function fg(t,e,n){var r,i=e.mode,o=e.pendingProps,a=ap.current,s=!1;if((r=0!=(64&e.effectTag))||(r=0!=(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),PA(ap,1&a),null===t){if(void 0!==o.fallback&&qp(e),s){if(s=o.fallback,(o=nm(null,i,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=nm(s,i,n,null)).return=e,o.sibling=n,e.memoizedState=Ag,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Kf(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(o=o.fallback,(n=tm(t,t.pendingProps)).return=e,0==(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=tm(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Ag,e.child=n,i}return n=qf(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=nm(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=nm(s,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Ag,e.child=o,n}return e.memoizedState=null,e.child=qf(e,t,o.children,n)}function pg(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),Sf(t.return,e)}function gg(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function vg(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(eg(t,e,r.children,n),0!=(2&(r=ap.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&pg(t,n);else if(19===t.tag)pg(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(PA(ap,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===sp(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gg(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===sp(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gg(e,!0,n,null,o,e.lastEffect);break;case"together":gg(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function mg(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&Dv(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(Mu(153));if(null!==e.child){for(n=tm(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=tm(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function yg(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bg(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return UA(e.type)&&jA(),null;case 3:return rp(),kA(OA),kA(LA),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Zp(e)||(e.effectTag|=4),null;case 5:op(e),n=ep(tp.current);var i=e.type;if(null!==t&&null!=e.stateNode)hg(t,e,i,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(Mu(166));return null}if(t=ep(Jf.current),Zp(e)){r=e.stateNode,i=e.type;var o=e.memoizedProps;switch(r[Xh]=e,r[qh]=o,i){case"iframe":case"object":case"embed":ph("load",r);break;case"video":case"audio":for(t=0;t<mc.length;t++)ph(mc[t],r);break;case"source":ph("error",r);break;case"img":case"image":case"link":ph("error",r),ph("load",r);break;case"form":ph("reset",r),ph("submit",r);break;case"details":ph("toggle",r);break;case"input":Vl(r,o),ph("invalid",r),Ih(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ph("invalid",r),Ih(n,"onChange");break;case"textarea":$l(r,o),ph("invalid",r),Ih(n,"onChange")}for(var a in Sh(i,o),t=null,o)if(o.hasOwnProperty(a)){var s=o[a];"children"===a?"string"==typeof s?r.textContent!==s&&(t=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(t=["children",""+s]):Vu.hasOwnProperty(a)&&null!=s&&Ih(n,a)}switch(i){case"input":Hl(r),Xl(r,o,!0);break;case"textarea":Hl(r),ec(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Nh)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(a=9===n.nodeType?n:n.ownerDocument,t===Ch&&(t=ic(i)),t===Ch?"script"===i?((t=a.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=a.createElement(i,{is:r.is}):(t=a.createElement(i),"select"===i&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,i),t[Xh]=e,t[qh]=r,cg(t,e),e.stateNode=t,a=Mh(i,r),i){case"iframe":case"object":case"embed":ph("load",t),s=r;break;case"video":case"audio":for(s=0;s<mc.length;s++)ph(mc[s],t);s=r;break;case"source":ph("error",t),s=r;break;case"img":case"image":case"link":ph("error",t),ph("load",t),s=r;break;case"form":ph("reset",t),ph("submit",t),s=r;break;case"details":ph("toggle",t),s=r;break;case"input":Vl(t,r),s=Gl(t,r),ph("invalid",t),Ih(n,"onChange");break;case"option":s=Kl(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Eu({},r,{value:void 0}),ph("invalid",t),Ih(n,"onChange");break;case"textarea":$l(t,r),s=Jl(t,r),ph("invalid",t),Ih(n,"onChange");break;default:s=r}Sh(i,s);var u=s;for(o in u)if(u.hasOwnProperty(o)){var l=u[o];"style"===o?Th(t,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&sc(t,l):"children"===o?"string"==typeof l?("textarea"!==i||""!==l)&&uc(t,l):"number"==typeof l&&uc(t,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(Vu.hasOwnProperty(o)?null!=l&&Ih(n,o):null!=l&&yl(t,o,l,a))}switch(i){case"input":Hl(t),Xl(t,r,!1);break;case"textarea":Hl(t),ec(t);break;case"option":null!=r.value&&t.setAttribute("value",""+jl(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?Zl(t,!!r.multiple,n,!1):null!=r.defaultValue&&Zl(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(t.onclick=Nh)}zh(i,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)dg(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(Mu(166));n=ep(tp.current),ep(Jf.current),Zp(e)?(n=e.stateNode,r=e.memoizedProps,n[Xh]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xh]=e,e.stateNode=n)}return null;case 13:return kA(ap),r=e.memoizedState,0!=(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Zp(e):(r=null!==(i=t.memoizedState),n||null===i||null!==(i=t.child.sibling)&&(null!==(o=e.firstEffect)?(e.firstEffect=i,i.nextEffect=o):(e.firstEffect=e.lastEffect=i,i.nextEffect=null),i.effectTag=8)),n&&!r&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&ap.current)?ev===Xg&&(ev=qg):((ev===Xg||ev===qg)&&(ev=Kg),0!==av&&null!==Jg&&(sm(Jg,tv),um(Jg,av)))),(n||r)&&(e.effectTag|=4),null);case 4:return rp(),null;case 10:return Ef(e),null;case 19:if(kA(ap),null===(r=e.memoizedState))return null;if(i=0!=(64&e.effectTag),null===(o=r.rendering)){if(i)yg(r,!1);else if(ev!==Xg||null!==t&&0!=(64&t.effectTag))for(o=e.child;null!==o;){if(null!==(t=sp(o))){for(e.effectTag|=64,yg(r,!1),null!==(i=t.updateQueue)&&(e.updateQueue=i,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)o=n,(i=r).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(t=i.alternate)?(i.childExpirationTime=0,i.expirationTime=o,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=t.childExpirationTime,i.expirationTime=t.expirationTime,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,o=t.dependencies,i.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),r=r.sibling;return PA(ap,1&ap.current|2),e.child}o=o.sibling}}else{if(!i)if(null!==(t=sp(o))){if(e.effectTag|=64,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),yg(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*cf()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,i=!0,yg(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(o.sibling=e.child,e.child=o):(null!==(n=r.last)?n.sibling=o:e.child=o,r.last=o)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=cf()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=cf(),n.sibling=null,e=ap.current,PA(ap,i?1&e|2:1&e),n):null}throw Error(Mu(156,e.tag))}function wg(t){switch(t.tag){case 1:UA(t.type)&&jA();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(rp(),kA(OA),kA(LA),0!=(64&(e=t.effectTag)))throw Error(Mu(285));return t.effectTag=-4097&e|64,t;case 5:return op(t),null;case 13:return kA(ap),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return kA(ap),null;case 4:return rp(),null;case 10:return Ef(t),null;default:return null}}function xg(t,e){return{value:t,source:e,stack:Ul(e)}}cg=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},hg=function(t,e,n,r,i){var o=t.memoizedProps;if(o!==r){var a,s,u=e.stateNode;switch(ep(Jf.current),t=null,n){case"input":o=Gl(u,o),r=Gl(u,r),t=[];break;case"option":o=Kl(u,o),r=Kl(u,r),t=[];break;case"select":o=Eu({},o,{value:void 0}),r=Eu({},r,{value:void 0}),t=[];break;case"textarea":o=Jl(u,o),r=Jl(u,r),t=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(u.onclick=Nh)}for(a in Sh(n,r),n=null,o)if(!r.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(s in u=o[a])u.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Vu.hasOwnProperty(a)?t||(t=[]):(t=t||[]).push(a,null));for(a in r){var l=r[a];if(u=null!=o?o[a]:void 0,r.hasOwnProperty(a)&&l!==u&&(null!=l||null!=u))if("style"===a)if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(t||(t=[]),t.push(a,n)),n=l;else"dangerouslySetInnerHTML"===a?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(t=t||[]).push(a,l)):"children"===a?u===l||"string"!=typeof l&&"number"!=typeof l||(t=t||[]).push(a,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(Vu.hasOwnProperty(a)?(null!=l&&Ih(i,a),t||u===l||(t=[])):(t=t||[]).push(a,l))}n&&(t=t||[]).push("style",n),i=t,(e.updateQueue=i)&&(e.effectTag|=4)}},dg=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var _g="function"==typeof WeakSet?WeakSet:Set;function Tg(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=Ul(n)),null!==n&&Fl(n.type),e=e.value,null!==t&&1===t.tag&&Fl(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function Eg(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Wv(t,e)}else e.current=null}function Sg(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:yf(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return}throw Error(Mu(163))}function Mg(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function Cg(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ig(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void Cg(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:yf(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&Of(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}Of(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&zh(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&ih(n)))))}throw Error(Mu(163))}function Ng(t,e,n){switch("function"==typeof Kv&&Kv(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Af(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(t){Wv(i,t)}}t=t.next}while(t!==r)}))}break;case 1:Eg(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Wv(t,e)}}(e,n);break;case 5:Eg(e);break;case 4:Og(t,e,n)}}function Bg(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&Bg(e)}function kg(t){return 5===t.tag||3===t.tag||4===t.tag}function Pg(t){t:{for(var e=t.return;null!==e;){if(kg(e)){var n=e;break t}e=e.return}throw Error(Mu(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(Mu(161))}16&n.effectTag&&(uc(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||kg(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag||null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?Dg(t,n,e):Lg(t,n,e)}function Dg(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=Nh));else if(4!==r&&null!==(t=t.child))for(Dg(t,e,n),t=t.sibling;null!==t;)Dg(t,e,n),t=t.sibling}function Lg(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(Lg(t,e,n),t=t.sibling;null!==t;)Lg(t,e,n),t=t.sibling}function Og(t,e,n){for(var r,i,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(Mu(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag){t:for(var s=t,u=o,l=n,c=u;;)if(Ng(s,c,l),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break t;for(;null===c.sibling;){if(null===c.return||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}i?(s=r,u=o.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Ng(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Rg(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void Mg(3,e);case 1:case 12:case 17:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[qh]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Wl(n,r),Mh(t,i),e=Mh(t,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?Th(n,s):"dangerouslySetInnerHTML"===a?sc(n,s):"children"===a?uc(n,s):yl(n,a,s,e)}switch(t){case"input":Yl(n,r);break;case"textarea":tc(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Zl(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Zl(n,!!r.multiple,r.defaultValue,!0):Zl(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(Mu(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,ih(e.containerInfo)));case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,uv=cf()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=null!=(i=t.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=_h("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void Fg(e);case 19:return void Fg(e)}throw Error(Mu(163))}function Fg(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new _g),e.forEach((function(e){var r=Xv.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var Ug="function"==typeof WeakMap?WeakMap:Map;function jg(t,e,n){(n=kf(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cv||(cv=!0,hv=r),Tg(t,e)},n}function zg(t,e,n){(n=kf(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return Tg(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===dv?dv=new Set([this]):dv.add(this),Tg(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var Hg,Qg=Math.ceil,Gg=ml.ReactCurrentDispatcher,Vg=ml.ReactCurrentOwner,Wg=16,Yg=32,Xg=0,qg=3,Kg=4,Zg=0,Jg=null,$g=null,tv=0,ev=Xg,nv=null,rv=1073741823,iv=1073741823,ov=null,av=0,sv=!1,uv=0,lv=null,cv=!1,hv=null,dv=null,Av=!1,fv=null,pv=90,gv=null,vv=0,mv=null,yv=0;function bv(){return 0!=(48&Zg)?1073741821-(cf()/10|0):0!==yv?yv:yv=1073741821-(cf()/10|0)}function wv(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=hf();if(0==(4&e))return 99===r?1073741823:1073741822;if(0!=(Zg&Wg))return tv;if(null!==n)t=mf(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=mf(t,150,100);break;case 97:case 96:t=mf(t,5e3,250);break;case 95:t=2;break;default:throw Error(Mu(326))}return null!==Jg&&t===tv&&--t,t}function xv(t,e){if(50<vv)throw vv=0,mv=null,Error(Mu(185));if(null!==(t=_v(t,e))){var n=hf();1073741823===e?0!=(8&Zg)&&0==(48&Zg)?Mv(t):(Ev(t),0===Zg&&gf()):Ev(t),0==(4&Zg)||98!==n&&99!==n||(null===gv?gv=new Map([[t,e]]):(void 0===(n=gv.get(t))||n>e)&&gv.set(t,e))}}function _v(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Jg===i&&(Dv(e),ev===Kg&&sm(i,tv)),um(i,e)),i}function Tv(t){var e=t.lastExpiredTime;if(0!==e||!am(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Ev(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=pf(Mv.bind(null,t));else{var e=Tv(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=bv();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==nf&&YA(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?pf(Mv.bind(null,t)):ff(r,Sv.bind(null,t),{timeout:10*(1073741821-e)-cf()}),t.callbackNode=e}}}function Sv(t,e){if(yv=0,e)return lm(t,e=bv()),Ev(t),null;var n=Tv(t);if(0!==n){if(e=t.callbackNode,0!=(48&Zg))throw Error(Mu(327));if(Qv(),t===Jg&&n===tv||Nv(t,n),null!==$g){var r=Zg;Zg|=Wg;for(var i=kv();;)try{Ov();break}catch(e){Bv(t,e)}if(Tf(),Zg=r,Gg.current=i,1===ev)throw e=nv,Nv(t,n),sm(t,n),Ev(t),e;if(null===$g)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=ev,Jg=null,r){case Xg:case 1:throw Error(Mu(345));case 2:lm(t,2<n?2:n);break;case qg:if(sm(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Uv(i)),1073741823===rv&&10<(i=uv+500-cf())){if(sv){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,Nv(t,n);break}}if(0!==(o=Tv(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=Qh(jv.bind(null,t),i);break}jv(t);break;case Kg:if(sm(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Uv(i)),sv&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,Nv(t,n);break}if(0!==(i=Tv(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==iv?r=10*(1073741821-iv)-cf():1073741823===rv?r=0:(r=10*(1073741821-rv)-5e3,0>(r=(i=cf())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Qg(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=Qh(jv.bind(null,t),r);break}jv(t);break;case 5:if(1073741823!==rv&&null!==ov){o=rv;var a=ov;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=cf()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){sm(t,n),t.timeoutHandle=Qh(jv.bind(null,t),r);break}}jv(t);break;default:throw Error(Mu(329))}if(Ev(t),t.callbackNode===e)return Sv.bind(null,t)}}return null}function Mv(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!=(48&Zg))throw Error(Mu(327));if(Qv(),t===Jg&&e===tv||Nv(t,e),null!==$g){var n=Zg;Zg|=Wg;for(var r=kv();;)try{Lv();break}catch(e){Bv(t,e)}if(Tf(),Zg=n,Gg.current=r,1===ev)throw n=nv,Nv(t,e),sm(t,e),Ev(t),n;if(null!==$g)throw Error(Mu(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Jg=null,jv(t),Ev(t)}return null}function Cv(t,e){var n=Zg;Zg|=1;try{return t(e)}finally{0===(Zg=n)&&gf()}}function Iv(t,e){var n=Zg;Zg&=-2,Zg|=8;try{return t(e)}finally{0===(Zg=n)&&gf()}}function Nv(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Gh(n)),null!==$g)for(n=$g.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&jA();break;case 3:rp(),kA(OA),kA(LA);break;case 5:op(r);break;case 4:rp();break;case 13:case 19:kA(ap);break;case 10:Ef(r)}n=n.return}Jg=t,$g=tm(t.current,null),tv=e,ev=Xg,nv=null,iv=rv=1073741823,ov=null,av=0,sv=!1}function Bv(t,e){for(;;){try{if(Tf(),lp.current=jp,pp)for(var n=dp.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(hp=0,fp=Ap=dp=null,pp=!1,null===$g||null===$g.return)return ev=1,nv=e,$g=null;t:{var i=t,o=$g.return,a=$g,s=e;if(e=tv,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==w(s)&&"function"==typeof s.then){var u=s;if(0==(2&a.mode)){var l=a.alternate;l?(a.updateQueue=l.updateQueue,a.memoizedState=l.memoizedState,a.expirationTime=l.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!=(1&ap.current),h=o;do{var d;if(d=13===h.tag){var A=h.memoizedState;if(null!==A)d=null!==A.dehydrated;else{var f=h.memoizedProps;d=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!c)}}if(d){var p=h.updateQueue;if(null===p){var g=new Set;g.add(u),h.updateQueue=g}else p.add(u);if(0==(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=kf(1073741823,null);v.tag=2,Pf(a,v)}a.expirationTime=1073741823;break t}s=void 0,a=e;var m=i.pingCache;if(null===m?(m=i.pingCache=new Ug,s=new Set,m.set(u,s)):void 0===(s=m.get(u))&&(s=new Set,m.set(u,s)),!s.has(a)){s.add(a);var y=Yv.bind(null,i,u,a);u.then(y,y)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);s=Error((Fl(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Ul(a))}5!==ev&&(ev=2),s=xg(s,a),h=o;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=e,Df(h,jg(h,u,e));break t;case 1:u=s;var b=h.type,x=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof b.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===dv||!dv.has(x)))){h.effectTag|=4096,h.expirationTime=e,Df(h,zg(h,u,e));break t}}h=h.return}while(null!==h)}$g=Fv($g)}catch(t){e=t;continue}break}}function kv(){var t=Gg.current;return Gg.current=jp,null===t?jp:t}function Pv(t,e){t<rv&&2<t&&(rv=t),null!==e&&t<iv&&2<t&&(iv=t,ov=e)}function Dv(t){t>av&&(av=t)}function Lv(){for(;null!==$g;)$g=Rv($g)}function Ov(){for(;null!==$g&&!rf();)$g=Rv($g)}function Rv(t){var e=Hg(t.alternate,t,tv);return t.memoizedProps=t.pendingProps,null===e&&(e=Fv(t)),Vg.current=null,e}function Fv(t){$g=t;do{var e=$g.alternate;if(t=$g.return,0==(2048&$g.effectTag)){if(e=bg(e,$g,tv),1===tv||1!==$g.childExpirationTime){for(var n=0,r=$g.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}$g.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=$g.firstEffect),null!==$g.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=$g.firstEffect),t.lastEffect=$g.lastEffect),1<$g.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=$g:t.firstEffect=$g,t.lastEffect=$g))}else{if(null!==(e=wg($g)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=$g.sibling))return e;$g=t}while(null!==$g);return ev===Xg&&(ev=5),null}function Uv(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function jv(t){var e=hf();return Af(99,zv.bind(null,t,e)),null}function zv(t,e){do{Qv()}while(null!==fv);if(0!=(48&Zg))throw Error(Mu(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(Mu(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=Uv(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Jg&&($g=Jg=null,tv=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Zg;Zg|=Yg,Vg.current=null,Uh=fh;var a=Lh();if(Oh(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else t:{var u=(s=(s=a.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var l=u.anchorOffset,c=u.focusNode;u=u.focusOffset;try{s.nodeType,c.nodeType}catch(t){s=null;break t}var h=0,d=-1,A=-1,f=0,p=0,g=a,v=null;e:for(;;){for(var m;g!==s||0!==l&&3!==g.nodeType||(d=h+l),g!==c||0!==u&&3!==g.nodeType||(A=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(m=g.firstChild);)v=g,g=m;for(;;){if(g===a)break e;if(v===s&&++f===l&&(d=h),v===c&&++p===u&&(A=h),null!==(m=g.nextSibling))break;v=(g=v).parentNode}g=m}s=-1===d||-1===A?null:{start:d,end:A}}else s=null}s=s||{start:0,end:0}}else s=null;jh={activeElementDetached:null,focusedElem:a,selectionRange:s},fh=!1,lv=i;do{try{Hv()}catch(t){if(null===lv)throw Error(Mu(330));Wv(lv,t),lv=lv.nextEffect}}while(null!==lv);lv=i;do{try{for(a=t,s=e;null!==lv;){var y=lv.effectTag;if(16&y&&uc(lv.stateNode,""),128&y){var b=lv.alternate;if(null!==b){var w=b.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&y){case 2:Pg(lv),lv.effectTag&=-3;break;case 6:Pg(lv),lv.effectTag&=-3,Rg(lv.alternate,lv);break;case 1024:lv.effectTag&=-1025;break;case 1028:lv.effectTag&=-1025,Rg(lv.alternate,lv);break;case 4:Rg(lv.alternate,lv);break;case 8:Og(a,l=lv,s),Bg(l)}lv=lv.nextEffect}}catch(t){if(null===lv)throw Error(Mu(330));Wv(lv,t),lv=lv.nextEffect}}while(null!==lv);if(w=jh,b=Lh(),y=w.focusedElem,s=w.selectionRange,b!==y&&y&&y.ownerDocument&&Dh(y.ownerDocument.documentElement,y)){for((null!==s&&Oh(y)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in y?(y.selectionStart=b,y.selectionEnd=Math.min(w,y.value.length)):(w=(b=y.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),l=y.textContent.length,a=Math.min(s.start,l),s=void 0===s.end?a:Math.min(s.end,l),!w.extend&&a>s&&(l=s,s=a,a=l),l=Ph(y,a),c=Ph(y,s),l&&c&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==c.node||w.focusOffset!==c.offset)&&((b=b.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),a>s?(w.addRange(b),w.extend(c.node,c.offset)):(b.setEnd(c.node,c.offset),w.addRange(b))))),b=[],w=y);w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<b.length;y++)(w=b[y]).element.scrollLeft=w.left,w.element.scrollTop=w.top}fh=!!Uh,jh=Uh=null,t.current=n,lv=i;do{try{for(y=t;null!==lv;){var x=lv.effectTag;if(36&x&&Ig(y,lv.alternate,lv),128&x){b=void 0;var _=lv.ref;if(null!==_){var T=lv.stateNode;lv.tag,b=T,"function"==typeof _?_(b):_.current=b}}lv=lv.nextEffect}}catch(t){if(null===lv)throw Error(Mu(330));Wv(lv,t),lv=lv.nextEffect}}while(null!==lv);lv=null,of(),Zg=o}else t.current=n;if(Av)Av=!1,fv=t,pv=e;else for(lv=i;null!==lv;)e=lv.nextEffect,lv.nextEffect=null,lv=e;if(0===(e=t.firstPendingTime)&&(dv=null),1073741823===e?t===mv?vv++:(vv=0,mv=t):vv=0,"function"==typeof qv&&qv(n.stateNode,r),Ev(t),cv)throw cv=!1,t=hv,hv=null,t;return 0!=(8&Zg)||gf(),null}function Hv(){for(;null!==lv;){var t=lv.effectTag;0!=(256&t)&&Sg(lv.alternate,lv),0==(512&t)||Av||(Av=!0,ff(97,(function(){return Qv(),null}))),lv=lv.nextEffect}}function Qv(){if(90!==pv){var t=97<pv?97:pv;return pv=90,Af(t,Gv)}}function Gv(){if(null===fv)return!1;var t=fv;if(fv=null,0!=(48&Zg))throw Error(Mu(331));var e=Zg;for(Zg|=Yg,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:Mg(5,n),Cg(5,n)}}catch(e){if(null===t)throw Error(Mu(330));Wv(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return Zg=e,gf(),!0}function Vv(t,e,n){Pf(t,e=jg(t,e=xg(n,e),1073741823)),null!==(t=_v(t,1073741823))&&Ev(t)}function Wv(t,e){if(3===t.tag)Vv(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Vv(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===dv||!dv.has(r))){Pf(n,t=zg(n,t=xg(e,t),1073741823)),null!==(n=_v(n,1073741823))&&Ev(n);break}}n=n.return}}function Yv(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),Jg===t&&tv===n?ev===Kg||ev===qg&&1073741823===rv&&cf()-uv<500?Nv(t,tv):sv=!0:am(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Ev(t)))}function Xv(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=wv(e=bv(),t,null)),null!==(t=_v(t,e))&&Ev(t)}Hg=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||OA.current)tg=!0;else{if(r<n){switch(tg=!1,e.tag){case 3:lg(e),Jp();break;case 5:if(ip(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:UA(e.type)&&QA(e);break;case 4:np(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,PA(bf,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?fg(t,e,n):(PA(ap,1&ap.current),null!==(e=mg(t,e,n))?e.sibling:null);PA(ap,1&ap.current);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return vg(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),PA(ap,ap.current),!r)return null}return mg(t,e,n)}tg=!1}}else tg=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=FA(e,LA.current),Mf(e,n),i=mp(null,e,r,t,i,n),e.effectTag|=1,"object"==w(i)&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,UA(r)){var o=!0;QA(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Nf(e);var a=r.getDerivedStateFromProps;"function"==typeof a&&Uf(e,r,a,t),i.updater=jf,e.stateNode=i,i._reactInternalFiber=e,Gf(e,r,t,n),e=ug(null,e,r,!0,o,n)}else e.tag=0,eg(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"==typeof t)return $v(t)?1:0;if(null!=t){if((t=t.$$typeof)===Nl)return 11;if(t===Pl)return 14}return 2}(i),t=yf(i,t),o){case 0:e=ag(null,e,i,t,n);break t;case 1:e=sg(null,e,i,t,n);break t;case 11:e=ng(null,e,i,t,n);break t;case 14:e=rg(null,e,i,yf(i.type,t),r,n);break t}throw Error(Mu(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,ag(t,e,r,i=e.elementType===r?i:yf(r,i),n);case 1:return r=e.type,i=e.pendingProps,sg(t,e,r,i=e.elementType===r?i:yf(r,i),n);case 3:if(lg(e),r=e.updateQueue,null===t||null===r)throw Error(Mu(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,Bf(t,e),Lf(e,r,null,n),(r=e.memoizedState.element)===i)Jp(),e=mg(t,e,n);else{if((i=e.stateNode.hydrate)&&(Vp=Vh(e.stateNode.containerInfo.firstChild),Gp=e,i=Wp=!0),i)for(n=Kf(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else eg(t,e,r,n),Jp();e=e.child}return e;case 5:return ip(e),null===t&&qp(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,Hh(r,i)?a=null:null!==o&&Hh(r,o)&&(e.effectTag|=16),og(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(eg(t,e,a,n),e=e.child),e;case 6:return null===t&&qp(e),null;case 13:return fg(t,e,n);case 4:return np(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=qf(e,null,r,n):eg(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ng(t,e,r,i=e.elementType===r?i:yf(r,i),n);case 7:return eg(t,e,e.pendingProps,n),e.child;case 8:case 12:return eg(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value;var s=e.type._context;if(PA(bf,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=sA(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!OA.current){e=mg(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===s.tag&&((l=kf(n,null)).tag=2,Pf(s,l)),s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n),Sf(s.return,n),u.expirationTime<n&&(u.expirationTime=n);break}l=l.next}}else a=10===s.tag&&s.type===e.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}eg(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,Mf(e,n),r=r(i=Cf(i,o.unstable_observedBits)),e.effectTag|=1,eg(t,e,r,n),e.child;case 14:return o=yf(i=e.type,e.pendingProps),rg(t,e,i,o=yf(i.type,o),r,n);case 15:return ig(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yf(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,UA(r)?(t=!0,QA(e)):t=!1,Mf(e,n),Hf(e,r,i),Gf(e,r,i,n),ug(null,e,r,!0,t,n);case 19:return vg(t,e,n)}throw Error(Mu(156,e.tag))};var qv=null,Kv=null;function Zv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Jv(t,e,n,r){return new Zv(t,e,n,r)}function $v(t){return!(!(t=t.prototype)||!t.isReactComponent)}function tm(t,e){var n=t.alternate;return null===n?((n=Jv(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function em(t,e,n,r,i,o){var a=2;if(r=t,"function"==typeof t)$v(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case Tl:return nm(n.children,i,o,e);case Il:a=8,i|=7;break;case El:a=8,i|=1;break;case Sl:return(t=Jv(12,n,e,8|i)).elementType=Sl,t.type=Sl,t.expirationTime=o,t;case Bl:return(t=Jv(13,n,e,i)).type=Bl,t.elementType=Bl,t.expirationTime=o,t;case kl:return(t=Jv(19,n,e,i)).elementType=kl,t.expirationTime=o,t;default:if("object"==w(t)&&null!==t)switch(t.$$typeof){case Ml:a=10;break t;case Cl:a=9;break t;case Nl:a=11;break t;case Pl:a=14;break t;case Dl:a=16,r=null;break t;case Ll:a=22;break t}throw Error(Mu(130,null==t?t:w(t),""))}return(e=Jv(a,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function nm(t,e,n,r){return(t=Jv(7,t,r,e)).expirationTime=n,t}function rm(t,e,n){return(t=Jv(6,t,null,e)).expirationTime=n,t}function im(t,e,n){return(e=Jv(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function om(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function am(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function sm(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function um(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function lm(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function cm(t,e,n,r){var i=e.current,o=bv(),a=Rf.suspense;o=wv(o,i,a);t:if(n){e:{if(wc(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(Mu(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(UA(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(null!==s);throw Error(Mu(171))}if(1===n.tag){var u=n.type;if(UA(u)){n=HA(n,u,s);break t}}n=s}else n=DA;return null===e.context?e.context=n:e.pendingContext=n,(e=kf(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),Pf(i,e),xv(i,o),o}function hm(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function dm(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Am(t,e){dm(t,e),(t=t.alternate)&&dm(t,e)}function fm(t,e,n){var r=new om(t,e,n=null!=n&&!0===n.hydrate),i=Jv(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,Nf(i),t[Kh]=r.current,n&&0!==e&&function(t,e){var n=bc(e);Xc.forEach((function(t){Oc(t,e,n)})),qc.forEach((function(t){Oc(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function pm(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function gm(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var t=hm(a);s.call(t)}}cm(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new fm(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var t=hm(a);u.call(t)}}Iv((function(){cm(e,a,t,i)}))}return hm(a)}function vm(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_l,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function mm(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!pm(e))throw Error(Mu(200));return vm(t,e,null,n)}fm.prototype.render=function(t){cm(t,this._internalRoot,null,null)},fm.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;cm(null,t,null,(function(){e[Kh]=null}))},Rc=function(t){if(13===t.tag){var e=mf(bv(),150,100);xv(t,e),Am(t,e)}},Fc=function(t){13===t.tag&&(xv(t,3),Am(t,3))},Uc=function(t){if(13===t.tag){var e=bv();xv(t,e=wv(e,t,null)),Am(t,e)}},qu=function(t,e,n){switch(e){case"input":if(Yl(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=td(r);if(!i)throw Error(Mu(90));Ql(r),Yl(r,i)}}}break;case"textarea":tc(t,n);break;case"select":null!=(e=n.value)&&Zl(t,!!n.multiple,e,!1)}},el=Cv,nl=function(t,e,n,r,i){var o=Zg;Zg|=4;try{return Af(98,t.bind(null,e,n,r,i))}finally{0===(Zg=o)&&gf()}},rl=function(){0==(49&Zg)&&(function(){if(null!==gv){var t=gv;gv=null,t.forEach((function(t,e){lm(e,t),Ev(e)})),gf()}}(),Qv())},il=function(t,e){var n=Zg;Zg|=2;try{return t(e)}finally{0===(Zg=n)&&gf()}};var ym={Events:[Jh,$h,td,Yu,Gu,sd,function(t){Sc(t,ad)},$u,tl,yh,Ic,Qv,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);qv=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},Kv=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}})(Eu({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ml.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Tc(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Zh,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),wu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ym,wu.createPortal=mm,wu.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e)throw"function"==typeof t.render?Error(Mu(188)):Error(Mu(268,Object.keys(t)));return t=null===(t=Tc(e))?null:t.stateNode},wu.flushSync=function(t,e){if(0!=(48&Zg))throw Error(Mu(187));var n=Zg;Zg|=1;try{return Af(99,t.bind(null,e))}finally{Zg=n,gf()}},wu.hydrate=function(t,e,n){if(!pm(e))throw Error(Mu(200));return gm(null,t,e,!0,n)},wu.render=function(t,e,n){if(!pm(e))throw Error(Mu(200));return gm(null,t,e,!1,n)},wu.unmountComponentAtNode=function(t){if(!pm(t))throw Error(Mu(40));return!!t._reactRootContainer&&(Iv((function(){gm(null,null,t,!1,(function(){t._reactRootContainer=null,t[Kh]=null}))})),!0)},wu.unstable_batchedUpdates=Cv,wu.unstable_createPortal=function(t,e){return mm(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},wu.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pm(n))throw Error(Mu(200));if(null==t||void 0===t._reactInternalFiber)throw Error(Mu(38));return gm(t,e,n,!1,r)},wu.version="16.14.0",function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),bu.exports=wu;var bm=bu.exports,wm=Object.defineProperty,xm=Object.defineProperties,_m=Object.getOwnPropertyDescriptors,Tm=Object.getOwnPropertySymbols,Em=Object.prototype.hasOwnProperty,Sm=Object.prototype.propertyIsEnumerable,Mm=function(t,e,n){return e in t?wm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Cm=function(t,e){for(var n in e||(e={}))Em.call(e,n)&&Mm(t,n,e[n]);if(Tm){var r,i=_(Tm(e));try{for(i.s();!(r=i.n()).done;){n=r.value;Sm.call(e,n)&&Mm(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t},Im={src:"",currentTime:0,hostTime:0,muted:!1,paused:!0,volume:1},Nm={currentTimeMaxError:1,syncInterval:1e3,retryInterval:15e3,verbose:!1,log:console.log.bind(console)},Bm=Nm;function km(t,e){if(t.paused)return t.currentTime;var n,r=(n=e).player?n.player.beginTimestamp+n.player.progressTime:n.room?n.room.calibrationTimestamp:void 0;return r?t.currentTime+(r-t.hostTime)/1e3:t.currentTime}var Pm=navigator.userAgent.includes("Safari"),Dm=[".aac",".mid",".midi",".mp3",".ogg",".oga",".wav",".weba"],Lm="object"==(void 0===n.g?"undefined":w(n.g))&&n.g&&n.g.Object===Object&&n.g,Om="object"==("undefined"==typeof self?"undefined":w(self))&&self&&self.Object===Object&&self,Rm=Lm||Om||Function("return this")(),Fm=Rm.Symbol,Um=Object.prototype,jm=Um.hasOwnProperty,zm=Um.toString,Hm=Fm?Fm.toStringTag:void 0,Qm=Object.prototype.toString,Gm=Fm?Fm.toStringTag:void 0;var Vm=/\s/,Wm=/^\s+/;function Ym(t){var e=w(t);return null!=t&&("object"==e||"function"==e)}var Xm=/^[-+]0x[0-9a-f]+$/i,qm=/^0b[01]+$/i,Km=/^0o[0-7]+$/i,Zm=parseInt;function Jm(t){if("number"==typeof t)return t;if("symbol"==w(e=t)||null!=(n=e)&&"object"==w(n)&&"[object Symbol]"==function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Gm&&Gm in Object(t)?function(t){var e=jm.call(t,Hm),n=t[Hm];try{t[Hm]=void 0;var r=!0}catch(t){}var i=zm.call(t);return r&&(e?t[Hm]=n:delete t[Hm]),i}(t):(e=t,Qm.call(e));var e}(e))return NaN;var e,n;if(Ym(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=Ym(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=function(t){return t&&t.slice(0,function(t){for(var e=t.length;e--&&Vm.test(t.charAt(e)););return e}(t)+1).replace(Wm,"")}(t);var i=qm.test(t);return i||Km.test(t)?Zm(t.slice(2),i?2:8):Xm.test(t)?NaN:+t}var $m=function(){return Rm.Date.now()},ty=Math.max,ey=Math.min;function ny(t,e,n){var r,i,o,a,s,u,l=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function A(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function f(t){return l=t,s=setTimeout(g,e),c?A(t):a}function p(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-l>=o}function g(){var t,n,r=$m();if(p(r))return v(r);s=setTimeout(g,(n=e-((t=r)-u),h?ey(n,o-(t-l)):n))}function v(t){return s=void 0,d&&r?A(t):(r=i=void 0,a)}function m(){var t=$m(),n=p(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return f(u);if(h)return clearTimeout(s),s=setTimeout(g,e),A(u)}return void 0===s&&(s=setTimeout(g,e)),a}return e=Jm(e)||0,Ym(n)&&(c=!!n.leading,o=(h="maxWait"in n)?ty(Jm(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},m.flush=function(){return void 0===s?a:v($m())},m}var ry=function(t){s(n,t);var e=u(n);function n(t){var r;return m(this,n),(r=e.call(this,t)).seeking=!1,r.mobileSeeking=!1,r.track=null,r.hoverTime=null,r.offset=0,r.secondsPrefix="00:00:",r.minutesPrefix="00:",r.seekPause=!1,r.handleTouchSeeking=function(t){for(var e=0,n=0;n<t.changedTouches.length;n++)e=t.changedTouches[n].pageX;e=e<0?0:e,r.mobileSeeking&&r.changeCurrentTimePosition(e)},r.handleSeeking=function(t){r.seeking&&r.changeCurrentTimePosition(t.pageX)},r.setTrackWidthState=function(){r.track&&r.setState({trackWidth:r.track.offsetWidth})},r.handleTrackHover=function(t,e){if(r.track){var n,i=r.props.scale||1;n=t?0:(e.pageX-r.track.getBoundingClientRect().left)/i,r.setState({seekHoverPosition:n,trackWidth:r.track.offsetWidth})}},r.mouseSeekingHandler=function(t){r.setSeeking(!1,t),r.onMouseUp()},r.setSeeking=function(t,e){e.preventDefault(),r.handleSeeking(e),r.seeking=t,r.setState({seekHoverPosition:t?r.state.seekHoverPosition:0})},r.mobileTouchSeekingHandler=function(){r.setMobileSeeking(!1)},r.setMobileSeeking=function(t){r.mobileSeeking=t,r.setState({seekHoverPosition:t?r.state.seekHoverPosition:0})},r.renderBufferProgress=function(){if(r.props.buffered){var t=Cm(Cm({},r.getPositionStyle(r.props.buffered)),r.props.bufferColor&&{backgroundColor:r.props.bufferColor});return sn.createElement("div",{className:"buffered",style:t})}return null},r.renderProgress=function(){var t=Cm(Cm({},r.getPositionStyle(r.props.current)),r.props.sliderColor&&{backgroundColor:r.props.sliderColor});return sn.createElement("div",{className:"connect",style:t})},r.renderHoverProgress=function(){var t=Cm(Cm({},r.getSeekHoverPosition()),r.props.sliderHoverColor&&{backgroundColor:r.props.sliderHoverColor});return sn.createElement("div",{className:"seek-hover",style:t})},r.renderThumb=function(){return sn.createElement("div",{className:r.isThumbActive()?"thumb active":"thumb",style:r.getThumbHandlerPosition()},sn.createElement("div",{style:{backgroundColor:r.props.thumbColor},className:"handler"}))},r.onMouseDown=function(t){var e,n;r.props.pause&&!r.props.paused&&(r.props.pause(),r.seekPause=!0),r.setSeeking(!0,t),null==(n=(e=r.props).onSeekStart)||n.call(e)},r.onMouseUp=function(){var t,e;r.props.play&&r.seekPause&&(r.props.play(),r.seekPause=!1),null==(e=(t=r.props).onSeekEnd)||e.call(t)},r.props.secondsPrefix&&(r.secondsPrefix=r.props.secondsPrefix),r.props.minutesPrefix&&(r.minutesPrefix=r.props.minutesPrefix),r.state={ready:!1,trackWidth:0,seekHoverPosition:0},r}return b(n,[{key:"componentDidMount",value:function(){this.setTrackWidthState(),window.addEventListener("resize",this.setTrackWidthState),window.addEventListener("mousemove",this.handleSeeking),window.addEventListener("mouseup",this.mouseSeekingHandler),window.addEventListener("touchmove",this.handleTouchSeeking),window.addEventListener("touchend",this.mobileTouchSeekingHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setTrackWidthState),window.removeEventListener("mousemove",this.handleSeeking),window.removeEventListener("mouseup",this.mouseSeekingHandler),window.removeEventListener("touchmove",this.handleTouchSeeking),window.removeEventListener("touchend",this.mobileTouchSeekingHandler)}},{key:"changeCurrentTimePosition",value:function(t){if(this.track){var e=this.props.scale||1,n=(t-this.track.getBoundingClientRect().left)/e;n=Math.min(this.state.trackWidth,Math.max(0,n)),this.setState({seekHoverPosition:n});var r=+(n/this.state.trackWidth*this.props.total).toFixed(0);this.props.onChange(r)}}},{key:"getPositionStyle",value:function(t){return{transform:"scaleX(".concat(100*t/this.props.total/100,")")}}},{key:"getThumbHandlerPosition",value:function(){return{transform:"translateX(".concat(this.state.trackWidth/(this.props.total/this.props.current),"px)")}}},{key:"getSeekHoverPosition",value:function(){return{transform:"scaleX(".concat(100*this.state.seekHoverPosition/this.state.trackWidth/100,")")}}},{key:"getHoverTimePosition",value:function(){var t=0;return this.hoverTime&&(t=this.state.seekHoverPosition-this.hoverTime.offsetWidth/2,this.props.limitTimeTooltipBySides&&(t<0?t=0:t+this.hoverTime.offsetWidth>this.state.trackWidth&&(t=this.state.trackWidth-this.hoverTime.offsetWidth))),{transform:"translateX(".concat(t,"px)")}}},{key:"secondsToTime",value:function(t){t=Math.round(t+this.offset);var e=Math.floor(t/3600),n=t%3600,r=Math.floor(n/60),i=Math.ceil(n%60);return{hh:e.toString(),mm:r<10?"0"+r:r.toString(),ss:i<10?"0"+i:i.toString()}}},{key:"getHoverTime",value:function(){var t=100*this.state.seekHoverPosition/this.state.trackWidth,e=Math.floor(+t*(this.props.total/100)),n=this.secondsToTime(e);return this.props.total+this.offset<60?this.secondsPrefix+n.ss:this.props.total+this.offset<3600?this.minutesPrefix+n.mm+":"+n.ss:n.hh+":"+n.mm+":"+n.ss}},{key:"isThumbActive",value:function(){return this.state.seekHoverPosition>0||this.seeking}},{key:"drawHoverTime",value:function(){var t=this;return this.props.hideHoverTime?null:sn.createElement("div",{className:this.isThumbActive()?"hover-time active":"hover-time",style:this.getHoverTimePosition(),ref:function(e){return t.hoverTime=e}},this.getHoverTime())}},{key:"render",value:function(){var t=this;return sn.createElement("div",{className:"seek-slider"},sn.createElement("div",{className:"track",ref:function(e){return t.track=e},onMouseMove:function(e){return t.handleTrackHover(!1,e)},onMouseLeave:function(e){return t.handleTrackHover(!0,e)},onMouseDown:this.onMouseDown,onTouchStart:function(e){t.setMobileSeeking(!0),t.onMouseDown(e)},onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp},sn.createElement("div",{className:"main"},this.renderBufferProgress(),this.renderHoverProgress(),this.renderProgress())),this.drawHoverTime(),this.renderThumb())}}]),n}(fe.exports.Component),iy=function(t){s(n,t);var e=u(n);function n(t){var r;return m(this,n),(r=e.call(this,t)).stageVolume=0,r.updateVolumeTimer=0,r.onVolumeSeeking=!1,r.onClickOperationButton=function(){r.props.paused?r.props.play():r.props.pause()},r.operationButton=function(){return r.props.paused?sn.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCA1LjE0djE0bDExLTdsLTExLTd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="}):sn.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMTloNFY1aC00TTYgMTloNFY1SDZ2MTR6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="})},r.operationVolumeButton=function(){return r.props.volume>.9?sn.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMy4yM3YyLjA2YzIuODkuODYgNSAzLjU0IDUgNi43MXMtMi4xMSA1Ljg0LTUgNi43djIuMDdjNC0uOTEgNy00LjQ5IDctOC43N2MwLTQuMjgtMy03Ljg2LTctOC43N00xNi41IDEyYzAtMS43Ny0xLTMuMjktMi41LTQuMDNWMTZjMS41LS43MSAyLjUtMi4yNCAyLjUtNE0zIDl2Nmg0bDUgNVY0TDcgOUgzeiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo="}):0===r.props.volume?sn.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNyA5djZoNGw1IDVWNGwtNSA1SDd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="}):sn.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNSA5djZoNGw1IDVWNEw5IDltOS41IDNjMC0xLjc3LTEtMy4yOS0yLjUtNC4wM1YxNmMxLjUtLjcxIDIuNS0yLjI0IDIuNS00eiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo="})},r.handleClickVolume=function(){0===r.props.volume?0!==r.stageVolume?r.props.setVolume(r.stageVolume):r.props.setVolume(1):(r.stageVolume=r.props.volume,r.props.setVolume(0))},r.onChange=function(t){r.setState({currentTime:t}),t&&r.changeTime(t)},r.changeTime=ny((function(t){r.props.setCurrentTime(t)}),50),r.onVolumeChange=function(t){r.changeVolume(t),r.setState({seekVolume:t/100})},r.changeVolume=ny((function(t){r.props.setVolume(t/100)}),50),r.onVolumeSeekStart=function(){r.onVolumeSeeking=!0},r.onVolumeSeekEnd=ny((function(){r.onVolumeSeeking=!1}),500),r.onProgressSeekStart=function(){return r.setState({isPlayerSeeking:!0})},r.onProgressSeekEnd=ny((function(){r.setState({isPlayerSeeking:!1})}),500),r.state={isPlayerSeeking:!1,isVolumeHover:!1,seekVolume:1,visible:!0,currentTime:0},r.stageVolume=t.volume,r}return b(n,[{key:"componentDidMount",value:function(){var t=this;this.updateVolumeTimer=setInterval((function(){t.onVolumeSeeking||t.setState({seekVolume:t.props.volume}),t.state.isPlayerSeeking||t.setState({currentTime:t.props.currentTime})}),100)}},{key:"componentWillUnmount",value:function(){this.updateVolumeTimer&&clearInterval(this.updateVolumeTimer)}},{key:"render",value:function(){var t=this,e=this.props,n=e.duration,r=e.currentTime;return sn.createElement("div",{className:"player-controller",style:{opacity:this.props.visible?"1":"0"}},sn.createElement("div",{className:"player-controller-progress"},sn.createElement(ry,{total:n,current:this.state.currentTime,onChange:this.onChange,buffered:this.props.buffered,bufferColor:"rgba(255,255,255,0.3)",hideHoverTime:!0,limitTimeTooltipBySides:!0,onSeekStart:this.onProgressSeekStart,onSeekEnd:this.onProgressSeekEnd,play:this.props.play,pause:this.props.pause,paused:this.props.paused,scale:this.props.scale})),sn.createElement("div",{className:"player-controller-actions"},sn.createElement("div",{className:"player-controller-actions-left"},sn.createElement("div",{onClick:this.onClickOperationButton,className:"player-controller-play"},this.operationButton()),sn.createElement("div",{className:"player-volume-box",onMouseEnter:function(){return t.setState({isVolumeHover:!0})},onMouseLeave:function(){return t.setState({isVolumeHover:!1})}},sn.createElement("div",{onClick:this.handleClickVolume,className:"player-volume"},this.operationVolumeButton()),sn.createElement("div",{className:"player-volume-slider"},sn.createElement(ry,{total:100,current:100*this.state.seekVolume,onChange:this.onVolumeChange,onSeekStart:this.onVolumeSeekStart,onSeekEnd:this.onVolumeSeekEnd,scale:this.props.scale,limitTimeTooltipBySides:!0,hideHoverTime:!0})))),sn.createElement("div",{className:"player-mid-box-time"},oy(Math.floor(r/1e3))," /"," ",oy(Math.floor(n/1e3)))))}}]),n}(fe.exports.Component);function oy(t){var e=t%60,n=(t-e)/60;if(n>=60){var r=n%60;return"".concat(ay((n-r)/60),":").concat(ay(r),":").concat(ay(e))}return"".concat(ay(n),":").concat(ay(e))}function ay(t){return t<=9?"0".concat(t):"".concat(t)}var sy=function(t){s(n,t);var e=u(n);function n(){var t;return m(this,n),(t=e.apply(this,arguments)).putAttributes=function(e){var n=t.props.context,r=n.getAttributes()||{};for(var i in e)r[i]!==e[i]&&n.updateAttributes([i],e[i])},t}return b(n,[{key:"render",value:function(){var t=this.props.context,e=t.getRoom(),n=e?void 0:t.getDisplayer(),r=this.putAttributes;return sn.createElement(uy,{room:e,player:n,context:t,plugin:{putAttributes:r}})}}]),n}(fe.exports.Component),uy=function(t){s(n,t);var e=u(n);function n(t){var r;return m(this,n),(r=e.call(this,t)).alertMask=null,r.container=sn.createRef(),r.controllerHiddenTimer=0,r.syncPlayerTimer=0,r.retryCount=0,r.decreaseRetryTimer=0,r.noSoundSyncCount=0,r.showController=function(){r.setState({controllerVisible:!0}),r.debounceHidingController()},r.play=function(){var t,e=null==(t=r.props.room)?void 0:t.calibrationTimestamp;r.debug(">>> play",{paused:!1,hostTime:e}),r.isEnabled()&&r.props.plugin.putAttributes({paused:!1,hostTime:e})},r.pause=function(){var t=km(r.getAttributes(),r.props);r.debug(">>> pause",{paused:!0,currentTime:t}),r.isEnabled()&&r.props.plugin.putAttributes({paused:!0,currentTime:t})},r.setVolume=function(t){r.debug(">>> volume",{volume:t}),r.isEnabled()&&r.props.plugin.putAttributes({volume:t}),r.isEnabled()&&r.props.plugin.putAttributes({volume:t,muted:0===t})},r.setCurrentTime=function(t){var e,n=null==(e=r.props.room)?void 0:e.calibrationTimestamp;r.debug(">>> seek",{currentTime:t/1e3,hostTime:n}),r.isEnabled()&&r.props.plugin.putAttributes({currentTime:t/1e3,hostTime:n})},r.resetPlayer=function(){var t;null==(t=r.player)||t.autoplay(!1),r.state.NoSound||(r.debug(">>> ended",{paused:!0,currentTime:0}),r.isEnabled()&&r.props.plugin.putAttributes({paused:!0,currentTime:0}))},r.syncPlayerWithAttributes=function(){var t,e=r.getAttributes();if(e){var n=r.player;if(n&&(!r.state.NoSound||(r.noSoundSyncCount+=1)%8==0)){n.paused()!==e.paused&&(r.debug("<<< paused -> %o",e.paused),e.paused?n.pause():null==(t=n.play())||t.catch(r.catchPlayFail)),n.muted()!==e.muted&&(r.debug("<<< muted -> %o",e.muted),n.muted(e.muted)),n.volume()!==e.volume&&(r.debug("<<< volume -> %o",e.volume),n.volume(e.volume));var i=km(e,r.props),o=Bm.currentTimeMaxError;r.state.NoSound&&(o*=3),i>n.duration()?r.resetPlayer():Math.abs(n.currentTime()-i)>o&&(r.debug("<<< currentTime -> %o",i),n.currentTime(i))}}},r.debounceHidingController=function(){r.controllerHiddenTimer&&(clearTimeout(r.controllerHiddenTimer),r.controllerHiddenTimer=0),r.controllerHiddenTimer=setTimeout((function(){r.setState({controllerVisible:!1}),r.controllerHiddenTimer=0}),3e3)},r.decreaseRetryCount=function(){r.player&&r.retryCount>0&&(r.retryCount=r.retryCount-1)},r.catchPlayFail=function(t){var e,n,i=String(t);if(Pm&&i.includes("NotAllowedError")||i.includes("interact"))null==(e=r.player)||e.autoplay("any"),r.setState({NoSound:!0});else{var o=null==(n=r.player)?void 0:n.error();o&&(r.retryCount<=3?(r.initPlayer(),r.retryCount=r.retryCount+1):(r.debug("catch videojs media error",o),r.setState({MediaError:!0}))),r.debug("catch error",t)}},r.fixPlayFail=function(){r.debug("try to fix play state"),r.setState({NoSound:!1});var t=r.getAttributes(),e=t.muted,n=t.volume;r.player&&(r.player.muted(e),r.player.volume(n))},r.initPlayer=v(regeneratorRuntime.mark((function t(){var e,n,i,o,a,s,u,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(e=r.player)||e.dispose(),r.player=void 0,r.debug("creating elements ..."),n=r.getAttributes(),i=n.type,o=n.src,a=n.poster,(s=document.createElement("div")).setAttribute("data-vjs-player",""),(u=document.createElement("video")).className="video-js",a&&(u.poster=a),u.setAttribute("playsInline",""),u.setAttribute("webkit-playsinline",""),l=document.createElement("source"),new URL(o).pathname.endsWith(".m3u8")?l.type="application/x-mpegURL":u.src=o,l.src=o,i&&(l.type=i),u.appendChild(l),s.appendChild(u),r.container.current.appendChild(s),t.next=14,new Promise((function(t){return(window.requestAnimationFrame||window.setTimeout)(t)}));case 14:r.debug("initializing videojs() ..."),c=X.default(u),r.player=c,window.player=c,c.one("loadedmetadata",r.gracefullyUpdate),c.on("ready",(function(){var t;null==(t=Bm.onPlayer)||t.call(Bm,c),c.on("timeupdate",r.gracefullyUpdate),c.on("volumechange",r.gracefullyUpdate),c.on("seeked",r.gracefullyUpdate),c.on("play",r.gracefullyUpdate),c.on("pause",r.gracefullyUpdate),c.on("ended",r.resetPlayer)})),c.on("error",r.catchPlayFail),r.setState({MediaError:!1});case 17:case"end":return t.stop()}}),t)}))),r.gracefullyUpdate=function(){return r.setState({updater:!r.state.updater})},r.setupAlert=function(t){t&&(t.addEventListener("touchstart",r.fixPlayFail),t.addEventListener("click",r.fixPlayFail)),r.alertMask=t},r.setupReload=function(t){t&&(t.addEventListener("touchstart",r.initPlayer),t.addEventListener("click",r.initPlayer))},r.state={NoSound:!1,MediaError:!1,updater:!1,controllerVisible:!1},t.room&&function(t){if(!t.calibrationTimestamp)throw new Error("@netless/app-media-player@0.1.0-alpha.5 requires white-web-sdk@^2.13.8 to work properly.")}(t.room),r}return b(n,[{key:"getAttributes",value:function(){var t=this.props.context.getAttributes();if(t){if(t=Cm(Cm({},Im),t),this.player){var e=km(t,this.props),n=this.player.duration();!t.paused&&e>n&&(r=Cm({},t),t=xm(r,_m({currentTime:0,paused:!0})),this.resetPlayer())}var r;return t}}},{key:"isShowingPoster",value:function(){var t=this.getAttributes();return!(null!=t&&t.src)||Dm.some((function(e){return t.src.endsWith(e)}))}},{key:"render",value:function(){var t,e;if(!this.props.room&&!this.props.player)return null;var n=this.getAttributes();if(!n)return null;var r=1e3*((null==(t=this.player)?void 0:t.duration())||1e3),i=(null==(e=this.player)?void 0:e.bufferedPercent())||0;return sn.createElement("div",{className:this.isEnabled()?"vjs-p":"vjs-p disabled",onMouseEnter:this.showController,onMouseMove:this.showController},sn.createElement("div",{className:"video-js-plugin-player",ref:this.container}),this.isShowingPoster()&&sn.createElement("div",{className:"video-js-plugin-poster"},n.poster&&sn.createElement("img",{src:n.poster,alt:"",draggable:!1})),sn.createElement(iy,{duration:r,volume:n.volume,setVolume:this.setVolume,paused:n.paused,play:this.play,pause:this.pause,currentTime:1e3*km(n,this.props),setCurrentTime:this.setCurrentTime,buffered:r*i,visible:!0}),this.state.NoSound&&sn.createElement("div",{ref:this.setupAlert,className:"videojs-plugin-muted-alert"}),this.state.MediaError&&sn.createElement("div",{className:"videojs-plugin-recovery-mode"},sn.createElement("button",{ref:this.setupReload},"Reload Player")))}},{key:"debug",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Bm.verbose&&(e=Bm).log.apply(e,["[MediaPlayer] ".concat(t)].concat(r))}},{key:"componentDidMount",value:function(){this.debug("app version =","0.1.0-alpha.5"),this.debug("video.js version =",X.default.VERSION),this.initPlayer(),this.props.context.emitter.on("attributesUpdate",this.syncPlayerWithAttributes),this.syncPlayerTimer=setInterval(this.syncPlayerWithAttributes,Bm.syncInterval),this.decreaseRetryTimer=setInterval(this.decreaseRetryCount,Bm.retryInterval)}},{key:"componentWillUnmount",value:function(){var t;this.debug("unmount"),this.props.context.emitter.off("attributesUpdate",this.syncPlayerWithAttributes),null==(t=this.player)||t.dispose(),clearInterval(this.syncPlayerTimer),clearInterval(this.decreaseRetryTimer)}},{key:"isEnabled",value:function(){return this.props.context.getIsWritable()}}]),n}(fe.exports.Component),ly={kind:"MediaPlayer",setup:function(t){var e=t.getAttributes();if(!e||!e.src)return t.emitter.emit("destroy",{error:new Error("[MediaPlayer]: Missing 'attributes'.'src'.")});e=Cm(Cm({},Im),e);var n=t.getBox();n.mountStyles('.vjs-p{display:flex;flex-grow:1}.vjs-p *{pointer-events:auto}.vjs-p.disabled *{pointer-events:none}.vjs-p .video-js-plugin-poster{position:absolute;top:0;left:0;right:0;bottom:0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgQAAACACAYAAAB0vHFxAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAACBKADAAQAAAABAAAAgAAAAACE3oPTAAAKXUlEQVR4Ae3dYW4ktxEG0LW9FwkC2McycokAOUGAXMLwtQwYvomdP4akHUnNnm6SVUU+/xqpe8ji+yiDWz3a/e7L5v/98se//3pL8K9//O+7t19Hv85eX7RP9vnllz2h4/rkd+wz+ir/0cLfjv/9t1/6igABAgQIENhRwIFgx9StmQABAgQIPAg4EDyA+JIAAQIECOwo8HXHRVvzPIHRzwBHjz9PKudMo31Hj59TdZ2qsueXvb5sO0GHIFsi6iFAgAABAgECOgQB6KbsJ5Dtt0L6rWyPkeRXO+fs+WWvL1v6OgTZElEPAQIECBAIENAhCEA3ZT8Bzwj7WUaMJL8I9X5zZs8ve339kugzkg5BH0ejECBAgACB0gIOBKXjUzwBAgQIEOgj4EDQx9EoBAgQIECgtIADQen4FE+AAAECBPoIOBD0cTQKAQIECBAoLeC3DErHp/iWgE8Zt4RyX5df7nxa1Y3Ob/T4rfWtdl2HYLVErYcAAQIECFwQWL5DsPoJcvX1XdjTpd4iv1JxvStWfu9IfCORwLP7U4cgUXhKIUCAAAECUQIOBFHy5iVAgAABAokEHAgShaEUAgQIECAQJXD7MwTPPqOIWujVeUevb/T4V9ftfecE5HfOKetd8suajLoiBHQIItTNSYAAAQIEkgnc7hAkW0/3ckb/e9qjx+8OYsBvBOT3DUe5L+RXLjIFDxTQIRiIa2gCBAgQIFBFoNkh2P0Z2+j1jx4/+0asvv7q9d/dH9XXX73+3fO7u/7W+3fbHzoErR3hOgECBAgQ2ECg2SHwjG2DXRC4xOj9tdufAHpHLb/eonPHk9+xd7TPcXX9r+oQ9Dc1IgECBAgQKCfgQFAuMgUTIECAAIH+Ag4E/U2NSIAAAQIEygk0P0MQvaLsz3hb9bWu840WOJ5ffsc+2a/KL3tC6jsSmL1/dQiO0nCNAAECBAhsItDsEMw+oTzrHl1f61OorevPrvfZ+6N9WvVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDkH0F0X+C45NdoHZ99rf8aguofqRA7/8/6BCMTMvYBAgQIECgiED5DkHvZyhFcjtdJp/TVClvlF/KWE4XJb/TVG68INB7f+kQXAjBWwgQIECAwGoCDgSrJWo9BAgQIEDggoADwQU0byFAgAABAqsJfO39DGI1IOuJFbA/Y/3vzi6/u4Kx7189v7vru/v+2HTfz65D8N7EdwgQIECAwHYCw3/LYLUT1HY7pLFg+TaAkl+WX/KAGuXJrwEUfLlaPjoEwRvG9AQIECBAIIPA8A5B779JKQOaGl4F5PtqUfGV/Cqm9lqz/F4tMr6qlo8OQcZdpCYCBAgQIDBZYHiHoNozlMn+5aeTb+0I5Se/2gK5q6/286VDkHs/qY4AAQIECEwRcCCYwmwSAgQIECCQW8CBIHc+qiNAgAABAlMEhn+GYMoqTEKAAAEC7wSqPcN+twDfmCqgQzCV22QECBAgQCCnQHiHoPoJtlV/63rObfFaVfX6X1dy7VX19Vev/1pqr++qvv7q9b8m4dVHAtny1SH4KCXfI0CAAAECmwmEdwiq/U1Om+2PL/Kpnbj85FdbYO3qs/186hCsvd+sjgABAgQInBJwIDjF5CYCBAgQILC2gAPB2vlaHQECBAgQOCUQ/hmCbJ+yPKW20U3yqR22/ORXW2Dt6qN/Ph/n1yFYe79ZHQECBAgQOCXgQHCKyU0ECBAgQGBtAQeCtfO1OgIECBAgcErAgeAUk5sIECBAgMDaAg4Ea+drdQQIECBA4JTA1+///OGnoztd52N/fC7g58PPx+e748sX+8P+qLQ/dAiO0nKNAAECBAhsIuBAsEnQlkmAAAECBI4EHAiOdFwjQIAAAQKbCDgQbBK0ZRIgQIAAgSMBB4IjHdcIECBAgMAmAuH/lsHP//zvb5tYl1ymfErG9lK0/F4oSr6QX8nYThcdne/j/DoEp6NzIwECBAgQWFfAgWDdbK2MAAECBAicFnAgOE3lRgIECBAgsK5A+GcIfv39Pz++5X18pvH2mtfzBeQz37znjPLrqTl/LPnNN585Y7Z8dQhmpm8uAgQIECCQVCC8Q1C9I9Cqv3U96b54Kat6/S8Lufii+vqr138xtpe3VV9/9fpfgvDiQ4Fs+eoQfBiTbxIgQIAAgb0EwjsEe3FbLQECBOYJZPsT6LyVm+mKgA7BFTXvIUCAAAECiwk4ECwWqOUQIECAAIErAg4EV9S8hwABAgQILCYw/DMEnmEttmMeliPfB5BiX8qvWGAP5crvASTZl9Xy0SFItoGUQ4AAAQIEIgSGdwiy/U1MEcgrzynf2unKT361BXJXX+3nS4cg935SHQECBAgQmCIwvENQ7RnKFPWFJpFv7TDlJ7/aArmrr/bzpUOQez+pjgABAgQITBH4Wu0EM0XFJGkE7M80UVwqRH6X2NK8afX87q7v7vvTBP13IToE2RJRDwECBAgQCBBwIAhANyUBAgQIEMgm4ECQLRH1ECBAgACBAIHhv2Uwek2rPcPp7cWnt+jc8eQ317v3bPLrLWq8twK995cOwVtdrwkQIECAwKYC5TsE1f4mqNn7jM9s8b7zya+v5+zR5DdbfK/5eu8vHYK99o/VEiBAgACBDwWaHYLezyg+rOLGN6Pra53QWtdvLP3UW6N9WkVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDEL2C3ieg3utp1de63rueZ8fLXt+z6+l9f3af7PX1zuPZ8bL7ZK/vWW/39xWYvT90CPrmZzQCBAgQIFBSwIGgZGyKJkCAAAECfQUcCPp6Go0AAQIECJQUaH6GIPpT1iVVFX1aIHp/zX5GdxqmyI3yKxLUJ2XK7xOYv78d7XNcXf+rOgT9TY1IgAABAgTKCTQ7BLv/CWr0+kePn31HVl9/9frv7o/q669e/+753V1/6/277Q8dgtaOcJ0AAQIECGwg0OwQbGBwuMTRz5BGj3+4OBdvC8jvNmHoAPIL5Td5MgEdgmSBKIcAAQIECEQI3O4QrP6MZfT6Ro8fsal2mlN+tdOWX+38VN9XQIegr6fRCBAgQIBASQEHgpKxKZoAAQIECPQVcCDo62k0AgQIECBQUuD2Zwiyr3r1Z4Srry/7/rpbn/zuCsa+X36x/mY/Fnh2f+oQHHu6SoAAAQIEthBYvkOwRYoW+anAsyfkTwdyIURAfiHs3SYdnd/o8btBFBlIh6BIUMokQIAAAQIjBRwIRuoamwABAgQIFBFwICgSlDIJECBAgMBIAQeCkbrGJkCAAAECRQQcCIoEpUwCBAgQIDBSwG8ZjNQ19nABnzIeTjx0AvkN5R0+ePb8stc3PKAnJ9AheBLM7QQIECBAYEUBHYIVU91oTf49+9phy09+IwXsr+d0dQie83I3AQIECBBYUkCHYMlY8yxq9DO80ePnkYypZLTv6PFj1PaZNXt+2evLtlN0CLIloh4CBAgQIBAg4EAQgG5KAgQIECCQTcCBIFsi6iFAgAABAgEC/wdVfx9UuC8B6AAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-position:0 50%;display:flex;align-items:center;justify-content:center}.vjs-p .video-js-plugin-poster img{box-shadow:0 0 5px 10px #0006}.vjs-p .player-controller,.vjs-p .videojs-plugin-muted-alert{pointer-events:auto}.vjs-p.disabled .videojs-plugin-close-icon,.vjs-p.disabled .player-controller{pointer-events:none}.vjs-p .video-js-plugin-player{position:absolute;top:0;left:0;right:0;bottom:0}.video-js,[data-vjs-player]{width:100%;height:100%}.vjs-p .videojs-plugin-muted-alert{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43}.vjs-p .videojs-plugin-muted-alert:before{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43;content:"\\f104";background:rgba(0,0,0,.3);font-family:VideoJS;font-size:2em;display:flex;align-items:center;justify-content:center;color:#fff}.vjs-p .videojs-plugin-recovery-mode{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:44}.vjs-p .videojs-plugin-recovery-mode button{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.vjs-p .seek-slider{position:relative;width:100%}.vjs-p .seek-slider:focus{outline:none}.vjs-p .seek-slider .track{padding:10px 0;cursor:pointer;outline:none}.vjs-p .seek-slider .track:focus{border:0;outline:none}.vjs-p .seek-slider .track .main{width:100%;height:3px;background-color:#ffffff4d;border-radius:30px;position:absolute;left:0;top:8.5px;transition:transform .4s;outline:none}.vjs-p .seek-slider .track .main:focus{border:0;outline:none}.vjs-p .seek-slider .track .main .buffered{position:absolute;background-color:#ffffff4d;width:100%;height:100%;transform:scaleX(.8);z-index:2;transform-origin:0 0}.vjs-p .seek-slider .track .main .seek-hover{position:absolute;background-color:#ffffff80;width:100%;height:100%;z-index:1;transform:scaleX(.6);transform-origin:0 0;opacity:0;transition:opacity .4s}.vjs-p .seek-slider .track .main .connect{position:absolute;background-color:#fff;width:100%;height:100%;z-index:3;left:0;transform:scaleX(.13);transform-origin:0 0}.vjs-p .seek-slider .track.active .main{transform:scaleY(2)}.vjs-p .seek-slider .thumb{pointer-events:none;position:absolute;width:12px;height:12px;left:-6px;top:4px;z-index:4;transform:translate(100px)}.vjs-p .seek-slider .thumb .handler{border-radius:100%;width:100%;height:100%;background-color:#fff;opacity:0;transform:scale(.4);cursor:pointer;transition:transform .2s;pointer-events:none}.vjs-p .seek-slider .thumb.active .handler{opacity:1;transform:scale(1)}.vjs-p .seek-slider .hover-time{position:absolute;background-color:#0000004d;line-height:18px;font-size:16px;color:#ddd;top:-25px;left:0;padding:5px 10px;border-radius:5px;box-shadow:0 0 5px #0000004d;opacity:0;transform:translate(150px);pointer-events:none}.vjs-p .seek-slider .hover-time.active{opacity:1}.vjs-p .seek-slider:hover .track .main .seek-hover{opacity:1}.vjs-p .player-controller{position:absolute;z-index:100;bottom:0px;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:64px;background-image:linear-gradient(0deg,#000,transparent);transition:opacity .2s;color:#fff}.vjs-p .player-menu-box{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:40px}.vjs-p .player-menu-cell{width:100%;text-align:center;font-size:12px;color:#7a7b7c}.vjs-p .player-multiple-play{width:64px;height:120px}.vjs-p .player-controller-actions-left{display:flex;justify-content:center;align-items:center;flex-shrink:0}.vjs-p .player-right-box{font-size:14px;color:#7a7b7c;cursor:pointer;margin-right:12px}.vjs-p .player-controller-actions{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px;padding-right:8px;margin-top:2px}.vjs-p .player-mid-box-time{font-size:9px;display:flex;justify-content:center;align-items:center;color:#fff;flex-shrink:0;margin-right:8px;font-family:monospace}.vjs-p .player-controller-play{display:flex;align-items:center;justify-content:center;cursor:pointer;padding-right:4px}.vjs-p .player-controller-progress{width:calc(100% - 28px);margin-left:14px;display:flex;align-items:center;justify-content:center;margin-top:8px}.vjs-p .player-volume{display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:16px;margin-left:8px}.vjs-p .player-volume-slider{width:60px;margin-right:12px;display:flex;align-items:center}.vjs-p .player-volume-box{display:flex;flex-direction:row}.netless-app-media-player-container{display:flex;position:relative;height:100%}\n');var r=document.createElement("div");r.classList.add("netless-app-media-player-container"),bm.render(sn.createElement(sy,{context:t}),r),n.mountContent(r),t.emitter.on("destroy",(function(){console.log("[MediaPlayer]: destroy"),bm.unmountComponentAtNode(r)}))}},cy={DocsViewer:yu.kind,MediaPlayer:ly.kind},hy=new mo({emitter:st}),dy=function(t){s(g,t);var e,n,r,i,o,a,l,c,h,d,A,f,p=u(g);function g(t){var e;return m(this,g),(e=p.call(this,t)).version="0.4.46",e.dependencies={dependencies:{"@juggle/resize-observer":"^3.3.1","@netless/telebox-insider":"0.2.27",emittery:"^0.9.2",lodash:"^4.17.21","p-retry":"^4.6.1","side-effect-manager":"^0.1.5",uuid:"^7.0.3","video.js":">=7"},peerDependencies:{"white-web-sdk":"^2.16.0"},devDependencies:{"@netless/app-docs-viewer":"^0.2.9","@netless/app-media-player":"0.1.0-beta.5","@rollup/plugin-commonjs":"^20.0.0","@rollup/plugin-node-resolve":"^13.0.4","@rollup/plugin-url":"^6.1.0","@sveltejs/vite-plugin-svelte":"^1.0.0-next.22","@tsconfig/svelte":"^2.0.1","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.4","@types/uuid":"^8.3.1","@typescript-eslint/eslint-plugin":"^4.30.0","@typescript-eslint/parser":"^4.30.0","@vitest/ui":"^0.14.1",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^3.2.0",jsdom:"^19.0.0",less:"^4.1.1",prettier:"^2.3.2","prettier-plugin-svelte":"^2.4.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^3.14.1",svelte:"^3.42.4",typescript:"^4.5.5",vite:"^2.5.3",vitest:"^0.14.1","white-web-sdk":"2.16.33"}},e.emitter=ot,e.viewMode=F.ViewMode.Broadcaster,e.isReplay=F.isPlayer(e.displayer),e.containerSizeRatio=g.containerSizeRatio,g.displayer=t.displayer,window.NETLESS_DEPS={dependencies:{"@juggle/resize-observer":"^3.3.1","@netless/telebox-insider":"0.2.27",emittery:"^0.9.2",lodash:"^4.17.21","p-retry":"^4.6.1","side-effect-manager":"^0.1.5",uuid:"^7.0.3","video.js":">=7"},peerDependencies:{"white-web-sdk":"^2.16.0"},devDependencies:{"@netless/app-docs-viewer":"^0.2.9","@netless/app-media-player":"0.1.0-beta.5","@rollup/plugin-commonjs":"^20.0.0","@rollup/plugin-node-resolve":"^13.0.4","@rollup/plugin-url":"^6.1.0","@sveltejs/vite-plugin-svelte":"^1.0.0-next.22","@tsconfig/svelte":"^2.0.1","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.4","@types/uuid":"^8.3.1","@typescript-eslint/eslint-plugin":"^4.30.0","@typescript-eslint/parser":"^4.30.0","@vitest/ui":"^0.14.1",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^3.2.0",jsdom:"^19.0.0",less:"^4.1.1",prettier:"^2.3.2","prettier-plugin-svelte":"^2.4.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^3.14.1",svelte:"^3.42.4",typescript:"^4.5.5",vite:"^2.5.3",vitest:"^0.14.1","white-web-sdk":"2.16.33"}},e}return b(g,[{key:"bindContainer",value:function(t){var e,n,r,i,o,a;if(F.isRoom(this.displayer)&&this.room.phase!==F.RoomPhase.Connected)throw new zt;if(g.isCreated&&g.container)g.container.firstChild&&t.appendChild(g.container.firstChild);else if(g.params){var s=g.params,u=g.initContainer(this,t,s.chessboard,s.overwriteStyles);this.boxManager&&this.boxManager.destroy();var l=function(t,e,n,r,i){return new Si({safeSetAttributes:function(e){return t.safeSetAttributes(e)},getMainView:function(){return t.mainView},updateAppState:function(){var e,n;return null==(n=t.appManager)?void 0:(e=n.store).updateAppState.apply(e,arguments)},canOperate:function(){return t.canOperate},notifyContainerRectUpdate:function(e){var n;return null==(n=t.appManager)?void 0:n.notifyContainerRectUpdate(e)},cleanFocus:function(){var e;return null==(e=t.appManager)?void 0:e.store.cleanFocus()},setAppFocus:function(e){var n;return null==(n=t.appManager)?void 0:n.store.setAppFocus(e,!0)},callbacks:e,emitter:n,boxEmitter:r},i)}(this,ot,st,ne,{collectorContainer:s.collectorContainer,collectorStyles:s.collectorStyles,prefersColorScheme:s.prefersColorScheme});this.boxManager=l,null==(e=this.appManager)||e.setBoxManager(l),this.bindMainView(u,s.disableCameraTransform),g.wrapper&&(null==(n=this.cursorManager)||n.setupWrapper(g.wrapper))}st.emit("updateManagerRect"),null==(r=this.appManager)||r.refresh(),null==(i=this.appManager)||i.resetMaximized(),null==(o=this.appManager)||o.resetMinimized(),null==(a=this.appManager)||a.displayerWritableListener(!this.room.isWritable),g.container=t}},{key:"bindCollectorContainer",value:function(t){g.isCreated&&this.boxManager?this.boxManager.setCollectorContainer(t):g.params&&(g.params.collectorContainer=t)}},{key:"addApp",value:(f=v(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.appManager){t.next=2;break}return t.abrupt("return",this.appManager.rootDirRemoving?new Promise((function(t,r){st.once("rootDirRemoved").then(v(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,n._addApp(e);case 3:o=i.sent,t(o),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),r(i.t0.message);case 10:case"end":return i.stop()}}),i,null,[[0,7]])}))))})):this._addApp(e));case 2:throw new Lt;case 3:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"_addApp",value:(A=v(regeneratorRuntime.mark((function t(e){var n,r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.appManager){t.next=20;break}if(e.kind&&"string"==typeof e.kind){t.next=3;break}throw new Rt;case 3:return t.next=5,null==(n=yt.appClasses.get(e.kind))?void 0:n();case 5:if(!((o=t.sent)&&(null==(r=o.config)?void 0:r.singleton)&&this.appManager.appProxies.has(e.kind))){t.next=8;break}throw new Pt;case 8:if(void 0!==(a=this.setupScenePath(e,this.appManager))){t.next=13;break}t.t0=void 0,t.next=17;break;case 13:return null!=(i=null==e?void 0:e.options)&&i.scenePath&&(e.options.scenePath=Ct(e.options.scenePath)),t.next=16,this.appManager.addApp(e,Boolean(a));case 16:t.t0=t.sent;case 17:return t.abrupt("return",t.t0);case 20:throw new Lt;case 21:case"end":return t.stop()}}),t,this)}))),function(t){return A.apply(this,arguments)})},{key:"setupScenePath",value:function(t,e){var n=!1;if(t.options){var r=t.options,i=r.scenePath,o=r.scenes;if(i){if(!function(t){return t.startsWith("/")}(i))throw new Ut;for(var a=0,s=Object.keys(this.apps||{});a<s.length;a++){var u=s[a],l=e.store.getAppScenePath(u);if(l&&l===i){if(console.warn("[WindowManager]: ScenePath ".concat(i," Already opened")),this.boxManager){var c=this.boxManager.getTopBox();c&&this.boxManager.setZIndex(u,c.zIndex+1,!1)}return}}}i&&o&&o.length>0&&(this.isDynamicPPT(o)?(n=!0,Et(this.displayer)[i]||St(this.room,i,o)):Et(this.displayer)[i]||St(this.room,i,[{name:o[0].name}])),i&&void 0===o&&St(this.room,i,[{}])}return n}},{key:"setMainViewScenePath",value:(d=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.appManager,!t.t0){t.next=4;break}return t.next=4,this.appManager.setMainViewScenePath(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"setMainViewSceneIndex",value:(h=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.appManager,!t.t0){t.next=4;break}return t.next=4,this.appManager.setMainViewSceneIndex(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"nextPage",value:(c=v(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.appManager){t.next=12;break}if(!((e=this.mainViewSceneIndex+1)>=this.mainViewScenesLength)){t.next=6;break}t.t0=(console.warn("[WindowManager]: current page is the last page"),!1),t.next=9;break;case 6:return t.next=8,this.appManager.setMainViewSceneIndex(e);case 8:t.t0=!0;case 9:return t.abrupt("return",t.t0);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"prevPage",value:(l=v(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.appManager){t.next=12;break}if(!((e=this.mainViewSceneIndex-1)<0)){t.next=6;break}t.t0=(console.warn("[WindowManager]: current page is the first page"),!1),t.next=9;break;case 6:return t.next=8,this.appManager.setMainViewSceneIndex(e);case 8:t.t0=!0;case 9:return t.abrupt("return",t.t0);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"addPage",value:(a=v(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.appManager&&(n=null==e?void 0:e.after,r=null==e?void 0:e.scene,n?(i=this.mainViewSceneIndex+1,this.room.putScenes(rt,[r||{}],i)):this.room.putScenes(rt,[r||{}]));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"removePage",value:(o=v(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.appManager){t.next=5;break}return n=void 0===e?this.pageState.index:e,t.abrupt("return",1===this.pageState.length?(console.warn("[WindowManager]: can not remove the last page"),!1):n<0||n>=this.pageState.length?(console.warn("[WindowManager]: index ".concat(e," out of range")),!1):this.appManager.removeSceneByIndex(n));case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getMainViewScenePath",value:function(){var t;return null==(t=this.appManager)?void 0:t.store.getMainViewScenePath()}},{key:"getMainViewSceneIndex",value:function(){var t;return null==(t=this.appManager)?void 0:t.store.getMainViewSceneIndex()}},{key:"setReadonly",value:function(t){var e;this.readonly=t,null==(e=this.boxManager)||e.setReadonly(t),st.emit("setReadonly",t)}},{key:"switchMainViewToWriter",value:function(){var t;return null==(t=this.appManager)?void 0:t.mainViewProxy.mainViewClickHandler()}},{key:"onAppDestroy",value:function(t,e){!function(t,e){st.once(t).then(e)}("destroy-".concat(t),e)}},{key:"setViewMode",value:function(t){var e,n,r,i;t===F.ViewMode.Broadcaster&&(this.canOperate&&(null==(e=this.appManager)||e.mainViewProxy.setCameraAndSize()),null==(n=this.appManager)||n.mainViewProxy.start()),t===F.ViewMode.Freedom&&(null==(r=this.appManager)||r.mainViewProxy.stop()),this.viewMode=t,null==(i=this.appManager)||i.mainViewProxy.setViewMode(t)}},{key:"setBoxState",value:function(t){if(this.canOperate)switch(t){case"normal":this.setMaximized(!1),this.setMinimized(!1);break;case"maximized":this.setMaximized(!0),this.setMinimized(!1);break;case"minimized":this.setMinimized(!0)}}},{key:"setMaximized",value:function(t){var e;!this.canOperate||null==(e=this.boxManager)||e.setMaximized(t,!1)}},{key:"setMinimized",value:function(t){var e;!this.canOperate||null==(e=this.boxManager)||e.setMinimized(t,!1)}},{key:"queryAll",value:function(){var t;return Array.from((null==(t=this.appManager)?void 0:t.appProxies.values())||[])}},{key:"queryOne",value:function(t){var e;return null==(e=this.appManager)?void 0:e.appProxies.get(t)}},{key:"closeApp",value:(i=v(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null==(n=this.appManager)?void 0:n.closeApp(e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"focusApp",value:function(t){var e,n,r,i=null==(e=this.boxManager)?void 0:e.getBox(t);i&&(null==(n=this.boxManager)||n.focusBox({appId:t},!1),(null==(r=this.boxManager)?void 0:r.teleBoxManager).makeBoxTop(i,!1))}},{key:"moveCamera",value:function(t){var e,n=this,r=R.omit(t,["animationMode"]),i=P({},this.mainView.camera);R.isEqual(P(P({},i),r),i)||(this.mainView.moveCamera(t),null==(e=this.appManager)||e.dispatchInternalEvent(q.MoveCamera,t),setTimeout((function(){var t;null==(t=n.appManager)||t.mainViewProxy.setCameraAndSize()}),500))}},{key:"moveCameraToContain",value:function(t){var e,n=this;this.mainView.moveCameraToContain(t),null==(e=this.appManager)||e.dispatchInternalEvent(q.MoveCameraToContain,t),setTimeout((function(){var t;null==(t=n.appManager)||t.mainViewProxy.setCameraAndSize()}),500)}},{key:"convertToPointInWorld",value:function(t){return this.mainView.convertToPointInWorld(t)}},{key:"setCameraBound",value:function(t){this.mainView.setCameraBound(t)}},{key:"onDestroy",value:function(){this._destroy()}},{key:"destroy",value:function(){this._destroy()}},{key:"_destroy",value:function(){var t,e,n,r;null==(t=this.containerResizeObserver)||t.disconnect(),null==(e=this.appManager)||e.destroy(),null==(n=this.cursorManager)||n.destroy(),g.container=void 0,g.wrapper=void 0,g.isCreated=!1,g.playground&&(null==(r=g.playground.parentNode)||r.removeChild(g.playground)),g.params=void 0,te("Destroyed")}},{key:"bindMainView",value:function(t,e){var n;this.appManager&&(this.appManager.bindMainView(t,Boolean(e)),null==(n=this.cursorManager)||n.setMainViewDivElement(t))}},{key:"safeSetAttributes",value:function(t){this.canOperate&&this.setAttributes(t)}},{key:"safeUpdateAttributes",value:function(t,e){this.canOperate&&this.updateAttributes(t,e)}},{key:"setPrefersColorScheme",value:function(t){var e,n;null==(n=null==(e=this.appManager)?void 0:e.boxManager)||n.setPrefersColorScheme(t)}},{key:"cleanCurrentScene",value:function(){var t;null==(t=this.focusedView)||t.cleanCurrentScene()}},{key:"redo",value:function(){var t;return(null==(t=this.focusedView)?void 0:t.redo())||0}},{key:"undo",value:function(){var t;return(null==(t=this.focusedView)?void 0:t.undo())||0}},{key:"delete",value:function(){var t;null==(t=this.focusedView)||t.delete()}},{key:"copy",value:function(){var t;null==(t=this.focusedView)||t.copy()}},{key:"paste",value:function(){var t;null==(t=this.focusedView)||t.paste()}},{key:"duplicate",value:function(){var t;null==(t=this.focusedView)||t.duplicate()}},{key:"insertText",value:function(t,e,n){var r;return(null==(r=this.focusedView)?void 0:r.insertText(t,e,n))||""}},{key:"insertImage",value:function(t){var e;return null==(e=this.focusedView)?void 0:e.insertImage(t)}},{key:"completeImageUpload",value:function(t,e){var n;return null==(n=this.focusedView)?void 0:n.completeImageUpload(t,e)}},{key:"lockImage",value:function(t,e){var n;return null==(n=this.focusedView)?void 0:n.lockImage(t,e)}},{key:"lockImages",value:function(t){var e;return null==(e=this.focusedView)?void 0:e.lockImages(t)}},{key:"refresh",value:function(){var t;this._refresh(),null==(t=this.appManager)||t.dispatchInternalEvent(q.Refresh)}},{key:"_refresh",value:function(){var t,e,n;null==(t=this.appManager)||t.mainViewProxy.rebind(),g.container&&this.bindContainer(g.container),null==(n=null==(e=this.appManager)?void 0:e.refresher)||n.refresh()}},{key:"setContainerSizeRatio",value:function(t){if(!R.isNumber(t))throw new Error("[WindowManager]: updateContainerSizeRatio error, ratio must be a number. but got ".concat(t));g.containerSizeRatio=t,this.containerSizeRatio=t,st.emit("containerSizeRatioUpdate",t)}},{key:"isDynamicPPT",value:function(t){var e,n,r=null==(n=null==(e=t[0])?void 0:e.ppt)?void 0:n.src;return null==r?void 0:r.startsWith("pptx://")}},{key:"ensureAttributes",value:(r=v(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=R.isNull(this.attributes),!t.t0){t.next=4;break}return t.next=4,Nt(50);case 4:R.isObject(this.attributes)&&(this.attributes[Jt.Apps]||this.safeSetAttributes(x({},Jt.Apps,{})),this.attributes[Jt.Cursors]||this.safeSetAttributes(x({},Jt.Cursors,{})),this.attributes._mainScenePath||this.safeSetAttributes({_mainScenePath:it}),this.attributes._mainSceneIndex||this.safeSetAttributes({_mainSceneIndex:0}),this.attributes[Jt.Registered]||this.safeSetAttributes(x({},Jt.Registered,{})));case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"mainView",get:function(){if(this.appManager)return this.appManager.mainViewProxy.view;throw new Lt}},{key:"camera",get:function(){if(this.appManager)return this.appManager.mainViewProxy.view.camera;throw new Lt}},{key:"cameraState",get:function(){if(this.appManager)return this.appManager.mainViewProxy.cameraState;throw new Lt}},{key:"apps",get:function(){var t;return null==(t=this.appManager)?void 0:t.store.apps()}},{key:"boxState",get:function(){var t;if(this.appManager)return null==(t=this.appManager.boxManager)?void 0:t.boxState;throw new Lt}},{key:"darkMode",get:function(){var t,e;return Boolean(null==(e=null==(t=this.appManager)?void 0:t.boxManager)?void 0:e.darkMode)}},{key:"prefersColorScheme",get:function(){var t;if(this.appManager)return null==(t=this.appManager.boxManager)?void 0:t.prefersColorScheme;throw new Lt}},{key:"focused",get:function(){return this.attributes.focus}},{key:"focusedView",get:function(){var t,e;return(null==(e=null==(t=this.appManager)?void 0:t.focusApp)?void 0:e.view)||this.mainView}},{key:"mainViewSceneIndex",get:function(){var t;return(null==(t=this._pageState)?void 0:t.index)||0}},{key:"mainViewSceneDir",get:function(){var t;if(this.appManager)return null==(t=this.appManager)?void 0:t.getMainViewSceneDir();throw new Lt}},{key:"topApp",get:function(){var t,e;return null==(e=null==(t=this.boxManager)?void 0:t.getTopBox())?void 0:e.id}},{key:"mainViewScenesLength",get:function(){var t;return(null==(t=this._pageState)?void 0:t.length)||0}},{key:"canRedoSteps",get:function(){var t;return(null==(t=this.focusedView)?void 0:t.canRedoSteps)||0}},{key:"canUndoSteps",get:function(){var t;return(null==(t=this.focusedView)?void 0:t.canUndoSteps)||0}},{key:"sceneState",get:function(){if(this.appManager)return this.appManager.sceneState;throw new Lt}},{key:"pageState",get:function(){if(this._pageState)return this._pageState.toObject();throw new Lt}},{key:"canOperate",get:function(){return!!F.isRoom(this.displayer)&&(this.displayer.isWritable&&this.displayer.phase===F.RoomPhase.Connected)}},{key:"room",get:function(){return this.displayer}}],[{key:"mount",value:(n=v(regeneratorRuntime.mark((function t(e){var n,r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.room,g.container=e.container,r=e.containerSizeRatio,i=e.debug,o=e.cursor,g.params=e,g.displayer=e.room,ce(),!F.isRoom(n)){t.next=11;break}if(n.phase===F.RoomPhase.Connected){t.next=7;break}throw new Error("[WindowManager]: Room only Connected can be mount");case 7:return n.phase===F.RoomPhase.Connected&&n.isWritable&&(n.disableSerialization=!1),t.next=10,this.initManager(n);case 10:a=t.sent;case 11:if(!g.isCreated){t.next=13;break}throw new Error("[WindowManager]: Already created cannot be created again");case 13:if(this.debug=Boolean(i),te("Already insert room",a),!F.isRoom(this.displayer)){t.next=18;break}if(a){t.next=16;break}throw new Error("[WindowManager]: init InvisiblePlugin failed");case 16:t.next=20;break;case 18:return t.next=20,W.default(function(){var t=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getInvisiblePlugin(g.kind);case 2:if(a=t.sent){t.next=5;break}throw te("manager is empty. retrying ".concat(e)),new Error;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{retries:10});case 20:if(a){t.next=22;break}throw new Error("[WindowManager]: create manager failed");case 22:return r&&(g.containerSizeRatio=r),t.next=25,a.ensureAttributes();case 25:return a.appManager=new le(a),a._pageState=new vo(a.appManager),a.cursorManager=new go(a.appManager,Boolean(o),e.applianceIcons),r&&(a.containerSizeRatio=r),e.container&&a.bindContainer(e.container),yo(n,a),st.emit("onCreated"),g.isCreated=!0,t.prev=33,t.next=36,ut();case 36:t.next=41;break;case 38:t.prev=38,t.t0=t.catch(33),console.warn("[WindowManager]: indexedDB open failed"),console.log(t.t0);case 41:return t.abrupt("return",a);case 42:case"end":return t.stop()}}),t,this,[[33,38]])}))),function(t){return n.apply(this,arguments)})},{key:"initManager",value:(e=v(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.getInvisiblePlugin(g.kind))||!F.isRoom(e)){t.next=24;break}if(!1!==e.isWritable){t.next=21;break}return t.prev=3,t.next=6,e.setWritable(!0);case 6:t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(3),new Error("[WindowManger]: room must be switched to be writable");case 11:return t.next=13,he(e);case 13:return null==(n=t.sent)||n.ensureAttributes(),t.next=17,Nt(500);case 17:return t.next=19,e.setWritable(!1);case 19:t.next=24;break;case 21:return t.next=23,he(e);case 23:n=t.sent;case 24:return t.abrupt("return",n);case 25:case"end":return t.stop()}}),t,null,[[3,8]])}))),function(t){return e.apply(this,arguments)})},{key:"initContainer",value:function(t,e,n,r){g.container||(g.container=e);var i=function(t){var e=document.createElement("div");e.className="netless-window-manager-playground";var n=document.createElement("div");n.className="netless-window-manager-sizer";var r=document.createElement("div");r.className="netless-window-manager-wrapper";var i=document.createElement("div");return i.className="netless-window-manager-main-view",e.appendChild(n),n.appendChild(r),r.appendChild(i),t.appendChild(e),Ay.wrapper=r,{playground:e,wrapper:r,sizer:n,mainViewElement:i}}(e),o=i.playground,a=i.wrapper,s=i.sizer,u=i.mainViewElement;if(g.playground=o,n&&s.classList.add("netless-window-manager-chess-sizer"),r){var l=document.createElement("style");l.textContent=r,o.appendChild(l)}return t.containerResizeObserver=Ae.create(o,s,a,st),g.wrapper=a,u}},{key:"register",value:function(t){return yt.register(t)}},{key:"unregister",value:function(t){return yt.unregister(t)}},{key:"registered",get:function(){return yt.registered}}]),g}(F.InvisiblePlugin),Ay=dy;Ay.kind="WindowManager",Ay.debug=!1,Ay.containerSizeRatio=9/16,Ay.isCreated=!1,Ay.debug&&function(t){Bm=Cm(Cm({},Nm),t)}({verbose:!0}),Ay.register({kind:yu.kind,src:yu}),Ay.register({kind:ly.kind,src:ly}),e.AppCreateError=Pt,e.AppManagerNotInitError=Lt,e.AppNotRegisterError=Dt,e.BindContainerRoomPhaseInvalidError=zt,e.BoxManagerNotFoundError=jt,e.BoxNotCreatedError=Ft,e.BuiltinApps=cy,e.InvalidScenePath=Ut,e.ParamsInvalidError=Rt,e.WhiteWebSDKInvalidError=Ot,e.WindowManager=Ay,e.calculateNextIndex=ee,e.reconnectRefresher=hy},18373:function(t,e,n){var r=n(49766).Buffer;function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}Object.defineProperty(e,"__esModule",{value:!0});var a=void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},s=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c=!1;function h(){c=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)s[e]=t[e],u[t.charCodeAt(e)]=e;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63}function d(t,e,n){for(var r,i,o=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(s[(i=r)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return o.join("")}function A(t){var e;c||h();for(var n=t.length,r=n%3,i="",o=[],a=16383,u=0,l=n-r;u<l;u+=a)o.push(d(t,u,u+a>l?l:u+a));return 1===r?(e=t[n-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),o.push(i),o.join("")}function f(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,d=n?-1:1,A=t[e+h];for(h+=d,o=A&(1<<-c)-1,A>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(A?-1:1);a+=Math.pow(2,r),o-=l}return(A?-1:1)*a*Math.pow(2,o-r)}function p(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,A=r?0:o-1,f=r?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+A]=255&s,A+=f,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+A]=255&a,A+=f,a/=256,l-=8);t[n+A-f]|=128*p}var g={}.toString,v=Array.isArray||function(t){return"[object Array]"==g.call(t)};function m(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function y(t,e){if(m()<e)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=b.prototype:(null===t&&(t=new b(e)),t.length=e),t}function b(t,e,n){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return _(this,t)}return w(this,t,e,n)}function w(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);b.TYPED_ARRAY_SUPPORT?(t=e).__proto__=b.prototype:t=T(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!b.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|M(e,n),i=(t=y(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(S(e)){var n=0|E(e.length);return 0===(t=y(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?y(t,0):T(t,e);if("Buffer"===e.type&&v(e.data))return T(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function x(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function _(t,e){if(x(e),t=y(t,e<0?0:0|E(e)),!b.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function T(t,e){var n=e.length<0?0:0|E(e.length);t=y(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function E(t){if(t>=m())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m().toString(16)+" bytes");return 0|t}function S(t){return!(null==t||!t._isBuffer)}function M(t,e){if(S(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return tt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return et(t).length;default:if(r)return tt(t).length;e=(""+e).toLowerCase(),r=!0}}function C(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Q(this,e,n);case"utf8":case"utf-8":return U(this,e,n);case"ascii":return z(this,e,n);case"latin1":case"binary":return H(this,e,n);case"base64":return F(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function I(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function N(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=b.from(e,r)),S(e))return 0===e.length?-1:B(t,e,n,r,i);if("number"==typeof e)return e&=255,b.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):B(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function B(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(l(t,o+d)!==l(e,d)){h=!1;break}if(h)return o}return-1}function k(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function P(t,e,n,r){return nt(tt(e,t.length-n),t,n,r)}function D(t,e,n,r){return nt(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function L(t,e,n,r){return D(t,e,n,r)}function O(t,e,n,r){return nt(et(e),t,n,r)}function R(t,e,n,r){return nt(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function F(t,e,n){return 0===e&&n===t.length?A(t):A(t.slice(e,n))}function U(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=j)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=j));return n}(r)}b.TYPED_ARRAY_SUPPORT=void 0===a.TYPED_ARRAY_SUPPORT||a.TYPED_ARRAY_SUPPORT,b.poolSize=8192,b._augment=function(t){return t.__proto__=b.prototype,t},b.from=function(t,e,n){return w(null,t,e,n)},b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array),b.alloc=function(t,e,n){return function(t,e,n,r){return x(e),e<=0?y(t,e):void 0!==n?"string"==typeof r?y(t,e).fill(n,r):y(t,e).fill(n):y(t,e)}(null,t,e,n)},b.allocUnsafe=function(t){return _(null,t)},b.allocUnsafeSlow=function(t){return _(null,t)},b.isBuffer=function(t){return null!=t&&(!!t._isBuffer||rt(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&rt(t.slice(0,0))}(t))},b.compare=function(t,e){if(!S(t)||!S(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},b.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(t,e){if(!v(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return b.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=b.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!S(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},b.byteLength=M,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)I(this,e,e+1);return this},b.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)I(this,e,e+3),I(this,e+1,e+2);return this},b.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)I(this,e,e+7),I(this,e+1,e+6),I(this,e+2,e+5),I(this,e+3,e+4);return this},b.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?U(this,0,t):C.apply(this,arguments)},b.prototype.equals=function(t){if(!S(t))throw new TypeError("Argument must be a Buffer");return this===t||0===b.compare(this,t)},b.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},b.prototype.compare=function(t,e,n,r,i){if(!S(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},b.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},b.prototype.indexOf=function(t,e,n){return N(this,t,e,n,!0)},b.prototype.lastIndexOf=function(t,e,n){return N(this,t,e,n,!1)},b.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return k(this,t,e,n);case"utf8":case"utf-8":return P(this,t,e,n);case"ascii":return D(this,t,e,n);case"latin1":case"binary":return L(this,t,e,n);case"base64":return O(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function z(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function H(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function Q(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=$(t[o]);return i}function G(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function V(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function W(t,e,n,r,i,o){if(!S(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Y(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function X(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function q(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function K(t,e,n,r,i){return i||q(t,0,n,4),p(t,e,n,r,23,4),n+4}function Z(t,e,n,r,i){return i||q(t,0,n,8),p(t,e,n,r,52,8),n+8}b.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),b.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=b.prototype;else{var i=e-t;n=new b(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},b.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||V(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},b.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||V(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},b.prototype.readUInt8=function(t,e){return e||V(t,1,this.length),this[t]},b.prototype.readUInt16LE=function(t,e){return e||V(t,2,this.length),this[t]|this[t+1]<<8},b.prototype.readUInt16BE=function(t,e){return e||V(t,2,this.length),this[t]<<8|this[t+1]},b.prototype.readUInt32LE=function(t,e){return e||V(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},b.prototype.readUInt32BE=function(t,e){return e||V(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},b.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||V(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},b.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||V(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},b.prototype.readInt8=function(t,e){return e||V(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},b.prototype.readInt16LE=function(t,e){e||V(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},b.prototype.readInt16BE=function(t,e){e||V(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},b.prototype.readInt32LE=function(t,e){return e||V(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},b.prototype.readInt32BE=function(t,e){return e||V(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},b.prototype.readFloatLE=function(t,e){return e||V(t,4,this.length),f(this,t,!0,23,4)},b.prototype.readFloatBE=function(t,e){return e||V(t,4,this.length),f(this,t,!1,23,4)},b.prototype.readDoubleLE=function(t,e){return e||V(t,8,this.length),f(this,t,!0,52,8)},b.prototype.readDoubleBE=function(t,e){return e||V(t,8,this.length),f(this,t,!1,52,8)},b.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||W(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},b.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||W(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},b.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,1,255,0),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},b.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Y(this,t,e,!0),e+2},b.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Y(this,t,e,!1),e+2},b.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):X(this,t,e,!0),e+4},b.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):X(this,t,e,!1),e+4},b.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);W(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},b.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);W(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},b.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,1,127,-128),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},b.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Y(this,t,e,!0),e+2},b.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Y(this,t,e,!1),e+2},b.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):X(this,t,e,!0),e+4},b.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||W(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):X(this,t,e,!1),e+4},b.prototype.writeFloatLE=function(t,e,n){return K(this,t,e,!0,n)},b.prototype.writeFloatBE=function(t,e,n){return K(this,t,e,!1,n)},b.prototype.writeDoubleLE=function(t,e,n){return Z(this,t,e,!0,n)},b.prototype.writeDoubleBE=function(t,e,n){return Z(this,t,e,!1,n)},b.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!b.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},b.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!b.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=S(t)?t:tt(new b(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var J=/[^+\/0-9A-Za-z-_]/g;function $(t){return t<16?"0"+t.toString(16):t.toString(16)}function tt(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function et(t){return function(t){var e,n,r,i,o,a;c||h();var s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[s-2]?2:"="===t[s-1]?1:0,a=new l(3*s/4-o),r=o>0?s-4:s;var d=0;for(e=0,n=0;e<r;e+=4,n+=3)i=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],a[d++]=i>>16&255,a[d++]=i>>8&255,a[d++]=255&i;return 2===o?(i=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,a[d++]=255&i):1===o&&(i=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,a[d++]=i>>8&255,a[d++]=255&i),a}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(J,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function nt(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function rt(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var it={};function ot(){}function at(){at.init.call(this)}function st(t){return void 0===t._maxListeners?at.defaultMaxListeners:t._maxListeners}function ut(t,e,n){if(e)t.call(n);else for(var r=t.length,i=gt(t,r),o=0;o<r;++o)i[o].call(n)}function lt(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=gt(t,i),a=0;a<i;++a)o[a].call(n,r)}function ct(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=gt(t,o),s=0;s<o;++s)a[s].call(n,r,i)}function ht(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,s=gt(t,a),u=0;u<a;++u)s[u].call(n,r,i,o)}function dt(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=gt(t,i),a=0;a<i;++a)o[a].apply(n,r)}function At(t,e,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]):(o=t._events=new ot,t._eventsCount=0),a){if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=st(t))&&i>0&&a.length>i){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=o[e]=n,++t._eventsCount;return t}function ft(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function pt(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function gt(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function vt(){throw new Error("setTimeout has not been defined")}function mt(){throw new Error("clearTimeout has not been defined")}ot.prototype=Object.create(null),at.EventEmitter=at,at.usingDomains=!1,at.prototype.domain=void 0,at.prototype._events=void 0,at.prototype._maxListeners=void 0,at.defaultMaxListeners=10,at.init=function(){this.domain=null,at.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ot,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},at.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},at.prototype.getMaxListeners=function(){return st(this)},at.prototype.emit=function(t){var e,n,r,i,o,a,s,u="error"===t;if(a=this._events)u=u&&null==a.error;else if(!u)return!1;if(s=this.domain,u){if(e=arguments[1],!s){if(e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:ut(n,c,this);break;case 2:lt(n,c,this,arguments[1]);break;case 3:ct(n,c,this,arguments[1],arguments[2]);break;case 4:ht(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];dt(n,c,this,i)}return!0},at.prototype.addListener=function(t,e){return At(this,t,e,!1)},at.prototype.on=at.prototype.addListener,at.prototype.prependListener=function(t,e){return At(this,t,e,!0)},at.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,ft(this,t,e)),this},at.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,ft(this,t,e)),this},at.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new ot:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new ot,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,a||e)}return this},at.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new ot,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new ot:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new ot,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},at.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},at.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):pt.call(t,e)},at.prototype.listenerCount=pt,at.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var yt=vt,bt=mt;function wt(t){if(yt===setTimeout)return setTimeout(t,0);if((yt===vt||!yt)&&setTimeout)return yt=setTimeout,setTimeout(t,0);try{return yt(t,0)}catch(e){try{return yt.call(null,t,0)}catch(e){return yt.call(this,t,0)}}}"function"==typeof a.setTimeout&&(yt=setTimeout),"function"==typeof a.clearTimeout&&(bt=clearTimeout);var xt,_t=[],Tt=!1,Et=-1;function St(){Tt&&xt&&(Tt=!1,xt.length?_t=xt.concat(_t):Et=-1,_t.length&&Mt())}function Mt(){if(!Tt){var t=wt(St);Tt=!0;for(var e=_t.length;e;){for(xt=_t,_t=[];++Et<e;)xt&&xt[Et].run();Et=-1,e=_t.length}xt=null,Tt=!1,function(t){if(bt===clearTimeout)return clearTimeout(t);if((bt===mt||!bt)&&clearTimeout)return bt=clearTimeout,clearTimeout(t);try{bt(t)}catch(e){try{return bt.call(null,t)}catch(e){return bt.call(this,t)}}}(t)}}function Ct(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];_t.push(new It(t,e)),1!==_t.length||Tt||wt(Mt)}function It(t,e){this.fun=t,this.array=e}It.prototype.run=function(){this.fun.apply(null,this.array)};function Nt(){}var Bt=Nt,kt=Nt,Pt=Nt,Dt=Nt,Lt=Nt,Ot=Nt,Rt=Nt;var Ft=a.performance||{},Ut=Ft.now||Ft.mozNow||Ft.msNow||Ft.oNow||Ft.webkitNow||function(){return(new Date).getTime()};var jt=new Date;var zt={nextTick:Ct,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Bt,addListener:kt,once:Pt,off:Dt,removeListener:Lt,removeAllListeners:Ot,emit:Rt,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Ut.call(Ft),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-jt)/1e3}},Ht="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Qt=/%[sdj%]/g;function Gt(t){if(!ne(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Xt(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(t).replace(Qt,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),a=r[n];n<i;a=r[++n])ee(a)||!oe(a)?o+=" "+a:o+=" "+Xt(a);return o}function Vt(t,e){if(re(a.process))return function(){return Vt(t,e).apply(this,arguments)};if(!0===zt.noDeprecation)return t;var n=!1;return function(){if(!n){if(zt.throwDeprecation)throw new Error(e);zt.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var Wt,Yt={};function Xt(t,e){var n={seen:[],stylize:Kt};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),te(e)?n.showHidden=e:e&&ce(n,e),re(n.showHidden)&&(n.showHidden=!1),re(n.depth)&&(n.depth=2),re(n.colors)&&(n.colors=!1),re(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=qt),Zt(n,t,n.depth)}function qt(t,e){var n=Xt.styles[e];return n?"["+Xt.colors[n][0]+"m"+t+"["+Xt.colors[n][1]+"m":t}function Kt(t,e){return t}function Zt(t,e,n){if(t.customInspect&&e&&ue(e.inspect)&&e.inspect!==Xt&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return ne(r)||(r=Zt(t,r,n)),r}var i=function(t,e){if(re(e))return t.stylize("undefined","undefined");if(ne(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(r=e,"number"==typeof r)return t.stylize(""+e,"number");var r;if(te(e))return t.stylize(""+e,"boolean");if(ee(e))return t.stylize("null","null")}(t,e);if(i)return i;var o=Object.keys(e),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),se(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Jt(e);if(0===o.length){if(ue(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(ie(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(ae(e))return t.stylize(Date.prototype.toString.call(e),"date");if(se(e))return Jt(e)}var u,l,c="",h=!1,d=["{","}"];(u=e,Array.isArray(u)&&(h=!0,d=["[","]"]),ue(e))&&(c=" [Function"+(e.name?": "+e.name:"")+"]");return ie(e)&&(c=" "+RegExp.prototype.toString.call(e)),ae(e)&&(c=" "+Date.prototype.toUTCString.call(e)),se(e)&&(c=" "+Jt(e)),0!==o.length||h&&0!=e.length?n<0?ie(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),l=h?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)he(e,String(a))?o.push($t(t,e,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push($t(t,e,n,r,i,!0))})),o}(t,e,n,a,o):o.map((function(r){return $t(t,e,n,a,r,h)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(l,c,d)):d[0]+c+d[1]}function Jt(t){return"["+Error.prototype.toString.call(t)+"]"}function $t(t,e,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),he(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=ee(n)?Zt(t,u.value,null):Zt(t,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),re(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function te(t){return"boolean"==typeof t}function ee(t){return null===t}function ne(t){return"string"==typeof t}function re(t){return void 0===t}function ie(t){return oe(t)&&"[object RegExp]"===le(t)}function oe(t){return"object"===i(t)&&null!==t}function ae(t){return oe(t)&&"[object Date]"===le(t)}function se(t){return oe(t)&&("[object Error]"===le(t)||t instanceof Error)}function ue(t){return"function"==typeof t}function le(t){return Object.prototype.toString.call(t)}function ce(t,e){if(!e||!oe(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function he(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function de(){this.head=null,this.tail=null,this.length=0}Xt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Xt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},de.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},de.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},de.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},de.prototype.clear=function(){this.head=this.tail=null,this.length=0},de.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},de.prototype.concat=function(t){if(0===this.length)return b.alloc(0);if(1===this.length)return this.head.data;for(var e=b.allocUnsafe(t>>>0),n=this.head,r=0;n;)n.data.copy(e,r),r+=n.data.length,n=n.next;return e};var Ae=b.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function fe(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!Ae(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=ge;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=ve;break;default:return void(this.write=pe)}this.charBuffer=new b(6),this.charReceived=0,this.charLength=0}function pe(t){return t.toString(this.encoding)}function ge(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function ve(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}fe.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;r=(e+=t.toString(this.encoding,0,r)).length-1;if((i=e.charCodeAt(r))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},fe.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},fe.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};var me=Object.freeze({__proto__:null,StringDecoder:fe});we.ReadableState=be;var ye=function(t){if(re(Wt)&&(Wt=zt.env.NODE_DEBUG||""),t=t.toUpperCase(),!Yt[t])if(new RegExp("\\b"+t+"\\b","i").test(Wt)){Yt[t]=function(){var e=Gt.apply(null,arguments);console.error("%s %d: %s",t,0,e)}}else Yt[t]=function(){};return Yt[t]}("stream");function be(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof qe&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new de,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new fe(t.encoding),this.encoding=t.encoding)}function we(t){if(!(this instanceof we))return new we(t);this._readableState=new be(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),at.call(this)}function xe(t,e,n,r,i){var o=function(t,e){var n=null;b.isBuffer(e)||"string"==typeof e||null==e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(e,n);if(o)t.emit("error",o);else if(null===n)e.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,Ee(t)}(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else{var u;!e.decoder||i||r||(n=e.decoder.write(n),u=!e.objectMode&&0===n.length),i||(e.reading=!1),u||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&Ee(t))),function(t,e){e.readingMore||(e.readingMore=!0,Ct(Me,t,e))}(t,e)}else i||(e.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}Ht(we,at),we.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)!==n.encoding&&(t=b.from(t,e),e=""),xe(this,n,t,e,!1)},we.prototype.unshift=function(t){return xe(this,this._readableState,t,"",!0)},we.prototype.isPaused=function(){return!1===this._readableState.flowing},we.prototype.setEncoding=function(t){return this._readableState.decoder=new fe(t),this._readableState.encoding=t,this};var _e=8388608;function Te(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=_e?t=_e:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function Ee(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(ye("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Ct(Se,t):Se(t))}function Se(t){ye("emit readable"),t.emit("readable"),Ne(t)}function Me(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(ye("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function Ce(t){ye("readable nexttick read 0"),t.read(0)}function Ie(t,e){e.reading||(ye("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),Ne(t),e.flowing&&!e.reading&&t.read(0)}function Ne(t){var e=t._readableState;for(ye("flow",e.flowing);e.flowing&&null!==t.read(););}function Be(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=b.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function ke(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Ct(Pe,e,t))}function Pe(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function De(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function Le(){}function Oe(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function Re(t,e){Object.defineProperty(this,"buffer",{get:Vt((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof qe&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?Ct(i,r):i(r);t._writableState.errorEmitted=!0,t.emit("error",r)}(t,n,r,e,i);else{var o=He(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||ze(t,n),r?Ct(je,t,n,o,i):je(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ve(this)}function Fe(t){if(!(this instanceof Fe||this instanceof qe))return new Fe(t);this._writableState=new Re(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),at.call(this)}function Ue(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function je(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),Ge(t,e)}function ze(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;Ue(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Ve(e)}else{for(;n;){var s=n.chunk,u=n.encoding,l=n.callback;if(Ue(t,e,!1,e.objectMode?1:s.length,s,u,l),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function He(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function Qe(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function Ge(t,e){var n=He(e);return n&&(0===e.pendingcb?(Qe(t,e),e.finished=!0,t.emit("finish")):Qe(t,e)),n}function Ve(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}we.prototype.read=function(t){ye("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return ye("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?ke(this):Ee(this),null;if(0===(t=Te(t,e))&&e.ended)return 0===e.length&&ke(this),null;var r,i=e.needReadable;return ye("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&ye("length less than watermark",i=!0),e.ended||e.reading?ye("reading or ended",i=!1):i&&(ye("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Te(n,e))),null===(r=t>0?Be(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&ke(this)),null!==r&&this.emit("data",r),r},we.prototype._read=function(t){this.emit("error",new Error("not implemented"))},we.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,ye("pipe count=%d opts=%j",r.pipesCount,e);var i=!e||!1!==e.end?a:l;function o(t){ye("onunpipe"),t===n&&l()}function a(){ye("onend"),t.end()}r.endEmitted?Ct(i):n.once("end",i),t.on("unpipe",o);var s=function(t){return function(){var e=t._readableState;ye("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&t.listeners("data").length&&(e.flowing=!0,Ne(t))}}(n);t.on("drain",s);var u=!1;function l(){ye("cleanup"),t.removeListener("close",A),t.removeListener("finish",f),t.removeListener("drain",s),t.removeListener("error",d),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",l),n.removeListener("data",h),u=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||s()}var c=!1;function h(e){ye("ondata"),c=!1,!1!==t.write(e)||c||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==De(r.pipes,t))&&!u&&(ye("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,c=!0),n.pause())}function d(e){var n;ye("onerror",e),p(),t.removeListener("error",d),0===(n="error",t.listeners(n).length)&&t.emit("error",e)}function A(){t.removeListener("finish",f),p()}function f(){ye("onfinish"),t.removeListener("close",A),p()}function p(){ye("unpipe"),n.unpipe(t)}return n.on("data",h),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",d),t.once("close",A),t.once("finish",f),t.emit("pipe",n),r.flowing||(ye("pipe resume"),n.resume()),t},we.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=De(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},we.prototype.on=function(t,e){var n=at.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&Ee(this):Ct(Ce,this))}return n},we.prototype.addListener=we.prototype.on,we.prototype.resume=function(){var t=this._readableState;return t.flowing||(ye("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Ct(Ie,t,e))}(this,t)),this},we.prototype.pause=function(){return ye("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(ye("pause"),this._readableState.flowing=!1,this.emit("pause")),this},we.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;for(var i in t.on("end",(function(){if(ye("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)})),t.on("data",(function(i){(ye("wrapped data"),e.decoder&&(i=e.decoder.write(i)),e.objectMode&&null==i)||(e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}(["error","close","destroy","pause","resume"],(function(e){t.on(e,r.emit.bind(r,e))})),r._read=function(e){ye("wrapped _read",e),n&&(n=!1,t.resume())},r},we._fromList=Be,Fe.WritableState=Re,Ht(Fe,at),Re.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},Fe.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Fe.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return"function"==typeof e&&(n=e,e=null),b.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=Le),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),Ct(e,n)}(this,n):function(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):b.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),Ct(r,o),i=!1),i}(this,r,t,n)&&(r.pendingcb++,i=function(t,e,n,r,i){n=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=b.from(e,n));return e}(e,n,r),b.isBuffer(n)&&(r="buffer");var o=e.objectMode?1:n.length;e.length+=o;var a=e.length<e.highWaterMark;a||(e.needDrain=!0);if(e.writing||e.corked){var s=e.lastBufferedRequest;e.lastBufferedRequest=new Oe(n,r,i),s?s.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Ue(t,e,!1,o,n,r,i);return a}(this,r,t,e,n)),i},Fe.prototype.cork=function(){this._writableState.corked++},Fe.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||ze(this,t))},Fe.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Fe.prototype._write=function(t,e,n){n(new Error("not implemented"))},Fe.prototype._writev=null,Fe.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,Ge(t,e),n&&(e.finished?Ct(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Ht(qe,we);for(var We=Object.keys(Fe.prototype),Ye=0;Ye<We.length;Ye++){var Xe=We[Ye];qe.prototype[Xe]||(qe.prototype[Xe]=Fe.prototype[Xe])}function qe(t){if(!(this instanceof qe))return new qe(t);we.call(this,t),Fe.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Ke)}function Ke(){this.allowHalfOpen||this._writableState.ended||Ct(Ze,this)}function Ze(t){t.end()}function Je(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=n&&t.push(n);i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function $e(t){if(!(this instanceof $e))return new $e(t);qe.call(this,t),this._transformState=new Je(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(t){tn(e,t)})):tn(e)}))}function tn(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}function en(t){if(!(this instanceof en))return new en(t);$e.call(this,t)}function nn(){at.call(this)}Ht($e,qe),$e.prototype.push=function(t,e){return this._transformState.needTransform=!1,qe.prototype.push.call(this,t,e)},$e.prototype._transform=function(t,e,n){throw new Error("Not implemented")},$e.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},$e.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},Ht(en,$e),en.prototype._transform=function(t,e,n){n(null,t)},Ht(nn,at),nn.Readable=we,nn.Writable=Fe,nn.Duplex=qe,nn.Transform=$e,nn.PassThrough=en,nn.Stream=nn,nn.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",s));var o=!1;function a(){o||(o=!0,t.end())}function s(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(l(),0===at.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",u),t.on("error",u),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t};var rn=o(Object.freeze({__proto__:null,default:nn,Readable:we,Writable:Fe,Duplex:qe,Transform:$e,PassThrough:en,Stream:nn})),on=o(me);!function(t){!function(t){t.parser=function(t,e){return new r(t,e)},t.SAXParser=r,t.SAXStream=a,t.createStream=function(t,e){return new a(t,e)},t.MAX_BUFFER_LENGTH=65536;var e,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(e,i){if(!(this instanceof r))return new r(e,i);var o=this;!function(t){for(var e=0,r=n.length;e<r;e++)t[n[e]]=""}(o),o.q=o.c="",o.bufferCheckPosition=t.MAX_BUFFER_LENGTH,o.opt=i||{},o.opt.lowercase=o.opt.lowercase||o.opt.lowercasetags,o.looseCase=o.opt.lowercase?"toLowerCase":"toUpperCase",o.tags=[],o.closed=o.closedRoot=o.sawRoot=!1,o.tag=o.error=null,o.strict=!!e,o.noscript=!(!e&&!o.opt.noscript),o.state=_.BEGIN,o.strictEntities=o.opt.strictEntities,o.ENTITIES=o.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),o.attribList=[],o.opt.xmlns&&(o.ns=Object.create(l)),o.trackPosition=!1!==o.opt.position,o.trackPosition&&(o.position=o.line=o.column=0),E(o,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),r.prototype={end:function(){N(this)},write:function(e){var r=this;if(this.error)throw this.error;if(r.closed)return I(r,"Cannot write after close. Assign an onready handler.");if(null===e)return N(r);"object"===i(e)&&(e=e.toString());var o=0,a="";for(;a=U(e,o++),r.c=a,a;)switch(r.trackPosition&&(r.position++,"\n"===a?(r.line++,r.column=0):r.column++),r.state){case _.BEGIN:if(r.state=_.BEGIN_WHITESPACE,"\ufeff"===a)continue;F(r,a);continue;case _.BEGIN_WHITESPACE:F(r,a);continue;case _.TEXT:if(r.sawRoot&&!r.closedRoot){for(var s=o-1;a&&"<"!==a&&"&"!==a;)(a=U(e,o++))&&r.trackPosition&&(r.position++,"\n"===a?(r.line++,r.column=0):r.column++);r.textNode+=e.substring(s,o-1)}"<"!==a||r.sawRoot&&r.closedRoot&&!r.strict?(f(a)||r.sawRoot&&!r.closedRoot||B(r,"Text data outside of root node."),"&"===a?r.state=_.TEXT_ENTITY:r.textNode+=a):(r.state=_.OPEN_WAKA,r.startTagPosition=r.position);continue;case _.SCRIPT:"<"===a?r.state=_.SCRIPT_ENDING:r.script+=a;continue;case _.SCRIPT_ENDING:"/"===a?r.state=_.CLOSE_TAG:(r.script+="<"+a,r.state=_.SCRIPT);continue;case _.OPEN_WAKA:if("!"===a)r.state=_.SGML_DECL,r.sgmlDecl="";else if(f(a));else if(v(c,a))r.state=_.OPEN_TAG,r.tagName=a;else if("/"===a)r.state=_.CLOSE_TAG,r.tagName="";else if("?"===a)r.state=_.PROC_INST,r.procInstName=r.procInstBody="";else{if(B(r,"Unencoded <"),r.startTagPosition+1<r.position){var u=r.position-r.startTagPosition;a=new Array(u).join(" ")+a}r.textNode+="<"+a,r.state=_.TEXT}continue;case _.SGML_DECL:"[CDATA["===(r.sgmlDecl+a).toUpperCase()?(S(r,"onopencdata"),r.state=_.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+a==="--"?(r.state=_.COMMENT,r.comment="",r.sgmlDecl=""):"DOCTYPE"===(r.sgmlDecl+a).toUpperCase()?(r.state=_.DOCTYPE,(r.doctype||r.sawRoot)&&B(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):">"===a?(S(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=_.TEXT):p(a)?(r.state=_.SGML_DECL_QUOTED,r.sgmlDecl+=a):r.sgmlDecl+=a;continue;case _.SGML_DECL_QUOTED:a===r.q&&(r.state=_.SGML_DECL,r.q=""),r.sgmlDecl+=a;continue;case _.DOCTYPE:">"===a?(r.state=_.TEXT,S(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=a,"["===a?r.state=_.DOCTYPE_DTD:p(a)&&(r.state=_.DOCTYPE_QUOTED,r.q=a));continue;case _.DOCTYPE_QUOTED:r.doctype+=a,a===r.q&&(r.q="",r.state=_.DOCTYPE);continue;case _.DOCTYPE_DTD:r.doctype+=a,"]"===a?r.state=_.DOCTYPE:p(a)&&(r.state=_.DOCTYPE_DTD_QUOTED,r.q=a);continue;case _.DOCTYPE_DTD_QUOTED:r.doctype+=a,a===r.q&&(r.state=_.DOCTYPE_DTD,r.q="");continue;case _.COMMENT:"-"===a?r.state=_.COMMENT_ENDING:r.comment+=a;continue;case _.COMMENT_ENDING:"-"===a?(r.state=_.COMMENT_ENDED,r.comment=C(r.opt,r.comment),r.comment&&S(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+a,r.state=_.COMMENT);continue;case _.COMMENT_ENDED:">"!==a?(B(r,"Malformed comment"),r.comment+="--"+a,r.state=_.COMMENT):r.state=_.TEXT;continue;case _.CDATA:"]"===a?r.state=_.CDATA_ENDING:r.cdata+=a;continue;case _.CDATA_ENDING:"]"===a?r.state=_.CDATA_ENDING_2:(r.cdata+="]"+a,r.state=_.CDATA);continue;case _.CDATA_ENDING_2:">"===a?(r.cdata&&S(r,"oncdata",r.cdata),S(r,"onclosecdata"),r.cdata="",r.state=_.TEXT):"]"===a?r.cdata+="]":(r.cdata+="]]"+a,r.state=_.CDATA);continue;case _.PROC_INST:"?"===a?r.state=_.PROC_INST_ENDING:f(a)?r.state=_.PROC_INST_BODY:r.procInstName+=a;continue;case _.PROC_INST_BODY:if(!r.procInstBody&&f(a))continue;"?"===a?r.state=_.PROC_INST_ENDING:r.procInstBody+=a;continue;case _.PROC_INST_ENDING:">"===a?(S(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=_.TEXT):(r.procInstBody+="?"+a,r.state=_.PROC_INST_BODY);continue;case _.OPEN_TAG:v(h,a)?r.tagName+=a:(k(r),">"===a?L(r):"/"===a?r.state=_.OPEN_TAG_SLASH:(f(a)||B(r,"Invalid character in tag name"),r.state=_.ATTRIB));continue;case _.OPEN_TAG_SLASH:">"===a?(L(r,!0),O(r)):(B(r,"Forward-slash in opening tag not followed by >"),r.state=_.ATTRIB);continue;case _.ATTRIB:if(f(a))continue;">"===a?L(r):"/"===a?r.state=_.OPEN_TAG_SLASH:v(c,a)?(r.attribName=a,r.attribValue="",r.state=_.ATTRIB_NAME):B(r,"Invalid attribute name");continue;case _.ATTRIB_NAME:"="===a?r.state=_.ATTRIB_VALUE:">"===a?(B(r,"Attribute without value"),r.attribValue=r.attribName,D(r),L(r)):f(a)?r.state=_.ATTRIB_NAME_SAW_WHITE:v(h,a)?r.attribName+=a:B(r,"Invalid attribute name");continue;case _.ATTRIB_NAME_SAW_WHITE:if("="===a)r.state=_.ATTRIB_VALUE;else{if(f(a))continue;B(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",S(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",">"===a?L(r):v(c,a)?(r.attribName=a,r.state=_.ATTRIB_NAME):(B(r,"Invalid attribute name"),r.state=_.ATTRIB)}continue;case _.ATTRIB_VALUE:if(f(a))continue;p(a)?(r.q=a,r.state=_.ATTRIB_VALUE_QUOTED):(B(r,"Unquoted attribute value"),r.state=_.ATTRIB_VALUE_UNQUOTED,r.attribValue=a);continue;case _.ATTRIB_VALUE_QUOTED:if(a!==r.q){"&"===a?r.state=_.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=a;continue}D(r),r.q="",r.state=_.ATTRIB_VALUE_CLOSED;continue;case _.ATTRIB_VALUE_CLOSED:f(a)?r.state=_.ATTRIB:">"===a?L(r):"/"===a?r.state=_.OPEN_TAG_SLASH:v(c,a)?(B(r,"No whitespace between attributes"),r.attribName=a,r.attribValue="",r.state=_.ATTRIB_NAME):B(r,"Invalid attribute name");continue;case _.ATTRIB_VALUE_UNQUOTED:if(!g(a)){"&"===a?r.state=_.ATTRIB_VALUE_ENTITY_U:r.attribValue+=a;continue}D(r),">"===a?L(r):r.state=_.ATTRIB;continue;case _.CLOSE_TAG:if(r.tagName)">"===a?O(r):v(h,a)?r.tagName+=a:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=_.SCRIPT):(f(a)||B(r,"Invalid tagname in closing tag"),r.state=_.CLOSE_TAG_SAW_WHITE);else{if(f(a))continue;m(c,a)?r.script?(r.script+="</"+a,r.state=_.SCRIPT):B(r,"Invalid tagname in closing tag."):r.tagName=a}continue;case _.CLOSE_TAG_SAW_WHITE:if(f(a))continue;">"===a?O(r):B(r,"Invalid characters in closing tag");continue;case _.TEXT_ENTITY:case _.ATTRIB_VALUE_ENTITY_Q:case _.ATTRIB_VALUE_ENTITY_U:var l,y;switch(r.state){case _.TEXT_ENTITY:l=_.TEXT,y="textNode";break;case _.ATTRIB_VALUE_ENTITY_Q:l=_.ATTRIB_VALUE_QUOTED,y="attribValue";break;case _.ATTRIB_VALUE_ENTITY_U:l=_.ATTRIB_VALUE_UNQUOTED,y="attribValue"}";"===a?(r[y]+=R(r),r.entity="",r.state=l):v(r.entity.length?A:d,a)?r.entity+=a:(B(r,"Invalid character in entity name"),r[y]+="&"+r.entity+a,r.entity="",r.state=l);continue;default:throw new Error(r,"Unknown state: "+r.state)}r.position>=r.bufferCheckPosition&&function(e){for(var r=Math.max(t.MAX_BUFFER_LENGTH,10),i=0,o=0,a=n.length;o<a;o++){var s=e[n[o]].length;if(s>r)switch(n[o]){case"textNode":M(e);break;case"cdata":S(e,"oncdata",e.cdata),e.cdata="";break;case"script":S(e,"onscript",e.script),e.script="";break;default:I(e,"Max buffer length exceeded: "+n[o])}i=Math.max(i,s)}var u=t.MAX_BUFFER_LENGTH-i;e.bufferCheckPosition=u+e.position}(r);return r}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;M(t=this),""!==t.cdata&&(S(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(S(t,"onscript",t.script),t.script="")}};try{e=rn.Stream}catch(t){e=function(){}}var o=t.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function a(t,n){if(!(this instanceof a))return new a(t,n);e.apply(this),this._parser=new r(t,n),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(t){i.emit("error",t),i._parser.error=null},this._decoder=null,o.forEach((function(t){Object.defineProperty(i,"on"+t,{get:function(){return i._parser["on"+t]},set:function(e){if(!e)return i.removeAllListeners(t),i._parser["on"+t]=e,e;i.on(t,e)},enumerable:!0,configurable:!1})}))}a.prototype=Object.create(e.prototype,{constructor:{value:a}}),a.prototype.write=function(t){if("function"==typeof b.isBuffer&&b.isBuffer(t)){if(!this._decoder){var e=on.StringDecoder;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},a.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},a.prototype.on=function(t,n){var r=this;return r._parser["on"+t]||-1===o.indexOf(t)||(r._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),e.prototype.on.call(r,t,n)};var s="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",l={xml:s,xmlns:u},c=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function p(t){return'"'===t||"'"===t}function g(t){return">"===t||f(t)}function v(t,e){return t.test(e)}function m(t,e){return!v(t,e)}var y,w,x,_=0;for(var T in t.STATE={BEGIN:_++,BEGIN_WHITESPACE:_++,TEXT:_++,TEXT_ENTITY:_++,OPEN_WAKA:_++,SGML_DECL:_++,SGML_DECL_QUOTED:_++,DOCTYPE:_++,DOCTYPE_QUOTED:_++,DOCTYPE_DTD:_++,DOCTYPE_DTD_QUOTED:_++,COMMENT_STARTING:_++,COMMENT:_++,COMMENT_ENDING:_++,COMMENT_ENDED:_++,CDATA:_++,CDATA_ENDING:_++,CDATA_ENDING_2:_++,PROC_INST:_++,PROC_INST_BODY:_++,PROC_INST_ENDING:_++,OPEN_TAG:_++,OPEN_TAG_SLASH:_++,ATTRIB:_++,ATTRIB_NAME:_++,ATTRIB_NAME_SAW_WHITE:_++,ATTRIB_VALUE:_++,ATTRIB_VALUE_QUOTED:_++,ATTRIB_VALUE_CLOSED:_++,ATTRIB_VALUE_UNQUOTED:_++,ATTRIB_VALUE_ENTITY_Q:_++,ATTRIB_VALUE_ENTITY_U:_++,CLOSE_TAG:_++,CLOSE_TAG_SAW_WHITE:_++,SCRIPT:_++,SCRIPT_ENDING:_++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],r="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r})),t.STATE)t.STATE[t.STATE[T]]=T;function E(t,e,n){t[e]&&t[e](n)}function S(t,e,n){t.textNode&&M(t),E(t,e,n)}function M(t){t.textNode=C(t.opt,t.textNode),t.textNode&&E(t,"ontext",t.textNode),t.textNode=""}function C(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function I(t,e){return M(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,E(t,"onerror",e),t}function N(t){return t.sawRoot&&!t.closedRoot&&B(t,"Unclosed root tag"),t.state!==_.BEGIN&&t.state!==_.BEGIN_WHITESPACE&&t.state!==_.TEXT&&I(t,"Unexpected end"),M(t),t.c="",t.closed=!0,E(t,"onend"),r.call(t,t.strict,t.opt),t}function B(t,e){if("object"!==i(t)||!(t instanceof r))throw new Error("bad call to strictFail");t.strict&&I(t,e)}function k(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0,S(t,"onopentagstart",n)}function P(t,e){var n=t.indexOf(":")<0?["",t]:t.split(":"),r=n[0],i=n[1];return e&&"xmlns"===t&&(r="xmlns",i=""),{prefix:r,local:i}}function D(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=P(t.attribName,!0),n=e.prefix,r=e.local;if("xmlns"===n)if("xml"===r&&t.attribValue!==s)B(t,"xml: prefix must be bound to "+s+"\nActual: "+t.attribValue);else if("xmlns"===r&&t.attribValue!==u)B(t,"xmlns: prefix must be bound to "+u+"\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,S(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function L(t,e){if(t.opt.xmlns){var n=t.tag,r=P(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(B(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);var i=t.tags[t.tags.length-1]||t;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(e){S(t,"onopennamespace",{prefix:e,uri:n.ns[e]})}));for(var o=0,a=t.attribList.length;o<a;o++){var s=t.attribList[o],u=s[0],l=s[1],c=P(u,!0),h=c.prefix,d=c.local,A=""===h?"":n.ns[h]||"",f={name:u,value:l,prefix:h,local:d,uri:A};h&&"xmlns"!==h&&!A&&(B(t,"Unbound namespace prefix: "+JSON.stringify(h)),f.uri=h),t.tag.attributes[u]=f,S(t,"onattribute",f)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),S(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=_.TEXT:t.state=_.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function O(t){if(!t.tagName)return B(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=_.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=_.SCRIPT);S(t,"onscript",t.script),t.script=""}var e=t.tags.length,n=t.tagName;t.strict||(n=n[t.looseCase]());for(var r=n;e--;){if(t.tags[e].name===r)break;B(t,"Unexpected close tag")}if(e<0)return B(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=_.TEXT);t.tagName=n;for(var i=t.tags.length;i-- >e;){var o=t.tag=t.tags.pop();t.tagName=t.tag.name,S(t,"onclosetag",t.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var u=t.tags[t.tags.length-1]||t;t.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach((function(e){var n=o.ns[e];S(t,"onclosenamespace",{prefix:e,uri:n})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=_.TEXT}function R(t){var e,n=t.entity,r=n.toLowerCase(),i="";return t.ENTITIES[n]?t.ENTITIES[n]:t.ENTITIES[r]?t.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(e=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(e=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(e)||i.toLowerCase()!==n?(B(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function F(t,e){"<"===e?(t.state=_.OPEN_WAKA,t.startTagPosition=t.position):f(e)||(B(t,"Non-whitespace before first tag."),t.textNode=e,t.state=_.TEXT)}function U(t,e){var n="";return e<t.length&&(n=t.charAt(e)),n}_=t.STATE,String.fromCodePoint||(y=String.fromCharCode,w=Math.floor,x=function(){var t,e,n=16384,r=[],i=-1,o=arguments.length;if(!o)return"";for(var a="";++i<o;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||w(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(t=55296+((s-=65536)>>10),e=s%1024+56320,r.push(t,e)),(i+1===o||r.length>n)&&(a+=y.apply(null,r),r.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:x,configurable:!0,writable:!0}):String.fromCodePoint=x)}(t)}(it);var an,sn,un=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},ln=un,cn={copyOptions:function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},ensureFlagExists:function(t,e){t in e&&"boolean"==typeof e[t]||(e[t]=!1)},ensureSpacesExists:function(t){(!("spaces"in t)||"number"!=typeof t.spaces&&"string"!=typeof t.spaces)&&(t.spaces=0)},ensureAlwaysArrayExists:function(t){"alwaysArray"in t&&("boolean"==typeof t.alwaysArray||ln(t.alwaysArray))||(t.alwaysArray=!1)},ensureKeyExists:function(t,e){t+"Key"in e&&"string"==typeof e[t+"Key"]||(e[t+"Key"]=e.compact?"_"+t:t)},checkFnExists:function(t,e){return t+"Fn"in e}},hn=it,dn=cn,An=un;function fn(t){var e=Number(t);if(!isNaN(e))return e;var n=t.toLowerCase();return"true"===n||"false"!==n&&t}function pn(t,e){var n;if(an.compact){if(!sn[an[t+"Key"]]&&(An(an.alwaysArray)?-1!==an.alwaysArray.indexOf(an[t+"Key"]):an.alwaysArray)&&(sn[an[t+"Key"]]=[]),sn[an[t+"Key"]]&&!An(sn[an[t+"Key"]])&&(sn[an[t+"Key"]]=[sn[an[t+"Key"]]]),t+"Fn"in an&&"string"==typeof e&&(e=an[t+"Fn"](e,sn)),"instruction"===t&&("instructionFn"in an||"instructionNameFn"in an))for(n in e)if(e.hasOwnProperty(n))if("instructionFn"in an)e[n]=an.instructionFn(e[n],n,sn);else{var r=e[n];delete e[n],e[an.instructionNameFn(n,r,sn)]=r}An(sn[an[t+"Key"]])?sn[an[t+"Key"]].push(e):sn[an[t+"Key"]]=e}else{sn[an.elementsKey]||(sn[an.elementsKey]=[]);var i={};if(i[an.typeKey]=t,"instruction"===t){for(n in e)if(e.hasOwnProperty(n))break;i[an.nameKey]="instructionNameFn"in an?an.instructionNameFn(n,e,sn):n,an.instructionHasAttributes?(i[an.attributesKey]=e[n][an.attributesKey],"instructionFn"in an&&(i[an.attributesKey]=an.instructionFn(i[an.attributesKey],n,sn))):("instructionFn"in an&&(e[n]=an.instructionFn(e[n],n,sn)),i[an.instructionKey]=e[n])}else t+"Fn"in an&&(e=an[t+"Fn"](e,sn)),i[an[t+"Key"]]=e;an.addParent&&(i[an.parentKey]=sn),sn[an.elementsKey].push(i)}}function gn(t){var e;if("attributesFn"in an&&t&&(t=an.attributesFn(t,sn)),(an.trim||"attributeValueFn"in an||"attributeNameFn"in an||an.nativeTypeAttributes)&&t)for(e in t)if(t.hasOwnProperty(e)&&(an.trim&&(t[e]=t[e].trim()),an.nativeTypeAttributes&&(t[e]=fn(t[e])),"attributeValueFn"in an&&(t[e]=an.attributeValueFn(t[e],e,sn)),"attributeNameFn"in an)){var n=t[e];delete t[e],t[an.attributeNameFn(e,t[e],sn)]=n}return t}function vn(t){var e={};if(t.body&&("xml"===t.name.toLowerCase()||an.instructionHasAttributes)){for(var n,r=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(n=r.exec(t.body));)e[n[1]]=n[2]||n[3]||n[4];e=gn(e)}if("xml"===t.name.toLowerCase()){if(an.ignoreDeclaration)return;sn[an.declarationKey]={},Object.keys(e).length&&(sn[an.declarationKey][an.attributesKey]=e),an.addParent&&(sn[an.declarationKey][an.parentKey]=sn)}else{if(an.ignoreInstruction)return;an.trim&&(t.body=t.body.trim());var i={};an.instructionHasAttributes&&Object.keys(e).length?(i[t.name]={},i[t.name][an.attributesKey]=e):i[t.name]=t.body,pn("instruction",i)}}function mn(t,e){var n;if("object"===i(t)&&(e=t.attributes,t=t.name),e=gn(e),"elementNameFn"in an&&(t=an.elementNameFn(t,sn)),an.compact){var r;if(n={},!an.ignoreAttributes&&e&&Object.keys(e).length)for(r in n[an.attributesKey]={},e)e.hasOwnProperty(r)&&(n[an.attributesKey][r]=e[r]);!(t in sn)&&(An(an.alwaysArray)?-1!==an.alwaysArray.indexOf(t):an.alwaysArray)&&(sn[t]=[]),sn[t]&&!An(sn[t])&&(sn[t]=[sn[t]]),An(sn[t])?sn[t].push(n):sn[t]=n}else sn[an.elementsKey]||(sn[an.elementsKey]=[]),(n={})[an.typeKey]="element",n[an.nameKey]=t,!an.ignoreAttributes&&e&&Object.keys(e).length&&(n[an.attributesKey]=e),an.alwaysChildren&&(n[an.elementsKey]=[]),sn[an.elementsKey].push(n);n[an.parentKey]=sn,sn=n}function yn(t){an.ignoreText||(t.trim()||an.captureSpacesBetweenElements)&&(an.trim&&(t=t.trim()),an.nativeType&&(t=fn(t)),an.sanitize&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),pn("text",t))}function bn(t){an.ignoreComment||(an.trim&&(t=t.trim()),pn("comment",t))}function wn(t){var e=sn[an.parentKey];an.addParent||delete sn[an.parentKey],sn=e}function xn(t){an.ignoreCdata||(an.trim&&(t=t.trim()),pn("cdata",t))}function _n(t){an.ignoreDoctype||(t=t.replace(/^ /,""),an.trim&&(t=t.trim()),pn("doctype",t))}function Tn(t){t.note=t,"onErrorFn"in an&&an.onErrorFn(t)}var En=function(t,e){var n=hn.parser(!0,{}),r={};sn=r,an=function(t){return an=dn.copyOptions(t),dn.ensureFlagExists("ignoreDeclaration",an),dn.ensureFlagExists("ignoreInstruction",an),dn.ensureFlagExists("ignoreAttributes",an),dn.ensureFlagExists("ignoreText",an),dn.ensureFlagExists("ignoreComment",an),dn.ensureFlagExists("ignoreCdata",an),dn.ensureFlagExists("ignoreDoctype",an),dn.ensureFlagExists("compact",an),dn.ensureFlagExists("alwaysChildren",an),dn.ensureFlagExists("addParent",an),dn.ensureFlagExists("trim",an),dn.ensureFlagExists("nativeType",an),dn.ensureFlagExists("nativeTypeAttributes",an),dn.ensureFlagExists("sanitize",an),dn.ensureFlagExists("instructionHasAttributes",an),dn.ensureFlagExists("captureSpacesBetweenElements",an),dn.ensureAlwaysArrayExists(an),dn.ensureKeyExists("declaration",an),dn.ensureKeyExists("instruction",an),dn.ensureKeyExists("attributes",an),dn.ensureKeyExists("text",an),dn.ensureKeyExists("comment",an),dn.ensureKeyExists("cdata",an),dn.ensureKeyExists("doctype",an),dn.ensureKeyExists("type",an),dn.ensureKeyExists("name",an),dn.ensureKeyExists("elements",an),dn.ensureKeyExists("parent",an),an}(e),n.opt={strictEntities:!0},n.onopentag=mn,n.ontext=yn,n.oncomment=bn,n.onclosetag=wn,n.onerror=Tn,n.oncdata=xn,n.ondoctype=_n,n.onprocessinginstruction=vn;try{n.write(t).close()}catch(t){}if(r[an.elementsKey]){var i=r[an.elementsKey];delete r[an.elementsKey],r[an.elementsKey]=i,delete r.text}return r},Sn=cn,Mn=En;var Cn,In,Nn=cn,Bn=un;function kn(t,e,n){return(!n&&t.spaces?"\n":"")+Array(e+1).join(t.spaces)}function Pn(t,e,n){if(e.ignoreAttributes)return"";"attributesFn"in e&&(t=e.attributesFn(t,In,Cn));var r,i,o,a,s=[];for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(a=e.noQuotesForNativeAttributes&&"string"!=typeof t[r]?"":'"',i=(i=""+t[r]).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),o="attributeNameFn"in e?e.attributeNameFn(r,i,In,Cn):r,s.push(e.spaces&&e.indentAttributes?kn(e,n+1,!1):" "),s.push(o+"="+a+("attributeValueFn"in e?e.attributeValueFn(i,r,In,Cn):i)+a));return t&&Object.keys(t).length&&e.spaces&&e.indentAttributes&&s.push(kn(e,n,!1)),s.join("")}function Dn(t,e,n){return Cn=t,In="xml",e.ignoreDeclaration?"":"<?xml"+Pn(t[e.attributesKey],e,n)+"?>"}function Ln(t,e,n){if(e.ignoreInstruction)return"";var r;for(r in t)if(t.hasOwnProperty(r))break;var o="instructionNameFn"in e?e.instructionNameFn(r,t[r],In,Cn):r;if("object"===i(t[r]))return Cn=t,In=o,"<?"+o+Pn(t[r][e.attributesKey],e,n)+"?>";var a=t[r]?t[r]:"";return"instructionFn"in e&&(a=e.instructionFn(a,r,In,Cn)),"<?"+o+(a?" "+a:"")+"?>"}function On(t,e){return e.ignoreComment?"":"\x3c!--"+("commentFn"in e?e.commentFn(t,In,Cn):t)+"--\x3e"}function Rn(t,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(t,In,Cn):t.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function Fn(t,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(t,In,Cn):t)+">"}function Un(t,e){return e.ignoreText?"":(t=(t=(t=""+t).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(t,In,Cn):t)}function jn(t,e,n,r){return t.reduce((function(t,i){var o=kn(e,n,r&&!t);switch(i.type){case"element":return t+o+function(t,e,n){Cn=t,In=t.name;var r=[],i="elementNameFn"in e?e.elementNameFn(t.name,t):t.name;r.push("<"+i),t[e.attributesKey]&&r.push(Pn(t[e.attributesKey],e,n));var o=t[e.elementsKey]&&t[e.elementsKey].length||t[e.attributesKey]&&"preserve"===t[e.attributesKey]["xml:space"];return o||(o="fullTagEmptyElementFn"in e?e.fullTagEmptyElementFn(t.name,t):e.fullTagEmptyElement),o?(r.push(">"),t[e.elementsKey]&&t[e.elementsKey].length&&(r.push(jn(t[e.elementsKey],e,n+1)),Cn=t,In=t.name),r.push(e.spaces&&function(t,e){var n;if(t.elements&&t.elements.length)for(n=0;n<t.elements.length;++n)switch(t.elements[n][e.typeKey]){case"text":if(e.indentText)return!0;break;case"cdata":if(e.indentCdata)return!0;break;case"instruction":if(e.indentInstruction)return!0;break;default:return!0}return!1}(t,e)?"\n"+Array(n+1).join(e.spaces):""),r.push("</"+i+">")):r.push("/>"),r.join("")}(i,e,n);case"comment":return t+o+On(i[e.commentKey],e);case"doctype":return t+o+Fn(i[e.doctypeKey],e);case"cdata":return t+(e.indentCdata?o:"")+Rn(i[e.cdataKey],e);case"text":return t+(e.indentText?o:"")+Un(i[e.textKey],e);case"instruction":var a={};return a[i[e.nameKey]]=i[e.attributesKey]?i:i[e.instructionKey],t+(e.indentInstruction?o:"")+Ln(a,e,n)}}),"")}function zn(t,e,n){var r;for(r in t)if(t.hasOwnProperty(r))switch(r){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||n)return!0;break;case e.cdataKey:if(e.indentCdata||n)return!0;break;case e.instructionKey:if(e.indentInstruction||n)return!0;break;case e.doctypeKey:case e.commentKey:default:return!0}return!1}function Hn(t,e,n,r,o){Cn=t,In=e;var a="elementNameFn"in n?n.elementNameFn(e,t):e;if(null==t||""===t)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(e,t)||n.fullTagEmptyElement?"<"+a+"></"+a+">":"<"+a+"/>";var s=[];if(e){if(s.push("<"+a),"object"!==i(t))return s.push(">"+Un(t,n)+"</"+a+">"),s.join("");t[n.attributesKey]&&s.push(Pn(t[n.attributesKey],n,r));var u=zn(t,n,!0)||t[n.attributesKey]&&"preserve"===t[n.attributesKey]["xml:space"];if(u||(u="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(e,t):n.fullTagEmptyElement),!u)return s.push("/>"),s.join("");s.push(">")}return s.push(Qn(t,n,r+1,!1)),Cn=t,In=e,e&&s.push((o?kn(n,r,!1):"")+"</"+a+">"),s.join("")}function Qn(t,e,n,r){var i,o,a,s=[];for(o in t)if(t.hasOwnProperty(o))for(a=Bn(t[o])?t[o]:[t[o]],i=0;i<a.length;++i){switch(o){case e.declarationKey:s.push(Dn(a[i],e,n));break;case e.instructionKey:s.push((e.indentInstruction?kn(e,n,r):"")+Ln(a[i],e,n));break;case e.attributesKey:case e.parentKey:break;case e.textKey:s.push((e.indentText?kn(e,n,r):"")+Un(a[i],e));break;case e.cdataKey:s.push((e.indentCdata?kn(e,n,r):"")+Rn(a[i],e));break;case e.doctypeKey:s.push(kn(e,n,r)+Fn(a[i],e));break;case e.commentKey:s.push(kn(e,n,r)+On(a[i],e));break;default:s.push(kn(e,n,r)+Hn(a[i],o,e,n,zn(a[i],e)))}r=r&&!s.length}return s.join("")}var Gn=function(t,e){e=function(t){var e=Nn.copyOptions(t);return Nn.ensureFlagExists("ignoreDeclaration",e),Nn.ensureFlagExists("ignoreInstruction",e),Nn.ensureFlagExists("ignoreAttributes",e),Nn.ensureFlagExists("ignoreText",e),Nn.ensureFlagExists("ignoreComment",e),Nn.ensureFlagExists("ignoreCdata",e),Nn.ensureFlagExists("ignoreDoctype",e),Nn.ensureFlagExists("compact",e),Nn.ensureFlagExists("indentText",e),Nn.ensureFlagExists("indentCdata",e),Nn.ensureFlagExists("indentAttributes",e),Nn.ensureFlagExists("indentInstruction",e),Nn.ensureFlagExists("fullTagEmptyElement",e),Nn.ensureFlagExists("noQuotesForNativeAttributes",e),Nn.ensureSpacesExists(e),"number"==typeof e.spaces&&(e.spaces=Array(e.spaces+1).join(" ")),Nn.ensureKeyExists("declaration",e),Nn.ensureKeyExists("instruction",e),Nn.ensureKeyExists("attributes",e),Nn.ensureKeyExists("text",e),Nn.ensureKeyExists("comment",e),Nn.ensureKeyExists("cdata",e),Nn.ensureKeyExists("doctype",e),Nn.ensureKeyExists("type",e),Nn.ensureKeyExists("name",e),Nn.ensureKeyExists("elements",e),e}(e);var n=[];return Cn=t,In="_root_",e.compact?n.push(Qn(t,e,0,!0)):(t[e.declarationKey]&&n.push(Dn(t[e.declarationKey],e,0)),t[e.elementsKey]&&t[e.elementsKey].length&&n.push(jn(t[e.elementsKey],e,0,!n.length))),n.join("")},Vn=Gn;e.js2xml=Gn,e.json2xml=function(t,e){t instanceof r&&(t=t.toString());var n=null;if("string"==typeof t)try{n=JSON.parse(t)}catch(t){throw new Error("The JSON structure is invalid")}else n=t;return Vn(n,e)},e.xml2js=En,e.xml2json=function(t,e){var n,r,i,o;return n=function(t){var e=Sn.copyOptions(t);return Sn.ensureSpacesExists(e),e}(e),r=Mn(t,n),o="compact"in n&&n.compact?"_parent":"parent",i="addParent"in n&&n.addParent?JSON.stringify(r,(function(t,e){return t===o?"_":e}),n.spaces):JSON.stringify(r,null,n.spaces),i.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}}}]);