"use strict";(self.webpackChunkwhiteboard_bridge=self.webpackChunkwhiteboard_bridge||[]).push([[83],{19418:function(e,t,n){n.r(t)},18808:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t,n,r,i,a,o,s,u;void 0===CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(e,t,n,r,i,a,o,s){this.save(),this.translate(e,t),this.rotate(i),this.scale(n,r),this.arc(0,0,1,a,o,s),this.restore()}),void 0===CanvasRenderingContext2D.prototype.resetTransform&&(CanvasRenderingContext2D.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)}),void 0===CanvasRenderingContext2D.prototype.getTransform&&(CanvasRenderingContext2D.prototype.getTransform=function(){return this._t2stack&&this._t2stack[this._t2stack.length-1]||{a:1,b:0,c:0,d:1,e:0,f:0}},CanvasRenderingContext2D.prototype.save=(t=CanvasRenderingContext2D.prototype.save,function(){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var e=this._t2stack[this._t2stack.length-1];this._t2stack.push(e&&{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}),t.call(this)}),CanvasRenderingContext2D.prototype.restore=(n=CanvasRenderingContext2D.prototype.restore,function(){this._t2stack&&this._t2stack.pop(),n.call(this)}),CanvasRenderingContext2D.prototype.transform=(r=CanvasRenderingContext2D.prototype.transform,function(e,t,n,i,a,o){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var s=this._t2stack[this._t2stack.length-1],u=s.a*e+s.c*t,c=s.b*e+s.d*t,l=s.a*n+s.c*i,d=s.b*n+s.d*i,p=s.e+s.a*a+s.c*o,h=s.f+s.b*a+s.d*o;s.a=u,s.b=c,s.c=l,s.d=d,s.e=p,s.f=h,r.call(this,e,t,n,i,a,o)}),CanvasRenderingContext2D.prototype.setTransform=(i=CanvasRenderingContext2D.prototype.setTransform,function(t,n,r,a,o,s){if(this._t2stack||(this._t2stack=[{}]),"object"===e(t)||void 0===t){var u=t.a,c=t.b,l=t.c,d=t.d,p=t.e,h=t.f;this._t2stack[this._t2stack.length-1]={a:u,b:c,c:l,d:d,e:p,f:h},i.call(this,u,c,l,d,p,h)}else this._t2stack[this._t2stack.length-1]={a:t,b:n,c:r,d:a,e:o,f:s},i.call(this,t,n,r,a,o,s)}),CanvasRenderingContext2D.prototype.resetTransform=(a=CanvasRenderingContext2D.prototype.resetTransform,function(){this._t2stack||(this._t2stack=[{}]),this._t2stack[this._t2stack.length-1]={a:1,b:0,c:0,d:1,e:0,f:0},a&&a.call(this)}),CanvasRenderingContext2D.prototype.scale=(o=CanvasRenderingContext2D.prototype.scale,function(e,t){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var n=this._t2stack[this._t2stack.length-1];e=e||1,t=t||e,n.a*=e,n.c*=t,n.b*=e,n.d*=t,o.call(this,e,t)}),CanvasRenderingContext2D.prototype.rotate=(s=CanvasRenderingContext2D.prototype.rotate,function(e){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var t=this._t2stack[this._t2stack.length-1],n=Math.cos(-e),r=Math.sin(-e),i=t.a*n-t.c*r,a=t.b*n-t.d*r,o=t.c*n+t.a*r,u=t.d*n+t.b*r;return t.a=i,t.b=a,t.c=o,t.d=u,s.call(this,e)}),CanvasRenderingContext2D.prototype.translate=(u=CanvasRenderingContext2D.prototype.translate,function(e,t){this._t2stack||(this._t2stack=[{a:1,b:0,c:0,d:1,e:0,f:0}]);var n=this._t2stack[this._t2stack.length-1];return n.e+=e*n.a+t*n.c,n.f+=e*n.b+t*n.d,u.call(this,e,t)}))},92710:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./src/CombinePlayerImplement.ts":function(e,t,n){n.d(t,"a",(function(){return v}));var r=n("@babel/runtime/regenerator"),i=n.n(r),a=n("@babel/runtime/helpers/asyncToGenerator"),o=n.n(a),s=n("@babel/runtime/helpers/classCallCheck"),u=n.n(s),c=n("@babel/runtime/helpers/createClass"),l=n.n(c),d=function(e,t,n){"string"==typeof n?console.log("[Combine-Player][".concat(e,"]: ").concat(t," -"),n):console.log("[Combine-Player][".concat(e,"]: ").concat(t," -"),JSON.stringify(n,null,2))},p=n("./src/StatusContant.ts"),h=n("./src/EventEmitter.ts"),f=n("./src/ErrorConstant.ts");function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(){function e(t){u()(this,e),this.videoStatus={current:p.b.PauseBuffering,previous:p.b.PauseBuffering},this.whiteboardStatus={current:p.b.PauseBuffering,previous:p.b.PauseBuffering},this.statusLockInfo={isLocked:!1,allowStatusList:[],unLockStatusList:[]},this.events=new h.a,this.table=void 0,this.debug=function(){},this.statusIgnoreCrashByDisabled=[],this.statusIgnoreCrashByDisabledCallback=function(){return Promise.resolve()},t&&(this.debug=d),this.table=this.initTables()}var t;return l()(e,[{key:"one",value:function(e,t){var n=this;return new Promise((function(r,a){n.events.one(e,function(){var e=o()(i.a.mark((function e(n,o,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=4;break}return e.next=4,t({previous:n,current:o});case 4:r(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0);case 10:return e.prev=10,s(),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t,n,r){return e.apply(this,arguments)}}())}))}},{key:"setOnCrashByDisabledStatus",value:(t=o()(i.a.mark((function e(t){var n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.on(p.c.Disabled,function(){var e=o()(i.a.mark((function e(r){var a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.current,o=a.video,s=a.whiteboard,n.shouldCrash(o,s)&&t();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"oneButNotCrashByDisabled",value:function(e,t){var n=this;return new Promise((function(r,a){if(0!==n.statusIgnoreCrashByDisabled.length)return a(new Error(f.f));n.statusIgnoreCrashByDisabled.push(e);var s=function(){var e=o()(i.a.mark((function e(o,s,u){var c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getStatus(p.a.Whiteboard).current,l=n.getStatus(p.a.Video).current,n.shouldCrash(l,c)){e.next=13;break}if(n.statusIgnoreCrashByDisabled=[],n.statusIgnoreCrashByDisabledCallback=function(){return Promise.resolve()},u(),r(),!t){e.next=11;break}return e.next=11,t({previous:o,current:s});case 11:e.next=14;break;case 13:a(new Error(f.a));case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();n.statusIgnoreCrashByDisabledCallback=s,n.events.one(p.c.Disabled,s)}))}},{key:"cancelOneButNotCrashByDisabled",value:function(){this.events.removeListener(p.c.Disabled,this.statusIgnoreCrashByDisabledCallback),this.statusIgnoreCrashByDisabled=[],this.statusIgnoreCrashByDisabledCallback=function(){return Promise.resolve()}}},{key:"on",value:function(e,t){var n=this;return new Promise((function(r,a){n.events.addListener(e,function(){var e=o()(i.a.mark((function e(n,o,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({previous:n,current:o});case 3:r(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a(e.t0);case 9:return e.prev=9,s(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t,n,r){return e.apply(this,arguments)}}())}))}},{key:"off",value:function(e){if("string"==typeof e)this.events.removeAllListener(e);else for(var t=0;t<e.length;t++)this.events.removeAllListener(e[t])}},{key:"destroy",value:function(){this.events.destroy(),this.unlockCombineStatus()}},{key:"setStatus",value:function(e,t){switch(e){case p.a.Video:if(this.videoStatus.current===t)return;this.videoStatus.current=t,this.debug("Single","Video",p.b[t]);break;case p.a.Whiteboard:if(this.whiteboardStatus.current===t)return;this.whiteboardStatus.current=t,this.debug("Single","Whiteboard",p.b[t])}var n=this.whiteboardStatus.current,r=this.videoStatus.current,i=this.table[n][r];this.statusLockInfo.isLocked?this.statusLockInfo.allowStatusList.includes(i.combineStatus)&&(this.statusLockInfo.unLockStatusList.includes(i.combineStatus)&&this.unlockCombineStatus(),this.dispatchEvent(i)):this.dispatchEvent(i)}},{key:"lockCombineStatus",value:function(e,t){this.statusLockInfo.isLocked||(this.statusLockInfo.isLocked=!0,this.statusLockInfo.allowStatusList=e,this.statusLockInfo.unLockStatusList=t)}},{key:"getCombinationStatus",value:function(){var e=this.videoStatus,t=e.previous,n=e.current,r=this.whiteboardStatus,i=r.previous,a=r.current;return{previous:this.table[i][t].combineStatus,current:this.table[a][n].combineStatus}}},{key:"getStatus",value:function(e){switch(e){case p.a.Video:return{previous:this.videoStatus.previous,current:this.videoStatus.current};case p.a.Whiteboard:return{previous:this.whiteboardStatus.previous,current:this.whiteboardStatus.current}}}},{key:"shouldCrash",value:function(e,t){var n,r=!1,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this.statusIgnoreCrashByDisabled[0]);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.video;if(t===a.whiteboard&&o===e){r=!0;break}}}catch(e){i.e(e)}finally{i.f()}return!r}},{key:"unlockCombineStatus",value:function(){this.statusLockInfo.isLocked=!1,this.statusLockInfo.allowStatusList=[],this.statusLockInfo.unLockStatusList=[]}},{key:"setPreviousStatus",value:function(e,t){this.whiteboardStatus.previous=e,this.videoStatus.previous=t}},{key:"dispatchEvent",value:function(e){var t=this,n=e.videoStatus,r=e.whiteboardStatus,i=e.combineStatus,a={whiteboard:this.getStatus(p.a.Whiteboard).previous,video:this.getStatus(p.a.Video).previous},o={whiteboard:r,video:n};this.debug("CombinedStatus",i,{previous:{whiteboard:p.b[a.whiteboard],video:p.b[a.video]},current:{whiteboard:p.b[o.whiteboard],video:p.b[o.video]}}),this.events.emit(i,a,o,(function(){t.setPreviousStatus(r,n)}))}},{key:"initTables",value:function(){var e=function(e){return function(t,n){return Object.freeze({combineStatus:e,whiteboardStatus:t,videoStatus:n})}},t=e(p.c.PauseSeeking),n=e(p.c.PlayingSeeking),r=e(p.c.PauseBuffering),i=e(p.c.PlayingBuffering),a=e(p.c.ToPlay),o=e(p.c.ToPause),s=e(p.c.Pause),u=e(p.c.Playing),c=e(p.c.Disabled),l=e(p.c.Ended);return Object.freeze([Object.freeze([t(p.b.PauseSeeking,p.b.PauseSeeking),t(p.b.PauseSeeking,p.b.Pause),c(p.b.PauseSeeking,p.b.PauseBuffering),c(p.b.PauseSeeking,p.b.PlayingBuffering),c(p.b.PauseSeeking,p.b.Playing),c(p.b.PauseSeeking,p.b.PlayingSeeking),t(p.b.PauseSeeking,p.b.Ended)]),Object.freeze([t(p.b.Pause,p.b.PauseSeeking),s(p.b.Pause,p.b.Pause),r(p.b.Pause,p.b.PauseBuffering),i(p.b.Pause,p.b.PlayingBuffering),a(p.b.Pause,p.b.Playing),n(p.b.Pause,p.b.PlayingSeeking),l(p.b.Pause,p.b.Ended)]),Object.freeze([c(p.b.PauseBuffering,p.b.PauseSeeking),r(p.b.PauseBuffering,p.b.Pause),r(p.b.PauseBuffering,p.b.PauseBuffering),c(p.b.PauseBuffering,p.b.PlayingBuffering),c(p.b.PauseBuffering,p.b.Playing),c(p.b.PauseBuffering,p.b.PlayingSeeking),c(p.b.PauseBuffering,p.b.Ended)]),[c(p.b.PlayingBuffering,p.b.PauseSeeking),i(p.b.PlayingBuffering,p.b.Pause),c(p.b.PlayingBuffering,p.b.PauseBuffering),i(p.b.PlayingBuffering,p.b.PlayingBuffering),o(p.b.PlayingBuffering,p.b.Playing),c(p.b.PlayingBuffering,p.b.PlayingSeeking),c(p.b.PlayingBuffering,p.b.Ended)],Object.freeze([c(p.b.Playing,p.b.PauseSeeking),a(p.b.Playing,p.b.Pause),c(p.b.Playing,p.b.PauseBuffering),o(p.b.Playing,p.b.PlayingBuffering),u(p.b.Playing,p.b.Playing),o(p.b.Playing,p.b.PlayingSeeking),o(p.b.Playing,p.b.Ended)]),Object.freeze([c(p.b.PlayingSeeking,p.b.PauseSeeking),n(p.b.PlayingSeeking,p.b.Pause),c(p.b.PlayingSeeking,p.b.PauseBuffering),c(p.b.PlayingSeeking,p.b.PlayingBuffering),o(p.b.PlayingSeeking,p.b.Playing),n(p.b.PlayingSeeking,p.b.PlayingSeeking),n(p.b.PlayingSeeking,p.b.Ended)]),Object.freeze([t(p.b.Ended,p.b.PauseSeeking),l(p.b.Ended,p.b.Pause),c(p.b.Ended,p.b.PauseBuffering),c(p.b.Ended,p.b.PlayingBuffering),o(p.b.Ended,p.b.Playing),n(p.b.Ended,p.b.PlayingSeeking),l(p.b.Ended,p.b.Ended)])])}}]),e}(),y=function(){function e(){u()(this,e),this.queue=[],this.isHanding=!1}var t;return l()(e,[{key:"append",value:function(e){var t=this;return new Promise((function(n,r){var i={handler:e,resolve:n,reject:r};t.queue.push(i),t.isHanding||t.startHandingTasksLoop()}))}},{key:"destroy",value:function(){this.queue=[]}},{key:"startHandingTasksLoop",value:(t=o()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.isHanding=!0;case 2:if(!(this.queue.length>0)){e.next=20;break}return t=this.queue[0],e.prev=4,e.t0=t,e.next=8,t.handler();case 8:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(4),t.reject(e.t2);case 15:return e.prev=15,this.queue.shift(),e.finish(15);case 18:e.next=2;break;case 20:e.next=25;break;case 22:throw e.prev=22,e.t3=e.catch(0),new Error(e.t3);case 25:return e.prev=25,this.isHanding=!1,e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[0,22,25,28],[4,12,15,18]])}))),function(){return t.apply(this,arguments)})}]),e}(),v=function(){function e(t){u()(this,e),this.video=void 0,this.whiteboard=void 0,this.videoOptions=void 0,this.stateMachine=void 0,this._playbackRate=1,this.seekTime=NaN,this.triggerSource=p.e.None,this.currentCombineStatus=p.d.PauseBuffering,this.whiteboardEmitter=void 0,this.taskQueue=new y,this.onStatusChangeHandleList=[];var n=t.videoConfig,r=t.whiteboard,i=t.whiteboardEmitter,a=t.debug;this.videoOptions=n.videoOptions,this.video=n.video,this.whiteboard=r,this.whiteboardEmitter=i,this.stateMachine=new m(a),this.initOnCrashByDisabledStatusCallback(),this.initVideo(n.isCanplay),this.initWhiteboard()}var t,n,r,a,s,c,d,h,g,v,b,w,M,x,I,N,T,D;return l()(e,[{key:"setOnStatusChange",value:function(e){this.onStatusChangeHandleList.push(e)}},{key:"removeStatusChange",value:function(e){this.onStatusChangeHandleList=this.onStatusChangeHandleList.filter((function(t){return t!==e}))}},{key:"removeAllStatusChange",value:function(){this.onStatusChangeHandleList=[]}},{key:"getStatus",value:function(){return this.combinedStatus}},{key:"playbackSpeed",value:function(e){this.playbackRate=e}},{key:"stop",value:function(){if(this.currentCombineStatus===p.d.Stopped)throw new Error(f.d);if(this.currentCombineStatus===p.d.Disabled)throw new Error(f.c);this.releaseEvents(),this.onStatusUpdate(p.d.Stopped)}},{key:"play",value:(D=o()(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isNotResponse()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.taskQueue.append(o()(i.a.mark((function e(){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.triggerSource=p.e.Plugin,n=t.stateMachine.getCombinationStatus().current,e.t0=n,e.next=e.t0===p.c.Pause?5:e.t0===p.c.PauseBuffering?8:e.t0===p.c.Ended?24:27;break;case 5:return e.next=7,t.playWhenPause();case 7:return e.abrupt("break",27);case 8:if(r=t.stateMachine.getStatus(p.a.Video).current,a=t.stateMachine.getStatus(p.a.Whiteboard).current,r!==p.b.Pause||a!==p.b.PauseBuffering){e.next=15;break}return e.next=13,t.playWhenVideoIsPauseAndWhiteboardIsPauseBuffering();case 13:e.next=23;break;case 15:if(r!==p.b.PauseBuffering||a!==p.b.Pause){e.next=21;break}return t.onStatusUpdate(p.d.PlayingBuffering),e.next=19,t.playWhenPause();case 19:e.next=23;break;case 21:return e.next=23,t.playWhenAllPlayerIsPauseBuffering();case 23:return e.abrupt("break",27);case 24:return e.next=26,t.playWhenEnded();case 26:return e.abrupt("break",27);case 27:if(isNaN(t.seekTime)){e.next=31;break}return e.next=30,t.seekWhenPlaying(t.seekTime);case 30:t.seekTime=NaN;case 31:t.triggerSource=p.e.None;case 32:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"pause",value:(T=o()(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isNotResponse()){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",this.taskQueue.append(o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.triggerSource=p.e.Plugin,t.stateMachine.getCombinationStatus().current!==p.c.Playing){e.next=5;break}return e.next=5,t.pauseWhenPlaying();case 5:t.triggerSource=p.e.None;case 6:case"end":return e.stop()}}),e)})))));case 3:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"seek",value:(N=o()(i.a.mark((function e(t){var n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isNotResponse()){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",this.taskQueue.append(o()(i.a.mark((function e(){var r,a,o,s,u,c,l,d,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.whiteboard.progressTime,a=n.video.currentTime(),0!==r||0!==a){e.next=5;break}return 0!==t&&(n.seekTime=t),e.abrupt("return");case 5:n.triggerSource=p.e.Plugin,o=n.stateMachine.getCombinationStatus().current,e.t0=o,e.next=e.t0===p.c.Playing?10:e.t0===p.c.Pause||e.t0===p.c.PauseBuffering?13:e.t0===p.c.Ended?23:30;break;case 10:return e.next=12,n.seekWhenPlaying(t);case 12:return e.abrupt("break",30);case 13:if(s=n.getPlayerDuration(),u=s.video,c=s.whiteboard,!(t>u||t>c)){e.next=20;break}return e.next=18,n.seekWhenPauseFinallyIsEnded(t,s);case 18:e.next=22;break;case 20:return e.next=22,n.seekWhenPause(t);case 22:return e.abrupt("break",30);case 23:if(l=n.getPlayerDuration(),d=l.video,h=l.whiteboard,!(t<=d&&t<=h)){e.next=29;break}return e.next=27,n.seekWhenPause(t);case 27:return e.next=29,n.playWhenPause();case 29:return e.abrupt("break",30);case 30:n.triggerSource=p.e.None;case 31:case"end":return e.stop()}}),e)})))));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"initVideo",value:function(e){this.stateMachine.setStatus(p.a.Video,e?p.b.Pause:p.b.PauseBuffering),e||(this.currentCombineStatus=p.d.PauseBuffering),this.initVideoJSEvents()}},{key:"initVideoJSEvents",value:function(){var e=this,t=!1,n=function(t){return o()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.triggerSource!==p.e.None&&e.triggerSource!==p.e.Video){n.next=4;break}return e.triggerSource=p.e.Video,n.next=4,t();case 4:case"end":return n.stop()}}),n)})))};this.video.on("canplay",(function(){var t=e.stateMachine.getStatus(p.a.Whiteboard).current;e.stateMachine.getStatus(p.a.Video).current===p.b.PauseBuffering&&(e.stateMachine.setStatus(p.a.Video,p.b.Pause),t===p.b.Pause&&e.onStatusUpdate(p.d.Pause))})),this.video.on("seeking",n(o()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.taskQueue.append((function(){t=!0}));case 2:case"end":return n.stop()}}),n)}))))),this.video.on("waiting",n(o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.onStatusUpdate(p.d.PlayingBuffering),t.next=3,e.taskQueue.append((function(){return e.pauseWhiteboardWhenVideoWaiting()}));case 3:e.triggerSource=p.e.None;case 4:case"end":return t.stop()}}),t)}))))),this.video.on("playing",n(o()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.taskQueue.append(o()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}return n.abrupt("return",e.playingWhiteboardWhenVideoPlayingDropFrame());case 2:return n.abrupt("return",e.playingWhiteboardWhenVideoPlaying());case 3:case"end":return n.stop()}}),n)}))));case 2:t=!1,e.triggerSource=p.e.None;case 4:case"end":return n.stop()}}),n)}))))),this.video.on("ended",n(o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){return e.pauseWhiteboardWhenVideoEnded()}));case 2:e.triggerSource=p.e.None;case 3:case"end":return t.stop()}}),t)}))))),this.video.on("fullscreenchange",n(o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){var t=e.stateMachine.getStatus(p.a.Video).current;t!==p.b.Playing&&t!==p.b.PlayingBuffering||!e.video.isFullscreen()&&e.video.paused()&&(e.whiteboardEmitter.one("pause",(function(){e.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause),e.stateMachine.setStatus(p.a.Video,p.b.Pause),e.onStatusUpdate(p.d.Pause)})),e.whiteboard.pause()),e.triggerSource=p.e.None}));case 2:case"end":return t.stop()}}),t)})))))}},{key:"initWhiteboard",value:function(){this.initWhiteboardIsPlayable(),this.initWhiteboardEvents(),this.stateMachine.setStatus(p.a.Whiteboard,p.b.PauseBuffering),this.currentCombineStatus=p.d.PauseBuffering,this.whiteboard.seekToProgressTime(0)}},{key:"initWhiteboardIsPlayable",value:function(){var e=this;this.whiteboardEmitter.addListener("playableChange",(function(t){var n=e.stateMachine.getStatus(p.a.Whiteboard).current,r=e.stateMachine.getStatus(p.a.Video).current;t&&n===p.b.PauseBuffering&&(e.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause),r===p.b.Pause&&e.onStatusUpdate(p.d.Pause))}))}},{key:"initWhiteboardEvents",value:function(){var e=this,t=function(t){return o()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.triggerSource!==p.e.None&&e.triggerSource!==p.e.Whiteboard){n.next=5;break}return e.triggerSource=p.e.Whiteboard,n.next=4,t();case 4:e.triggerSource=p.e.None;case 5:case"end":return n.stop()}}),n)})))};this.whiteboardEmitter.addListener("buffering",t(o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){return e.pauseVideoWhenWhiteboardBuffering()}));case 2:case"end":return t.stop()}}),t)}))))),this.whiteboardEmitter.addListener("playing",t(o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){return e.playingVideoWhenWhiteboardPlaying()}));case 2:case"end":return t.stop()}}),t)}))))),this.whiteboardEmitter.addListener("ended",t(o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.taskQueue.append((function(){return e.pauseVideoWhenWhiteboardEnded()}));case 2:case"end":return t.stop()}}),t)})))))}},{key:"playWhenPause",value:(I=o()(i.a.mark((function e(){var t,n,r,a,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.lockCombineStatus([p.c.ToPlay,p.c.Playing],[p.c.Playing]),t=function(){s.stateMachine.setStatus(p.a.Video,p.b.Playing)},n=function(){s.stateMachine.setStatus(p.a.Whiteboard,p.b.Playing)},this.whiteboardEmitter.one("playing",n),r=this.stateMachine.one(p.c.ToPlay,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.whiteboard.play();case 1:case"end":return e.stop()}}),e)})))),a=this.stateMachine.one(p.c.Playing,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.onStatusUpdate(p.d.Playing);case 1:case"end":return e.stop()}}),e)})))),this.video.one("playing",t),this.video.play(),e.next=10,Promise.all([r,a]);case 10:case"end":return e.stop()}}),e,this)}))),function(){return I.apply(this,arguments)})},{key:"playWhenVideoIsPauseAndWhiteboardIsPauseBuffering",value:(x=o()(i.a.mark((function e(){var t,n,r,a,s,u,c,l,d,h=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.lockCombineStatus([p.c.Disabled,p.c.Pause,p.c.PauseBuffering,p.c.ToPlay,p.c.Playing],[p.c.Playing]),t=function(){h.stateMachine.setStatus(p.a.Video,p.b.Playing)},n=function(){h.stateMachine.setStatus(p.a.Video,p.b.Pause)},r=function(){h.stateMachine.setStatus(p.a.Whiteboard,p.b.PlayingBuffering)},a=function(){h.stateMachine.setStatus(p.a.Whiteboard,p.b.Playing)},s=function(){h.whiteboardEmitter.removeListener("playing",a),h.whiteboardEmitter.removeListener("buffering",r),h.video.off("playing",t),h.video.off("pause",n)},this.stateMachine.oneButNotCrashByDisabled([{video:p.b.Playing,whiteboard:p.b.PauseBuffering}],o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.video.pause();case 1:case"end":return e.stop()}}),e)})))).catch((function(e){throw Error(e)})),u=this.stateMachine.one(p.c.PauseBuffering,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.whiteboard.play();case 1:case"end":return e.stop()}}),e)})))),c=this.stateMachine.one(p.c.Pause,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.whiteboard.play();case 1:case"end":return e.stop()}}),e)})))),l=this.stateMachine.one(p.c.ToPlay,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.video.play();case 1:case"end":return e.stop()}}),e)})))),d=this.stateMachine.one(p.c.Playing,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.onStatusUpdate(p.d.Playing),h.stateMachine.off([p.c.PauseBuffering,p.c.Pause,p.c.ToPlay]),s();case 3:case"end":return e.stop()}}),e)})))),this.whiteboardEmitter.one("buffering",r),this.whiteboardEmitter.one("playing",a),this.video.on("playing",t),this.video.one("pause",n),this.video.play(),e.next=18,Promise.all([Promise.race([u,c]),l,d]);case 18:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"playWhenAllPlayerIsPauseBuffering",value:(M=o()(i.a.mark((function e(){var t,n,r,a,s,u,c,l,d,h=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.lockCombineStatus([p.c.Disabled,p.c.ToPause,p.c.ToPlay,p.c.Playing],[p.c.Playing]),t=function(){h.stateMachine.setStatus(p.a.Whiteboard,p.b.PlayingBuffering)},n=function(){h.stateMachine.setStatus(p.a.Whiteboard,p.b.Playing)},r=function(){h.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause)},a=function(){h.stateMachine.setStatus(p.a.Video,p.b.Playing)},s=function(){h.stateMachine.setStatus(p.a.Video,p.b.PlayingBuffering)},u=function(){h.stateMachine.setStatus(p.a.Video,p.b.Pause)},this.stateMachine.oneButNotCrashByDisabled([{video:p.b.PlayingBuffering,whiteboard:p.b.PauseBuffering},{video:p.b.PauseBuffering,whiteboard:p.b.PlayingBuffering}],o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.stateMachine.oneButNotCrashByDisabled([{video:p.b.Playing,whiteboard:p.b.PauseBuffering},{video:p.b.PauseBuffering,whiteboard:p.b.Playing}],function(){var e=o()(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.current).video===p.b.Playing?h.video.pause():n.whiteboard===p.b.Playing&&h.whiteboard.pause();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw Error(e)}));case 1:case"end":return e.stop()}}),e)})))).catch((function(e){throw Error(e)})),c=this.stateMachine.one(p.c.ToPause,function(){var e=o()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.current.video===p.b.Playing?h.video.pause():h.whiteboard.pause();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l=this.stateMachine.one(p.c.ToPlay,function(){var e=o()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.current.video===p.b.Playing?h.whiteboard.play():h.video.play();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d=this.stateMachine.one(p.c.Playing,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.onStatusUpdate(p.d.Playing),h.stateMachine.cancelOneButNotCrashByDisabled(),h.stateMachine.off([p.c.ToPause,p.c.ToPlay]),h.video.off("playing",a),h.whiteboardEmitter.removeListener("playing",n),h.whiteboardEmitter.removeListener("pause",r);case 6:case"end":return e.stop()}}),e)})))),this.whiteboardEmitter.one("buffering",t),this.whiteboardEmitter.addListener("playing",n),this.whiteboardEmitter.one("pause",r),this.video.on("playing",a),this.video.one("play",s),this.video.one("pause",u),this.video.play(),this.whiteboard.play(),e.next=21,Promise.all([Promise.race([c,l]),d]);case 21:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"playWhenEnded",value:(w=o()(i.a.mark((function e(){var t,n,r,a,s,u,c,l,d,h=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onStatusUpdate(p.d.PlayingBuffering),t=NaN,this.stateMachine.lockCombineStatus([p.c.Pause],[p.c.Pause]),n=function(){h.stateMachine.setStatus(p.a.Whiteboard,p.b.PauseSeeking)},r=function(){h.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause)},a=function(){h.whiteboard.pause()},s=function(){h.video.off("pause",u),h.video.off("play",c),h.video.one("play",(function(){h.video.one("pause",(function(){h.stateMachine.setStatus(p.a.Video,p.b.Pause)})),h.video.pause()})),h.video.play()},u=function(){h.video.play()},c=function(){h.video.pause()},l=function(){h.stateMachine.setStatus(p.a.Video,p.b.PauseSeeking),t=window.setInterval((function(){h.video.readyState()>=p.f.HAVE_CURRENT_DATA&&(clearInterval(t),h.video.play())}),500)},d=this.stateMachine.one(p.c.Pause,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.whiteboardEmitter.removeListener("buffering",n),h.whiteboardEmitter.removeListener("playing",a),clearInterval(t),e.next=5,h.playWhenPause();case 5:case"end":return e.stop()}}),e)})))),this.whiteboardEmitter.one("buffering",n),this.whiteboardEmitter.one("pause",r),this.whiteboardEmitter.one("playing",a),this.video.one("seeking",l),this.video.one("seeked",s),this.video.on("play",c),this.video.on("pause",u),this.whiteboard.seekToProgressTime(0),this.video.currentTime(0),e.next=22,d;case 22:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"pauseWhenPlaying",value:(b=o()(i.a.mark((function e(){var t,n,r,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.lockCombineStatus([p.c.Pause],[p.c.Pause]),t=function(){a.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause)},n=function(){a.stateMachine.setStatus(p.a.Video,p.b.Pause)},r=this.stateMachine.one(p.c.Pause,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.onStatusUpdate(p.d.Pause);case 1:case"end":return e.stop()}}),e)})))),this.whiteboardEmitter.one("pause",t),this.video.one("pause",n),this.whiteboard.pause(),this.video.pause(),e.next=10,r;case 10:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"seekWhenPlaying",value:(v=o()(i.a.mark((function e(t){var n,r,a,s,u,c,l,d,h,f,g,m=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onStatusUpdate(p.d.PlayingSeeking),n=NaN,r=this.getPlayerDuration(),this.stateMachine.lockCombineStatus([p.c.Pause,p.c.Ended,p.c.PlayingSeeking],[p.c.Pause,p.c.Ended]),a=function(){m.stateMachine.setStatus(p.a.Whiteboard,p.b.PlayingSeeking)},s=function(){t<r.whiteboard&&m.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause)},u=function(){m.whiteboard.pause()},c=function(){m.stateMachine.setStatus(p.a.Whiteboard,p.b.Ended)},l=function(){m.stateMachine.setStatus(p.a.Video,p.b.PlayingSeeking),n=window.setInterval((function(){m.video.readyState()>=p.f.HAVE_CURRENT_DATA&&(clearInterval(n),t<r.video?(m.video.pause(),m.stateMachine.setStatus(p.a.Video,p.b.Pause)):m.stateMachine.setStatus(p.a.Video,p.b.Ended))}),500)},d=function(){clearInterval(n),m.whiteboardEmitter.removeListener("buffering",a),m.whiteboardEmitter.removeListener("pause",s),m.whiteboardEmitter.removeListener("playing",u),m.whiteboardEmitter.removeListener("ended",c),m.video.off("seeking",l)},h=this.stateMachine.one(p.c.PlayingSeeking,function(){var e=o()(i.a.mark((function e(n){var a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.current,o=a.video,s=a.whiteboard,o===p.b.Ended&&t<r.whiteboard?m.whiteboard.pause():s===p.b.Ended&&t<r.video&&m.video.pause();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=this.stateMachine.one(p.c.Pause,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.stateMachine.off([p.c.Ended]),d(),e.next=4,m.playWhenPause();case 4:case"end":return e.stop()}}),e)})))),g=this.stateMachine.one(p.c.Ended,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.onStatusUpdate(p.d.Ended),m.stateMachine.off([p.c.Pause]),d();case 3:case"end":return e.stop()}}),e)})))),this.video.one("seeking",l),this.whiteboardEmitter.one("buffering",a),this.whiteboardEmitter.one("pause",s),this.whiteboardEmitter.one("playing",u),this.whiteboardEmitter.one("ended",c),this.whiteboard.seekToProgressTime(t),this.video.currentTime(t/1e3),e.next=22,Promise.all([h,Promise.race([f,g])]);case 22:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"seekWhenPause",value:(g=o()(i.a.mark((function e(t){var n,r,a,s,u,c,l,d=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onStatusUpdate(p.d.PauseSeeking),n=NaN,this.stateMachine.lockCombineStatus([p.c.Disabled,p.c.Pause],[p.c.Pause]),r=function(){d.stateMachine.setStatus(p.a.Video,p.b.PauseSeeking),n=window.setInterval((function(){d.video.readyState()>=p.f.HAVE_CURRENT_DATA&&(clearInterval(n),d.stateMachine.setStatus(p.a.Video,p.b.Pause))}),500)},a=function(){d.stateMachine.setStatus(p.a.Whiteboard,p.b.PauseSeeking)},s=function(){d.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause)},u=function(){d.whiteboard.pause()},c=function(){clearInterval(n),d.video.off("seeking",r),d.whiteboardEmitter.removeListener("buffering",a),d.whiteboardEmitter.removeListener("pause",s)},this.stateMachine.oneButNotCrashByDisabled([{video:p.b.PauseSeeking,whiteboard:p.b.PauseSeeking}]).catch((function(e){throw Error(e)})),l=this.stateMachine.one(p.c.Pause,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.onStatusUpdate(p.d.Pause),d.stateMachine.cancelOneButNotCrashByDisabled(),d.stateMachine.off(p.c.Ended),d.whiteboardEmitter.removeListener("playing",u),c();case 5:case"end":return e.stop()}}),e)})))),this.video.one("seeking",r),this.whiteboardEmitter.one("buffering",a),this.whiteboardEmitter.one("playing",u),this.whiteboardEmitter.one("pause",s),this.whiteboard.seekToProgressTime(t),this.video.currentTime(t/1e3),e.next=18,l;case 18:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"seekWhenPauseFinallyIsEnded",value:(h=o()(i.a.mark((function e(t,n){var r,a,s,u,c,l,d,h=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onStatusUpdate(p.d.PauseSeeking),r=NaN,this.stateMachine.lockCombineStatus([p.c.Disabled,p.c.Ended],[p.c.Ended]),a=function(){h.stateMachine.setStatus(p.a.Video,p.b.PauseSeeking),r=window.setInterval((function(){h.video.readyState()>=p.f.HAVE_CURRENT_DATA&&(clearInterval(r),h.stateMachine.setStatus(p.a.Video,p.b.Pause),t>=n.video&&h.stateMachine.setStatus(p.a.Video,p.b.Ended))}),500)},s=function(){t<n.whiteboard&&h.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause)},u=function(){h.stateMachine.setStatus(p.a.Whiteboard,p.b.PauseSeeking)},c=function(){h.stateMachine.setStatus(p.a.Whiteboard,p.b.Ended)},l=function(){clearInterval(r),h.video.off("seeking",a),h.whiteboardEmitter.removeListener("buffering",u),h.whiteboardEmitter.removeListener("pause",s),h.whiteboardEmitter.removeListener("ended",c)},this.stateMachine.oneButNotCrashByDisabled([{video:p.b.PauseSeeking,whiteboard:p.b.PauseSeeking}]).catch((function(e){throw Error(e)})),d=this.stateMachine.on(p.c.Ended,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.onStatusUpdate(p.d.Ended),h.stateMachine.cancelOneButNotCrashByDisabled(),h.stateMachine.off([p.c.Pause,p.c.Ended]),l();case 4:case"end":return e.stop()}}),e)})))),this.video.one("seeking",a),this.whiteboardEmitter.one("buffering",u),this.whiteboardEmitter.one("pause",s),this.whiteboardEmitter.one("ended",c),this.whiteboard.seekToProgressTime(t),this.video.currentTime(t/1e3),e.next=18,d;case 18:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"pauseWhiteboardWhenVideoWaiting",value:(d=o()(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pause"!==this.whiteboard.phase){e.next=2;break}return e.abrupt("return");case 2:return t=this.stateMachine.one(p.c.PlayingBuffering),this.whiteboardEmitter.one("pause",(function(){n.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause)})),this.whiteboard.pause(),this.stateMachine.setStatus(p.a.Video,p.b.PlayingBuffering),e.next=8,t;case 8:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"playingWhiteboardWhenVideoPlayingDropFrame",value:function(){var e=this;this.whiteboardEmitter.one("pause",(function(){e.stateMachine.setStatus(p.a.Whiteboard,p.b.PauseBuffering)}));var t=this.stateMachine.one(p.c.PauseBuffering,o()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.triggerSource=p.e.Plugin,t.abrupt("return",e.playWhenVideoIsPauseAndWhiteboardIsPauseBuffering());case 2:case"end":return t.stop()}}),t)}))));return this.video.one("pause",(function(){e.stateMachine.setStatus(p.a.Video,p.b.Pause),e.whiteboard.seekToProgressTime(1e3*e.video.currentTime())})),this.video.pause(),t}},{key:"playingWhiteboardWhenVideoPlaying",value:(c=o()(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stateMachine.setStatus(p.a.Video,p.b.Playing),t=this.stateMachine.one(p.c.Playing,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.onStatusUpdate(p.d.Playing);case 1:case"end":return e.stop()}}),e)})))),this.whiteboardEmitter.one("playing",(function(){n.stateMachine.setStatus(p.a.Whiteboard,p.b.Playing)})),this.whiteboard.play(),e.next=6,t;case 6:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"pauseVideoWhenWhiteboardBuffering",value:(s=o()(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stateMachine.setStatus(p.a.Whiteboard,p.b.PlayingBuffering),this.onStatusUpdate(p.d.PlayingBuffering),!this.video.paused()){e.next=5;break}return this.stateMachine.setStatus(p.a.Video,p.b.Pause),e.abrupt("return");case 5:return this.video.one("pause",(function(){n.stateMachine.setStatus(p.a.Video,p.b.Pause)})),t=this.stateMachine.one(p.c.PlayingBuffering),this.video.pause(),this.stateMachine.setStatus(p.a.Whiteboard,p.b.PlayingBuffering),e.next=11,t;case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"playingVideoWhenWhiteboardPlaying",value:(a=o()(i.a.mark((function e(){var t,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.stateMachine.one(p.c.ToPlay,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.video.play();case 1:case"end":return e.stop()}}),e)})))),n=this.stateMachine.one(p.c.Playing,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.onStatusUpdate(p.d.Playing);case 1:case"end":return e.stop()}}),e)})))),this.video.one("playing",(function(){r.stateMachine.setStatus(p.a.Video,p.b.Playing)})),this.stateMachine.setStatus(p.a.Whiteboard,p.b.Playing),e.next=6,Promise.all([t,n]);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"pauseVideoWhenWhiteboardEnded",value:(r=o()(i.a.mark((function e(){var t,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stateMachine.setStatus(p.a.Whiteboard,p.b.Ended),(t=this.stateMachine.getStatus(p.a.Video).current)!==p.b.Ended&&t!==p.b.Pause){e.next=4;break}return e.abrupt("return");case 4:return n=this.stateMachine.one(p.c.Ended,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.onStatusUpdate(p.d.Ended);case 1:case"end":return e.stop()}}),e)})))),this.video.one("pause",(function(){r.stateMachine.setStatus(p.a.Video,p.b.Pause)})),this.video.pause(),e.next=9,n;case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"pauseWhiteboardWhenVideoEnded",value:(n=o()(i.a.mark((function e(){var t,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stateMachine.setStatus(p.a.Video,p.b.Ended),(t=this.stateMachine.getStatus(p.a.Whiteboard).current)!==p.b.Ended&&t!==p.b.Pause){e.next=4;break}return e.abrupt("return");case 4:return n=this.stateMachine.one(p.c.Ended,o()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.onStatusUpdate(p.d.Ended);case 1:case"end":return e.stop()}}),e)})))),this.whiteboardEmitter.one("pause",(function(){r.stateMachine.setStatus(p.a.Whiteboard,p.b.Pause)})),this.whiteboard.pause(),e.next=9,n;case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"releaseEvents",value:function(){this.taskQueue.destroy(),this.stateMachine.destroy(),this.whiteboardEmitter.destroy(),this.whiteboard.stop(),this.video.off()}},{key:"initOnCrashByDisabledStatusCallback",value:(t=o()(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stateMachine.setOnCrashByDisabledStatus((function(){t.releaseEvents(),t.onStatusUpdate(p.d.Disabled,f.a)}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onStatusUpdate",value:function(e,t){var n=this;this.isNotResponse()||this.currentCombineStatus!==e&&(this.currentCombineStatus=e,Promise.resolve().then((function(){n.onStatusChangeHandleList.forEach((function(n){"[object AsyncFunction]"==={}.toString.call(n)?n(e,t).catch((function(e){throw Error(e)})):n(e,t)}))})))}},{key:"getPlayerDuration",value:function(){return{whiteboard:this.whiteboard.timeDuration,video:1e3*this.video.duration()}}},{key:"isNotResponse",value:function(){var e=this.currentCombineStatus===p.d.Stopped||this.currentCombineStatus===p.d.Disabled;return e&&console.warn("Currently in the ".concat(this.currentCombineStatus," stage, the program will not respond to the current behavior")),e}},{key:"combinedStatus",get:function(){return this.currentCombineStatus}},{key:"playbackRate",set:function(e){this.isNotResponse()||(this._playbackRate=e,this.whiteboard.playbackSpeed=e,this.video.playbackRate(e))},get:function(){return this._playbackRate}},{key:"timeDuration",get:function(){var e=this.getPlayerDuration(),t=e.video,n=e.whiteboard;return{duration:Math.min(t,n),video:t,whiteboard:n}}}]),e}()},"./src/ErrorConstant.ts":function(e,t,n){n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return d}));var r="[Combine-Player]: URL must be passed in during the instance",i="[Combine-Player]: Accidentally enter the prohibited area!",a="[Combine-Player]: In the current context, there can only be one state method that legally monitors disable",o="[Combine-Player]: Combine-player did stop",s="[Combine-Player]: Combine-player did crash",u="[Combine-Player]: Detects that you are passing both videoElementID and videoDOM parameters, please remove one of them",c="[Combine-Player]: Based on the videoElementID you provided, the relevant element could not be found in the page. Please make sure your element ID is correct",l="[Combine-Player]: Based on the videoElementID you provided, it is found that this element is not a video tag. Please make sure that the videoElementID you passed in is correct",d="[Combine-Player]: Based on the videoDOM you provided, it is found that this element is not a video tag. Please make sure that the videoDOM you passed in is correct"},"./src/EventEmitter.ts":function(e,t,n){n.d(t,"a",(function(){return u}));var r=n("@babel/runtime/helpers/classCallCheck"),i=n.n(r),a=n("@babel/runtime/helpers/createClass"),o=n.n(a),s=function(e){return"function"!=typeof e},u=function(){function e(){i()(this,e),this.listeners=void 0,this.listeners=Object.create(null)}return o()(e,[{key:"addListener",value:function(e,t){if(s(t))throw Error("callback is not a function");var n=this.getEvent(e);n?n.push(t):this.listeners[e]=[t]}},{key:"removeListener",value:function(e,t){var n=this.getEvent(e);if(n)for(var r=0;r<n.length;r++){var i=n[r];i!==t&&i.realCallbackFn!==t||(this.listeners[e].splice(r,1),r--)}}},{key:"removeAllListener",value:function(e){this.getEvent(e)&&delete this.listeners[e]}},{key:"destroy",value:function(){var e=this;Object.keys(this.listeners).forEach((function(t){e.removeAllListener(t)}))}},{key:"one",value:function(e,t){var n=this;if(s(t))throw Error("callback is not a function");var r=function r(){"[object AsyncFunction]"==={}.toString.call(t)?t.apply(void 0,arguments).catch((function(e){throw Error(e)})):t.apply(void 0,arguments),n.removeListener(e,r)};r.realCallbackFn=t,this.addListener(e,r)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this.getEvent(e);i&&i.forEach((function(e){return e.apply(void 0,n)}))}},{key:"getEvent",value:function(e){return this.listeners[e]||null}}]),e}()},"./src/StatusContant.ts":function(e,t,n){var r,i,a,o,s,u;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u})),function(e){e[e.PauseSeeking=0]="PauseSeeking",e[e.Pause=1]="Pause",e[e.PauseBuffering=2]="PauseBuffering",e[e.PlayingBuffering=3]="PlayingBuffering",e[e.Playing=4]="Playing",e[e.PlayingSeeking=5]="PlayingSeeking",e[e.Ended=6]="Ended"}(r||(r={})),function(e){e.PauseSeeking="PauseSeeking",e.PlayingSeeking="PlayingSeeking",e.PauseBuffering="PauseBuffering",e.PlayingBuffering="PlayingBuffering",e.ToPlay="ToPlay",e.ToPause="ToPause",e.Pause="Pause",e.Playing="Playing",e.Disabled="Disabled",e.Ended="Ended"}(i||(i={})),function(e){e.PauseSeeking="PauseSeeking",e.PlayingSeeking="PlayingSeeking",e.Pause="Pause",e.PauseBuffering="PauseBuffering",e.PlayingBuffering="PlayingBuffering",e.Playing="Playing",e.Ended="Ended",e.Disabled="Disabled",e.Stopped="Stopped"}(a||(a={})),function(e){e[e.Video=0]="Video",e[e.Whiteboard=1]="Whiteboard"}(o||(o={})),function(e){e[e.None=0]="None",e[e.Video=1]="Video",e[e.Whiteboard=2]="Whiteboard",e[e.Plugin=3]="Plugin"}(s||(s={})),function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(u||(u={}))},"./src/Types.ts":function(e,t){},"./src/Verification.ts":function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("./src/ErrorConstant.ts"),i=function(e){if(!e.url)throw Error(r.e);if(void 0!==e.videoElementID){var t=document.getElementById(e.videoElementID);if(null===t)throw new Error(r.b);if("video"!==t.tagName.toLowerCase())throw new Error(r.i)}if(e.videoElementID&&e.videoDOM)throw new Error(r.g);if(void 0!==e.videoDOM&&"video"!==e.videoDOM.tagName.toLowerCase())throw new Error(r.h)}},"./src/index.ts":function(e,t,n){n.r(t),n.d(t,"default",(function(){return b}));var r=n("@babel/runtime/helpers/defineProperty"),i=n.n(r),a=n("@babel/runtime/helpers/classCallCheck"),o=n.n(a),s=n("@babel/runtime/helpers/createClass"),u=n.n(s),c=n("./src/Verification.ts"),l=n("./src/EventEmitter.ts"),d=n("./src/CombinePlayerImplement.ts"),p=n("video.js"),h=n.n(p),f=n("./src/StatusContant.ts"),g=n("./src/Types.ts");for(var m in g)["default"].indexOf(m)<0&&function(e){n.d(t,e,(function(){return g[e]}))}(m);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"AtomPlayerStatus",(function(){return f.b})),n.d(t,"CombinePlayerStatus",(function(){return f.c})),n.d(t,"PublicCombinedStatus",(function(){return f.d})),n.d(t,"AtomPlayerSource",(function(){return f.a})),n.d(t,"TriggerSource",(function(){return f.e})),n.d(t,"VideoReadyState",(function(){return f.f}));var b=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o()(this,e),this.videoOptions=void 0,this.whiteboard=void 0,this.debug=void 0,Object(c.a)(n);var i=e.videoDefaultOptions(n);this.videoOptions=v(v(v({},i),n),{},{videoJsOptions:v(v({},i.videoJsOptions),n.videoJsOptions)}),this.whiteboard=t,this.debug=r}return u()(e,[{key:"create",value:function(){var e=new l.a;this.handleWhiteboardCallback(e);var t=this.getVideoDOM(),n=h()(t,this.videoOptions.videoJsOptions);return n.src(this.videoOptions.url),new d.a({videoConfig:{videoOptions:this.videoOptions,video:n,isCanplay:n.readyState()>f.f.HAVE_CURRENT_DATA},whiteboard:this.whiteboard,whiteboardEmitter:e,debug:this.debug})}},{key:"getVideoDOM",value:function(){return void 0!==this.videoOptions.videoElementID?document.getElementById(this.videoOptions.videoElementID):this.videoOptions.videoDOM}},{key:"handleWhiteboardCallback",value:function(e){this.whiteboard.callbacks.on("onPhaseChanged",(function(t){e.emit(t)})),this.whiteboard.callbacks.on("onIsPlayableChanged",(function(t){e.emit("playableChange",t)}))}}],[{key:"videoDefaultOptions",value:function(e){var t={videoJsOptions:{preload:"auto"}};return e.videoDOM||e.videoElementID||(t.videoDOM=document.createElement("video")),t}}]),e}()},0:function(e,t,n){e.exports=n("./src/index.ts")},"@babel/runtime/helpers/asyncToGenerator":function(e,t){e.exports=n(34397)},"@babel/runtime/helpers/classCallCheck":function(e,t){e.exports=n(57750)},"@babel/runtime/helpers/createClass":function(e,t){e.exports=n(67338)},"@babel/runtime/helpers/defineProperty":function(e,t){e.exports=n(91566)},"@babel/runtime/regenerator":function(e,t){e.exports=n(64910)},"video.js":function(e,t){e.exports=n(30825)}})},20597:function(e,t,n){var r,i,a,o;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}e=n.nmd(e),window,o=function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==s(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5zaGFwZS1jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNjQuNiUiIHk9Ii01OS41JSIgd2lkdGg9IjIyOS4zJSIgaGVpZ2h0PSIyNDYuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd0JsdXJPdXRlcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbXBvc2l0ZT4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMTYgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi00IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iV2hpdGVib2FyZC1HdWlkZWxpbmVzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ0LjAwMDAwMCwgLTc1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNoYXBlLWN1cnNvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgNzUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkh+S7vS00NCIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC4wMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMjAsMjEgQzIwLjQ4NTQxMDMsMjEgMjAuODk4MDg1LDIxLjM0Nzk5OTMgMjAuOTg5OTQ3OSwyMS44NjU0ODc3IEwyMSwyMiBMMjEsMjcgQzIxLDI3LjU1MjI4NDcgMjAuNTUyMjg0NywyOCAyMCwyOCBDMTkuNTE0NTg5NywyOCAxOS4xMDE5MTUsMjcuNjUyMDAwNyAxOS4wMTAwNTIxLDI3LjEzNDUxMjMgTDE5LDI3IEwxOSwyMiBDMTksMjEuNDQ3NzE1MyAxOS40NDc3MTUzLDIxIDIwLDIxIFogTTI3LDE5IEMyNy41NTIyODQ3LDE5IDI4LDE5LjQ0NzcxNTMgMjgsMjAgQzI4LDIwLjQ4NTQxMDMgMjcuNjUyMDAwNywyMC44OTgwODUgMjcuMTM0NTEyMywyMC45ODk5NDc5IEwyNywyMSBMMjIsMjEgQzIxLjQ0NzcxNTMsMjEgMjEsMjAuNTUyMjg0NyAyMSwyMCBDMjEsMTkuNTE0NTg5NyAyMS4zNDc5OTkzLDE5LjEwMTkxNSAyMS44NjU0ODc3LDE5LjAxMDA1MjEgTDIyLDE5IEwyNywxOSBaIE0xOCwxOSBDMTguNTUyMjg0NywxOSAxOSwxOS40NDc3MTUzIDE5LDIwIEMxOSwyMC40ODU0MTAzIDE4LjY1MjAwMDcsMjAuODk4MDg1IDE4LjEzNDUxMjMsMjAuOTg5OTQ3OSBMMTgsMjEgTDEzLDIxIEMxMi40NDc3MTUzLDIxIDEyLDIwLjU1MjI4NDcgMTIsMjAgQzEyLDE5LjUxNDU4OTcgMTIuMzQ3OTk5MywxOS4xMDE5MTUgMTIuODY1NDg3NywxOS4wMTAwNTIxIEwxMywxOSBMMTgsMTkgWiBNMjAsMTIgQzIwLjQ4NTQxMDMsMTIgMjAuODk4MDg1LDEyLjM0Nzk5OTMgMjAuOTg5OTQ3OSwxMi44NjU0ODc3IEwyMSwxMyBMMjEsMTggQzIxLDE4LjU1MjI4NDcgMjAuNTUyMjg0NywxOSAyMCwxOSBDMTkuNTE0NTg5NywxOSAxOS4xMDE5MTUsMTguNjUyMDAwNyAxOS4wMTAwNTIxLDE4LjEzNDUxMjMgTDE5LDE4IEwxOSwxMyBDMTksMTIuNDQ3NzE1MyAxOS40NDc3MTUzLDEyIDIwLDEyIFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTguNSIgeT0iMTciIHdpZHRoPSIzIiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNGRkZGRkYiIHg9IjE3IiB5PSIxOC41IiB3aWR0aD0iNiIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMzI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT50ZXh0LWN1cnNvcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwyNi41IEMxNS43MjM4NTc2LDI2LjUgMTUuNSwyNi4yNzYxNDI0IDE1LjUsMjYgQzE1LjUsMjUuNzU0NTQwMSAxNS42NzY4NzUyLDI1LjU1MDM5MTYgMTUuOTEwMTI0NCwyNS41MDgwNTU3IEwxNiwyNS41IEwxOS41LDI1LjUgTDE5LjUsMTQuNSBMMTYsMTQuNSBDMTUuNzIzODU3NiwxNC41IDE1LjUsMTQuMjc2MTQyNCAxNS41LDE0IEMxNS41LDEzLjc1NDU0MDEgMTUuNjc2ODc1MiwxMy41NTAzOTE2IDE1LjkxMDEyNDQsMTMuNTA4MDU1NyBMMTYsMTMuNSBMMjQsMTMuNSBDMjQuMjc2MTQyNCwxMy41IDI0LjUsMTMuNzIzODU3NiAyNC41LDE0IEMyNC41LDE0LjI0NTQ1OTkgMjQuMzIzMTI0OCwxNC40NDk2MDg0IDI0LjA4OTg3NTYsMTQuNDkxOTQ0MyBMMjQsMTQuNSBMMjAuNSwxNC41IEwyMC41LDI1LjUgTDI0LDI1LjUgQzI0LjI3NjE0MjQsMjUuNSAyNC41LDI1LjcyMzg1NzYgMjQuNSwyNiBDMjQuNSwyNi4yNDU0NTk5IDI0LjMyMzEyNDgsMjYuNDQ5NjA4NCAyNC4wODk4NzU2LDI2LjQ5MTk0NDMgTDI0LDI2LjUgTDE2LDI2LjUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4NC4wJSIgeT0iLTgxLjUlIiB3aWR0aD0iNjY4LjElIiBoZWlnaHQ9IjI5My45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xNiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iLTQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXaGl0ZWJvYXJkLUd1aWRlbGluZXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODguMDAwMDAwLCAtNjcyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0idGV4dC1jdXJzb3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Mi4wMDAwMDAsIDY3Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNDAiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuMDEiIHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSIgZD0iTTE5LDI1IEwxOSwxNSBMMTYsMTUgQzE1LjQ0NzcxNTMsMTUgMTUsMTQuNTUyMjg0NyAxNSwxNCBDMTUsMTMuNTE0NTg5NyAxNS4zNDc5OTkzLDEzLjEwMTkxNSAxNS44NjU0ODc3LDEzLjAxMDA1MjEgTDE2LDEzIEwyNCwxMyBDMjQuNTUyMjg0NywxMyAyNSwxMy40NDc3MTUzIDI1LDE0IEMyNSwxNC40ODU0MTAzIDI0LjY1MjAwMDcsMTQuODk4MDg1IDI0LjEzNDUxMjMsMTQuOTg5OTQ3OSBMMjQsMTUgTDIxLDE1IEwyMSwyNSBMMjQsMjUgQzI0LjU1MjI4NDcsMjUgMjUsMjUuNDQ3NzE1MyAyNSwyNiBDMjUsMjYuNDg1NDEwMyAyNC42NTIwMDA3LDI2Ljg5ODA4NSAyNC4xMzQ1MTIzLDI2Ljk4OTk0NzkgTDI0LDI3IEwxNiwyNyBDMTUuNDQ3NzE1MywyNyAxNSwyNi41NTIyODQ3IDE1LDI2IEMxNSwyNS41MTQ1ODk3IDE1LjM0Nzk5OTMsMjUuMTAxOTE1IDE1Ljg2NTQ4NzcsMjUuMDEwMDUyMSBMMTYsMjUgTDE5LDI1IFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(e,t,n){n.r(t),n.d(t,"CursorTool",(function(){return v}));var r,i=n(0),a=n(1),o=n(2),s=n.n(o),u=n(3),c=n.n(u),l=n(4),d=n.n(l),p=n(5),h=n.n(p),f=n(6),g=n.n(f),m=(n(8),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y=function(e){function t(t){var n=e.call(this,t)||this;return n.renderAvatar=function(e){var t,r="rgb("+e.memberState.strokeColor[0]+", "+e.memberState.strokeColor[1]+", "+e.memberState.strokeColor[2]+")";if(n.detectAvatar(e)){var a=n.detectCursorName(e);return i.createElement("img",{className:"cursor-selector-avatar",style:{width:a?19:28,height:a?19:28,position:a?"initial":"absolute",borderColor:a?"white":r,marginRight:a?4:0},src:null===(t=e.payload)||void 0===t?void 0:t.avatar,alt:"avatar"})}return null},n.getOpacity=function(e){var t=n.getCursorName(e),r=n.detectAvatar(e);return void 0===t&&void 0===r?0:1},n.getCursorName=function(e){return e.payload&&e.payload.cursorName?e.payload.cursorName:void 0},n.getThemeClass=function(e){return e.payload&&e.payload.theme?"cursor-inner-mellow":"cursor-inner"},n.getCursorBackgroundColor=function(e){var t=n.detectCursorName(e);return e.payload&&e.payload.cursorBackgroundColor?e.payload.cursorBackgroundColor:t?"rgb("+e.memberState.strokeColor[0]+", "+e.memberState.strokeColor[1]+", "+e.memberState.strokeColor[2]+")":void 0},n.getCursorTextColor=function(e){return e.payload&&e.payload.cursorTextColor?e.payload.cursorTextColor:"#FFFFFF"},n.getCursorTagBackgroundColor=function(e){return e.payload&&e.payload.cursorTagBackgroundColor?e.payload.cursorTagBackgroundColor:n.getCursorBackgroundColor(e)},n.detectCursorName=function(e){return!(!e.payload||!e.payload.cursorName)},n.detectAvatar=function(e){return!(!e.payload||!e.payload.avatar)},n.renderTag=function(e){return e.payload&&e.payload.cursorTagName?i.createElement("span",{className:"cursor-tag-name",style:{backgroundColor:n.getCursorTagBackgroundColor(e)}},e.payload.cursorTagName):void 0},n}return m(t,e),t.prototype.render=function(){var e=this.props.roomMember,t=this.getCursorName(e);switch(e.memberState.currentApplianceName){case a.ApplianceNames.pencil:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-mid cursor-pencil-offset"},i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),t,this.renderTag(e))),i.createElement("div",null,i.createElement("img",{className:"cursor-pencil-image",src:s.a,alt:"pencilCursor"}))));case a.ApplianceNames.selector:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-mid cursor-selector-offset"},i.createElement("div",null,i.createElement("img",{className:"cursor-selector-image",src:c.a,alt:"selectorCursor"})),i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),t,this.renderTag(e)))));case a.ApplianceNames.eraser:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-mid cursor-pencil-offset"},i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),t,this.renderTag(e))),i.createElement("div",null,i.createElement("img",{className:"cursor-pencil-image",src:d.a,alt:"selectorCursor"}))));case a.ApplianceNames.text:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-text-offset cursor-mid"},i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),t,this.renderTag(e))),i.createElement("div",null,i.createElement("img",{src:g.a,alt:"selectorCursor"}))));default:return i.createElement("div",{className:"cursor-box"},i.createElement("div",{className:"cursor-shape-offset cursor-mid"},i.createElement("div",{className:"cursor-name"},i.createElement("div",{style:{opacity:this.getOpacity(e),backgroundColor:this.getCursorBackgroundColor(e),color:this.getCursorTextColor(e)},className:this.getThemeClass(e)},this.renderAvatar(e),t,this.renderTag(e))),i.createElement("div",null,i.createElement("img",{src:h.a,alt:"shapeCursor"}))))}},t}(i.Component),v=function(){function e(){this.cursors={},this.roomMembers=[],this.isFirstFrameReady=!1,this.isCursorDisappear=function(e){return!(!e.payload||!e.payload.disappearCursor)}}return e.prototype.createCursor=function(){return{x:64,y:64,width:128,height:128}},e.prototype.onAddedCursor=function(e){for(var t=0,n=this.roomMembers;t<n.length;t++){var r=n[t];if(r.memberId===e.memberId&&!this.isCursorDisappear(r)){e.setReactNode(i.createElement(y,{roomMember:r}));break}}this.cursors[e.memberId]=e},e.prototype.onRemovedCursor=function(e){delete this.cursors[e.memberId]},e.prototype.onMovingCursor=function(){},e.prototype.setRoom=function(e){var t=this;this.setColorAndAppliance(e.state.roomMembers),e.callbacks.on("onRoomStateChanged",(function(e){e.roomMembers&&t.setColorAndAppliance(e.roomMembers)}))},e.prototype.setPlayer=function(e){var t=this;this.isFirstFrameReady&&this.setColorAndAppliance(e.state.roomMembers),e.callbacks.on("onPlayerStateChanged",(function(e){e.roomMembers&&t.setColorAndAppliance(e.roomMembers)})),e.callbacks.on("onLoadFirstFrame",(function(){t.isFirstFrameReady=!0,t.setColorAndAppliance(e.state.roomMembers)}))},e.prototype.setColorAndAppliance=function(e){this.roomMembers=e;for(var t=0,n=e;t<n.length;t++){var r=n[t],a=this.cursors[r.memberId];a&&!this.isCursorDisappear(r)&&a.setReactNode(i.createElement(y,{roomMember:r}))}},e}()},function(e,t,n){var r=n(9),i=n(10);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var d=o(l),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:l,updater:g(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,f=0;function g(e,t){var n,r,i;if(t.singleton){var a=f++;n=h||(h=u(t)),r=d.bind(null,n,a,!1),i=d.bind(null,n,a,!0)}else n=u(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=o(n[r]);a[i].references--}for(var u=s(e,t),c=0;c<n.length;c++){var l=o(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=u}}}},function(e,t,n){(t=n(11)(!1)).push([e.i,".cursor-box-tool {\n  position: absolute;\n  z-index: 3;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  margin-top: -24px;\n  margin-left: 16px;\n  border: 1px solid white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.cursor-box-tool img {\n  width: 12px;\n}\n.cursor-box {\n  color: white;\n  padding: 4px;\n  border-radius: 2px;\n  width: 100%;\n  height: 100%;\n}\n.cursor-pencil-image {\n  width: 26px;\n  height: 26px;\n}\n.cursor-selector-image {\n  width: 24px;\n  height: 24px;\n}\n.cursor-selector-avatar {\n  border-radius: 50%;\n  border-style: solid;\n  border-width: 2px;\n  border-color: white;\n  margin-bottom: 2px;\n}\n.cursor-inner {\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: row;\n  padding-left: 4px;\n  padding-right: 4px;\n  font-size: 12px;\n}\n.cursor-inner-mellow {\n  height: 32px;\n  border-radius: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: row;\n  padding-left: 16px;\n  padding-right: 16px;\n}\n.cursor-tag-name {\n  font-size: 12px;\n  margin-left: 4px;\n  padding: 2px 8px;\n  border-radius: 4px;\n}\n.cursor-mid {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  width: 180px;\n  height: 64px;\n}\n.cursor-pencil-offset {\n  margin-left: -20px;\n}\n.cursor-selector-offset {\n  margin-left: -22px;\n  margin-top: 56px;\n}\n.cursor-text-offset {\n  margin-left: -30px;\n  margin-top: 18px;\n}\n.cursor-shape-offset {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  width: 180px;\n  height: 64px;\n  margin-left: -30px;\n  margin-top: 12px;\n}\n.cursor-name {\n  width: 100%;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n",""]),e.exports=t},function(e,t,n){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var s=(n=o,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(u).concat([s]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}}])},"object"==s(t)&&"object"==s(e)?e.exports=o(n(17328),n(71895)):(i=[n(17328),n(71895)],void 0===(a="function"==typeof(r=o)?r.apply(t,i):r)||(e.exports=a))},91037:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.IframeWrapper=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(17328)),a=n(24645);function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}var s,u=(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(n){var r=e.call(this,n)||this;return r.styleDom=null,r.ref=i.createRef(),r.state={canDisplay:!0,className:t.hiddenClass},r.injectCss(),a.IframeBridge.emitter.on(a.IframeEvents.Destory,(function(){r.setState({canDisplay:!1})})),a.IframeBridge.emitter.on(a.IframeEvents.StartCreate,(function(){r.setState({canDisplay:!0})})),a.IframeBridge.emitter.on(a.IframeEvents.DispayIframe,(function(){r.setState({className:void 0})})),a.IframeBridge.emitter.on(a.IframeEvents.HideIframe,(function(){r.setState({className:t.hiddenClass})})),a.IframeBridge.emitter.on(a.IframeEvents.GetRootRect,(function(){if(r.ref.current){var e=r.ref.current.parentElement;if(e){var t=e.getBoundingClientRect();a.IframeBridge.emitter.emit(a.IframeEvents.ReplayRootRect,t)}}})),r}return u(t,e),t.prototype.componentDidMount=function(){a.IframeBridge.emitter.emit(a.DomEvents.WrapperDidMount)},t.prototype.componentWillUnmount=function(){var e;this.styleDom&&(null===(e=this.styleDom.parentNode)||void 0===e||e.removeChild(this.styleDom))},t.prototype.componentDidUpdate=function(){a.IframeBridge.emitter.emit(a.IframeEvents.WrapperDidUpdate)},t.prototype.injectCss=function(){var e=document.createElement("style"),n="\n            ."+t.hiddenClass+" {\n                display: none;\n            }\n        ";this.styleDom=e,e.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(e)},t.prototype.render=function(){return i.createElement(i.Fragment,null,this.props.children,this.state.canDisplay&&i.createElement("iframe",{ref:this.ref,id:a.IframeBridge.kind,className:this.state.className}))},t.hiddenClass="netless-iframe-brdige-hidden",t}(i.Component);t.IframeWrapper=c},24645:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={IframeEvents:!0,DomEvents:!0,IframeBridge:!0};t.IframeBridge=t.DomEvents=t.IframeEvents=void 0;var i,a=n(71895),o=n(10772),s=n(24182),u=(i=n(83532))&&i.__esModule?i:{default:i},c=n(91037);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var l,d,p,h=(l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},l(e,t)},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},g=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},m=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};t.IframeEvents=d,function(e){e.Init="Init",e.AttributesUpdate="AttributesUpdate",e.SetAttributes="SetAttributes",e.RegisterMagixEvent="RegisterMagixEvent",e.RemoveMagixEvent="RemoveMagixEvent",e.RemoveAllMagixEvent="RemoveAllMagixEvent",e.RoomStateChanged="RoomStateChanged",e.DispatchMagixEvent="DispatchMagixEvent",e.ReciveMagixEvent="ReciveMagixEvent",e.NextPage="NextPage",e.PrevPage="PrevPage",e.SDKCreate="SDKCreate",e.OnCreate="OnCreate",e.SetPage="SetPage",e.GetAttributes="GetAttributes",e.Ready="Ready",e.Destory="Destory",e.StartCreate="StartCreate",e.WrapperDidUpdate="WrapperDidUpdate",e.DispayIframe="DispayIframe",e.HideIframe="HideIframe",e.GetRootRect="GetRootRect",e.ReplayRootRect="ReplayRootRect",e.PageTo="PageTo"}(d||(t.IframeEvents=d={})),t.DomEvents=p,function(e){e.WrapperDidMount="WrapperDidMount",e.IframeLoad="IframeLoad"}(p||(t.DomEvents=p={}));var y=function(e){function t(n){var r=e.call(this,n)||this;return r.iframe=null,r.magixEventMap=new Map,r.cssList=[],r.allowAppliances=["clicker"],r.rootRect=null,r.execListenIframe=(0,u.default)((function(e){r.listenIframe(e)}),50),r.onPhaseChangedListener=function(e){e===a.PlayerPhase.Playing&&r.computedStyleAndIframeDisplay()},r.stateChangeListener=function(e){r.postMessage({kind:d.RoomStateChanged,payload:e}),e.cameraState&&(t.emitter.emit(d.GetRootRect),r.computedStyle(e)),e.memberState&&(r.computedZindex(),r.updateStyle()),e.sceneState&&r.computedIframeDisplay(e,r.attributes)},t.emitter.setMaxListeners(100),t.displayer=n.displayer,t.emitter.on("created",(function(){t.emitter.on(d.ReplayRootRect,(function(e){r.rootRect=e})),r.bridgeDisposer=(0,a.autorun)((function(){var e,t=r.attributes;if(t.url){var n=null===(e=r.iframe)||void 0===e?void 0:e.src;n&&n!==t.url&&r.execListenIframe(t)}t.displaySceneDir&&r.computedIframeDisplay(r.displayer.state,t),(t.width||t.height)&&r.iframe&&(r.iframe.width=t.width+"px",r.iframe.height=t.height+"px"),r.postMessage({kind:d.AttributesUpdate,payload:t})}))})),r}return h(t,e),t.onCreate=function(e){t.emitter.emit(d.StartCreate);var n=e.attributes;n.url&&n.height&&n.width&&(t.alreadyCreate||e.insertByOnCreate(f(f({},n),{displayer:this.displayer}))),t.emitter.emit(d.OnCreate,e),t.emitter.emit("created")},t.prototype.onDestroy=function(){this._destory()},t.insert=function(e){return g(this,void 0,void 0,(function(){var n,r,i;return m(this,(function(a){switch(a.label){case 0:return(n=e.room.getInvisiblePlugin(t.kind))?(console.warn("plugin already inserted, can't re-insert"),[2,n]):(r={url:e.url,width:e.width,height:e.height,displaySceneDir:e.displaySceneDir,useClicker:e.useClicker||!1,useSelector:e.useSelector},t.alreadyCreate=!0,[4,e.room.createInvisiblePlugin(t,r)]);case 1:return(i=a.sent()).baseInsert(e),[2,i]}}))}))},t.prototype.insertByOnCreate=function(e){e.displayer.getInvisiblePlugin(t.kind).baseInsert(e)},t.prototype.baseInsert=function(e){var n=this,r=function(){n.getIframe(),n.listenIframe(e),n.listenDisplayerState(),t.emitter.emit(d.GetRootRect)};return this.getIframe()?r():(t.emitter.once(p.WrapperDidMount,r),t.emitter.once(d.WrapperDidUpdate,r)),this.attributes.useSelector&&this.allowAppliances.push("selector"),this.computedStyle(this.displayer.state),this.listenDisplayerCallbacks(),this.getComputedIframeStyle(),window.addEventListener("message",this.messageListener.bind(this)),this},t.prototype.getComputedIframeStyle=function(){var e=this;setTimeout((function(){e.iframe&&getComputedStyle(e.iframe)}),200)},t.prototype.destroy=function(){this._destory(),e.prototype.destroy.call(this)},t.prototype.getIframe=function(){var e=document.getElementById(t.kind);return this.iframe=e,e},t.prototype.setIframeSize=function(e){this.iframe&&(this.iframe.width=e.width+"px",this.iframe.height=e.height+"px",this.setAttributes({width:e.width,height:e.height}))},t.prototype.scaleIframeToFit=function(e){if(void 0===e&&(e=a.AnimationMode.Immediately),this.inDisplaySceneDir){var t=-this.attributes.width/2,n=-this.attributes.height/2,r=this.attributes.width,i=this.attributes.height;this.displayer.moveCameraToContain({originX:t,originY:n,width:r,height:i,animationMode:e})}},t.prototype.handleSetPage=function(e){if(!this.isReplay){var t=e.payload,n=this.displayer,r=n.entireScenes()[this.attributes.displaySceneDir];if(!r||r.length!==t){var i=(0,s.times)(t,(function(e){return{name:String(e+1)}}));n.putScenes(this.attributes.displaySceneDir,i),n.setScenePath(this.attributes.displaySceneDir)}}},t.prototype.listenIframe=function(e){var n=this,r=document.getElementById(t.kind),i=function(e){if(n.postMessage({kind:d.Init,payload:{attributes:n.attributes,roomState:t.displayer.state,currentPage:n.currentPage,observerId:n.displayer.observerId}}),t.emitter.emit(p.IframeLoad,e),t.emitter.on(d.Ready,(function(){var e;n.postMessage(null===(e=n.attributes.lastEvent)||void 0===e?void 0:e.payload)})),n.computedStyleAndIframeDisplay(),(0,a.isRoom)(n.displayer)){var r=n.displayer;r.moveCamera({scale:r.state.cameraState.scale+.005,animationMode:a.AnimationMode.Immediately})}};r.src&&r.removeEventListener("load",i),this.iframe=r,r.src=e.url,r.width=e.width+"px",r.height=e.height+"px",r.addEventListener("load",i)},t.prototype.listenDisplayerState=function(){if(this.isReplay){this.displayer._phase===a.PlayerPhase.Playing&&(this.computedStyleAndIframeDisplay(),!0),this.displayer.callbacks.on("onPhaseChanged",this.onPhaseChangedListener)}this.computedStyleAndIframeDisplay()},t.prototype.computedStyleAndIframeDisplay=function(){this.computedStyle(this.displayer.state),this.computedIframeDisplay(this.displayer.state,this.attributes)},t.prototype.listenDisplayerCallbacks=function(){this.displayer.callbacks.on(this.callbackName,this.stateChangeListener)},Object.defineProperty(t.prototype,"callbackName",{get:function(){return this.isReplay?"onPlayerStateChanged":"onRoomStateChanged"},enumerable:!1,configurable:!0}),t.prototype.computedStyle=function(e){var t=e.cameraState;if(this.iframe){var n=t.width,r=t.height,i=t.scale,a=t.centerX,o=t.centerY,s=this.rootRect||{x:0,y:0},u=["position: absolute;","border: 0.1px solid rgba(0,0,0,0);","top: 0px;","left: 0px;","transform-origin: "+(n/2+s.x+"px")+" "+(r/2+s.y+"px")+";","transform: translate("+(-a*i+(n-this.attributes.width)/2*i)+"px,"+(-o*i+(r-this.attributes.height)/2*i)+"px) scale("+i+", "+i+");"];this.cssList=u,this.computedZindex(),this.updateStyle()}},t.prototype.computedIframeDisplay=function(e,n){e.sceneState.scenePath.startsWith(n.displaySceneDir)?t.emitter.emit(d.DispayIframe):t.emitter.emit(d.HideIframe)},t.prototype.computedZindex=function(){var e="z-index: -1;",t=this.cssList.findIndex((function(t){return t===e}));-1!==t&&this.cssList.splice(t,1),this.isClicker()&&!this.isDisableInput||this.cssList.push(e)},t.prototype.updateStyle=function(){this.iframe&&(this.iframe.style.cssText=this.cssList.join(" "))},t.prototype.messageListener=function(e){if(e.origin===this.iframeOrigin){var t=e.data;switch(t.kind){case d.SetAttributes:this.handleSetAttributes(t);break;case d.RegisterMagixEvent:this.handleRegisterMagixEvent(t);break;case d.RemoveMagixEvent:this.handleRemoveMagixEvent(t);break;case d.DispatchMagixEvent:this.handleDispatchMagixEvent(t);break;case d.RemoveAllMagixEvent:this.handleRemoveAllMagixEvent();break;case d.NextPage:this.handleNextPage();break;case d.PrevPage:this.handlePrevPage();break;case d.SDKCreate:this.handleSDKCreate();break;case d.SetPage:this.handleSetPage(t);break;case d.GetAttributes:this.handleGetAttributes();break;case d.PageTo:this.handlePageTo(t)}}},t.prototype.handleSDKCreate=function(){this.postMessage({kind:d.Init,payload:{attributes:this.attributes,roomState:t.displayer.state,currentPage:this.currentPage,observerId:this.displayer.observerId}})},t.prototype.handleDispatchMagixEvent=function(e){var t=e.payload;this.dispatchMagixEvent(t.event,t.payload)},t.prototype.handleSetAttributes=function(e){this.setAttributes(e.payload)},t.prototype.handleRegisterMagixEvent=function(e){var t=this,n=e.payload,r=function(e){e.authorId!==t.displayer.observerId&&t.postMessage({kind:d.ReciveMagixEvent,payload:e})};this.magixEventMap.set(n,r),this.displayer.addMagixEventListener(n,r)},t.prototype.handleRemoveMagixEvent=function(e){var t=e.payload,n=this.magixEventMap.get(t);this.displayer.removeMagixEventListener(t,n)},t.prototype.handleNextPage=function(){if(this.canOperation){var e=this.currentPage+1;if(e>this.totalPage)return;this.displayer.setSceneIndex(e-1),this.dispatchMagixEvent(d.NextPage,{})}},t.prototype.handlePrevPage=function(){if(this.canOperation){var e=this.currentPage-1;if(e<0)return;this.displayer.setSceneIndex(e-1),this.dispatchMagixEvent(d.PrevPage,{})}},t.prototype.handlePageTo=function(e){if(this.canOperation){var t=e.payload;if(!Number.isSafeInteger(t)||t<=0)return;var n=t-1;this.displayer.setSceneIndex(n),this.dispatchMagixEvent(d.PageTo,n)}},t.prototype.handleRemoveAllMagixEvent=function(){var e=this;this.magixEventMap.forEach((function(t,n){e.displayer.removeMagixEventListener(n,t)})),this.magixEventMap.clear()},t.prototype.handleGetAttributes=function(){this.postMessage({kind:d.GetAttributes,payload:this.attributes})},t.prototype.postMessage=function(e){var t;this.iframe&&(null===(t=this.iframe.contentWindow)||void 0===t||t.postMessage(JSON.parse(JSON.stringify(e)),"*"))},t.prototype.dispatchMagixEvent=function(t,n){this.canOperation&&(e.prototype.setAttributes.call(this,{lastEvent:{name:t,payload:n}}),this.displayer.dispatchMagixEvent(t,n))},Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this.displayer.state.sceneState.index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPage",{get:function(){return this.currentIndex+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalPage",{get:function(){return this.displayer.state.sceneState.scenes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readonly",{get:function(){return!this.displayer.isWritable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReplay",{get:function(){return(0,a.isPlayer)(this.displayer)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inDisplaySceneDir",{get:function(){return this.displayer.state.sceneState.scenePath.startsWith(this.attributes.displaySceneDir)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canOperation",{get:function(){return!this.isReplay&&(!this.readonly&&this.displayer.phase===a.RoomPhase.Connected)},enumerable:!1,configurable:!0}),t.prototype.isClicker=function(){if(this.readonly)return!1;var e=this.displayer.state.memberState.currentApplianceName;return this.allowAppliances.includes(e)},Object.defineProperty(t.prototype,"isDisableInput",{get:function(){return!("disableDeviceInputs"in this.displayer)||this.displayer.disableDeviceInputs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iframeOrigin",{get:function(){return this.iframe?new URL(this.iframe.src).origin:void 0},enumerable:!1,configurable:!0}),t.prototype._destory=function(){var e=this;window.removeEventListener("message",this.messageListener),this.magixEventMap.forEach((function(t,n){e.displayer.removeMagixEventListener(n,t)})),this.displayer.callbacks.off(this.callbackName,this.stateChangeListener),this.displayer.callbacks.off("onPhaseChanged",this.onPhaseChangedListener),this.magixEventMap.clear(),this.iframe&&(t.emitter.emit(d.Destory),this.iframe=null,t.alreadyCreate=!1),this.bridgeDisposer(),t.emitter.removeAllListeners()},t.kind="IframeBridge",t.emitter=new o.EventEmitter2,t.alreadyCreate=!1,t}(a.InvisiblePlugin);t.IframeBridge=y},24182:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.times=void 0;t.times=function(e,t){return new Array(e).fill(0).map((function(e,n){return t(n)}))}},29165:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RTCPlugin=void 0;var r,i=n(26913),a=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});var o=function(e){function t(n){var r=e.call(this)||this;return r.audioElement=new Audio,r.isStartPlaying=!1,r.isAudioPlaying=!1,r._volume=50,r.commandCaches=[],r.onError=function(e){var n;null===(n=t.ctx)||void 0===n||n.logger.error("audio error: "+e.error)},r.onAudioStalled=function(){var e;null===(e=t.ctx)||void 0===e||e.logger.warn(r.url+" Failed to fetch data, but trying.")},r.onMetaLoaded=function(){var e;null===(e=t.ctx)||void 0===e||e.logger.info(r.url+" load"),r.emit("load")},r.onAudioPlay=function(){var e,n,i,a;null===(e=t.ctx)||void 0===e||e.logger.info(r.url+" audio play"),null===(n=t.audioMixer)||void 0===n||n.startAudioMixing(r.url,!1,!1,1,(i=function(e,n){var i,a,o;r.isAudioPlaying=!0,r.isStartPlaying=!1,r.emit("play"),r.audioElement.muted=!0;var s=r.audioElement.currentTime;null===(i=t.audioMixer)||void 0===i||i.setAudioMixingPosition(Math.round(1e3*s)),(null===(a=t.audioMixer)||void 0===a?void 0:a.adjustAudioMixingVolume)&&(null===(o=t.audioMixer)||void 0===o||o.adjustAudioMixingVolume(r._volume)),r.commandCaches.forEach((function(e){return e()})),r.commandCaches=[]},a=0,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===a&&(a+=1,i.apply(null,e))}))},r.onAudioPause=function(e){var n,i;null===(n=t.ctx)||void 0===n||n.logger.info(r.url+" audio pause by "+e.type),r.isAudioPlaying=!1,null===(i=t.audioMixer)||void 0===i||i.pauseAudioMixing()},r.url=n,r.audioElement.src=n,r.audioElement.volume=0,r.audioElement.addEventListener("loadedmetadata",r.onMetaLoaded),r.audioElement.addEventListener("error",r.onError),r.audioElement.addEventListener("play",r.onAudioPlay),r.audioElement.addEventListener("pause",r.onAudioPause),r.audioElement.addEventListener("end",r.onAudioPause),r.audioElement.addEventListener("stalled",r.onAudioStalled),r}return a(t,e),t.prototype.play=function(){var e,n=this;this.isStartPlaying=!0,null===(e=t.ctx)||void 0===e||e.logger.info(this.url+" play by slide"),this.audioElement.play().catch((function(){n.emit("play")}))},t.prototype.pause=function(){var e,n,r=this;!this.isAudioPlaying&&this.isStartPlaying?(null===(e=t.ctx)||void 0===e||e.logger.info(this.url+" cache pause cmd"),this.commandCaches.push((function(){r.audioElement.pause(),r.emit("pause")}))):(null===(n=t.ctx)||void 0===n||n.logger.info(this.url+" pause by slide"),this.audioElement.pause(),this.emit("pause"))},t.prototype.destroy=function(){var e,n;null===(e=t.ctx)||void 0===e||e.logger.info(this.url+" destroy by slide"),this.audioElement.currentTime=0,this.audioElement.pause(),null===(n=t.audioMixer)||void 0===n||n.stopAudioMixing(),this.audioElement.removeEventListener("loadedmetadata",this.onMetaLoaded),this.audioElement.removeEventListener("error",this.onError),this.audioElement.removeEventListener("play",this.onAudioPlay),this.audioElement.removeEventListener("pause",this.onAudioPause),this.audioElement.removeEventListener("end",this.onAudioPause),this.audioElement.removeEventListener("stalled",this.onAudioStalled)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.audioElement.currentTime},set:function(e){var n,r=this;!this.isAudioPlaying&&this.isStartPlaying?this.commandCaches.push((function(){var n;r.audioElement.currentTime=e,r.isAudioPlaying&&(null===(n=t.audioMixer)||void 0===n||n.setAudioMixingPosition(Math.round(1e3*e)))})):(this.audioElement.currentTime=e,this.isAudioPlaying&&(null===(n=t.audioMixer)||void 0===n||n.setAudioMixingPosition(Math.round(1e3*e))))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPaused",{get:function(){return this.audioElement.paused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.audioElement.duration},enumerable:!1,configurable:!0}),t.prototype.volume=function(e){var n,r;this._volume=Math.round(100*e),(null===(n=t.audioMixer)||void 0===n?void 0:n.adjustAudioMixingVolume)&&this.isAudioPlaying&&(null===(r=t.audioMixer)||void 0===r||r.adjustAudioMixingVolume(this._volume))},t.audioMixer=null,t.ctx=null,t}(i.EventEmitter),s=function(){function e(e){this.hookPoint="Slide.initConfig",this.rtc=e}return e.prototype.after=function(e){return e},e.prototype.before=function(e){var t=e[0];return o.audioMixer=this.rtc,t.rtcAudio=o,[t]},e.prototype.context=function(e){o.ctx=e},e}();t.RTCPlugin=s},25242:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createPlugin=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.kind;return e=function(e){s(n,e);var t=c(n);function n(){return b(this,n),t.apply(this,arguments)}return n}(O),e.kind=t,e},t.SyncedStorePlugin=t.SyncedStore=t.Storage=t.STORAGE_NS=t.MAIN_STORAGE=void 0;var r=n(71895),i=n(88546),a=n(63266),o=n(5094);function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){f(a,r,i,o,s,"next",e)}function s(e){f(a,r,i,o,s,"throw",e)}o(void 0)}))}}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}var N=function(e){return"object"===I(e)&&null!==e},T=Object.prototype.hasOwnProperty,D=Object.keys,A="__IsReFiNe";var k=function(){function e(t,n){var r=this;b(this,e),this.refMap=new Map,this.refKeys=new Set,this.genKey=function(){var e;do{e=(0,i.genUID)()}while(r.refKeys.has(e));return r.refKeys.add(e),e},this.state={},this.replaceState(t||n||{})}return M(e,[{key:"replaceState",value:function(e){var t=this;if(!N(e))throw new Error("[SyncedStore] replaceState: state must be an object");var n={},r=!1;return new Set([].concat(m(D(this.state)),m(D(e)))).forEach((function(i){var a=t.setValue(i,e[i]);a&&(r=!0,n[i]=a)})),r?n:null}},{key:"toRefState",value:function(){var e=this;return D(this.state).reduce((function(t,n){return t[n]=e.toRefValue(e.state[n]),t}),{})}},{key:"setValue",value:function(e,t){if(N(t)){var n=this.ensureRefValue(t);if(this.state[e]!==n.v){var r=this.deleteRefKey(e);return this.state[e]=n.v,{oldValue:r,newValue:n.v}}}else if(void 0===t){if(function(e,t){return T.call(e,t)}(this.state,e)){var i=this.deleteRefKey(e);return delete this.state[e],{oldValue:i,newValue:void 0}}}else{var a=t;if(this.state[e]!==a){var o=this.deleteRefKey(e);return this.state[e]=a,{oldValue:o,newValue:a}}}return null}},{key:"toRefValue",value:function(e){return N(e)?this.ensureRefValue(e):e}},{key:"ensureRefValue",value:function(e){if(function(e){return N(e)&&1===e.__IsReFiNe}(e))return this.refMap.set(e.v,e),e;var t=this.refMap.get(e);return t||(t=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.genUID)();return x(t={},A,1),x(t,"k",n),x(t,"v",e),t}(e,this.genKey()),this.refMap.set(e,t)),this.refKeys.add(t.k),t}},{key:"deleteRefKey",value:function(e){var t=this.state[e],n=this.refMap.get(t);return n&&this.refKeys.delete(n.k),t}}]),e}(),S="_WM-StOrAgE_";t.STORAGE_NS=S;var E="_WM-MaIn-StOrAgE_";t.MAIN_STORAGE=E;var j=function(){function e(t){var n=this,o=t.plugin$,s=t.isWritable$,u=t.namespace,c=void 0===u?E:u,l=t.defaultState,d=void 0===l?{}:l;if(b(this,e),this._sideEffect=new i.SideEffectManager,this._events=new a.Remitter,this._disconnected=!1,d&&!N(d))throw new Error("Default state for Storage ".concat(c," is not an object."));this.on=this._events.on.bind(this._events),this.off=this._events.off.bind(this._events);var p=function(){var e,t;return null==(t=null==(e=o.value)?void 0:e.attributes[S])?void 0:t[c]};this.namespace=c,this.defaultState=d,this._plugin$=o,this._isWritable$=s,this._refine=new k((0,r.toJS)(p()),d);var h=function(e){e&&n._events.emit("stateChanged",e)},f=function(){var e,t=(0,r.reaction)(p,(function(){var t=p();t&&(h(n._refine.replaceState((0,r.toJS)(t))),null==e||e(),e=function(e){var t=function(e){if(!(e.length<=0)){for(var t={},i=!1,a=0;a<e.length;a++){var o=e[a],s=o.key;if(s!==S){var u=(0,r.toJS)(o.value),c=n._refine.setValue(s,u);c&&(i=!0,t[s]=c)}}i&&h(t)}};return(0,r.listenUpdated)(e,t),function(){return(0,r.unlistenUpdated)(e,t)}}(t))}),{fireImmediately:!0});return function(){t(),null==e||e()}};this._sideEffect.addDisposer(this._plugin$.subscribe((function(e){var t=[];if(n._sideEffect.flush("plugin-init"),e){var i=(0,r.toJS)(p());N(i)?h(n._refine.replaceState(i)):t.push(function(e){return s.subscribe((function(t){t&&(N(e.attributes[S])||e.updateAttributes([S],{}),N((0,r.toJS)(p()))||e.updateAttributes([S,c],n._refine.toRefState()))}))}(e)),t.push(function(e){var t=f(),n=function(){var e=g(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n===r.RoomPhase.Connected&&(t(),t=f());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.displayer.callbacks.on("onPhaseChanged",n),function(){e.displayer.callbacks.off("onPhaseChanged",n),t()}}(e))}else h(n._refine.replaceState(d));t.length>0&&n._sideEffect.addDisposer(t,"plugin-init")})))}return M(e,[{key:"setState",value:function(e){var t=this._requireAccess("setState");if(!this.isWritable)throw new Error('Cannot setState on Storage "'.concat(this.namespace,'" without writable access'));for(var n=D(e),r=0;r<n.length;r++){var i=n[r],a=e[i];t.updateAttributes([S,this.namespace,i],N(a)?this._refine.ensureRefValue(a):a)}}},{key:"resetState",value:function(){this._requireAccess("resetState").updateAttributes([S,this.namespace],this.defaultState)}},{key:"deleteStorage",value:function(){var e=this._requireAccess("deleteStorage");this.disconnect(),e.updateAttributes([S,this.namespace],void 0)}},{key:"disconnect",value:function(){this._disconnected=!0,this._sideEffect.flushAll(),this._events.emit("disconnected"),this._events.destroy()}},{key:"_requireAccess",value:function(e){if(this._disconnected)throw new Error("Cannot call ".concat(e," on destroyed Storage '").concat(this.namespace,"'."));var t=this._plugin$.value;if(!t)throw new Error("[SyncedStore]: cannot call '".concat(e,"' on Storage '").concat(this.namespace,"' because plugin is not initialized."));if(!this.isWritable)throw new Error("[SyncedStore]: cannot call '".concat(e,"' on Storage '").concat(this.namespace,"' without writable permission"));return t}},{key:"isWritable",get:function(){return this._isWritable$.value}},{key:"state",get:function(){return this._refine.state}},{key:"disconnected",get:function(){return this._disconnected}}]),e}();t.Storage=j;var C=function(){function e(t,n,a){b(this,e),this._sideEffect=new i.SideEffectManager,this.displayer=t,this._plugin$=n,this._isRoomWritable$=a;var s=(0,r.isRoom)(t)?t:null;this._room=s,this._isPluginWritable$=(0,o.combine)([this._plugin$,this._isRoomWritable$],(function(e){var t=h(e,2),n=t[0],r=t[1];return null!==n&&r}))}var t;return M(e,[{key:"connectStorage",value:function(e,t){var n=this,r=new j({plugin$:this._plugin$,isWritable$:this._isPluginWritable$,namespace:e,defaultState:t}),i=this._sideEffect.addDisposer((function(){return r.disconnect()})),a=this._sideEffect.addDisposer(r.on("disconnected",(function(){n._sideEffect.remove(i),n._sideEffect.flush(a)})));return r}},{key:"addPluginWritableChangeListener",value:function(e){return this._isPluginWritable$.reaction(e)}},{key:"setRoomWritable",value:(t=g(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._room){e.next=2;break}throw new Error("[SyncedStore]: cannot set room writable in replay mode");case 2:return e.next=4,this._room.setWritable(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"addRoomWritableChangeListener",value:function(e){return this._isRoomWritable$.reaction(e)}},{key:"dispatchEvent",value:function(e,t){if(!this._room)throw new Error("[SyncedStore] cannot dispatch event in replay mode");this._room.dispatchMagixEvent(e,t)}},{key:"addEventListener",value:function(e,t,n){var r=this;return this.displayer.addMagixEventListener(e,t,n),function(){return r.displayer.removeMagixEventListener(e,t)}}},{key:"removeEventListener",value:function(e,t){return this.displayer.removeMagixEventListener(e,t)}},{key:"nextFrame",value:function(){var e=this;return new Promise((function(t){if((0,r.isRoom)(e.displayer)){var n=(0,i.genUID)(),a="SyncedStoreNextFrame";e.displayer.addMagixEventListener(a,(function r(i){i.payload===n&&(e.displayer.removeMagixEventListener(a,r),t())}),{fireSelfEventAfterCommit:!0}),e.displayer.dispatchMagixEvent(a,n)}else t()}))}},{key:"destroy",value:function(){this._sideEffect.flushAll(),this._isPluginWritable$.destroy()}},{key:"isPluginWritable",get:function(){return this._isPluginWritable$.value}},{key:"isRoomWritable",get:function(){return this._isRoomWritable$.value}}]),e}();t.SyncedStore=C;var z=function(e){s(i,e);var t,n=c(i);function i(e){var t,r;return b(this,i),t=n.call(this,e),null==(r=i.invisiblePlugins.get(t.displayer))||r.setValue(d(t)),t}return M(i,null,[{key:"init",value:(t=g(regeneratorRuntime.mark((function e(t){var n,a,s,u,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.Val(!1),(a=function(){return n.setValue((0,r.isRoom)(t)&&t.isWritable)})(),t.callbacks.on("onEnableWriteNowChanged",a),s=new o.Val(t.getInvisiblePlugin(i.kind)),i.invisiblePlugins.set(t,s),u=function(){var e=g(regeneratorRuntime.mark((function e(a){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!(0,r.isRoom)(t)){e.next=14;break}return e.prev=1,e.next=4,t.createInvisiblePlugin(i,x({},S,{}));case 4:o=e.sent,s.setValue(o),n.unsubscribe(u),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,new Promise((function(e){return setTimeout(e,200)}));case 13:t.getInvisiblePlugin(i.kind)||console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),c=function e(t){t&&(n.unsubscribe(u),s.unsubscribe(e))},!s.value&&(0,r.isRoom)(t)&&(n.subscribe(u),s.subscribe(c)),l=new C(t,s,n),d=function e(o){o===r.RoomPhase.Disconnected&&(t.callbacks.off("onPhaseChanged",e),t.callbacks.off("onEnableWriteNowChanged",a),n.destroy(),s.destroy(),i.invisiblePlugins.delete(t))},t.callbacks.on("onPhaseChanged",d),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"onCreate",value:function(e){var t;null==(t=i.invisiblePlugins.get(e.displayer))||t.setValue(e)}}]),i}(r.InvisiblePlugin),O=z;t.SyncedStorePlugin=O,O.kind="SyncedStore",O.invisiblePlugins=new Map},59849:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.videoJsPlugin=t.Version=t.PluginId=void 0;var r,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==x(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(17328)),a=(r=n(30825))&&r.__esModule?r:{default:r},o=n(71895);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}var I=Object.defineProperty,N=function(e,t,n){return function(e,t,n){t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==x(t)?t+"":t,n),n},T="0.3.8";t.Version=T;var D="video.js";t.PluginId=D;var A={currentTimeMaxError:1,syncInterval:500,retryInterval:15e3},k=A;function S(e,t){if(e.paused)return e.currentTime;var n=function(e){if(e.player)return e.player.beginTimestamp+e.plugin.playerTimestamp;if(e.room)return e.room.calibrationTimestamp}(t);return n?e.currentTime+(n-e.hostTime)/1e3:e.currentTime}var E=navigator.userAgent.includes("Safari"),j="object"==(void 0===n.g?"undefined":x(n.g))&&n.g&&n.g.Object===Object&&n.g,C="object"==("undefined"==typeof self?"undefined":x(self))&&self&&self.Object===Object&&self,z=j||C||Function("return this")(),O=z.Symbol,L=Object.prototype,_=L.hasOwnProperty,P=L.toString,R=O?O.toStringTag:void 0;var U=function(e){var t=_.call(e,R),n=e[R];try{e[R]=void 0;var r=!0}catch(e){}var i=P.call(e);return r&&(t?e[R]=n:delete e[R]),i},B=Object.prototype.toString;var V=function(e){return B.call(e)},Y=O?O.toStringTag:void 0;var Q=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Y&&Y in Object(e)?U(e):V(e)};var Z=function(e){return null!=e&&"object"==x(e)};var W=function(e){return"symbol"==x(e)||Z(e)&&"[object Symbol]"==Q(e)},G=/\s/;var F=function(e){for(var t=e.length;t--&&G.test(e.charAt(t)););return t},H=/^\s+/;var $=function(e){return e?e.slice(0,F(e)+1).replace(H,""):e};var X=function(e){var t=x(e);return null!=e&&("object"==t||"function"==t)},J=/^[-+]0x[0-9a-f]+$/i,K=/^0b[01]+$/i,q=/^0o[0-7]+$/i,ee=parseInt;var te=function(e){if("number"==typeof e)return e;if(W(e))return NaN;if(X(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=X(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$(e);var n=K.test(e);return n||q.test(e)?ee(e.slice(2),n?2:8):J.test(e)?NaN:+e},ne=function(){return z.Date.now()},re=Math.max,ie=Math.min;var ae=function(e,t,n){var r,i,a,o,s,u,c=0,l=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function f(e){return c=e,s=setTimeout(m,t),l?h(e):o}function g(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=a}function m(){var e=ne();if(g(e))return y(e);s=setTimeout(m,function(e){var n=t-(e-u);return d?ie(n,a-(e-c)):n}(e))}function y(e){return s=void 0,p&&r?h(e):(r=i=void 0,o)}function v(){var e=ne(),n=g(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return f(u);if(d)return clearTimeout(s),s=setTimeout(m,t),h(u)}return void 0===s&&(s=setTimeout(m,t)),o}return t=te(t)||0,X(n)&&(l=!!n.leading,a=(d="maxWait"in n)?re(te(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=i=s=void 0},v.flush=function(){return void 0===s?o:y(ne())},v};function oe(e){var t=document.createElement("style"),n=document.createTextNode(e);t.appendChild(n),document.head.appendChild(t)}oe(".vjs-p .player-controller{position:absolute;z-index:100;bottom:0px;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:64px;background-image:linear-gradient(0deg,#000,transparent);transition:opacity .2s}.vjs-p .player-menu-box{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:40px}.vjs-p .player-menu-cell{width:100%;text-align:center;font-size:12px;color:#7a7b7c}.vjs-p .player-multiple-play{width:64px;height:120px}.vjs-p .player-controller-actions-left{display:flex;justify-content:center;align-items:center;flex-shrink:0}.vjs-p .player-right-box{font-size:14px;color:#7a7b7c;cursor:pointer;margin-right:12px}.vjs-p .player-controller-actions{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px;padding-right:8px;margin-top:2px}.vjs-p .player-mid-box-time{font-size:9px;display:flex;justify-content:center;align-items:center;color:#fff;flex-shrink:0;margin-right:8px;font-family:monospace}.vjs-p .player-controller-play{display:flex;align-items:center;justify-content:center;cursor:pointer;padding-right:4px}.vjs-p .player-controller-progress{width:calc(100% - 28px);margin-left:14px;display:flex;align-items:center;justify-content:center;margin-top:8px}.vjs-p .player-volume{display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:16px;margin-left:16px}.vjs-p .player-volume-slider{width:60px;margin-right:12px;display:flex;align-items:center}.vjs-p .player-volume-box{display:flex;flex-direction:row}\n");oe(".vjs-p .seek-slider{position:relative;width:100%}.vjs-p .seek-slider:focus{outline:none}.vjs-p .seek-slider .track{padding:10px 0;cursor:pointer;outline:none}.vjs-p .seek-slider .track:focus{border:0;outline:none}.vjs-p .seek-slider .track .main{width:100%;height:3px;background-color:#ffffff4d;border-radius:30px;position:absolute;left:0;top:8.5px;transition:transform .4s;outline:none}.vjs-p .seek-slider .track .main:focus{border:0;outline:none}.vjs-p .seek-slider .track .main .buffered{position:absolute;background-color:#ffffff4d;width:100%;height:100%;transform:scaleX(.8);z-index:2;transform-origin:0 0}.vjs-p .seek-slider .track .main .seek-hover{position:absolute;background-color:#ffffff80;width:100%;height:100%;z-index:1;transform:scaleX(.6);transform-origin:0 0;opacity:0;transition:opacity .4s}.vjs-p .seek-slider .track .main .connect{position:absolute;background-color:#fff;width:100%;height:100%;z-index:3;left:0;transform:scaleX(.13);transform-origin:0 0}.vjs-p .seek-slider .track.active .main{transform:scaleY(2)}.vjs-p .seek-slider .thumb{pointer-events:none;position:absolute;width:12px;height:12px;left:-6px;top:4px;z-index:4;transform:translate(100px)}.vjs-p .seek-slider .thumb .handler{border-radius:100%;width:100%;height:100%;background-color:#fff;opacity:0;transform:scale(.4);cursor:pointer;transition:transform .2s;pointer-events:none}.vjs-p .seek-slider .thumb.active .handler{opacity:1;transform:scale(1)}.vjs-p .seek-slider .hover-time{position:absolute;background-color:#0000004d;line-height:18px;font-size:16px;color:#ddd;top:-25px;left:0;padding:5px 10px;border-radius:5px;box-shadow:0 0 5px #0000004d;opacity:0;transform:translate(150px);pointer-events:none}.vjs-p .seek-slider .hover-time.active{opacity:1}.vjs-p .seek-slider:hover .track .main .seek-hover{opacity:1}\n");var se=function(e){h(n,e);var t=g(n);function n(e){var r;return l(this,n),r=t.call(this,e),N(y(r),"seeking",!1),N(y(r),"mobileSeeking",!1),N(y(r),"track",null),N(y(r),"hoverTime",null),N(y(r),"offset",0),N(y(r),"secondsPrefix","00:00:"),N(y(r),"minutesPrefix","00:"),N(y(r),"seekPause",!1),N(y(r),"handleTouchSeeking",(function(e){for(var t=0,n=0;n<e.changedTouches.length;n++)t=e.changedTouches[n].pageX;t=t<0?0:t,r.mobileSeeking&&r.changeCurrentTimePosition(t)})),N(y(r),"handleSeeking",(function(e){r.seeking&&r.changeCurrentTimePosition(e.pageX)})),N(y(r),"setTrackWidthState",(function(){r.track&&r.setState({trackWidth:r.track.offsetWidth})})),N(y(r),"handleTrackHover",(function(e,t){if(r.track){var n,i=r.props.scale||1;n=e?0:(t.pageX-r.track.getBoundingClientRect().left)/i,r.setState({seekHoverPosition:n,trackWidth:r.track.offsetWidth})}})),N(y(r),"mouseSeekingHandler",(function(e){r.setSeeking(!1,e),r.onMouseUp()})),N(y(r),"setSeeking",(function(e,t){t.preventDefault(),r.handleSeeking(t),r.seeking=e,r.setState({seekHoverPosition:e?r.state.seekHoverPosition:0})})),N(y(r),"mobileTouchSeekingHandler",(function(){r.setMobileSeeking(!1)})),N(y(r),"setMobileSeeking",(function(e){r.mobileSeeking=e,r.setState({seekHoverPosition:e?r.state.seekHoverPosition:0})})),N(y(r),"renderBufferProgress",(function(){if(r.props.buffered){var e=w(w({},r.getPositionStyle(r.props.buffered)),r.props.bufferColor&&{backgroundColor:r.props.bufferColor});return i.default.createElement("div",{className:"buffered",style:e})}return null})),N(y(r),"renderProgress",(function(){var e=w(w({},r.getPositionStyle(r.props.current)),r.props.sliderColor&&{backgroundColor:r.props.sliderColor});return i.default.createElement("div",{className:"connect",style:e})})),N(y(r),"renderHoverProgress",(function(){var e=w(w({},r.getSeekHoverPosition()),r.props.sliderHoverColor&&{backgroundColor:r.props.sliderHoverColor});return i.default.createElement("div",{className:"seek-hover",style:e})})),N(y(r),"renderThumb",(function(){return i.default.createElement("div",{className:r.isThumbActive()?"thumb active":"thumb",style:r.getThumbHandlerPosition()},i.default.createElement("div",{style:{backgroundColor:r.props.thumbColor},className:"handler"}))})),N(y(r),"onMouseDown",(function(e){var t,n;r.props.pause&&!r.props.paused&&(r.props.pause(),r.seekPause=!0),r.setSeeking(!0,e),null==(n=(t=r.props).onSeekStart)||n.call(t)})),N(y(r),"onMouseUp",(function(){var e,t;r.props.play&&r.seekPause&&(r.props.play(),r.seekPause=!1),null==(t=(e=r.props).onSeekEnd)||t.call(e)})),r.props.secondsPrefix&&(r.secondsPrefix=r.props.secondsPrefix),r.props.minutesPrefix&&(r.minutesPrefix=r.props.minutesPrefix),r.state={ready:!1,trackWidth:0,seekHoverPosition:0},r}return p(n,[{key:"componentDidMount",value:function(){this.setTrackWidthState(),window.addEventListener("resize",this.setTrackWidthState),window.addEventListener("mousemove",this.handleSeeking),window.addEventListener("mouseup",this.mouseSeekingHandler),window.addEventListener("touchmove",this.handleTouchSeeking),window.addEventListener("touchend",this.mobileTouchSeekingHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setTrackWidthState),window.removeEventListener("mousemove",this.handleSeeking),window.removeEventListener("mouseup",this.mouseSeekingHandler),window.removeEventListener("touchmove",this.handleTouchSeeking),window.removeEventListener("touchend",this.mobileTouchSeekingHandler)}},{key:"changeCurrentTimePosition",value:function(e){if(this.track){var t=this.props.scale||1,n=(e-this.track.getBoundingClientRect().left)/t;n=Math.min(this.state.trackWidth,Math.max(0,n)),this.setState({seekHoverPosition:n});var r=+(n/this.state.trackWidth*this.props.total).toFixed(0);this.props.onChange(r)}}},{key:"getPositionStyle",value:function(e){var t=100*e/this.props.total;return{transform:"scaleX(".concat(t/100,")")}}},{key:"getThumbHandlerPosition",value:function(){var e=this.state.trackWidth/(this.props.total/this.props.current);return{transform:"translateX(".concat(e,"px)")}}},{key:"getSeekHoverPosition",value:function(){var e=100*this.state.seekHoverPosition/this.state.trackWidth;return{transform:"scaleX(".concat(e/100,")")}}},{key:"getHoverTimePosition",value:function(){var e=0;return this.hoverTime&&(e=this.state.seekHoverPosition-this.hoverTime.offsetWidth/2,this.props.limitTimeTooltipBySides&&(e<0?e=0:e+this.hoverTime.offsetWidth>this.state.trackWidth&&(e=this.state.trackWidth-this.hoverTime.offsetWidth))),{transform:"translateX(".concat(e,"px)")}}},{key:"secondsToTime",value:function(e){e=Math.round(e+this.offset);var t=Math.floor(e/3600),n=e%3600,r=Math.floor(n/60),i=Math.ceil(n%60);return{hh:t.toString(),mm:r<10?"0"+r:r.toString(),ss:i<10?"0"+i:i.toString()}}},{key:"getHoverTime",value:function(){var e=100*this.state.seekHoverPosition/this.state.trackWidth,t=Math.floor(+e*(this.props.total/100)),n=this.secondsToTime(t);return this.props.total+this.offset<60?this.secondsPrefix+n.ss:this.props.total+this.offset<3600?this.minutesPrefix+n.mm+":"+n.ss:n.hh+":"+n.mm+":"+n.ss}},{key:"isThumbActive",value:function(){return this.state.seekHoverPosition>0||this.seeking}},{key:"drawHoverTime",value:function(){var e=this;return this.props.hideHoverTime?null:i.default.createElement("div",{className:this.isThumbActive()?"hover-time active":"hover-time",style:this.getHoverTimePosition(),ref:function(t){return e.hoverTime=t}},this.getHoverTime())}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"seek-slider"},i.default.createElement("div",{className:"track",ref:function(t){return e.track=t},onMouseMove:function(t){return e.handleTrackHover(!1,t)},onMouseLeave:function(t){return e.handleTrackHover(!0,t)},onMouseDown:this.onMouseDown,onTouchStart:function(t){e.setMobileSeeking(!0),e.onMouseDown(t)},onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp},i.default.createElement("div",{className:"main"},this.renderBufferProgress(),this.renderHoverProgress(),this.renderProgress())),this.drawHoverTime(),this.renderThumb())}}]),n}(i.Component),ue=function(e){h(n,e);var t=g(n);function n(e){var r;return l(this,n),r=t.call(this,e),N(y(r),"stageVolume",0),N(y(r),"updateVolumeTimer",0),N(y(r),"onVolumeSeeking",!1),N(y(r),"onClickOperationButton",(function(){r.props.paused?r.props.play():r.props.pause()})),N(y(r),"operationButton",(function(){return r.props.paused?i.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBmaWxsLW9wYWNpdHk9Ii4wMSIgZD0iTTAgMGgyMnYyMkgweiIvPjxwYXRoIGQ9Im03LjUxNCA1LjkwOSA3LjA1NyA0LjIzNGExIDEgMCAwIDEgMCAxLjcxNGwtNy4wNTcgNC4yMzRBMSAxIDAgMCAxIDYgMTUuMjM0VjYuNzY2YTEgMSAwIDAgMSAxLjUxNC0uODU3eiIvPjwvZz48L3N2Zz4="}):i.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBmaWxsLW9wYWNpdHk9Ii4wMSIgZD0iTTAgMGgyMnYyMkgweiIvPjxyZWN0IHg9IjciIHk9IjYiIHdpZHRoPSIyIiBoZWlnaHQ9IjEwIiByeD0iMSIvPjxyZWN0IHg9IjEzIiB5PSI2IiB3aWR0aD0iMiIgaGVpZ2h0PSIxMCIgcng9IjEiLz48L2c+PC9zdmc+"})})),N(y(r),"operationVolumeButton",(function(){return r.props.volume>.9?i.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy4wOCA4LjQ0NUg1YS45NjIuOTYyIDAgMCAwLTEgLjkyNHYzLjkwN2EuOTYzLjk2MyAwIDAgMCAuOTYuOTY2bC4wNDYtLjAwMWgyLjAxbDMuMjI3IDIuMjc0Yy41MDIuMzQ0LjkzMi4xMzguOTMyLS4zNDVWNi41MTZjLS4wMDQtLjQ4My0uNDM2LS42OS0uODY2LS4zNDVMNy4wOCA4LjQ0NXptNS43NDUgNC40MTNhLjU3Ni41NzYgMCAwIDAgMCAuODk4LjgwNS44MDUgMCAwIDAgMS4wNzggMCAyLjk0MyAyLjk0MyAwIDAgMC0uMDA0LTQuNTVoLjAwNGEuODA1LjgwNSAwIDAgMC0xLjA3OCAwIC41NzYuNTc2IDAgMCAwIDAgLjg5NiAxLjc5NCAxLjc5NCAwIDAgMSAwIDIuNzU2eiIvPjxwYXRoIGQ9Ik0xNC45MDYgNy40MTJhLjU3Ni41NzYgMCAwIDAgMCAuODk4IDQuMDcyIDQuMDcyIDAgMCAxIDAgNi40MTIuNTc2LjU3NiAwIDAgMCAwIC44OTYuODAzLjgwMyAwIDAgMCAxLjA3NiAwIDUuMjIzIDUuMjIzIDAgMCAwLS4wMDMtOC4yMDhoLjAwM2EuODA0LjgwNCAwIDAgMC0xLjA3Ni4wMDJ6Ii8+PHBhdGggZmlsbC1vcGFjaXR5PSIuMDEiIGQ9Ik0wIDBoMjJ2MjJIMHoiLz48L2c+PC9zdmc+"}):0===r.props.volume?i.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy4wOCA4LjQ0NUg1YS45NjIuOTYyIDAgMCAwLTEgLjkyNHYzLjkwN2EuOTYzLjk2MyAwIDAgMCAuOTYuOTY2bC4wNDYtLjAwMWgyLjAxbDMuMjI3IDIuMjc0Yy41MDIuMzQ0LjkzMi4xMzguOTMyLS4zNDVWNi41MTZjLS4wMDQtLjQ4My0uNDM2LS42OS0uODY2LS4zNDVMNy4wOCA4LjQ0NXoiLz48cGF0aCBmaWxsLW9wYWNpdHk9Ii4wMSIgZD0iTTAgMGgyMnYyMkgweiIvPjwvZz48L3N2Zz4="}):i.default.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNNy4wOCA4LjQ0NUg1YS45NjIuOTYyIDAgMCAwLTEgLjkyNHYzLjkwN2EuOTYzLjk2MyAwIDAgMCAuOTYuOTY2bC4wNDYtLjAwMWgyLjAxbDMuMjI3IDIuMjc0Yy41MDIuMzQ0LjkzMi4xMzguOTMyLS4zNDVWNi41MTZjLS4wMDQtLjQ4My0uNDM2LS42OS0uODY2LS4zNDVMNy4wOCA4LjQ0NXptNS43NDUgNC40MTNhLjU3Ni41NzYgMCAwIDAgMCAuODk4LjgwNS44MDUgMCAwIDAgMS4wNzggMCAyLjk0MyAyLjk0MyAwIDAgMC0uMDA0LTQuNTVoLjAwNGEuODA1LjgwNSAwIDAgMC0xLjA3OCAwIC41NzYuNTc2IDAgMCAwIDAgLjg5NiAxLjc5NCAxLjc5NCAwIDAgMSAwIDIuNzU2eiIvPjxwYXRoIGZpbGwtb3BhY2l0eT0iLjAxIiBkPSJNMCAwaDIydjIySDB6Ii8+PC9nPjwvc3ZnPg=="})})),N(y(r),"handleClickVolume",(function(){0===r.props.volume?0!==r.stageVolume?r.props.setVolume(r.stageVolume):r.props.setVolume(1):(r.stageVolume=r.props.volume,r.props.setVolume(0))})),N(y(r),"onChange",(function(e){r.setState({currentTime:e}),e&&r.changeTime(e)})),N(y(r),"changeTime",ae((function(e){r.props.setCurrentTime(e)}),50)),N(y(r),"onVolumeChange",(function(e){r.changeVolume(e),r.setState({seekVolume:e/100})})),N(y(r),"changeVolume",ae((function(e){r.props.setVolume(e/100)}),50)),N(y(r),"onVolumeSeekStart",(function(){r.onVolumeSeeking=!0})),N(y(r),"onVolumeSeekEnd",ae((function(){r.onVolumeSeeking=!1}),500)),N(y(r),"onProgressSeekStart",(function(){return r.setState({isPlayerSeeking:!0})})),N(y(r),"onProgressSeekEnd",ae((function(){r.setState({isPlayerSeeking:!1})}),500)),r.state={isPlayerSeeking:!1,isVolumeHover:!1,seekVolume:1,visible:!0,currentTime:0},r.stageVolume=e.volume,r}return p(n,[{key:"componentDidMount",value:function(){var e=this;this.updateVolumeTimer=setInterval((function(){e.onVolumeSeeking||e.setState({seekVolume:e.props.volume}),e.state.isPlayerSeeking||e.setState({currentTime:e.props.currentTime})}),100)}},{key:"componentWillUnmount",value:function(){this.updateVolumeTimer&&clearInterval(this.updateVolumeTimer)}},{key:"render",value:function(){var e=this,t=this.props,n=t.duration,r=t.currentTime;return i.default.createElement("div",{className:"player-controller",style:{opacity:this.props.visible?"1":"0"}},i.default.createElement("div",{className:"player-controller-progress"},i.default.createElement(se,{total:n,current:this.state.currentTime,onChange:this.onChange,buffered:this.props.buffered,bufferColor:"rgba(255,255,255,0.3)",hideHoverTime:!0,limitTimeTooltipBySides:!0,onSeekStart:this.onProgressSeekStart,onSeekEnd:this.onProgressSeekEnd,play:this.props.play,pause:this.props.pause,paused:this.props.paused,scale:this.props.scale})),i.default.createElement("div",{className:"player-controller-actions"},i.default.createElement("div",{className:"player-controller-actions-left"},i.default.createElement("div",{onClick:this.onClickOperationButton,className:"player-controller-play"},this.operationButton()),i.default.createElement("div",{className:"player-volume-box",onMouseEnter:function(){return e.setState({isVolumeHover:!0})},onMouseLeave:function(){return e.setState({isVolumeHover:!1})}},i.default.createElement("div",{onClick:this.handleClickVolume,className:"player-volume"},this.operationVolumeButton()),i.default.createElement("div",{className:"player-volume-slider"},i.default.createElement(se,{total:100,current:100*this.state.seekVolume,onChange:this.onVolumeChange,onSeekStart:this.onVolumeSeekStart,onSeekEnd:this.onVolumeSeekEnd,scale:this.props.scale,limitTimeTooltipBySides:!0,hideHoverTime:!0})))),i.default.createElement("div",{className:"player-mid-box-time"},ce(Math.floor(r/1e3))," /"," ",ce(Math.floor(n/1e3)))))}}]),n}(i.Component);function ce(e){var t=e%60,n=(e-t)/60;if(n>=60){var r=n%60;return"".concat(le((n-r)/60),":").concat(le(r),":").concat(le(t))}return"".concat(le(n),":").concat(le(t))}function le(e){return e<=9?"0".concat(e):"".concat(e)}function de(e){var t=e.scale,n=void 0===t?1:t,r=e.size,a=e.children;return i.default.createElement("div",{style:{width:r.width/n,height:r.height/n,transform:"scale(".concat(n,")"),transformOrigin:"top left",display:"flex",overflow:"hidden"}},a)}oe('.vjs-p{display:flex;flex-grow:1;position:relative}.vjs-p *{pointer-events:auto}.vjs-p.disabled *{pointer-events:none}.vjs-p .videojs-plugin-close-icon,.vjs-p .player-controller,.vjs-p .videojs-plugin-muted-alert{pointer-events:auto}.vjs-p.disabled .videojs-plugin-close-icon,.vjs-p.disabled .player-controller{pointer-events:none}.vjs-p .video-js-plugin-header{position:absolute;z-index:100;top:-.5px;height:30px;width:100%;display:flex;background:linear-gradient(rgba(0,0,0,.85),rgba(0,0,0,.45) 40%,rgba(0,0,0,0));transition:opacity .2s;user-select:none}.vjs-p .video-js-plugin-title{padding:10px;font-size:14px;color:#fff}.vjs-p .video-js-plugin-player{position:absolute;top:0;left:0;right:0;bottom:0}.video-js,[data-vjs-player]{width:100%;height:100%}.vjs-p .videojs-plugin-close-icon.disabled{display:none}.vjs-p .videojs-plugin-close-icon{pointer-events:auto;z-index:42;color:#fff;position:absolute;top:0;right:0;width:32px;height:32px;font-size:20px;display:flex;align-items:center;justify-content:center}.vjs-p .videojs-plugin-muted-alert{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43}.vjs-p .videojs-plugin-muted-alert:before{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43;content:"";background:rgba(0,0,0,.3);font-family:VideoJS;font-size:2em;display:flex;align-items:center;justify-content:center;color:#fff}.vjs-p .videojs-plugin-recovery-mode{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:44}.vjs-p .videojs-plugin-recovery-mode button{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}\n');var pe=function(e){h(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.cnode,r=t.size,a=t.scale;return i.default.createElement(o.CNode,{context:n},i.default.createElement(de,{size:r,scale:a},i.default.createElement(o.RoomConsumer,null,(function(t){return t&&i.default.createElement(he,w({room:t},e.props))})),i.default.createElement(o.PlayerConsumer,null,(function(t){return t&&i.default.createElement(he,w({player:t},e.props))}))))}}]),n}(i.Component),he=function(e){h(n,e);var t=g(n);function n(e){var r;return l(this,n),r=t.call(this,e),N(y(r),"closeIcon",null),N(y(r),"alertMask",null),N(y(r),"container",i.default.createRef()),N(y(r),"player"),N(y(r),"controllerHiddenTimer",0),N(y(r),"syncPlayerTimer",0),N(y(r),"retryCount",0),N(y(r),"decreaseRetryTimer",0),N(y(r),"disposer"),N(y(r),"showController",(function(){r.setState({controllerVisible:!0}),r.debounceHidingController()})),N(y(r),"play",(function(){var e,t=null==(e=r.props.room)?void 0:e.calibrationTimestamp;r.debug(">>> play",{paused:!1,hostTime:t}),r.isEnabled()&&r.props.plugin.putAttributes({paused:!1,hostTime:t})})),N(y(r),"pause",(function(){var e=r.getAttributes();if(e){var t=S(e,r.props);r.debug(">>> pause",{paused:!0,currentTime:t}),r.isEnabled()&&r.props.plugin.putAttributes({paused:!0,currentTime:t})}})),N(y(r),"setVolume",(function(e){r.debug(">>> volume",{volume:e}),r.isEnabled()&&r.props.plugin.putAttributes({volume:e}),r.isEnabled()&&r.props.plugin.putAttributes({volume:e,muted:0===e})})),N(y(r),"setCurrentTime",(function(e){var t,n=null==(t=r.props.room)?void 0:t.calibrationTimestamp;r.debug(">>> seek",{currentTime:e/1e3,hostTime:n}),r.isEnabled()&&r.props.plugin.putAttributes({currentTime:e/1e3,hostTime:n})})),N(y(r),"resetPlayer",(function(){var e;null==(e=r.player)||e.autoplay(!1),r.debug(">>> ended",{paused:!0,currentTime:0}),r.isEnabled()&&r.props.plugin.putAttributes({paused:!0,currentTime:0})})),N(y(r),"syncPlayerWithAttributes",(function(){var e;r.props.plugin.context;var t=r.getAttributes();if(t){var n=r.player;if(n){n.paused()!==t.paused&&(r.debug("<<< paused -> %o",t.paused),t.paused?n.pause():null==(e=n.play())||e.catch(r.catchPlayFail)),n.muted()!==t.muted&&(r.debug("<<< muted -> %o",t.muted),n.muted(t.muted)),n.volume()!==t.volume&&(r.debug("<<< volume -> %o",t.volume),n.volume(t.volume));var i=S(t,r.props);i>n.duration()?r.resetPlayer():Math.abs(n.currentTime()-i)>k.currentTimeMaxError&&(r.debug("<<< currentTime -> %o",i),n.currentTime(i))}}})),N(y(r),"debounceHidingController",(function(){r.controllerHiddenTimer&&(clearTimeout(r.controllerHiddenTimer),r.controllerHiddenTimer=0),r.controllerHiddenTimer=setTimeout((function(){r.setState({controllerVisible:!1}),r.controllerHiddenTimer=0}),3e3)})),N(y(r),"decreaseRetryCount",(function(){r.player&&r.retryCount>0&&(r.retryCount=r.retryCount-1)})),N(y(r),"catchPlayFail",(function(e){var t,n,i=String(e);if(E&&i.includes("NotAllowedError")||i.includes("interact"))null==(t=r.player)||t.autoplay("any"),r.setState({NoSound:!0});else{var a=null==(n=r.player)?void 0:n.error();a&&(r.retryCount<=3?(r.initPlayer(),r.retryCount=r.retryCount+1):(r.debug("catch videojs media error",a),r.setState({MediaError:!0}))),r.debug("catch error",e)}})),N(y(r),"fixPlayFail",(function(){r.debug("try to fix play state"),r.setState({NoSound:!1});var e=r.getAttributes(),t=e.muted,n=e.volume;r.player&&(r.player.muted(t),r.player.volume(n))})),N(y(r),"initPlayer",c(regeneratorRuntime.mark((function e(){var t,n,i,o,s,u,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=r.player)||t.dispose(),r.player=void 0,r.debug("creating elements ..."),n=r.getAttributes(),i=n.type,o=n.src,s=n.poster,(u=document.createElement("div")).setAttribute("data-vjs-player",""),(c=document.createElement("video")).className="video-js",s&&(c.poster=s),c.setAttribute("playsInline",""),c.setAttribute("webkit-playsinline",""),l=document.createElement("source"),new URL(o).pathname.endsWith(".m3u8")?l.type="application/x-mpegURL":c.src=o,l.src=o,i&&(l.type=i),c.appendChild(l),u.appendChild(c),r.container.current.appendChild(u),e.next=20,new Promise((function(e){return(window.requestAnimationFrame||window.setTimeout)(e)}));case 20:r.debug("initializing videojs() ..."),d=(0,a.default)(c),r.player=d,d.one("loadedmetadata",r.gracefullyUpdate),d.on("ready",(function(){var e,t;null==(t=(e=k).onPlayer)||t.call(e,d),d.on("timeupdate",r.gracefullyUpdate),d.on("volumechange",r.gracefullyUpdate),d.on("seeked",r.gracefullyUpdate),d.on("play",r.gracefullyUpdate),d.on("pause",r.gracefullyUpdate),d.on("ended",r.resetPlayer)})),d.on("error",r.catchPlayFail),r.setState({MediaError:!1});case 27:case"end":return e.stop()}}),e)})))),N(y(r),"gracefullyUpdate",(function(){return r.setState({updater:!r.state.updater})})),N(y(r),"setupClose",(function(e){e&&(e.addEventListener("touchstart",r.removeSelf),e.addEventListener("click",r.removeSelf)),r.closeIcon=e})),N(y(r),"setupAlert",(function(e){e&&(e.addEventListener("touchstart",r.fixPlayFail),e.addEventListener("click",r.fixPlayFail)),r.alertMask=e})),N(y(r),"setupReload",(function(e){e&&(e.addEventListener("touchstart",r.initPlayer),e.addEventListener("click",r.initPlayer))})),N(y(r),"removeSelf",(function(){return r.props.plugin.remove()})),r.state={NoSound:!1,MediaError:!1,updater:!1,controllerVisible:!1},e.room&&function(e){if(!e.calibrationTimestamp)throw new Error("@netless/video-js-plugin@".concat(T," requires white-web-sdk@^2.13.8 to work properly."))}(e.room),r}return p(n,[{key:"getAttributes",value:function(){var e,t=this.props.plugin.attributes;if(t){var n=[o.PlayerPhase.Pause,o.PlayerPhase.Ended,o.PlayerPhase.Stopped];if(!t.paused&&n.includes(null==(e=this.props.player)?void 0:e.phase)){var r=S(t,this.props);t=w(w({},t),{},{currentTime:r,paused:!0})}return t}}},{key:"render",value:function(){var e,t,n,r;if(!this.props.room&&!this.props.player)return null;var a=this.getAttributes();if(!a)return null;var o=1e3*((null==(e=this.player)?void 0:e.duration())||1e3),s=(null==(t=this.player)?void 0:t.bufferedPercent())||0;return i.default.createElement("div",{className:this.isEnabled()?"vjs-p":"vjs-p disabled",onMouseEnter:this.showController,onMouseMove:this.showController},i.default.createElement("div",{className:"video-js-plugin-player",ref:this.container}),i.default.createElement("div",{className:"video-js-plugin-header"},a.title&&i.default.createElement("div",{className:"video-js-plugin-title"},a.title),(null==(n=a.close)||n)&&i.default.createElement("div",{className:"videojs-plugin-close-icon",ref:this.setupClose},"")),i.default.createElement(ue,{duration:o,volume:a.volume,setVolume:this.setVolume,paused:a.paused,play:this.play,pause:this.pause,currentTime:1e3*S(a,this.props),setCurrentTime:this.setCurrentTime,buffered:o*s,scale:this.props.scale,visible:!0}),!(null==(r=this.props.plugin.context)?void 0:r.hideMuteAlert)&&this.state.NoSound&&i.default.createElement("div",{ref:this.setupAlert,className:"videojs-plugin-muted-alert"}),this.state.MediaError&&i.default.createElement("div",{className:"videojs-plugin-recovery-mode"},i.default.createElement("button",{ref:this.setupReload},"Reload Player")))}},{key:"debug",value:function(e){var t;if(null==(t=this.props.plugin.context)?void 0:t.verbose){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(k.log||console.log).apply(void 0,["[VideoJS Plugin] ".concat(e)].concat(r))}}},{key:"componentDidMount",value:function(){this.debug("plugin version =",T),this.debug("sdk version =",o.WhiteVersion),this.debug("video.js version =",a.default.VERSION),this.initPlayer(),this.disposer=(0,o.autorun)(this.syncPlayerWithAttributes),this.syncPlayerTimer=setInterval(this.syncPlayerWithAttributes,k.syncInterval),this.decreaseRetryTimer=setInterval(this.decreaseRetryCount,k.retryInterval)}},{key:"componentWillUnmount",value:function(){var e,t;null==(e=this.disposer)||e.call(this),null==(t=this.player)||t.dispose(),clearInterval(this.syncPlayerTimer),clearInterval(this.decreaseRetryTimer)}},{key:"isEnabled",value:function(){var e;if(!(null==(e=this.props.room)?void 0:e.isWritable))return!1;var t=this.props.plugin.context||{},n=t.identity,r=t.enable;return(void 0!==n||void 0!==r)&&(n?["host","publisher"].includes(n):Boolean(r))}}]),n}(i.Component);
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
t.videoJsPlugin=function(e){var t;return e&&(t=e,k=w(w({},A),t)),{kind:D,render:pe,defaultAttributes:{src:"",poster:"",hostTime:0,currentTime:0,paused:!0,muted:!1,volume:1,close:!0}}}},14976:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.bridge=void 0;var c=n(37023),l=function(){function e(){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registerMap={normal:{},async:{},progress:{}},this.postReady=function(){window._dsInit||(window._dsInit=!0,setTimeout((function(){t.bridge.call("_dsb.dsinit")}),0))},this.handleMessageFromNative=function(e){var t=e.method,r=e.data,i=e.callbackId,o=JSON.parse(r),s={id:i,complete:!0,data:void 0},u=n.getFunction(t);if(u){var c=u.type,l=u.function,d=u.obj;switch(c){case"normal":var h=l;s.data=h.apply(d,o),n.call(p,s);break;case"async":var f=l;if(f.then){f.apply(d,o).then((function(e){s.data=e,n.call(p,s)})).catch((function(e){}))}else{var g=l,m=[].concat(a(o),[function(e){s.data=e,n.call(p,s)}]);g.apply(d,m)}break;case"progress":var y=l,v=[].concat(a(o),[function(e,t){s.data=e,s.complete=!1!==t,n.call(p,s)}]);y.apply(d,v)}}}}var n,o,s;return n=e,(o=[{key:"call",value:function(e,t){var n,r,i={data:void 0===t?null:t};window._dsbridge?window._dsbridge.call(e,JSON.stringify(i)):(null===(r=null===(n=window.webkit)||void 0===n?void 0:n.messageHandlers)||void 0===r?void 0:r.asyncBridge)&&window.webkit.messageHandlers.asyncBridge.postMessage({method:e,arg:JSON.stringify(i)})}},{key:"asyncCall",value:function(e,t){var n={data:void 0===t?null:t};return new Promise((function(t){var r,i,a=(0,c.v4)();window[a]=function(e){t(e)},n[d]=a,window._dsbridge?window._dsbridge.call(e,JSON.stringify(n)):(null===(i=null===(r=window.webkit)||void 0===r?void 0:r.messageHandlers)||void 0===i?void 0:i.asyncBridge)&&window.webkit.messageHandlers.asyncBridge.postMessage({method:e,arg:JSON.stringify(n)})}))}},{key:"syncCall",value:function(e,t){var n={data:void 0===t?null:t};return window._dsbridge?window._dsbridge.call(e,JSON.stringify(t)):window._dswk&&prompt("_dsbridge="+e,JSON.stringify(n)),JSON.parse("{}").data}},{key:"register",value:function(e,t){this.postReady(),this.registerMap.normal[e]=t}},{key:"registerAsync",value:function(e,t){this.postReady(),this.registerMap.async[e]=t}},{key:"registerProgress",value:function(e,t){this.postReady(),this.registerMap.progress[e]=t}},{key:"splitNativeMethod",value:function(e){var t=e.split("."),n=t.pop();return[t.join("."),n]}},{key:"getFunction",value:function(e){for(var t in this.registerMap)if(Object.prototype.hasOwnProperty.call(this.registerMap,t)){var n=this.registerMap[t],a=n[e];if(a&&"function"==typeof a)return{type:t,function:a,obj:void 0};var o=i(this.splitNativeMethod(e),2),s=o[0],u=o[1],c=n[s]||{};if("object"===r(c)&&"function"==typeof c[u])return{type:t,function:c[u],obj:c}}}}])&&u(n.prototype,o),s&&u(n,s),e}(),d="_dscbstub",p="_dsb.returnValue";t.bridge=new l,window._handleMessageFromNative=t.bridge.handleMessageFromNative},38203:function(e,t,n){var r=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},i=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(13324),t),i(n(79888),t),i(n(14976),t)},5397:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Bridge=void 0;var i=n(37023),a=n(5419),o=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.methods=new Map,this.asyncMethods=new Map,this.queue=new Map,this.verbose=!1,this.isAndroid=function(){return/android/i.test(navigator.userAgent)||/android/i.test("".concat(window.__platform))},this.listen=function(e){t.recv(e.data)},this.isAndroid()?document.addEventListener("message",this.listen):window.addEventListener("message",this.listen)}var t,n,o;return t=e,n=[{key:"enableLog",value:function(){this.verbose=!0}},{key:"destroy",value:function(){window.removeEventListener("message",this.listen),document.addEventListener("message",this.listen)}},{key:"call",value:function(e,t,n){var r=this;return new Promise((function(o,s){var u=(0,i.v4)(),c=(0,a.bridgeMessageTemplate)(a.BridgeEventType.evt,u,e,t);r.queue.set(u,{ack:!1,resolve:o,reject:s,method:e,callback:n}),window.ReactNativeWebView.postMessage(c)}))}},{key:"register",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n?this.asyncMethods.set(e,t):this.methods.set(e,t)}},{key:"registerAsyn",value:function(e,t){this.asyncMethods.set(e,t)}},{key:"recv",value:function(e){if("string"==typeof e){var t=(0,a.parseBridgeMessage)(e),n=t.type,r=t.actionId,i=t.method,o=t.payload;switch(this.verbose&&console.log({type:n,actionId:r,method:i,payload:o}),n){case a.BridgeEventType.req:var s={data:void 0,actionId:r,complete:!0},u=function(e,t){try{s.data=e.apply(t,o);var n=(0,a.bridgeMessageTemplate)(a.BridgeEventType.ack,r,a.ackTypeSuccess,s);window.ReactNativeWebView.postMessage(n)}catch(e){var i=(0,a.bridgeMessageTemplate)(a.BridgeEventType.ack,r,a.ackTypeError,e);window.ReactNativeWebView.postMessage(i)}},c=function(e,t){o.push((function(e,t){s.data=e,s.complete=!1!==t;var n="",i=!1;if("string"==typeof e)try{var o=JSON.parse(e);i=!(!o.error&&!o.__error)}catch(e){}else i=!(!e||!e.error&&!e.__error);n=i?(0,a.bridgeMessageTemplate)(a.BridgeEventType.ack,r,a.ackTypeError,s.data):(0,a.bridgeMessageTemplate)(a.BridgeEventType.ack,r,a.ackTypeSuccess,s),window.ReactNativeWebView.postMessage(n)}));try{e.apply(t,o)}catch(e){var n=(0,a.bridgeMessageTemplate)(a.BridgeEventType.ack,r,a.ackTypeError,e);window.ReactNativeWebView.postMessage(n)}},l=this.methods.get(i),d=this.asyncMethods.get(i);if(l)u(l,this.methods);else if(d)c(d,this.asyncMethods);else{var p=i.split(".");if(p.length<2)return;var h=p.pop(),f=p.join("."),g=this.methods.get(f);if(g){var m=g[h];if(m&&"function"==typeof m)return void u(m,g)}var y=this.asyncMethods.get(f);if(y){var v=y[h];if(v&&"function"==typeof v)return void c(v,y)}console.log("method ".concat(i," not found"))}break;case a.BridgeEventType.ack:var b=o;if(this.queue.has(r)){var w=this.queue.get(r);w.ack=!0,i===a.ackTypeError?w.reject(o):(w.resolve(b.data),w.callback&&w.callback(b.data)),b.complete&&this.queue.delete(r)}}}}}],n&&r(t.prototype,n),o&&r(t,o),e}();t.Bridge=o},5419:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseBridgeMessage=t.bridgeMessageTemplate=t.ackTypeError=t.ackTypeSuccess=t.BridgeEventType=void 0,function(e){e.req="req",e.evt="evt",e.ack="ack"}(t.BridgeEventType||(t.BridgeEventType={})),t.ackTypeSuccess="success",t.ackTypeError="error",t.bridgeMessageTemplate=function(e,t,n,r){return JSON.stringify({type:e,actionId:t,method:n,payload:r})},t.parseBridgeMessage=function(e){try{var t=JSON.parse(e);return{type:t.type,actionId:t.actionId,method:t.method,payload:t.payload}}catch(t){return console.log("parse bridge message ".concat(e," failed: "),t),{type:"fail",actionId:"",method:"",payload:e}}}},13324:function(e,t,n){var r=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RNBridge=t.RNCommon=void 0,t.RNCommon=a(n(5419));var o=n(5397);Object.defineProperty(t,"RNBridge",{enumerable:!0,get:function(){return o.Bridge}})},79888:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},87980:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}
/*! For license information please see index.js.LICENSE.txt */var i;e=n.nmd(e),window,i=function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(t,n){t.exports=e},function(e,t,n){(function(e,i){n.d(t,"a",(function(){return et}));var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}var l=[];Object.freeze(l);var d={};Object.freeze(d);var p={};function h(){return"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:p}function f(){return++Ee.mobxGuid}function g(e){throw m(!1,e),"X"}function m(e,t){if(!e)throw new Error("[mobx] "+(t||"An invariant failed, however the error is obfuscated because this is an production build."))}function y(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var v=function(){};function b(e){return null!==e&&"object"==r(e)}function w(e){if(null===e||"object"!=r(e))return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function M(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function x(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function I(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return b(e)&&!0===e[n]}}function N(e){return void 0!==h().Map&&e instanceof h().Map}function T(e){return e instanceof Set}function D(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t}function A(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function k(e){return null===e?null:"object"==r(e)?""+e:e}function S(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function E(e,t){x(e,S(),t)}function j(e){return e[S()]=z,e}function C(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function z(){return this}var O=function(){function e(e){void 0===e&&(e="Atom@"+f()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=re.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return _e(this)},e.prototype.reportChanged=function(){Oe(),function(e){if(e.lowestObserverState!==re.STALE){e.lowestObserverState=re.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===re.UP_TO_DATE&&(r.isTracing!==ie.NONE&&Pe(r,e),r.onBecomeStale()),r.dependenciesState=re.STALE}}}(this),Le()},e.prototype.toString=function(){return this.name},e}(),L=I("Atom",O);function _(e,t){return e===t}var P={identity:_,structural:function(e,t){return Ft(e,t)},default:function(e,t){return function(e,t){return"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(e,t)||_(e,t)},shallow:function(e,t){return Ft(e,t,1)}},R={},U={};function B(e,t){var n=t?R:U;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return V(this),this[e]},set:function(t){V(this),this[e]=t}})}function V(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var n in M(e,"__mobxDidRunLazyInitializers",!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function Y(e,t){return function(){var n,r=function(r,i,a,o){if(!0===o)return t(r,i,a,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var u=r.__mobxDecorators;M(r,"__mobxDecorators",s({},u))}return r.__mobxDecorators[i]={prop:i,propertyCreator:t,descriptor:a,decoratorTarget:r,decoratorArguments:n},B(i,e)};return Q(arguments)?(n=l,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function Q(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function Z(e,t,n){return ot(e)?e:Array.isArray(e)?te.array(e,{name:n}):w(e)?te.object(e,void 0,{name:n}):N(e)?te.map(e,{name:n}):T(e)?te.set(e,{name:n}):e}function W(e){return e}function G(e){m(e);var t=Y(!0,(function(t,n,r,i,a){!function(e,t,n,r){var i=Rt(e);if(ct(i)){var a=dt(i,{object:e,name:t,type:"add",newValue:n});if(!a)return;n=a.newValue}n=(i.values[t]=new Te(n,r,i.name+"."+t,!1)).value,Object.defineProperty(e,t,function(e){return Ut[e]||(Ut[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}(t)),i.keys&&i.keys.push(t),function(e,t,n,r){var i=pt(e),a=Ye(),o=i||a?{type:"add",object:t,name:n,newValue:r}:null;a&&Ze(s(s({},o),{name:e.name,key:n})),i&&ft(e,o),a&&Ge()}(i,e,t,n)}(t,n,r?r.initializer?r.initializer.call(t):r.value:void 0,e)})),n=(void 0!==i&&i.env,t);return n.enhancer=e,n}var F={deep:!0,name:void 0,defaultDecorator:void 0};function H(e){return null==e?F:"string"==typeof e?{name:e,deep:!0}:e}function $(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?W:Z}Object.freeze(F),Object.freeze({deep:!1,name:void 0,defaultDecorator:void 0});var X=G(Z),J=G((function(e,t,n){return null==e||Qt(e)||St(e)||zt(e)||_t(e)?e:Array.isArray(e)?te.array(e,{name:n,deep:!1}):w(e)?te.object(e,void 0,{name:n,deep:!1}):N(e)?te.map(e,{name:n,deep:!1}):T(e)?te.set(e,{name:n,deep:!1}):g(!1)})),K=G(W),q=G((function(e,t,n){return Ft(e,t)?t:e})),ee={box:function(e,t){arguments.length>2&&ne("box");var n=H(t);return new Te(e,$(n),n.name,!0,n.equals)},shallowBox:function(e,t){return arguments.length>2&&ne("shallowBox"),te.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&ne("array");var n=H(t);return new It(e,$(n),n.name)},shallowArray:function(e,t){return arguments.length>2&&ne("shallowArray"),te.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&ne("map");var n=H(t);return new jt(e,$(n),n.name)},shallowMap:function(e,t){return arguments.length>2&&ne("shallowMap"),te.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&ne("set");var n=H(t);return new Lt(e,$(n),n.name)},object:function(e,t,n){"string"==typeof arguments[1]&&ne("object");var r=H(n);return rt({},e,t,r)},shallowObject:function(e,t){return"string"==typeof arguments[1]&&ne("shallowObject"),te.object(e,{},{name:t,deep:!1})},ref:K,shallow:J,deep:X,struct:q},te=function e(t,n,r){if("string"==typeof arguments[1])return X.apply(null,arguments);if(ot(t))return t;var i=w(t)?e.object(t,n,r):Array.isArray(t)?e.array(t,n):N(t)?e.map(t,n):T(t)?e.set(t,n):t;if(i!==t)return i;g(!1)};function ne(e){g("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(ee).forEach((function(e){return te[e]=ee[e]}));var re,ie,ae=Y(!1,(function(e,t,n,r,i){var a=n.get,o=n.set,u=i[0]||{};!function(e,t,n){var r=Rt(e);n.name=r.name+"."+t,n.context=e,r.values[t]=new De(n),Object.defineProperty(e,t,function(e){return Bt[e]||(Bt[e]={configurable:Ee.computedConfigurable,enumerable:!1,get:function(){return Vt(this).read(this,e)},set:function(t){Vt(this).write(this,e,t)}})}(t))}(e,t,s({get:a,set:o},u))}));ae({equals:P.structural}),function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(re||(re={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(ie||(ie={}));var oe=function(e){this.cause=e};function se(e){return e instanceof oe}function ue(e){switch(e.dependenciesState){case re.UP_TO_DATE:return!1;case re.NOT_TRACKING:case re.STALE:return!0;case re.POSSIBLY_STALE:for(var t=ge(!0),n=he(),r=e.observing,i=r.length,a=0;a<i;a++){var o=r[a];if(Ae(o)){if(Ee.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return fe(n),me(t),!0}if(e.dependenciesState===re.STALE)return fe(n),me(t),!0}}return ye(e),fe(n),me(t),!1}}function ce(e){var t=e.observers.length>0;Ee.computationDepth>0&&t&&g(!1),Ee.allowStateChanges||!t&&"strict"!==Ee.enforceActions||g(!1)}function le(e,t,n){var r=ge(!0);ye(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Ee.runId;var i,a=Ee.trackingDerivation;if(Ee.trackingDerivation=e,!0===Ee.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new oe(e)}return Ee.trackingDerivation=a,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=re.UP_TO_DATE,i=0,a=e.unboundDepsCount,o=0;o<a;o++)0===(s=n[o]).diffValue&&(s.diffValue=1,i!==o&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState);for(n.length=i,e.newObserving=null,a=t.length;a--;)0===(s=t[a]).diffValue&&Ce(s,e),s.diffValue=0;for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,je(s,e))}r!==re.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),e.observing.length,me(r),i}function de(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)Ce(t[n],e);e.dependenciesState=re.NOT_TRACKING}function pe(e){var t=he(),n=e();return fe(t),n}function he(){var e=Ee.trackingDerivation;return Ee.trackingDerivation=null,e}function fe(e){Ee.trackingDerivation=e}function ge(e){var t=Ee.allowStateReads;return Ee.allowStateReads=e,t}function me(e){Ee.allowStateReads=e}function ye(e){if(e.dependenciesState!==re.UP_TO_DATE){e.dependenciesState=re.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=re.UP_TO_DATE}}var ve=0,be=1,we=Object.getOwnPropertyDescriptor((function(){}),"name");function Me(e,t){var n=function(){return xe(e,t,this,arguments)};return n.isMobxAction=!0,n}function xe(e,t,n,r){var i=function(e,t,n){var r=Ye()&&!!e,i=0;if(r){i=Date.now();var a=n&&n.length||0,o=new Array(a);if(a>0)for(var s=0;s<a;s++)o[s]=n[s];Ze({type:"action",name:e,object:t,arguments:o})}var u=he();Oe();var c={prevDerivation:u,prevAllowStateChanges:Ie(!0),prevAllowStateReads:ge(!0),notifySpy:r,startTime:i,actionId:be++,parentActionId:ve};return ve=c.actionId,c}(e,n,r);try{return t.apply(n,r)}catch(e){throw i.error=e,e}finally{!function(e){ve!==e.actionId&&g("invalid action stack. did you forget to finish an action?"),ve=e.parentActionId,void 0!==e.error&&(Ee.suppressReactionErrors=!0),Ne(e.prevAllowStateChanges),me(e.prevAllowStateReads),Le(),fe(e.prevDerivation),e.notifySpy&&Ge({time:Date.now()-e.startTime}),Ee.suppressReactionErrors=!1}(i)}}function Ie(e){var t=Ee.allowStateChanges;return Ee.allowStateChanges=e,t}function Ne(e){Ee.allowStateChanges=e}we&&we.configurable;var Te=function(e){function t(t,n,r,i,a){void 0===r&&(r="ObservableValue@"+f()),void 0===i&&(i=!0),void 0===a&&(a=P.default);var o=e.call(this,r)||this;return o.enhancer=n,o.name=r,o.equals=a,o.hasUnreportedChange=!1,o.value=n(t,void 0,r),i&&Ye()&&Qe({type:"create",name:o.name,newValue:""+o.value}),o}return o(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==Ee.UNCHANGED){var n=Ye();n&&Ze({type:"update",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),n&&Ge()}},t.prototype.prepareNewValue=function(e){if(ce(this),ct(this)){var t=dt(this,{object:this,type:"update",newValue:e});if(!t)return Ee.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?Ee.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),pt(this)&&ft(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return lt(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),ht(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return k(this.get())},t}(O);Te.prototype[A()]=Te.prototype.valueOf,I("ObservableValue",Te);var De=function(){function e(e){this.dependenciesState=re.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=re.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+f(),this.value=new oe(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ie.NONE,m(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+f(),e.set&&(this.setter=Me(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?P.structural:P.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState===re.UP_TO_DATE){e.lowestObserverState=re.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===re.UP_TO_DATE&&(r.dependenciesState=re.POSSIBLY_STALE,r.isTracing!==ie.NONE&&Pe(r,e),r.onBecomeStale())}}}(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&g("Cycle detected in computation "+this.name+": "+this.derivation),0!==Ee.inBatch||0!==this.observers.length||this.keepAlive?(_e(this),ue(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState!==re.STALE){e.lowestObserverState=re.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===re.POSSIBLY_STALE?r.dependenciesState=re.STALE:r.dependenciesState===re.UP_TO_DATE&&(e.lowestObserverState=re.UP_TO_DATE)}}}(this)):ue(this)&&(this.warnAboutUntrackedRead(),Oe(),this.value=this.computeValue(!1),Le());var e=this.value;if(se(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(se(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){m(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else m(!1,!1)},e.prototype.trackAndCompute=function(){Ye()&&Qe({object:this.scope,type:"compute",name:this.name});var e=this.value,t=this.dependenciesState===re.NOT_TRACKING,n=this.computeValue(!0),r=t||se(e)||se(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Ee.computationDepth++,e)t=le(this,this.derivation,this.scope);else if(!0===Ee.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new oe(e)}return Ee.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(de(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,i=void 0;return function(e,t){void 0===t&&(t=d);var n,r=t&&t.name||e.name||"Autorun@"+f();if(t.scheduler||t.delay){var i=qe(t),a=!1;n=new Re(r,(function(){a||(a=!0,i((function(){a=!1,n.isDisposed||n.track(o)})))}),t.onError,t.requiresObservable)}else n=new Re(r,(function(){this.track(o)}),t.onError,t.requiresObservable);function o(){e(n)}return n.schedule(),n.getDisposer()}((function(){var a=n.get();if(!r||t){var o=he();e({type:"update",object:n,newValue:a,oldValue:i}),fe(o)}r=!1,i=a}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return k(this.get())},e}();De.prototype[A()]=De.prototype.valueOf;var Ae=I("ComputedValue",De),ke=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Se=!0,Ee=function(){var e=h();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Se=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new ke).version&&(Se=!1),Se?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new ke):(setTimeout((function(){g("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new ke)}();function je(e,t){var n=e.observers.length;n&&(e.observersIndexes[t.__mapid]=n),e.observers[n]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Ce(e,t){if(1===e.observers.length)e.observers.length=0,ze(e);else{var n=e.observers,r=e.observersIndexes,i=n.pop();if(i!==t){var a=r[t.__mapid]||0;a?r[i.__mapid]=a:delete r[i.__mapid],n[a]=i}delete r[t.__mapid]}}function ze(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Ee.pendingUnobservations.push(e))}function Oe(){Ee.inBatch++}function Le(){if(0==--Ee.inBatch){Ue();for(var e=Ee.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof De&&n.suspend())}Ee.pendingUnobservations=[]}}function _e(e){var t=Ee.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&Ee.inBatch>0&&ze(e),!1)}function Pe(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===ie.BREAK){var n=[];!function e(t,n,r){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(r).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return e(t,n,r+1)})))}((r=e,it(Zt(r,void 0))),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof De?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r}var Re=function(){function e(e,t,n,r){void 0===e&&(e="Reaction@"+f()),void 0===r&&(r=!1),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=re.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+f(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ie.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Ee.pendingReactions.push(this),Ue())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(Oe(),this._isScheduled=!1,ue(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Ye()&&Qe({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}Le()}},e.prototype.track=function(e){Oe();var t,n=Ye();n&&(t=Date.now(),Ze({name:this.name,type:"reaction"})),this._isRunning=!0;var r=le(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&de(this),se(r)&&this.reportExceptionInDerivation(r.cause),n&&Ge({time:Date.now()-t}),Le()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Ee.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Ee.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,e),Ye()&&Qe({type:"error",name:this.name,message:n,error:""+e}),Ee.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Oe(),de(this),Le()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"==typeof e[e.length-1]&&(n=e.pop());var r=st(e);if(!r)return g(!1);r.isTracing===ie.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?ie.BREAK:ie.LOG}(this,e)},e}();function Ue(){Ee.inBatch>0||Ee.isRunningReactions||function(e){e()}(Be)}function Be(){Ee.isRunningReactions=!0;for(var e=Ee.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Ee.isRunningReactions=!1}var Ve=I("Reaction",Re);function Ye(){return!!Ee.spyListeners.length}function Qe(e){if(Ee.spyListeners.length)for(var t=Ee.spyListeners,n=0,r=t.length;n<r;n++)t[n](e)}function Ze(e){Qe(s(s({},e),{spyReportStart:!0}))}var We={spyReportEnd:!0};function Ge(e){Qe(e?s(s({},e),{spyReportEnd:!0}):We)}function Fe(){g(!1)}function He(e){return function(t,n,r){if(r){if(r.value)return{value:Me(e,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Me(e,i.call(this))}}}return $e(e).apply(this,arguments)}}function $e(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){M(this,n,Xe(e,t))}})}}var Xe=function(e,t,n,r){return 1===arguments.length&&"function"==typeof e?Me(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?Me(e,t):1===arguments.length&&"string"==typeof e?He(e):!0!==r?He(t).apply(null,arguments):void(e[t]=Me(e.name||t,n.value))};function Je(e,t,n){M(e,t,Me(t,n.bind(e)))}Xe.bound=function(e,t,n,r){return!0===r?(Je(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Je(this,t,n.value||n.initializer.call(this)),this[t]},set:Fe}:{enumerable:!1,configurable:!0,set:function(e){Je(this,t,e)},get:function(){}}};var Ke=function(e){return e()};function qe(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Ke}function et(e,t,n){void 0===n&&(n=d),"boolean"==typeof n&&(n={fireImmediately:n});var r,i,a,o=n.name||"Reaction@"+f(),s=Xe(o,n.onError?(r=n.onError,i=t,function(){try{return i.apply(this,arguments)}catch(e){r.call(this,e)}}):t),u=!n.scheduler&&!n.delay,c=qe(n),l=!0,p=!1,h=n.compareStructural?P.structural:n.equals||P.default,g=new Re(o,(function(){l||u?m():p||(p=!0,c(m))}),n.onError,n.requiresObservable);function m(){if(p=!1,!g.isDisposed){var t=!1;g.track((function(){var n=e(g);t=l||!h(a,n),a=n})),l&&n.fireImmediately&&s(a,g),l||!0!==t||s(a,g),l&&(l=!1)}}return g.schedule(),g.getDisposer()}function tt(e,t,n){return nt("onBecomeUnobserved",e,t,n)}function nt(e,t,n,r){var i="function"==typeof r?Zt(t,n):Zt(t),a="function"==typeof r?r:n,o=i[e];return"function"!=typeof o?g(!1):(i[e]=function(){o.call(this),a.call(this)},function(){i[e]=o})}function rt(e,t,n,r){var i=(r=H(r)).defaultDecorator||(!1===r.deep?K:X);V(e),Rt(e,r.name,i.enhancer),Oe();try{for(var a in t){var o=Object.getOwnPropertyDescriptor(t,a),s=(n&&a in n?n[a]:o.get?ae:i)(e,a,o,!0);s&&Object.defineProperty(e,a,s)}}finally{Le()}return e}function it(e){var t,n,r={name:e.name};return e.observing&&e.observing.length>0&&(r.dependencies=(t=e.observing,n=[],t.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n).map(it)),r}function at(e,t){if(null==e)return!1;if(void 0!==t){if(Qt(e)){var n=e.$mobx;return n.values&&!!n.values[t]}return!1}return Qt(e)||!!e.$mobx||L(e)||Ve(e)||Ae(e)}function ot(e){return 1!==arguments.length&&g(!1),at(e)}function st(e){switch(e.length){case 0:return Ee.trackingDerivation;case 1:return Zt(e[0]);case 2:return Zt(e[0],e[1])}}function ut(e,t){void 0===t&&(t=void 0),Oe();try{return e.apply(t)}finally{Le()}}function ct(e){return void 0!==e.interceptors&&e.interceptors.length>0}function lt(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),y((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function dt(e,t){var n=he();try{var r=e.interceptors;if(r)for(var i=0,a=r.length;i<a&&(m(!(t=r[i](t))||t.type,"Intercept handlers should return nothing or a change object"),t);i++);return t}finally{fe(n)}}function pt(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function ht(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),y((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function ft(e,t){var n=he(),r=e.changeListeners;if(r){for(var i=0,a=(r=r.slice()).length;i<a;i++)r[i](t);fe(n)}}Object.create(Error.prototype);var gt,mt,yt,vt,bt=(gt=!1,mt={},Object.defineProperty(mt,"0",{set:function(){gt=!0}}),Object.create(mt)[0]=1,!1===gt),wt=0,Mt=function(){};yt=Mt,vt=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(yt.prototype,vt):void 0!==yt.prototype.__proto__?yt.prototype.__proto__=vt:yt.prototype=vt,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(e){Object.defineProperty(Mt.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})}));var xt=function(){function e(e,t,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new O(e||"ObservableArray@"+f()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return lt(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ht(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>wt&&At(e+t+1)},e.prototype.spliceWithArray=function(e,t,n){var r=this;ce(this.atom);var i=this.values.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=l),ct(this)){var a=dt(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!a)return l;t=a.removedCount,n=a.added}var o=(n=0===n.length?n:n.map((function(e){return r.enhancer(e,void 0)}))).length-t;this.updateArrayLength(i,o);var s=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,s),this.dehanceValues(s)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,c([e,t],n));var i=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),i},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&Ye(),i=pt(this),a=i||r?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;r&&Ze(s(s({},a),{name:this.atom.name})),this.atom.reportChanged(),i&&ft(this,a),r&&Ge()},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&Ye(),i=pt(this),a=i||r?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;r&&Ze(s(s({},a),{name:this.atom.name})),this.atom.reportChanged(),i&&ft(this,a),r&&Ge()},e}(),It=function(e){function t(t,n,r,i){void 0===r&&(r="ObservableArray@"+f()),void 0===i&&(i=!1);var a=e.call(this)||this,o=new xt(r,n,a,i);if(x(a,"$mobx",o),t&&t.length){var s=Ie(!0);a.spliceWithArray(0,0,t),Ne(s)}return bt&&Object.defineProperty(o.array,"0",Nt),a}return o(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map((function(e){return St(e)?e.peek():e})))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,n){void 0===n&&(n=0);var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},t.prototype.findIndex=function(e,t,n){void 0===n&&(n=0);for(var r=this.peek(),i=r.length,a=n;a<i;a++)if(e.call(t,r[a],a,this))return a;return-1},t.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,n)},t.prototype.spliceWithArray=function(e,t,n){return this.$mobx.spliceWithArray(e,t,n)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,e),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(0,0,e),n.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function n(e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(n.call(this,e),n.call(this,t),e!==t){var r,i=this.$mobx.values;r=e<t?c(i.slice(0,e),i.slice(e+1,t+1),[i[e]],i.slice(t+1)):c(i.slice(0,t),[i[e]],i.slice(t,e),i.slice(e+1)),this.replace(r)}},t.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},t.prototype.set=function(e,t){var n=this.$mobx,r=n.values;if(e<r.length){ce(n.atom);var i=r[e];if(ct(n)){var a=dt(n,{type:"update",object:this,index:e,newValue:t});if(!a)return;t=a.newValue}(t=n.enhancer(t,i))!==i&&(r[e]=t,n.notifyArrayChildUpdate(e,t,i))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}},t}(Mt);E(It.prototype,(function(){this.$mobx.atom.reportObserved();var e=this,t=0;return j({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(It.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),M(It.prototype,C(),"Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(e){var t=Array.prototype[e];m("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),M(It.prototype,e,(function(){return t.apply(this.peek(),arguments)}))})),function(e,t){for(var n=0;n<t.length;n++)M(e,t[n],e[t[n]])}(It.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var Nt=Tt(0);function Tt(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function Dt(e){Object.defineProperty(It.prototype,""+e,Tt(e))}function At(e){for(var t=wt;t<e;t++)Dt(t);wt=e}At(1e3);var kt=I("ObservableArrayAdministration",xt);function St(e){return b(e)&&kt(e.$mobx)}var Et={},jt=function(){function e(e,t,n){if(void 0===t&&(t=Z),void 0===n&&(n="ObservableMap@"+f()),this.enhancer=t,this.name=n,this.$mobx=Et,this._keys=new It(void 0,W,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!Ee.trackingDerivation)return this._has(e);var n=this._hasMap.get(e);if(!n){var r=n=new Te(this._has(e),W,this.name+"."+Ct(e)+"?",!1);this._hasMap.set(e,r),tt(r,(function(){return t._hasMap.delete(e)}))}return n.get()},e.prototype.set=function(e,t){var n=this._has(e);if(ct(this)){var r=dt(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(ct(this)&&!(i=dt(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=Ye(),r=pt(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return n&&Ze(s(s({},i),{name:this.name,key:e})),ut((function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),r&&ft(this,i),n&&Ge(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);n&&n.setNewValue(t)},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==Ee.UNCHANGED){var r=Ye(),i=pt(this),a=i||r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;r&&Ze(s(s({},a),{name:this.name,key:e})),n.setNewValue(t),i&&ft(this,a),r&&Ge()}},e.prototype._addValue=function(e,t){var n=this;ut((function(){var r=new Te(t,n.enhancer,n.name+"."+Ct(e),!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keys.push(e)}));var r=Ye(),i=pt(this),a=i||r?{type:"add",object:this,name:e,newValue:t}:null;r&&Ze(s(s({},a),{name:this.name,key:e})),i&&ft(this,a),r&&Ge()},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keys[S()]()},e.prototype.values=function(){var e=this,t=0;return j({next:function(){return t<e._keys.length?{value:e.get(e._keys[t++]),done:!1}:{value:void 0,done:!0}}})},e.prototype.entries=function(){var e=this,t=0;return j({next:function(){if(t<e._keys.length){var n=e._keys[t++];return{value:[n,e.get(n)],done:!1}}return{done:!0}}})},e.prototype.forEach=function(e,t){var n=this;this._keys.forEach((function(r){return e.call(t,n.get(r),r,n)}))},e.prototype.merge=function(e){var t=this;return zt(e)&&(e=e.toJS()),ut((function(){w(e)?Object.keys(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=u(e,2),r=n[0],i=n[1];return t.set(r,i)})):N(e)?e.constructor!==Map?g("Cannot initialize from classes that inherit from Map: "+e.constructor.name):e.forEach((function(e,n){return t.set(n,e)})):null!=e&&g("Cannot initialize map from "+e)})),this},e.prototype.clear=function(){var e=this;ut((function(){pe((function(){e._keys.slice().forEach((function(t){return e.delete(t)}))}))}))},e.prototype.replace=function(e){var t=this;return ut((function(){for(var n,r=N(n=e)||zt(n)?n:Array.isArray(n)?new Map(n):w(n)?new Map(Object.entries(n)):g("Cannot convert to map from '"+n+"'"),i=t._keys,a=Array.from(r.keys()),o=!1,s=0;s<i.length;s++){var u=i[s];i.length===a.length&&u!==a[s]&&(o=!0),r.has(u)||(o=!0,t.delete(u))}r.forEach((function(e,n){t._data.has(n)||(o=!0),t.set(n,e)})),o&&t._keys.replace(a)})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this._keys.forEach((function(n){return t["symbol"==r(n)?n:Ct(n)]=e.get(n)})),t},e.prototype.toJS=function(){var e=this,t=new Map;return this._keys.forEach((function(n){return t.set(n,e.get(n))})),t},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+this._keys.map((function(t){return Ct(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return ht(this,e)},e.prototype.intercept=function(e){return lt(this,e)},e}();function Ct(e){return e&&e.toString?e.toString():new String(e).toString()}E(jt.prototype,(function(){return this.entries()})),x(jt.prototype,C(),"Map");var zt=I("ObservableMap",jt),Ot={},Lt=function(){function e(e,t,n){if(void 0===t&&(t=Z),void 0===n&&(n="ObservableSet@"+f()),this.name=n,this.$mobx=Ot,this._data=new Set,this._atom=function(e,t,n){void 0===t&&(t=v),void 0===n&&(n=v);var r=new O(e);return nt("onBecomeObserved",r,t,void 0),tt(r,n),r}(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,r){return t(e,r,n)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;ut((function(){pe((function(){e._data.forEach((function(t){e.delete(t)}))}))}))},e.prototype.forEach=function(e,t){var n=this;this._data.forEach((function(r){e.call(t,r,r,n)}))},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if(ce(this._atom),ct(this)&&!(i=dt(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){ut((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var n=Ye(),r=pt(this),i=r||n?{type:"add",object:this,newValue:e}:null;r&&ft(this,i)}return this},e.prototype.delete=function(e){var t=this;if(ct(this)&&!(i=dt(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var n=Ye(),r=pt(this),i=r||n?{type:"delete",object:this,oldValue:e}:null;return ut((function(){t._atom.reportChanged(),t._data.delete(e)})),r&&ft(this,i),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=D(this.keys()),n=D(this.values());return j({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e,t=this,n=0;return void 0!==this._data.values?e=D(this._data.values()):(e=[],this._data.forEach((function(t){return e.push(t)}))),j({next:function(){return n<e.length?{value:t.dehanceValue(e[n++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return _t(e)&&(e=e.toJS()),ut((function(){Array.isArray(e)||T(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&g("Cannot initialize set from "+e)})),this},e.prototype.observe=function(e,t){return ht(this,e)},e.prototype.intercept=function(e){return lt(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+D(this.keys()).join(", ")+" ]"},e}();E(Lt.prototype,(function(){return this.values()})),x(Lt.prototype,C(),"Set");var _t=I("ObservableSet",Lt),Pt=function(){function e(e,t,n){this.target=e,this.name=t,this.defaultEnhancer=n,this.values={}}return e.prototype.read=function(e,t){if(this.target===e||(this.illegalAccess(e,t),this.values[t]))return this.values[t].get()},e.prototype.write=function(e,t,n){var r=this.target;r!==e&&this.illegalAccess(e,t);var i=this.values[t];if(i instanceof De)i.set(n);else{if(ct(this)){if(!(u=dt(this,{type:"update",object:r,name:t,newValue:n})))return;n=u.newValue}if((n=i.prepareNewValue(n))!==Ee.UNCHANGED){var a=pt(this),o=Ye(),u=a||o?{type:"update",object:r,oldValue:i.value,name:t,newValue:n}:null;o&&Ze(s(s({},u),{name:this.name,key:t})),i.setNewValue(n),a&&ft(this,u),o&&Ge()}}},e.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(ct(this)&&!(a=dt(this,{object:t,name:e,type:"remove"})))return;try{Oe();var n=pt(this),r=Ye(),i=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var a=n||r?{type:"remove",object:t,oldValue:i,name:e}:null;r&&Ze(s(s({},a),{name:this.name,key:e})),n&&ft(this,a),r&&Ge()}finally{Le()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return ht(this,e)},e.prototype.intercept=function(e){return lt(this,e)},e.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new It(Object.keys(this.values).filter((function(t){return e.values[t]instanceof Te})),W,"keys("+this.name+")",!0)),this.keys.slice()},e}();function Rt(e,t,n){void 0===t&&(t=""),void 0===n&&(n=Z);var r=e.$mobx;return r||(w(e)||(t=(e.constructor.name||"ObservableObject")+"@"+f()),t||(t="ObservableObject@"+f()),x(e,"$mobx",r=new Pt(e,t,n)),r)}var Ut=Object.create(null),Bt=Object.create(null);function Vt(e){return e.$mobx||(V(e),e.$mobx)}var Yt=I("ObservableObjectAdministration",Pt);function Qt(e){return!!b(e)&&(V(e),Yt(e.$mobx))}function Zt(e,t){if("object"==r(e)&&null!==e){if(St(e))return void 0!==t&&g(!1),e.$mobx.atom;if(_t(e))return e.$mobx;if(zt(e)){var n=e;return void 0===t?Zt(n._keys):((i=n._data.get(t)||n._hasMap.get(t))||g(!1),i)}var i;if(V(e),t&&!e.$mobx&&e[t],Qt(e))return t?((i=e.$mobx.values[t])||g(!1),i):g(!1);if(L(e)||Ae(e)||Ve(e))return e}else if("function"==typeof e&&Ve(e.$mobx))return e.$mobx;return g(!1)}function Wt(e,t){return e||g("Expecting some object"),void 0!==t?Wt(Zt(e,t)):L(e)||Ae(e)||Ve(e)||zt(e)||_t(e)?e:(V(e),e.$mobx?e.$mobx:void g(!1))}var Gt=Object.prototype.toString;function Ft(e,t,n){return void 0===n&&(n=-1),function e(t,n,i,a,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var s=r(t);if("function"!==s&&"object"!==s&&"object"!=r(n))return!1;t=Ht(t),n=Ht(n);var u=Gt.call(t);if(u!==Gt.call(n))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var c="[object Array]"===u;if(!c){if("object"!=r(t)||"object"!=r(n))return!1;var l=t.constructor,d=n.constructor;if(l!==d&&!("function"==typeof l&&l instanceof l&&"function"==typeof d&&d instanceof d)&&"constructor"in t&&"constructor"in n)return!1}if(0===i)return!1;i<0&&(i=-1),o=o||[];for(var p=(a=a||[]).length;p--;)if(a[p]===t)return o[p]===n;if(a.push(t),o.push(n),c){if((p=t.length)!==n.length)return!1;for(;p--;)if(!e(t[p],n[p],i-1,a,o))return!1}else{var h=Object.keys(t),f=void 0;if(p=h.length,Object.keys(n).length!==p)return!1;for(;p--;)if(!$t(n,f=h[p])||!e(t[f],n[f],i-1,a,o))return!1}return a.pop(),o.pop(),!0}(e,t,n)}function Ht(e){return St(e)?e.peek():N(e)||zt(e)||T(e)||_t(e)?D(e.entries()):e}function $t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}"object"==("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":r(__MOBX_DEVTOOLS_GLOBAL_HOOK__))&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return Ee.spyListeners.push(e),y((function(){Ee.spyListeners=Ee.spyListeners.filter((function(t){return t!==e}))}))},extras:{getDebugName:function(e,t){return(void 0!==t?Zt(e,t):Qt(e)||zt(e)||_t(e)?Wt(e):Zt(e)).name}},$mobx:"$mobx"})}).call(this,n(10),n(11))},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjlweCIgaGVpZ2h0PSIyNXB4IiB2aWV3Qm94PSIwIDAgMjkgMjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5hdWRpbyAoMik8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImF1ZGlvLSgyKSIgZmlsbD0iIzMzMzMzMyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI1LjQzMDUxODIsMTEuNTAwNTQ0OCBMMjUuMjgwOTU4OSwxMS41MDA1NDQ4IEwyNS4yODA5NTg5LDEwLjMxNDkyMTcgQzI1LjI4MDk1ODksNC42Mjc1MjMxOSAyMC40NDg4MzQyLDAgMTQuNTA5MDY0MiwwIEM4LjU2OTI5NDI0LDAgMy43MzcxNjk0Nyw0LjYyNzUyMzE5IDMuNzM3MTY5NDcsMTAuMzE0OTIxNyBMMy43MzcxNjk0NywxMS41MDA1NDQ4IEwzLjU2NzY2ODk0LDExLjUwMDU0NDggQzEuNjAwNzM3NjQsMTEuNTAwNTQ0OCAwLDEzLjAzMjg3MyAwLDE0LjkxNzI5NTMgTDAsMTcuODQ5OTE2MiBDMCwxOS43MzQzMzg1IDEuNjAwNzM3NjQsMjEuMjY2NjY2NyAzLjU2NzY2ODk0LDIxLjI2NjY2NjcgTDUuMzM2MDk0MjcsMjEuMjY2NjY2NyBDNi4xNzkwNjQ4MiwyMS4yNjY2NjY3IDYuODYyNTA1NDcsMjAuNjExODc5MyA2Ljg2MjUwNTQ3LDE5LjgwNTI5NjMgTDYuODYyNTA1NDcsMTIuOTYxOTE1MiBDNi44NjI1MDU0NywxMi4xNTQ0MzQgNi4xNzkwNjQ4MiwxMS41MDA1NDQ4IDUuMzM2MDk0MjcsMTEuNTAwNTQ0OCBMNS4yNjM1ODA2NywxMS41MDA1NDQ4IEw1LjI2MzU4MDY3LDEwLjMxNDkyMTcgQzUuMjYzNTgwNjcsNS40MzMyMDgwNCA5LjQxMTM1ODM4LDEuNDYyMjY4NTkgMTQuNTA5MDY0MiwxLjQ2MjI2ODU5IEMxOS42MDY3NywxLjQ2MjI2ODU5IDIzLjc1NDU0NzcsNS40MzQxMDYyNCAyMy43NTQ1NDc3LDEwLjMxNDkyMTcgTDIzLjc1NDU0NzcsMTEuNTAwNTQ0OCBMMjMuNjYyOTk5MywxMS41MDA1NDQ4IEMyMi44MjAwMjg4LDExLjUwMDU0NDggMjIuMTM2NTg4MSwxMi4xNTUzMzIyIDIyLjEzNjU4ODEsMTIuOTYxOTE1MiBMMjIuMTM2NTg4MSwxOS44MDQzOTgxIEMyMi4xMzY1ODgxLDIwLjYxMTg3OTMgMjIuODIwMDI4OCwyMS4yNjU3Njg1IDIzLjY2Mjk5OTMsMjEuMjY1NzY4NSBMMjUuNDMxNDI0NiwyMS4yNjU3Njg1IEMyNy4zOTkyNjI0LDIxLjI2NTc2ODUgMjksMTkuNzMzNDQwMyAyOSwxNy44NDkwMTggTDI5LDE0LjkxNjM5NzEgQzI4Ljk5OTA5MzYsMTMuMDMyODczIDI3LjM5ODM1NTksMTEuNTAwNTQ0OCAyNS40MzA1MTgyLDExLjUwMDU0NDggWiBNNS4zMzcwMDA2OSwxMi45NjE5MTUyIEw1LjMzNzAwMDY5LDE5LjgwNDM5ODEgTDMuNTY3NjY4OTQsMTkuODA0Mzk4MSBDMi40NDQ2MTQ2MiwxOS44MDQzOTgxIDEuNTI2NDExMiwxOC45MjQxNjI3IDEuNTI2NDExMiwxNy44NDkwMTggTDEuNTI2NDExMiwxNC45MTYzOTcxIEMxLjUyNjQxMTIsMTMuODQxMjUyNCAyLjQ0NDYxNDYyLDEyLjk2MTAxNyAzLjU2NzY2ODk0LDEyLjk2MTAxNyBMNS4zMzcwMDA2OSwxMi45NjEwMTcgTDUuMzM3MDAwNjksMTIuOTYxOTE1MiBaIE0yNy40NzI2ODI0LDE3Ljg0OTAxOCBDMjcuNDcyNjgyNCwxOC45MjQxNjI3IDI2LjU1NDQ3OSwxOS44MDQzOTgxIDI1LjQzMDUxODIsMTkuODA0Mzk4MSBMMjMuNjYyMDkyOSwxOS44MDQzOTgxIEwyMy42NjIwOTI5LDEyLjk2MTkxNTIgTDI1LjQzMDUxODIsMTIuOTYxOTE1MiBDMjYuNTUzNTcyNSwxMi45NjE5MTUyIDI3LjQ3MjY4MjQsMTMuODQxMjUyNCAyNy40NzI2ODI0LDE0LjkxNzI5NTMgTDI3LjQ3MjY4MjQsMTcuODQ5MDE4IEwyNy40NzI2ODI0LDE3Ljg0OTAxOCBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNi41OTYwNTI2LDI0LjE2NjY2NjcgQzE2LjIyNDkwODgsMjQuMTY3MjA3MSAxNS45MTM3MTA1LDIzLjg5MDA3ODIgMTUuODc2MTQzOSwyMy41MjU1NzE1IEwxNC45NTk3MzYyLDE0LjYxMjg4MTYgTDE0LjAyNjU4NjUsMTkuODQ1MTUwOCBDMTMuOTcyMTM4OSwyMC4xNTk2OTMzIDEzLjcxMjY5MjMsMjAuNDAwMjY4NyAxMy4zOTEyODU2LDIwLjQzNDI0MjIgQzEzLjA2OTg3ODksMjAuNDY4MjE1NyAxMi43NjQ3MTc4LDIwLjI4NzMyMDggMTIuNjQ0MDQ0NiwxOS45OTEyODkgTDExLjIwNTk4OTYsMTYuNTIyMjQ2NyBMMTAuNzU2NTk3NCwxOC40Nzg1ODQ3IEMxMC42ODE2MzQ2LDE4LjgwMzY4NzQgMTAuMzg4NTMzMywxOS4wMzQxNTI0IDEwLjA1MDc4NzMsMTkuMDMzNTYxOSBMOC40NTY3NjY2NywxOS4wMzM1NjE5IEM4LjI2NTEzMzg3LDE5LjAzMzc5MjcgOC4wODEyNTY5OCwxOC45NTg4NjM3IDcuOTQ1NTg2ODgsMTguODI1MjU4MyBDNy44MDk5MTY3OCwxOC42OTE2NTI5IDcuNzMzNTY2ODksMTguNTEwMzE1NSA3LjczMzMzMzMzLDE4LjMyMTEzODIgQzcuNzMzNTY2ODksMTguMTMxOTYxIDcuODA5OTE2NzgsMTcuOTUwNjIzNSA3Ljk0NTU4Njg4LDE3LjgxNzAxODEgQzguMDgxMjU2OTgsMTcuNjgzNDEyNyA4LjI2NTEzMzg3LDE3LjYwODQ4MzcgOC40NTY3NjY2NywxNy42MDg3MTQ1IEw5LjQ3Mjc0NTUyLDE3LjYwODcxNDUgTDEwLjMwMTkxODIsMTMuOTk5NjIzMSBDMTAuMzczNjM5LDEzLjY5NzE5MzQgMTAuNjM0NzI2MywxMy40NzQ5MjA5IDEwLjk0ODI5NiwxMy40NDkzMzk4IEMxMS4yNjE4NjU3LDEzLjQyMzc1ODYgMTEuNTU2MzcyNCwxMy42MDA3MDU1IDExLjY3NzQxMDgsMTMuODg3NDA5OSBMMTMuMDM1MjgwMiwxNy4xNjMzNDEgTDE0LjQzOTg1MTEsOS4yODkyNzYwNCBDMTQuNTA0NjU5OSw4LjkzOTM5MjYzIDE0LjgxOTAyODksOC42ODg5NzQ2NiAxNS4xNzkxNDU0LDguNzAwMzczOTMgQzE1LjUzOTgzMTMsOC43MTI4NjAzMiAxNS44MzU4Njk5LDguOTg2MTY3MTUgMTUuODcyNjE5Miw5LjM0MDU5ODM5IEwxNi45NzE0MjcyLDIwLjAxOTk5NDcgTDE3LjU3ODU0NzMsMTguMTg0NTY4NiBDMTcuNjc1ODg3OCwxNy44OTA4ODIgMTcuOTUzNzE2MiwxNy42OTI0Njc2IDE4LjI2NjczNDIsMTcuNjkzMDkxOSBMMTkuNTQxNzc0NCwxNy42OTMwOTE5IEMxOS44MDgxMTEzLDE3LjY4MDA5NTEgMjAuMDYwMDQ5LDE3LjgxMjk2ODMgMjAuMTk3MTYzOCwxOC4wMzg3NDc0IEMyMC4zMzQyNzg3LDE4LjI2NDUyNjYgMjAuMzM0Mjc4NywxOC41NDY1MDQ3IDIwLjE5NzE2MzgsMTguNzcyMjgzOCBDMjAuMDYwMDQ5LDE4Ljk5ODA2MyAxOS44MDgxMTEzLDE5LjEzMDkzNjEgMTkuNTQxNzc0NCwxOS4xMTc5MzkzIEwxOC43OTE5MDYyLDE5LjExNzkzOTMgTDE3LjI4NTEyMDYsMjMuNjczNDQ5NSBDMTcuMTg3MTIzLDIzLjk2NzI4NDUgMTYuOTA5NDE4MywyNC4xNjYwNTgxIDE2LjU5NjA1MjYsMjQuMTY2NjY2NyIgaWQ9Iui3r+W+hCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,n){e.exports=t},function(e,t,n){var r=n(7),i=n(8);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzZweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzYgMzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSLpobXpnaIxIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i57yW57uELTIiPgogICAgICAgICAgICA8ZyBpZD0i5aOw6Z+zIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1LjkzMDg4NTEsMC42MTgyMDU2MjUgTDcuMTgxNzAzNjYsNi40NDQwMDc4NCBMMy42MDM0NDU2Miw2LjQ0NDAwNzg0IEMxLjYyODMzMTAzLDYuNDQ0MDA3ODQgMC4wMjUxODc1OTM3LDguMjc3NjY4NjMgMC4wMjUxODc1OTM3LDEwLjUzMDQ1MTkgTDAuMDI1MTg3NTkzNywyMS40MzI4NzQ5IEMwLjAyNTE4NzU5MzcsMjMuNjkwODk3MiAxLjYyODMzMSwyNS41MTkzMTg5IDMuNjAzNDQ1NjIsMjUuNTE5MzE4OSBMNy4xODE3MDM2NiwyNS41MTkzMTg5IEwxNS45MjU2NDYsMzEuMzUwMzYwMiBDMTcuMDI1ODQyNSwzMi4wNzg1ODU1IDE4LjQzNTE0MTgsMzIuMTQ2NjkyOSAxOS41OTgyMDY2LDMxLjUyMzI0ODIgQzIwLjc2MTI3MTQsMzAuODk5ODAzNSAyMS40ODQyNTc3LDI5LjY4OTU4NzQgMjEuNDg5NDk2NywyOC4zNzQ1OTA3IEwyMS40ODk0OTY3LDMuNTkzOTc1MTMgQzIxLjQ4OTQ5NjcsMi4yNzM3MzkzOCAyMC43NjEyNzE0LDEuMDYzNTIzMjUgMTkuNTk4MjA2NiwwLjQ0NTMxNzYyNSBDMTguNDM1MTQxNywtMC4xODMzNjYwNjIgMTcuMDI1ODQyNSwtMC4xMTUyNTg2NTYgMTUuOTMwODg1MSwwLjYxODIwNTYyNSBMMTUuOTMwODg1MSwwLjYxODIwNTYyNSBaIE03LjE4MTcwMzY2LDIzLjEzNTU1OTkgTDMuNjAzNDQ1NjIsMjMuMTM1NTU5OSBDMy4wMjE5MTMyMiwyMy4xMzU1NTk5IDIuNDA4OTQ2NTksMjIuNDM4NzY4OCAyLjQwODk0NjU5LDIxLjQzMjg3NDkgTDIuNDA4OTQ2NTksMTAuNTM1NjkwOSBDMi40MDg5NDY1OSw5LjUyOTc5NyAzLjAxNjY3NDE2LDguODMzMDA1OTEgMy42MDM0NDU2Miw4LjgzMzAwNTkxIEw3LjE4MTcwMzY2LDguODMzMDA1OTEgTDcuMTgxNzAzNjYsMjMuMTM1NTU5OSBaIE0xOS4xMDU3Mzc3LDI4LjM3NDU5MDcgQzE5LjEwNTczNzcsMjguODE0NjY5MyAxOC44NjQ3NDIzLDI5LjIxODA3NDcgMTguNDc3MDU0LDI5LjQyMjM5NjggQzE4LjA4OTM2NTcsMjkuNjMxOTU4MSAxNy42MTc4NTI5LDI5LjYwNTc2MjkgMTcuMjU2MzU5OCwyOS4zNjQ3Njc1IEw5LjU2NTQ2MjY2LDI0LjI0NjIzNDQgTDkuNTY1NDYyNjYsNy43MjIzMzEzOCBMMTcuMjUxMTIwOCwyLjU5ODU1OTI4IEMxNy42MTc4NTMsMi4zNTc1NjM4OCAxOC4wODkzNjU4LDIuMzMxMzY4NzIgMTguNDcxODE1LDIuNTQwOTI5OTQgQzE4Ljg1OTUwMzIsMi43NTA0OTExNiAxOS4xMDA0OTg3LDMuMTUzODk2NTMgMTkuMTAwNDk4NywzLjU5Mzk3NTEzIEwxOS4xMDA0OTg3LDI4LjM3NDU5MDcgTDE5LjEwNTczNzcsMjguMzc0NTkwNyBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUuMDAwMDAwLCAxMi4wMDAwMDApIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01LjY4NDM0MTg5ZS0xNCwwIEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuNTA2NzA2MmUtMTQsLTEuNzc2MzU2ODRlLTE1IEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC40NjU4MDksIDQuNDY1ODA5KSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC00LjQ2NTgwOSwgLTQuNDY1ODA5KSAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg=="},function(e,t,n){var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var d=o(l),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:l,updater:g(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,f=0;function g(e,t){var n,r,i;if(t.singleton){var a=f++;n=h||(h=u(t)),r=d.bind(null,n,a,!1),i=d.bind(null,n,a,!0)}else n=u(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=o(n[r]);a[i].references--}for(var u=s(e,t),c=0;c<n.length;c++){var l=o(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=u}}}},function(e,t,n){(t=n(9)(!1)).push([e.i,".media-mute-box {\n  position: absolute;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.media-mute-box-inner {\n  width: 88px;\n  cursor: pointer;\n  height: 64px;\n  border-radius: 8px;\n  background-color: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n.media-mute-box-inner span {\n  color: white;\n}\n.media-mute-box-inner img {\n  width: 24px;\n}\n.plugin-audio-box {\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  transform-origin: top left;\n}\n.plugin-audio-box-nav {\n  width: 100%;\n  height: 32px;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  background-image: linear-gradient(180deg, #E0E1E0 0%, #CDCDCC 100%);\n  display: flex;\n  flex-direction: row;\n  flex-shrink: 0;\n  justify-content: space-between;\n  align-items: center;\n  cursor: default;\n}\n.plugin-audio-box-nav span {\n  margin-left: 6px;\n  font-size: 12px;\n  font-weight: bold;\n}\n.plugin-audio-box-body {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #F2F4F5;\n}\n.white-plugin-audio-box {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.white-plugin-audio {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n}\n.plugin-audio-box-delete {\n  width: 22px;\n  height: 22px;\n  background-color: #FF756E;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 8px;\n  cursor: pointer;\n  opacity: 0.6;\n}\n.plugin-audio-box-delete img {\n  width: 14px;\n}\n.plugin-audio-box-delete:hover {\n  opacity: 1;\n}\n",""]),e.exports=t},function(e,t,n){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var s=(n=o,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(u).concat([s]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],l=!1,d=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&h())}function h(){if(!l){var e=s(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){n.r(t);var r,i,a=n(0),o=n(3),s=(n(4),n(1)),u=n(5),c=n(2),l=n(6),d=function(){function e(e){this.player=e,this.isFirstSync=!0}return e.prototype.syncProgress=function(e){this.isFirstSync?(this.isFirstSync=!1,this.player.currentTime=e):Math.abs(this.player.currentTime-e)>=2&&(this.player.currentTime=e)},e}(),p=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},g=function(e){return new Promise((function(t){return setTimeout(t,e)}))};!function(e){e.host="host",e.guest="guest",e.listener="listener"}(i||(i={}));var m,y,v=function(e){function t(t){var n=e.call(this,t)||this;return n.selfUserInf=null,n.playerState=!1,n.handleStartCondition=function(){return h(n,void 0,void 0,(function(){var e,t=this;return f(this,(function(n){switch(n.label){case 0:return e=this.props.plugin,this.setMyIdentityRoom(),[4,this.handleNativePlayerState(e.attributes.play)];case 1:return n.sent(),this.playerState=e.attributes.play,this.player.current&&(this.handleFirstSeek(),this.player.current.currentTime=e.attributes.currentTime,this.player.current.addEventListener("play",(function(){t.handleRemotePlayState(!0)})),this.player.current.addEventListener("pause",(function(){t.handleRemotePlayState(!1)})),this.player.current.addEventListener("seeked",(function(){if(t.player.current){var n=e.attributes.currentTime;t.handleRemoteSeekData(n)}})),this.player.current.addEventListener("volumechange",(function(e){t.handleRemoteVolumeChange(e.target.volume),t.handleRemoteMuteState(e.target.muted)}))),[2]}}))}))},n.isHost=function(){return!(!n.selfUserInf||n.selfUserInf.identity!==i.host)},n.setMyIdentityRoom=function(){var e=n.props.plugin;e.context&&e.context.identity&&(n.selfUserInf={identity:e.context.identity})},n.handleNativePlayerState=function(e){return h(n,void 0,void 0,(function(){var t;return f(this,(function(n){switch(n.label){case 0:if(!e)return[3,7];if(!this.player.current)return[3,6];n.label=1;case 1:return n.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return n.sent(),[3,6];case 3:return""+(t=n.sent()).name!="NotAllowedError"&&""+t.name!="AbortError"?[3,5]:(this.setState({selfMute:!0}),[4,this.player.current.play()]);case 4:n.sent(),n.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),n.label=8;case 8:return[2]}}))}))},n.handleRemoteSeekData=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({seek:e})},n.handleRemoteMuteState=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({mute:e})},n.handleRemoteVolumeChange=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({volume:e})},n.handleRemotePlayState=function(e){var t=n.props.plugin;n.playerState=e;var r=t.attributes.currentTime;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({play:e,seek:r,seekTime:Date.now()/1e3})},n.lastSyncProgressTimestamp=0,n.onTimeUpdate=function(e){var t=n.props.plugin,r=Date.now();r-n.lastSyncProgressTimestamp>1e3&&(n.lastSyncProgressTimestamp=r,n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({currentTime:e,play:n.playerState}))},n.handleSeekReaction=function(e,t){n.isHost()||n.player.current&&void 0!==t&&(n.player.current.currentTime=e+Date.now()/1e3-t)},n.handleRemove=function(){return h(n,void 0,void 0,(function(){var e;return f(this,(function(t){switch(t.label){case 0:return e=this.props.plugin,this.handleRemotePlayState(!1),[4,g(300)];case 1:return t.sent(),e.remove(),[2]}}))}))},n.timeUpdate=function(){if(n.player.current){var e=n.player.current.currentTime;n.onTimeUpdate(e)}},n.detectAudioClickEnable=function(){var e=n.props.plugin;return e.context&&e.context.identity?e.context.identity!==i.host?"none":"auto":"none"},n.renderMuteBox=function(){var e=n.props.plugin;return e.context&&e.context.identity&&e.context.identity!==i.host&&n.state.selfMute?a.createElement("div",{className:"media-mute-box"},a.createElement("div",{onClick:function(){n.setState({selfMute:!1})},onTouchStart:function(){n.setState({selfMute:!1})},style:{pointerEvents:"auto"},className:"media-mute-box-inner"},a.createElement("img",{src:u,alt:"mute_icon"}),a.createElement("span",null,"unmute"))):null},n.renderDeleteBtn=function(){var e=n.props.plugin;return e.context&&e.context.identity&&e.context.identity===i.host?a.createElement("div",{style:{pointerEvents:"auto"},className:"plugin-audio-box-delete",onClick:n.handleRemove},a.createElement("img",{src:l,alt:"delete_icon"})):null},n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:a.createElement("div",{className:"plugin-audio-box-nav"},a.createElement("div",null,a.createElement("img",{style:{width:20,marginLeft:8},src:c,alt:"audio_plugin"}),a.createElement("span",null,"Audio Player")),n.renderDeleteBtn())},n.handleFirstSeek=function(e){if(!e){var t,r=n.props.plugin,i=Date.now()/1e3;t=r.attributes.seekTime?r.attributes.seek+i-r.attributes.seekTime:r.attributes.seek,n.syncNode.syncProgress(t)}},n.player=a.createRef(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionSeekTimeDisposer=n.startSeekTimeReaction(),n.reactionSyncDisposer=n.startSyncReaction(),n.state={play:!1,seek:0,selfMute:!1,currentTime:0,mute:!1,volume:1,isEnd:!1},n}return p(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.syncNode=new d(this.player.current),[4,this.handleStartCondition()];case 1:return e.sent(),[2]}}))}))},t.prototype.startPlayReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.play}),(function(t){return h(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.isHost()?[3,2]:[4,this.handleNativePlayerState(t)];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.startSeekTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.seekTime}),(function(n){e.handleSeekReaction(t.attributes.seek,n)}))},t.prototype.startSeekReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.seek}),(function(n){e.handleSeekReaction(n,t.attributes.seekTime)}))},t.prototype.startSyncReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.currentTime}),(function(t){return h(e,void 0,void 0,(function(){return f(this,(function(e){return this.isHost()||this.player.current&&Math.abs(t-this.player.current.currentTime)>2&&(this.player.current.currentTime=t),[2]}))}))}))},t.prototype.startVolumeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.volume}),(function(t){e.isHost()||e.player.current&&(e.player.current.volume=t)}))},t.prototype.startMuteTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.mute}),(function(t){e.isHost()||e.setState({mute:t})}))},t.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionSyncDisposer(),this.player.current&&this.player.current.pause()},t.prototype.render=function(){var e=this,t=this.props,n=t.size,r=t.plugin,o=t.scale,s=0===o?1:o,u=navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return a.createElement("div",{className:"plugin-audio-box",style:{width:n.width/s,height:n.height/s,transform:"scale("+s+")"}},this.renderNavigation(),a.createElement("div",{className:"plugin-audio-box-body"},this.renderMuteBox(),a.createElement("div",{className:"white-plugin-audio-box"},a.createElement("audio",{className:"white-plugin-audio",src:r.attributes.pluginAudioUrl,ref:this.player,muted:this.state.mute?this.state.mute:this.state.selfMute,style:{width:"100%",height:54,pointerEvents:this.detectAudioClickEnable(),outline:"none"},onLoadedMetadataCapture:function(){return h(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return u?[4,g(300)]:[3,2];case 1:e.sent(),this.handleFirstSeek(this.state.isEnd),e.label=2;case 2:return[2]}}))}))},onEnded:function(){return h(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.player.current?this.selfUserInf?this.selfUserInf.identity!==i.host?[3,2]:(r.putAttributes({seek:0,seekTime:void 0,currentTime:0}),[4,g(500)]):[3,5]:[3,7];case 1:return e.sent(),this.player.current.load(),[3,4];case 2:return[4,g(1e3)];case 3:e.sent(),this.player.current.load(),e.label=4;case 4:return[3,7];case 5:return[4,g(1e3)];case 6:e.sent(),this.player.current.load(),e.label=7;case 7:return this.setState({isEnd:!0}),[2]}}))}))},controls:!0,controlsList:"nodownload nofullscreen",onTimeUpdate:this.timeUpdate,preload:"auto"}))))},t}(a.Component),b=(y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},M=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};!function(e){e.host="host",e.guest="guest",e.listener="listener"}(m||(m={}));var x=function(e){function t(t){var n=e.call(this,t)||this;return n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:a.createElement("div",{className:"plugin-audio-box-nav"},a.createElement("div",null,a.createElement("img",{style:{width:20,marginLeft:8},src:c,alt:"audio_plugin"}),a.createElement("span",null,"Audio Player")))},n.player=a.createRef(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionReplayPlayingDisposer=n.startReplayPlayingReaction(),n.state={mute:!1},n}return b(t,e),t.prototype.componentDidMount=function(){this.syncNode=new d(this.player.current)},t.prototype.startPlayReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.attributes.play}),(function(t){return w(e,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];e.label=1;case 1:return e.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return e.sent(),[3,6];case 3:return""+e.sent().name!="NotAllowedError"?[3,5]:[4,this.player.current.play()];case 4:e.sent(),e.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),e.label=8;case 8:return[2]}}))}))}))},t.prototype.startSeekReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.playerTimestamp}),(function(t){var n=e.props.plugin.attributes,r=n.seek,i=n.seekTime;if(void 0!==i){var a=r+(e.props.player.beginTimestamp+t)/1e3-i;e.syncNode.syncProgress(a)}}))},t.prototype.startReplayPlayingReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.isPlaying}),(function(t){return w(e,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];e.label=1;case 1:return e.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return e.sent(),[3,6];case 3:return""+e.sent().name!="NotAllowedError"?[3,5]:[4,this.player.current.play()];case 4:e.sent(),e.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),e.label=8;case 8:return[2]}}))}))}))},t.prototype.startVolumeReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.attributes.volume}),(function(t){e.player.current&&(e.player.current.volume=t)}))},t.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionReplayPlayingDisposer()},t.prototype.startMuteTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.mute}),(function(t){e.setState({mute:t})}))},t.prototype.render=function(){var e=this.props,t=e.size,n=e.plugin,r=e.scale,i=0===r?1:r;return a.createElement("div",{className:"plugin-audio-box",style:{width:t.width/i,height:t.height/i,transform:"scale("+i+")"}},this.renderNavigation(),a.createElement("div",{className:"plugin-audio-box-body"},a.createElement("div",{className:"white-plugin-audio-box"},a.createElement("audio",{"webkit-playsinline":"true",playsInline:!0,className:"white-plugin-audio",src:n.attributes.pluginAudioUrl,ref:this.player,muted:this.state.mute,style:{width:"100%",height:"100%",pointerEvents:"none",outline:"none"},controls:!0,controlsList:"nodownload nofullscreen",preload:"auto"}))))},t}(a.Component);n.d(t,"audioPlugin",(function(){return A}));var I,N=(I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},D=function(e){function t(t){return e.call(this,t)||this}return N(t,e),t.prototype.render=function(){var e=this;return a.createElement(o.CNode,{context:this.props.cnode},a.createElement(o.RoomConsumer,null,(function(t){return t?a.createElement(v,T({},e.props)):null})),a.createElement(o.PlayerConsumer,null,(function(t){return t?a.createElement(x,T({},e.props,{player:t})):null})))},t}(a.Component),A=Object.freeze({kind:"audio",render:D,defaultAttributes:{play:!1,seek:0,mute:!1,volume:1,currentTime:0},hitTest:function(e){var t=e.component.context.getMemberState();return!(t&&"eraser"===t.currentApplianceName)}})}])},"object"==r(t)&&"object"==r(e)?e.exports=i(n(17328),n(71895)):n.amdD([,],i)},25275:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i;e=n.nmd(e),window,i=function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjlweCIgaGVpZ2h0PSIyNXB4IiB2aWV3Qm94PSIwIDAgMjkgMjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5hdWRpbyAoMik8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImF1ZGlvLSgyKSIgZmlsbD0iIzMzMzMzMyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI1LjQzMDUxODIsMTEuNTAwNTQ0OCBMMjUuMjgwOTU4OSwxMS41MDA1NDQ4IEwyNS4yODA5NTg5LDEwLjMxNDkyMTcgQzI1LjI4MDk1ODksNC42Mjc1MjMxOSAyMC40NDg4MzQyLDAgMTQuNTA5MDY0MiwwIEM4LjU2OTI5NDI0LDAgMy43MzcxNjk0Nyw0LjYyNzUyMzE5IDMuNzM3MTY5NDcsMTAuMzE0OTIxNyBMMy43MzcxNjk0NywxMS41MDA1NDQ4IEwzLjU2NzY2ODk0LDExLjUwMDU0NDggQzEuNjAwNzM3NjQsMTEuNTAwNTQ0OCAwLDEzLjAzMjg3MyAwLDE0LjkxNzI5NTMgTDAsMTcuODQ5OTE2MiBDMCwxOS43MzQzMzg1IDEuNjAwNzM3NjQsMjEuMjY2NjY2NyAzLjU2NzY2ODk0LDIxLjI2NjY2NjcgTDUuMzM2MDk0MjcsMjEuMjY2NjY2NyBDNi4xNzkwNjQ4MiwyMS4yNjY2NjY3IDYuODYyNTA1NDcsMjAuNjExODc5MyA2Ljg2MjUwNTQ3LDE5LjgwNTI5NjMgTDYuODYyNTA1NDcsMTIuOTYxOTE1MiBDNi44NjI1MDU0NywxMi4xNTQ0MzQgNi4xNzkwNjQ4MiwxMS41MDA1NDQ4IDUuMzM2MDk0MjcsMTEuNTAwNTQ0OCBMNS4yNjM1ODA2NywxMS41MDA1NDQ4IEw1LjI2MzU4MDY3LDEwLjMxNDkyMTcgQzUuMjYzNTgwNjcsNS40MzMyMDgwNCA5LjQxMTM1ODM4LDEuNDYyMjY4NTkgMTQuNTA5MDY0MiwxLjQ2MjI2ODU5IEMxOS42MDY3NywxLjQ2MjI2ODU5IDIzLjc1NDU0NzcsNS40MzQxMDYyNCAyMy43NTQ1NDc3LDEwLjMxNDkyMTcgTDIzLjc1NDU0NzcsMTEuNTAwNTQ0OCBMMjMuNjYyOTk5MywxMS41MDA1NDQ4IEMyMi44MjAwMjg4LDExLjUwMDU0NDggMjIuMTM2NTg4MSwxMi4xNTUzMzIyIDIyLjEzNjU4ODEsMTIuOTYxOTE1MiBMMjIuMTM2NTg4MSwxOS44MDQzOTgxIEMyMi4xMzY1ODgxLDIwLjYxMTg3OTMgMjIuODIwMDI4OCwyMS4yNjU3Njg1IDIzLjY2Mjk5OTMsMjEuMjY1NzY4NSBMMjUuNDMxNDI0NiwyMS4yNjU3Njg1IEMyNy4zOTkyNjI0LDIxLjI2NTc2ODUgMjksMTkuNzMzNDQwMyAyOSwxNy44NDkwMTggTDI5LDE0LjkxNjM5NzEgQzI4Ljk5OTA5MzYsMTMuMDMyODczIDI3LjM5ODM1NTksMTEuNTAwNTQ0OCAyNS40MzA1MTgyLDExLjUwMDU0NDggWiBNNS4zMzcwMDA2OSwxMi45NjE5MTUyIEw1LjMzNzAwMDY5LDE5LjgwNDM5ODEgTDMuNTY3NjY4OTQsMTkuODA0Mzk4MSBDMi40NDQ2MTQ2MiwxOS44MDQzOTgxIDEuNTI2NDExMiwxOC45MjQxNjI3IDEuNTI2NDExMiwxNy44NDkwMTggTDEuNTI2NDExMiwxNC45MTYzOTcxIEMxLjUyNjQxMTIsMTMuODQxMjUyNCAyLjQ0NDYxNDYyLDEyLjk2MTAxNyAzLjU2NzY2ODk0LDEyLjk2MTAxNyBMNS4zMzcwMDA2OSwxMi45NjEwMTcgTDUuMzM3MDAwNjksMTIuOTYxOTE1MiBaIE0yNy40NzI2ODI0LDE3Ljg0OTAxOCBDMjcuNDcyNjgyNCwxOC45MjQxNjI3IDI2LjU1NDQ3OSwxOS44MDQzOTgxIDI1LjQzMDUxODIsMTkuODA0Mzk4MSBMMjMuNjYyMDkyOSwxOS44MDQzOTgxIEwyMy42NjIwOTI5LDEyLjk2MTkxNTIgTDI1LjQzMDUxODIsMTIuOTYxOTE1MiBDMjYuNTUzNTcyNSwxMi45NjE5MTUyIDI3LjQ3MjY4MjQsMTMuODQxMjUyNCAyNy40NzI2ODI0LDE0LjkxNzI5NTMgTDI3LjQ3MjY4MjQsMTcuODQ5MDE4IEwyNy40NzI2ODI0LDE3Ljg0OTAxOCBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNi41OTYwNTI2LDI0LjE2NjY2NjcgQzE2LjIyNDkwODgsMjQuMTY3MjA3MSAxNS45MTM3MTA1LDIzLjg5MDA3ODIgMTUuODc2MTQzOSwyMy41MjU1NzE1IEwxNC45NTk3MzYyLDE0LjYxMjg4MTYgTDE0LjAyNjU4NjUsMTkuODQ1MTUwOCBDMTMuOTcyMTM4OSwyMC4xNTk2OTMzIDEzLjcxMjY5MjMsMjAuNDAwMjY4NyAxMy4zOTEyODU2LDIwLjQzNDI0MjIgQzEzLjA2OTg3ODksMjAuNDY4MjE1NyAxMi43NjQ3MTc4LDIwLjI4NzMyMDggMTIuNjQ0MDQ0NiwxOS45OTEyODkgTDExLjIwNTk4OTYsMTYuNTIyMjQ2NyBMMTAuNzU2NTk3NCwxOC40Nzg1ODQ3IEMxMC42ODE2MzQ2LDE4LjgwMzY4NzQgMTAuMzg4NTMzMywxOS4wMzQxNTI0IDEwLjA1MDc4NzMsMTkuMDMzNTYxOSBMOC40NTY3NjY2NywxOS4wMzM1NjE5IEM4LjI2NTEzMzg3LDE5LjAzMzc5MjcgOC4wODEyNTY5OCwxOC45NTg4NjM3IDcuOTQ1NTg2ODgsMTguODI1MjU4MyBDNy44MDk5MTY3OCwxOC42OTE2NTI5IDcuNzMzNTY2ODksMTguNTEwMzE1NSA3LjczMzMzMzMzLDE4LjMyMTEzODIgQzcuNzMzNTY2ODksMTguMTMxOTYxIDcuODA5OTE2NzgsMTcuOTUwNjIzNSA3Ljk0NTU4Njg4LDE3LjgxNzAxODEgQzguMDgxMjU2OTgsMTcuNjgzNDEyNyA4LjI2NTEzMzg3LDE3LjYwODQ4MzcgOC40NTY3NjY2NywxNy42MDg3MTQ1IEw5LjQ3Mjc0NTUyLDE3LjYwODcxNDUgTDEwLjMwMTkxODIsMTMuOTk5NjIzMSBDMTAuMzczNjM5LDEzLjY5NzE5MzQgMTAuNjM0NzI2MywxMy40NzQ5MjA5IDEwLjk0ODI5NiwxMy40NDkzMzk4IEMxMS4yNjE4NjU3LDEzLjQyMzc1ODYgMTEuNTU2MzcyNCwxMy42MDA3MDU1IDExLjY3NzQxMDgsMTMuODg3NDA5OSBMMTMuMDM1MjgwMiwxNy4xNjMzNDEgTDE0LjQzOTg1MTEsOS4yODkyNzYwNCBDMTQuNTA0NjU5OSw4LjkzOTM5MjYzIDE0LjgxOTAyODksOC42ODg5NzQ2NiAxNS4xNzkxNDU0LDguNzAwMzczOTMgQzE1LjUzOTgzMTMsOC43MTI4NjAzMiAxNS44MzU4Njk5LDguOTg2MTY3MTUgMTUuODcyNjE5Miw5LjM0MDU5ODM5IEwxNi45NzE0MjcyLDIwLjAxOTk5NDcgTDE3LjU3ODU0NzMsMTguMTg0NTY4NiBDMTcuNjc1ODg3OCwxNy44OTA4ODIgMTcuOTUzNzE2MiwxNy42OTI0Njc2IDE4LjI2NjczNDIsMTcuNjkzMDkxOSBMMTkuNTQxNzc0NCwxNy42OTMwOTE5IEMxOS44MDgxMTEzLDE3LjY4MDA5NTEgMjAuMDYwMDQ5LDE3LjgxMjk2ODMgMjAuMTk3MTYzOCwxOC4wMzg3NDc0IEMyMC4zMzQyNzg3LDE4LjI2NDUyNjYgMjAuMzM0Mjc4NywxOC41NDY1MDQ3IDIwLjE5NzE2MzgsMTguNzcyMjgzOCBDMjAuMDYwMDQ5LDE4Ljk5ODA2MyAxOS44MDgxMTEzLDE5LjEzMDkzNjEgMTkuNTQxNzc0NCwxOS4xMTc5MzkzIEwxOC43OTE5MDYyLDE5LjExNzkzOTMgTDE3LjI4NTEyMDYsMjMuNjczNDQ5NSBDMTcuMTg3MTIzLDIzLjk2NzI4NDUgMTYuOTA5NDE4MywyNC4xNjYwNTgxIDE2LjU5NjA1MjYsMjQuMTY2NjY2NyIgaWQ9Iui3r+W+hCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg=="},function(e,t,n){var r=n(5),i=n(6);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var d=o(l),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:l,updater:g(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,f=0;function g(e,t){var n,r,i;if(t.singleton){var a=f++;n=h||(h=u(t)),r=d.bind(null,n,a,!1),i=d.bind(null,n,a,!0)}else n=u(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=o(n[r]);a[i].references--}for(var u=s(e,t),c=0;c<n.length;c++){var l=o(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=u}}}},function(e,t,n){(t=n(7)(!1)).push([e.i,".white-audio-plugin-container {\n  display: flex;\n  flex-flow: column nowrap;\n  transform-origin: top left;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n}\n.white-audio-plugin-nav {\n  height: 32px;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  background-image: linear-gradient(180deg, #e0e1e0 0%, #cdcdcc 100%);\n}\n.white-audio-plugin-nav > img {\n  width: 20px;\n  margin-left: 8px;\n}\n.white-audio-plugin-nav-title {\n  margin-left: 6px;\n  font-size: 12px;\n  font-weight: bold;\n  flex-grow: 1;\n}\n.white-audio-plugin-nav-delete {\n  width: 22px;\n  height: 22px;\n  border: 0;\n  background-color: #ff756e;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 8px;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n.white-audio-plugin-nav-delete > img {\n  width: 14px;\n}\n.white-audio-plugin-nav-delete:hover {\n  opacity: 1;\n}\n.white-audio-plugin-body {\n  flex-grow: 1;\n  background-color: #f2f4f5;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  justify-content: center;\n}\n.white-audio-plugin-body > audio {\n  flex-grow: 1;\n  outline: none;\n}\n",""]),e.exports=t},function(e,t,n){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var s=(n=o,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(u).concat([s]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){n.r(t);var r=n(0),i=n.n(r),a=n(1),o=n(2),s=n.n(o),u=n(3),c=n.n(u),l=(n(4),function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))});function d(e){return l(this,void 0,void 0,(function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,e.play()];case 1:return t.sent(),[2,!0];case 2:return t.sent(),e.muted=!0,[4,e.play()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}var p,h=function(e){return new Promise((function(t){return window.setTimeout(t,e)}))},f=function(){function e(){this.map=new Map}return e.prototype.changed=function(e,t){return!(this.map.has(e)&&function e(t,n){return t===n||!!Array.isArray(t)&&t.every((function(t,r){return e(t,n[r])}))}(this.map.get(e),t)||(this.map.set(e,t),0))},e.prototype.clear=function(){this.map.clear()},e}(),g=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(a.CNode,{context:this.props.cnode},i.a.createElement(a.RoomConsumer,{children:function(t){return t&&i.a.createElement(w,m({},e.props,{room:t}))}}),i.a.createElement(a.PlayerConsumer,{children:function(t){return t&&i.a.createElement(w,m({},e.props,{player:t}))}}))},t}(r.Component),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disposers=[],t.changedMap=new f,t.player=Object(r.createRef)(),t.timestamp=function(){return{currentTime:t.player.current.currentTime,hostTime:Date.now()}},t.removeSelf=function(){return y(t,void 0,void 0,(function(){var e;return v(this,(function(t){switch(t.label){case 0:return(e=this.props.plugin).putAttributes(m({paused:!0},this.timestamp())),[4,h(300)];case 1:return t.sent(),e.remove(),[2]}}))}))},t}return g(t,e),t.prototype.isHost=function(){return this.props.room&&this.props.plugin.context&&"host"===this.props.plugin.context.identity},t.prototype.componentDidMount=function(){this.props.room&&(this.isHost()?this.setupHost():this.setupNonHost()),this.props.player&&this.setupNonHost()},t.prototype.setupHost=function(){var e=this,t=this.props.plugin,n=this.player.current;n.currentTime=t.attributes.currentTime,n.addEventListener("play",(function(){t.putAttributes(m({paused:!1},e.timestamp()))})),n.addEventListener("pause",(function(){t.putAttributes(m({paused:!0},e.timestamp()))})),n.addEventListener("seeked",(function(){t.putAttributes(e.timestamp())})),n.addEventListener("volumechange",(function(){t.putAttributes({volume:n.volume,muted:n.muted})}));var r,i=NaN;n.addEventListener("timeupdate",(function(){i||(i=window.setTimeout((function(){i=NaN,t.putAttributes(e.timestamp())}),2e3))})),this.disposers.push((function(){return window.clearTimeout(i)})),n.addEventListener("ended",(function(){return y(e,void 0,void 0,(function(){return v(this,(function(e){switch(e.label){case 0:return t.putAttributes(m({paused:!0},this.timestamp())),[4,h(500)];case 1:return e.sent(),n.load(),[2]}}))}))})),/iPad|iPhone|iPod/.test(navigator.platform)&&(r=function(){n.currentTime=t.attributes.currentTime},window.requestAnimationFrame((function(){window.requestAnimationFrame(r)})))},t.prototype.setupNonHost=function(){var e=this,t=this.props.plugin,n=this.player.current,r=Object(a.autorun)((function(){return y(e,void 0,void 0,(function(){var e,r,i,a,o,s,u,c,l,p,h;return v(this,(function(f){switch(f.label){case 0:return e=t.isPlaying,r=t.playerTimestamp,i=t.playbackSpeed,a=t.attributes,o=a.paused,s=a.volume,u=a.muted,c=a.currentTime,l=a.hostTime,this.changedMap.changed("paused",[o,e])?!o&&e?[3,1]:(n.pause(),[3,3]):[3,3];case 1:return[4,d(n)];case 2:f.sent(),f.label=3;case 3:return this.changedMap.changed("volume",[s,u])&&(n.volume=t.attributes.volume,n.muted=t.attributes.muted),this.changedMap.changed("time",[c,l])&&l>0&&(p=Date.now(),this.props.player&&(p=this.props.player.beginTimestamp+r),h=c+(p-l)/1e3,Math.abs(n.currentTime-h)>2&&(n.currentTime=h)),this.changedMap.changed("rate",i)&&(n.playbackRate=i),[2]}}))}))}));this.disposers.push(r),this.disposers.push((function(){return e.changedMap.clear()}))},t.prototype.componentWillUnmount=function(){var e;null===(e=this.player.current)||void 0===e||e.pause(),this.disposers.forEach((function(e){return e()}))},Object.defineProperty(t.prototype,"containerStyle",{get:function(){var e=this.props,t=e.size,n=e.scale||1;return{width:t.width/n,height:t.height/n,transform:"scale("+n+")"}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointerEventsStyle",{get:function(){return{pointerEvents:this.isHost()?"auto":"none"}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.room,n=e.player,r=e.plugin;return t||n?i.a.createElement("div",{className:"white-audio-plugin-container",style:this.containerStyle},!r.attributes.isNavigationDisable&&i.a.createElement("div",{className:"white-audio-plugin-nav"},i.a.createElement("img",{src:s.a,alt:"audio_plugin"}),i.a.createElement("span",{className:"white-audio-plugin-nav-title"},"Audio Player"),i.a.createElement("span",{className:"white-audio-plugin-nav-delete",style:this.pointerEventsStyle,onClick:this.removeSelf},i.a.createElement("img",{src:c.a,alt:"delete_icon"}))),i.a.createElement("div",{className:"white-audio-plugin-body"},i.a.createElement("audio",{src:r.attributes.src,style:this.pointerEventsStyle,controls:!!t,controlsList:"nodownload nofullscreen",preload:"auto",ref:this.player}))):null},t}(r.Component);n.d(t,"audioPlugin2",(function(){return M}));var M=Object.freeze({kind:"audio2",render:b,defaultAttributes:{src:"",hostTime:0,currentTime:0,paused:!0,muted:!1,volume:1},hitTest:function(e){var t=e.component.context.getMemberState();return!("eraser"===(null==t?void 0:t.currentApplianceName))}})}])},"object"==r(t)&&"object"==r(e)?e.exports=i(n(17328),n(71895)):n.amdD([,],i)},44112:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}
/*! For license information please see index.js.LICENSE.txt */var i;e=n.nmd(e),window,i=function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(t,n){t.exports=e},function(e,t,n){(function(e,i){n.d(t,"a",(function(){return nt}));var a=[];Object.freeze(a);var o={};Object.freeze(o);var s={};function u(){return"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:s}function c(){return++Ce.mobxGuid}function l(e){throw d(!1,e),"X"}function d(e,t){if(!e)throw new Error("[mobx] "+(t||"An invariant failed, however the error is obfuscated because this is an production build."))}function p(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var h=function(){};function f(e){return null!==e&&"object"==r(e)}function g(e){if(null===e||"object"!=r(e))return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function m(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function y(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function v(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return f(e)&&!0===e[n]}}function b(e){return void 0!==u().Map&&e instanceof u().Map}function w(e){return e instanceof Set}function M(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t}function x(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function I(e){return null===e?null:"object"==r(e)?""+e:e}function N(e,t){for(var n=e.next();!n.done;)t(n.value),n=e.next()}function T(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function D(e,t){y(e,T(),t)}function A(e){return e[T()]=S,e}function k(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function S(){return this}var E=function(){function e(e){void 0===e&&(e="Atom@"+c()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ae.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return Re(this)},e.prototype.reportChanged=function(){_e(),function(e){if(e.lowestObserverState!==ae.STALE){e.lowestObserverState=ae.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===ae.UP_TO_DATE&&(r.isTracing!==oe.NONE&&Ue(r,e),r.onBecomeStale()),r.dependenciesState=ae.STALE}}}(this),Pe()},e.prototype.toString=function(){return this.name},e}(),j=v("Atom",E);function C(e,t,n){void 0===t&&(t=h),void 0===n&&(n=h);var r=new E(e);return it("onBecomeObserved",r,t,void 0),rt(r,n),r}function z(e,t){return e===t}var O={identity:z,structural:function(e,t){return $t(e,t)},default:function(e,t){return function(e,t){return"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(e,t)||z(e,t)},shallow:function(e,t){return $t(e,t,1)}},L=function(e,t){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function _(e,t){function n(){this.constructor=e}L(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function R(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function U(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(R(arguments[t]));return e}var B={},V={};function Y(e,t){var n=t?B:V;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return Q(this),this[e]},set:function(t){Q(this),this[e]=t}})}function Q(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var n in m(e,"__mobxDidRunLazyInitializers",!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function Z(e,t){return function(){var n,r=function(r,i,a,o){if(!0===o)return t(r,i,a,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var s=r.__mobxDecorators;m(r,"__mobxDecorators",P({},s))}return r.__mobxDecorators[i]={prop:i,propertyCreator:t,descriptor:a,decoratorTarget:r,decoratorArguments:n},Y(i,e)};return W(arguments)?(n=a,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function W(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function G(e,t,n){return ut(e)?e:Array.isArray(e)?re.array(e,{name:n}):g(e)?re.object(e,void 0,{name:n}):b(e)?re.map(e,{name:n}):w(e)?re.set(e,{name:n}):e}function F(e){return e}function H(e){d(e);var t=Z(!0,(function(t,n,r,i,a){!function(e,t,n,r){var i=Bt(e);if(dt(i)){var a=ht(i,{object:e,name:t,type:"add",newValue:n});if(!a)return;n=a.newValue}n=(i.values[t]=new Ae(n,r,i.name+"."+t,!1)).value,Object.defineProperty(e,t,function(e){return Vt[e]||(Vt[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}(t)),i.keys&&i.keys.push(t),function(e,t,n,r){var i=ft(e),a=Ze(),o=i||a?{type:"add",object:t,name:n,newValue:r}:null;a&&Ge(P(P({},o),{name:e.name,key:n})),i&&mt(e,o),a&&He()}(i,e,t,n)}(t,n,r?r.initializer?r.initializer.call(t):r.value:void 0,e)})),n=(void 0!==i&&i.env,t);return n.enhancer=e,n}var $={deep:!0,name:void 0,defaultDecorator:void 0};function X(e){return null==e?$:"string"==typeof e?{name:e,deep:!0}:e}function J(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?F:G}Object.freeze($),Object.freeze({deep:!1,name:void 0,defaultDecorator:void 0});var K=H(G),q=H((function(e,t,n){return null==e||Wt(e)||jt(e)||Lt(e)||Rt(e)?e:Array.isArray(e)?re.array(e,{name:n,deep:!1}):g(e)?re.object(e,void 0,{name:n,deep:!1}):b(e)?re.map(e,{name:n,deep:!1}):w(e)?re.set(e,{name:n,deep:!1}):l(!1)})),ee=H(F),te=H((function(e,t,n){return $t(e,t)?t:e})),ne={box:function(e,t){arguments.length>2&&ie("box");var n=X(t);return new Ae(e,J(n),n.name,!0,n.equals)},shallowBox:function(e,t){return arguments.length>2&&ie("shallowBox"),re.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&ie("array");var n=X(t);return new Tt(e,J(n),n.name)},shallowArray:function(e,t){return arguments.length>2&&ie("shallowArray"),re.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&ie("map");var n=X(t);return new zt(e,J(n),n.name)},shallowMap:function(e,t){return arguments.length>2&&ie("shallowMap"),re.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&ie("set");var n=X(t);return new Pt(e,J(n),n.name)},object:function(e,t,n){"string"==typeof arguments[1]&&ie("object");var r=X(n);return at({},e,t,r)},shallowObject:function(e,t){return"string"==typeof arguments[1]&&ie("shallowObject"),re.object(e,{},{name:t,deep:!1})},ref:ee,shallow:q,deep:K,struct:te},re=function e(t,n,r){if("string"==typeof arguments[1])return K.apply(null,arguments);if(ut(t))return t;var i=g(t)?e.object(t,n,r):Array.isArray(t)?e.array(t,n):b(t)?e.map(t,n):w(t)?e.set(t,n):t;if(i!==t)return i;l(!1)};function ie(e){l("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(ne).forEach((function(e){return re[e]=ne[e]}));var ae,oe,se=Z(!1,(function(e,t,n,r,i){var a=n.get,o=n.set,s=i[0]||{};!function(e,t,n){var r=Bt(e);n.name=r.name+"."+t,n.context=e,r.values[t]=new ke(n),Object.defineProperty(e,t,function(e){return Yt[e]||(Yt[e]={configurable:Ce.computedConfigurable,enumerable:!1,get:function(){return Qt(this).read(this,e)},set:function(t){Qt(this).write(this,e,t)}})}(t))}(e,t,P({get:a,set:o},s))}));se({equals:O.structural}),function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(ae||(ae={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(oe||(oe={}));var ue=function(e){this.cause=e};function ce(e){return e instanceof ue}function le(e){switch(e.dependenciesState){case ae.UP_TO_DATE:return!1;case ae.NOT_TRACKING:case ae.STALE:return!0;case ae.POSSIBLY_STALE:for(var t=ye(!0),n=ge(),r=e.observing,i=r.length,a=0;a<i;a++){var o=r[a];if(Se(o)){if(Ce.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return me(n),ve(t),!0}if(e.dependenciesState===ae.STALE)return me(n),ve(t),!0}}return be(e),me(n),ve(t),!1}}function de(e){var t=e.observers.length>0;Ce.computationDepth>0&&t&&l(!1),Ce.allowStateChanges||!t&&"strict"!==Ce.enforceActions||l(!1)}function pe(e,t,n){var r=ye(!0);be(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Ce.runId;var i,a=Ce.trackingDerivation;if(Ce.trackingDerivation=e,!0===Ce.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new ue(e)}return Ce.trackingDerivation=a,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=ae.UP_TO_DATE,i=0,a=e.unboundDepsCount,o=0;o<a;o++)0===(s=n[o]).diffValue&&(s.diffValue=1,i!==o&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState);for(n.length=i,e.newObserving=null,a=t.length;a--;)0===(s=t[a]).diffValue&&Oe(s,e),s.diffValue=0;for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,ze(s,e))}r!==ae.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),e.observing.length,ve(r),i}function he(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)Oe(t[n],e);e.dependenciesState=ae.NOT_TRACKING}function fe(e){var t=ge(),n=e();return me(t),n}function ge(){var e=Ce.trackingDerivation;return Ce.trackingDerivation=null,e}function me(e){Ce.trackingDerivation=e}function ye(e){var t=Ce.allowStateReads;return Ce.allowStateReads=e,t}function ve(e){Ce.allowStateReads=e}function be(e){if(e.dependenciesState!==ae.UP_TO_DATE){e.dependenciesState=ae.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=ae.UP_TO_DATE}}var we=0,Me=1,xe=Object.getOwnPropertyDescriptor((function(){}),"name");function Ie(e,t){var n=function(){return Ne(e,t,this,arguments)};return n.isMobxAction=!0,n}function Ne(e,t,n,r){var i=function(e,t,n){var r=Ze()&&!!e,i=0;if(r){i=Date.now();var a=n&&n.length||0,o=new Array(a);if(a>0)for(var s=0;s<a;s++)o[s]=n[s];Ge({type:"action",name:e,object:t,arguments:o})}var u=ge();_e();var c={prevDerivation:u,prevAllowStateChanges:Te(!0),prevAllowStateReads:ye(!0),notifySpy:r,startTime:i,actionId:Me++,parentActionId:we};return we=c.actionId,c}(e,n,r);try{return t.apply(n,r)}catch(e){throw i.error=e,e}finally{!function(e){we!==e.actionId&&l("invalid action stack. did you forget to finish an action?"),we=e.parentActionId,void 0!==e.error&&(Ce.suppressReactionErrors=!0),De(e.prevAllowStateChanges),ve(e.prevAllowStateReads),Pe(),me(e.prevDerivation),e.notifySpy&&He({time:Date.now()-e.startTime}),Ce.suppressReactionErrors=!1}(i)}}function Te(e){var t=Ce.allowStateChanges;return Ce.allowStateChanges=e,t}function De(e){Ce.allowStateChanges=e}xe&&xe.configurable;var Ae=function(e){function t(t,n,r,i,a){void 0===r&&(r="ObservableValue@"+c()),void 0===i&&(i=!0),void 0===a&&(a=O.default);var o=e.call(this,r)||this;return o.enhancer=n,o.name=r,o.equals=a,o.hasUnreportedChange=!1,o.value=n(t,void 0,r),i&&Ze()&&We({type:"create",name:o.name,newValue:""+o.value}),o}return _(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==Ce.UNCHANGED){var n=Ze();n&&Ge({type:"update",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),n&&He()}},t.prototype.prepareNewValue=function(e){if(de(this),dt(this)){var t=ht(this,{object:this,type:"update",newValue:e});if(!t)return Ce.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?Ce.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),ft(this)&&mt(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return pt(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),gt(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return I(this.get())},t}(E);Ae.prototype[x()]=Ae.prototype.valueOf,v("ObservableValue",Ae);var ke=function(){function e(e){this.dependenciesState=ae.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ae.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+c(),this.value=new ue(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=oe.NONE,d(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+c(),e.set&&(this.setter=Ie(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?O.structural:O.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState===ae.UP_TO_DATE){e.lowestObserverState=ae.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===ae.UP_TO_DATE&&(r.dependenciesState=ae.POSSIBLY_STALE,r.isTracing!==oe.NONE&&Ue(r,e),r.onBecomeStale())}}}(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&l("Cycle detected in computation "+this.name+": "+this.derivation),0!==Ce.inBatch||0!==this.observers.length||this.keepAlive?(Re(this),le(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState!==ae.STALE){e.lowestObserverState=ae.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===ae.POSSIBLY_STALE?r.dependenciesState=ae.STALE:r.dependenciesState===ae.UP_TO_DATE&&(e.lowestObserverState=ae.UP_TO_DATE)}}}(this)):le(this)&&(this.warnAboutUntrackedRead(),_e(),this.value=this.computeValue(!1),Pe());var e=this.value;if(ce(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(ce(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){d(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else d(!1,!1)},e.prototype.trackAndCompute=function(){Ze()&&We({object:this.scope,type:"compute",name:this.name});var e=this.value,t=this.dependenciesState===ae.NOT_TRACKING,n=this.computeValue(!0),r=t||ce(e)||ce(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Ce.computationDepth++,e)t=pe(this,this.derivation,this.scope);else if(!0===Ce.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new ue(e)}return Ce.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(he(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,i=void 0;return function(e,t){void 0===t&&(t=o);var n,r=t&&t.name||e.name||"Autorun@"+c();if(t.scheduler||t.delay){var i=tt(t),a=!1;n=new Be(r,(function(){a||(a=!0,i((function(){a=!1,n.isDisposed||n.track(s)})))}),t.onError,t.requiresObservable)}else n=new Be(r,(function(){this.track(s)}),t.onError,t.requiresObservable);function s(){e(n)}return n.schedule(),n.getDisposer()}((function(){var a=n.get();if(!r||t){var o=ge();e({type:"update",object:n,newValue:a,oldValue:i}),me(o)}r=!1,i=a}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return I(this.get())},e}();ke.prototype[x()]=ke.prototype.valueOf;var Se=v("ComputedValue",ke),Ee=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},je=!0,Ce=function(){var e=u();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(je=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new Ee).version&&(je=!1),je?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Ee):(setTimeout((function(){l("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Ee)}();function ze(e,t){var n=e.observers.length;n&&(e.observersIndexes[t.__mapid]=n),e.observers[n]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function Oe(e,t){if(1===e.observers.length)e.observers.length=0,Le(e);else{var n=e.observers,r=e.observersIndexes,i=n.pop();if(i!==t){var a=r[t.__mapid]||0;a?r[i.__mapid]=a:delete r[i.__mapid],n[a]=i}delete r[t.__mapid]}}function Le(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Ce.pendingUnobservations.push(e))}function _e(){Ce.inBatch++}function Pe(){if(0==--Ce.inBatch){Ve();for(var e=Ce.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof ke&&n.suspend())}Ce.pendingUnobservations=[]}}function Re(e){var t=Ce.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&Ce.inBatch>0&&Le(e),!1)}function Ue(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===oe.BREAK){var n=[];!function e(t,n,r){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(r).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return e(t,n,r+1)})))}((r=e,ot(Gt(r,void 0))),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof ke?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r}var Be=function(){function e(e,t,n,r){void 0===e&&(e="Reaction@"+c()),void 0===r&&(r=!1),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=ae.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+c(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=oe.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Ce.pendingReactions.push(this),Ve())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(_e(),this._isScheduled=!1,le(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Ze()&&We({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}Pe()}},e.prototype.track=function(e){_e();var t,n=Ze();n&&(t=Date.now(),Ge({name:this.name,type:"reaction"})),this._isRunning=!0;var r=pe(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&he(this),ce(r)&&this.reportExceptionInDerivation(r.cause),n&&He({time:Date.now()-t}),Pe()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Ce.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Ce.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,e),Ze()&&We({type:"error",name:this.name,message:n,error:""+e}),Ce.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(_e(),he(this),Pe()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"==typeof e[e.length-1]&&(n=e.pop());var r=ct(e);if(!r)return l(!1);r.isTracing===oe.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?oe.BREAK:oe.LOG}(this,e)},e}();function Ve(){Ce.inBatch>0||Ce.isRunningReactions||function(e){e()}(Ye)}function Ye(){Ce.isRunningReactions=!0;for(var e=Ce.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Ce.isRunningReactions=!1}var Qe=v("Reaction",Be);function Ze(){return!!Ce.spyListeners.length}function We(e){if(Ce.spyListeners.length)for(var t=Ce.spyListeners,n=0,r=t.length;n<r;n++)t[n](e)}function Ge(e){We(P(P({},e),{spyReportStart:!0}))}var Fe={spyReportEnd:!0};function He(e){We(e?P(P({},e),{spyReportEnd:!0}):Fe)}function $e(){l(!1)}function Xe(e){return function(t,n,r){if(r){if(r.value)return{value:Ie(e,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Ie(e,i.call(this))}}}return Je(e).apply(this,arguments)}}function Je(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){m(this,n,Ke(e,t))}})}}var Ke=function(e,t,n,r){return 1===arguments.length&&"function"==typeof e?Ie(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?Ie(e,t):1===arguments.length&&"string"==typeof e?Xe(e):!0!==r?Xe(t).apply(null,arguments):void(e[t]=Ie(e.name||t,n.value))};function qe(e,t,n){m(e,t,Ie(t,n.bind(e)))}Ke.bound=function(e,t,n,r){return!0===r?(qe(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return qe(this,t,n.value||n.initializer.call(this)),this[t]},set:$e}:{enumerable:!1,configurable:!0,set:function(e){qe(this,t,e)},get:function(){}}};var et=function(e){return e()};function tt(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:et}function nt(e,t,n){void 0===n&&(n=o),"boolean"==typeof n&&(n={fireImmediately:n});var r,i,a,s=n.name||"Reaction@"+c(),u=Ke(s,n.onError?(r=n.onError,i=t,function(){try{return i.apply(this,arguments)}catch(e){r.call(this,e)}}):t),l=!n.scheduler&&!n.delay,d=tt(n),p=!0,h=!1,f=n.compareStructural?O.structural:n.equals||O.default,g=new Be(s,(function(){p||l?m():h||(h=!0,d(m))}),n.onError,n.requiresObservable);function m(){if(h=!1,!g.isDisposed){var t=!1;g.track((function(){var n=e(g);t=p||!f(a,n),a=n})),p&&n.fireImmediately&&u(a,g),p||!0!==t||u(a,g),p&&(p=!1)}}return g.schedule(),g.getDisposer()}function rt(e,t,n){return it("onBecomeUnobserved",e,t,n)}function it(e,t,n,r){var i="function"==typeof r?Gt(t,n):Gt(t),a="function"==typeof r?r:n,o=i[e];return"function"!=typeof o?l(!1):(i[e]=function(){o.call(this),a.call(this)},function(){i[e]=o})}function at(e,t,n,r){var i=(r=X(r)).defaultDecorator||(!1===r.deep?ee:K);Q(e),Bt(e,r.name,i.enhancer),_e();try{for(var a=Object.getOwnPropertyNames(t),o=0,s=a.length;o<s;o++){var u=a[o],c=Object.getOwnPropertyDescriptor(t,u),l=(n&&u in n?n[u]:c.get?se:i)(e,u,c,!0);l&&Object.defineProperty(e,u,l)}}finally{Pe()}return e}function ot(e){var t,n,r={name:e.name};return e.observing&&e.observing.length>0&&(r.dependencies=(t=e.observing,n=[],t.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n).map(ot)),r}function st(e,t){if(null==e)return!1;if(void 0!==t){if(Wt(e)){var n=e.$mobx;return n.values&&!!n.values[t]}return!1}return Wt(e)||!!e.$mobx||j(e)||Qe(e)||Se(e)}function ut(e){return 1!==arguments.length&&l(!1),st(e)}function ct(e){switch(e.length){case 0:return Ce.trackingDerivation;case 1:return Gt(e[0]);case 2:return Gt(e[0],e[1])}}function lt(e,t){void 0===t&&(t=void 0),_e();try{return e.apply(t)}finally{Pe()}}function dt(e){return void 0!==e.interceptors&&e.interceptors.length>0}function pt(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function ht(e,t){var n=ge();try{var r=e.interceptors;if(r)for(var i=0,a=r.length;i<a&&(d(!(t=r[i](t))||t.type,"Intercept handlers should return nothing or a change object"),t);i++);return t}finally{me(n)}}function ft(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function gt(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function mt(e,t){var n=ge(),r=e.changeListeners;if(r){for(var i=0,a=(r=r.slice()).length;i<a;i++)r[i](t);me(n)}}Object.create(Error.prototype);var yt,vt,bt,wt,Mt=(yt=!1,vt={},Object.defineProperty(vt,"0",{set:function(){yt=!0}}),Object.create(vt)[0]=1,!1===yt),xt=0,It=function(){};bt=It,wt=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(bt.prototype,wt):void 0!==bt.prototype.__proto__?bt.prototype.__proto__=wt:bt.prototype=wt,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(e){Object.defineProperty(It.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})}));var Nt=function(){function e(e,t,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new E(e||"ObservableArray@"+c()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return pt(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),gt(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>xt&&St(e+t+1)},e.prototype.spliceWithArray=function(e,t,n){var r=this;de(this.atom);var i=this.values.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=a),dt(this)){var o=ht(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!o)return a;t=o.removedCount,n=o.added}var s=(n=0===n.length?n:n.map((function(e){return r.enhancer(e,void 0)}))).length-t;this.updateArrayLength(i,s);var u=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,u),this.dehanceValues(u)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,U([e,t],n));var i=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),i},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&Ze(),i=ft(this),a=i||r?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;r&&Ge(P(P({},a),{name:this.atom.name})),this.atom.reportChanged(),i&&mt(this,a),r&&He()},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&Ze(),i=ft(this),a=i||r?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;r&&Ge(P(P({},a),{name:this.atom.name})),this.atom.reportChanged(),i&&mt(this,a),r&&He()},e}(),Tt=function(e){function t(t,n,r,i){void 0===r&&(r="ObservableArray@"+c()),void 0===i&&(i=!1);var a=e.call(this)||this,o=new Nt(r,n,a,i);if(y(a,"$mobx",o),t&&t.length){var s=Te(!0);a.spliceWithArray(0,0,t),De(s)}return Mt&&Object.defineProperty(o.array,"0",Dt),a}return _(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map((function(e){return jt(e)?e.peek():e})))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,n){void 0===n&&(n=0);var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},t.prototype.findIndex=function(e,t,n){void 0===n&&(n=0);for(var r=this.peek(),i=r.length,a=n;a<i;a++)if(e.call(t,r[a],a,this))return a;return-1},t.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,n)},t.prototype.spliceWithArray=function(e,t,n){return this.$mobx.spliceWithArray(e,t,n)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,e),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(0,0,e),n.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function n(e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(n.call(this,e),n.call(this,t),e!==t){var r,i=this.$mobx.values;r=e<t?U(i.slice(0,e),i.slice(e+1,t+1),[i[e]],i.slice(t+1)):U(i.slice(0,t),[i[e]],i.slice(t,e),i.slice(e+1)),this.replace(r)}},t.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},t.prototype.set=function(e,t){var n=this.$mobx,r=n.values;if(e<r.length){de(n.atom);var i=r[e];if(dt(n)){var a=ht(n,{type:"update",object:this,index:e,newValue:t});if(!a)return;t=a.newValue}(t=n.enhancer(t,i))!==i&&(r[e]=t,n.notifyArrayChildUpdate(e,t,i))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}},t}(It);D(Tt.prototype,(function(){this.$mobx.atom.reportObserved();var e=this,t=0;return A({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(Tt.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),m(Tt.prototype,k(),"Array"),["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(e){var t=Array.prototype[e];d("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),m(Tt.prototype,e,(function(){return t.apply(this.peek(),arguments)}))})),["every","filter","forEach","map","some"].forEach((function(e){d("function"==typeof Array.prototype[e],"Base function not defined on Array prototype: '"+e+"'"),m(Tt.prototype,e,(function(t,n){var r=this,i=this.$mobx;return i.atom.reportObserved(),i.dehanceValues(i.values)[e]((function(e,i){return t.call(n,e,i,r)}),n)}))})),["reduce","reduceRight"].forEach((function(e){m(Tt.prototype,e,(function(){var t=this,n=this.$mobx;n.atom.reportObserved();var r=arguments[0];return arguments[0]=function(e,i,a){return i=n.dehanceValue(i),r(e,i,a,t)},n.values[e].apply(n.values,arguments)}))})),function(e,t){for(var n=0;n<t.length;n++)m(e,t[n],e[t[n]])}(Tt.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var Dt=At(0);function At(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function kt(e){Object.defineProperty(Tt.prototype,""+e,At(e))}function St(e){for(var t=xt;t<e;t++)kt(t);xt=e}St(1e3);var Et=v("ObservableArrayAdministration",Nt);function jt(e){return f(e)&&Et(e.$mobx)}var Ct={},zt=function(){function e(e,t,n){if(void 0===t&&(t=G),void 0===n&&(n="ObservableMap@"+c()),this.enhancer=t,this.name=n,this.$mobx=Ct,this._keysAtom=C(this.name+".keys()"),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!Ce.trackingDerivation)return this._has(e);var n=this._hasMap.get(e);if(!n){var r=n=new Ae(this._has(e),F,this.name+"."+Ot(e)+"?",!1);this._hasMap.set(e,r),rt(r,(function(){return t._hasMap.delete(e)}))}return n.get()},e.prototype.set=function(e,t){var n=this._has(e);if(dt(this)){var r=ht(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(de(this._keysAtom),dt(this)&&!(i=ht(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=Ze(),r=ft(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return n&&Ge(P(P({},i),{name:this.name,key:e})),lt((function(){t._keysAtom.reportChanged(),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),r&&mt(this,i),n&&He(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);n&&n.setNewValue(t)},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==Ce.UNCHANGED){var r=Ze(),i=ft(this),a=i||r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;r&&Ge(P(P({},a),{name:this.name,key:e})),n.setNewValue(t),i&&mt(this,a),r&&He()}},e.prototype._addValue=function(e,t){var n=this;de(this._keysAtom),lt((function(){var r=new Ae(t,n.enhancer,n.name+"."+Ot(e),!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keysAtom.reportChanged()}));var r=Ze(),i=ft(this),a=i||r?{type:"add",object:this,name:e,newValue:t}:null;r&&Ge(P(P({},a),{name:this.name,key:e})),i&&mt(this,a),r&&He()},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,t=this.keys();return A({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},e.prototype.entries=function(){var e=this,t=this.keys();return A({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},e.prototype.forEach=function(e,t){var n=this;this._keysAtom.reportObserved(),this._data.forEach((function(r,i){return e.call(t,n.get(i),i,n)}))},e.prototype.merge=function(e){var t=this;return Lt(e)&&(e=e.toJS()),lt((function(){var n=Te(!0);try{g(e)?Object.keys(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=R(e,2),r=n[0],i=n[1];return t.set(r,i)})):b(e)?e.constructor!==Map?l("Cannot initialize from classes that inherit from Map: "+e.constructor.name):e.forEach((function(e,n){return t.set(n,e)})):null!=e&&l("Cannot initialize map from "+e)}finally{De(n)}})),this},e.prototype.clear=function(){var e=this;lt((function(){fe((function(){e._data.forEach((function(t,n){return e.delete(n)}))}))}))},e.prototype.replace=function(e){var t=this;return lt((function(){var n=function(e){if(b(e)||Lt(e))return e;if(Array.isArray(e))return new Map(e);if(g(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return l("Cannot convert to map from '"+e+"'")}(e),r=new Map,i=!1;if(N(t._data.keys(),(function(e){if(!n.has(e))if(t.delete(e))i=!0;else{var a=t._data.get(e);r.set(e,a)}})),N(n.entries(),(function(e){var n=R(e,2),a=n[0],o=n[1],s=t._data.has(a);if(t.set(a,o),t._data.has(a)){var u=t._data.get(a);r.set(a,u),s||(i=!0)}})),!i)if(t._data.size!==r.size)t._keysAtom.reportChanged();else for(var a=t._data.keys(),o=r.keys(),s=a.next(),u=o.next();!s.done;){if(s.value!==u.value){t._keysAtom.reportChanged();break}s=a.next(),u=o.next()}t._data=r})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this.forEach((function(n,i){return t["symbol"==r(i)?i:Ot(i)]=e.get(i)})),t},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+M(this.keys()).map((function(t){return Ot(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return gt(this,e)},e.prototype.intercept=function(e){return pt(this,e)},e}();function Ot(e){return e&&e.toString?e.toString():new String(e).toString()}D(zt.prototype,(function(){return this.entries()})),y(zt.prototype,k(),"Map");var Lt=v("ObservableMap",zt),_t={},Pt=function(){function e(e,t,n){if(void 0===t&&(t=G),void 0===n&&(n="ObservableSet@"+c()),this.name=n,this.$mobx=_t,this._data=new Set,this._atom=C(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,r){return t(e,r,n)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;lt((function(){fe((function(){e._data.forEach((function(t){e.delete(t)}))}))}))},e.prototype.forEach=function(e,t){var n=this;this._atom.reportObserved(),this._data.forEach((function(r){e.call(t,r,r,n)}))},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if(de(this._atom),dt(this)&&!(i=ht(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){lt((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var n=Ze(),r=ft(this),i=r||n?{type:"add",object:this,newValue:e}:null;r&&mt(this,i)}return this},e.prototype.delete=function(e){var t=this;if(dt(this)&&!(i=ht(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var n=Ze(),r=ft(this),i=r||n?{type:"delete",object:this,oldValue:e}:null;return lt((function(){t._atom.reportChanged(),t._data.delete(e)})),r&&mt(this,i),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=M(this.keys()),n=M(this.values());return A({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e,t=this,n=0;return void 0!==this._data.values?e=M(this._data.values()):(e=[],this._data.forEach((function(t){return e.push(t)}))),A({next:function(){return n<e.length?{value:t.dehanceValue(e[n++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return Rt(e)&&(e=e.toJS()),lt((function(){var n=Te(!0);try{Array.isArray(e)||w(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&l("Cannot initialize set from "+e)}finally{De(n)}})),this},e.prototype.observe=function(e,t){return gt(this,e)},e.prototype.intercept=function(e){return pt(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+M(this.keys()).join(", ")+" ]"},e}();D(Pt.prototype,(function(){return this.values()})),y(Pt.prototype,k(),"Set");var Rt=v("ObservableSet",Pt),Ut=function(){function e(e,t,n){this.target=e,this.name=t,this.defaultEnhancer=n,this.values={}}return e.prototype.read=function(e,t){if(this.target===e||(this.illegalAccess(e,t),this.values[t]))return this.values[t].get()},e.prototype.write=function(e,t,n){var r=this.target;r!==e&&this.illegalAccess(e,t);var i=this.values[t];if(i instanceof ke)i.set(n);else{if(dt(this)){if(!(s=ht(this,{type:"update",object:r,name:t,newValue:n})))return;n=s.newValue}if((n=i.prepareNewValue(n))!==Ce.UNCHANGED){var a=ft(this),o=Ze(),s=a||o?{type:"update",object:r,oldValue:i.value,name:t,newValue:n}:null;o&&Ge(P(P({},s),{name:this.name,key:t})),i.setNewValue(n),a&&mt(this,s),o&&He()}}},e.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(dt(this)&&!(a=ht(this,{object:t,name:e,type:"remove"})))return;try{_e();var n=ft(this),r=Ze(),i=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var a=n||r?{type:"remove",object:t,oldValue:i,name:e}:null;r&&Ge(P(P({},a),{name:this.name,key:e})),n&&mt(this,a),r&&He()}finally{Pe()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return gt(this,e)},e.prototype.intercept=function(e){return pt(this,e)},e.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new Tt(Object.keys(this.values).filter((function(t){return e.values[t]instanceof Ae})),F,"keys("+this.name+")",!0)),this.keys.slice()},e}();function Bt(e,t,n){void 0===t&&(t=""),void 0===n&&(n=G);var r=e.$mobx;return r||(g(e)||(t=(e.constructor.name||"ObservableObject")+"@"+c()),t||(t="ObservableObject@"+c()),y(e,"$mobx",r=new Ut(e,t,n)),r)}var Vt=Object.create(null),Yt=Object.create(null);function Qt(e){return e.$mobx||(Q(e),e.$mobx)}var Zt=v("ObservableObjectAdministration",Ut);function Wt(e){return!!f(e)&&(Q(e),Zt(e.$mobx))}function Gt(e,t){if("object"==r(e)&&null!==e){if(jt(e))return void 0!==t&&l(!1),e.$mobx.atom;if(Rt(e))return e.$mobx;if(Lt(e)){var n=e;return void 0===t?n._keysAtom:((i=n._data.get(t)||n._hasMap.get(t))||l(!1),i)}var i;if(Q(e),t&&!e.$mobx&&e[t],Wt(e))return t?((i=e.$mobx.values[t])||l(!1),i):l(!1);if(j(e)||Se(e)||Qe(e))return e}else if("function"==typeof e&&Qe(e.$mobx))return e.$mobx;return l(!1)}function Ft(e,t){return e||l("Expecting some object"),void 0!==t?Ft(Gt(e,t)):j(e)||Se(e)||Qe(e)||Lt(e)||Rt(e)?e:(Q(e),e.$mobx?e.$mobx:void l(!1))}var Ht=Object.prototype.toString;function $t(e,t,n){return void 0===n&&(n=-1),function e(t,n,i,a,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var s=r(t);if("function"!==s&&"object"!==s&&"object"!=r(n))return!1;t=Xt(t),n=Xt(n);var u=Ht.call(t);if(u!==Ht.call(n))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var c="[object Array]"===u;if(!c){if("object"!=r(t)||"object"!=r(n))return!1;var l=t.constructor,d=n.constructor;if(l!==d&&!("function"==typeof l&&l instanceof l&&"function"==typeof d&&d instanceof d)&&"constructor"in t&&"constructor"in n)return!1}if(0===i)return!1;i<0&&(i=-1),o=o||[];for(var p=(a=a||[]).length;p--;)if(a[p]===t)return o[p]===n;if(a.push(t),o.push(n),c){if((p=t.length)!==n.length)return!1;for(;p--;)if(!e(t[p],n[p],i-1,a,o))return!1}else{var h=Object.keys(t),f=void 0;if(p=h.length,Object.keys(n).length!==p)return!1;for(;p--;)if(!Jt(n,f=h[p])||!e(t[f],n[f],i-1,a,o))return!1}return a.pop(),o.pop(),!0}(e,t,n)}function Xt(e){return jt(e)?e.peek():b(e)||Lt(e)||w(e)||Rt(e)?M(e.entries()):e}function Jt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}"object"==("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":r(__MOBX_DEVTOOLS_GLOBAL_HOOK__))&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return Ce.spyListeners.push(e),p((function(){Ce.spyListeners=Ce.spyListeners.filter((function(t){return t!==e}))}))},extras:{getDebugName:function(e,t){return(void 0!==t?Gt(e,t):Wt(e)||Lt(e)||Rt(e)?Ft(e):Gt(e)).name}},$mobx:"$mobx"})}).call(this,n(10),n(11))},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzFweCIgaGVpZ2h0PSIyN3B4IiB2aWV3Qm94PSIwIDAgMzEgMjciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT52aWRlbyAoMSk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InZpZGVvLSgxKSIgZmlsbD0iIzJDMkMyQyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI2LjY3NTIyODEsMjYuMDgzNTA4OCBMMy43NTI2MzE1OCwyNi4wODM1MDg4IEMxLjY4NTk2NDksMjYuMDgzNTA4OCAwLDI0LjMyNTc1NDQgMCwyMi4xNTQ2NjY3IEwwLDMuOTMxMDE3NTQgQzAsMS43NjY0NTYxNSAxLjY3OTQzODU5LDAgMy43NTI2MzE1OCwwIEwyNi42NzUyMjgxLDAgQzI4Ljc0MTg5NDcsMCAzMC40MzAwMzUxLDEuNzU5OTI5ODMgMzAuNDMwMDM1MSwzLjkzMTAxNzU0IEwzMC40MzAwMzUxLDIyLjE1NDY2NjcgQzMwLjQyMTMzMzQsMjQuMzE3MDUyNiAyOC43NDE4OTQ3LDI2LjA4MzUwODggMjYuNjc1MjI4MSwyNi4wODM1MDg4IFogTTMuNzUyNjMxNTgsMS40MjQ5MTIyNyBDMi40MzIxNDAzNiwxLjQyNDkxMjI3IDEuMzU1Mjk4MjUsMi41NTM5NjQ5IDEuMzU1Mjk4MjUsMy45Mzc1NDM4NSBMMS4zNTUyOTgyNSwyMi4xNjExOTMgQzEuMzU1Mjk4MjUsMjMuNTQ0NzcxOSAyLjQzMjE0MDM2LDI0LjY3MTY0OTEgMy43NTI2MzE1OCwyNC42NzE2NDkxIEwyNi42NzUyMjgxLDI0LjY3MTY0OTEgQzI3Ljk5NTcxOTMsMjQuNjcxNjQ5MSAyOS4wNzQ3MzY4LDIzLjU0NDc3MTkgMjkuMDc0NzM2OCwyMi4xNjExOTMgTDI5LjA3NDczNjgsMy45MzEwMTc1NCBDMjkuMDc0NzM2OCwyLjU0NzQzODU5IDI3Ljk5NTcxOTMsMS40MTgzODU5NiAyNi42NzUyMjgxLDEuNDE4Mzg1OTYgTDMuNzUyNjMxNTgsMS40MTgzODU5NiBMMy43NTI2MzE1OCwxLjQyNDkxMjI3IFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTUuMDI3NDM4NTksMjYuMDc2OTgyNSBDNC42NDU1MTEzLDI2LjA2NjMwNjUgNC4zNDM1NjQwOSwyNS43NDk3OTU5IDQuMzUwODc3MiwyNS4zNjc3ODk1IEw0LjM1MDg3NzIsMC43MDkxOTI5OTEgQzQuMzUwODc3MiwwLjMxNzYxNDA0NCA0LjY1NTQzODU5LDAgNS4wMjc0Mzg1OSwwIEM1LjQxMDIyMjg5LDAuMDA5NTAzMDE3NzYgNS43MTM0NzI3OSwwLjMyNjM2MDI4OCA1LjcwNjE3NTQzLDAuNzA5MTkyOTkxIEw1LjcwNjE3NTQzLDI1LjM2Nzc4OTUgQzUuNzA2MTc1NDMsMjUuNzU5MzY4NCA1LjQwODE0MDMzLDI2LjA3Njk4MjUgNS4wMjc0Mzg1OSwyNi4wNzY5ODI1IEw1LjAyNzQzODU5LDI2LjA3Njk4MjUgWiBNMjUuMDE1MzY4NCwyNi4wNzY5ODI1IEMyNC42MzM0NDExLDI2LjA2NjMwNjYgMjQuMzMxNDkzOSwyNS43NDk3OTYgMjQuMzM4ODA3LDI1LjM2Nzc4OTUgTDI0LjMzODgwNywwLjcwOTE5Mjk5MSBDMjQuMzM4ODA3LDAuMzE3NjE0MDQ0IDI0LjY0MzM2ODQsMCAyNS4wMTUzNjg0LDAgQzI1LjM5ODE1MjcsMC4wMDk1MDMwMTc3NiAyNS43MDE0MDI2LDAuMzI2MzYwMjg4IDI1LjY5NDEwNTMsMC43MDkxOTI5OTEgTDI1LjY5NDEwNTMsMjUuMzY3Nzg5NSBDMjUuNzAxNDAyNiwyNS43NTA2MjIyIDI1LjM5ODE1MjcsMjYuMDY3NDc5NCAyNS4wMTUzNjg0LDI2LjA3Njk4MjUgTDI1LjAxNTM2ODQsMjYuMDc2OTgyNSBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjYyMDYzMTU4LDcuOTQ0NzAxNzUgTDAuNjAwNDIxMDUzLDcuOTQ0NzAxNzUgQzAuMjY5NzU0Mzc3LDcuOTQ0NzAxNzUgMCw3LjYyNDkxMjI3IDAsNy4yMzU1MDg3OCBDMCw2Ljg0MzkyOTgzIDAuMjY5NzU0Mzc3LDYuNTI2MzE1NzkgMC42MDA0MjEwNTMsNi41MjYzMTU3OSBMNC42MjA2MzE1OCw2LjUyNjMxNTc5IEM0Ljk1MTI5ODI1LDYuNTI2MzE1NzkgNS4yMjEwNTI2Myw2Ljg0NjEwNTI2IDUuMjIxMDUyNjMsNy4yMzU1MDg3OCBDNS4yMjEwNTI2Myw3LjYyNzA4NzczIDQuOTU3ODI0NTcsNy45NDQ3MDE3NSA0LjYyMDYzMTU4LDcuOTQ0NzAxNzUgWiBNNC42MjA2MzE1OCwxMy41MDcyOTgzIEwwLjYwMDQyMTA1MywxMy41MDcyOTgzIEMwLjI2OTc1NDM3NywxMy41MDcyOTgzIDAsMTMuMTg3NTA4OCAwLDEyLjc5ODEwNTMgQzAsMTIuNDA2NTI2MyAwLjI2OTc1NDM3NywxMi4wODg5MTIzIDAuNjAwNDIxMDUzLDEyLjA4ODkxMjMgTDQuNjIwNjMxNTgsMTIuMDg4OTEyMyBDNC45NTEyOTgyNSwxMi4wODg5MTIzIDUuMjIxMDUyNjMsMTIuNDA2NTI2MyA1LjIyMTA1MjYzLDEyLjc5ODEwNTMgQzUuMjIxMDUyNjMsMTMuMTg3NTA4OCA0Ljk1NzgyNDU3LDEzLjUwNzI5ODMgNC42MjA2MzE1OCwxMy41MDcyOTgzIEw0LjYyMDYzMTU4LDEzLjUwNzI5ODMgWiBNNC42MjA2MzE1OCwxOS43NzAzODYgTDAuNjAwNDIxMDUzLDE5Ljc3MDM4NiBDMC4yNjk3NTQzNzcsMTkuNzcwMzg2IDAsMTkuNDUwNTk2NSAwLDE5LjA2MTE5MyBDMCwxOC42Njk2MTQgMC4yNjk3NTQzNzcsMTguMzUyIDAuNjAwNDIxMDUzLDE4LjM1MiBMNC42MjA2MzE1OCwxOC4zNTIgQzQuOTUxMjk4MjUsMTguMzUyIDUuMjIxMDUyNjMsMTguNjcxNzg5NSA1LjIyMTA1MjYzLDE5LjA2MTE5MyBDNS4yMjEwNTI2MywxOS40NTI3NzE5IDQuOTU3ODI0NTcsMTkuNzcwMzg2IDQuNjIwNjMxNTgsMTkuNzcwMzg2IEw0LjYyMDYzMTU4LDE5Ljc3MDM4NiBaIE0yOS4zNzA1OTY1LDcuOTQ0NzAxNzUgTDI1LjAxNzU0MzksNy45NDQ3MDE3NSBDMjQuNjU4NTk2NSw3Ljk0NDcwMTc1IDI0LjM2NzA4NzcsNy42MjQ5MTIyNyAyNC4zNjcwODc3LDcuMjM1NTA4NzggQzI0LjM2NzA4NzcsNi44NDM5Mjk4MyAyNC42NTg1OTY1LDYuNTI2MzE1NzkgMjUuMDE3NTQzOSw2LjUyNjMxNTc5IEwyOS4zNjg0MjExLDYuNTI2MzE1NzkgQzI5LjcyNTE5Myw2LjUyNjMxNTc5IDMwLjAxODg3NzIsNi44NDYxMDUyNiAzMC4wMTg4NzcyLDcuMjM1NTA4NzggQzMwLjAxODg3NzIsNy42MjcwODc3MyAyOS43MjUxOTMsNy45NDQ3MDE3NSAyOS4zNjg0MjExLDcuOTQ0NzAxNzUgTDI5LjM3MDU5NjUsNy45NDQ3MDE3NSBaIE0yOS4zNzA1OTY1LDEzLjUwNzI5ODMgTDI1LjAxNzU0MzksMTMuNTA3Mjk4MyBDMjQuNjU4NTk2NSwxMy41MDcyOTgzIDI0LjM2NzA4NzcsMTMuMTg3NTA4OCAyNC4zNjcwODc3LDEyLjc5ODEwNTMgQzI0LjM2NzA4NzcsMTIuNDA2NTI2MyAyNC42NTg1OTY1LDEyLjA4ODkxMjMgMjUuMDE3NTQzOSwxMi4wODg5MTIzIEwyOS4zNjg0MjExLDEyLjA4ODkxMjMgQzI5LjcyNTE5MywxMi4wODg5MTIzIDMwLjAxODg3NzIsMTIuNDA2NTI2MyAzMC4wMTg4NzcyLDEyLjc5ODEwNTMgQzMwLjAxODg3NzIsMTMuMTg3NTA4OCAyOS43MjUxOTMsMTMuNTA3Mjk4MyAyOS4zNjg0MjExLDEzLjUwNzI5ODMgTDI5LjM3MDU5NjUsMTMuNTA3Mjk4MyBaIE0yOS4zNzA1OTY1LDE5Ljc3MDM4NiBMMjUuMDE3NTQzOSwxOS43NzAzODYgQzI0LjY1ODU5NjUsMTkuNzcwMzg2IDI0LjM2NzA4NzcsMTkuNDUwNTk2NSAyNC4zNjcwODc3LDE5LjA2MTE5MyBDMjQuMzY3MDg3NywxOC42Njk2MTQgMjQuNjU4NTk2NSwxOC4zNTIgMjUuMDE3NTQzOSwxOC4zNTIgTDI5LjM2ODQyMTEsMTguMzUyIEMyOS43MjUxOTMsMTguMzUyIDMwLjAxODg3NzIsMTguNjcxNzg5NSAzMC4wMTg4NzcyLDE5LjA2MTE5MyBDMzAuMDE4ODc3MiwxOS40NTI3NzE5IDI5LjcyNTE5MywxOS43NzAzODYgMjkuMzY4NDIxMSwxOS43NzAzODYgTDI5LjM3MDU5NjUsMTkuNzcwMzg2IFogTTExLjU1Mzc1NDQsMTguODYzMjY3MyBDMTEuNDM1MDcwMSwxOC44NjQ1Mzk2IDExLjMxODM0NzIsMTguODMyOTExNCAxMS4yMTY1NjE0LDE4Ljc3MTg1OTYgQzExLjAwMzE1OTUsMTguNjM5NDU1MiAxMC44NzQ0NjIzLDE4LjQwNTE2MDIgMTAuODc3MTUwNCwxOC4xNTQwMzUxIEwxMC44NzcxNTA0LDkuNDE1Mjk4MjUgQzEwLjg3NDQ2MjMsOS4xNjQxNzMxMiAxMS4wMDMxNTk1LDguOTI5ODc4MSAxMS4yMTY1NjE0LDguNzk3NDczNjggQzExLjQyNDA1NzUsOC42Njk5NjExNyAxMS42ODU2MjY3LDguNjY5OTYxMTcgMTEuODkzMTIyOCw4Ljc5NzQ3MzY4IEwxOS4xMjIxMDUzLDEzLjE2NzkyOTggQzE5LjMzNDg0MDgsMTMuMjk5OTMwNiAxOS40NjM0NDE2LDEzLjUzMzIyNTcgMTkuNDYxNTE2MywxMy43ODM1Nzg5IEMxOS40NjQyMDQ0LDE0LjAzNDcwNDEgMTkuMzM1NTA3MSwxNC4yNjg5OTkxIDE5LjEyMjEwNTMsMTQuNDAxNDAzNSBMMTEuODkzMTIyOCwxOC43NjUzMzMzIEMxMS43OTA3OTE2LDE4LjgyNzczMDMgMTEuNjczNTk2NywxOC44NjE1MzY1IDExLjU1Mzc1NDQsMTguODYzMjY3MyBaIE0xMi4yMzI0OTEyLDEwLjY0MDA3MDIgTDEyLjIzMjQ5MTIsMTYuOTI3MDg3NyBMMTcuNDI5NjE0LDEzLjc4MzU3ODkgTDEyLjIzMDMxNTgsMTAuNjQyMjQ1NiBMMTIuMjMyNDkxMiwxMC42NDAwNzAyIFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(e,n){e.exports=t},function(e,t,n){var r=n(7),i=n(8);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzZweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzYgMzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSLpobXpnaIxIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i57yW57uELTIiPgogICAgICAgICAgICA8ZyBpZD0i5aOw6Z+zIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1LjkzMDg4NTEsMC42MTgyMDU2MjUgTDcuMTgxNzAzNjYsNi40NDQwMDc4NCBMMy42MDM0NDU2Miw2LjQ0NDAwNzg0IEMxLjYyODMzMTAzLDYuNDQ0MDA3ODQgMC4wMjUxODc1OTM3LDguMjc3NjY4NjMgMC4wMjUxODc1OTM3LDEwLjUzMDQ1MTkgTDAuMDI1MTg3NTkzNywyMS40MzI4NzQ5IEMwLjAyNTE4NzU5MzcsMjMuNjkwODk3MiAxLjYyODMzMSwyNS41MTkzMTg5IDMuNjAzNDQ1NjIsMjUuNTE5MzE4OSBMNy4xODE3MDM2NiwyNS41MTkzMTg5IEwxNS45MjU2NDYsMzEuMzUwMzYwMiBDMTcuMDI1ODQyNSwzMi4wNzg1ODU1IDE4LjQzNTE0MTgsMzIuMTQ2NjkyOSAxOS41OTgyMDY2LDMxLjUyMzI0ODIgQzIwLjc2MTI3MTQsMzAuODk5ODAzNSAyMS40ODQyNTc3LDI5LjY4OTU4NzQgMjEuNDg5NDk2NywyOC4zNzQ1OTA3IEwyMS40ODk0OTY3LDMuNTkzOTc1MTMgQzIxLjQ4OTQ5NjcsMi4yNzM3MzkzOCAyMC43NjEyNzE0LDEuMDYzNTIzMjUgMTkuNTk4MjA2NiwwLjQ0NTMxNzYyNSBDMTguNDM1MTQxNywtMC4xODMzNjYwNjIgMTcuMDI1ODQyNSwtMC4xMTUyNTg2NTYgMTUuOTMwODg1MSwwLjYxODIwNTYyNSBMMTUuOTMwODg1MSwwLjYxODIwNTYyNSBaIE03LjE4MTcwMzY2LDIzLjEzNTU1OTkgTDMuNjAzNDQ1NjIsMjMuMTM1NTU5OSBDMy4wMjE5MTMyMiwyMy4xMzU1NTk5IDIuNDA4OTQ2NTksMjIuNDM4NzY4OCAyLjQwODk0NjU5LDIxLjQzMjg3NDkgTDIuNDA4OTQ2NTksMTAuNTM1NjkwOSBDMi40MDg5NDY1OSw5LjUyOTc5NyAzLjAxNjY3NDE2LDguODMzMDA1OTEgMy42MDM0NDU2Miw4LjgzMzAwNTkxIEw3LjE4MTcwMzY2LDguODMzMDA1OTEgTDcuMTgxNzAzNjYsMjMuMTM1NTU5OSBaIE0xOS4xMDU3Mzc3LDI4LjM3NDU5MDcgQzE5LjEwNTczNzcsMjguODE0NjY5MyAxOC44NjQ3NDIzLDI5LjIxODA3NDcgMTguNDc3MDU0LDI5LjQyMjM5NjggQzE4LjA4OTM2NTcsMjkuNjMxOTU4MSAxNy42MTc4NTI5LDI5LjYwNTc2MjkgMTcuMjU2MzU5OCwyOS4zNjQ3Njc1IEw5LjU2NTQ2MjY2LDI0LjI0NjIzNDQgTDkuNTY1NDYyNjYsNy43MjIzMzEzOCBMMTcuMjUxMTIwOCwyLjU5ODU1OTI4IEMxNy42MTc4NTMsMi4zNTc1NjM4OCAxOC4wODkzNjU4LDIuMzMxMzY4NzIgMTguNDcxODE1LDIuNTQwOTI5OTQgQzE4Ljg1OTUwMzIsMi43NTA0OTExNiAxOS4xMDA0OTg3LDMuMTUzODk2NTMgMTkuMTAwNDk4NywzLjU5Mzk3NTEzIEwxOS4xMDA0OTg3LDI4LjM3NDU5MDcgTDE5LjEwNTczNzcsMjguMzc0NTkwNyBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUuMDAwMDAwLCAxMi4wMDAwMDApIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01LjY4NDM0MTg5ZS0xNCwwIEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuNTA2NzA2MmUtMTQsLTEuNzc2MzU2ODRlLTE1IEw4LjkzMTYxODMxLDguOTMxNjE4MzEiIGlkPSLot6/lvoQtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC40NjU4MDksIDQuNDY1ODA5KSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC00LjQ2NTgwOSwgLTQuNDY1ODA5KSAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg=="},function(e,t,n){var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var d=o(l),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:l,updater:g(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,f=0;function g(e,t){var n,r,i;if(t.singleton){var a=f++;n=h||(h=u(t)),r=d.bind(null,n,a,!1),i=d.bind(null,n,a,!0)}else n=u(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=o(n[r]);a[i].references--}for(var u=s(e,t),c=0;c<n.length;c++){var l=o(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=u}}}},function(e,t,n){(t=n(9)(!1)).push([e.i,".media-mute-box {\n  position: absolute;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.media-mute-box-inner {\n  width: 88px;\n  cursor: pointer;\n  height: 64px;\n  border-radius: 8px;\n  background-color: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n.media-mute-box-inner span {\n  color: white;\n}\n.media-mute-box-inner img {\n  width: 24px;\n}\n.plugin-video-box {\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  transform-origin: top left;\n}\n.plugin-video-box-nav {\n  width: 100%;\n  height: 32px;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  background-image: linear-gradient(180deg, #E0E1E0 0%, #CDCDCC 100%);\n  display: flex;\n  flex-direction: row;\n  flex-shrink: 0;\n  justify-content: space-between;\n  align-items: center;\n  cursor: default;\n}\n.plugin-video-box-nav span {\n  margin-left: 6px;\n  font-size: 12px;\n  font-weight: bold;\n}\n.plugin-video-box-body {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: black;\n}\n.white-plugin-video-box {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.white-plugin-video-box video::-webkit-media-controls-fullscreen-button {\n  display: none !important;\n}\n.white-plugin-video {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n}\n.plugin-video-box-delete {\n  width: 22px;\n  height: 22px;\n  background-color: #FF756E;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 8px;\n  cursor: pointer;\n  opacity: 0.6;\n}\n.plugin-video-box-delete img {\n  width: 14px;\n}\n.plugin-video-box-delete:hover {\n  opacity: 1;\n}\n",""]),e.exports=t},function(e,t,n){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var s=(n=o,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(u).concat([s]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],l=!1,d=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&h())}function h(){if(!l){var e=s(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){n.r(t);var r,i,a=n(0),o=n(3),s=(n(4),n(1)),u=n(5),c=n(2),l=n(6),d=function(){function e(e){this.player=e,this.isFirstSync=!0}return e.prototype.syncProgress=function(e){this.isFirstSync?(this.isFirstSync=!1,this.player.currentTime=e):Math.abs(this.player.currentTime-e)>=2&&(this.player.currentTime=e)},e}(),p=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},g=function(e){return new Promise((function(t){return setTimeout(t,e)}))};!function(e){e.host="host",e.guest="guest",e.listener="listener"}(i||(i={}));var m,y=function(e){function t(t){var n=e.call(this,t)||this;return n.selfUserInf=null,n.playerState=!1,n.handleStartCondition=function(){return h(n,void 0,void 0,(function(){var e,t=this;return f(this,(function(n){switch(n.label){case 0:return e=this.props.plugin,this.setMyIdentityRoom(),[4,this.handleNativePlayerState(e.attributes.play)];case 1:return n.sent(),this.playerState=e.attributes.play,this.player.current&&(this.handleFirstSeek(),this.player.current.addEventListener("play",(function(){t.handleRemotePlayState(!0)})),this.player.current.addEventListener("pause",(function(){t.handleRemotePlayState(!1)})),this.player.current.addEventListener("seeked",(function(){if(t.player.current){var n=e.attributes.currentTime;t.handleRemoteSeekData(n)}})),this.player.current.addEventListener("volumechange",(function(e){t.handleRemoteVolumeChange(e.target.volume),t.handleRemoteMuteState(e.target.muted)}))),[2]}}))}))},n.handleFirstSeek=function(e){if(!e){var t,r=n.props.plugin,i=Date.now()/1e3;t=r.attributes.seekTime?r.attributes.seek+i-r.attributes.seekTime:r.attributes.seek,n.syncNode.syncProgress(t)}},n.isHost=function(){return!(!n.selfUserInf||n.selfUserInf.identity!==i.host)},n.setMyIdentityRoom=function(){var e=n.props.plugin;e.context&&e.context.identity&&(n.selfUserInf={identity:e.context.identity})},n.handleRemoteSeekData=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({seek:e,seekTime:Date.now()/1e3})},n.handleRemoteMuteState=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({mute:e})},n.handleRemoteVolumeChange=function(e){var t=n.props.plugin;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({volume:e})},n.handleRemotePlayState=function(e){var t=n.props.plugin;n.playerState=e;var r=t.attributes.currentTime;n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({play:e,seek:r,seekTime:Date.now()/1e3})},n.lastSyncProgressTimestamp=0,n.onTimeUpdate=function(e){var t=n.props.plugin,r=Date.now();r-n.lastSyncProgressTimestamp>1e3&&(n.lastSyncProgressTimestamp=r,n.selfUserInf&&n.selfUserInf.identity===i.host&&t.putAttributes({currentTime:e,play:n.playerState}))},n.handleNativePlayerState=function(e){return h(n,void 0,void 0,(function(){var t;return f(this,(function(n){switch(n.label){case 0:if(!e)return[3,7];if(!this.player.current)return[3,6];n.label=1;case 1:return n.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return n.sent(),[3,6];case 3:return""+(t=n.sent()).name!="NotAllowedError"&&""+t.name!="AbortError"?[3,5]:(this.setState({selfMute:!0}),[4,this.player.current.play()]);case 4:n.sent(),n.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),n.label=8;case 8:return[2]}}))}))},n.handleSeekReaction=function(e,t){return h(n,void 0,void 0,(function(){return f(this,(function(n){return this.isHost()||this.player.current&&void 0!==t&&(this.player.current.currentTime=e+Date.now()/1e3-t),[2]}))}))},n.timeUpdate=function(){if(n.player.current){var e=n.player.current.currentTime;n.onTimeUpdate(e)}},n.detectVideoClickEnable=function(){var e=n.props.plugin;return e.context&&e.context.identity?e.context.identity!==i.host?"none":"auto":"none"},n.renderMuteBox=function(){var e=n.props.plugin;return e.context&&e.context.identity&&e.context.identity!==i.host&&n.state.selfMute?a.createElement("div",{className:"media-mute-box"},a.createElement("div",{onClick:function(){n.setState({selfMute:!1})},onTouchStart:function(){n.setState({selfMute:!1})},style:{pointerEvents:"auto"},className:"media-mute-box-inner"},a.createElement("img",{src:u,alt:"mute_icon"}),a.createElement("span",null,"unmute"))):null},n.handleRemove=function(){return h(n,void 0,void 0,(function(){var e;return f(this,(function(t){switch(t.label){case 0:return e=this.props.plugin,this.handleRemotePlayState(!1),[4,g(300)];case 1:return t.sent(),e.remove(),[2]}}))}))},n.renderDeleteBtn=function(){var e=n.props.plugin;return e.context&&e.context.identity&&e.context.identity===i.host?a.createElement("div",{style:{pointerEvents:"auto"},className:"plugin-audio-box-delete",onClick:n.handleRemove},a.createElement("img",{src:l,alt:"delete"})):null},n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:a.createElement("div",{className:"plugin-video-box-nav"},a.createElement("div",null,a.createElement("img",{style:{width:20,marginLeft:8},src:c,alt:"video_plugin"}),a.createElement("span",null,"Video Player")),n.renderDeleteBtn())},n.handleOnEnd=function(){return h(n,void 0,void 0,(function(){var e;return f(this,(function(t){switch(t.label){case 0:return e=this.props.plugin,this.player.current?this.selfUserInf?this.selfUserInf.identity!==i.host?[3,2]:(e.putAttributes({seek:0,seekTime:void 0,currentTime:0}),[4,g(500)]):[3,5]:[3,7];case 1:return t.sent(),this.player.current.load(),[3,4];case 2:return[4,g(1e3)];case 3:t.sent(),this.player.current.load(),t.label=4;case 4:return[3,7];case 5:return[4,g(1e3)];case 6:t.sent(),this.player.current.load(),t.label=7;case 7:return this.setState({isEnd:!0}),[2]}}))}))},n.handleOnLoadedMetadataCapture=function(){return h(n,void 0,void 0,(function(){var e,t;return f(this,(function(n){switch(n.label){case 0:return e=navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),t=this.state.isEnd,e?[4,g(300)]:[3,2];case 1:n.sent(),this.handleFirstSeek(t),n.label=2;case 2:return[2]}}))}))},n.player=a.createRef(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionSeekTimeDisposer=n.startSeekTimeReaction(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionSyncDisposer=n.startSyncReaction(),n.state={play:!1,seek:0,selfMute:!1,currentTime:0,mute:!1,volume:1,isEnd:!1},n}return p(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.syncNode=new d(this.player.current),[4,this.handleStartCondition()];case 1:return e.sent(),[2]}}))}))},t.prototype.startPlayReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.play}),(function(t){return h(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.isHost()?[3,2]:[4,this.handleNativePlayerState(t)];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.startSeekReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.seek}),(function(n){return h(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this.handleSeekReaction(n,t.attributes.seekTime)];case 1:return e.sent(),[2]}}))}))}))},t.prototype.startSyncReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.currentTime}),(function(t){return h(e,void 0,void 0,(function(){return f(this,(function(e){return this.isHost()||this.player.current&&Math.abs(t-this.player.current.currentTime)>2&&(this.player.current.currentTime=t),[2]}))}))}))},t.prototype.startSeekTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.seekTime}),(function(n){return h(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this.handleSeekReaction(t.attributes.seek,n)];case 1:return e.sent(),[2]}}))}))}))},t.prototype.startVolumeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.volume}),(function(t){e.isHost()||e.player.current&&(e.player.current.volume=t)}))},t.prototype.startMuteTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.mute}),(function(t){e.isHost()||e.setState({mute:t})}))},t.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionSeekTimeDisposer(),this.reactionSyncDisposer(),this.player.current&&this.player.current.pause()},t.prototype.render=function(){var e=this.props,t=e.size,n=e.plugin,r=e.scale,i=this.state,o=i.mute,s=i.selfMute,u=0===r?1:r;return a.createElement("div",{className:"plugin-video-box",style:{width:t.width/u,height:t.height/u,transform:"scale("+u+")"}},this.renderNavigation(),a.createElement("div",{className:"plugin-video-box-body"},this.renderMuteBox(),a.createElement("div",{className:"white-plugin-video-box"},a.createElement("video",{"webkit-playsinline":"true",playsInline:!0,poster:n.attributes.poster,className:"white-plugin-video",src:n.attributes.pluginVideoUrl,ref:this.player,muted:o||s,style:{width:"100%",height:"100%",pointerEvents:this.detectVideoClickEnable(),outline:"none"},disablePictureInPicture:!0,onLoadedMetadataCapture:this.handleOnLoadedMetadataCapture,onEnded:this.handleOnEnd,controls:!0,controlsList:"nodownload nofullscreen",onTimeUpdate:this.timeUpdate,preload:"metadata"}))))},t}(a.Component),v=(m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},M=function(e){function t(t){var n=e.call(this,t)||this;return n.renderNavigation=function(){return!0===n.props.plugin.attributes.isNavigationDisable?null:a.createElement("div",{className:"plugin-video-box-nav"},a.createElement("div",null,a.createElement("img",{style:{width:20,marginLeft:8},src:c,alt:"video_plugin"}),a.createElement("span",null,"Video Player")))},n.player=a.createRef(),n.reactionPlayDisposer=n.startPlayReaction(),n.reactionSeekDisposer=n.startSeekReaction(),n.reactionMuteDisposer=n.startMuteTimeReaction(),n.reactionVolumeDisposer=n.startVolumeReaction(),n.reactionReplayPlayingDisposer=n.startReplayPlayingReaction(),n.state={mute:!1},n}return v(t,e),t.prototype.componentDidMount=function(){this.syncNode=new d(this.player.current)},t.prototype.startPlayReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.attributes.play}),(function(t){return b(e,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];e.label=1;case 1:return e.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return e.sent(),[3,6];case 3:return""+e.sent().name!="NotAllowedError"?[3,5]:[4,this.player.current.play()];case 4:e.sent(),e.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),e.label=8;case 8:return[2]}}))}))}))},t.prototype.startSeekReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.playerTimestamp}),(function(t){var n=e.props.plugin.attributes,r=n.seek,i=n.seekTime;if(void 0!==i){var a=r+(e.props.player.beginTimestamp+t)/1e3-i;e.syncNode.syncProgress(a)}}))},t.prototype.startReplayPlayingReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.isPlaying}),(function(t){return b(e,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:if(!t)return[3,7];if(!this.player.current)return[3,6];e.label=1;case 1:return e.trys.push([1,3,,6]),[4,this.player.current.play()];case 2:return e.sent(),[3,6];case 3:return""+e.sent().name!="NotAllowedError"?[3,5]:[4,this.player.current.play()];case 4:e.sent(),e.label=5;case 5:return[3,6];case 6:return[3,8];case 7:this.player.current&&this.player.current.pause(),e.label=8;case 8:return[2]}}))}))}))},t.prototype.startVolumeReaction=function(){var e=this;return Object(s.a)((function(){return e.props.plugin.attributes.volume}),(function(t){e.player.current&&(e.player.current.volume=t)}))},t.prototype.componentWillUnmount=function(){this.reactionPlayDisposer(),this.reactionSeekDisposer(),this.reactionMuteDisposer(),this.reactionVolumeDisposer(),this.reactionReplayPlayingDisposer()},t.prototype.startMuteTimeReaction=function(){var e=this,t=this.props.plugin;return Object(s.a)((function(){return t.attributes.mute}),(function(t){e.setState({mute:t})}))},t.prototype.render=function(){var e=this.props,t=e.size,n=e.plugin,r=e.scale,i=0===r?1:r;return a.createElement("div",{className:"plugin-video-box",style:{width:t.width/i,height:t.height/i,transform:"scale("+i+")"}},this.renderNavigation(),a.createElement("div",{className:"plugin-video-box-body"},a.createElement("div",{className:"white-plugin-video-box"},a.createElement("video",{"webkit-playsinline":"true",playsInline:!0,poster:n.attributes.poster?n.attributes.poster:void 0,className:"white-plugin-video",src:n.attributes.pluginVideoUrl,ref:this.player,muted:this.state.mute,style:{width:"100%",height:"100%",pointerEvents:"none",outline:"none"},controls:!1,preload:"auto"}))))},t}(a.Component);n.d(t,"videoPlugin",(function(){return D}));var x,I=(x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),N=function(){return(N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},T=function(e){function t(t){return e.call(this,t)||this}return I(t,e),t.prototype.render=function(){var e=this;return a.createElement(o.CNode,{context:this.props.cnode},a.createElement(o.RoomConsumer,null,(function(t){return t?a.createElement(y,N({},e.props,{room:t})):null})),a.createElement(o.PlayerConsumer,null,(function(t){return t?a.createElement(M,N({},e.props,{player:t})):null})))},t}(a.Component),D=Object.freeze({kind:"video",render:T,defaultAttributes:{play:!1,seek:0,mute:!1,volume:1,currentTime:0},hitTest:function(e){var t=e.component.context.getMemberState();return!(t&&"eraser"===t.currentApplianceName)}})}])},"object"==r(t)&&"object"==r(e)?e.exports=i(n(17328),n(71895)):n.amdD([,],i)},56868:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i;e=n.nmd(e),window,i=function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzFweCIgaGVpZ2h0PSIyN3B4IiB2aWV3Qm94PSIwIDAgMzEgMjciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT52aWRlbyAoMSk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InZpZGVvLSgxKSIgZmlsbD0iIzJDMkMyQyIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI2LjY3NTIyODEsMjYuMDgzNTA4OCBMMy43NTI2MzE1OCwyNi4wODM1MDg4IEMxLjY4NTk2NDksMjYuMDgzNTA4OCAwLDI0LjMyNTc1NDQgMCwyMi4xNTQ2NjY3IEwwLDMuOTMxMDE3NTQgQzAsMS43NjY0NTYxNSAxLjY3OTQzODU5LDAgMy43NTI2MzE1OCwwIEwyNi42NzUyMjgxLDAgQzI4Ljc0MTg5NDcsMCAzMC40MzAwMzUxLDEuNzU5OTI5ODMgMzAuNDMwMDM1MSwzLjkzMTAxNzU0IEwzMC40MzAwMzUxLDIyLjE1NDY2NjcgQzMwLjQyMTMzMzQsMjQuMzE3MDUyNiAyOC43NDE4OTQ3LDI2LjA4MzUwODggMjYuNjc1MjI4MSwyNi4wODM1MDg4IFogTTMuNzUyNjMxNTgsMS40MjQ5MTIyNyBDMi40MzIxNDAzNiwxLjQyNDkxMjI3IDEuMzU1Mjk4MjUsMi41NTM5NjQ5IDEuMzU1Mjk4MjUsMy45Mzc1NDM4NSBMMS4zNTUyOTgyNSwyMi4xNjExOTMgQzEuMzU1Mjk4MjUsMjMuNTQ0NzcxOSAyLjQzMjE0MDM2LDI0LjY3MTY0OTEgMy43NTI2MzE1OCwyNC42NzE2NDkxIEwyNi42NzUyMjgxLDI0LjY3MTY0OTEgQzI3Ljk5NTcxOTMsMjQuNjcxNjQ5MSAyOS4wNzQ3MzY4LDIzLjU0NDc3MTkgMjkuMDc0NzM2OCwyMi4xNjExOTMgTDI5LjA3NDczNjgsMy45MzEwMTc1NCBDMjkuMDc0NzM2OCwyLjU0NzQzODU5IDI3Ljk5NTcxOTMsMS40MTgzODU5NiAyNi42NzUyMjgxLDEuNDE4Mzg1OTYgTDMuNzUyNjMxNTgsMS40MTgzODU5NiBMMy43NTI2MzE1OCwxLjQyNDkxMjI3IFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgPHBhdGggZD0iTTUuMDI3NDM4NTksMjYuMDc2OTgyNSBDNC42NDU1MTEzLDI2LjA2NjMwNjUgNC4zNDM1NjQwOSwyNS43NDk3OTU5IDQuMzUwODc3MiwyNS4zNjc3ODk1IEw0LjM1MDg3NzIsMC43MDkxOTI5OTEgQzQuMzUwODc3MiwwLjMxNzYxNDA0NCA0LjY1NTQzODU5LDAgNS4wMjc0Mzg1OSwwIEM1LjQxMDIyMjg5LDAuMDA5NTAzMDE3NzYgNS43MTM0NzI3OSwwLjMyNjM2MDI4OCA1LjcwNjE3NTQzLDAuNzA5MTkyOTkxIEw1LjcwNjE3NTQzLDI1LjM2Nzc4OTUgQzUuNzA2MTc1NDMsMjUuNzU5MzY4NCA1LjQwODE0MDMzLDI2LjA3Njk4MjUgNS4wMjc0Mzg1OSwyNi4wNzY5ODI1IEw1LjAyNzQzODU5LDI2LjA3Njk4MjUgWiBNMjUuMDE1MzY4NCwyNi4wNzY5ODI1IEMyNC42MzM0NDExLDI2LjA2NjMwNjYgMjQuMzMxNDkzOSwyNS43NDk3OTYgMjQuMzM4ODA3LDI1LjM2Nzc4OTUgTDI0LjMzODgwNywwLjcwOTE5Mjk5MSBDMjQuMzM4ODA3LDAuMzE3NjE0MDQ0IDI0LjY0MzM2ODQsMCAyNS4wMTUzNjg0LDAgQzI1LjM5ODE1MjcsMC4wMDk1MDMwMTc3NiAyNS43MDE0MDI2LDAuMzI2MzYwMjg4IDI1LjY5NDEwNTMsMC43MDkxOTI5OTEgTDI1LjY5NDEwNTMsMjUuMzY3Nzg5NSBDMjUuNzAxNDAyNiwyNS43NTA2MjIyIDI1LjM5ODE1MjcsMjYuMDY3NDc5NCAyNS4wMTUzNjg0LDI2LjA3Njk4MjUgTDI1LjAxNTM2ODQsMjYuMDc2OTgyNSBaIiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjYyMDYzMTU4LDcuOTQ0NzAxNzUgTDAuNjAwNDIxMDUzLDcuOTQ0NzAxNzUgQzAuMjY5NzU0Mzc3LDcuOTQ0NzAxNzUgMCw3LjYyNDkxMjI3IDAsNy4yMzU1MDg3OCBDMCw2Ljg0MzkyOTgzIDAuMjY5NzU0Mzc3LDYuNTI2MzE1NzkgMC42MDA0MjEwNTMsNi41MjYzMTU3OSBMNC42MjA2MzE1OCw2LjUyNjMxNTc5IEM0Ljk1MTI5ODI1LDYuNTI2MzE1NzkgNS4yMjEwNTI2Myw2Ljg0NjEwNTI2IDUuMjIxMDUyNjMsNy4yMzU1MDg3OCBDNS4yMjEwNTI2Myw3LjYyNzA4NzczIDQuOTU3ODI0NTcsNy45NDQ3MDE3NSA0LjYyMDYzMTU4LDcuOTQ0NzAxNzUgWiBNNC42MjA2MzE1OCwxMy41MDcyOTgzIEwwLjYwMDQyMTA1MywxMy41MDcyOTgzIEMwLjI2OTc1NDM3NywxMy41MDcyOTgzIDAsMTMuMTg3NTA4OCAwLDEyLjc5ODEwNTMgQzAsMTIuNDA2NTI2MyAwLjI2OTc1NDM3NywxMi4wODg5MTIzIDAuNjAwNDIxMDUzLDEyLjA4ODkxMjMgTDQuNjIwNjMxNTgsMTIuMDg4OTEyMyBDNC45NTEyOTgyNSwxMi4wODg5MTIzIDUuMjIxMDUyNjMsMTIuNDA2NTI2MyA1LjIyMTA1MjYzLDEyLjc5ODEwNTMgQzUuMjIxMDUyNjMsMTMuMTg3NTA4OCA0Ljk1NzgyNDU3LDEzLjUwNzI5ODMgNC42MjA2MzE1OCwxMy41MDcyOTgzIEw0LjYyMDYzMTU4LDEzLjUwNzI5ODMgWiBNNC42MjA2MzE1OCwxOS43NzAzODYgTDAuNjAwNDIxMDUzLDE5Ljc3MDM4NiBDMC4yNjk3NTQzNzcsMTkuNzcwMzg2IDAsMTkuNDUwNTk2NSAwLDE5LjA2MTE5MyBDMCwxOC42Njk2MTQgMC4yNjk3NTQzNzcsMTguMzUyIDAuNjAwNDIxMDUzLDE4LjM1MiBMNC42MjA2MzE1OCwxOC4zNTIgQzQuOTUxMjk4MjUsMTguMzUyIDUuMjIxMDUyNjMsMTguNjcxNzg5NSA1LjIyMTA1MjYzLDE5LjA2MTE5MyBDNS4yMjEwNTI2MywxOS40NTI3NzE5IDQuOTU3ODI0NTcsMTkuNzcwMzg2IDQuNjIwNjMxNTgsMTkuNzcwMzg2IEw0LjYyMDYzMTU4LDE5Ljc3MDM4NiBaIE0yOS4zNzA1OTY1LDcuOTQ0NzAxNzUgTDI1LjAxNzU0MzksNy45NDQ3MDE3NSBDMjQuNjU4NTk2NSw3Ljk0NDcwMTc1IDI0LjM2NzA4NzcsNy42MjQ5MTIyNyAyNC4zNjcwODc3LDcuMjM1NTA4NzggQzI0LjM2NzA4NzcsNi44NDM5Mjk4MyAyNC42NTg1OTY1LDYuNTI2MzE1NzkgMjUuMDE3NTQzOSw2LjUyNjMxNTc5IEwyOS4zNjg0MjExLDYuNTI2MzE1NzkgQzI5LjcyNTE5Myw2LjUyNjMxNTc5IDMwLjAxODg3NzIsNi44NDYxMDUyNiAzMC4wMTg4NzcyLDcuMjM1NTA4NzggQzMwLjAxODg3NzIsNy42MjcwODc3MyAyOS43MjUxOTMsNy45NDQ3MDE3NSAyOS4zNjg0MjExLDcuOTQ0NzAxNzUgTDI5LjM3MDU5NjUsNy45NDQ3MDE3NSBaIE0yOS4zNzA1OTY1LDEzLjUwNzI5ODMgTDI1LjAxNzU0MzksMTMuNTA3Mjk4MyBDMjQuNjU4NTk2NSwxMy41MDcyOTgzIDI0LjM2NzA4NzcsMTMuMTg3NTA4OCAyNC4zNjcwODc3LDEyLjc5ODEwNTMgQzI0LjM2NzA4NzcsMTIuNDA2NTI2MyAyNC42NTg1OTY1LDEyLjA4ODkxMjMgMjUuMDE3NTQzOSwxMi4wODg5MTIzIEwyOS4zNjg0MjExLDEyLjA4ODkxMjMgQzI5LjcyNTE5MywxMi4wODg5MTIzIDMwLjAxODg3NzIsMTIuNDA2NTI2MyAzMC4wMTg4NzcyLDEyLjc5ODEwNTMgQzMwLjAxODg3NzIsMTMuMTg3NTA4OCAyOS43MjUxOTMsMTMuNTA3Mjk4MyAyOS4zNjg0MjExLDEzLjUwNzI5ODMgTDI5LjM3MDU5NjUsMTMuNTA3Mjk4MyBaIE0yOS4zNzA1OTY1LDE5Ljc3MDM4NiBMMjUuMDE3NTQzOSwxOS43NzAzODYgQzI0LjY1ODU5NjUsMTkuNzcwMzg2IDI0LjM2NzA4NzcsMTkuNDUwNTk2NSAyNC4zNjcwODc3LDE5LjA2MTE5MyBDMjQuMzY3MDg3NywxOC42Njk2MTQgMjQuNjU4NTk2NSwxOC4zNTIgMjUuMDE3NTQzOSwxOC4zNTIgTDI5LjM2ODQyMTEsMTguMzUyIEMyOS43MjUxOTMsMTguMzUyIDMwLjAxODg3NzIsMTguNjcxNzg5NSAzMC4wMTg4NzcyLDE5LjA2MTE5MyBDMzAuMDE4ODc3MiwxOS40NTI3NzE5IDI5LjcyNTE5MywxOS43NzAzODYgMjkuMzY4NDIxMSwxOS43NzAzODYgTDI5LjM3MDU5NjUsMTkuNzcwMzg2IFogTTExLjU1Mzc1NDQsMTguODYzMjY3MyBDMTEuNDM1MDcwMSwxOC44NjQ1Mzk2IDExLjMxODM0NzIsMTguODMyOTExNCAxMS4yMTY1NjE0LDE4Ljc3MTg1OTYgQzExLjAwMzE1OTUsMTguNjM5NDU1MiAxMC44NzQ0NjIzLDE4LjQwNTE2MDIgMTAuODc3MTUwNCwxOC4xNTQwMzUxIEwxMC44NzcxNTA0LDkuNDE1Mjk4MjUgQzEwLjg3NDQ2MjMsOS4xNjQxNzMxMiAxMS4wMDMxNTk1LDguOTI5ODc4MSAxMS4yMTY1NjE0LDguNzk3NDczNjggQzExLjQyNDA1NzUsOC42Njk5NjExNyAxMS42ODU2MjY3LDguNjY5OTYxMTcgMTEuODkzMTIyOCw4Ljc5NzQ3MzY4IEwxOS4xMjIxMDUzLDEzLjE2NzkyOTggQzE5LjMzNDg0MDgsMTMuMjk5OTMwNiAxOS40NjM0NDE2LDEzLjUzMzIyNTcgMTkuNDYxNTE2MywxMy43ODM1Nzg5IEMxOS40NjQyMDQ0LDE0LjAzNDcwNDEgMTkuMzM1NTA3MSwxNC4yNjg5OTkxIDE5LjEyMjEwNTMsMTQuNDAxNDAzNSBMMTEuODkzMTIyOCwxOC43NjUzMzMzIEMxMS43OTA3OTE2LDE4LjgyNzczMDMgMTEuNjczNTk2NywxOC44NjE1MzY1IDExLjU1Mzc1NDQsMTguODYzMjY3MyBaIE0xMi4yMzI0OTEyLDEwLjY0MDA3MDIgTDEyLjIzMjQ5MTIsMTYuOTI3MDg3NyBMMTcuNDI5NjE0LDEzLjc4MzU3ODkgTDEyLjIzMDMxNTgsMTAuNjQyMjQ1NiBMMTIuMjMyNDkxMiwxMC42NDAwNzAyIFoiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc4MzAzNzcyODk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjUwNDEiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTk1NS43MjMwODYgMTM1LjkwMjEwN0g2OTcuNTY4MTA2Vjg2LjI2MDcwMkE4Ni4zNTkwNzUgODYuMzU5MDc1IDAgMCAwIDYxMS4zMDc0MDMgMEg0MDcuMDIzODYxYTg2LjM1OTA3NSA4Ni4zNTkwNzUgMCAwIDAtODYuMjYwNzAzIDg2LjI2MDcwMnY0OS42NDE0MDVINjguMjc2OTE0QTI3LjI0OTI4MiAyNy4yNDkyODIgMCAwIDAgNDEuMDM5OTI4IDE2My4xNTEzOXY0LjUzNzQ0OGEyNy4yMzY5ODYgMjcuMjM2OTg2IDAgMCAwIDI3LjIzNjk4NiAyNy4yMzY5ODZoODEuNjc0MDY4VjkzNy43MzkyOThhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDIgODYuMjYwNzAyaDU1MS41NzY2MzJhODYuMzU5MDc1IDg2LjM1OTA3NSAwIDAgMCA4Ni4yNjA3MDItODYuMjYwNzAyVjE5NC45MjU4MjRoODEuNjc0MDY4QTI3LjIzNjk4NiAyNy4yMzY5ODYgMCAwIDAgOTgyLjk2MDA3MiAxNjcuNjg4ODM4di00LjUzNzQ0OGEyNy4yNDkyODIgMjcuMjQ5MjgyIDAgMCAwLTI3LjIzNjk4Ni0yNy4yNDkyODN6TTM3OS43ODY4NzUgODYuMjYwNzAyQTI3LjI2MTU3OSAyNy4yNjE1NzkgMCAwIDEgNDA3LjAyMzg2MSA1OS4wMjM3MTdoMjA0LjI4MzU0MmEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxIDI3LjIzNjk4NiAyNy4yMzY5ODV2NDkuNjQxNDA1SDM3OS43ODY4NzV6TTgxNS4wMjUzMDIgOTM3LjczOTI5OGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4NiAyNy4yMzY5ODVIMjM2LjIxMTY4NGEyNy4yNzM4NzYgMjcuMjczODc2IDAgMCAxLTI3LjIzNjk4Ni0yNy4yMzY5ODVWMTk0LjkyNTgyNGg2MDYuMDUwNjA0eiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MiI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTMuNTI2MTcyIDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0MyI+PC9wYXRoPjxwYXRoIGQ9Ik00NzkuNjQ3NjI1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NCI+PC9wYXRoPjxwYXRoIGQ9Ik02NjUuNzgxMzc1IDMwMy4yODM1M2w1OS4wMjM3MTcgMCAwIDU5MC4yMzcxNjYtNTkuMDIzNzE3IDAgMC01OTAuMjM3MTY2WiIgZmlsbD0iI2ZmZmZmZiIgcC1pZD0iNTA0NSI+PC9wYXRoPjwvc3ZnPg=="},function(e,t,n){var r=n(5),i=n(6);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]),r(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,n){var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var d=o(l),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:l,updater:g(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,f=0;function g(e,t){var n,r,i;if(t.singleton){var a=f++;n=h||(h=u(t)),r=d.bind(null,n,a,!1),i=d.bind(null,n,a,!0)}else n=u(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=o(n[r]);a[i].references--}for(var u=s(e,t),c=0;c<n.length;c++){var l=o(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=u}}}},function(e,t,n){(t=n(7)(!1)).push([e.i,".white-video-plugin-container {\n  display: flex;\n  flex-flow: column nowrap;\n  transform-origin: top left;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n}\n.white-video-plugin-nav {\n  height: 32px;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.2);\n  background-image: linear-gradient(180deg, #e0e1e0 0%, #cdcdcc 100%);\n}\n.white-video-plugin-nav > img {\n  width: 20px;\n  margin-left: 8px;\n}\n.white-video-plugin-nav-title {\n  margin-left: 6px;\n  font-size: 12px;\n  font-weight: bold;\n  flex-grow: 1;\n}\n.white-video-plugin-nav-delete {\n  width: 22px;\n  height: 22px;\n  border: 0;\n  background-color: #ff756e;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 8px;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n.white-video-plugin-nav-delete > img {\n  width: 14px;\n}\n.white-video-plugin-nav-delete:hover {\n  opacity: 1;\n}\n.white-video-plugin-body {\n  flex-grow: 1;\n  background-color: #f2f4f5;\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: stretch;\n  justify-content: center;\n  height: calc(100% - 32px);\n}\n.white-video-plugin-body > audio {\n  flex-grow: 1;\n  outline: none;\n}\n",""]),e.exports=t},function(e,t,n){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var s=(n=o,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(u).concat([s]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){n.r(t);var r=n(0),i=n.n(r),a=n(1),o=n(2),s=n.n(o),u=n(3),c=n.n(u),l=(n(4),function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))});function d(e){return l(this,void 0,void 0,(function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,e.play()];case 1:return t.sent(),[2,!0];case 2:return t.sent(),e.muted=!0,[4,e.play()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}var p,h=function(e){return new Promise((function(t){return window.setTimeout(t,e)}))},f=function(){function e(){this.map=new Map}return e.prototype.changed=function(e,t){return!(this.map.has(e)&&function e(t,n){return t===n||!!Array.isArray(t)&&t.every((function(t,r){return e(t,n[r])}))}(this.map.get(e),t)||(this.map.set(e,t),0))},e.prototype.clear=function(){this.map.clear()},e}(),g=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(a.CNode,{context:this.props.cnode},i.a.createElement(a.RoomConsumer,{children:function(t){return t&&i.a.createElement(w,m({},e.props,{room:t}))}}),i.a.createElement(a.PlayerConsumer,{children:function(t){return t&&i.a.createElement(w,m({},e.props,{player:t}))}}))},t}(r.Component),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disposers=[],t.changedMap=new f,t.player=Object(r.createRef)(),t.timestamp=function(){return{currentTime:t.player.current.currentTime,hostTime:Date.now()}},t.removeSelf=function(){return y(t,void 0,void 0,(function(){var e;return v(this,(function(t){switch(t.label){case 0:return(e=this.props.plugin).putAttributes(m({paused:!0},this.timestamp())),[4,h(300)];case 1:return t.sent(),e.remove(),[2]}}))}))},t}return g(t,e),t.prototype.isHost=function(){return this.props.room&&this.props.plugin.context&&"host"===this.props.plugin.context.identity},t.prototype.componentDidMount=function(){this.props.room&&(this.isHost()?this.setupHost():this.setupNonHost()),this.props.player&&this.setupNonHost()},t.prototype.setupHost=function(){var e=this,t=this.props.plugin,n=this.player.current;n.currentTime=t.attributes.currentTime,n.addEventListener("play",(function(){t.putAttributes(m({paused:!1},e.timestamp()))})),n.addEventListener("pause",(function(){t.putAttributes(m({paused:!0},e.timestamp()))})),n.addEventListener("seeked",(function(){t.putAttributes(e.timestamp())})),n.addEventListener("volumechange",(function(){t.putAttributes({volume:n.volume,muted:n.muted})}));var r,i=NaN;n.addEventListener("timeupdate",(function(){i||(i=window.setTimeout((function(){i=NaN,t.putAttributes(e.timestamp())}),2e3))})),this.disposers.push((function(){return window.clearTimeout(i)})),n.addEventListener("ended",(function(){return y(e,void 0,void 0,(function(){return v(this,(function(e){switch(e.label){case 0:return t.putAttributes(m({paused:!0},this.timestamp())),[4,h(500)];case 1:return e.sent(),n.load(),[2]}}))}))})),/iPad|iPhone|iPod/.test(navigator.platform)&&(r=function(){n.currentTime=t.attributes.currentTime},window.requestAnimationFrame((function(){window.requestAnimationFrame(r)})))},t.prototype.setupNonHost=function(){var e=this,t=this.props.plugin,n=this.player.current,r=Object(a.autorun)((function(){return y(e,void 0,void 0,(function(){var e,r,i,a,o,s,u,c,l,p,h;return v(this,(function(f){switch(f.label){case 0:return e=t.isPlaying,r=t.playerTimestamp,i=t.playbackSpeed,a=t.attributes,o=a.paused,s=a.volume,u=a.muted,c=a.currentTime,l=a.hostTime,this.changedMap.changed("paused",[o,e])?!o&&e?[3,1]:(n.pause(),[3,3]):[3,3];case 1:return[4,d(n)];case 2:f.sent(),f.label=3;case 3:return this.changedMap.changed("volume",[s,u])&&(n.volume=t.attributes.volume,n.muted=t.attributes.muted),this.changedMap.changed("time",[c,l])&&l>0&&(p=Date.now(),this.props.player&&(p=this.props.player.beginTimestamp+r),h=c+(p-l)/1e3,Math.abs(n.currentTime-h)>2&&(n.currentTime=h)),this.changedMap.changed("rate",i)&&(n.playbackRate=i),[2]}}))}))}));this.disposers.push(r),this.disposers.push((function(){return e.changedMap.clear()}))},t.prototype.componentWillUnmount=function(){var e;null===(e=this.player.current)||void 0===e||e.pause(),this.disposers.forEach((function(e){return e()}))},Object.defineProperty(t.prototype,"containerStyle",{get:function(){var e=this.props,t=e.size,n=e.scale||1;return{width:t.width/n,height:t.height/n,transform:"scale("+n+")"}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointerEventsStyle",{get:function(){return{pointerEvents:this.isHost()?"auto":"none"}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.room,n=e.player,r=e.plugin;return t||n?i.a.createElement("div",{className:"white-video-plugin-container",style:this.containerStyle},!r.attributes.isNavigationDisable&&i.a.createElement("div",{className:"white-video-plugin-nav"},i.a.createElement("img",{src:s.a,alt:"video_plugin"}),i.a.createElement("span",{className:"white-video-plugin-nav-title"},"Video Player"),i.a.createElement("span",{className:"white-video-plugin-nav-delete",style:this.pointerEventsStyle,onClick:this.removeSelf},i.a.createElement("img",{src:c.a,alt:"delete_icon"}))),i.a.createElement("div",{className:"white-video-plugin-body"},i.a.createElement("video",{src:r.attributes.src,style:m({maxWidth:"100%",maxHeight:"100%"},this.pointerEventsStyle),controls:!!t,controlsList:"nodownload nofullscreen",preload:"metadata",ref:this.player,playsInline:!0,"webkit-playsinline":"true",poster:r.attributes.poster,disablePictureInPicture:!0}))):null},t}(r.Component);n.d(t,"videoPlugin2",(function(){return M}));var M=Object.freeze({kind:"video2",render:b,defaultAttributes:{src:"",hostTime:0,currentTime:0,paused:!0,muted:!1,volume:1},hitTest:function(e){var t=e.component.context.getMemberState();return!("eraser"===(null==t?void 0:t.currentApplianceName))}})}])},"object"==r(t)&&"object"==r(e)?e.exports=i(n(17328),n(71895)):n.amdD([,],i)},18371:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.playerStateNameSpace=t.playerNameSpace=t.sdkNameSpace=t.roomStateNamespace=t.roomNamespace=t.roomSyncNamespace=t.pptNamespace=t.ScaleMode=void 0,function(e){e[e.Scale=0]="Scale",e[e.AspectFit=1]="AspectFit",e[e.AspectFitScale=2]="AspectFitScale",e[e.AspectFitSpace=3]="AspectFitSpace",e[e.AspectFill=4]="AspectFill",e[e.AspectFillScale=5]="AspectFillScale"}(t.ScaleMode||(t.ScaleMode={})),t.pptNamespace="ppt",t.roomSyncNamespace="room.sync",t.roomNamespace="room",t.roomStateNamespace="room.state",t.sdkNameSpace="sdk",t.playerNameSpace="player",t.playerStateNameSpace="player.state"},6513:function(e,t,n){var r=n(49766).Buffer;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}Object.defineProperty(t,"__esModule",{value:!0}),t.xml2json=t.xml2js=t.json2xml=t.js2xml=void 0;var o=void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},s=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,l=!1;function d(){l=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)s[t]=e[t],u[e.charCodeAt(t)]=t;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63}function p(e,t,n){for(var r,i,a=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(s[(i=r)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return a.join("")}function h(e){var t;l||d();for(var n=e.length,r=n%3,i="",a=[],o=16383,u=0,c=n-r;u<c;u+=o)a.push(p(e,u,u+o>c?c:u+o));return 1===r?(t=e[n-1],i+=s[t>>2],i+=s[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=s[t>>10],i+=s[t>>4&63],i+=s[t<<2&63],i+="="),a.push(i),a.join("")}function f(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,d=n?i-1:0,p=n?-1:1,h=e[t+d];for(d+=p,a=h&(1<<-l)-1,h>>=-l,l+=s;l>0;a=256*a+e[t+d],d+=p,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+d],d+=p,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=c}return(h?-1:1)*o*Math.pow(2,a-r)}function g(e,t,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,d=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,f=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?p/u:p*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=l?(s=0,o=l):o+d>=1?(s=(t*u-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=f,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+h]=255&o,h+=f,o/=256,c-=8);e[n+h-f]|=128*g}var m={}.toString,y=Array.isArray||function(e){return"[object Array]"==m.call(e)};function v(){return w.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function b(e,t){if(v()<t)throw new RangeError("Invalid typed array length");return w.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=w.prototype:(null===e&&(e=new w(t)),e.length=t),e}function w(e,t,n){if(!(w.TYPED_ARRAY_SUPPORT||this instanceof w))return new w(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return I(this,e)}return M(this,e,t,n)}function M(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);w.TYPED_ARRAY_SUPPORT?(e=t).__proto__=w.prototype:e=N(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!w.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|A(t,n),i=(e=b(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(D(t)){var n=0|T(t.length);return 0===(e=b(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?b(e,0):N(e,t);if("Buffer"===t.type&&y(t.data))return N(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function x(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function I(e,t){if(x(t),e=b(e,t<0?0:0|T(t)),!w.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function N(e,t){var n=t.length<0?0:0|T(t.length);e=b(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function T(e){if(e>=v())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v().toString(16)+" bytes");return 0|e}function D(e){return!(null==e||!e._isBuffer)}function A(e,t){if(D(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return ee(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return te(e).length;default:if(r)return ee(e).length;t=(""+t).toLowerCase(),r=!0}}function k(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Q(this,t,n);case"utf8":case"utf-8":return U(this,t,n);case"ascii":return V(this,t,n);case"latin1":case"binary":return Y(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function E(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=w.from(t,r)),D(t))return 0===t.length?-1:j(e,t,n,r,i);if("number"==typeof t)return t&=255,w.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):j(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function j(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var d=!0,p=0;p<u;p++)if(c(e,a+p)!==c(t,p)){d=!1;break}if(d)return a}return-1}function C(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function z(e,t,n,r){return ne(ee(t,e.length-n),e,n,r)}function O(e,t,n,r){return ne(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function L(e,t,n,r){return O(e,t,n,r)}function _(e,t,n,r){return ne(te(t),e,n,r)}function P(e,t,n,r){return ne(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function R(e,t,n){return 0===t&&n===e.length?h(e):h(e.slice(t,n))}function U(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=B)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=B));return n}(r)}w.TYPED_ARRAY_SUPPORT=void 0===o.TYPED_ARRAY_SUPPORT||o.TYPED_ARRAY_SUPPORT,w.poolSize=8192,w._augment=function(e){return e.__proto__=w.prototype,e},w.from=function(e,t,n){return M(null,e,t,n)},w.TYPED_ARRAY_SUPPORT&&(w.prototype.__proto__=Uint8Array.prototype,w.__proto__=Uint8Array),w.alloc=function(e,t,n){return function(e,t,n,r){return x(t),t<=0?b(e,t):void 0!==n?"string"==typeof r?b(e,t).fill(n,r):b(e,t).fill(n):b(e,t)}(null,e,t,n)},w.allocUnsafe=function(e){return I(null,e)},w.allocUnsafeSlow=function(e){return I(null,e)},w.isBuffer=function(e){return null!=e&&(!!e._isBuffer||re(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&re(e.slice(0,0))}(e))},w.compare=function(e,t){if(!D(e)||!D(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},w.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},w.concat=function(e,t){if(!y(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return w.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=w.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!D(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},w.byteLength=A,w.prototype._isBuffer=!0,w.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},w.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},w.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},w.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?U(this,0,e):k.apply(this,arguments)},w.prototype.equals=function(e){if(!D(e))throw new TypeError("Argument must be a Buffer");return this===e||0===w.compare(this,e)},w.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},w.prototype.compare=function(e,t,n,r,i){if(!D(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,i),c=e.slice(t,n),l=0;l<s;++l)if(u[l]!==c[l]){a=u[l],o=c[l];break}return a<o?-1:o<a?1:0},w.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},w.prototype.indexOf=function(e,t,n){return E(this,e,t,n,!0)},w.prototype.lastIndexOf=function(e,t,n){return E(this,e,t,n,!1)},w.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return C(this,e,t,n);case"utf8":case"utf-8":return z(this,e,t,n);case"ascii":return O(this,e,t,n);case"latin1":case"binary":return L(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;function V(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function Y(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Q(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=q(e[a]);return i}function Z(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function W(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function G(e,t,n,r,i,a){if(!D(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function F(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function H(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function $(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function X(e,t,n,r,i){return i||$(e,0,n,4),g(e,t,n,r,23,4),n+4}function J(e,t,n,r,i){return i||$(e,0,n,8),g(e,t,n,r,52,8),n+8}w.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),w.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=w.prototype;else{var i=t-e;n=new w(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},w.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||W(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},w.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||W(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},w.prototype.readUInt8=function(e,t){return t||W(e,1,this.length),this[e]},w.prototype.readUInt16LE=function(e,t){return t||W(e,2,this.length),this[e]|this[e+1]<<8},w.prototype.readUInt16BE=function(e,t){return t||W(e,2,this.length),this[e]<<8|this[e+1]},w.prototype.readUInt32LE=function(e,t){return t||W(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},w.prototype.readUInt32BE=function(e,t){return t||W(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},w.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||W(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},w.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||W(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},w.prototype.readInt8=function(e,t){return t||W(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},w.prototype.readInt16LE=function(e,t){t||W(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},w.prototype.readInt16BE=function(e,t){t||W(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},w.prototype.readInt32LE=function(e,t){return t||W(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},w.prototype.readInt32BE=function(e,t){return t||W(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},w.prototype.readFloatLE=function(e,t){return t||W(e,4,this.length),f(this,e,!0,23,4)},w.prototype.readFloatBE=function(e,t){return t||W(e,4,this.length),f(this,e,!1,23,4)},w.prototype.readDoubleLE=function(e,t){return t||W(e,8,this.length),f(this,e,!0,52,8)},w.prototype.readDoubleBE=function(e,t){return t||W(e,8,this.length),f(this,e,!1,52,8)},w.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||G(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},w.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||G(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},w.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,1,255,0),w.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},w.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},w.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,2,65535,0),w.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},w.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):H(this,e,t,!0),t+4},w.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,4,4294967295,0),w.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):H(this,e,t,!1),t+4},w.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);G(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},w.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);G(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},w.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,1,127,-128),w.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},w.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},w.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,2,32767,-32768),w.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},w.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,4,2147483647,-2147483648),w.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):H(this,e,t,!0),t+4},w.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||G(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),w.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):H(this,e,t,!1),t+4},w.prototype.writeFloatLE=function(e,t,n){return X(this,e,t,!0,n)},w.prototype.writeFloatBE=function(e,t,n){return X(this,e,t,!1,n)},w.prototype.writeDoubleLE=function(e,t,n){return J(this,e,t,!0,n)},w.prototype.writeDoubleBE=function(e,t,n){return J(this,e,t,!1,n)},w.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!w.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},w.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!w.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=D(e)?e:ee(new w(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var K=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function ee(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function te(e){return function(e){var t,n,r,i,a,o;l||d();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a="="===e[s-2]?2:"="===e[s-1]?1:0,o=new c(3*s/4-a),r=a>0?s-4:s;var p=0;for(t=0,n=0;t<r;t+=4,n+=3)i=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],o[p++]=i>>16&255,o[p++]=i>>8&255,o[p++]=255&i;return 2===a?(i=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,o[p++]=255&i):1===a&&(i=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,o[p++]=i>>8&255,o[p++]=255&i),o}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(K,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function ne(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function re(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var ie={};function ae(){}function oe(){oe.init.call(this)}function se(e){return void 0===e._maxListeners?oe.defaultMaxListeners:e._maxListeners}function ue(e,t,n){if(t)e.call(n);else for(var r=e.length,i=me(e,r),a=0;a<r;++a)i[a].call(n)}function ce(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=me(e,i),o=0;o<i;++o)a[o].call(n,r)}function le(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=me(e,a),s=0;s<a;++s)o[s].call(n,r,i)}function de(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=me(e,o),u=0;u<o;++u)s[u].call(n,r,i,a)}function pe(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=me(e,i),o=0;o<i;++o)a[o].apply(n,r)}function he(e,t,n,r){var i,a,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]):(a=e._events=new ae,e._eventsCount=0),o){if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=se(e))&&i>0&&o.length>i){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,s=u,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=a[t]=n,++e._eventsCount;return e}function fe(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function ge(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function me(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function ye(){throw new Error("setTimeout has not been defined")}function ve(){throw new Error("clearTimeout has not been defined")}ae.prototype=Object.create(null),oe.EventEmitter=oe,oe.usingDomains=!1,oe.prototype.domain=void 0,oe.prototype._events=void 0,oe.prototype._maxListeners=void 0,oe.defaultMaxListeners=10,oe.init=function(){this.domain=null,oe.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ae,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},oe.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},oe.prototype.getMaxListeners=function(){return se(this)},oe.prototype.emit=function(e){var t,n,r,i,a,o,s,u="error"===e;if(o=this._events)u=u&&null==o.error;else if(!u)return!1;if(s=this.domain,u){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=o[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:ue(n,l,this);break;case 2:ce(n,l,this,arguments[1]);break;case 3:le(n,l,this,arguments[1],arguments[2]);break;case 4:de(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];pe(n,l,this,i)}return!0},oe.prototype.addListener=function(e,t){return he(this,e,t,!1)},oe.prototype.on=oe.prototype.addListener,oe.prototype.prependListener=function(e,t){return he(this,e,t,!0)},oe.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,fe(this,e,t)),this},oe.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,fe(this,e,t)),this},oe.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new ae:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new ae,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i);r.removeListener&&this.emit("removeListener",e,o||t)}return this},oe.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new ae,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new ae:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new ae,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},oe.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},oe.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ge.call(e,t)},oe.prototype.listenerCount=ge,oe.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var be=ye,we=ve;function Me(e){if(be===setTimeout)return setTimeout(e,0);if((be===ye||!be)&&setTimeout)return be=setTimeout,setTimeout(e,0);try{return be(e,0)}catch(t){try{return be.call(null,e,0)}catch(t){return be.call(this,e,0)}}}"function"==typeof o.setTimeout&&(be=setTimeout),"function"==typeof o.clearTimeout&&(we=clearTimeout);var xe,Ie=[],Ne=!1,Te=-1;function De(){Ne&&xe&&(Ne=!1,xe.length?Ie=xe.concat(Ie):Te=-1,Ie.length&&Ae())}function Ae(){if(!Ne){var e=Me(De);Ne=!0;for(var t=Ie.length;t;){for(xe=Ie,Ie=[];++Te<t;)xe&&xe[Te].run();Te=-1,t=Ie.length}xe=null,Ne=!1,function(e){if(we===clearTimeout)return clearTimeout(e);if((we===ve||!we)&&clearTimeout)return we=clearTimeout,clearTimeout(e);try{we(e)}catch(t){try{return we.call(null,e)}catch(t){return we.call(this,e)}}}(e)}}function ke(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ie.push(new Se(e,t)),1!==Ie.length||Ne||Me(Ae)}function Se(e,t){this.fun=e,this.array=t}Se.prototype.run=function(){this.fun.apply(null,this.array)};function Ee(){}var je=Ee,Ce=Ee,ze=Ee,Oe=Ee,Le=Ee,_e=Ee,Pe=Ee;var Re=o.performance||{},Ue=Re.now||Re.mozNow||Re.msNow||Re.oNow||Re.webkitNow||function(){return(new Date).getTime()};var Be=new Date;var Ve={nextTick:ke,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:je,addListener:Ce,once:ze,off:Oe,removeListener:Le,removeAllListeners:_e,emit:Pe,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Ue.call(Re),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Be)/1e3}},Ye="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},Qe=/%[sdj%]/g;function Ze(e){if(!nt(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(He(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(Qe,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),o=r[n];n<i;o=r[++n])tt(o)||!at(o)?a+=" "+o:a+=" "+He(o);return a}function We(e,t){if(rt(o.process))return function(){return We(e,t).apply(this,arguments)};if(!0===Ve.noDeprecation)return e;var n=!1;return function(){if(!n){if(Ve.throwDeprecation)throw new Error(t);Ve.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}}var Ge,Fe={};function He(e,t){var n={seen:[],stylize:Xe};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),et(t)?n.showHidden=t:t&&lt(n,t),rt(n.showHidden)&&(n.showHidden=!1),rt(n.depth)&&(n.depth=2),rt(n.colors)&&(n.colors=!1),rt(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=$e),Je(n,e,n.depth)}function $e(e,t){var n=He.styles[t];return n?"["+He.colors[n][0]+"m"+e+"["+He.colors[n][1]+"m":e}function Xe(e,t){return e}function Je(e,t,n){if(e.customInspect&&t&&ut(t.inspect)&&t.inspect!==He&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return nt(r)||(r=Je(e,r,n)),r}var i=function(e,t){if(rt(t))return e.stylize("undefined","undefined");if(nt(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(r=t,"number"==typeof r)return e.stylize(""+t,"number");var r;if(et(t))return e.stylize(""+t,"boolean");if(tt(t))return e.stylize("null","null")}(e,t);if(i)return i;var a=Object.keys(t),o=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),st(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return Ke(t);if(0===a.length){if(ut(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(it(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(ot(t))return e.stylize(Date.prototype.toString.call(t),"date");if(st(t))return Ke(t)}var u,c,l="",d=!1,p=["{","}"];(u=t,Array.isArray(u)&&(d=!0,p=["[","]"]),ut(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return it(t)&&(l=" "+RegExp.prototype.toString.call(t)),ot(t)&&(l=" "+Date.prototype.toUTCString.call(t)),st(t)&&(l=" "+Ke(t)),0!==a.length||d&&0!=t.length?n<0?it(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=d?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)dt(t,String(o))?a.push(qe(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(qe(e,t,n,r,i,!0))})),a}(e,t,n,o,a):a.map((function(r){return qe(e,t,n,o,r,d)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,l,p)):p[0]+l+p[1]}function Ke(e){return"["+Error.prototype.toString.call(e)+"]"}function qe(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),dt(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=tt(n)?Je(e,u.value,null):Je(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),rt(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function et(e){return"boolean"==typeof e}function tt(e){return null===e}function nt(e){return"string"==typeof e}function rt(e){return void 0===e}function it(e){return at(e)&&"[object RegExp]"===ct(e)}function at(e){return"object"===i(e)&&null!==e}function ot(e){return at(e)&&"[object Date]"===ct(e)}function st(e){return at(e)&&("[object Error]"===ct(e)||e instanceof Error)}function ut(e){return"function"==typeof e}function ct(e){return Object.prototype.toString.call(e)}function lt(e,t){if(!t||!at(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pt(){this.head=null,this.tail=null,this.length=0}He.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},He.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},pt.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},pt.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},pt.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},pt.prototype.clear=function(){this.head=this.tail=null,this.length=0},pt.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},pt.prototype.concat=function(e){if(0===this.length)return w.alloc(0);if(1===this.length)return this.head.data;for(var t=w.allocUnsafe(e>>>0),n=this.head,r=0;n;)n.data.copy(t,r),r+=n.data.length,n=n.next;return t};var ht=w.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ft(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!ht(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=mt;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=yt;break;default:return void(this.write=gt)}this.charBuffer=new w(6),this.charReceived=0,this.charLength=0}function gt(e){return e.toString(this.encoding)}function mt(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function yt(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}ft.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var i;r=(t+=e.toString(this.encoding,0,r)).length-1;if((i=t.charCodeAt(r))>=55296&&i<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,r)}return t},ft.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},ft.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t};var vt=Object.freeze({__proto__:null,StringDecoder:ft});Mt.ReadableState=wt;var bt=function(e){if(rt(Ge)&&(Ge=Ve.env.NODE_DEBUG||""),e=e.toUpperCase(),!Fe[e])if(new RegExp("\\b"+e+"\\b","i").test(Ge)){Fe[e]=function(){var t=Ze.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else Fe[e]=function(){};return Fe[e]}("stream");function wt(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof $t&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new pt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new ft(e.encoding),this.encoding=e.encoding)}function Mt(e){if(!(this instanceof Mt))return new Mt(e);this._readableState=new wt(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),oe.call(this)}function xt(e,t,n,r,i){var a=function(e,t){var n=null;w.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(t,n);if(a)e.emit("error",a);else if(null===n)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,Tt(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var u;!t.decoder||i||r||(n=t.decoder.write(n),u=!t.objectMode&&0===n.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&Tt(e))),function(e,t){t.readingMore||(t.readingMore=!0,ke(At,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}Ye(Mt,oe),Mt.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=w.from(e,t),t=""),xt(this,n,e,t,!1)},Mt.prototype.unshift=function(e){return xt(this,this._readableState,e,"",!0)},Mt.prototype.isPaused=function(){return!1===this._readableState.flowing},Mt.prototype.setEncoding=function(e){return this._readableState.decoder=new ft(e),this._readableState.encoding=e,this};var It=8388608;function Nt(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=It?e=It:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function Tt(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(bt("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?ke(Dt,e):Dt(e))}function Dt(e){bt("emit readable"),e.emit("readable"),Et(e)}function At(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(bt("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function kt(e){bt("readable nexttick read 0"),e.read(0)}function St(e,t){t.reading||(bt("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Et(e),t.flowing&&!t.reading&&e.read(0)}function Et(e){var t=e._readableState;for(bt("flow",t.flowing);t.flowing&&null!==e.read(););}function jt(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=w.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function Ct(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,ke(zt,t,e))}function zt(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Ot(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function Lt(){}function _t(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function Pt(e,t){Object.defineProperty(this,"buffer",{get:We((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof $t&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?ke(i,r):i(r);e._writableState.errorEmitted=!0,e.emit("error",r)}(e,n,r,t,i);else{var a=Yt(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||Vt(e,n),r?ke(Bt,e,n,a,i):Bt(e,n,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Wt(this)}function Rt(e){if(!(this instanceof Rt||this instanceof $t))return new Rt(e);this._writableState=new Pt(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),oe.call(this)}function Ut(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function Bt(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),Zt(e,t)}function Vt(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var o=0;n;)i[o]=n,n=n.next,o+=1;Ut(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new Wt(t)}else{for(;n;){var s=n.chunk,u=n.encoding,c=n.callback;if(Ut(e,t,!1,t.objectMode?1:s.length,s,u,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function Yt(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function Qt(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function Zt(e,t){var n=Yt(t);return n&&(0===t.pendingcb?(Qt(e,t),t.finished=!0,e.emit("finish")):Qt(e,t)),n}function Wt(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}Mt.prototype.read=function(e){bt("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return bt("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Ct(this):Tt(this),null;if(0===(e=Nt(e,t))&&t.ended)return 0===t.length&&Ct(this),null;var r,i=t.needReadable;return bt("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&bt("length less than watermark",i=!0),t.ended||t.reading?bt("reading or ended",i=!1):i&&(bt("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Nt(n,t))),null===(r=e>0?jt(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&Ct(this)),null!==r&&this.emit("data",r),r},Mt.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Mt.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,bt("pipe count=%d opts=%j",r.pipesCount,t);var i=!t||!1!==t.end?o:c;function a(e){bt("onunpipe"),e===n&&c()}function o(){bt("onend"),e.end()}r.endEmitted?ke(i):n.once("end",i),e.on("unpipe",a);var s=function(e){return function(){var t=e._readableState;bt("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,Et(e))}}(n);e.on("drain",s);var u=!1;function c(){bt("cleanup"),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("drain",s),e.removeListener("error",p),e.removeListener("unpipe",a),n.removeListener("end",o),n.removeListener("end",c),n.removeListener("data",d),u=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||s()}var l=!1;function d(t){bt("ondata"),l=!1,!1!==e.write(t)||l||((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==Ot(r.pipes,e))&&!u&&(bt("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,l=!0),n.pause())}function p(t){var n;bt("onerror",t),g(),e.removeListener("error",p),0===(n="error",e.listeners(n).length)&&e.emit("error",t)}function h(){e.removeListener("finish",f),g()}function f(){bt("onfinish"),e.removeListener("close",h),g()}function g(){bt("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",h),e.once("finish",f),e.emit("pipe",n),r.flowing||(bt("pipe resume"),n.resume()),e},Mt.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var a=Ot(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},Mt.prototype.on=function(e,t){var n=oe.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&Tt(this):ke(kt,this))}return n},Mt.prototype.addListener=Mt.prototype.on,Mt.prototype.resume=function(){var e=this._readableState;return e.flowing||(bt("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,ke(St,e,t))}(this,e)),this},Mt.prototype.pause=function(){return bt("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(bt("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Mt.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var i in e.on("end",(function(){if(bt("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)})),e.on("data",(function(i){(bt("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i)||(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],(function(t){e.on(t,r.emit.bind(r,t))})),r._read=function(t){bt("wrapped _read",t),n&&(n=!1,e.resume())},r},Mt._fromList=jt,Rt.WritableState=Pt,Ye(Rt,oe),Pt.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},Rt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Rt.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return"function"==typeof t&&(n=t,t=null),w.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=Lt),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),ke(t,n)}(this,n):function(e,t,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):w.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),ke(r,a),i=!1),i}(this,r,e,n)&&(r.pendingcb++,i=function(e,t,n,r,i){n=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=w.from(t,n));return t}(t,n,r),w.isBuffer(n)&&(r="buffer");var a=t.objectMode?1:n.length;t.length+=a;var o=t.length<t.highWaterMark;o||(t.needDrain=!0);if(t.writing||t.corked){var s=t.lastBufferedRequest;t.lastBufferedRequest=new _t(n,r,i),s?s.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Ut(e,t,!1,a,n,r,i);return o}(this,r,e,t,n)),i},Rt.prototype.cork=function(){this._writableState.corked++},Rt.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Vt(this,e))},Rt.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Rt.prototype._write=function(e,t,n){n(new Error("not implemented"))},Rt.prototype._writev=null,Rt.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,Zt(e,t),n&&(t.finished?ke(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Ye($t,Mt);for(var Gt=Object.keys(Rt.prototype),Ft=0;Ft<Gt.length;Ft++){var Ht=Gt[Ft];$t.prototype[Ht]||($t.prototype[Ht]=Rt.prototype[Ht])}function $t(e){if(!(this instanceof $t))return new $t(e);Mt.call(this,e),Rt.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Xt)}function Xt(){this.allowHalfOpen||this._writableState.ended||ke(Jt,this)}function Jt(e){e.end()}function Kt(e){this.afterTransform=function(t,n){return function(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=n&&e.push(n);i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function qt(e){if(!(this instanceof qt))return new qt(e);$t.call(this,e),this._transformState=new Kt(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){en(t,e)})):en(t)}))}function en(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function tn(e){if(!(this instanceof tn))return new tn(e);qt.call(this,e)}function nn(){oe.call(this)}Ye(qt,$t),qt.prototype.push=function(e,t){return this._transformState.needTransform=!1,$t.prototype.push.call(this,e,t)},qt.prototype._transform=function(e,t,n){throw new Error("Not implemented")},qt.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},qt.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Ye(tn,qt),tn.prototype._transform=function(e,t,n){n(null,e)},Ye(nn,oe),nn.Readable=Mt,nn.Writable=Rt,nn.Duplex=$t,nn.Transform=qt,nn.PassThrough=tn,nn.Stream=nn,nn.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",o),n.on("close",s));var a=!1;function o(){a||(a=!0,e.end())}function s(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===oe.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",u),e.on("error",u),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e};var rn=a(Object.freeze({__proto__:null,default:nn,Readable:Mt,Writable:Rt,Duplex:$t,Transform:qt,PassThrough:tn,Stream:nn})),an=a(vt);!function(e){!function(e){e.parser=function(e,t){return new r(e,t)},e.SAXParser=r,e.SAXStream=o,e.createStream=function(e,t){return new o(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(t,i){if(!(this instanceof r))return new r(t,i);var a=this;!function(e){for(var t=0,r=n.length;t<r;t++)e[n[t]]=""}(a),a.q=a.c="",a.bufferCheckPosition=e.MAX_BUFFER_LENGTH,a.opt=i||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!t,a.noscript=!(!t&&!a.opt.noscript),a.state=I.BEGIN,a.strictEntities=a.opt.strictEntities,a.ENTITIES=a.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(c)),a.trackPosition=!1!==a.opt.position,a.trackPosition&&(a.position=a.line=a.column=0),T(a,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){E(this)},write:function(t){var r=this;if(this.error)throw this.error;if(r.closed)return S(r,"Cannot write after close. Assign an onready handler.");if(null===t)return E(r);"object"===i(t)&&(t=t.toString());var a=0,o="";for(;o=U(t,a++),r.c=o,o;)switch(r.trackPosition&&(r.position++,"\n"===o?(r.line++,r.column=0):r.column++),r.state){case I.BEGIN:if(r.state=I.BEGIN_WHITESPACE,"\ufeff"===o)continue;R(r,o);continue;case I.BEGIN_WHITESPACE:R(r,o);continue;case I.TEXT:if(r.sawRoot&&!r.closedRoot){for(var s=a-1;o&&"<"!==o&&"&"!==o;)(o=U(t,a++))&&r.trackPosition&&(r.position++,"\n"===o?(r.line++,r.column=0):r.column++);r.textNode+=t.substring(s,a-1)}"<"!==o||r.sawRoot&&r.closedRoot&&!r.strict?(f(o)||r.sawRoot&&!r.closedRoot||j(r,"Text data outside of root node."),"&"===o?r.state=I.TEXT_ENTITY:r.textNode+=o):(r.state=I.OPEN_WAKA,r.startTagPosition=r.position);continue;case I.SCRIPT:"<"===o?r.state=I.SCRIPT_ENDING:r.script+=o;continue;case I.SCRIPT_ENDING:"/"===o?r.state=I.CLOSE_TAG:(r.script+="<"+o,r.state=I.SCRIPT);continue;case I.OPEN_WAKA:if("!"===o)r.state=I.SGML_DECL,r.sgmlDecl="";else if(f(o));else if(y(l,o))r.state=I.OPEN_TAG,r.tagName=o;else if("/"===o)r.state=I.CLOSE_TAG,r.tagName="";else if("?"===o)r.state=I.PROC_INST,r.procInstName=r.procInstBody="";else{if(j(r,"Unencoded <"),r.startTagPosition+1<r.position){var u=r.position-r.startTagPosition;o=new Array(u).join(" ")+o}r.textNode+="<"+o,r.state=I.TEXT}continue;case I.SGML_DECL:"[CDATA["===(r.sgmlDecl+o).toUpperCase()?(D(r,"onopencdata"),r.state=I.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+o==="--"?(r.state=I.COMMENT,r.comment="",r.sgmlDecl=""):"DOCTYPE"===(r.sgmlDecl+o).toUpperCase()?(r.state=I.DOCTYPE,(r.doctype||r.sawRoot)&&j(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):">"===o?(D(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=I.TEXT):g(o)?(r.state=I.SGML_DECL_QUOTED,r.sgmlDecl+=o):r.sgmlDecl+=o;continue;case I.SGML_DECL_QUOTED:o===r.q&&(r.state=I.SGML_DECL,r.q=""),r.sgmlDecl+=o;continue;case I.DOCTYPE:">"===o?(r.state=I.TEXT,D(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=o,"["===o?r.state=I.DOCTYPE_DTD:g(o)&&(r.state=I.DOCTYPE_QUOTED,r.q=o));continue;case I.DOCTYPE_QUOTED:r.doctype+=o,o===r.q&&(r.q="",r.state=I.DOCTYPE);continue;case I.DOCTYPE_DTD:r.doctype+=o,"]"===o?r.state=I.DOCTYPE:g(o)&&(r.state=I.DOCTYPE_DTD_QUOTED,r.q=o);continue;case I.DOCTYPE_DTD_QUOTED:r.doctype+=o,o===r.q&&(r.state=I.DOCTYPE_DTD,r.q="");continue;case I.COMMENT:"-"===o?r.state=I.COMMENT_ENDING:r.comment+=o;continue;case I.COMMENT_ENDING:"-"===o?(r.state=I.COMMENT_ENDED,r.comment=k(r.opt,r.comment),r.comment&&D(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+o,r.state=I.COMMENT);continue;case I.COMMENT_ENDED:">"!==o?(j(r,"Malformed comment"),r.comment+="--"+o,r.state=I.COMMENT):r.state=I.TEXT;continue;case I.CDATA:"]"===o?r.state=I.CDATA_ENDING:r.cdata+=o;continue;case I.CDATA_ENDING:"]"===o?r.state=I.CDATA_ENDING_2:(r.cdata+="]"+o,r.state=I.CDATA);continue;case I.CDATA_ENDING_2:">"===o?(r.cdata&&D(r,"oncdata",r.cdata),D(r,"onclosecdata"),r.cdata="",r.state=I.TEXT):"]"===o?r.cdata+="]":(r.cdata+="]]"+o,r.state=I.CDATA);continue;case I.PROC_INST:"?"===o?r.state=I.PROC_INST_ENDING:f(o)?r.state=I.PROC_INST_BODY:r.procInstName+=o;continue;case I.PROC_INST_BODY:if(!r.procInstBody&&f(o))continue;"?"===o?r.state=I.PROC_INST_ENDING:r.procInstBody+=o;continue;case I.PROC_INST_ENDING:">"===o?(D(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=I.TEXT):(r.procInstBody+="?"+o,r.state=I.PROC_INST_BODY);continue;case I.OPEN_TAG:y(d,o)?r.tagName+=o:(C(r),">"===o?L(r):"/"===o?r.state=I.OPEN_TAG_SLASH:(f(o)||j(r,"Invalid character in tag name"),r.state=I.ATTRIB));continue;case I.OPEN_TAG_SLASH:">"===o?(L(r,!0),_(r)):(j(r,"Forward-slash in opening tag not followed by >"),r.state=I.ATTRIB);continue;case I.ATTRIB:if(f(o))continue;">"===o?L(r):"/"===o?r.state=I.OPEN_TAG_SLASH:y(l,o)?(r.attribName=o,r.attribValue="",r.state=I.ATTRIB_NAME):j(r,"Invalid attribute name");continue;case I.ATTRIB_NAME:"="===o?r.state=I.ATTRIB_VALUE:">"===o?(j(r,"Attribute without value"),r.attribValue=r.attribName,O(r),L(r)):f(o)?r.state=I.ATTRIB_NAME_SAW_WHITE:y(d,o)?r.attribName+=o:j(r,"Invalid attribute name");continue;case I.ATTRIB_NAME_SAW_WHITE:if("="===o)r.state=I.ATTRIB_VALUE;else{if(f(o))continue;j(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",D(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",">"===o?L(r):y(l,o)?(r.attribName=o,r.state=I.ATTRIB_NAME):(j(r,"Invalid attribute name"),r.state=I.ATTRIB)}continue;case I.ATTRIB_VALUE:if(f(o))continue;g(o)?(r.q=o,r.state=I.ATTRIB_VALUE_QUOTED):(j(r,"Unquoted attribute value"),r.state=I.ATTRIB_VALUE_UNQUOTED,r.attribValue=o);continue;case I.ATTRIB_VALUE_QUOTED:if(o!==r.q){"&"===o?r.state=I.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=o;continue}O(r),r.q="",r.state=I.ATTRIB_VALUE_CLOSED;continue;case I.ATTRIB_VALUE_CLOSED:f(o)?r.state=I.ATTRIB:">"===o?L(r):"/"===o?r.state=I.OPEN_TAG_SLASH:y(l,o)?(j(r,"No whitespace between attributes"),r.attribName=o,r.attribValue="",r.state=I.ATTRIB_NAME):j(r,"Invalid attribute name");continue;case I.ATTRIB_VALUE_UNQUOTED:if(!m(o)){"&"===o?r.state=I.ATTRIB_VALUE_ENTITY_U:r.attribValue+=o;continue}O(r),">"===o?L(r):r.state=I.ATTRIB;continue;case I.CLOSE_TAG:if(r.tagName)">"===o?_(r):y(d,o)?r.tagName+=o:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=I.SCRIPT):(f(o)||j(r,"Invalid tagname in closing tag"),r.state=I.CLOSE_TAG_SAW_WHITE);else{if(f(o))continue;v(l,o)?r.script?(r.script+="</"+o,r.state=I.SCRIPT):j(r,"Invalid tagname in closing tag."):r.tagName=o}continue;case I.CLOSE_TAG_SAW_WHITE:if(f(o))continue;">"===o?_(r):j(r,"Invalid characters in closing tag");continue;case I.TEXT_ENTITY:case I.ATTRIB_VALUE_ENTITY_Q:case I.ATTRIB_VALUE_ENTITY_U:var c,b;switch(r.state){case I.TEXT_ENTITY:c=I.TEXT,b="textNode";break;case I.ATTRIB_VALUE_ENTITY_Q:c=I.ATTRIB_VALUE_QUOTED,b="attribValue";break;case I.ATTRIB_VALUE_ENTITY_U:c=I.ATTRIB_VALUE_UNQUOTED,b="attribValue"}";"===o?(r[b]+=P(r),r.entity="",r.state=c):y(r.entity.length?h:p,o)?r.entity+=o:(j(r,"Invalid character in entity name"),r[b]+="&"+r.entity+o,r.entity="",r.state=c);continue;default:throw new Error(r,"Unknown state: "+r.state)}r.position>=r.bufferCheckPosition&&function(t){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,a=0,o=n.length;a<o;a++){var s=t[n[a]].length;if(s>r)switch(n[a]){case"textNode":A(t);break;case"cdata":D(t,"oncdata",t.cdata),t.cdata="";break;case"script":D(t,"onscript",t.script),t.script="";break;default:S(t,"Max buffer length exceeded: "+n[a])}i=Math.max(i,s)}var u=e.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=u+t.position}(r);return r}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;A(e=this),""!==e.cdata&&(D(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(D(e,"onscript",e.script),e.script="")}};try{t=rn.Stream}catch(e){t=function(){}}var a=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function o(e,n){if(!(this instanceof o))return new o(e,n);t.apply(this),this._parser=new r(e,n),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(e){i.emit("error",e),i._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(i,"on"+e,{get:function(){return i._parser["on"+e]},set:function(t){if(!t)return i.removeAllListeners(e),i._parser["on"+e]=t,t;i.on(e,t)},enumerable:!0,configurable:!1})}))}o.prototype=Object.create(t.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof w.isBuffer&&w.isBuffer(e)){if(!this._decoder){var t=an.StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,n){var r=this;return r._parser["on"+e]||-1===a.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),t.prototype.on.call(r,e,n)};var s="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",c={xml:s,xmlns:u},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function g(e){return'"'===e||"'"===e}function m(e){return">"===e||f(e)}function y(e,t){return e.test(t)}function v(e,t){return!y(e,t)}var b,M,x,I=0;for(var N in e.STATE={BEGIN:I++,BEGIN_WHITESPACE:I++,TEXT:I++,TEXT_ENTITY:I++,OPEN_WAKA:I++,SGML_DECL:I++,SGML_DECL_QUOTED:I++,DOCTYPE:I++,DOCTYPE_QUOTED:I++,DOCTYPE_DTD:I++,DOCTYPE_DTD_QUOTED:I++,COMMENT_STARTING:I++,COMMENT:I++,COMMENT_ENDING:I++,COMMENT_ENDED:I++,CDATA:I++,CDATA_ENDING:I++,CDATA_ENDING_2:I++,PROC_INST:I++,PROC_INST_BODY:I++,PROC_INST_ENDING:I++,OPEN_TAG:I++,OPEN_TAG_SLASH:I++,ATTRIB:I++,ATTRIB_NAME:I++,ATTRIB_NAME_SAW_WHITE:I++,ATTRIB_VALUE:I++,ATTRIB_VALUE_QUOTED:I++,ATTRIB_VALUE_CLOSED:I++,ATTRIB_VALUE_UNQUOTED:I++,ATTRIB_VALUE_ENTITY_Q:I++,ATTRIB_VALUE_ENTITY_U:I++,CLOSE_TAG:I++,CLOSE_TAG_SAW_WHITE:I++,SCRIPT:I++,SCRIPT_ENDING:I++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],r="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=r})),e.STATE)e.STATE[e.STATE[N]]=N;function T(e,t,n){e[t]&&e[t](n)}function D(e,t,n){e.textNode&&A(e),T(e,t,n)}function A(e){e.textNode=k(e.opt,e.textNode),e.textNode&&T(e,"ontext",e.textNode),e.textNode=""}function k(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function S(e,t){return A(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,T(e,"onerror",t),e}function E(e){return e.sawRoot&&!e.closedRoot&&j(e,"Unclosed root tag"),e.state!==I.BEGIN&&e.state!==I.BEGIN_WHITESPACE&&e.state!==I.TEXT&&S(e,"Unexpected end"),A(e),e.c="",e.closed=!0,T(e,"onend"),r.call(e,e.strict,e.opt),e}function j(e,t){if("object"!==i(e)||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&S(e,t)}function C(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,D(e,"onopentagstart",n)}function z(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function O(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=z(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==s)j(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==u)j(e,"xmlns: prefix must be bound to "+u+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,D(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function L(e,t){if(e.opt.xmlns){var n=e.tag,r=z(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(j(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){D(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,o=e.attribList.length;a<o;a++){var s=e.attribList[a],u=s[0],c=s[1],l=z(u,!0),d=l.prefix,p=l.local,h=""===d?"":n.ns[d]||"",f={name:u,value:c,prefix:d,local:p,uri:h};d&&"xmlns"!==d&&!h&&(j(e,"Unbound namespace prefix: "+JSON.stringify(d)),f.uri=d),e.tag.attributes[u]=f,D(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),D(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=I.TEXT:e.state=I.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function _(e){if(!e.tagName)return j(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=I.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=I.SCRIPT);D(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){if(e.tags[t].name===r)break;j(e,"Unexpected close tag")}if(t<0)return j(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=I.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,D(e,"onclosetag",e.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];D(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=I.TEXT}function P(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(j(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function R(e,t){"<"===t?(e.state=I.OPEN_WAKA,e.startTagPosition=e.position):f(t)||(j(e,"Non-whitespace before first tag."),e.textNode=t,e.state=I.TEXT)}function U(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}I=e.STATE,String.fromCodePoint||(b=String.fromCharCode,M=Math.floor,x=function(){var e,t,n=16384,r=[],i=-1,a=arguments.length;if(!a)return"";for(var o="";++i<a;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||M(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,r.push(e,t)),(i+1===a||r.length>n)&&(o+=b.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:x,configurable:!0,writable:!0}):String.fromCodePoint=x)}(e)}(ie);var on,sn,un=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},cn=un,ln={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){e in t&&"boolean"==typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!=typeof e.spaces&&"string"!=typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){"alwaysArray"in e&&("boolean"==typeof e.alwaysArray||cn(e.alwaysArray))||(e.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"==typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}},dn=ie,pn=ln,hn=un;function fn(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}function gn(e,t){var n;if(on.compact){if(!sn[on[e+"Key"]]&&(hn(on.alwaysArray)?-1!==on.alwaysArray.indexOf(on[e+"Key"]):on.alwaysArray)&&(sn[on[e+"Key"]]=[]),sn[on[e+"Key"]]&&!hn(sn[on[e+"Key"]])&&(sn[on[e+"Key"]]=[sn[on[e+"Key"]]]),e+"Fn"in on&&"string"==typeof t&&(t=on[e+"Fn"](t,sn)),"instruction"===e&&("instructionFn"in on||"instructionNameFn"in on))for(n in t)if(t.hasOwnProperty(n))if("instructionFn"in on)t[n]=on.instructionFn(t[n],n,sn);else{var r=t[n];delete t[n],t[on.instructionNameFn(n,r,sn)]=r}hn(sn[on[e+"Key"]])?sn[on[e+"Key"]].push(t):sn[on[e+"Key"]]=t}else{sn[on.elementsKey]||(sn[on.elementsKey]=[]);var i={};if(i[on.typeKey]=e,"instruction"===e){for(n in t)if(t.hasOwnProperty(n))break;i[on.nameKey]="instructionNameFn"in on?on.instructionNameFn(n,t,sn):n,on.instructionHasAttributes?(i[on.attributesKey]=t[n][on.attributesKey],"instructionFn"in on&&(i[on.attributesKey]=on.instructionFn(i[on.attributesKey],n,sn))):("instructionFn"in on&&(t[n]=on.instructionFn(t[n],n,sn)),i[on.instructionKey]=t[n])}else e+"Fn"in on&&(t=on[e+"Fn"](t,sn)),i[on[e+"Key"]]=t;on.addParent&&(i[on.parentKey]=sn),sn[on.elementsKey].push(i)}}function mn(e){var t;if("attributesFn"in on&&e&&(e=on.attributesFn(e,sn)),(on.trim||"attributeValueFn"in on||"attributeNameFn"in on||on.nativeTypeAttributes)&&e)for(t in e)if(e.hasOwnProperty(t)&&(on.trim&&(e[t]=e[t].trim()),on.nativeTypeAttributes&&(e[t]=fn(e[t])),"attributeValueFn"in on&&(e[t]=on.attributeValueFn(e[t],t,sn)),"attributeNameFn"in on)){var n=e[t];delete e[t],e[on.attributeNameFn(t,e[t],sn)]=n}return e}function yn(e){var t={};if(e.body&&("xml"===e.name.toLowerCase()||on.instructionHasAttributes)){for(var n,r=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(n=r.exec(e.body));)t[n[1]]=n[2]||n[3]||n[4];t=mn(t)}if("xml"===e.name.toLowerCase()){if(on.ignoreDeclaration)return;sn[on.declarationKey]={},Object.keys(t).length&&(sn[on.declarationKey][on.attributesKey]=t),on.addParent&&(sn[on.declarationKey][on.parentKey]=sn)}else{if(on.ignoreInstruction)return;on.trim&&(e.body=e.body.trim());var i={};on.instructionHasAttributes&&Object.keys(t).length?(i[e.name]={},i[e.name][on.attributesKey]=t):i[e.name]=e.body,gn("instruction",i)}}function vn(e,t){var n;if("object"===i(e)&&(t=e.attributes,e=e.name),t=mn(t),"elementNameFn"in on&&(e=on.elementNameFn(e,sn)),on.compact){var r;if(n={},!on.ignoreAttributes&&t&&Object.keys(t).length)for(r in n[on.attributesKey]={},t)t.hasOwnProperty(r)&&(n[on.attributesKey][r]=t[r]);!(e in sn)&&(hn(on.alwaysArray)?-1!==on.alwaysArray.indexOf(e):on.alwaysArray)&&(sn[e]=[]),sn[e]&&!hn(sn[e])&&(sn[e]=[sn[e]]),hn(sn[e])?sn[e].push(n):sn[e]=n}else sn[on.elementsKey]||(sn[on.elementsKey]=[]),(n={})[on.typeKey]="element",n[on.nameKey]=e,!on.ignoreAttributes&&t&&Object.keys(t).length&&(n[on.attributesKey]=t),on.alwaysChildren&&(n[on.elementsKey]=[]),sn[on.elementsKey].push(n);n[on.parentKey]=sn,sn=n}function bn(e){on.ignoreText||(e.trim()||on.captureSpacesBetweenElements)&&(on.trim&&(e=e.trim()),on.nativeType&&(e=fn(e)),on.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),gn("text",e))}function wn(e){on.ignoreComment||(on.trim&&(e=e.trim()),gn("comment",e))}function Mn(e){var t=sn[on.parentKey];on.addParent||delete sn[on.parentKey],sn=t}function xn(e){on.ignoreCdata||(on.trim&&(e=e.trim()),gn("cdata",e))}function In(e){on.ignoreDoctype||(e=e.replace(/^ /,""),on.trim&&(e=e.trim()),gn("doctype",e))}function Nn(e){e.note=e,"onErrorFn"in on&&on.onErrorFn(e)}var Tn=function(e,t){var n=dn.parser(!0,{}),r={};sn=r,on=function(e){return on=pn.copyOptions(e),pn.ensureFlagExists("ignoreDeclaration",on),pn.ensureFlagExists("ignoreInstruction",on),pn.ensureFlagExists("ignoreAttributes",on),pn.ensureFlagExists("ignoreText",on),pn.ensureFlagExists("ignoreComment",on),pn.ensureFlagExists("ignoreCdata",on),pn.ensureFlagExists("ignoreDoctype",on),pn.ensureFlagExists("compact",on),pn.ensureFlagExists("alwaysChildren",on),pn.ensureFlagExists("addParent",on),pn.ensureFlagExists("trim",on),pn.ensureFlagExists("nativeType",on),pn.ensureFlagExists("nativeTypeAttributes",on),pn.ensureFlagExists("sanitize",on),pn.ensureFlagExists("instructionHasAttributes",on),pn.ensureFlagExists("captureSpacesBetweenElements",on),pn.ensureAlwaysArrayExists(on),pn.ensureKeyExists("declaration",on),pn.ensureKeyExists("instruction",on),pn.ensureKeyExists("attributes",on),pn.ensureKeyExists("text",on),pn.ensureKeyExists("comment",on),pn.ensureKeyExists("cdata",on),pn.ensureKeyExists("doctype",on),pn.ensureKeyExists("type",on),pn.ensureKeyExists("name",on),pn.ensureKeyExists("elements",on),pn.ensureKeyExists("parent",on),on}(t),n.opt={strictEntities:!0},n.onopentag=vn,n.ontext=bn,n.oncomment=wn,n.onclosetag=Mn,n.onerror=Nn,n.oncdata=xn,n.ondoctype=In,n.onprocessinginstruction=yn;try{n.write(e).close()}catch(e){}if(r[on.elementsKey]){var i=r[on.elementsKey];delete r[on.elementsKey],r[on.elementsKey]=i,delete r.text}return r};t.xml2js=Tn;var Dn=ln,An=Tn;t.xml2json=function(e,t){var n,r,i,a;return n=function(e){var t=Dn.copyOptions(e);return Dn.ensureSpacesExists(t),t}(t),r=An(e,n),a="compact"in n&&n.compact?"_parent":"parent",i="addParent"in n&&n.addParent?JSON.stringify(r,(function(e,t){return e===a?"_":t}),n.spaces):JSON.stringify(r,null,n.spaces),i.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")};var kn,Sn,En=ln,jn=un;function Cn(e,t,n){return(!n&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function zn(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,Sn,kn));var r,i,a,o,s=[];for(r in e)e.hasOwnProperty(r)&&null!==e[r]&&void 0!==e[r]&&(o=t.noQuotesForNativeAttributes&&"string"!=typeof e[r]?"":'"',i=(i=""+e[r]).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),a="attributeNameFn"in t?t.attributeNameFn(r,i,Sn,kn):r,s.push(t.spaces&&t.indentAttributes?Cn(t,n+1,!1):" "),s.push(a+"="+o+("attributeValueFn"in t?t.attributeValueFn(i,r,Sn,kn):i)+o));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&s.push(Cn(t,n,!1)),s.join("")}function On(e,t,n){return kn=e,Sn="xml",t.ignoreDeclaration?"":"<?xml"+zn(e[t.attributesKey],t,n)+"?>"}function Ln(e,t,n){if(t.ignoreInstruction)return"";var r;for(r in e)if(e.hasOwnProperty(r))break;var a="instructionNameFn"in t?t.instructionNameFn(r,e[r],Sn,kn):r;if("object"===i(e[r]))return kn=e,Sn=a,"<?"+a+zn(e[r][t.attributesKey],t,n)+"?>";var o=e[r]?e[r]:"";return"instructionFn"in t&&(o=t.instructionFn(o,r,Sn,kn)),"<?"+a+(o?" "+o:"")+"?>"}function _n(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,Sn,kn):e)+"--\x3e"}function Pn(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,Sn,kn):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function Rn(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,Sn,kn):e)+">"}function Un(e,t){return t.ignoreText?"":(e=(e=(e=""+e).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,Sn,kn):e)}function Bn(e,t,n,r){return e.reduce((function(e,i){var a=Cn(t,n,r&&!e);switch(i.type){case"element":return e+a+function(e,t,n){kn=e,Sn=e.name;var r=[],i="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;r.push("<"+i),e[t.attributesKey]&&r.push(zn(e[t.attributesKey],t,n));var a=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&"preserve"===e[t.attributesKey]["xml:space"];return a||(a="fullTagEmptyElementFn"in t?t.fullTagEmptyElementFn(e.name,e):t.fullTagEmptyElement),a?(r.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(r.push(Bn(e[t.elementsKey],t,n+1)),kn=e,Sn=e.name),r.push(t.spaces&&function(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;default:return!0}return!1}(e,t)?"\n"+Array(n+1).join(t.spaces):""),r.push("</"+i+">")):r.push("/>"),r.join("")}(i,t,n);case"comment":return e+a+_n(i[t.commentKey],t);case"doctype":return e+a+Rn(i[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?a:"")+Pn(i[t.cdataKey],t);case"text":return e+(t.indentText?a:"")+Un(i[t.textKey],t);case"instruction":var o={};return o[i[t.nameKey]]=i[t.attributesKey]?i:i[t.instructionKey],e+(t.indentInstruction?a:"")+Ln(o,t,n)}}),"")}function Vn(e,t,n){var r;for(r in e)if(e.hasOwnProperty(r))switch(r){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:default:return!0}return!1}function Yn(e,t,n,r,a){kn=e,Sn=t;var o="elementNameFn"in n?n.elementNameFn(t,e):t;if(null==e||""===e)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+o+"></"+o+">":"<"+o+"/>";var s=[];if(t){if(s.push("<"+o),"object"!==i(e))return s.push(">"+Un(e,n)+"</"+o+">"),s.join("");e[n.attributesKey]&&s.push(zn(e[n.attributesKey],n,r));var u=Vn(e,n,!0)||e[n.attributesKey]&&"preserve"===e[n.attributesKey]["xml:space"];if(u||(u="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(t,e):n.fullTagEmptyElement),!u)return s.push("/>"),s.join("");s.push(">")}return s.push(Qn(e,n,r+1,!1)),kn=e,Sn=t,t&&s.push((a?Cn(n,r,!1):"")+"</"+o+">"),s.join("")}function Qn(e,t,n,r){var i,a,o,s=[];for(a in e)if(e.hasOwnProperty(a))for(o=jn(e[a])?e[a]:[e[a]],i=0;i<o.length;++i){switch(a){case t.declarationKey:s.push(On(o[i],t,n));break;case t.instructionKey:s.push((t.indentInstruction?Cn(t,n,r):"")+Ln(o[i],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:s.push((t.indentText?Cn(t,n,r):"")+Un(o[i],t));break;case t.cdataKey:s.push((t.indentCdata?Cn(t,n,r):"")+Pn(o[i],t));break;case t.doctypeKey:s.push(Cn(t,n,r)+Rn(o[i],t));break;case t.commentKey:s.push(Cn(t,n,r)+_n(o[i],t));break;default:s.push(Cn(t,n,r)+Yn(o[i],a,t,n,Vn(o[i],t)))}r=r&&!s.length}return s.join("")}var Zn=function(e,t){t=function(e){var t=En.copyOptions(e);return En.ensureFlagExists("ignoreDeclaration",t),En.ensureFlagExists("ignoreInstruction",t),En.ensureFlagExists("ignoreAttributes",t),En.ensureFlagExists("ignoreText",t),En.ensureFlagExists("ignoreComment",t),En.ensureFlagExists("ignoreCdata",t),En.ensureFlagExists("ignoreDoctype",t),En.ensureFlagExists("compact",t),En.ensureFlagExists("indentText",t),En.ensureFlagExists("indentCdata",t),En.ensureFlagExists("indentAttributes",t),En.ensureFlagExists("indentInstruction",t),En.ensureFlagExists("fullTagEmptyElement",t),En.ensureFlagExists("noQuotesForNativeAttributes",t),En.ensureSpacesExists(t),"number"==typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),En.ensureKeyExists("declaration",t),En.ensureKeyExists("instruction",t),En.ensureKeyExists("attributes",t),En.ensureKeyExists("text",t),En.ensureKeyExists("comment",t),En.ensureKeyExists("cdata",t),En.ensureKeyExists("doctype",t),En.ensureKeyExists("type",t),En.ensureKeyExists("name",t),En.ensureKeyExists("elements",t),t}(t);var n=[];return kn=e,Sn="_root_",t.compact?n.push(Qn(e,t,0,!0)):(e[t.declarationKey]&&n.push(On(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(Bn(e[t.elementsKey],t,0,!n.length))),n.join("")};t.js2xml=Zn;var Wn=Zn;t.json2xml=function(e,t){e instanceof r&&(e=e.toString());var n=null;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw new Error("The JSON structure is invalid")}else n=e;return Wn(n,t)}},6346:function(e,t,n){n.r(t),Object.defineProperty(exports,"__esModule",{value:!0}),exports.previewSlide=function(e){var t=e.container,n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["container"]),r=V("div","preview-wrapper"),i=new Tt(n);return r.appendChild(document.createElement("style")).textContent=Tt.styles,r.appendChild(i.$content),r.appendChild(i.$footer),t.appendChild(r),i.prepare((function(){return i.slide.renderSlide(1)})),i},Object.defineProperty(exports,"Slide",{enumerable:!0,get:function(){return r.Slide}}),exports.version=exports.usePlugin=exports.refrigerator=exports.default=exports.addHooks=exports.SlideViewer=exports.DefaultUrl=void 0;var r=require("@netless/slide");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=d(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var m=[],y=function(){for(var e=0;e<20;e++)m[e]="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(87*Math.random());return m.join("")};function v(e){try{return e()}catch(e){console.error(e)}}var b=function(){function e(){h(this,e),this.push=this.addDisposer,this.disposers=new Map}return g(e,[{key:"addDisposer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.genUID();return this.flush(t),this.disposers.set(t,Array.isArray(e)?w(e):e),t}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.genUID(),n=e();return n?this.addDisposer(n,t):t}},{key:"addEventListener",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.genUID();return e.addEventListener(t,n,r),this.addDisposer((function(){return e.removeEventListener(t,n,r)}),i),i}},{key:"setTimeout",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.genUID(),i=window.setTimeout((function(){n.remove(r),e()}),t);return this.addDisposer((function(){return window.clearTimeout(i)}),r)}},{key:"setInterval",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.genUID(),r=window.setInterval(e,t);return this.addDisposer((function(){return window.clearInterval(r)}),n)}},{key:"remove",value:function(e){var t=this.disposers.get(e);return this.disposers.delete(e),t}},{key:"flush",value:function(e){var t=this.remove(e);t&&t()}},{key:"flushAll",value:function(){this.disposers.forEach(v),this.disposers.clear()}},{key:"genUID",value:function(){var e;do{e=y()}while(this.disposers.has(e));return e}}]),e}();function w(e){return function(){return e.forEach(v)}}var M="netless-app-slide",x="https://convertcdn.netless.link/dynamicConvert";exports.DefaultUrl=x;var I=new(function(){function e(){h(this,e),this.threshold=2,this._map=new Map,this._box=new Map,this._queue=[]}return g(e,[{key:"set",value:function(e,t,n){var r=this;return this._map.set(e,t),this._box.set(e,n),this._queue.includes(e)||this._queue.unshift(e),this._refresh(),function(){r.delete(e)}}},{key:"delete",value:function(e){this._map.delete(e),this._box.delete(e),this._queue=this._queue.filter((function(t){return t!==e})),this._refresh()}},{key:"focus",value:function(e){var t=this._queue.indexOf(e);t>=0&&this._queue.splice(t,1),this._queue.unshift(e),this._refresh()}},{key:"_refresh",value:function(){var e,t=this;this._queue.sort((function(e,n){var r,i,a,o;return-((null!==(r=null==(a=t._box.get(e))?void 0:a.zIndex)&&void 0!==r?r:0)-(null!==(i=null==(o=t._box.get(n))?void 0:o.zIndex)&&void 0!==i?i:0))})),this._queue.forEach((function(n,r){!(e=t._map.get(n))||(r<t.threshold?e.unfreeze():e.freeze())}))}}]),e}());exports.addHooks=function(e){e.on("focus",(function(e){I.focus(e.appId)}))},exports.refrigerator=I;var N=function(){function e(){h(this,e),this.a=new Map,this.b=new Set}return g(e,[{key:"emit",value:function(e,t){var n=this.a.get(e);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(t)}catch(e){console.error(e)}}}catch(e){i.e(e)}finally{i.f()}}}},{key:"on",value:function(e,t){var n=this,r=this.a.get(e);if(r||(r=new Set,this.a.set(e,r)),r.add(t),1===r.size){var i,a=l(this.b);try{for(a.s();!(i=a.n()).done;){i.value.e(e)}}catch(e){a.e(e)}finally{a.f()}}return function(){n.off(e,t)}}},{key:"once",value:function(e,t){var n=this,r=function(r){return n.off(e,t),t(r)};return this.c=this.c||new WeakMap,this.c.set(t,r),this.on(e,r)}},{key:"off",value:function(e,t){var n,r=this.a.get(e);if(r){var i=r.delete((null==(n=this.c)?void 0:n.get(t))||t);if(r.size<=0){this.a.delete(e);var a,o=l(this.b);try{for(o.s();!(a=o.n()).done;){a.value.d(e)}}catch(e){o.e(e)}finally{o.f()}}return i}return!1}},{key:"clear",value:function(e){var t;e?null==(t=this.a.get(e))||t.clear():this.a.clear()}},{key:"count",value:function(e){var t;if(e)return(null==(t=this.a.get(e))?void 0:t.size)||0;var n,r=0,i=l(this.a.values());try{for(i.s();!(n=i.n()).done;){r+=n.value.size}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"remit",value:function(e,t){var n,r,i=this,a={e:function(n){if(n===e)try{r=t(i)}catch(e){console.error(e)}},d:function(t){if(r&&(!t||t===e))try{r()}catch(e){console.error(e)}}};return this.b.add(a),null!=(n=this.a.get(e))&&n.size&&a.e(e),function(){i.b.delete(a),a.d()}}},{key:"destroy",value:function(){this.clear();var e,t=l(this.b);try{for(t.s();!(e=t.n()).done;){e.value.d()}}catch(e){t.e(e)}finally{t.f()}this.b.clear()}}]),e}(),T={exports:{}},D={exports:{}},A=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))},k=Array.prototype.concat,S=Array.prototype.slice,E=D.exports=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];A(i)?t=k.call(t,S.call(i)):t.push(i)}return t};E.wrap=function(e){return function(){return e(E(arguments))}};var j={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},C=D.exports,z=Object.hasOwnProperty,O=Object.create(null);for(var L in j)z.call(j,L)&&(O[j[L]]=L);var _=T.exports={to:{},get:{}};function P(e,t,n){return Math.min(Math.max(t,e),n)}function R(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}function U(){}function B(e){return document.createElement(e)}function V(e,t){var n=B(e);return function(e,t){e.className=Q(t)}(n,t),n}function Y(e,t){return e.appendChild(t)}function Q(e){return"".concat(M,"-").concat(e)}function Z(e,t){if("object"==c(e)&&null!==e)return e[t]}function W(){var e;return[new Promise((function(t){e=t})),e]}function G(e){var t=e.room,n=e.displayer;return t?function(){return t.calibrationTimestamp}:n?function(){return n.beginTimestamp+n.progressTime}:function(){return Date.now()}}function F(e){try{var t=window.getComputedStyle(e).backgroundColor;if("rgba(0, 0, 0, 0)"!==t&&"transparent"!==t)return t=function(e){var t=T.exports.get(e);if(t&&"rgb"===t.model){var n=t.value,r=(((255&Math.round(n[0]))<<16)+((255&Math.round(n[1]))<<8)+(255&Math.round(n[2]))).toString(16);return"#"+"000000".substring(r.length)+r}return e}(t),console.log("[Slide] guess bg color:",t),t;if(e.parentElement)return F(e.parentElement)}catch(e){}return"#ffffff"}function H(e,t){return"".concat(function(e){return e.endsWith("/")?e.slice(0,-1):e}(t||x),"/").concat(e)}function $(){return($=u(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.taskId,r=t.url,i=H(n,r),a="".concat(i,"/preview/1.png"),o="".concat(i,"/jsonOutput/slide-1.json"),s=new Promise((function(e){var t=new Image;t.onload=function(){return e(t)},t.onerror=function(){return e(null)},t.src=a})),u=fetch(o).then((function(e){return e.json()})),e.next=4,s;case 4:return e.t0=e.sent,e.next=7,u;case 7:return e.t1=e.sent,e.abrupt("return",{preview:e.t0,slide:e.t1});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}_.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=_.get.hsl(e),n="hsl";break;case"hwb":t=_.get.hwb(e),n="hwb";break;default:t=_.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},_.get.rgb=function(e){if(!e)return null;var t,n,r,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=t[2],t=t[1],n=0;n<3;n++){var a=2*n;i[n]=parseInt(t.slice(a,a+2),16)}r&&(i[3]=parseInt(r,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(t=t[1])[3],n=0;n<3;n++)i[n]=parseInt(t[n]+t[n],16);r&&(i[3]=parseInt(r+r,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)i[n]=parseInt(t[n+1],0);t[4]&&(t[5]?i[3]=.01*parseFloat(t[4]):i[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:z.call(j,t[1])?((i=j[t[1]])[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(t[5]?i[3]=.01*parseFloat(t[4]):i[3]=parseFloat(t[4]))}for(n=0;n<3;n++)i[n]=P(i[n],0,255);return i[3]=P(i[3],0,1),i},_.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,P(parseFloat(t[2]),0,100),P(parseFloat(t[3]),0,100),P(isNaN(n)?1:n,0,1)]}return null},_.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,P(parseFloat(t[2]),0,100),P(parseFloat(t[3]),0,100),P(isNaN(n)?1:n,0,1)]}return null},_.to.hex=function(){var e=C(arguments);return"#"+R(e[0])+R(e[1])+R(e[2])+(e[3]<1?R(Math.round(255*e[3])):"")},_.to.rgb=function(){var e=C(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},_.to.rgb.percent=function(){var e=C(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},_.to.hsl=function(){var e=C(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},_.to.hwb=function(){var e=C(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},_.to.keyword=function(e){return O[e.slice(0,3)]};function X(){var e=U,t=U,n=U,r=!1,i=!1,a=0,o=0,s=V("div","footer"),u=V("button","btn-sidebar");u.classList.add(Q("footer-btn")),u.appendChild(function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-sidebar")),n.setAttribute("viewBox","0 0 64 64");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z"),n.appendChild(r),n}(M)),u.onclick=function(){r||t()},u.style.display="none",s.appendChild(u);var c=V("div","page-jumps"),l=V("button","btn-page-back");l.classList.add(Q("footer-btn")),l.appendChild(function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-arrow-left")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z"),n.appendChild(r),n}(M)),l.onclick=function(){r||e(a-1)},c.appendChild(l);var d=V("button","btn-page-play");d.classList.add(Q("footer-btn")),d.appendChild(function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-play")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z"),n.appendChild(r),n}(M)),d.appendChild(function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-pause")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z"),n.appendChild(r),n}(M));var p=0;d.onclick=function(){r||(d.classList.add(Q("footer-btn-playing")),n(),clearTimeout(p),p=window.setTimeout((function(){d.classList.remove(Q("footer-btn-playing"))}),500))},c.appendChild(d);var h=V("button","btn-page-next");h.classList.add(Q("footer-btn")),h.appendChild(function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-arrow-right")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z"),n.appendChild(r),n}(M)),h.onclick=function(){r||e(a+1)},c.appendChild(h);var f=V("div","page-number"),g=V("input","page-number-input");g.value=String(a+1),g.onchange=function(){r||g.value&&e(Number(g.value)-1)};var m=V("span","total-page");m.textContent=" / ",f.appendChild(g),f.appendChild(m),s.appendChild(c),s.appendChild(f);var y=Q("readonly"),v=U,b=function(e){if(e<99){x.style.display="block",w.style.display="none";var t=x.querySelector("[data-id]");t&&(t.textContent=e.toString().padStart(2,"0"))}else x.style.display="none",w.style.display="block"},w=function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-save")),n.setAttribute("viewBox","0 0 448 512");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M224 256c-35.2 0-64 28.8-64 64c0 35.2 28.8 64 64 64c35.2 0 64-28.8 64-64C288 284.8 259.2 256 224 256zM433.1 129.1l-83.9-83.9C341.1 37.06 328.8 32 316.1 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V163.9C448 151.2 442.9 138.9 433.1 129.1zM128 80h144V160H128V80zM400 416c0 8.836-7.164 16-16 16H64c-8.836 0-16-7.164-16-16V96c0-8.838 7.164-16 16-16h16v104c0 13.25 10.75 24 24 24h192C309.3 208 320 197.3 320 184V83.88l78.25 78.25C399.4 163.2 400 164.8 400 166.3V416z"),n.appendChild(r),n}(M),x=function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-spinner")),n.setAttribute("viewBox","0 0 512 512");var r=document.createElementNS(t,"path");r.setAttribute("fill","currentColor"),r.setAttribute("d","M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z");var i=document.createElementNS(t,"animateTransform");i.setAttribute("attributeName","transform"),i.setAttribute("attributeType","xml"),i.setAttribute("type","rotate"),i.setAttribute("from","0 256 256"),i.setAttribute("to","360 256 256"),i.setAttribute("begin","0s"),i.setAttribute("dur","2s"),i.setAttribute("fill","freeze"),i.setAttribute("repeatCount","indefinite"),r.appendChild(i);var a=document.createElementNS(t,"text");return a.setAttribute("x","125"),a.setAttribute("y","345"),a.setAttribute("data-id","progress"),a.style.fontSize="246px",a.textContent="20",n.appendChild(a),n.appendChild(r),n}(M);x.style.display="none";var I=V("button","footer-btn");return I.appendChild(w),I.onclick=function(){v(b)},I.appendChild(x),{$footer:s,$pageNumberInput:g,set_readonly:function(e){r!==e&&(r=e,s.classList.toggle(y,r),g.disabled=r)},set_sidebar:function(e){i!==e&&(i=e,u.style.display=i?"":"none")},set_page_index:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t||a!==e)&&(a=e,g.value=String(a+1))},set_page_count:function(e){o!==e&&(o=e,m.textContent=" / ".concat(o))},on_new_page_index:function(t){e=t},on_toggle_preview:function(e){t=e},on_play:function(e){n=e},on_save_to_pdf:function(e){v=e}}}var J=("undefined"==typeof window?"undefined":c(window))<"u",K=J&&!("onscroll"in window)||("undefined"==typeof navigator?"undefined":c(navigator))<"u"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),q=J&&"IntersectionObserver"in window,ee=J&&"classList"in document.createElement("p"),te=J&&window.devicePixelRatio>1,ne={elements_selector:".lazy",container:K||J?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},re=function(e){return Object.assign({},ne,e)},ie=function(e,t){var n,r="LazyLoad::Initialized",i=new e(t);try{n=new CustomEvent(r,{detail:{instance:i}})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,{instance:i})}window.dispatchEvent(n)},ae="src",oe="srcset",se="sizes",ue="poster",ce="llOriginalAttrs",le="data",de="loading",pe="loaded",he="applied",fe="error",ge="native",me="data-",ye="ll-status",ve=function(e,t){return e.getAttribute(me+t)},be=function(e){return ve(e,ye)},we=function(e,t){return function(e,t,n){var r=me+t;null!==n?e.setAttribute(r,n):e.removeAttribute(r)}(e,ye,t)},Me=function(e){return we(e,null)},xe=function(e){return null===be(e)},Ie=function(e){return be(e)===ge},Ne=[de,pe,he,fe],Te=function(e,t,n,r){if(e){if(void 0!==r)return void e(t,n,r);if(void 0!==n)return void e(t,n);e(t)}},De=function(e,t){ee?e.classList.add(t):e.className+=(e.className?" ":"")+t},Ae=function(e,t){ee?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},ke=function(e){return e.llTempImage},Se=function(e,t){if(t){var n=t._observer;!n||n.unobserve(e)}},Ee=function(e,t){!e||(e.loadingCount+=t)},je=function(e,t){!e||(e.toLoadCount=t)},Ce=function(e){for(var t,n=[],r=0;t=e.children[r];r+=1)"SOURCE"===t.tagName&&n.push(t);return n},ze=function(e,t){var n=e.parentNode;n&&"PICTURE"===n.tagName&&Ce(n).forEach(t)},Oe=function(e,t){Ce(e).forEach(t)},Le=[ae],_e=[ae,ue],Pe=[ae,oe,se],Re=[le],Ue=function(e){return!!e[ce]},Be=function(e){return e[ce]},Ve=function(e){return delete e[ce]},Ye=function(e,t){if(!Ue(e)){var n={};t.forEach((function(t){n[t]=e.getAttribute(t)})),e[ce]=n}},Qe=function(e,t){if(Ue(e)){var n=Be(e);t.forEach((function(t){!function(e,t,n){n?e.setAttribute(t,n):e.removeAttribute(t)}(e,t,n[t])}))}},Ze=function(e,t,n){De(e,t.class_applied),we(e,he),n&&(t.unobserve_completed&&Se(e,t),Te(t.callback_applied,e,n))},We=function(e,t,n){De(e,t.class_loading),we(e,de),n&&(Ee(n,1),Te(t.callback_loading,e,n))},Ge=function(e,t,n){!n||e.setAttribute(t,n)},Fe=function(e,t){Ge(e,se,ve(e,t.data_sizes)),Ge(e,oe,ve(e,t.data_srcset)),Ge(e,ae,ve(e,t.data_src))},He={IMG:function(e,t){ze(e,(function(e){Ye(e,Pe),Fe(e,t)})),Ye(e,Pe),Fe(e,t)},IFRAME:function(e,t){Ye(e,Le),Ge(e,ae,ve(e,t.data_src))},VIDEO:function(e,t){Oe(e,(function(e){Ye(e,Le),Ge(e,ae,ve(e,t.data_src))})),Ye(e,_e),Ge(e,ue,ve(e,t.data_poster)),Ge(e,ae,ve(e,t.data_src)),e.load()},OBJECT:function(e,t){Ye(e,Re),Ge(e,le,ve(e,t.data_src))}},$e=["IMG","IFRAME","VIDEO","OBJECT"],Xe=function(e,t){t&&!function(e){return e.loadingCount>0}(t)&&!function(e){return e.toLoadCount>0}(t)&&Te(e.callback_finish,t)},Je=function(e,t,n){e.addEventListener(t,n),e.llEvLisnrs[t]=n},Ke=function(e,t,n){e.removeEventListener(t,n)},qe=function(e){return!!e.llEvLisnrs},et=function(e){if(qe(e)){var t=e.llEvLisnrs;for(var n in t){var r=t[n];Ke(e,n,r)}delete e.llEvLisnrs}},tt=function(e,t,n){(function(e){delete e.llTempImage})(e),Ee(n,-1),function(e){!e||(e.toLoadCount-=1)}(n),Ae(e,t.class_loading),t.unobserve_completed&&Se(e,n)},nt=function(e,t,n){var r=ke(e)||e;qe(r)||function(e,t,n){qe(e)||(e.llEvLisnrs={});var r="VIDEO"===e.tagName?"loadeddata":"load";Je(e,r,t),Je(e,"error",n)}(r,(function(i){(function(e,t,n,r){var i=Ie(t);tt(t,n,r),De(t,n.class_loaded),we(t,pe),Te(n.callback_loaded,t,r),i||Xe(n,r)})(0,e,t,n),et(r)}),(function(i){(function(e,t,n,r){var i=Ie(t);tt(t,n,r),De(t,n.class_error),we(t,fe),Te(n.callback_error,t,r),n.restore_on_error&&Qe(t,Pe),i||Xe(n,r)})(0,e,t,n),et(r)}))},rt=function(e,t,n){(function(e){e.llTempImage=document.createElement("IMG")})(e),nt(e,t,n),function(e){Ue(e)||(e[ce]={backgroundImage:e.style.backgroundImage})}(e),function(e,t,n){var r=ve(e,t.data_bg),i=ve(e,t.data_bg_hidpi),a=te&&i?i:r;!a||(e.style.backgroundImage='url("'.concat(a,'")'),ke(e).setAttribute(ae,a),We(e,t,n))}(e,t,n),function(e,t,n){var r=ve(e,t.data_bg_multi),i=ve(e,t.data_bg_multi_hidpi),a=te&&i?i:r;!a||(e.style.backgroundImage=a,Ze(e,t,n))}(e,t,n),function(e,t,n){var r=ve(e,t.data_bg_set);if(r){var i=r.split("|"),a=i.map((function(e){return"image-set(".concat(e,")")}));e.style.backgroundImage=a.join(),""===e.style.backgroundImage&&(a=i.map((function(e){return"-webkit-image-set(".concat(e,")")})),e.style.backgroundImage=a.join()),Ze(e,t,n)}}(e,t,n)},it=function(e,t,n){nt(e,t,n),function(e,t,n){var r=He[e.tagName];!r||(r(e,t),We(e,t,n))}(e,t,n)},at=function(e,t,n){!function(e){return $e.indexOf(e.tagName)>-1}(e)?rt(e,t,n):it(e,t,n)},ot=function(e,t,n){e.setAttribute("loading","lazy"),nt(e,t,n),function(e,t){var n=He[e.tagName];!n||n(e,t)}(e,t),we(e,ge)},st=function(e){e.removeAttribute(ae),e.removeAttribute(oe),e.removeAttribute(se)},ut=function(e){ze(e,(function(e){Qe(e,Pe)})),Qe(e,Pe)},ct={IMG:ut,IFRAME:function(e){Qe(e,Le)},VIDEO:function(e){Oe(e,(function(e){Qe(e,Le)})),Qe(e,_e),e.load()},OBJECT:function(e){Qe(e,Re)}},lt=function(e){var t=ct[e.tagName];t?t(e):function(e){if(Ue(e)){var t=Be(e);e.style.backgroundImage=t.backgroundImage}}(e)},dt=function(e,t){lt(e),function(e,t){xe(e)||Ie(e)||(Ae(e,t.class_entered),Ae(e,t.class_exited),Ae(e,t.class_applied),Ae(e,t.class_loading),Ae(e,t.class_loaded),Ae(e,t.class_error))}(e,t),Me(e),Ve(e)},pt=function(e,t,n,r){!n.cancel_on_exit||!function(e){return be(e)===de}(e)||"IMG"===e.tagName&&(et(e),function(e){ze(e,(function(e){st(e)})),st(e)}(e),ut(e),Ae(e,n.class_loading),Ee(r,-1),Me(e),Te(n.callback_cancel,e,t,r))},ht=function(e,t,n,r){var i=function(e){return Ne.indexOf(be(e))>=0}(e);we(e,"entered"),De(e,n.class_entered),Ae(e,n.class_exited),function(e,t,n){t.unobserve_entered&&Se(e,n)}(e,n,r),Te(n.callback_enter,e,t,r),!i&&at(e,n,r)},ft=["IMG","IFRAME","VIDEO"],gt=function(e){return e.use_native&&"loading"in HTMLImageElement.prototype},mt=function(e,t,n){e.forEach((function(e){return function(e){return e.isIntersecting||e.intersectionRatio>0}(e)?ht(e.target,e,t,n):function(e,t,n,r){xe(e)||(De(e,n.class_exited),pt(e,t,n,r),Te(n.callback_exit,e,t,r))}(e.target,e,t,n)}))},yt=function(e,t){!q||gt(e)||(t._observer=new IntersectionObserver((function(n){mt(n,e,t)}),function(e){return{root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}}(e)))},vt=function(e){return Array.prototype.slice.call(e)},bt=function(e){return e.container.querySelectorAll(e.elements_selector)},wt=function(e){return function(e){return be(e)===fe}(e)},Mt=function(e,t){return function(e){return vt(e).filter(xe)}(e||bt(t))},xt=function(e,t){(function(e){return vt(e).filter(wt)})(bt(e)).forEach((function(t){Ae(t,e.class_error),Me(t)})),t.update()},It=function(e,t){var n=re(e);this._settings=n,this.loadingCount=0,yt(n,this),function(e,t){!J||(t._onlineHandler=function(){xt(e,t)},window.addEventListener("online",t._onlineHandler))}(n,this),this.update(t)};It.prototype={update:function(e){var t=this._settings,n=Mt(e,t);je(this,n.length),!K&&q?gt(t)?function(e,t,n){e.forEach((function(e){-1!==ft.indexOf(e.tagName)&&ot(e,t,n)})),je(n,0)}(n,t,this):function(e,t){(function(e){e.disconnect()})(e),function(e,t){t.forEach((function(t){e.observe(t)}))}(e,t)}(this._observer,n):this.loadAll(n)},destroy:function(){var e;this._observer&&this._observer.disconnect(),e=this,!J||window.removeEventListener("online",e._onlineHandler),bt(this._settings).forEach((function(e){Ve(e)})),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,n=this._settings;Mt(e,n).forEach((function(e){Se(e,t),at(e,n,t)}))},restoreAll:function(){var e=this._settings;bt(e).forEach((function(t){dt(t,e)}))}},It.load=function(e,t){var n=re(t);at(e,n)},It.resetStatus=function(e){Me(e)},J&&function(e,t){if(t)if(t.length)for(var n,r=0;n=t[r];r+=1)ie(e,n);else ie(e,t)}(It,window.lazyLoadOptions);var Nt=function(){function e(t){var s=this;h(this,e),this.sideEffect=new b,this.events=new N,this.$slide=V("div","slide"),this.$overlay=V("div","overlay"),this.sidebar=function(){var e=U,t=!1,n=!1,r=!1,i=[],a=0,o=Q("readonly"),s=Q("preview-active"),u=V("div","content"),c=V("div","preview-mask");c.onclick=function(e){n||e.target===c&&p(!1)},Y(u,c);var l,d=V("div","preview");function p(e){r!==e&&(r=e,u.classList.toggle(s,r),r&&!l&&(l=new It({container:d,elements_selector:".".concat(Q("preview-page>img"))})))}return d.classList.add(Q("tele-fancy-scrollbar")),d.onclick=function(t){var r;if(!n){var i=null==(r=t.target.dataset)?void 0:r.pageIndex;i&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e(Number(i)),p(!1))}},Y(u,d),{$content:u,$preview:d,set_readonly:function(e){n!==e&&(n=e,u.classList.toggle(o,n))},set_active:p,get_active:function(){return r},set_pages:function(e){if(i!==e){i=e;var n=Q("preview-page"),r=Q("preview-page-name");i.forEach((function(e,t){var i=String(t),a=B("a");a.className=n+" "+Q("preview-page-".concat(t)),a.href="#",a.dataset.pageIndex=i;var o=B("span");o.className=r,o.textContent=String(t+1),o.dataset.pageIndex=i;var s=B("img");s.width=e.width,s.height=e.height,s.alt="page-".concat(t),s.dataset.src=e.thumbnail,s.dataset.pageIndex=i,Y(a,s),Y(a,o),Y(d,a)})),t||null==l||l.update()}},on_new_page_index:function(t){e=t},set_page_index:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||a!==e){a=e;var t=d.querySelector(".".concat(Q("preview-page-".concat(a))));t&&d.scrollTo({top:t.offsetTop-16})}},destroy:function(){t=!0,null==l||l.destroy()}}}(),this.footer=X(),this._getWhiteSnapshot=null,this._slideTitle="",this._ready=!1,this._slideCount=0,this._destroyed=!1,this._isFrozen=!1,this._cachedIsFrozen=!1,this.onPlay=function(){s.slide.nextStep()},this.onNewPageIndex=function(e){s._ready&&e>=0&&e<s._slideCount?s.slide.renderSlide(e+1):s.setPage(s.slide.slideState.currentSlideIndex)},this.onTogglePreview=function(){s.sidebar.set_active(!s.sidebar.get_active())},this.toPdf=function(){var e=u(regeneratorRuntime.mark((function e(t){var r,i,a,o,u,c,l,d,p,h,f,g,m,y,v,b,w,M,x,I,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=document.createElement("canvas"),i=r.getContext("2d"),a=s.slide,o=a.slideCount,u=a.width,c=a.height,l=Math.floor(u),d=Math.floor(c),l>1920&&(l=1920,d=Math.floor(c*l/u)),d>1920&&(d=1920,l=Math.floor(u*d/c)),r.width=l,r.height=d,(p=document.createElement("canvas")).width=u,p.height=c,(h=p.getContext("2d"))&&s._getWhiteSnapshot&&i){e.next=8;break}return e.abrupt("return",null);case 8:return f=l>d?"l":"p",e.next=11,n.e(736).then(n.t.bind(n,88877,19));case 11:g=e.sent,m=g.jsPDF,y=new m({format:[l,d],orientation:f,compress:!0}),v=1;case 15:if(!(v<=o)){e.next=33;break}return e.next=18,s.slide.snapshotWithTimingEnd(v);case 18:if(!(b=e.sent)){e.next=21;break}return e.delegateYield(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.createElement("img")).src=b,e.next=4,new Promise((function(e){return t.onload=e}));case 4:i.drawImage(t,0,0,l,d);case 5:case"end":return e.stop()}}),e)}))(),"t0",21);case 21:return h.clearRect(0,0,u,c),s._getWhiteSnapshot(v,p,h),e.prev=22,e.delegateYield(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.toDataURL("image/png"),(n=document.createElement("img")).src=t,e.next=4,new Promise((function(e){return n.onload=e}));case 4:i.drawImage(n,0,0,l,d);case 5:case"end":return e.stop()}}),e)}))(),"t1",24);case 24:e.next=28;break;case 26:e.prev=26,e.t2=e.catch(22);case 28:w=r.toDataURL("image/jpeg",.6),v>1&&y.addPage(),y.addImage(w,"JPEG",0,0,l,d,"","FAST"),i.clearRect(0,0,l,d),t(Math.ceil(v/o*100));case 30:v++,e.next=15;break;case 33:M=y.output("arraybuffer"),x=new Blob([M]),I=URL.createObjectURL(x),(N=document.createElement("a")).setAttribute("href",I),N.setAttribute("download","".concat(s._slideTitle||"snapshot",".pdf")),N.style.display="none",document.body.appendChild(N),N.click(),document.body.removeChild(N),window.postMessage({type:"@app-slide/_download_pdf_",buf:M});case 35:case"end":return e.stop()}}),e,null,[[22,26]])})));return function(t){return e.apply(this,arguments)}}(),this.$content=this.sidebar.$content,this.$footer=this.footer.$footer,Y(this.$content,this.$slide),Y(this.$content,this.$overlay),this.sidebar.on_new_page_index(this.onNewPageIndex),this.footer.on_new_page_index(this.onNewPageIndex),this.footer.on_toggle_preview(this.onTogglePreview),this.footer.on_play(this.onPlay),this.footer.on_save_to_pdf(this.toPdf),this.sideEffect.push(this.sidebar.destroy),this.sideEffect.push((function(){return s.slide.destroy()})),this.sideEffect.push((function(){s.$content.parentElement&&s.$content.remove(),s.$footer.parentElement&&s.$footer.remove(),s.$slide.parentElement&&s.$slide.remove()})),this.sideEffect.push(function(e){if(("undefined"==typeof document?"undefined":c(document))<"u"){var t=function(){return e("visible"===document.visibilityState)};return document.addEventListener("visibilitychange",t),function(){return document.removeEventListener("visibilitychange",t)}}return U}((function(e){s._destroyed||(e?s._cachedIsFrozen||s.unfreeze():(s._cachedIsFrozen=s._isFrozen,s.freeze()))})));var l=o(W(),2),d=l[0],p=l[1];this._infoPromise=d,e.fetchSlideInfo(t).then((function(e){var n=e.preview,r=e.slide;if(!s._destroyed){if(s._slideCount=r.slideCount,n){var i=t.taskId,a=t.url,o=r.slideCount,u=n.width,c=n.height,l=H(i,a),d=Array.from({length:o},(function(e,t){return{width:u,height:c,thumbnail:"".concat(l,"/preview/").concat(t+1,".png")}}));s.sidebar.set_pages(d),s.footer.set_sidebar(!0)}s.footer.set_page_count(r.slideCount),p(r)}})).catch((function(e){console.log("[Slide] fetch slide info error"),console.error(e),s.events.emit("prepareError",e)}));var f=o(W(),2),g=f[0],m=f[1];this._readyPromise=g,this.slide=new r.Slide(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({anchor:this.$slide,mode:"local",interactive:!0,enableGlobalClick:!0,useLocalCache:!0},t)),this.slide.setResource(t.taskId,t.url||x),this.slide.on("slideChange",(function(e){s._destroyed||s.setPage(e)})),this.slide.on("renderEnd",(function(){s._ready?s.$overlay.style.opacity="":setTimeout((function(){s._ready=!0,m()}),1e3)})),this.slide.on("renderError",(function(e){s._destroyed||e.error&&(console.error(e.error),s.$overlay.textContent="Error on slide.index=".concat(e.index,": ").concat(e.error.message),s.$overlay.style.opacity="1",s.events.emit("renderError",e))})),this.ready((function(){s._isFrozen&&s.freeze()}))}return g(e,[{key:"prepare",value:function(e){return this._infoPromise.then(e)}},{key:"attachWhiteSnapshot",value:function(e){this._getWhiteSnapshot=e}},{key:"setSlideTitle",value:function(e){this._slideTitle=e}},{key:"ready",value:function(e){return this._readyPromise.then(e)}},{key:"destroy",value:function(){this._destroyed=!0,this.sideEffect.flushAll()}},{key:"setReadonly",value:function(e){this.slide.setInteractive(!e),this.sidebar.set_readonly(e),this.footer.set_readonly(e)}},{key:"setPage",value:function(e){this.sidebar.set_page_index(e-1,!0),this.footer.set_page_index(e-1,!0)}},{key:"freeze",value:function(){this._destroyed||(this._isFrozen=!0,this._ready&&(this.slide.frozen(),this.events.emit("freeze")))}},{key:"unfreeze",value:function(){this._destroyed||(this._isFrozen=!1,this._ready&&(this.slide.release(),this.events.emit("unfreeze")))}}]),e}(),Tt=Nt;exports.SlideViewer=Tt,Tt.styles='.netless-app-slide-tele-fancy-scrollbar{overscroll-behavior:contain;overflow:auto;overflow-y:scroll;overflow-y:overlay;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar;scrollbar-width:auto}.netless-app-slide-tele-fancy-scrollbar::-webkit-scrollbar{height:8px;width:8px}.netless-app-slide-tele-fancy-scrollbar::-webkit-scrollbar-track{background-color:transparent}.netless-app-slide-tele-fancy-scrollbar::-webkit-scrollbar-thumb{background-color:#444e601a;background-color:transparent;border-radius:4px;transition:background-color .4s}.netless-app-slide-tele-fancy-scrollbar:hover::-webkit-scrollbar-thumb{background-color:#444e601a}.netless-app-slide-tele-fancy-scrollbar::-webkit-scrollbar-thumb:hover{background-color:#444e6033}.netless-app-slide-tele-fancy-scrollbar::-webkit-scrollbar-thumb:active{background-color:#444e6033}.netless-app-slide-tele-fancy-scrollbar::-webkit-scrollbar-thumb:vertical{min-height:50px}.netless-app-slide-tele-fancy-scrollbar::-webkit-scrollbar-thumb:horizontal{min-width:50px}.netless-app-slide-content{position:relative;height:100%;overflow:hidden}.netless-app-slide-slide{width:100%;height:100%;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-slide-preview-mask{display:none;position:absolute;z-index:10200;top:0;left:0;width:100%;height:100%}.netless-app-slide-preview{display:flex;flex-direction:column;align-items:center;position:absolute;z-index:10300;top:0;left:0;width:33%;max-width:200px;height:100%;padding-top:10px;transform:translate(-100%);background:rgba(237,237,240,.9);box-shadow:inset -1px 0 #0000001c;transition:transform .4s;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-slide-preview-active .netless-app-slide-preview-mask{display:block}.netless-app-slide-preview-active .netless-app-slide-preview{transform:translate(0)}.netless-app-slide-preview-page{position:relative;display:block;width:55%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border:7px solid transparent;border-radius:4px;transition:border-color .3s;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-slide-preview-page:hover,.netless-app-slide-preview-page.netless-app-slide-preview-page-active{border-color:#444e601a}.netless-app-slide-preview-page>img{width:100%;height:auto;box-sizing:border-box;border:1px solid rgba(0,0,0,.5);border-radius:1px;background-color:#fff;box-shadow:0 2px 8px #0000004d}.netless-app-slide-preview-page-name{position:absolute;top:1px;left:-10px;transform:translate(-100%);text-align:right;font-size:12px;color:#5f5f5f;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-slide-overlay{display:flex;align-items:center;justify-content:center;position:absolute;z-index:10100;top:0;left:0;width:100%;height:100%;background:rgba(255,0,0,.25);transition:opacity .3s;opacity:0;pointer-events:none}.netless-app-slide-footer{box-sizing:border-box;height:26px;display:flex;align-items:center;padding:0 16px;border-top:1px solid #eeeef7;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.netless-app-slide-float-footer{width:100%;min-height:26px;position:absolute;left:0;bottom:0;z-index:2000;background:rgba(249,249,252,.9);transition:opacity .4s}.netless-app-slide-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:1px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-slide-footer-btn:hover{background:rgba(237,237,240,.9)}@media (hover: none){.netless-app-slide-footer-btn:hover{background:transparent!important}}.netless-app-slide-footer-btn>svg{width:100%;height:100%}.netless-app-slide-footer-btn>svg:nth-of-type(2){display:none}.netless-app-slide-footer-btn.netless-app-slide-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-slide-footer-btn.netless-app-slide-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-slide-footer-btn~.netless-app-slide-footer-btn{margin-left:15px}.netless-app-slide-page-jumps{flex:1;display:flex;justify-content:center;align-items:center}.netless-app-slide-page-number{display:flex;align-items:center;height:26px;margin-left:auto;font-size:13px;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;word-break:keep-all;font-variant-numeric:tabular-nums}.netless-app-slide-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 .5em 0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";background:transparent;transition:background .4s;font-variant-numeric:tabular-nums;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-slide-page-number-input:hover,.netless-app-slide-page-number-input:focus,.netless-app-slide-page-number-input:active{user-select:text;background:#fff;box-shadow:#63636333 0 2px 8px}.netless-app-slide-readonly .netless-app-slide-footer-btn{cursor:not-allowed}.netless-app-slide-readonly .netless-app-slide-footer-btn:hover{background:transparent}.netless-app-slide-readonly .netless-app-slide-page-number-input{cursor:not-allowed}.netless-app-slide-readonly .netless-app-slide-page-number-input:hover,.netless-app-slide-readonly .netless-app-slide-page-number-input:focus,.netless-app-slide-readonly .netless-app-slide-page-number-input:active{background:transparent;box-shadow:none}.netless-app-slide-readonly .netless-app-slide-page-number-input:disabled{color:inherit}.netless-app-slide-readonly.netless-app-slide-float-footer{display:none}.telebox-color-scheme-dark .netless-app-slide-page-number-input:active,.telebox-color-scheme-dark .netless-app-slide-page-number-input:focus,.telebox-color-scheme-dark .netless-app-slide-page-number-input:hover{color:currentColor;background:#25282e}.telebox-color-scheme-dark .netless-app-slide-footer{border-top:none}.telebox-color-scheme-dark .netless-app-slide-footer-btn:hover{background:#212126}.telebox-color-scheme-dark .netless-app-slide-preview{background:rgba(50,50,50,.9)}.netless-app-slide-preview-wrapper{width:100%;height:100%;overflow:hidden;display:flex;flex-flow:column nowrap}.netless-app-slide-preview-wrapper .netless-app-slide-content{flex:1}.netless-app-slide-preview-wrapper .netless-app-slide-footer{flex-shrink:0}\n',Tt.fetchSlideInfo=function(e){return $.apply(this,arguments)};var Dt=function(){function e(t){var n=this;h(this,e),this.context=t,this.info=function(t){e.roomLogger&&n.context?e.roomLogger.info(t+" (".concat(n.context.appId,")")):n.context?console.debug(t+" (".concat(n.context.appId,")")):console.debug(t)},t&&(e.active.add(t.appId),e.roomLogger=function(e){return e.displayer.logger}(t))}return g(e,[{key:"destroy",value:function(){this.context&&e.active.delete(this.context.appId),0===e.active.size&&(e.roomLogger=null)}}]),e}();function At(e){var t=e.context,n=e.storage,r=e.viewer,i=e.sideEffect,a=e.logger,o=a.info.bind(a),s=null;r.prepare((function(e){var a=e.width,l=e.height,d=e.slideCount;t.destroyed||(a&&t.box.setStageRatio(l/a),(s=t.createWhiteBoardView({size:d})).setBaseRect({width:a,height:l}),r.setSlideTitle(t.box.title),r.attachWhiteSnapshot((function(e,t,n){if(!s)return null;var r=s.pageState.pages[e-1];t.width=s.view.size.width,t.height=s.view.size.height,s.view.screenshotToCanvas(n,r,s.view.size.width,s.view.size.height,{centerX:0,centerY:0,scale:s.view.camera.scale})})),function(){if(n.state.state)o("[Slide] restore "+c()),u.setSlideState(n.state.state);else if(t.isAddApp)o("[Slide] kick start"),u.renderSlide(1);else{o("[Slide] wait for restore");var e=i.add((function(){var e=setInterval((function(){n.state.state||(o("[Slide] timeout"),u.renderSlide(1))}),15e3);return function(){return clearInterval(e)}})),r=i.push(n.on("stateChanged",(function(){n.state.state&&(o("[Slide] restore "+c()),u.setSlideState(n.state.state),i.flush(r),i.flush(e))})))}}())}));var u=r.slide;function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.state;return JSON.stringify(e)}u.on("stateChange",(function(){t.isWritable&&n.setState({state:u.slideState})})),u.on("syncDispatch",(function(e){t.isWritable&&(o("[Slide] dispatch "+c(Z(e,"uuid"))),t.dispatchMagixEvent("syncDispatch",e))})),i.push(t.addMagixEventListener("syncDispatch",(function(e){var t=e.payload;o("[Slide] receive "+c(Z(t,"uuid"))),u.emit("syncReceive",t)}),{fireSelfEventAfterCommit:!0})),u.on("slideChange",(function(e){t.isWritable&&s&&(o("[Slide] page to "+e),s.jumpPage(e-1))})),r.setReadonly(!t.isWritable),i.push(t.emitter.on("writableChange",(function(e){r.setReadonly(!e)}))),i.addEventListener(window,"keydown",(function(e){t.box.focus&&(("ArrowUp"===e.key||"ArrowLeft"===e.key)&&r.slide.prevStep(),("ArrowRight"===e.key||"ArrowDown"===e.key)&&r.slide.nextStep())}))}Dt.active=new Set,Dt.roomLogger=null;var kt=r.Slide.usePlugin.bind(r.Slide),St={kind:"Slide",setup:function(e){var t,n;console.log("[Slide] setup @ 0.3.0-canary.16 ("+e.appId+")");var r=new Dt(e);if(r.info("[Slide] setup @ 0.3.0-canary.16"),!e.attributes.taskId)throw new Error("[Slide] no taskId");var i=e.createStorage("slide",e.attributes),a=e.getAppOptions()||{},o=a.renderOptions||{},s=new b,u=new Tt({interactive:!0,mode:"interactive",enableGlobalClick:!0,timestamp:G(e),logger:a.logger||r,renderOptions:{minFPS:o.minFPS||25,maxFPS:o.maxFPS||30,autoFPS:null===(t=o.autoFPS)||void 0===t||t,autoResolution:null===(n=o.autoResolution)||void 0===n||n,resolution:o.resolution,maxResolutionLevel:o.maxResolutionLevel,transactionBgColor:o.transactionBgColor||F(e.box.$content)},rtcAudio:a.rtcAudio,useLocalCache:a.useLocalCache,resourceTimeout:a.resourceTimeout,loaderDelegate:a.loaderDelegate,navigatorDelegate:a.navigatorDelegate,fixedFrameSize:a.fixedFrameSize,taskId:i.state.taskId,url:i.state.url});return Object.assign(u,{context:e,logger:r}),s.push(I.set(e.appId,u,e.box)),s.push(u.events.on("freeze",(function(){return r.info("[Slide] freeze")}))),s.push(u.events.on("unfreeze",(function(){return r.info("[Slide] unfreeze")}))),s.push(u.events.on("prepareError",(function(e){return r.info("[Slide] fetch slide info failed: "+e.message)}))),s.push(u.events.on("renderError",(function(e){var t=e.error,n=e.index;return r.info("[Slide] render failed [".concat(n,"]: ").concat(t.message))}))),e.box.mountStyles(Tt.styles),e.box.mountStage(u.$slide),e.box.mountFooter(u.$footer),e.box.mountContent(u.$content),s.push((function(){return u.destroy()})),At({context:e,storage:i,viewer:u,sideEffect:s,logger:r}),e.emitter.on("destroy",(function(){r.info("[Slide] destroy"),r.destroy(),s.flushAll()})),u}};exports.default=St,exports.version="0.3.0-canary.16",exports.usePlugin=kt},92228:function(e,t,n){n.r(t),Object.defineProperty(exports,"__esModule",{value:!0}),exports.reconnectRefresher=exports.calculateNextIndex=exports.WindowManager=exports.WhiteWebSDKInvalidError=exports.ParamsInvalidError=exports.InvalidViewModeError=exports.InvalidScenePath=exports.BuiltinAppsMap=exports.BuiltinApps=exports.BoxNotCreatedError=exports.BoxManagerNotInitializeError=exports.BindContainerRoomPhaseInvalidError=exports.AppNotRegisterError=exports.AppManagerNotInitError=exports.AppCreateError=void 0;var r,i,a=f(require("p-retry")),o=f(require("emittery")),s=require("lodash"),u=require("white-web-sdk"),c=require("uuid"),l=require("@netless/synced-store"),d=require("value-enhancer"),p=require("side-effect-manager"),h=require("@juggle/resize-observer");function f(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function m(e,t,n){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},m(e,t,n||e)}function y(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=w(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function I(e){var t=k();return function(){var n,r=E(e);if(t){var i=E(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){var t="function"==typeof Map?new Map:void 0;return D=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return A(e,arguments,E(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),S(r,e)},D(e)}function A(e,t,n){return A=k()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&S(i,n.prototype),i},A.apply(null,arguments)}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function L(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){L(a,r,i,o,s,"next",e)}function s(e){L(a,r,i,o,s,"throw",e)}o(void 0)}))}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),e}var B,V=function(e){return e.AppMove="AppMove",e.AppFocus="AppFocus",e.AppResize="AppResize",e.AppBoxStateChange="AppBoxStateChange",e.GetAttributes="GetAttributes",e.UpdateWindowManagerWrapper="UpdateWindowManagerWrapper",e.WindowCreated="WindowCreated",e.SetMainViewScenePath="SetMainViewScenePath",e.SetMainViewSceneIndex="SetMainViewSceneIndex",e.SetAppFocusIndex="SetAppFocusIndex",e.SwitchViewsToFreedom="SwitchViewsToFreedom",e.CursorMove="CursorMove",e.RootDirRemoved="RootDirRemoved",e.Refresh="Refresh",e.InitMainViewCamera="InitMainViewCamera",e.InvokeAttributesUpdateCallback="InvokeAttributesUpdateCallback",e.MoveCamera="MoveCamera",e.MoveCameraToContain="moveCameraToContain",e}(V||{}),Y="__WindowManger",Q="__WindowMangerEnsureReconnected__",Z=function(e){return e.Size="size",e.Position="position",e.SceneIndex="SceneIndex",e.ZIndex="zIndex",e.Visible="visible",e.Ratio="ratio",e.StageRatio="stageRatio",e.Draggable="draggable",e.Resizable="resizable",e}(Z||{}),W=function(e){return e.setBoxSize="setBoxSize",e.setBoxMinSize="setBoxMinSize",e.destroy="destroy",e}(W||{}),G=function(e){return e.StartCreate="StartCreate",e}(G||{}),F=function(e){return e.Leave="leave",e.Normal="normal",e}(F||{}),H="2.16.1",$="/",X="/init",J=new o.default,K=function(){function e(){var t=this;P(this,e),this.list=[],this.isEmit=!1,this.invoked=function(){t.currentInvoker=void 0,0===t.list.length&&(t.clear(),t.emitReady())},this.clear=function(){clearInterval(t.timer),t.timer=void 0}}return U(e,[{key:"initInterval",value:function(){var e=this;return window.setInterval((function(){e.invoke()}),50)}},{key:"push",value:function(e){this.list.push(e),this.invoke(),void 0===this.timer&&this.list.length>0&&(this.timer=this.initInterval())}},{key:"invoke",value:function(){var e=this;if(0!==this.list.length&&void 0===this.currentInvoker){var t=this.list.shift();t&&(this.currentInvoker=t,t().then((function(){e.invoked()})).catch((function(t){console.error("[WindowManager]: create app error: ".concat(t.message)),e.invoked()})))}}},{key:"emitReady",value:function(){this.isEmit||setTimeout((function(){J.emit("ready")}),50),this.isEmit=!0}},{key:"empty",value:function(){this.list=[],this.clear()}},{key:"destroy",value:function(){this.timer&&this.clear()}}]),e}(),q=new o.default,ee=function(){var e=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var n=indexedDB.open("__WindowManagerAppCache",2);n.onerror=function(e){t(e)},n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("apps")||t.createObjectStore("apps",{keyPath:"kind"}).createIndex("kind","kind",{unique:!0})},n.onsuccess=function(){var t=n.result;e(t)}}));case 2:return B=e.sent,e.next=5,ae(B);case 5:e.sent.forEach((function(e){t.downloaded.set(e.kind,e.url)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t,n){var r,i;if(B)return r=B,i={kind:e,url:t,sourceCode:n},new Promise((function(e,t){var n=r.transaction(["apps"],"readwrite").objectStore("apps").add(i);n.onsuccess=function(){return e()},n.onerror=function(){return t()}}))},ne=function(){var e=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,ie(B,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){if(B)return function(e,t){return new Promise((function(n,r){var i=e.transaction(["apps"],"readwrite").objectStore("apps").delete(t);i.onsuccess=function(){return n()},i.onerror=function(){return r()}}))}(B,e)};function ie(e,t){return new Promise((function(n,r){var i=e.transaction(["apps"]).objectStore("apps").index("kind").get(t);i.onerror=function(e){return r(e)},i.onsuccess=function(){i.result?n(i.result):n(null)}}))}function ae(e){return new Promise((function(t,n){var r=e.transaction(["apps"]).objectStore("apps").index("kind").getAll();r.onerror=function(e){return n(e)},r.onsuccess=function(){return t(r.result)}}))}var oe=function(){var e=_(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:if(!(r=e.sent)){e.next=7;break}return e.abrupt("return",r.sourceCode);case 7:return e.next=9,de(n,{timeout:1e4});case 9:return i=e.sent,e.next=12,i.text();case 12:return a=e.sent,e.next=15,te(t,n,a);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=function(e,t){var n=Function(e+"\n;return ".concat(t))();return void 0===n&&(n=window[t]),n},ue=function(e,t){J.emit("loadApp",{kind:e,status:"success"}),fe.downloaded.set(e,t)},ce=function(e,t){J.emit("loadApp",{kind:e,status:"failed",reason:t})},le=function(){var e=_(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r||"NetlessApp"+n,J.emit("loadApp",{kind:n,status:"start"}),e.prev=2,e.next=5,oe(n,t);case 5:if((a=e.sent)&&0!==a.length){e.next=9;break}return ce(n,"script is empty"),e.abrupt("return");case 9:return e.prev=9,o=se(a,i),ue(n,t),e.abrupt("return",o);case 15:if(e.prev=15,e.t0=e.catch(9),!e.t0.message.includes("Can only have one anonymous define call per script file")){e.next=23;break}return"function"==typeof(s=window.define)&&s.amd&&delete s.amd,u=se(a,i),ue(n,t),e.abrupt("return",u);case 23:ce(n,e.t0.message);case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(2),ce(n,e.t1.message);case 29:case"end":return e.stop()}}),e,null,[[2,26],[9,15]])})));return function(t,n,r){return e.apply(this,arguments)}}();function de(e,t){return pe.apply(this,arguments)}function pe(){return(pe=_(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.timeout,i=void 0===r?1e4:r,a=new AbortController,o=setTimeout((function(){return a.abort()}),i),e.next=5,fetch(t,C(C({},n),{},{signal:a.signal,headers:{"content-type":"text/plain"}}));case 5:return s=e.sent,clearTimeout(o),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he=function(){function e(){var t=this;P(this,e),this.kindEmitters=new Map,this.registered=new Map,this.appClassesCache=new Map,this.appClasses=new Map,this.downloaded=new Map,this.syncRegisterApp=null,this.onSyncRegisterAppChange=function(e){t.register({kind:e.kind,src:e.src})}}var t,n,r;return U(e,[{key:"setSyncRegisterApp",value:function(e){this.syncRegisterApp=e}},{key:"register",value:(r=_(regeneratorRuntime.mark((function e(t){var n,r,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.appClassesCache.delete(t.kind),this.registered.set(t.kind,t),"string"==typeof(n=t.src)&&(r=function(){var e=_(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(n,t.kind,t.name);case 2:if(!(r=e.sent).__esModule){e.next=5;break}return e.abrupt("return",r.default);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.syncRegisterApp&&this.syncRegisterApp({kind:t.kind,src:n,name:t.name})),"function"==typeof n&&(r=function(){var e=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(!(t=e.sent)){e.next=8;break}return(t.__esModule||t.default)&&(t=t.default),e.abrupt("return",t);case 8:throw new Error("[WindowManager]: load remote script failed, ".concat(n));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),"object"===O(n)&&(r=function(){var e=_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),this.appClasses.set(t.kind,_(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.appClassesCache.get(t.kind))||(n=r(),a.appClassesCache.set(t.kind,n)),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))),t.addHooks&&(i=this.createKindEmitter(t.kind))&&t.addHooks(i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"downloadApp",value:function(e){var t=this.registered.get(e);if(t&&"string"==typeof t.src)return le(t.src,t.kind,t.name)}},{key:"removeDownloaded",value:(n=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:this.downloaded.delete(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"unregister",value:function(e){this.appClasses.delete(e),this.appClassesCache.delete(e),this.registered.delete(e),this.removeDownloaded(e);var t=this.kindEmitters.get(e);t&&(t.clearListeners(),this.kindEmitters.delete(e))}},{key:"notifyApp",value:(t=_(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.kindEmitters.get(t),e.next=3,null==i?void 0:i.emit(n,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"createKindEmitter",value:function(e){if(!this.kindEmitters.has(e)){var t=new o.default;this.kindEmitters.set(e,t)}return this.kindEmitters.get(e)}}]),e}(),fe=new he,ge=function(){var e=_(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(n=fe.appClasses.get(t))?void 0:n();case 2:if(!(i=e.sent)||!(null==(r=i.config)?void 0:r.singleton)){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return","".concat(t,"-").concat((0,c.v4)().replace("-","").slice(0,8)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(e,t){if(!e.didRelease)return e.focusScenePath!==t?(e.focusScenePath=t,e):void 0},ye=function(e){e.didRelease||e.release()},ve=function(e,t){if(e&&e.isWritable&&e.state.sceneState.scenePath!==t){var n="/"===t?"":t;e.setScenePath(n)}},be=function(e,t,n){e&&(e.scenePathType(t)!==u.ScenePathType.None&&e.removeScenes(t,n))};(0,s.debounce)((function(e,t){e.emit("mainViewModeChange",t)}),200);var we=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Me(e)[t];if(r){var i=r[n];if(i){var a=i.name;return t===$?"/".concat(a):"".concat(t,"/").concat(a)}}},Me=function(e){return e.entireScenes()},xe=function(e,t,n,r){return null==e?void 0:e.putScenes(t,n,r)},Ie=function(e){var t=e.split("/");t.pop();var n=t.join("/");return""===n&&(n="/"),n},Ne=function(e){var t=e.split(".").map((function(e){return e.padStart(2,"0")})).join("");return parseInt(t)},Te=function(e){return new Promise((function(t){return setTimeout(t,e)}))},De=function(e){return 1===e.split("").reduce((function(e,t){return t===$&&(e+=1),e}),0)},Ae=function(){function e(t){var n=this;P(this,e),this.manager=t,this.displayer=this.manager.displayer,this.mainMagixEventListener=function(e){if(e.authorId!==n.displayer.observerId){var t=e.payload;switch(t.eventName){case V.AppMove:n.appMoveHandler(t.payload);break;case V.AppResize:n.appResizeHandler(t.payload);break;case V.AppBoxStateChange:n.boxStateChangeHandler(t.payload);break;case V.SetMainViewScenePath:n.setMainViewScenePathHandler(t.payload);break;case V.CursorMove:n.cursorMoveHandler(t.payload);break;case V.RootDirRemoved:n.rootDirRemovedHandler();break;case V.Refresh:n.refreshHandler();break;case V.InitMainViewCamera:n.initMainViewCameraHandler();break;case V.SetAppFocusIndex:n.setAppFocusViewIndexHandler(t.payload);break;case V.InvokeAttributesUpdateCallback:n.manager.attributesUpdateCallback(n.manager.attributes.apps);break;case V.MoveCamera:n.moveCameraHandler(t.payload);break;case V.MoveCameraToContain:n.moveCameraToContainHandler(t.payload)}}},this.appMoveHandler=function(e){var t;null==(t=n.boxManager)||t.moveBox(e)},this.appResizeHandler=function(e){var t,r;null==(t=n.boxManager)||t.resizeBox(Object.assign(e,{skipUpdate:!0})),null==(r=n.manager.room)||r.refreshViewSize()},this.boxStateChangeHandler=function(e){J.emit("boxStateChange",e)},this.setMainViewScenePathHandler=function(e){var t=e.nextScenePath;me(n.manager.mainView,t),J.emit("mainViewScenePathChange",t)},this.cursorMoveHandler=function(e){q.emit("cursorMove",e)},this.rootDirRemovedHandler=function(){n.manager.createRootDirScenesCallback(),n.manager.mainViewProxy.rebind(),q.emit("rootDirRemoved")},this.refreshHandler=function(){n.manager.windowManger._refresh()},this.initMainViewCameraHandler=function(){n.manager.mainViewProxy.addCameraReaction()},this.setAppFocusViewIndexHandler=function(e){if("main"===e.type)n.manager.setSceneIndexWithoutSync(e.index);else if("app"===e.type&&e.appID){var t=n.manager.appProxies.get(e.appID);t&&t.setSceneIndexWithoutSync(e.index)}},this.moveCameraHandler=function(e){var t=n.manager.mainViewProxy.size$;if(t.value){var r=n.manager.mainView.size,i=Math.max(r.height/t.value.height,r.width/t.value.width),a=C(C({},e),{},{scale:e.scale*i});n.manager.mainView.moveCamera(a)}},this.moveCameraToContainHandler=function(e){n.manager.mainView.moveCameraToContain(e)}}return U(e,[{key:"addListeners",value:function(){this.displayer.addMagixEventListener(Y,this.mainMagixEventListener)}},{key:"removeListeners",value:function(){this.displayer.removeMagixEventListener(Y,this.mainMagixEventListener)}},{key:"boxManager",get:function(){return this.manager.boxManager}}]),e}(),ke=function(e){x(n,e);var t=I(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).message="[WindowManager]: app duplicate exists and cannot be created again",e}return n}(D(Error));exports.AppCreateError=ke;var Se=function(e){x(n,e);var t=I(n);function n(e){return P(this,n),t.call(this,"[WindowManager]: app ".concat(e," need register or provide src"))}return n}(D(Error));exports.AppNotRegisterError=Se;var Ee=function(e){x(n,e);var t=I(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).message="[WindowManager]: AppManager must be initialized",e}return n}(D(Error));exports.AppManagerNotInitError=Ee;var je=function(e){x(n,e);var t=I(n);function n(e){return P(this,n),t.call(this,"[WindowManager]: white-web-sdk version must large than ".concat(e))}return n}(D(Error));exports.WhiteWebSDKInvalidError=je;var Ce=function(e){x(n,e);var t=I(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).message="[WindowManager]: kind must be a valid string",e}return n}(D(Error));exports.ParamsInvalidError=Ce;var ze=function(e){x(n,e);var t=I(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).message="[WindowManager]: box need created",e}return n}(D(Error));exports.BoxNotCreatedError=ze;var Oe=function(e){x(n,e);var t=I(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).message='[WindowManager]: ScenePath should start with "/"',e}return n}(D(Error));exports.InvalidScenePath=Oe;var Le=function(e){x(n,e);var t=I(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).message="[WindowManager]: boxManager need initialize",e}return n}(D(Error));exports.BoxManagerNotInitializeError=Le;var _e=function(e){x(n,e);var t=I(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).message="[WindowManager]: room phase only Connected can be bindContainer",e}return n}(D(Error));exports.BindContainerRoomPhaseInvalidError=_e;var Pe=function(e){x(n,e);var t=I(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).message="[WindowManager]: scroll mode cannot be switched to other viewMode",e}return n}(D(Error));exports.InvalidViewModeError=Pe;var Re=function(){function e(t,n,r,i){var a=this;P(this,e),this.view=t,this.appContext=n,this.appProxy=r,this.ensureSize=i,this.nextPage=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.pageState.index+1,e.abrupt("return",a.jumpPage(t));case 2:case"end":return e.stop()}}),e)}))),this.prevPage=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.pageState.index-1,e.abrupt("return",a.jumpPage(t));case 2:case"end":return e.stop()}}),e)}))),this.jumpPage=function(){var e=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<0||t>=a.pageState.length)){e.next=3;break}return console.warn("[WindowManager]: index ".concat(t," out of range")),e.abrupt("return",!1);case 3:return a.appProxy.setSceneIndex(t),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addPage=function(){var e=_(regeneratorRuntime.mark((function e(t){var n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null==t?void 0:t.after,r=null==t?void 0:t.scene,i=a.appProxy.scenePath){e.next=5;break}return e.abrupt("return");case 5:o=Array.isArray(r)?r:[r||{}],n?(s=a.pageState.index+1,xe(a.appContext.room,i,o,s)):xe(a.appContext.room,i,o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.removePage=function(){var e=_(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0===t?a.pageState.index:t,1!==a.pageState.length){e.next=4;break}return console.warn("[WindowManager]: can not remove the last page"),e.abrupt("return",!1);case 4:if(!(n<0||n>=a.pageState.length)){e.next=7;break}return console.warn("[WindowManager]: page index ".concat(t," out of range")),e.abrupt("return",!1);case 7:return e.abrupt("return",a.appProxy.removeSceneByIndex(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var o=new d.Val(r.pageState),u=new d.Val(r.size$.value),c=function(e){return(0,s.pick)(e,["centerX","centerY","scale"])},l=new d.Val(c(this.view.camera));this.baseRect$=u,this.pageState$=o,this.camera$=l,this.appProxy.sideEffectManager.add((function(){return[r.appEmitter.on("pageStateChange",(function(e){return o.setValue(e)})),r.camera$.subscribe((function(e){e&&l.setValue(c(e))})),r.size$.subscribe((function(e){e&&u.setValue((0,s.pick)(e,["width","height"]))}))]})),t.disableCameraTransform=!0}return U(e,[{key:"moveCamera",value:function(e){this.appProxy.moveCamera(e)}},{key:"setBaseRect",value:function(e){this.appProxy.updateSize(e.width,e.height)}},{key:"pageState",get:function(){return this.pageState$.value}}]),e}(),Ue=function(){if(Nc.debug){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["[WindowManager]:"].concat(n))}},Be=function(){if(Ne(u.WhiteVersion)<Ne(H))throw new je(H)},Ve=function(e,t){var n=null==e?void 0:e.state.roomMembers;return null==n?void 0:n.find((function(e){var n;return(null==(n=e.payload)?void 0:n.uid)===t}))},Ye=function(e){return e.map((function(e){var t;return C({uid:(null==(t=e.payload)?void 0:t.uid)||""},(0,u.toJS)(e))}))},Qe=function(){var e=_(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.createInvisiblePlugin(Nc,{});case 3:return n=e.sent,e.abrupt("return",n);case 7:if(e.prev=7,e.t0=e.catch(0),'invisible plugin "WindowManager" exits'!==e.t0.message){e.next=15;break}return e.next=12,Te(200);case 12:return e.abrupt("return",t.getInvisiblePlugin(Nc.kind));case 15:Ue("createInvisiblePlugin failed",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){function e(t,n,r,i){var a=this;P(this,e),this.manager=t,this.appId=n,this.appProxy=r,this.appOptions=i,this.mobxUtils={autorun:u.autorun,reaction:u.reaction,toJS:u.toJS},this.objectUtils={listenUpdated:u.listenUpdated,unlistenUpdated:u.unlistenUpdated,listenDisposed:u.listenDisposed,unlistenDisposed:u.unlistenDisposed},this.store=this.manager.store,this.isReplay=this.manager.isReplay,this.getAttributes=function(){return a.appProxy.attributes},this.getScenes=function(){var e=a.store.getAppAttributes(a.appId);return(null==e?void 0:e.isDynamicPPT)?a.appProxy.scenes:null==e?void 0:e.options.scenes},this.createWhiteBoardView=function(e){if(a.whiteBoardView)return a.whiteBoardView;var t=a.view;t||(t=a.appProxy.createAppDir()),e&&(0,s.isBoolean)(e.syncCamera)&&a.appProxy.syncCamera$.setValue(e.syncCamera);var n=document.createElement("div");return a._viewWrapper=n,n.className="window-manager-view-wrapper",a.box.$main.appendChild(n),t.divElement=n,a.appProxy.fireMemberStateChange(),a.isAddApp&&a.ensurePageSize(null==e?void 0:e.size),a.whiteBoardView=new Re(t,a,a.appProxy,a.ensurePageSize),a.appProxy.sideEffectManager.add((function(){return[a.box._stageRect$.subscribe((function(e){n.style.left="".concat(e.x,"px"),n.style.top="".concat(e.y,"px"),n.style.width="".concat(e.width,"px"),n.style.height="".concat(e.height,"px")})),function(){return function(){a.whiteBoardView=void 0}}]})),a.appProxy.whiteBoardViewCreated$.setValue(!0),a.whiteBoardView},this.ensurePageSize=function(e){var t;if((0,s.isNumber)(e)&&a.appProxy.scenePath&&!(a.appProxy.pageState.length>=e)){if(e<=0||e>=500)throw Error("[WindowManager]: size ".concat(e," muse be in range [1, ").concat(500,"]"));var n=e-a.appProxy.pageState.length,r=new Array(n).fill({});null==(t=a.room)||t.putScenes(a.appProxy.scenePath,r)}},this.getInitScenePath=function(){return a.appProxy.scenePath},this.setAttributes=function(e){a.manager.safeSetAttributes(z({},a.appId,e))},this.updateAttributes=function(e,t){a.manager.attributes[a.appId]&&a.manager.safeUpdateAttributes([a.appId].concat(b(e)),t)},this.setScenePath=function(){var e=_(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.appProxy.box){e.next=2;break}return e.abrupt("return");case 2:a.appProxy.setFullPath(t),null==(n=a.room)||n.setScenePath(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAppOptions=function(){return"function"==typeof a.appOptions?a.appOptions():a.appOptions},this.createStorage=function(e,t){var n=new d.Val(a.isWritable),r=new d.Val(a.manager.windowManger),i=new l.Storage({plugin$:r,isWritable$:n,namespace:"".concat(a.appId,":").concat(e),defaultState:t});return a.emitter.on("writableChange",(function(e){n.setValue(e)})),a.emitter.on("destroy",(function(){i.disconnect()})),i},this.dispatchMagixEvent=function(){var e,t="".concat(a.appId,":").concat(arguments.length<=0?void 0:arguments[0]);return null==(e=a.manager.room)?void 0:e.dispatchMagixEvent(t,arguments.length<=1?void 0:arguments[1])},this.addMagixEventListener=function(e,t,n){var r="".concat(a.appId,":").concat(e);return a.manager.displayer.addMagixEventListener(r,t,n),function(){return a.manager.displayer.removeMagixEventListener(r,t)}},this.removeMagixEventListener=this.manager.displayer.removeMagixEventListener.bind(this.manager.displayer),this.emitter=r.appEmitter,this.isAddApp=r.isAddApp}return U(e,[{key:"displayer",get:function(){return this.manager.displayer}},{key:"destroyed",get:function(){return"destroyed"===this.appProxy.status}},{key:"attributes",get:function(){return this.appProxy.attributes}},{key:"view",get:function(){return this.appProxy.view}},{key:"now",get:function(){if(this.isReplay){var e=this.displayer;return e.beginTimestamp+e.progressTime}return this.displayer.calibrationTimestamp}},{key:"isWritable",get:function(){return this.manager.canOperate&&!this.destroyed}},{key:"box",get:function(){var e=this.appProxy.box$.value;if(e)return e;throw new ze}},{key:"room",get:function(){return this.manager.room}},{key:"members",get:function(){return this.manager.members$.value}},{key:"currentMember",get:function(){var e=Ve(this.room,this.manager.uid);if(e)return C({uid:this.manager.uid},e)}}]),e}(),We=function(){function e(t){var n=this;P(this,e),this.params=t,this.sceneNode=null,this.createSceneNode=function(e){return n.scenePath=e,n.sceneNode&&n.sceneNode.dispose(),n.sceneNode=n.params.displayer.createScenesCallback(e,{onAddScene:n.onSceneChange,onRemoveScene:n.onSceneChange}),n.sceneNode},this.onSceneChange=function(){n.params.notifyPageStateChange()};var r=this.params,i=r.displayer,a=r.scenePath;this.view=this.params.view,a&&(this.scenePath=a,this.sceneNode=i.createScenesCallback(a,{onAddScene:this.onSceneChange,onRemoveScene:this.onSceneChange}))}return U(e,[{key:"setView",value:function(e){this.view=e}},{key:"getFullPath",value:function(e){var t,n=null==(t=this.sceneNode)?void 0:t.scenes;if(this.scenePath&&n){var r=n[e];if(r)return"".concat(this.scenePath,"/").concat(r)}}},{key:"toObject",value:function(){var e,t,n,r=this;return{index:(null==(e=this.view)?void 0:e.focusSceneIndex)||0,length:(null==(t=this.sceneNode)?void 0:t.scenes.length)||0,pages:(null==(n=this.sceneNode)?void 0:n.scenes.map((function(e){return"".concat(r.scenePath,"/").concat(e)})))||[]}}},{key:"destroy",value:function(){var e;null==(e=this.sceneNode)||e.dispose()}}]),e}(),Ge=function(){function e(t){var n=this;P(this,e),this.saveCamera=t,this.scale=1,this.cameraUpdating=!1,this.setRect=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.rect=e,n.remoteCamera&&n.remoteSize&&t&&n.onRemoteUpdate(n.remoteCamera,n.remoteSize)},this.onRemoteUpdate=(0,s.throttle)((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.remoteCamera=e,n.remoteSize=t,r||requestAnimationFrame((function(){n.remoteSize&&n.rect&&(n.moveCameraToContian(n.remoteSize),n.moveCamera(e))}))}),32)}return U(e,[{key:"setView",value:function(e){this.view=e}},{key:"onRemoteSizeUpdate",value:function(e){var t;this.remoteSize=e;var n=!(0,s.isEqual)((0,s.pick)(this.rect,["width","height"]),(0,s.pick)(e,["width","height"]));if(this.rect&&this.remoteCamera&&n){if(!this.view)return;var r=this.view.camera;null==(t=this.view)||t.moveCameraToContain({width:e.width,height:e.height,originX:r.centerX-e.width/2,originY:r.centerY-e.height/2,animationMode:u.AnimationMode.Immediately}),this.moveCamera(this.remoteCamera)}}},{key:"onLocalCameraUpdate",value:function(e){this.saveCamera(e),this.remoteCamera=e}},{key:"moveCameraToContian",value:function(e){!(0,s.isEmpty)(e)&&this.view&&(this.view.moveCameraToContain({width:e.width,height:e.height,originX:-e.width/2,originY:-e.height/2,animationMode:u.AnimationMode.Immediately}),this.scale=this.view.camera.scale)}},{key:"moveCamera",value:function(e){if(!(0,s.isEmpty)(e)&&this.view&&null!=e.centerX&&null!=e.centerY){if((0,s.isEqual)(e,this.view.camera))return;var t=e.centerX,n=e.centerY,r=e.scale*(this.scale||1);this.view.moveCamera({centerX:t,centerY:n,scale:r,animationMode:u.AnimationMode.Immediately})}}}]),e}(),Fe=function(){function e(t){var n=this;P(this,e),this.context=t,this.sem=new p.SideEffectManager,this.createSynchronizer=function(){return new Ge((function(e){n.context.camera$.setValue(e,!0),n.context.viewMode$&&n.context.viewMode$.value===u.ViewMode.Freedom||n.context.storeCamera(e)}))},this.subscribeView=function(){return n.context.view$.subscribe((function(e){var t,r=n.context.camera$.value;r&&n.context.size$.value&&(null==(t=n.needRecoverCamera$)?void 0:t.value)&&(null==e||e.moveCamera({scale:1,animationMode:u.AnimationMode.Immediately}),n.synchronizer.onRemoteUpdate(r,n.context.size$.value)),n.bindView(e)}))},this.subscribeCamera=function(){return n.context.camera$.subscribe((function(e,t){var r=n.context.size$.value;e&&r&&n.synchronizer.onRemoteUpdate(e,r,t)}))},this.subscribeSize=function(){return n.context.size$.subscribe((function(e){e&&n.isBroadcastMode&&n.synchronizer.onRemoteSizeUpdate(e)}))},this.subscribeStageRect=function(){return n.context.stageRect$.subscribe((function(e){e&&n.synchronizer.setRect(e,n.isBroadcastMode)}))},this.bindView=function(e){e&&(n.synchronizer.setView(e),n.sem.flush("view"),n.sem.add((function(){return e.callbacks.on("onCameraUpdatedByDevice",n.onCameraUpdatedByDevice),function(){return e.callbacks.off("onCameraUpdatedByDevice",n.onCameraUpdatedByDevice)}}),"view"))},this.onCameraUpdatedByDevice=function(e){if(e&&n.isBroadcastMode){var t=n.context,r=t.size$,i=t.stageRect$,a=t.view$;if(r.value&&i.value&&a.value){n.synchronizer.onLocalCameraUpdate(C(C({},e),{},{id:n.context.uid}));var o=C(C({},a.value.size),{},{id:n.context.uid});(0,s.isEqual)(r.value,o)||n.context.storeSize(o)}}},this.synchronizer=this.createSynchronizer(),this.bindView(this.context.view$.value),this.sem.add((function(){return[n.subscribeView(),n.subscribeCamera(),n.subscribeSize(),n.subscribeStageRect()]})),t.viewMode$?this.needRecoverCamera$=(0,d.derive)(t.viewMode$,(function(e){return"scroll"!==e})):this.needRecoverCamera$=new d.Val(!0);var r=(0,d.combine)([this.context.camera$,this.context.size$]);r.reaction((function(e){var t,i=v(e,2),a=i[0],o=i[1];a&&o&&(null==(t=n.needRecoverCamera$)?void 0:t.value)&&(n.synchronizer.onRemoteUpdate(a,o),r.destroy())}))}return U(e,[{key:"destroy",value:function(){this.sem.flushAll()}},{key:"isBroadcastMode",get:function(){var e;return(null==(e=this.context.viewMode$)?void 0:e.value)===u.ViewMode.Broadcaster}}]),e}(),He=new o.default,$e=function(e,t){var n=t.length-1;return e===t.index?e===n?e-1:t.index+1:t.index};exports.calculateNextIndex=$e;var Xe=function(e){return e.Apps="apps",e.Focus="focus",e.State="state",e.BoxState="boxState",e.MainViewCamera="mainViewCamera",e.MainViewSize="mainViewSize",e.Broadcaster="broadcaster",e.Cursors="cursors",e.Position="position",e.CursorState="cursorState",e.FullPath="fullPath",e.Registered="registered",e.Camera="camera",e.Size="size",e}(Xe||{}),Je=new(function(){function e(t){var n=this;P(this,e),this.context=t,this.setAppFocus=function(e,t){t?n.context.safeSetAttributes(z({},"focus",e)):n.context.safeSetAttributes(z({},"focus",void 0))}}return U(e,[{key:"setContext",value:function(e){this.context=e}},{key:"apps",value:function(){return(0,s.get)(this.attributes,["apps"])}},{key:"getAppAttributes",value:function(e){return(0,s.get)(this.apps(),[e])}},{key:"getAppState",value:function(e){return(0,s.get)(this.apps(),[e,"state"])}},{key:"getMaximized",value:function(){return(0,s.get)(this.attributes,["maximized"])}},{key:"getMinimized",value:function(){return(0,s.get)(this.attributes,["minimized"])}},{key:"setupAppAttributes",value:function(e,t,n){var r;this.attributes.apps||this.context.safeSetAttributes({apps:{}});var i=["scenePath","title"];n||i.push("scenes");var a=(0,s.pick)(e.options,i),o={kind:e.kind,options:a,isDynamicPPT:n,setup:!1};"string"==typeof e.src&&(o.src=e.src),o.createdAt=Date.now(),this.context.safeUpdateAttributes(["apps",t],o),this.context.safeUpdateAttributes(["apps",t,"state"],(z(r={},Z.Size,{}),z(r,Z.Position,{}),z(r,Z.SceneIndex,0),r))}},{key:"updateAppState",value:function(e,t,n){(0,s.get)(this.attributes,["apps",e,"state"])&&this.context.safeUpdateAttributes(["apps",e,"state",t],n)}},{key:"updateAppAttributes",value:function(e,t,n){this.context.safeUpdateAttributes(["apps",e,t],n)}},{key:"cleanAppAttributes",value:function(e){this.context.safeUpdateAttributes(["apps",e],void 0),this.context.safeSetAttributes(z({},e,void 0)),this.attributes.focus===e&&this.cleanFocus()}},{key:"cleanFocus",value:function(){this.context.safeSetAttributes(z({},"focus",void 0))}},{key:"getAppSceneIndex",value:function(e){var t;return null==(t=this.getAppState(e))?void 0:t[Z.SceneIndex]}},{key:"getAppScenePath",value:function(e){var t,n;return null==(n=null==(t=this.getAppAttributes(e))?void 0:t.options)?void 0:n.scenePath}},{key:"getMainViewScenePath",value:function(){return this.attributes._mainScenePath}},{key:"getMainViewSceneIndex",value:function(){return this.attributes._mainSceneIndex}},{key:"getBoxState",value:function(){return this.attributes.boxState}},{key:"setMainViewScenePath",value:function(e){this.context.safeSetAttributes({_mainScenePath:e})}},{key:"setMainViewSceneIndex",value:function(e){this.context.safeSetAttributes({_mainSceneIndex:e})}},{key:"getMainViewCamera",value:function(){return(0,s.get)(this.attributes,["mainViewCamera"])}},{key:"getMainViewSize",value:function(){return(0,s.get)(this.attributes,["mainViewSize"])}},{key:"setMainViewCamera",value:function(e){this.context.safeSetAttributes(z({},"mainViewCamera",C({},e)))}},{key:"setMainViewSize",value:function(e){this.context.safeSetAttributes(z({},"mainViewSize",C({},e)))}},{key:"setMainViewCameraAndSize",value:function(e,t){var n;this.context.safeSetAttributes((z(n={},"mainViewCamera",C({},e)),z(n,"mainViewSize",C({},t)),n))}},{key:"updateCursor",value:function(e,t){(0,s.get)(this.attributes,["cursors"])||this.context.safeUpdateAttributes(["cursors"],{}),(0,s.get)(this.attributes,["cursors",e])||this.context.safeUpdateAttributes(["cursors",e],{}),this.context.safeUpdateAttributes(["cursors",e,"position"],t)}},{key:"updateCursorState",value:function(e,t){(0,s.get)(this.attributes,["cursors",e])||this.context.safeUpdateAttributes(["cursors",e],{}),this.context.safeUpdateAttributes(["cursors",e,"cursorState"],t)}},{key:"getCursorState",value:function(e){return(0,s.get)(this.attributes,["cursors",e,"cursorState"])}},{key:"cleanCursor",value:function(e){this.context.safeUpdateAttributes(["cursors",e],void 0)}},{key:"setMainViewFocusPath",value:function(e){var t=this.getMainViewScenePath();t&&me(e,t)}},{key:"attributes",get:function(){return this.context.getAttributes()}},{key:"focus",get:function(){return(0,s.get)(this.attributes,["focus"])}}]),e}())({getAttributes:function(){throw new Error("getAttributes not implemented")},safeSetAttributes:function(){throw new Error("safeSetAttributes not implemented")},safeUpdateAttributes:function(){throw new Error("safeUpdateAttributes not implemented")}}),Ke=function(){function e(t,n,r,i){var a,c=this;P(this,e),this.params=t,this.manager=n,this.boxManager=this.manager.boxManager,this.appProxies=this.manager.appProxies,this.viewManager=this.manager.viewManager,this.store=this.manager.store,this.uid=this.manager.uid,this.status="normal",this.sideEffectManager=new p.SideEffectManager,this.valManager=new d.ValManager,this.fullPath$=this.valManager.attach(new d.Val(void 0)),this.camera$=this.valManager.attach(new d.Val(void 0)),this.size$=this.valManager.attach(new d.Val(void 0)),this.box$=this.valManager.attach(new d.Val(void 0)),this.view$=this.valManager.attach(new d.Val(void 0)),this.syncCamera$=this.valManager.attach(new d.Val(!0)),this.whiteBoardViewCreated$=this.valManager.attach(new d.Val(!1)),this.fireMemberStateChange=function(){c.manager.room&&c.onMemberStateChange(c.manager.room.state.memberState)},this.onMemberStateChange=function(e){var t,n;"clicker"===e.currentApplianceName?(null==(t=c.appContext)?void 0:t._viewWrapper)&&(c.appContext._viewWrapper.style.pointerEvents="none"):(null==(n=c.appContext)?void 0:n._viewWrapper)&&(c.appContext._viewWrapper.style.pointerEvents="auto")},this.computedInitialRect=function(e){var t,n=null==(t=c.manager.boxManager)?void 0:t.stageRect;if(n){var r=n.width,i=n.height,a=e.height/e.width;return i<480?{width:480/a,height:480}:{width:.65*r,height:.65*i}}},this.getAppInitState=function(e){var t,n,r=c.store.getAppState(e);if(r){var i=c.store.focus,a={maximized:null==(t=c.attributes)?void 0:t.maximized,minimized:null==(n=c.attributes)?void 0:n.minimized,id:e},o=(0,s.omitBy)(r,s.isUndefined);return i===e&&(a=C(C({},a),{},{focus:!0})),Object.assign(a,o)}},this.appAttributesUpdateListener=function(e){c.sideEffectManager.add((function(){return[c.manager.refresher.add(e,(function(){return(0,u.autorun)((function(){var t=c.manager.attributes[e];t&&c.appEmitter.emit("attributesUpdate",t)}))})),c.manager.refresher.add(c.stateKey,(function(){return(0,u.autorun)((function(){var t,n,r,i=null==(t=c.appAttributes)?void 0:t.state;(null==i?void 0:i.zIndex)>0&&i.zIndex!==(null==(n=c.box)?void 0:n.zIndex)&&(null==(r=c.boxManager)||r.setZIndex(e,i.zIndex))}))})),c.manager.refresher.add("".concat(e,"-fullPath"),(function(){return(0,u.autorun)((function(){var e,t=null==(e=c.appAttributes)?void 0:e.fullPath;c.setFocusScenePathHandler(t),c.fullPath$.value!==t&&(c.notifyPageStateChange(),c.fullPath$.setValue(t))}))}))]}))},this.setFocusScenePathHandler=(0,s.debounce)((function(e){var t;c.view&&e&&e!==(null==(t=c.view)?void 0:t.focusScenePath)&&me(c.view,e)}),50),this.notifyPageStateChange=(0,s.debounce)((function(){c.pageState&&c.appEmitter.emit("pageStateChange",c.pageState)}),50),this.storeCamera=function(e){c.store.updateAppAttributes(c.id,Xe.Camera,e)},this.storeSize=function(e){c.store.updateAppAttributes(c.id,Xe.Size,e)},this.updateSize=function(e,t){var n={id:c.manager.uid,width:e,height:t};c.store.updateAppAttributes(c.id,Xe.Size,n),c.size$.setValue(n)},this.moveCamera=function(e){if(c.camera$.value){var t=C(C(C({},c.camera$.value),e),{},{id:c.uid});c.storeCamera(t),c.camera$.setValue(t)}},this.addCameraReaction=function(){c.sideEffectManager.add((function(){return c.manager.refresher.add("".concat(c.id,"-camera"),(function(){return(0,u.reaction)((function(){var e;return null==(e=c.appAttributes)?void 0:e.camera}),(function(e){if(e){var t=(0,u.toJS)(e);(0,s.isEqual)(t,c.camera$.value)||c.camera$.setValue(t)}}))}))}),"camera")},this.addSizeReaction=function(){c.sideEffectManager.add((function(){return c.manager.refresher.add("".concat(c.id,"-size"),(function(){return(0,u.reaction)((function(){var e;return null==(e=c.appAttributes)?void 0:e.size}),(function(e){if(e){var t=(0,u.toJS)(e);(0,s.isEqual)(t,c.size$.value)||c.size$.setValue(t)}}))}))}),"size")},this.onFocus=function(){c.setScenePath()},this.setupDone=function(){c.store.updateAppAttributes(c.id,"setup",!0),c.manager.dispatchInternalEvent(V.InvokeAttributesUpdateCallback),c.boxManager&&c.box&&c.boxManager.focusBox({appId:c.id},!1)},this.setupFailed=function(){c.store.cleanAppAttributes(c.id)},this.kind=t.kind,this.id=r,this.appScenePath="/".concat(this.id,"-app-dir"),this.stateKey="".concat(this.id,"_state"),this.appProxies.set(this.id,this),this.appEmitter=new o.default,this.appListener=this.makeAppEventListener(this.id),this.isAddApp=i,this.initScenes(),(null==(a=this.params.options)?void 0:a.scenePath)&&this.createView(),this.scenePath||(this.scenePath=this.appScenePath),this._pageState=new We({displayer:this.manager.displayer,scenePath:this.scenePath,view:this.view,notifyPageStateChange:this.notifyPageStateChange}),this.sideEffectManager.add((function(){return function(){return c._pageState.destroy()}})),this.camera$.setValue((0,u.toJS)(this.appAttributes.camera)),this.size$.setValue((0,u.toJS)(this.appAttributes.size)),this.addCameraReaction(),this.addSizeReaction(),this.sideEffectManager.add((function(){return q.on("memberStateChange",c.onMemberStateChange)})),this.sideEffectManager.add((function(){return[c.syncCamera$.subscribe((function(e){e||c.viewSync&&(c.viewSync.destroy(),c.viewSync=void 0,c.sideEffectManager.flush("camera"),c.sideEffectManager.flush("size"))})),c.whiteBoardViewCreated$.reaction((function(e){if(e&&c.box){if(!c.syncCamera$.value)return;(0,d.combine)([c.box$,c.view$]).subscribe((function(e){var t=v(e,2),n=t[0],r=t[1];if(n&&r){if(c.camera$.value||(c.storeCamera({centerX:null,centerY:null,scale:1,id:c.uid}),c.camera$.setValue((0,u.toJS)(c.appAttributes.camera))),!c.size$.value&&n.stageRect){var i=c.computedInitialRect(n.stageRect),a=(null==i?void 0:i.width)||n.stageRect.width,o=(null==i?void 0:i.height)||n.stageRect.height;c.storeSize({id:c.uid,width:a,height:o}),c.size$.setValue((0,u.toJS)(c.appAttributes.size))}c.viewSync=new Fe({uid:c.uid,view$:c.view$,camera$:c.camera$,size$:c.size$,stageRect$:n._stageRect$,storeCamera:c.storeCamera,storeSize:c.storeSize}),c.sideEffectManager.add((function(){return function(){var e;return null==(e=c.viewSync)?void 0:e.destroy()}})),c.whiteBoardViewCreated$.destroy()}}))}})),c.manager.members$.reaction((function(e){c.appEmitter.emit("roomMembersChange",e)}))]}))}var t,n,r,i,a,c,l;return U(e,[{key:"createAppDir",value:function(){var e=this.scenePath||this.appScenePath;this._pageState.createSceneNode(e)||(xe(this.manager.room,e,[{name:"1"}]),this._pageState.createSceneNode(e),this.setSceneIndex(0)),this.scenes=Me(this.manager.displayer)[e];var t=this.createView();return this._pageState.setView(t),t}},{key:"initScenes",value:function(){var e,t=this.params.options;t&&(this.scenePath=t.scenePath,(null==(e=this.appAttributes)?void 0:e.isDynamicPPT)&&this.scenePath?this.scenes=Me(this.manager.displayer)[this.scenePath]:this.scenes=t.scenes)}},{key:"getFullScenePath",value:function(){if(this.scenePath)return(0,s.get)(this.appAttributes,[Xe.FullPath])||this.getFullScenePathFromScenes()}},{key:"getFullScenePathFromScenes",value:function(){var e=(0,s.get)(this.appAttributes,["state","SceneIndex"],0),t=function(e,t,n){var r;if(e&&t){var i=null==(r=Me(e)[t])?void 0:r[n];if(i)return"".concat(t,"/").concat(i.name)}}(this.manager.room,this.scenePath,e);return t&&this.setFullPath(t),t}},{key:"setFullPath",value:function(e){this.store.updateAppAttributes(this.id,Xe.FullPath,e)}},{key:"baseInsertApp",value:(l=_(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],(r=this.params).kind){e.next=4;break}throw new Error("[WindowManager]: kind require");case 4:return e.next=6,null==(n=fe.appClasses.get(r.kind))?void 0:n();case 6:if(i=e.sent,a=fe.registered.get(r.kind),!i){e.next=13;break}return e.next=11,this.setupApp(this.id,t,i,r.options,null==a?void 0:a.appOptions);case 11:e.next=14;break;case 13:throw new Error("[WindowManager]: app load failed ".concat(r.kind," ").concat(r.src));case 14:return q.emit("updateManagerRect"),e.abrupt("return",{appId:this.id,app:i});case 16:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"setupApp",value:(c=_(regeneratorRuntime.mark((function e(t,n,r,i,a){var o,s,u,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue("setupApp",t,r,i),this.boxManager){e.next=3;break}throw new Le;case 3:s=new Ze(this.manager,t,this,a),this.appContext=s,e.prev=5,q.once("".concat(t).concat(V.WindowCreated)).then(_(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n||(a=l.getAppInitState(t),null==(i=l.boxManager)||i.updateBoxState(a)),l.appEmitter.onAny(l.appListener),l.appAttributesUpdateListener(t),l.setViewFocusScenePath(),setTimeout(_(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.setup(s);case 3:n=e.sent,l.appResult=n,fe.notifyApp(l.kind,"created",{appId:t,result:n}),l.fixMobileSize(),l.isAddApp&&l.setupDone(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),l.setupFailed(),l.destroy(!1,!0,!0);case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),50);case 5:case"end":return e.stop()}}),e)})))),u=null==(o=this.boxManager)?void 0:o.createBox({appId:t,app:r,options:i,canOperate:this.manager.canOperate,smartPosition:this.isAddApp}),(null==(c=fe.registered.get(this.kind))?void 0:c.contentStyles)&&(null==u||u.mountUserStyles(c.contentStyles)),this.box$.setValue(u),this.isAddApp&&this.box&&(this.store.updateAppState(t,Z.ZIndex,this.box.zIndex),this.store.updateAppState(t,Z.Size,{width:this.box.intrinsicWidth,height:this.box.intrinsicHeight})),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(5),console.error(e.t0),new Error("[WindowManager]: app setup error: ".concat(e.t0.message));case 18:case"end":return e.stop()}}),e,this,[[5,14]])}))),function(e,t,n,r,i){return c.apply(this,arguments)})},{key:"fixMobileSize",value:function(){var e,t,n=null==(e=this.boxManager)?void 0:e.getBox(this.id);n&&(n.minimized||null==(t=this.boxManager)||t.resizeBox({appId:this.id,width:n.intrinsicWidth+.001,height:n.intrinsicHeight+.001,skipUpdate:!0}))}},{key:"onSeek",value:(a=_(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.appEmitter.emit("seek",t).catch((function(e){console.log("[WindowManager]: emit seek error: ".concat(e.message))})),r=this.getAppInitState(this.id),null==(n=this.boxManager)||n.updateBoxState(r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"onReconnected",value:(i=_(regeneratorRuntime.mark((function t(){var n,r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Boolean(this.manager.attributes.apps[this.id])){t.next=5;break}return t.next=4,this.destroy(!0,!1,!0);case 4:return t.abrupt("return");case 5:return this.appEmitter.emit("reconnected",void 0),r=this.getAppInitState(this.id),t.next=9,this.destroy(!0,!1,!0);case 9:return i=this.params,a=new e(i,this.manager,this.id,this.isAddApp),t.next=13,a.baseInsertApp(!0);case 13:null==(n=this.boxManager)||n.updateBoxState(r);case 14:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onRemoveScene",value:(r=_(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.scenePath&&t.startsWith(this.scenePath+"/")&&(n=this.pageState.index,(r=this._pageState.getFullPath(n))||(n=0,r=this._pageState.getFullPath(n)),r&&this.setFullPath(r),this.setViewFocusScenePath(),this.view&&(this.view.focusSceneIndex=n));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"emitAppSceneStateChange",value:function(e){this.appEmitter.emit("sceneStateChange",e)}},{key:"emitAppIsWritableChange",value:function(){this.appEmitter.emit("writableChange",this.isWritable)}},{key:"makeAppEventListener",value:function(e){var t=this;return function(n,r){var i,a,o,s;if(t.manager.canOperate)switch(n){case"setBoxSize":null==(i=t.boxManager)||i.resizeBox({appId:e,width:r.width,height:r.height,skipUpdate:!1});break;case"setBoxMinSize":null==(a=t.boxManager)||a.setBoxMinSize({appId:e,minWidth:r.minwidth,minHeight:r.minheight});break;case"setBoxTitle":null==(o=t.boxManager)||o.setBoxTitle({appId:e,title:r.title});break;case W.destroy:if("destroyed"===t.status)return;t.destroy(!0,!1,!0,null==r?void 0:r.error),(null==r?void 0:r.error)&&console.error(null==r?void 0:r.error);break;case"focus":null==(s=t.boxManager)||s.focusBox({appId:t.id}),He.emit("focus",{appId:t.id})}}}},{key:"setScenePath",value:function(){if(this.manager.canOperate){var e=this.getFullScenePath();this.manager.room&&e&&this.view&&ve(this.manager.room,e)}}},{key:"setViewFocusScenePath",value:function(){if("destroyed"!==this.status){var e=this.getFullScenePath();return e&&this.view&&me(this.view,e),e}}},{key:"createView",value:function(){var e=this.viewManager.createView(this.id);return this.view$.setValue(e),this.setViewFocusScenePath(),e}},{key:"removeSceneByIndex",value:(n=_(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._pageState.getFullPath(t))||!this.pageState){e.next=9;break}return r=$e(t,this.pageState),this.setSceneIndexWithoutSync(r),this.manager.dispatchInternalEvent(V.SetAppFocusIndex,{type:"app",appID:this.id,index:r}),setTimeout((function(){be(i.manager.room,n,t)}),100),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setSceneIndexWithoutSync",value:function(e){this.view&&(this.view.focusSceneIndex=e)}},{key:"setSceneIndex",value:function(e){if(this.view){this.view.focusSceneIndex=e;var t=this._pageState.getFullPath(e);t&&(this.setFullPath(t),ve(this.manager.room,t))}}},{key:"destroy",value:(t=_(regeneratorRuntime.mark((function e(t,n,r,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("destroyed"!==this.status){e.next=2;break}return e.abrupt("return");case 2:return this.status="destroyed",e.prev=3,e.next=6,fe.notifyApp(this.kind,"destroy",{appId:this.id});case 6:return J.emit("appClose",{appId:this.id,kind:this.kind,error:i}),e.next=9,this.appEmitter.emit("destroy",{error:i});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("[WindowManager]: notifyApp error",e.t0.message,e.t0.stack);case 14:this.appEmitter.clearListeners(),this.sideEffectManager.flushAll(),q.emit("destroy-".concat(this.id),{error:i}),t&&(null==(a=this.boxManager)||a.closeBox(this.id,r)),n&&(this.store.cleanAppAttributes(this.id),this.scenePath&&be(this.manager.room,this.scenePath)),this.appProxies.delete(this.id),this.viewManager.destroyView(this.id),this.manager.appStatus.delete(this.id),this.valManager.destroy();case 23:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"close",value:function(){return this.destroy(!0,!0,!1)}},{key:"view",get:function(){return this.view$.value}},{key:"viewIndex",get:function(){var e;return null==(e=this.view)?void 0:e.focusSceneIndex}},{key:"isWritable",get:function(){var e;return this.manager.canOperate&&!(null==(e=this.box)?void 0:e.readonly)}},{key:"attributes",get:function(){return this.manager.attributes[this.id]}},{key:"appAttributes",get:function(){return this.store.getAppAttributes(this.id)}},{key:"box",get:function(){return this.box$.value}},{key:"pageState",get:function(){return this._pageState.toObject()}}]),e}(),qe=function(){function e(t){P(this,e),this.displayer=t,this.views=new Map}return U(e,[{key:"createView",value:function(e){var t=et(this.displayer);return this.views.set(e,t),t}},{key:"getView",value:function(e){return this.views.get(e)}},{key:"destroyView",value:function(e){var t=this.views.get(e);if(t){try{t.release()}catch(e){}this.views.delete(e)}}},{key:"setViewScenePath",value:function(e,t){var n=this.views.get(e);n&&(n.focusScenePath=t)}},{key:"destroy",value:function(){this.views.forEach((function(e){try{e.release()}catch(e){}})),this.views.clear()}}]),e}(),et=function(e){var t=e.views.createView();return tt(t),t},tt=function(e){e.setCameraBound({maxContentMode:function(){return 10},minContentMode:function(){return.1}})},nt=function(){function e(t){var n=this;P(this,e),this.manager=t,this.started=!1,this.mainViewIsAddListener=!1,this.store=this.manager.store,this.sideEffectManager=new p.SideEffectManager,this.camera$=new d.Val(void 0),this.size$=new d.Val(void 0),this.view$=new d.Val(void 0),this.createViewSync=function(){var e;"scroll"!==n.manager.windowManger.viewMode$.value&&n.manager.boxManager&&!n.viewSync&&(n.viewSync=new Fe({uid:n.manager.uid,view$:n.view$,camera$:n.camera$,size$:n.size$,stageRect$:null==(e=n.manager.boxManager)?void 0:e.stageRect$,viewMode$:n.manager.windowManger.viewMode$,storeCamera:n.storeCamera,storeSize:n.storeSize}))},this.startListenWritableChange=function(){n.sideEffectManager.add((function(){return q.on("writableChange",(function(e){e&&n.ensureCameraAndSize()}))}))},this.moveCamera=function(e){n.debouncedStoreCamera(),n.moveCameraToPromise(e)},this.moveCameraToPromise=function(e){var t=new Promise((function(t){var r=(0,s.debounce)((function(){n.mainView.callbacks.off("onCameraUpdated",r),n.cameraUpdatePromise=void 0,t(!0)}),50);n.mainView.callbacks.on("onCameraUpdated",r),n.mainView.moveCamera(e)}));return n.cameraUpdatePromise=t,t},this.debouncedStoreCamera=function(){n.storeCurrentSize();var e=(0,s.debounce)((function(){n.saveToCamera$(),n.storeCurrentCameraSize(),n.mainView.callbacks.off("onCameraUpdated",e)}),50);n.mainView.callbacks.on("onCameraUpdated",e)},this.storeCurrentCameraSize=(0,s.debounce)(_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.cameraUpdatePromise){e.next=3;break}return e.next=3,n.cameraUpdatePromise;case 3:n.storeCurrentCamera(),n.storeCurrentSize();case 5:case"end":return e.stop()}}),e)}))),500),this.addCameraReaction=function(){n.manager.refresher.add(Xe.MainViewCamera,n.cameraReaction),n.manager.refresher.add(Xe.MainViewSize,n.sizeReaction)},this.saveToCamera$=function(){var e=C(C({},n.view.camera),{},{id:n.manager.uid});n.camera$.setValue(e,!0)},this.storeCurrentCamera=function(){var e=n.view.camera;n.storeCamera(C({id:n.manager.uid},e))},this.storeCurrentSize=function(){var e,t=null==(e=n.manager.boxManager)?void 0:e.stageRect;if(t){var r={id:n.manager.uid,width:t.width,height:t.height};(0,s.isEqual)(r,n.mainViewSize)||n.storeSize(r)}},this.storeCamera=function(e){n.store.setMainViewCamera(e)},this.storeSize=function(e){n.store.setMainViewSize(e)},this.cameraReaction=function(){return(0,u.reaction)((function(){return n.mainViewCamera}),(function(e){if(e){var t=(0,u.toJS)(e);(0,s.isEqual)(t,n.camera$.value)||n.camera$.setValue(t)}}),{fireImmediately:!0})},this.sizeReaction=function(){return(0,u.reaction)((function(){return n.mainViewSize}),(function(e){if(e){var t=(0,u.toJS)(e);(0,s.isEqual)(t,n.size$.value)||n.size$.setValue(t)}}),{fireImmediately:!0})},this.mainViewClickListener=function(){n.mainViewClickHandler()},this.setMainViewSize=(0,s.debounce)((function(e){n.store.setMainViewSize(C(C({},e),{},{id:n.manager.uid}))}),50),this.onCameraOrSizeUpdated=function(){J.emit("cameraStateChange",n.cameraState)},this.mainView=this.createMainView(),q.once("mainViewMounted").then((function(){n.addMainViewListener(),n.start(),n.ensureCameraAndSize(),n.startListenWritableChange()})),this.sideEffectManager.add((function(){return[q.on("startReconnect",(function(){ye(n.mainView)}))]})),this.createViewSync(),this.sideEffectManager.add((function(){return q.on("focusedChange",(function(e){if(void 0===e.focused){var t=n.store.getMainViewScenePath();t&&ve(n.manager.room,t)}}))})),this.size$.reaction((function(e){e&&J.emit("baseSizeChange",e)}))}var t;return U(e,[{key:"ensureCameraAndSize",value:function(){var e;if(!this.mainViewCamera||!this.mainViewSize){this.manager.dispatchInternalEvent(V.InitMainViewCamera),this.storeCamera(C({id:this.manager.uid},this.view.camera));var t=null==(e=this.manager.boxManager)?void 0:e.stageRect;t&&!this.mainViewSize&&this.storeSize({id:this.manager.uid,width:t.width,height:t.height})}}},{key:"start",value:function(){this.started||(this.removeCameraListener(),this.addCameraListener(),this.addCameraReaction(),this.started=!0)}},{key:"createMainView",value:function(){var e=et(this.manager.displayer),t=this.store.getMainViewScenePath();return t&&me(e,t),this.view$.setValue(e),e}},{key:"onReconnect",value:function(){if(this.didRelease)this.rebind();else{var e=this.store.getMainViewScenePath();this.setFocusScenePath(e)}}},{key:"setFocusScenePath",value:function(e){if(e)return me(this.view,e)}},{key:"rebind",value:function(){var e=this.mainView.divElement,t=this.mainView.disableCameraTransform,n=C({},this.mainView.camera);this.stop(),ye(this.mainView),this.removeMainViewListener(),this.mainView=this.createMainView(),this.mainView.disableCameraTransform=t,this.mainView.divElement=e,this.mainView.moveCamera(C(C({},n),{},{animationMode:u.AnimationMode.Immediately})),this.addMainViewListener(),this.start()}},{key:"addMainViewListener",value:function(){this.mainViewIsAddListener||this.view.divElement&&(this.view.divElement.addEventListener("click",this.mainViewClickListener),this.view.divElement.addEventListener("touchend",this.mainViewClickListener),this.mainViewIsAddListener=!0)}},{key:"removeMainViewListener",value:function(){this.view.divElement&&(this.view.divElement.removeEventListener("click",this.mainViewClickListener),this.view.divElement.removeEventListener("touchend",this.mainViewClickListener)),this.mainViewIsAddListener=!1}},{key:"mainViewClickHandler",value:(t=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.manager.canOperate){e.next=2;break}return e.abrupt("return");case 2:this.store.cleanFocus(),null==(t=this.manager.boxManager)||t.blurAllBox();case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"addCameraListener",value:function(){this.view.callbacks.on("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.on("onSizeUpdated",this.onCameraOrSizeUpdated)}},{key:"removeCameraListener",value:function(){this.view.callbacks.off("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.off("onSizeUpdated",this.onCameraOrSizeUpdated)}},{key:"stop",value:function(){this.manager.refresher.remove(Xe.MainViewCamera),this.manager.refresher.remove(Xe.MainViewSize),this.started=!1}},{key:"destroy",value:function(){this.camera$.destroy(),this.size$.destroy(),this.view$.destroy(),this.removeMainViewListener(),this.stop(),this.sideEffectManager.flushAll()}},{key:"mainViewCamera",get:function(){return this.store.getMainViewCamera()}},{key:"mainViewSize",get:function(){return this.store.getMainViewSize()}},{key:"didRelease",get:function(){return(0,s.get)(this.view,["didRelease"])}},{key:"view",get:function(){return this.mainView}},{key:"cameraState",get:function(){return C(C({},this.view.camera),this.view.size)}}]),e}(),rt=function(e){return function(t,n){if(void 0!==t){if(u.listenUpdated){var r=function(t){t.map((function(e){return e.kind})).includes(e)&&n()};return(0,u.listenUpdated)(t,r),n(),function(){return(0,u.unlistenUpdated)(t,r)}}return(0,u.reaction)((function(){return t}),(function(){n()}),{fireImmediately:!0})}}},it=function(e,t,n){var r=null,i=(0,u.reaction)(e,(function(){r&&(r(),r=null);var i=e();(0,s.isObject)(i)?(r=function(){return(0,u.unlistenUpdated)(i,t)},(0,u.listenUpdated)(i,t)):null==n||n(i)}),{fireImmediately:!0});return function(){null==r||r(),i()}};rt(u.UpdateEventKind.Removed),rt(u.UpdateEventKind.Inserted);var at=function(){function e(t){var n=this;P(this,e),this.context=t,this.addRedoUndoListeners=function(e){if(void 0===e)n.addViewCallbacks(n.context.mainView(),n.onCanRedoStepsUpdate,n.onCanUndoStepsUpdate);else{var t=n.context.getAppProxy(e);t&&t.view&&n.addViewCallbacks(t.view,n.onCanRedoStepsUpdate,n.onCanUndoStepsUpdate)}},this.addViewCallbacks=function(e,t,n){t(e.canRedoSteps),n(e.canUndoSteps),e.callbacks.on("onCanRedoStepsUpdate",t),e.callbacks.on("onCanUndoStepsUpdate",n)},this.disposeViewCallbacks=function(e){e.callbacks.off("onCanRedoStepsUpdate",n.onCanRedoStepsUpdate),e.callbacks.off("onCanUndoStepsUpdate",n.onCanUndoStepsUpdate)},this.onCanRedoStepsUpdate=function(e){J.emit("canRedoStepsChange",e)},this.onCanUndoStepsUpdate=function(e){J.emit("canUndoStepsChange",e)},this.disposePrevFocusViewRedoUndoListeners=function(e){var t=void 0;if(void 0===e)t=n.context.mainView();else{var r=n.context.getAppProxy(e);r&&r.view&&(t=r.view)}t&&n.disposeViewCallbacks(t)},q.on("focusedChange",(function(e){n.disposePrevFocusViewRedoUndoListeners(e.prev),setTimeout((function(){n.addRedoUndoListeners(e.focused)}),0)})),q.on("rootDirRemoved",(function(){n.disposePrevFocusViewRedoUndoListeners(t.focus()),n.addRedoUndoListeners(t.focus())})),this.addRedoUndoListeners(t.focus())}return U(e,[{key:"destroy",value:function(){this.disposePrevFocusViewRedoUndoListeners(this.context.focus())}}]),e}();function ot(e,t,n){return e<t?t:e>n?n:e}var st=function(){function e(t){var n,r=this;P(this,e),this.manager=t,this.sideEffect=new p.SideEffectManager,this.baseWidth=1600,this.baseHeight=4800,this.initScroll=function(){var e=r._size$.value.height/2/r._scale$.value,t=r._scrollTop$.value;r._scrollTop$.setValue(ot(t,e,r.baseHeight-e)-.01)},this.getWhiteboardElement=function(e){return e&&e.querySelector(".netless-window-manager-main-view")},this.onWheel=function(e){var t,n=e.target;if(r.manager.canOperate&&(null==(t=r._whiteboard$.value)?void 0:t.contains(n))){e.preventDefault(),e.stopPropagation();var i=e.deltaY||0,a=r._size$.value.width;if(i&&a>0){var o=r._size$.value.height/2/r._scale$.value,s=r._scrollTop$.value+i/r._scale$.value;r.scrollStorage.setState({scrollTop:ot(s,o,r.baseHeight-o)}),J.emit("userScroll")}}},this._root$=new d.Val(null),this._mainView$=new d.Val(this.manager.mainView),this._mainView$.value.disableCameraTransform=!1,(null==(n=t.scrollBaseSize$)?void 0:n.value)&&(this.baseWidth=t.scrollBaseSize$.value.width,this.baseHeight=t.scrollBaseSize$.value.height),this.scrollStorage=function(e){return new l.Storage({plugin$:new d.Val(e.windowManger),isWritable$:e.isWritable$,namespace:"scrollStorage",defaultState:{scrollTop:0}})}(t);var i=new d.Val(this.scrollStorage.state.scrollTop);this._scrollTop$=i,this.sideEffect.push(this.scrollStorage.on("stateChanged",(function(){r._scrollTop$.setValue(r.scrollStorage.state.scrollTop)})));var a=new d.Val({width:0,height:0},{compare:function(e,t){return e.width===t.width&&e.height===t.height}});this._size$=a,this.sideEffect.add((function(){var e=a.setValue.bind(a);return e(r._mainView$.value.size),r._mainView$.value.callbacks.on("onSizeUpdated",e),function(){return r._mainView$.value.callbacks.off("onSizeUpdated",e)}})),this.sideEffect.add((function(){var e=function(e){if(r.manager.canOperate){var t=a.value.height/2/o.value,n=e.centerY;r.scrollStorage.setState({scrollTop:ot(n,t,r.baseHeight-t)}),J.emit("userScroll")}};return r._mainView$.value.callbacks.on("onCameraUpdatedByDevice",e),function(){return r._mainView$.value.callbacks.off("onCameraUpdatedByDevice",e)}}));var o=(0,d.derive)(a,(function(e){return e.width/r.baseWidth}));this._scale$=o;var u=new d.Val(0);this.sideEffect.push((0,d.combine)([i,a,o]).subscribe((function(e){var t=v(e,3),n=t[0],r=t[1],i=t[2];if(i>0){var a=r.height/i;u.setValue(Math.max(n/a-.5,0))}}))),this._page$=u,this.sideEffect.push((0,d.combine)([i,o]).subscribe((function(e){var t=v(e,2),n=t[0],i=t[1];r.updateBound(n,a.value,i)}))),this.sideEffect.push(a.reaction((function(){r.updateScroll(i.value)})));var c=(0,d.derive)(this._root$,this.getWhiteboardElement);this._whiteboard$=c,this.sideEffect.push(c.reaction((function(e){(null==e?void 0:e.parentElement)&&r.sideEffect.addEventListener(e.parentElement,"wheel",r.onWheel,{capture:!0,passive:!1},"wheel")})));var h=(0,d.combine)([this._size$,this._scale$],(function(e){var t=v(e,2),n=t[0],i=t[1],a=n.height/2/i;return(r.baseHeight-a)/a/2-.51}));this.scrollState$=(0,d.combine)([this._scrollTop$,this._page$,h],(function(e){var t=v(e,3),n=t[0],r=t[1],i=t[2];return{scrollTop:(0,s.round)(n,2),page:(0,s.round)(r,2),maxScrollPage:(0,s.round)(i,2)}})),this.updateScroll(i.value),this.sideEffect.push(this.scrollState$.subscribe((function(e){return J.emit("scrollStateChange",e)}))),this.sideEffect.push((0,d.combine)([this._size$,this._scale$]).subscribe((function(e){var t=v(e,2),n=t[0],i=t[1];n.height>0&&i>0&&(r.initScroll(),r.sideEffect.flush("initScroll"))})),"initScroll")}return U(e,[{key:"setRoot",value:function(e){this._root$.setValue(e)}},{key:"updateScroll",value:function(e){this._mainView$.value.moveCamera({centerY:e,animationMode:u.AnimationMode.Immediately})}},{key:"updateBound",value:function(e,t,n){var r=t.height;n>0&&(this._mainView$.value.moveCameraToContain({originX:0,originY:e-r/n/2,width:this.baseWidth,height:r/n,animationMode:u.AnimationMode.Immediately}),this._mainView$.value.setCameraBound({damping:1,maxContentMode:function(){return n},minContentMode:function(){return n},centerX:this.baseWidth/2,centerY:this.baseHeight/2,width:this.baseWidth,height:this.baseHeight}))}},{key:"dispose",value:function(){this.sideEffect.flushAll(),this.scrollStorage.disconnect(),this._root$.destroy(),this._scale$.destroy(),this._scrollTop$.destroy(),this._whiteboard$.destroy(),this.scrollState$.destroy(),this._page$.destroy(),this._size$.destroy(),this._mainView$.destroy()}}]),e}(),ut=function(){function e(t){var n,r=this;P(this,e),this.windowManger=t,this.appProxies=new Map,this.appStatus=new Map,this.store=Je,this.isReplay=this.windowManger.isReplay,this.mainViewScenesLength=0,this.scrollBaseSize$=new d.Val(null),this.callbacksNode=null,this.appCreateQueue=new K,this.sceneIndex$=new d.Val(void 0),this.focused$=new d.Val(void 0),this.members$=new d.Val([]),this.isWritable$=new d.Val(Boolean(null==(n=this.room)?void 0:n.isWritable)),this.sideEffectManager=new p.SideEffectManager,this.sceneState=null,this.rootDirRemoving=!1,this.onRemoveScenes=function(){var e=_(regeneratorRuntime.mark((function e(t){var n,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t.scenePath)!==$){e.next=6;break}return e.next=4,r.onRootDirRemoved();case 4:return r.dispatchInternalEvent(V.RootDirRemoved),e.abrupt("return");case 6:if(!De(a)){e.next=17;break}if(o=r.mainView.focusSceneIndex||0,(s=null==(n=r.callbacksNode)?void 0:n.scenes[o])||(o=0,s=null==(i=r.callbacksNode)?void 0:i.scenes[o]),!s){e.next=13;break}return e.next=13,r.setMainViewScenePath("".concat($).concat(s));case 13:return e.next=15,r.setMainViewSceneIndex(o);case 15:e.next=18;break;case 17:r.appProxies.forEach((function(e){e.onRemoveScene(a)}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.onReadonlyChanged=function(){r.appProxies.forEach((function(e){e.emitAppIsWritableChange()}))},this.onPlayerSeekStart=_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.closeAll();case 2:case"end":return e.stop()}}),e)}))),this.onPlayerSeekDone=function(){var e=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.attributesUpdateCallback(r.attributes.apps);case 2:r.appProxies.forEach((function(e){e.onSeek(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createRootDirScenesCallback=function(){var e,t=!1;r.callbacksNode&&(r.callbacksNode.dispose(),t=!0),r.callbacksNode=r.displayer.createScenesCallback($,{onAddScene:r.onSceneChange,onRemoveScene:(e=_(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.onSceneChange(t);case 2:q.emit("rootDirSceneRemoved",n);case 3:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})}),r.callbacksNode&&(r.updateSceneState(r.callbacksNode),r.mainViewScenesLength=r.callbacksNode.scenes.length,t&&r.emitMainViewScenesChange(r.callbacksNode.scenes.length))},this.removeSceneByIndex=function(){var e=_(regeneratorRuntime.mark((function e(t){var n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$e(t,r.windowManger.pageState),r.setSceneIndexWithoutSync(i),r.dispatchInternalEvent(V.SetAppFocusIndex,{type:"main",index:i}),a=null==(n=r.callbacksNode)?void 0:n.scenes[t],setTimeout((function(){a&&be(r.room,"".concat($).concat(a),t)}),100),e.abrupt("return",new Promise((function(e,t){q.once("rootDirSceneRemoved").then((function(t){t===a&&e(!0)})).catch((function(e){console.log("[WindowManager]: removePage error: ".concat(e)),t(!1)}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setSceneIndexWithoutSync=function(e){var t,n=null==(t=r.callbacksNode)?void 0:t.scenes[e];n&&r.mainViewProxy.setFocusScenePath("".concat($).concat(n))},this.onSceneChange=function(e){return r.mainViewScenesLength=e.scenes.length,r.updateSceneState(e),r.emitMainViewScenesChange(r.mainViewScenesLength)},this.emitMainViewScenesChange=function(e){return Promise.all([J.emit("mainViewScenesLengthChange",e),q.emit("changePageState")])},this.updateSceneState=function(e){var t=r.store.getMainViewSceneIndex()||0,n=e.scenes[t];n||(n=e.scenes[r.mainView.focusSceneIndex||0]),r.sceneState={scenePath:"".concat($).concat(n),contextPath:e.path,index:t,scenes:e.scenes.map((function(e){return{name:e}})),sceneName:n},J.emit("sceneStateChange",r.sceneState)},this.onBoxMove=function(e){r.dispatchInternalEvent(V.AppMove,e),r.store.updateAppState(e.appId,Z.Position,{x:e.x||0,y:e.y||0})},this.onBoxResize=function(e){e.width&&e.height&&(r.dispatchInternalEvent(V.AppResize,e),r.store.updateAppState(e.appId,Z.Size,{width:e.width,height:e.height}))},this.onBoxFocus=function(e){r.windowManger.safeSetAttributes({focus:e.appId})},this.onBoxClose=function(e){var t=r.appProxies.get(e.appId);t&&t.destroy(!1,!0,!0,e.error)},this.onBoxStateChange=function(e){r.dispatchInternalEvent(V.AppBoxStateChange,e)},this.addAppsChangeListener=function(){r.refresher.add("apps",(function(){return it((function(){return r.attributes.apps}),(function(){r.attributesUpdateCallback(r.attributes.apps)}))}))},this.addAppCloseListener=function(){var e;null==(e=r.refresher)||e.add("appsClose",(function(){return it((function(){return r.attributes.apps}),(function(e){e.some((function(e){return e.kind===u.UpdateEventKind.Removed}))&&r.onAppDelete(r.attributes.apps)}))}))},this.onMainViewIndexChange=function(e){void 0!==e&&r.sceneIndex$.value!==e&&(J.emit("mainViewSceneIndexChange",e),q.emit("changePageState"),r.callbacksNode&&r.updateSceneState(r.callbacksNode),r.sceneIndex$.setValue(e))},this.onFocusChange=function(e){var t;r.focused$.value!==e&&(J.emit("focusedChange",e),q.emit("focusedChange",{focused:e,prev:r.focused$.value}),r.focused$.setValue(e),void 0!==e&&(null==(t=r.boxManager)||t.focusBox({appId:e}),setTimeout((function(){var t=r.appProxies.get(e);t&&(t.onFocus(),fe.notifyApp(t.kind,"focus",{appId:e}))}),0)))},this.attributesUpdateCallback=(0,s.debounce)((function(e){return r._attributesUpdateCallback(e)}),100),this.onRegisteredChange=function(e){e&&Object.entries(e).forEach((function(e){var t=v(e,2),n=t[0],r=t[1];fe.appClasses.has(n)||fe.register({kind:n,src:r.src,name:r.name})}))},this.onMinimized=function(e){var t,n;(null==(t=r.boxManager)?void 0:t.minimized)!==e&&(!0===e&&(null==(n=r.boxManager)||n.blurAllBox()),setTimeout((function(){var t;null==(t=r.boxManager)||t.setMinimized(Boolean(e))}),0))},this.onAppDelete=function(){var e=_(regeneratorRuntime.mark((function e(t){var n,i,a,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.keys(t),i=y(r.appProxies.entries()),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=11;break}if(o=v(a.value,2),s=o[0],u=o[1],n.includes(s)){e.next=9;break}return e.next=9,u.destroy(!0,!1,!0);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),i.e(e.t0);case 16:return e.prev=16,i.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),this.closeAll=_(regeneratorRuntime.mark((function e(){var t,n,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=y(r.appProxies.entries()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return i=v(n.value,2),i[0],a=i[1],e.next=7,a.destroy(!0,!1,!0);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),this.displayerStateListener=function(e){var t=e.sceneState;if(t){var n=t.scenePath;r.appProxies.forEach((function(e){e.scenePath&&n.startsWith(e.scenePath)&&(e.emitAppSceneStateChange(t),e.setFullPath(n))}))}r.appProxies.forEach((function(t){t.appEmitter.emit("roomStateChange",e)})),e.roomMembers&&r.members$.setValue(Ye(e.roomMembers)),q.emit("observerIdChange",r.displayer.observerId),e.memberState&&q.emit("memberStateChange",(0,u.toJS)(e.memberState))},this.displayerWritableListener=function(e){var t,n,i=!e,a=void 0===r.windowManger.readonly||!r.windowManger.readonly;void 0===r.windowManger.readonly?null==(t=r.boxManager)||t.setReadonly(e):null==(n=r.boxManager)||n.setReadonly(!(i&&a)),r.appProxies.forEach((function(e){e.emitAppIsWritableChange()})),i&&r.room&&!0===r.room.disableSerialization&&(r.room.disableSerialization=!1),q.emit("writableChange",i),r.isWritable$.setValue(i)},this.updateSceneIndex=function(){var e=r.store.getMainViewScenePath(),t=Ie(e),n=Me(r.displayer)[t];if(n.length){var i=e.replace(t,"").replace("/",""),a=n.findIndex((function(e){return e.name===i}));(0,s.isInteger)(a)&&a>=0&&r.safeSetAttributes({_mainSceneIndex:a})}},this.updateRootDirRemoving=function(e){r.rootDirRemoving=e},this.displayer=t.displayer,this.store.setContext({getAttributes:function(){return r.attributes},safeSetAttributes:function(e){return r.safeSetAttributes(e)},safeUpdateAttributes:function(e,t){return r.safeUpdateAttributes(e,t)}}),this.mainViewProxy=new nt(this),this.viewManager=new qe(this.displayer),this.appListeners=new Ae(this),this.displayer.callbacks.on(this.eventName,this.displayerStateListener),this.appListeners.addListeners(),this.refresher=xc,this.refresher.setRoom(this.room),this.refresher.setContext({emitter:q}),this.sideEffectManager.add((function(){return function(){var e,t,n;r.appCreateQueue.destroy(),r.mainViewProxy.destroy(),null==(e=r.refresher)||e.destroy(),r.viewManager.destroy(),null==(t=r.boxManager)||t.destroy(),null==(n=r.callbacksNode)||n.dispose()}})),q.once("onCreated").then((function(){return r.onCreated()})),q.on("onReconnected",(function(){return r.onReconnected()})),(0,u.isPlayer)(this.displayer)&&(q.on("seekStart",this.onPlayerSeekStart),q.on("seek",this.onPlayerSeekDone)),q.on("removeScenes",this.onRemoveScenes),q.on("setReadonly",this.onReadonlyChanged),this.createRootDirScenesCallback(),fe.setSyncRegisterApp((function(e){r.safeUpdateAttributes([Xe.Registered,e.kind],e)})),this.members$.setValue(Ye(this.displayer.state.roomMembers)),q.on("mainViewMounted",(function(){r.windowManger.viewMode$.subscribe((function(e){var t,n=r.windowManger.playground$.value;if("scroll"===e&&n){var i=new st(r);r.scrollMode=i,i.setRoot(n)}else null==(t=r.scrollMode)||t.dispose(),r.scrollMode=void 0}))}))}var t,n,r,i,a,o,c,l,h,f,g;return U(e,[{key:"onRootDirRemoved",value:(g=_(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(o.length>0&&void 0!==o[0])||o[0],e.next=3,this.setMainViewScenePath(X);case 3:this.createRootDirScenesCallback(),n=y(this.appProxies.entries()),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=14;break}if(i=v(r.value,2),a=i[0],!i[1].view){e.next=12;break}return e.next=12,this.closeApp(a,t);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:return this.mainViewProxy.rebind(),e.next=25,q.emit("rootDirRemoved");case 25:this.updateRootDirRemoving(!1);case 26:case"end":return e.stop()}}),e,this,[[5,16,19,22]])}))),function(){return g.apply(this,arguments)})},{key:"getMainViewSceneDir",value:function(){var e=this.store.getMainViewScenePath();if(e)return Ie(e);throw new Error("[WindowManager]: mainViewSceneDir not found")}},{key:"onCreated",value:(f=_(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.attributesUpdateCallback(this.attributes.apps);case 2:if(q.emit("updateManagerRect"),He.on("move",this.onBoxMove),He.on("resize",this.onBoxResize),He.on("focus",this.onBoxFocus),He.on("close",this.onBoxClose),He.on("boxStateChange",this.onBoxStateChange),this.addAppsChangeListener(),this.addAppCloseListener(),this.refresher.add("maximized",(function(){return(0,u.autorun)((function(){var e,t=r.attributes.maximized;null==(e=r.boxManager)||e.setMaximized(Boolean(t))}))})),this.refresher.add("minimized",(function(){return(0,u.autorun)((function(){var e=r.attributes.minimized;r.onMinimized(e)}))})),this.refresher.add("mainViewIndex",(function(){return(0,u.autorun)((function(){var e=(0,s.get)(r.attributes,"_mainSceneIndex");r.onMainViewIndexChange(e)}))})),this.refresher.add("focusedChange",(function(){return(0,u.autorun)((function(){var e=(0,s.get)(r.attributes,"focus");r.onFocusChange(e)}))})),this.refresher.add("registeredChange",(function(){return(0,u.autorun)((function(){var e=(0,s.get)(r.attributes,Xe.Registered);r.onRegisteredChange(e)}))})),this.attributes.apps&&0!==Object.keys(this.attributes.apps).length){e.next=20;break}if(n=this.store.getMainViewScenePath()){e.next=19;break}return e.abrupt("return");case 19:this.resetScenePath(n);case 20:this.displayerWritableListener(!(null==(t=this.room)?void 0:t.isWritable)),this.displayer.callbacks.on("onEnableWriteNowChanged",this.displayerWritableListener),this.focused$.setValue(this.attributes.focus),this.sideEffectManager.add((function(){var e=new at({mainView:function(){return r.mainViewProxy.view},focus:function(){return r.attributes.focus},getAppProxy:function(e){return r.appProxies.get(e)}});return function(){return e.destroy()}}));case 24:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"_attributesUpdateCallback",value:(h=_(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&Nc.container){0===(n=Object.keys(t)).length&&this.appCreateQueue.emitReady(),r=n.map((function(e){return!0===t[e].setup||void 0===t[e].setup?{id:e,createdAt:t[e].createdAt}:{}})),this.isReplay&&(r=n.map((function(e){return{id:e,createdAt:t[e].createdAt}}))),i=y((0,s.orderBy)(r,"createdAt","asc"));try{for(o=function(){var e=a.value.id;if(e&&!u.appProxies.has(e)&&!u.appStatus.has(e)){var n=t[e];try{if(!u.attributes[e])throw new Error("appAttributes is undefined");u.appCreateQueue.push((function(){return u.appStatus.set(e,G.StartCreate),u.baseInsertApp({kind:n.kind,options:n.options,isDynamicPPT:n.isDynamicPPT},e,!1)})),u.focusByAttributes(t)}catch(e){console.warn("[WindowManager]: Insert App Error",e)}}},i.s();!(a=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}}case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"refresh",value:function(){this.attributesUpdateCallback(this.attributes.apps)}},{key:"setBoxManager",value:function(e){this.boxManager=e,this.mainViewProxy.createViewSync()}},{key:"resetMaximized",value:function(){var e;null==(e=this.boxManager)||e.setMaximized(Boolean(this.store.getMaximized()))}},{key:"resetMinimized",value:function(){var e;null==(e=this.boxManager)||e.setMinimized(Boolean(this.store.getMinimized()))}},{key:"bindMainView",value:function(e,t){var n=this.mainViewProxy.view;n.disableCameraTransform=t,Te(30).then((function(){n.divElement=e,q.emit("mainViewMounted")})),n.focusScenePath||this.setMainViewFocusPath()}},{key:"setMainViewFocusPath",value:function(e){var t,n=e||this.store.getMainViewScenePath();if(n)return me(this.mainView,n),(null==(t=this.mainView)?void 0:t.focusScenePath)===n}},{key:"resetScenePath",value:function(e){this.displayer.state.sceneState.scenePath!==e&&ve(this.room,e)}},{key:"addApp",value:(l=_(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue("addApp",t),e.next=3,this.beforeAddApp(t,n);case 3:return r=e.sent,i=r.appId,a=r.needFocus,e.next=8,this.baseInsertApp(t,i,!0,a);case 8:return o=e.sent,this.afterAddApp(o),e.abrupt("return",null==o?void 0:o.id);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"beforeAddApp",value:(c=_(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t.kind);case 2:return a=e.sent,this.appStatus.set(a,G.StartCreate),o=null!==(r=t.attributes)&&void 0!==r?r:{},this.safeUpdateAttributes([a],o),this.store.setupAppAttributes(t,a,n),(s=!(null==(i=this.boxManager)?void 0:i.minimized))&&this.store.setAppFocus(a,!0),e.abrupt("return",{appId:a,needFocus:s});case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"afterAddApp",value:function(e){var t,n;if(e&&e.box){var r=e.box;He.emit("move",{appId:e.id,x:r.intrinsicX||0,y:r.intrinsicY||0}),this.store.updateAppState(e.id,Z.ZIndex,r.zIndex)}(null==(t=this.boxManager)?void 0:t.minimized)&&(null==(n=this.boxManager)||n.setMinimized(!1,!1))}},{key:"closeApp",value:(o=_(regeneratorRuntime.mark((function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!(i.length>1&&void 0!==i[1])||i[1],(r=this.appProxies.get(t))&&r.destroy(!0,n,!1);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"baseInsertApp",value:(a=_(regeneratorRuntime.mark((function e(t,n,r,i){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appProxies.has(n)){e.next=3;break}return console.warn("[WindowManager]: app duplicate exists and cannot be created again"),e.abrupt("return");case 3:if(!(a=new Ke(t,this,n,r))){e.next=11;break}return e.next=7,a.baseInsertApp(i);case 7:return this.appStatus.delete(n),e.abrupt("return",a);case 11:throw this.appStatus.delete(n),new Error("[WindowManger]: initialize AppProxy failed");case 13:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return a.apply(this,arguments)})},{key:"safeSetAttributes",value:function(e){this.windowManger.safeSetAttributes(e)}},{key:"safeUpdateAttributes",value:function(e,t){this.windowManger.safeUpdateAttributes(e,t)}},{key:"setMainViewScenePath",value:(i=_(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.room){e.next=19;break}if(n=this.displayer.scenePathType(t),Ie(t)===$){e.next=5;break}throw new Error('[WindowManager]: main view scenePath must in root dir "/"');case 5:if(n!==u.ScenePathType.None){e.next=9;break}throw new Error("[WindowManager]: ".concat(t," not valid scene"));case 9:if(n!==u.ScenePathType.Page){e.next=14;break}return e.next=12,this._setMainViewScenePath(t);case 12:e.next=19;break;case 14:if(n!==u.ScenePathType.Dir){e.next=19;break}if(!(r=we(this.displayer,t))){e.next=19;break}return e.next=19,this._setMainViewScenePath(r);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_setMainViewScenePath",value:(r=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setMainViewFocusPath(t)&&(this.safeSetAttributes({_mainScenePath:t}),this.store.setMainViewFocusPath(this.mainView),this.updateSceneIndex(),this.dispatchSetMainViewScenePath(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setMainViewSceneIndex",value:(n=_(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.room){e.next=11;break}if(this.store.getMainViewSceneIndex()!==t){e.next=3;break}return e.abrupt("return");case 3:if(r=null==(n=this.callbacksNode)?void 0:n.scenes[t],i="".concat($).concat(r),!r){e.next=10;break}this.setMainViewFocusPath(i)&&(this.store.setMainViewScenePath(i),this.safeSetAttributes({_mainSceneIndex:t}),this.dispatchSetMainViewScenePath(i)),e.next=11;break;case 10:throw new Error("[WindowManager]: ".concat(t," not valid index"));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"dispatchSetMainViewScenePath",value:function(e){this.dispatchInternalEvent(V.SetMainViewScenePath,{nextScenePath:e}),ve(this.room,e)}},{key:"getAppInitPath",value:function(e){var t,n=this.store.getAppAttributes(e);if(n)return null==(t=null==n?void 0:n.options)?void 0:t.scenePath}},{key:"safeDispatchMagixEvent",value:function(e,t){this.canOperate&&this.displayer.dispatchMagixEvent(e,t)}},{key:"focusByAttributes",value:function(e){var t;if(e&&Object.keys(e).length===(null==(t=this.boxManager)?void 0:t.boxSize)){var n=this.store.focus;n&&this.boxManager.focusBox({appId:n})}}},{key:"onReconnected",value:(t=_(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.attributesUpdateCallback(this.attributes.apps),t=Array.from(this.appProxies.values()),n=t.map((function(e){return e.onReconnected()})),this.mainViewProxy.onReconnect(),e.next=6,Promise.all(n);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"notifyContainerRectUpdate",value:function(e){this.appProxies.forEach((function(t){t.appEmitter.emit("containerRectUpdate",e)}))}},{key:"dispatchInternalEvent",value:function(e,t){this.safeDispatchMagixEvent(Y,{eventName:e,payload:t})}},{key:"destroy",value:function(){var e;this.displayer.callbacks.off(this.eventName,this.displayerStateListener),this.displayer.callbacks.off("onEnableWriteNowChanged",this.displayerWritableListener),this.appListeners.removeListeners(),He.clearListeners(),q.clearListeners(),this.appProxies.size&&this.appProxies.forEach((function(e){e.destroy(!0,!1,!0)})),J.clearListeners(),this.sideEffectManager.flushAll(),this.sceneIndex$.destroy(),this.focused$.destroy(),this.members$.destroy(),null==(e=this.scrollMode)||e.dispose()}},{key:"eventName",get:function(){return(0,u.isRoom)(this.displayer)?"onRoomStateChanged":"onPlayerStateChanged"}},{key:"attributes",get:function(){return this.windowManger.attributes}},{key:"canOperate",get:function(){return this.windowManger.canOperate}},{key:"room",get:function(){return(0,u.isRoom)(this.displayer)?this.displayer:void 0}},{key:"mainView",get:function(){return this.mainViewProxy.view}},{key:"focusApp",get:function(){if(this.store.focus)return this.appProxies.get(this.store.focus)}},{key:"uid",get:function(){var e;return(null==(e=this.room)?void 0:e.uid)||""}}]),e}(),ct=function(){return ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ct.apply(this,arguments)};function lt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var dt=0,pt="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),n=Math.max(0,16.7-(t-dt));dt=t+n,setTimeout((function(){return e(dt)}),n)},ht=1/60*1e3,ft=!0,gt=!1,mt=!1,yt={delta:0,timestamp:0},vt=["read","update","preRender","render","postRender"],bt=function(e){return gt=e},wt=vt.reduce((function(e,t){var n,r,i,a,o,s,u,c,l;return e[t]=(n=bt,r=[],i=[],a=0,o=!1,s=0,u=new WeakSet,c=new WeakSet,l={cancel:function(e){var t=i.indexOf(e);u.add(e),-1!==t&&i.splice(t,1)},process:function(e){var t,d;if(o=!0,r=(t=[i,r])[0],(i=t[1]).length=0,a=r.length)for(s=0;s<a;s++)(d=r[s])(e),!0!==c.has(d)||u.has(d)||(l.schedule(d),n(!0));o=!1},schedule:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var s=n&&o,l=s?r:i;u.delete(e),t&&c.add(e),-1===l.indexOf(e)&&(l.push(e),s&&(a=r.length))}}),e}),{}),Mt=vt.reduce((function(e,t){var n=wt[t];return e[t]=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),gt||Nt(),n.schedule(e,t,r),e},e}),{}),xt=function(e){return wt[e].process(yt)},It=function e(t){gt=!1,yt.delta=ft?ht:Math.max(Math.min(t-yt.timestamp,40),1),ft||(ht=yt.delta),yt.timestamp=t,mt=!0,vt.forEach(xt),mt=!1,gt&&(ft=!1,pt(e))},Nt=function(){gt=!0,ft=!0,mt||pt(It)},Tt=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},Dt=function(e){return e%1?Number(e.toFixed(5)):e},At=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,kt={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},St=ct(ct({},kt),{transform:Tt(0,1)}),Et=ct(ct({},kt),{default:1}),jt=function(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},Ct=jt("deg"),zt=jt("%"),Ot=jt("px"),Lt=ct(ct({},zt),{parse:function(e){return zt.parse(e)/100},transform:function(e){return zt.transform(100*e)}}),_t=Tt(0,255),Pt=function(e){return void 0!==e.red},Rt=function(e){return void 0!==e.hue};var Ut=function(e){return function(t){if("string"!=typeof t)return t;for(var n={},r=function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))}(t).replace(/(,|\/)/g," ").split(/ \s*/),i=0;i<4;i++)n[e[i]]=void 0!==r[i]?parseFloat(r[i]):1;return n}},Bt=ct(ct({},kt),{transform:function(e){return Math.round(_t(e))}});function Vt(e,t){return e.startsWith(t)&&At.test(e)}var Yt,Qt={test:function(e){return"string"==typeof e?Vt(e,"rgb"):Pt(e)},parse:Ut(["red","green","blue","alpha"]),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,a=void 0===i?1:i;return function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha;return"rgba("+t+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({red:Bt.transform(t),green:Bt.transform(n),blue:Bt.transform(r),alpha:Dt(St.transform(a))})}},Zt={test:function(e){return"string"==typeof e?Vt(e,"hsl"):Rt(e)},parse:Ut(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,a=void 0===i?1:i;return function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;return"hsla("+t+", "+n+", "+r+", "+(void 0===i?1:i)+")"}({hue:Math.round(t),saturation:zt.transform(Dt(n)),lightness:zt.transform(Dt(r)),alpha:Dt(St.transform(a))})}},Wt=ct(ct({},Qt),{test:function(e){return"string"==typeof e&&Vt(e,"#")},parse:function(e){var t="",n="",r="";return e.length>4?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),t+=t,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),Gt={test:function(e){return"string"==typeof e&&At.test(e)||Pt(e)||Rt(e)},parse:function(e){return Qt.test(e)?Qt.parse(e):Zt.test(e)?Zt.parse(e):Wt.test(e)?Wt.parse(e):e},transform:function(e){return Pt(e)?Qt.transform(e):Rt(e)?Zt.transform(e):e}},Ft=function(e){var t=e.onRead,n=e.onRender,r=e.uncachedValues,i=void 0===r?new Set:r,a=e.useCache,o=void 0===a||a;return function(e){void 0===e&&(e={});var r=lt(e,[]),a={},s=[],u=!1;function c(e,t){e.startsWith("--")&&(r.hasCSSVariable=!0);var n=a[e];a[e]=t,a[e]!==n&&(-1===s.indexOf(e)&&s.push(e),u||(u=!0,Mt.render(l.render)))}var l={get:function(e,n){return void 0===n&&(n=!1),!n&&o&&!i.has(e)&&void 0!==a[e]?a[e]:t(e,r)},set:function(e,t){if("string"==typeof e)c(e,t);else for(var n in e)c(n,e[n]);return this},render:function(e){return void 0===e&&(e=!1),(u||!0===e)&&(n(a,r,s),u=!1,s.length=0),this}};return l}},Ht=/([a-z])([A-Z])/g,$t=function(e){return e.replace(Ht,"$1-$2").toLowerCase()},Xt=new Map,Jt=new Map,Kt=["Webkit","Moz","O","ms",""],qt=Kt.length,en="undefined"!=typeof document,tn=function(e,t){return Jt.set(e,$t(t))},nn=function(e,t){void 0===t&&(t=!1);var n=t?Jt:Xt;return n.has(e)||(en?function(e){Yt=Yt||document.createElement("div");for(var t=0;t<qt;t++){var n=Kt[t],r=""===n,i=r?e:n+e.charAt(0).toUpperCase()+e.slice(1);if(i in Yt.style||r){if(r&&"clipPath"===e&&Jt.has(e))return;Xt.set(e,i),tn(e,(r?"":"-")+$t(i))}}}(e):function(e){tn(e,e)}(e)),n.get(e)||e},rn=["","X","Y","Z"],an=["translate","scale","rotate","skew","transformPerspective"].reduce((function(e,t){return rn.reduce((function(e,n){return e.push(t+n),e}),e)}),["x","y","z"]),on=an.reduce((function(e,t){return e[t]=!0,e}),{});function sn(e){return!0===on[e]}function un(e,t){return an.indexOf(e)-an.indexOf(t)}var cn=new Set(["originX","originY","originZ"]);function ln(e){return cn.has(e)}var dn=ct(ct({},kt),{transform:Math.round}),pn={color:Gt,backgroundColor:Gt,outlineColor:Gt,fill:Gt,stroke:Gt,borderColor:Gt,borderTopColor:Gt,borderRightColor:Gt,borderBottomColor:Gt,borderLeftColor:Gt,borderWidth:Ot,borderTopWidth:Ot,borderRightWidth:Ot,borderBottomWidth:Ot,borderLeftWidth:Ot,borderRadius:Ot,radius:Ot,borderTopLeftRadius:Ot,borderTopRightRadius:Ot,borderBottomRightRadius:Ot,borderBottomLeftRadius:Ot,width:Ot,maxWidth:Ot,height:Ot,maxHeight:Ot,size:Ot,top:Ot,right:Ot,bottom:Ot,left:Ot,padding:Ot,paddingTop:Ot,paddingRight:Ot,paddingBottom:Ot,paddingLeft:Ot,margin:Ot,marginTop:Ot,marginRight:Ot,marginBottom:Ot,marginLeft:Ot,rotate:Ct,rotateX:Ct,rotateY:Ct,rotateZ:Ct,scale:Et,scaleX:Et,scaleY:Et,scaleZ:Et,skew:Ct,skewX:Ct,skewY:Ct,distance:Ot,translateX:Ot,translateY:Ot,translateZ:Ot,x:Ot,y:Ot,z:Ot,perspective:Ot,opacity:St,originX:Lt,originY:Lt,originZ:Ot,zIndex:dn,fillOpacity:St,strokeOpacity:St,numOctaves:dn},hn=function(e){return pn[e]},fn=function(e,t){return t&&"number"==typeof e?t.transform(e):e},gn="scrollLeft",mn="scrollTop",yn=new Set([gn,mn]),vn=new Set([gn,mn,"transform"]),bn={x:"translateX",y:"translateY",z:"translateZ"};function wn(e){return"function"==typeof e}function Mn(e,t,n,r,i,a,o,s){void 0===t&&(t=!0),void 0===n&&(n={}),void 0===r&&(r={}),void 0===i&&(i={}),void 0===a&&(a=[]),void 0===o&&(o=!1),void 0===s&&(s=!0);var u=!0,c=!1,l=!1;for(var d in e){var p=e[d],h=hn(d),f=fn(p,h);sn(d)?(c=!0,r[d]=f,a.push(d),u&&(h.default&&p!==h.default||!h.default&&0!==p)&&(u=!1)):ln(d)?(i[d]=f,l=!0):vn.has(d)&&wn(f)||(n[nn(d,o)]=f)}return(c||"function"==typeof e.transform)&&(n.transform=function(e,t,n,r,i,a){void 0===a&&(a=!0);var o="",s=!1;n.sort(un);for(var u=n.length,c=0;c<u;c++){var l=n[c];o+=(bn[l]||l)+"("+t[l]+") ",s="z"===l||s}return!s&&i?o+="translateZ(0)":o=o.trim(),wn(e.transform)?o=e.transform(t,r?"":o):a&&r&&(o="none"),o}(e,r,a,u,t,s)),l&&(n.transformOrigin=(i.originX||"50%")+" "+(i.originY||"50%")+" "+(i.originZ||0)),n}function xn(e){var t=void 0===e?{}:e,n=t.enableHardwareAcceleration,r=void 0===n||n,i=t.isDashCase,a=void 0===i||i,o=t.allowTransformNone,s=void 0===o||o,u={},c={},l={},d=[];return function(e){return d.length=0,Mn(e,r,u,c,l,d,a,s),u}}var In=Ft({onRead:function(e,t){var n=t.element,r=t.preparseOutput,i=hn(e);if(sn(e))return i&&i.default||0;if(yn.has(e))return n[e];var a=window.getComputedStyle(n,null).getPropertyValue(nn(e,!0))||0;return r&&i&&i.test(a)&&i.parse?i.parse(a):a},onRender:function(e,t,n){var r=t.element,i=t.buildStyles,a=t.hasCSSVariable;if(Object.assign(r.style,i(e)),a)for(var o=n.length,s=0;s<o;s++){var u=n[s];u.startsWith("--")&&r.style.setProperty(u,e[u])}-1!==n.indexOf(gn)&&(r.scrollLeft=e.scrollLeft),-1!==n.indexOf(mn)&&(r.scrollTop=e.scrollTop)},uncachedValues:yn});var Nn=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),Tn=function(e,t){return Ot.transform(e*t)},Dn={x:0,y:0,width:0,height:0};function An(e,t,n){return"string"==typeof e?e:Ot.transform(t+n*e)}var kn={enableHardwareAcceleration:!1,isDashCase:!1};function Sn(e,t,n,r,i,a){void 0===t&&(t=Dn),void 0===r&&(r=xn(kn)),void 0===i&&(i={style:{}}),void 0===a&&(a=!0);var o=e.attrX,s=e.attrY,u=e.originX,c=e.originY,l=e.pathLength,d=e.pathSpacing,p=void 0===d?1:d,h=e.pathOffset,f=void 0===h?0:h,g=r(lt(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]));for(var m in g){if("transform"===m)i.style.transform=g[m];else i[a&&!Nn.has(m)?$t(m):m]=g[m]}return(void 0!==u||void 0!==c||g.transform)&&(i.style.transformOrigin=function(e,t,n){return An(t,e.x,e.width)+" "+An(n,e.y,e.height)}(t,void 0!==u?u:.5,void 0!==c?c:.5)),void 0!==o&&(i.x=o),void 0!==s&&(i.y=s),void 0!==n&&void 0!==l&&(i[a?"stroke-dashoffset":"strokeDashoffset"]=Tn(-f,n),i[a?"stroke-dasharray":"strokeDasharray"]=Tn(l,n)+" "+Tn(p,n)),i}function En(e,t,n){void 0===n&&(n=!0);var r={style:{}},i=xn(kn);return function(a){return Sn(a,e,t,i,r,n)}}var jn=Ft({onRead:function(e,t){var n=t.element;if(sn(e=Nn.has(e)?e:$t(e))){var r=hn(e);return r&&r.default||0}return n.getAttribute(e)},onRender:function(e,t){var n=t.element,r=(0,t.buildAttrs)(e);for(var i in r)"style"===i?Object.assign(n.style,r.style):n.setAttribute(i,r[i])}}),Cn=Ft({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,n=void 0===t?0:t,r=e.scrollLeft,i=void 0===r?0:r;return window.scrollTo(i,n)}}),zn=new WeakMap,On=function(e,t){var n,r,i,a;return e===window?n=Cn(e):!function(e){return e instanceof HTMLElement||"function"==typeof e.click}(e)?function(e){return e instanceof SVGElement||"ownerSVGElement"in e}(e)&&(i=function(e){try{return function(e){return"function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}(e)}catch(e){return{x:0,y:0,width:0,height:0}}}(r=e),a=function(e){return"path"===e.tagName}(r)&&r.getTotalLength?r.getTotalLength():void 0,n=jn({element:r,buildAttrs:En(i,a)})):n=function(e,t){void 0===t&&(t={});var n=t.enableHardwareAcceleration,r=t.allowTransformNone,i=lt(t,["enableHardwareAcceleration","allowTransformNone"]);return In(ct({element:e,buildStyles:xn({enableHardwareAcceleration:n,allowTransformNone:r}),preparseOutput:!0},i))}(e,t),zn.set(e,n),n};function Ln(e,t){return function(e,t){return zn.has(e)?zn.get(e):On(e,t)}("string"==typeof e?document.querySelector(e):e,t)}var _n=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==O(e)||!e||"object"!==O(t)||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<a.length;u++){var c=a[u];if(!s(c))return!1;var l=e[c],d=t[c];if(!1===(i=n?n.call(r,l,d,c):void 0)||void 0===i&&l!==d)return!1}return!0},Pn=function(){return'.tele-fancy-scrollbar {\n  overscroll-behavior: contain;\n  overflow: auto;\n  overflow-y: scroll;\n  overflow-y: overlay;\n  -webkit-overflow-scrolling: touch;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n  scrollbar-width: auto;\n}\n.tele-fancy-scrollbar::-webkit-scrollbar {\n  height: 8px;\n  width: 8px;\n}\n.tele-fancy-scrollbar::-webkit-scrollbar-track {\n  background-color: transparent;\n}\n.tele-fancy-scrollbar::-webkit-scrollbar-thumb {\n  background-color: rgba(68, 78, 96, 0.1);\n  background-color: transparent;\n  border-radius: 4px;\n  transition: background-color 0.4s;\n}\n.tele-fancy-scrollbar:hover::-webkit-scrollbar-thumb {\n  background-color: rgba(68, 78, 96, 0.1);\n}\n.tele-fancy-scrollbar::-webkit-scrollbar-thumb:hover {\n  background-color: rgba(68, 78, 96, 0.2);\n}\n.tele-fancy-scrollbar::-webkit-scrollbar-thumb:active {\n  background-color: rgba(68, 78, 96, 0.2);\n}\n.tele-fancy-scrollbar::-webkit-scrollbar-thumb:vertical {\n  min-height: 50px;\n}\n.tele-fancy-scrollbar::-webkit-scrollbar-thumb:horizontal {\n  min-width: 50px;\n}\n.telebox-quarantine {\n  all: initial;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.telebox-body-wrap {\n  color: #191919;\n  color: var(--tele-boxColor, #191919);\n  flex: 1;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n.telebox-content {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: #f9f9f9;\n  background-color: var(--tele-boxContainerBackground, #f9f9f9);\n}\n.telebox-box-stage {\n  position: absolute;\n  z-index: 1;\n  overflow: hidden;\n  background-color: #fff;\n  background-color: var(--tele-boxStageBackground, #fff);\n  box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.08);\n  box-shadow: var(--tele-boxStageShadow, 0px 0px 16px rgba(0, 0, 0, 0.08));\n}\n.telebox-footer-wrap {\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: column;\n  color: #191919;\n  color: var(--tele-boxFooterColor, #191919);\n  background-color: #fff;\n  background-color: var(--tele-boxFooterBackground, #fff);\n}\n.telebox-footer-wrap::before {\n  content: "";\n  display: block;\n  flex: 1;\n}\n.telebox-color-scheme-dark {\n  color-scheme: dark;\n}\n.telebox-color-scheme-dark .telebox-body-wrap {\n  color: #e9e9e9;\n  color: var(--tele-boxColor, #e9e9e9);\n}\n.telebox-color-scheme-dark .telebox-content {\n  background-color: #25282e;\n  background-color: var(--tele-boxContainerBackground, #25282e);\n}\n.telebox-color-scheme-dark .telebox-box-stage {\n  background-color: #272a30;\n  background-color: var(--tele-boxStageBackground, #272a30);\n  box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.24);\n  box-shadow: var(--tele-boxStageShadow, 0px 0px 16px rgba(0, 0, 0, 0.24));\n}\n.telebox-color-scheme-dark .telebox-footer-wrap {\n  color: #e9e9e9;\n  color: var(--tele-boxFooterColor, #e9e9e9);\n  background-color: #383b42;\n  background-color: var(--tele-boxFooterBackground, #383b42);\n}'}(),Rn=function(e){return e.Light="light",e.Dark="dark",e.Auto="auto",e}(Rn||{}),Un=function(e){return e.Normal="normal",e.Minimized="minimized",e.Maximized="maximized",e}(Un||{}),Bn=function(e){return e.DarkMode="dark_mode",e.PrefersColorScheme="prefers_color_scheme",e.Close="close",e.Focus="focus",e.Blur="blur",e.IntrinsicMove="intrinsic_move",e.IntrinsicResize="intrinsic_resize",e.ZIndex="z_index",e.State="state",e.Minimized="minimized",e.Maximized="maximized",e.Readonly="readonly",e.Destroyed="destroyed",e}(Bn||{}),Vn=function(e){return e.Close="close",e.Maximize="maximize",e.Minimize="minimize",e}(Vn||{}),Yn=function(e){return e.North="n",e.South="s",e.West="w",e.East="e",e.NorthWest="nw",e.NorthEast="ne",e.SouthEast="se",e.SouthWest="sw",e}(Yn||{}),Qn="dh";function Zn(e,t,n){return Math.min(Math.max(e,t),n)}function Wn(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}var Gn=1;var Fn=function(){function e(t){var n=this,r=t.readonly$,i=t.state$,a=t.title$,o=t.buttons,s=t.onEvent,u=t.onDragStart,c=t.namespace,l=void 0===c?"telebox":c;P(this,e),this.sideEffect=new p.SideEffectManager,this.lastTitleBarClick={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarClick=function(e){var t;if(e.isPrimary&&!n.readonly$.value&&0===e.button&&!(null==(t=e.target.dataset)?void 0:t.teleTitleBarNoDblClick)){Wn(e);var r=Date.now();r-n.lastTitleBarClick.timestamp<=500?Math.abs(e.clientX-n.lastTitleBarClick.clientX)<=5&&Math.abs(e.clientY-n.lastTitleBarClick.clientY)<=5&&n.onEvent&&n.onEvent({type:Vn.Maximize}):n.onDragStart&&n.onDragStart(e),n.lastTitleBarClick.timestamp=r,n.lastTitleBarClick.clientX=e.clientX,n.lastTitleBarClick.clientY=e.clientY}},this.readonly$=r,this.state$=i,this.title$=a,this.onEvent=s,this.onDragStart=u,this.namespace=l,this.buttons=o||[{type:Vn.Minimize,iconClassName:this.wrapClassName("titlebar-icon-minimize")},{type:Vn.Maximize,iconClassName:this.wrapClassName("titlebar-icon-maximize"),isActive:function(e){return e===Un.Maximized}},{type:Vn.Close,iconClassName:this.wrapClassName("titlebar-icon-close")}],this.$dragArea=this.renderDragArea()}return U(e,[{key:"render",value:function(){var e=this;if(!this.$titleBar){this.$titleBar=document.createElement("div"),this.$titleBar.className=this.wrapClassName("titlebar");var t=document.createElement("div");t.className=this.wrapClassName("title-area"),t.dataset.teleBoxHandle=Qn;var n=document.createElement("h1");n.className=this.wrapClassName("title"),n.dataset.teleBoxHandle=Qn,t.appendChild(n),t.appendChild(this.$dragArea);var r=document.createElement("div");r.className=this.wrapClassName("titlebar-btns"),this.buttons.forEach((function(t,n){var i=t.iconClassName,a=String(n),o=document.createElement("button");o.className="".concat(e.wrapClassName("titlebar-btn")," ").concat(i),o.dataset.teleTitleBarBtnIndex=a,o.dataset.teleTitleBarNoDblClick="true",r.appendChild(o)})),this.sideEffect.addDisposer(this.title$.subscribe((function(e){n.textContent=e,n.title=e})),"render-title"),this.sideEffect.addDisposer(this.state$.subscribe((function(t){e.buttons.forEach((function(e,n){var i;e.isActive&&(null==(i=r.children[n])||i.classList.toggle("is-active",e.isActive(t)))}))})),"render-state-btns"),this.sideEffect.addEventListener(r,"click",(function(t){var n;if(!e.readonly$.value){var r=t.target,i=Number(null==(n=r.dataset)?void 0:n.teleTitleBarBtnIndex);if(!Number.isNaN(i)&&i<e.buttons.length){Wn(t);var a=e.buttons[i];e.onEvent&&e.onEvent({type:a.type,value:a.value})}}}),{},"render-btns-container-click"),this.$titleBar.appendChild(t),this.$titleBar.appendChild(r)}return this.$titleBar}},{key:"renderDragArea",value:function(){var e=document.createElement("div");return e.className=this.wrapClassName("drag-area"),e.dataset.teleBoxHandle=Qn,this.sideEffect.addEventListener(e,"pointerdown",this.handleTitleBarClick),e}},{key:"dragHandle",value:function(){return this.$titleBar}},{key:"wrapClassName",value:function(e){return"".concat(this.namespace,"-").concat(e)}},{key:"destroy",value:function(){this.sideEffect.flushAll(),this.$titleBar&&(this.$titleBar=void 0,this.onDragStart=void 0,this.onEvent=void 0)}}]),e}();function Hn(e){var t=v(e,2),n=t[0],r=t[1];if(r<=0||n.width<=0||n.height<=0)return n;var i=n.width*r;if(i===n.height)return n;if(i<n.height)return{x:0,y:(n.height-i)/2,width:n.width,height:i};var a=n.height/r;return{x:(n.width-a)/2,y:0,width:a,height:n.height}}var $n,Xn,Jn=window.ResizeObserver||h.ResizeObserver,Kn=function(){function e(t){var n=this,r=t.id,i=void 0===r?(0,p.genUID)():r,a=t.title,s=void 0===a?"New Box ".concat(Gn++):a,u=t.namespace,c=void 0===u?"telebox":u,l=t.visible,h=void 0===l||l,f=t.width,g=void 0===f?.5:f,m=t.height,y=void 0===m?.5:m,b=t.minWidth,w=void 0===b?0:b,M=t.minHeight,x=void 0===M?0:M,I=t.x,N=void 0===I?.1:I,T=t.y,D=void 0===T?.1:T,A=t.resizable,k=void 0===A||A,S=t.draggable,E=void 0===S||S,j=t.boxRatio,C=void 0===j?-1:j,z=t.focus,O=void 0!==z&&z,L=t.zIndex,_=void 0===L?100:L,R=t.stageRatio,U=void 0===R?null:R,B=t.enableShadowDOM,V=void 0===B||B,Y=t.titleBar,Q=t.content,Z=t.stage,W=t.footer,G=t.styles,F=t.userStyles,H=t.bodyStyle,$=void 0===H?null:H,X=t.stageStyle,J=void 0===X?null:X,K=t.darkMode$,q=t.fence$,ee=t.root,te=t.rootRect$,ne=t.managerMinimized$,re=t.managerMaximized$,ie=t.managerReadonly$,ae=t.managerStageRect$,oe=t.managerStageRatio$,se=t.defaultBoxBodyStyle$,ue=t.defaultBoxStageStyle$,ce=t.collectorRect$;P(this,e),this.events=new o.default,this._delegateEvents=new o.default,this.handleTrackStart=function(e){var t;return null==(t=n._handleTrackStart)?void 0:t.call(n,e)},this._sideEffect=new p.SideEffectManager,this.id=i,this.namespace=c,this.enableShadowDOM=V;var le=new d.ValManager;this._sideEffect.addDisposer((function(){return le.destroy()}));var de=new d.Val(s),pe=new d.Val(h),he=new d.Val(k),fe=new d.Val(E),ge=new d.Val(C),me=new d.Val(_),ye=new d.Val(O),ve=new d.Val(null),be=new d.Val(null),we=new d.Val(null),Me=(0,d.combine)([ve,re],(function(e){var t=v(e,2),n=t[0],r=t[1];return null!=n?n:r})),xe=(0,d.combine)([be,ne],(function(e){var t=v(e,2),n=t[0],r=t[1];return null!=n?n:r})),Ie=(0,d.combine)([we,ie],(function(e){var t=v(e,2),n=t[0],r=t[1];return null!=n?n:r})),Ne=(0,d.combine)([xe,Me],(function(e){var t=v(e,2),n=t[0],r=t[1];return n?Un.Minimized:r?Un.Maximized:Un.Normal})),Te=new d.Val({width:Zn(w,0,1),height:Zn(x,0,1)},{compare:_n}),De=(0,d.combine)([Te,ae],(function(e){var t=v(e,2),n=t[0],r=t[1];return{width:n.width*r.width,height:n.height*r.height}}),{compare:_n}),Ae=new d.Val({width:g,height:y},{compare:_n});this._sideEffect.addDisposer(Te.reaction((function(e,t){Ae.setValue({width:Math.max(g,e.width),height:Math.max(y,e.height)},t)})));var ke=new d.Val({x:N,y:D},{compare:_n}),Se=(0,d.combine)([Ae,ae],(function(e){var t=v(e,2),n=t[0],r=t[1];return{width:r.width*n.width,height:r.height*n.height}}),{compare:_n}),Ee=(0,d.combine)([ke,ae],(function(e){var t=v(e,2),n=t[0],r=t[1];return{x:n.x*r.width,y:n.y*r.height}}),{compare:_n}),je=new d.Val($),Ce=new d.Val(J),ze=new d.Val(null),Oe=new d.Val(ae.value,{compare:_n}),Le=new d.Val(U),_e=(0,d.combine)([Le,oe],(function(e){var t=v(e,2),n=t[0],r=t[1];return null!=n?n:r})),Pe=(0,d.combine)([Oe,_e],Hn,{compare:_n}),Re={darkMode:K,fence:q,rootRect:te,managerMinimized:ne,managerMaximized:re,managerReadonly:ie,managerStageRect:ae,managerStageRatio:oe,defaultBoxBodyStyle:se,defaultBoxStageStyle:ue,collectorRect:ce};(0,d.withReadonlyValueEnhancer)(this,Re);var Ue={zIndex:me,focus:ye,state:Ne,minSize:Te,pxMinSize:De,intrinsicSize:Ae,intrinsicCoord:ke,pxIntrinsicSize:Se,pxIntrinsicCoord:Ee,bodyRect:Oe,stageRect:Pe,minimized:xe,maximized:Me,readonly:Ie};(0,d.withReadonlyValueEnhancer)(this,Ue,le);var Be={title:de,visible:pe,resizable:he,draggable:fe,boxRatio:ge,boxMinimized:be,boxMaximized:ve,boxReadonly:we,stageRatio:Le,bodyStyle:je,stageStyle:Ce};(0,d.withValueEnhancer)(this,Be,le),this.titleBar=Y||new Fn({readonly$:Ie,state$:Ne,title$:de,namespace:this.namespace,onDragStart:function(e){var t;return null==(t=n._handleTrackStart)?void 0:t.call(n,e)},onEvent:function(e){return n._delegateEvents.emit(e.type)}}),this._sideEffect.addDisposer((0,d.combine)([ge,xe]).subscribe((function(e){var t=v(e,2),r=t[0];!t[1]&&r>0&&n.transform(Ee.value.x,Ee.value.y,Se.value.width,Se.value.height)}))),this._sideEffect.addDisposer(q.subscribe((function(e){e&&n.move(Ee.value.x,Ee.value.y)}))),this.$box=this._render(),ze.setValue(this.$content.parentElement),Q&&this.mountContent(Q),Z&&this.mountStage(Z),W&&this.mountFooter(W),G&&this.mountStyles(G),F&&this.mountUserStyles(F),ee.appendChild(this.$box);var Ve=function(e,t){n._sideEffect.addDisposer(e.reaction((function(e,r){r||n.events.emit(t,e)})))};Ve(K,Bn.DarkMode),Ve(Ie,Bn.Readonly),Ve(me,Bn.ZIndex),Ve(xe,Bn.Minimized),Ve(Me,Bn.Maximized),Ve(Ne,Bn.State),Ve(Ae,Bn.IntrinsicResize),Ve(ke,Bn.IntrinsicMove),this._sideEffect.addDisposer([pe.reaction((function(e,t){t||e||n.events.emit(Bn.Close)})),ye.reaction((function(e,t){t||n.events.emit(e?Bn.Focus:Bn.Blur)}))])}var t;return U(e,[{key:"setMinWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._minSize$.setValue({width:e,height:this.minHeight},t)}},{key:"setMinHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._minSize$.setValue({width:this.minWidth,height:e},t)}},{key:"resize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._intrinsicSize$.setValue({width:Math.max(e,this.minWidth),height:Math.max(t,this.minHeight)},n)}},{key:"move",value:function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.managerStageRect,o=this.pxIntrinsicSize;this.fence?(n=Zn(e,0,a.width-o.width),r=Zn(t,0,a.height-o.height)):(n=Zn(e,-(o.width-120),0+a.width-20),r=Zn(t,0,0+a.height-20)),this._intrinsicCoord$.setValue({x:n/a.width,y:r/a.height},i)}},{key:"transform",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.managerStageRect;if(n=Math.max(n,this.pxMinSize.width),r=Math.max(r,this.pxMinSize.height),this.boxRatio>0){var o=this.boxRatio*n;t!==this.pxIntrinsicCoord.y&&(t-=o-r),r=o}t<0&&(t=0,r=this.pxIntrinsicSize.height),this.move(e,t,i),this._intrinsicSize$.setValue({width:n/a.width,height:r/a.height},i)}},{key:"mountContent",value:function(e){var t;null==(t=this.$authorContent)||t.remove(),this.$authorContent=e,this.$content.appendChild(e)}},{key:"unmountContent",value:function(){this.$authorContent&&(this.$authorContent.remove(),this.$authorContent=void 0)}},{key:"mountStage",value:function(e){var t;null==(t=this.$authorStage)||t.remove(),this.$authorStage=e,this.$stage||(this.$stage=this._renderStage()),this.$stage.appendChild(e),this.$stage.parentElement||this.$body.appendChild(this.$stage)}},{key:"unmountStage",value:function(){var e;this.$authorStage&&(this.$authorStage.remove(),this.$authorStage=void 0),null==(e=this.$stage)||e.remove()}},{key:"mountFooter",value:function(e){var t;null==(t=this.$authorFooter)||t.remove(),this.$authorFooter=e,this.$footer.appendChild(e)}},{key:"unmountFooter",value:function(){this.$authorFooter&&(this.$authorFooter.remove(),this.$authorFooter=void 0)}},{key:"mountStyles",value:function(e){this.$styles.textContent=e}},{key:"unmountStyles",value:function(){this.$styles.textContent=""}},{key:"mountUserStyles",value:function(e){this.$userStyles.textContent=e}},{key:"unmountUserStyles",value:function(){this.$userStyles.textContent=""}},{key:"_render",value:function(){var e=this;if(this.$box)return this.$box;var t=function(t,n){return e._sideEffect.addDisposer([e._readonly$.subscribe((function(n){return t.classList.toggle(e.wrapClassName("readonly"),n)})),e._draggable$.subscribe((function(n){return t.classList.toggle(e.wrapClassName("no-drag"),!n)})),e._resizable$.subscribe((function(n){return t.classList.toggle(e.wrapClassName("no-resize"),!n)})),e._focus$.subscribe((function(n){return t.classList.toggle(e.wrapClassName("blur"),!n)})),e._darkMode$.subscribe((function(n){t.classList.toggle(e.wrapClassName("color-scheme-dark"),n),t.classList.toggle(e.wrapClassName("color-scheme-light"),!n)}))],n)};this.$box=document.createElement("div"),this.$box.classList.add(this.wrapClassName("box")),t(this.$box,"bind-box-state"),this._sideEffect.add((function(){var t=e.wrapClassName("minimized"),n=e.wrapClassName("maximized"),r="box-maximized-timer";return e._state$.subscribe((function(i){e.$box.classList.toggle(t,i===Un.Minimized),i===Un.Maximized?(e._sideEffect.flush(r),e.$box.classList.toggle(n,!0)):e._sideEffect.setTimeout((function(){e.$box.classList.toggle(n,!1)}),0,r)}))})),this._sideEffect.addDisposer(this._visible$.subscribe((function(t){e.$box.style.display=t?"block":"none"}))),this._sideEffect.addDisposer(this._zIndex$.subscribe((function(t){e.$box.style.zIndex=String(t)}))),this.$box.dataset.teleBoxID=this.id;var n=Ln(this.$box),r=(0,d.combine)([this._maximized$,this._minimized$,this._pxIntrinsicSize$,this._pxIntrinsicCoord$,this._collectorRect$,this._rootRect$,this._managerStageRect$],(function(t){var n=v(t,7),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],c=n[6],l=r?{x:-c.x,y:-c.y,width:u.width,height:u.height,scaleX:1,scaleY:1}:{x:o.x,y:o.y,width:a.width,height:a.height,scaleX:1,scaleY:1};if(i&&s){var d=r?e.rootRect:a,p=d.width,h=d.height;l.x=s.x-p/2+s.width/2-c.x,l.y=s.y-h/2+s.height/2-c.y,l.scaleX=s.width/p,l.scaleY=s.height/h}return l}),{compare:_n}),i=r.value;this.$box.style.width=i.width+"px",this.$box.style.height=i.height+"px",this.$box.style.transform="translate(".concat(i.x-10,"px,").concat(i.y-10,"px)"),this._sideEffect.addDisposer(r.subscribe((function(e){n.set(e)})));var a=document.createElement("div");a.className=this.wrapClassName("box-main"),this.$box.appendChild(a);var o=document.createElement("div");o.className=this.wrapClassName("titlebar-wrap"),o.appendChild(this.titleBar.render()),this.$titleBar=o;var s=document.createElement("div");s.className=this.wrapClassName("body-wrap"),this.$body=s;var u=document.createElement("style");this.$styles=u,s.appendChild(u);var c=document.createElement("style");this.$userStyles=c,s.appendChild(c);var l=document.createElement("div");l.className=this.wrapClassName("content")+" tele-fancy-scrollbar",this.$content=l,this._sideEffect.addDisposer((0,d.combine)([this._bodyStyle$,this._defaultBoxBodyStyle$],(function(e){var t=v(e,2),n=t[0],r=t[1];return null!=n?n:r})).subscribe((function(e){return l.style.cssText=e||""}))),s.appendChild(l);var p=document.createElement("div");p.className=this.wrapClassName("footer-wrap"),this.$footer=p,a.appendChild(o);var h=document.createElement("div");h.className=this.wrapClassName("main"),this.$main=h,a.appendChild(h);var f=document.createElement("div");f.className=this.wrapClassName("quarantine-outer"),h.appendChild(f);var g=document.createElement("div");if(g.className=this.wrapClassName("quarantine"),g.appendChild(s),g.appendChild(p),this.enableShadowDOM){t(g,"bind-quarantine-state");var m=document.createElement("style");m.textContent=Pn,g.insertBefore(m,g.firstChild),f.attachShadow({mode:"open"}).appendChild(g)}else f.appendChild(g);this._renderResizeHandlers();var y=function(){var t=s.getBoundingClientRect();e._bodyRect$.setValue({x:0,y:0,width:t.width,height:t.height})};return this._sideEffect.add((function(){var t=new Jn((function(){e.minimized||y()}));return t.observe(s),function(){return t.disconnect()}})),this._sideEffect.addDisposer(this._minimized$.reaction((function(t){t||e._sideEffect.setTimeout(y,400,"minimized-content-rect-fix")}))),this.$box}},{key:"_renderStage",value:function(){var e=this,t=document.createElement("div");t.className=this.wrapClassName("box-stage");var n=function(e){t.style.top=e.y+"px",t.style.left=e.x+"px",t.style.width=e.width+"px",t.style.height=e.height+"px"};return this._sideEffect.addDisposer([(0,d.combine)([this._stageStyle$,this._defaultBoxStageStyle$],(function(e){var t=v(e,2),n=t[0],r=t[1];return null!=n?n:r})).subscribe((function(r){t.style.cssText=r||"",n(e._stageRect$.value)})),this._stageRect$.subscribe(n)],"box-stage-styles"),t}},{key:"_renderResizeHandlers",value:function(){var e=this,t=document.createElement("div");t.className=this.wrapClassName("resize-handles"),Object.values(Yn).forEach((function(n){var r=document.createElement("div");r.className=e.wrapClassName(n)+" "+e.wrapClassName("resize-handle"),r.dataset.teleBoxHandle=n,t.appendChild(r)})),this.$box.appendChild(t);var n,r,i="handle-tracking-listener",a=this.wrapClassName("transforming"),o=0,s=0,u=0,c=0,l=0,d=0,p=function(t){if(t.isPrimary&&e.state===Un.Normal){Wn(t);var n=t.pageX,i=t.pageY;i<0&&(i=0);var a=n-l,p=i-d,h=e.pxIntrinsicCoord,f=h.x,g=h.y,m=e.pxIntrinsicSize,y=m.width,v=m.height;switch(r){case Yn.North:g=s+p,v=c-p;break;case Yn.South:v=c+p;break;case Yn.West:f=o+a,y=u-a;break;case Yn.East:y=u+a;break;case Yn.NorthWest:f=o+a,g=s+p,y=u-a,v=c-p;break;case Yn.NorthEast:g=s+p,y=u+a,v=c-p;break;case Yn.SouthEast:y=u+a,v=c+p;break;case Yn.SouthWest:f=o+a,y=u-a,v=c+p;break;default:return void e.move(o+a,s+p)}e.transform(f,g,y,v)}},h=function(t){t.isPrimary&&(r=void 0,n&&(Wn(t),e.$box.classList.toggle(a,!1),e._sideEffect.flush(i),n.remove()))},f=function(t){var f;if(t.isPrimary&&!e.readonly&&(null==t.button||0===t.button)&&e.draggable&&!r&&e.state===Un.Normal){var g=t.target;if(null==(f=g.dataset)?void 0:f.teleBoxHandle){Wn(t);var m=e.pxIntrinsicCoord;o=m.x,s=m.y;var y=e.pxIntrinsicSize;u=y.width,c=y.height,l=t.pageX,d=t.pageY,r=g.dataset.teleBoxHandle,n||(n=document.createElement("div"));var v=r?e.wrapClassName("cursor-".concat(r)):"";n.className=e.wrapClassName("track-mask".concat(v?" ".concat(v):"")),e.$box.appendChild(n),e.$box.classList.add(a),e._sideEffect.add((function(){return window.addEventListener("pointermove",p,{passive:!1}),window.addEventListener("pointerup",h,{passive:!1}),window.addEventListener("pointercancel",h,{passive:!1}),function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h)}}),i)}}};this._handleTrackStart=f,this._sideEffect.addEventListener(t,"pointerdown",f,{},"box-resizeHandles-pointerdown")}},{key:"destroy",value:(t=_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$box.remove(),this._sideEffect.flushAll(),this._sideEffect.flushAll(),e.next=5,this.events.emit(Bn.Destroyed);case 5:this.events.clearListeners(),this._delegateEvents.clearListeners();case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"wrapClassName",value:function(e){return"".concat(this.namespace,"-").concat(e)}},{key:"minWidth",get:function(){return this._minSize$.value.width}},{key:"minHeight",get:function(){return this._minSize$.value.height}},{key:"intrinsicX",get:function(){return this._intrinsicCoord$.value.x}},{key:"intrinsicY",get:function(){return this._intrinsicCoord$.value.y}},{key:"intrinsicWidth",get:function(){return this._intrinsicSize$.value.width}},{key:"intrinsicHeight",get:function(){return this._intrinsicSize$.value.height}}]),e}(),qn=function(){function e(t){var n=this,r=t.minimized$,i=t.readonly$,a=t.darkMode$,o=t.namespace,s=void 0===o?"telebox":o,u=t.styles,c=void 0===u?{}:u,l=t.root,h=t.onClick;P(this,e),this._sideEffect=new p.SideEffectManager,this.namespace=s;var f=new d.ValManager;this._sideEffect.addDisposer((function(){return f.destroy()}));var g=new d.Val(void 0),m=(0,d.derive)(r),y=new d.Val(c),v=new d.Val(document.createElement("button")),b={styles:y,$collector:v};(0,d.withValueEnhancer)(this,b,f);var w={rect:g,visible:m};(0,d.withReadonlyValueEnhancer)(this,w,f),v.value.className=this.wrapClassName("collector"),v.value.style.backgroundImage="url('".concat("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxOCAxNiI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxwYXRoIHN0cm9rZT0iIzdCODhBMCIgc3Ryb2tlLXdpZHRoPSIxLjQiIGQ9Ik0uNyAxLjJoMTYuNnYxMy42SC43eiIgLz4KICAgICAgICA8cGF0aCBmaWxsPSIjN0I4OEEwIiBkPSJNNCA1LjVoNnYxLjRINHpNNCA5LjVoMTB2MS40SDR6IiAvPgogICAgPC9nPgo8L3N2Zz4K","')"),this._sideEffect.addDisposer(v.subscribe((function(e){n._sideEffect.add((function(){return l.appendChild(e),function(){return e.remove()}}),"telebox-collector-mount"),n._sideEffect.addEventListener(e,"click",(function(){i.value||null==h||h()}),{},"telebox-collector-click"),n._sideEffect.addDisposer([m.subscribe((function(t){e.classList.toggle(n.wrapClassName("collector-visible"),t)})),i.subscribe((function(t){e.classList.toggle(n.wrapClassName("collector-readonly"),t)})),a.subscribe((function(t){e.classList.toggle(n.wrapClassName("color-scheme-dark"),t),e.classList.toggle(n.wrapClassName("color-scheme-light"),!t)})),y.subscribe((function(t){Object.keys(t).forEach((function(n){var r=t[n];null!=r&&(e.style[n]=r)}))})),r.subscribe((function(t){if(t){var n=e.getBoundingClientRect(),r=n.x,i=n.y,a=n.width,o=n.height,s=l.getBoundingClientRect();g.setValue({x:r-s.x,y:i-s.y,width:a,height:o})}}))],"telebox-collector-el")})))}return U(e,[{key:"destroy",value:function(){this._sideEffect.flushAll()}},{key:"wrapClassName",value:function(e){return"".concat(this.namespace,"-").concat(e)}}]),e}(),er=function(e){return e.Focused="focused",e.Blurred="blurred",e.Created="created",e.Removed="removed",e.State="state",e.Maximized="maximized",e.Minimized="minimized",e.IntrinsicMove="intrinsic_move",e.IntrinsicResize="intrinsic_resize",e.ZIndex="z_index",e.PrefersColorScheme="prefers_color_scheme",e.DarkMode="dark_mode",e}(er||{}),tr=function(e){x(n,e);var t=I(n);function n(e){var r;return P(this,n),(r=t.call(this,e)).boxes$=e.boxes$,r.rootRect$=e.rootRect$,r.darkMode$=e.darkMode$,e.root.appendChild(r.render()),r}return U(n,[{key:"focusBox",value:function(e){var t;if(!this.focusedBox||this.focusedBox!==e){if(this.$titles&&this.state$.value===Un.Maximized)for(var n=this.$titles.firstElementChild.children,r=n.length-1;r>=0;r-=1){var i=n[r],a=null==(t=i.dataset)?void 0:t.teleBoxID;a&&(e&&a===e.id?i.classList.toggle(this.wrapClassName("titles-tab-focus"),!0):this.focusedBox&&a===this.focusedBox.id&&i.classList.toggle(this.wrapClassName("titles-tab-focus"),!1))}this.focusedBox=e}}},{key:"render",value:function(){var e=this;if(this.$titleBar)return this.$titleBar;var t=m(E(n.prototype),"render",this).call(this);t.classList.add(this.wrapClassName("max-titlebar")),this.sideEffect.addDisposer([(0,d.combine)([this.boxes$,this.state$]).subscribe((function(n){var r=v(n,2),i=r[0],a=r[1];t.classList.toggle(e.wrapClassName("max-titlebar-active"),a===Un.Maximized&&i.length>0)})),this.readonly$.subscribe((function(n){t.classList.toggle(e.wrapClassName("readonly"),n)})),(0,d.combine)([this.state$,this.boxes$]).subscribe((function(n){var r=v(n,2),i=r[0],a=r[1];i===Un.Maximized&&(t.classList.toggle(e.wrapClassName("max-titlebar-single-title"),1===a.length),1!==a.length&&t.replaceChild(e.renderTitles(),t.firstElementChild))}))],"max-render");var r=document.createElement("div");return r.classList.add(this.wrapClassName("titles-area")),t.insertBefore(r,t.firstElementChild),t}},{key:"destroy",value:function(){m(E(n.prototype),"destroy",this).call(this),this.$titles=void 0,this.focusedBox=void 0}},{key:"renderTitles",value:function(){var e=this;this.$titles=document.createElement("div"),this.$titles.className=this.wrapClassName("titles"),this.sideEffect.addEventListener(this.$titles,"wheel",(function(e){e.deltaX||e.currentTarget.scrollBy({left:e.deltaY>0?250:-250,behavior:"smooth"})}),{passive:!1},"max-render-wheel-titles");var t=document.createElement("div");t.className=this.wrapClassName("titles-content"),this.$titles.appendChild(t);var n=this.boxes$.value.map((function(n){var r=document.createElement("button");return r.className=e.wrapClassName("titles-tab"),r.textContent=n.title,r.dataset.teleBoxID=n.id,r.dataset.teleTitleBarNoDblClick="true",e.focusedBox&&n.id===e.focusedBox.id&&r.classList.add(e.wrapClassName("titles-tab-focus")),t.appendChild(r),n._title$.reaction((function(e){return r.textContent=e}))}));return this.sideEffect.addDisposer((function(){return n.forEach((function(e){return e()}))}),"max-render-tab-titles"),this.$titles}}]),n}(Fn),nr=window.ResizeObserver||h.ResizeObserver,rr=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.root,i=void 0===r?null:r,a=n.fullscreen,s=void 0!==a&&a,u=n.prefersColorScheme,c=void 0===u?Rn.Light:u,l=n.minimized,h=void 0!==l&&l,f=n.maximized,g=void 0!==f&&f,m=n.fence,y=void 0===m||m,b=n.collector,w=n.namespace,M=void 0===w?"telebox":w,x=n.readonly,I=void 0!==x&&x,N=n.stageRatio,T=void 0===N?-1:N,D=n.containerStyle,A=void 0===D?"":D,k=n.stageStyle,S=void 0===k?"":k,E=n.defaultBoxBodyStyle,j=void 0===E?null:E,C=n.defaultBoxStageStyle,z=void 0===C?null:C,O=n.theme,L=void 0===O?null:O;P(this,e),this.events=new o.default,this._sideEffect=new p.SideEffectManager,this.namespace=M;var _=new d.ValManager;this._sideEffect.addDisposer((function(){return _.destroy()}));var R=new d.Val(i),U=new d.Val(I),B=new d.Val(y),V=new d.Val(A),Y=new d.Val(S),Q=new d.Val(T),Z=new d.Val(j),W=new d.Val(z),G=new d.Val(s),F=new d.Val(h),H=new d.Val(g),$=(0,d.combine)([H,G],(function(e){var t=v(e,2),n=t[0];return!!t[1]||n})),X=(0,d.combine)([F,G],(function(e){var t=v(e,2),n=t[0];return!t[1]&&n}));this.setMaximized=function(e,t){return H.setValue(e,t)},this.setMinimized=function(e,t){return F.setValue(e,t)};var J=new d.Val({x:0,y:0,width:window.innerWidth,height:window.innerHeight},{compare:_n});this._sideEffect.addDisposer(R.subscribe((function(e){t._sideEffect.add((function(){if(!e)return function(){};var t=new nr((function(){var t=e.getBoundingClientRect();J.setValue({x:0,y:0,width:t.width,height:t.height})}));return t.observe(e),function(){return t.disconnect()}}),"calc-root-rect")})));var K=(0,d.combine)([J,Q],Hn,{compare:_n});this.boxes$=new d.Val([]),this.topBox$=new d.Val(void 0),this._sideEffect.addDisposer(this.boxes$.subscribe((function(e){if(e.length>0){var n=e.reduce((function(e,t){return e.zIndex>t.zIndex?e:t}));t.topBox$.setValue(n)}else t.topBox$.setValue(void 0)})));var q=window.matchMedia("(prefers-color-scheme: dark)"),ee=new d.Val(!1);q&&(ee.setValue(q.matches),this._sideEffect.add((function(){var e=function(e){ee.setValue(e.matches)};return q.addEventListener?(q.addEventListener("change",e),function(){return q.removeEventListener("change",e)}):(q.addListener(e),function(){return q.removeListener(e)})})));var te=new d.Val(c);this._sideEffect.addDisposer(te.reaction((function(e,n){n||t.events.emit(er.PrefersColorScheme,e)})));var ne=(0,d.combine)([ee,te],(function(e){var t=v(e,2),n=t[0],r=t[1];return"auto"===r?n:"dark"===r})),re=(0,d.combine)([X,$],(function(e){var t=v(e,2),n=t[0],r=t[1];return n?Un.Minimized:r?Un.Maximized:Un.Normal})),ie=new d.Val(L,{compare:_n}),ae={darkMode:ne,state:re,root:R,rootRect:J,stageRect:K,minimized:X,maximized:$};(0,d.withReadonlyValueEnhancer)(this,ae,_);var oe={fullscreen:G,prefersColorScheme:te,readonly:U,fence:B,stageRatio:Q,containerStyle:V,stageStyle:Y,defaultBoxBodyStyle:Z,defaultBoxStageStyle:W,theme:ie};(0,d.withValueEnhancer)(this,oe,_);var se=this.wrapClassName("titlebar-icon-close"),ue=function(e){var n;if(e.isPrimary&&!U.value){var r=e.target;if(r.tagName)for(var i=r;i;i=i.parentElement){if(i.classList&&i.classList.contains(se))return;var a=null==(n=i.dataset)?void 0:n.teleBoxID;if(a){var o=t.getBox(a);if(o)return t.focusBox(o),void t.makeBoxTop(o)}}}};this._sideEffect.addEventListener(window,"pointerdown",ue,!0),this.$container=document.createElement("div"),this.$container.className=this.wrapClassName("manager-container"),this.setTheme(L),this.$stage=document.createElement("div"),this.$stage.className=this.wrapClassName("manager-stage"),this.$container.appendChild(this.$stage),this._sideEffect.addDisposer([ne.subscribe((function(e){t.$container.classList.toggle(t.wrapClassName("color-scheme-dark"),e),t.$container.classList.toggle(t.wrapClassName("color-scheme-light"),!e)})),G.subscribe((function(e){t.$container.classList.toggle(t.wrapClassName("is-fullscreen"),Boolean(e))})),(0,d.combine)([this.boxes$,G],(function(e){var t=v(e,2),n=t[0],r=t[1];return"no-titlebar"===r||!0===r&&n.length<=1})).subscribe((function(e){t.$container.classList.toggle(t.wrapClassName("hide-fullscreen-titlebar"),e)})),$.subscribe((function(e){t.$container.classList.toggle(t.wrapClassName("is-maximized"),e)})),X.subscribe((function(e){t.$container.classList.toggle(t.wrapClassName("is-minimized"),e)})),(0,d.combine)([V,ie]).subscribe((function(e){var n=v(e,2),r=n[0],i=n[1];t.$container.style.cssText=r,i&&Object.keys(i).forEach((function(e){var n;t.$container.style.setProperty("--tele-".concat(e),null!=(n=i[e])?n:null)}))})),Y.subscribe((function(e){t.$stage.style.cssText=e,t.$stage.style.width=K.value.width+"px",t.$stage.style.height=K.value.height+"px"})),K.subscribe((function(e){t.$stage.style.width=e.width+"px",t.$stage.style.height=e.height+"px"})),R.subscribe((function(e){e?e.appendChild(t.$container):t.$container.parentElement&&t.$container.remove()}))]),this.collector=null!=b?b:new qn({minimized$:X,readonly$:U,darkMode$:ne,namespace:M,root:this.$container,onClick:function(){return F.setValue(!1)}}),this.titleBar=new tr({namespace:this.namespace,title$:(0,d.derive)(this.topBox$,(function(e){return(null==e?void 0:e.title)||""})),boxes$:this.boxes$,darkMode$:ne,readonly$:U,state$:re,rootRect$:J,root:this.$container,onEvent:function(e){switch(e.type){case Vn.Maximize:t.setMaximized(!$.value);break;case Vn.Minimize:t.setMinimized(!0);break;case Bn.Close:t.removeTopBox(),t.focusTopBox()}}}),this._sideEffect.addDisposer([re.reaction((function(e,n){n||t.events.emit(er.State,e)})),$.reaction((function(e,n){n||t.events.emit(er.Maximized,e)})),X.reaction((function(e,n){n||t.events.emit(er.Minimized,e)})),ne.reaction((function(e,n){n||t.events.emit(er.DarkMode,e)}))])}return U(e,[{key:"setState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case Un.Maximized:this.setMinimized(!1,t),this.setMaximized(!0,t);break;case Un.Minimized:this.setMinimized(!0,t),this.setMaximized(!1,t);break;default:this.setMinimized(!1,t),this.setMaximized(!1,t)}return this}},{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new Kn(C(C(C({zIndex:this.topBox?this.topBox.zIndex+1:100},t),n?this.smartPosition(t):{}),{},{namespace:this.namespace,root:this.$stage,darkMode$:this._darkMode$,fence$:this._fence$,rootRect$:this._rootRect$,managerStageRect$:this._stageRect$,managerStageRatio$:this._stageRatio$,managerMaximized$:this._maximized$,managerMinimized$:this._minimized$,managerReadonly$:this._readonly$,collectorRect$:this.collector._rect$,defaultBoxBodyStyle$:this._defaultBoxBodyStyle$,defaultBoxStageStyle$:this._defaultBoxStageStyle$}));return r.focus&&(this.focusBox(r),n&&this.makeBoxTop(r)),this.boxes$.setValue([].concat(b(this.boxes),[r])),this._sideEffect.addDisposer([r._delegateEvents.on(Vn.Maximize,(function(){e.setMaximized(!e.maximized)})),r._delegateEvents.on(Vn.Minimize,(function(){e.setMinimized(!0)})),r._delegateEvents.on(Vn.Close,(function(){e.remove(r),e.focusTopBox()})),r._intrinsicCoord$.reaction((function(t,n){n||e.events.emit(er.IntrinsicMove,r)})),r._intrinsicSize$.reaction((function(t,n){n||e.events.emit(er.IntrinsicResize,r)})),r._zIndex$.reaction((function(t,n){if(e.boxes.length>0){var i=e.boxes.reduce((function(e,t){return e.zIndex>t.zIndex?e:t}));e.topBox$.setValue(i)}n||e.events.emit(er.ZIndex,r)}))]),this.events.emit(er.Created,r),r}},{key:"query",value:function(e){return e?this.boxes.filter(this.teleBoxMatcher(e)):b(this.boxes)}},{key:"queryOne",value:function(e){return e?this.boxes.find(this.teleBoxMatcher(e)):this.boxes[0]}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.boxes.find((function(t){return t.id===e}));if(r)return this.updateBox(r,t,n)}},{key:"updateAll",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.boxes.forEach((function(r){t.updateBox(r,e,n)}))}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getBoxIndex(e);if(n>=0){var r=this.boxes.slice(),i=r.splice(n,1);return this.boxes$.setValue(r),i.forEach((function(e){return e.destroy()})),t||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(er.Removed,i)),i[0]}}},{key:"removeTopBox",value:function(){if(this.topBox)return this.remove(this.topBox)}},{key:"removeAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.boxes$.value;return this.boxes$.setValue([]),t.forEach((function(e){return e.destroy()})),e||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(er.Removed,t)),t}},{key:"mount",value:function(e){this._root$.setValue(e)}},{key:"unmount",value:function(){this._root$.setValue(null)}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.events.clearListeners(),this._sideEffect.flushAll(),this.removeAll(e),this.collector.destroy(),this.titleBar.destroy()}},{key:"wrapClassName",value:function(e){return"".concat(this.namespace,"-").concat(e)}},{key:"focusBox",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getBox(e);r&&(this.boxes.forEach((function(e){if(r===e){var i=!1;r.focus||(i=!0,r._focus$.setValue(!0,n)),i&&!n&&t.events.emit(er.Focused,r)}else e.focus&&t.blurBox(e,n)})),this.titleBar.focusBox(r))}},{key:"focusTopBox",value:function(){if(this.topBox&&!this.topBox.focus)return this.focusBox(this.topBox)}},{key:"blurBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getBox(e);n&&(n.focus&&(n._focus$.setValue(!1,t),t||this.events.emit(er.Blurred,n)),this.titleBar.focusedBox===n&&this.titleBar.focusBox())}},{key:"blurAll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.boxes.forEach((function(n){n.focus&&(n._focus$.setValue(!1,t),t||e.events.emit(er.Blurred,n))})),this.titleBar.focusedBox&&this.titleBar.focusBox()}},{key:"teleBoxMatcher",value:function(e){var t=Object.keys(e);return function(n){return t.every((function(t){return e[t]===n[t]}))}}},{key:"updateBox",value:function(e,t){var n,r,i,a,o,s,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null==t.x&&null==t.y||e._intrinsicCoord$.setValue({x:null!=(n=t.x)?n:e.intrinsicX,y:null!=(r=t.y)?r:e.intrinsicY},u),null==t.width&&null==t.height||e._intrinsicSize$.setValue({width:null!=(i=t.width)?i:e.intrinsicWidth,height:null!=(a=t.height)?a:e.intrinsicHeight},u),null!=t.title&&e._title$.setValue(t.title),null!=t.visible&&e._visible$.setValue(t.visible,u),null!=t.resizable&&e._resizable$.setValue(t.resizable,u),null!=t.draggable&&e._draggable$.setValue(t.draggable,u),null!=t.boxRatio&&e._boxRatio$.setValue(t.boxRatio,u),null!=t.zIndex&&e._zIndex$.setValue(t.zIndex,u),void 0!==t.stageRatio&&e.setStageRatio(t.stageRatio,u),null!=t.content&&e.mountContent(t.content),null!=t.footer&&e.mountFooter(t.footer),null==t.minHeight&&null==t.minWidth||e._minSize$.setValue({width:null!=(o=t.minWidth)?o:e.minWidth,height:null!=(s=t.minHeight)?s:e.minHeight},u)}},{key:"smartPosition",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?.5:r,a=e.height,o=void 0===a?.5:a,s=this.stageRect,u=this.topBox;if(null==t){var c=20;if(u){var l=u.pxIntrinsicCoord.x+20;l+i*s.width<=s.width&&(c=l)}t=c/s.width}if(null==n){var d=20;if(u){var p=u.pxIntrinsicCoord.y+20;p+o*s.height<=s.height&&(d=p)}n=d/s.height}return{x:t,y:n,width:i,height:o}}},{key:"makeBoxTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.topBox&&e!==this.topBox&&e._zIndex$.setValue(this.topBox.zIndex+1,t)}},{key:"getBoxIndex",value:function(e){return"string"==typeof e?this.boxes.findIndex((function(t){return t.id===e})):this.boxes.findIndex((function(t){return t===e}))}},{key:"getBox",value:function(e){return"string"==typeof e?this.boxes.find((function(t){return t.id===e})):e}},{key:"boxes",get:function(){return this.boxes$.value}},{key:"topBox",get:function(){return this.topBox$.value}}]),e}(),ir=function(e,t,n,r,i){return new ar({safeSetAttributes:function(t){return e.safeSetAttributes(t)},updateAppState:function(){var t,n;return null==(n=e.appManager)?void 0:(t=n.store).updateAppState.apply(t,arguments)},canOperate:function(){return e.canOperate},notifyContainerRectUpdate:function(t){var n;return null==(n=e.appManager)?void 0:n.notifyContainerRectUpdate(t)},cleanFocus:function(){var t;return null==(t=e.appManager)?void 0:t.store.cleanFocus()},setAppFocus:function(t){var n;return null==(n=e.appManager)?void 0:n.store.setAppFocus(t,!0)},callbacks:t,emitter:n,boxEmitter:r},i)},ar=function(){function e(t,n){var r=this;P(this,e),this.context=t,this.sideEffectManager=new p.SideEffectManager;var i=t.emitter,a=t.callbacks,o=t.boxEmitter;this.teleBoxManager=this.setupBoxManager(n),this.sideEffectManager.add((function(){return[r.teleBoxManager.onValChanged("state",(function(e){a.emit("boxStateChange",e),i.emit("boxStateChange",e)})),r.teleBoxManager.onValChanged("darkMode",(function(e){a.emit("darkModeChange",e)})),r.teleBoxManager.onValChanged("prefersColorScheme",(function(e){a.emit("prefersColorSchemeChange",e)})),r.teleBoxManager.onValChanged("minimized",(function(e,t){if(!t)if(r.context.safeSetAttributes({minimized:e}),e)r.context.cleanFocus(),r.blurAllBox();else{var n=r.getTopBox();n&&(r.context.setAppFocus(n.id),r.focusBox({appId:n.id},!1))}})),r.teleBoxManager.onValChanged("maximized",(function(e,t){t||r.context.safeSetAttributes({maximized:e})})),r.teleBoxManager.events.on("removed",(function(e){e.forEach((function(e){o.emit("close",{appId:e.id})}))})),r.teleBoxManager.events.on("intrinsic_move",(0,s.debounce)((function(e){o.emit("move",{appId:e.id,x:e.intrinsicX,y:e.intrinsicY})}),50)),r.teleBoxManager.events.on("intrinsic_resize",(0,s.debounce)((function(e){o.emit("resize",{appId:e.id,width:e.intrinsicWidth,height:e.intrinsicHeight})}),200)),r.teleBoxManager.events.on("focused",(function(e){e&&(r.canOperate?o.emit("focus",{appId:e.id}):r.teleBoxManager.blurBox(e.id))})),r.teleBoxManager.events.on("z_index",(function(e){r.context.updateAppState(e.id,Z.ZIndex,e.zIndex)})),i.on("containerSizeRatioUpdate",(function(e){r.teleBoxManager._stageRatio$.setValue(e)})),r.teleBoxManager._fullscreen$.reaction((function(e){a.emit("fullscreenChange",e)}))]}))}return U(e,[{key:"createBox",value:function(e){var t,n,r;if(this.teleBoxManager){var i=null!==(t=e.app.config)&&void 0!==t?t:{},a=i.minwidth,o=void 0===a?.4722222222222222:a,s=i.minheight,u=void 0===s?.4722222222222222:s,c=i.enableShadowDOM,l=void 0===c||c,d=null!==(n=e.app.config)&&void 0!==n?n:{},p=d.width,h=d.height,f=(null==(r=e.options)?void 0:r.title)||e.appId,g=this.teleBoxManager.rootRect;o>1&&(o/=g.width),u>1&&(u/=g.height);var m={title:f,minWidth:o,minHeight:u,width:p,height:h,id:e.appId,enableShadowDOM:l},y=this.teleBoxManager.create(m,e.smartPosition);return this.context.emitter.emit("".concat(e.appId).concat(V.WindowCreated)),y}}},{key:"setupBoxManager",value:function(e){var t=Nc.playground,n={stageRatio:null==e?void 0:e.stageRatio,root:t,fence:!1,prefersColorScheme:null==e?void 0:e.prefersColorScheme};(null==e?void 0:e.containerStyle)&&(n.containerStyle=e.containerStyle),(null==e?void 0:e.stageStyle)&&(n.stageStyle=e.stageStyle),(null==e?void 0:e.fullscreen)&&(n.fullscreen=e.fullscreen),void 0!==(null==e?void 0:e.defaultBoxBodyStyle)&&(n.defaultBoxBodyStyle=e.defaultBoxBodyStyle),void 0!==(null==e?void 0:e.defaultBoxStageStyle)&&(n.defaultBoxStageStyle=e.defaultBoxStageStyle),(null==e?void 0:e.theme)&&(n.theme=e.theme);var r=new rr(n);this.teleBoxManager&&this.teleBoxManager.destroy(),this.teleBoxManager=r;var i=null==e?void 0:e.collectorContainer;return i&&this.teleBoxManager.collector.set$collector(i),(null==e?void 0:e.collectorStyles)&&this.teleBoxManager.collector.setStyles(e.collectorStyles),r}},{key:"getBox",value:function(e){return this.teleBoxManager.queryOne({id:e})}},{key:"closeBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.teleBoxManager.remove(e,t)}},{key:"boxIsFocus",value:function(e){var t=this.getBox(e);return null==t?void 0:t.focus}},{key:"getFocusBox",value:function(){return this.teleBoxManager.query({focus:!0})[0]}},{key:"getTopBox",value:function(){return this.teleBoxManager.topBox}},{key:"updateBoxState",value:function(e){var t=this;if(e){var n=this.getBox(e.id);n&&(e.size&&n._intrinsicSize$.setValue(e.size,!0),e.position&&void 0!==e.position.x&&void 0!==e.position.y&&n._intrinsicCoord$.setValue({x:e.position.x,y:e.position.y},!0),e.zIndex&&n._zIndex$.setValue(e.zIndex,!0),setTimeout((function(){e.focus&&t.teleBoxManager.focusBox(n.id,!0),null!=e.maximized&&t.teleBoxManager.setMaximized(Boolean(e.maximized),!0),null!=e.minimized&&t.teleBoxManager.setMinimized(Boolean(e.minimized),!0)}),50),this.context.callbacks.emit("boxStateChange",this.teleBoxManager.state))}}},{key:"moveBox",value:function(e){var t=e.appId,n=e.x,r=e.y,i=this.getBox(t);i&&i._intrinsicCoord$.setValue({x:n,y:r},!0)}},{key:"focusBox",value:function(e){var t=e.appId,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.teleBoxManager.focusBox(t,n)}},{key:"resizeBox",value:function(e){var t=e.appId,n=e.width,r=e.height,i=e.skipUpdate,a=this.getBox(t);a&&a._intrinsicSize$.setValue({width:n,height:r},i)}},{key:"setBoxMinSize",value:function(e){this.teleBoxManager.update(e.appId,{minWidth:e.minWidth,minHeight:e.minHeight},!0)}},{key:"setBoxTitle",value:function(e){this.teleBoxManager.update(e.appId,{title:e.title},!0)}},{key:"blurAllBox",value:function(){this.teleBoxManager.blurAll()}},{key:"updateAll",value:function(e){this.teleBoxManager.updateAll(e)}},{key:"setMaximized",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e!==this.maximized&&this.teleBoxManager.setMaximized(e,t)}},{key:"setMinimized",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.teleBoxManager.setMinimized(e,t)}},{key:"focusTopBox",value:function(){if(this.teleBoxManager.query().length>=1){var e=this.getTopBox();e&&this.focusBox({appId:e.id},!1)}}},{key:"updateBox",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.teleBoxManager.update(e,t,n)}},{key:"setReadonly",value:function(e){this.teleBoxManager.setReadonly(e)}},{key:"setPrefersColorScheme",value:function(e){this.teleBoxManager.setPrefersColorScheme(e)}},{key:"setZIndex",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.teleBoxManager.update(e,{zIndex:t},n)}},{key:"setRoot",value:function(e){this.teleBoxManager._root$.setValue(e)}},{key:"setCollector",value:function(e){this.teleBoxManager.collector.set$collector(e)}},{key:"destroy",value:function(){this.sideEffectManager.flushAll(),this.teleBoxManager.destroy()}},{key:"canOperate",get:function(){return this.context.canOperate()}},{key:"boxState",get:function(){return this.teleBoxManager.state}},{key:"maximized",get:function(){return this.teleBoxManager.maximized}},{key:"minimized",get:function(){return this.teleBoxManager.minimized}},{key:"darkMode",get:function(){return this.teleBoxManager.darkMode}},{key:"prefersColorScheme",get:function(){return this.teleBoxManager.prefersColorScheme}},{key:"boxSize",get:function(){return this.teleBoxManager.boxes.length}},{key:"stageRect",get:function(){return this.teleBoxManager.stageRect}},{key:"stageRect$",get:function(){return this.teleBoxManager._stageRect$}}]),e}();function or(){}function sr(e){return e()}function ur(){return Object.create(null)}function cr(e){e.forEach(sr)}function lr(e){return"function"==typeof e}function dr(e,t){return e!=e?t==t:e!==t||e&&"object"===O(e)||"function"==typeof e}function pr(e,t){return $n||($n=document.createElement("a")),$n.href=t,e===$n.href}function hr(e,t){e.appendChild(t)}function fr(e,t,n){e.insertBefore(t,n||null)}function gr(e){e.parentNode&&e.parentNode.removeChild(e)}function mr(e){return document.createElement(e)}function yr(e){return document.createTextNode(e)}function vr(){return yr(" ")}function br(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function wr(e){return Array.from(e.childNodes)}function Mr(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function xr(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Ir(e){Xn=e}var Nr=[],Tr=[],Dr=[],Ar=[],kr=Promise.resolve(),Sr=!1;function Er(e){Dr.push(e)}var jr=new Set,Cr=0;function zr(){var e=Xn;do{for(;Cr<Nr.length;){var t=Nr[Cr];Cr++,Ir(t),Or(t.$$)}for(Ir(null),Nr.length=0,Cr=0;Tr.length;)Tr.pop()();for(var n=0;n<Dr.length;n+=1){var r=Dr[n];jr.has(r)||(jr.add(r),r())}Dr.length=0}while(Nr.length);for(;Ar.length;)Ar.pop()();Sr=!1,jr.clear(),Ir(e)}function Or(e){if(null!==e.fragment){e.update(),cr(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Er)}}var Lr=new Set;function _r(e,t){e&&e.i&&(Lr.delete(e),e.i(t))}function Pr(e,t,n,r){var i=e.$$,a=i.fragment,o=i.after_update;a&&a.m(t,n),r||Er((function(){var t,n=e.$$.on_mount.map(sr).filter(lr);e.$$.on_destroy?(t=e.$$.on_destroy).push.apply(t,b(n)):cr(n);e.$$.on_mount=[]})),o.forEach(Er)}function Rr(e,t){-1===e.$$.dirty[0]&&(Nr.push(e),Sr||(Sr=!0,kr.then(zr)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ur(e){var t,n,r,i,a,o,s,u=e[16]&&Br(e),c=e[17]&&Vr(e);return{c:function(){t=mr("div"),n=mr("div"),u&&u.c(),r=vr(),i=mr("span"),a=yr(e[0]),o=vr(),c&&c.c(),xr(i,"overflow","hidden"),xr(i,"white-space","nowrap"),xr(i,"text-overflow","ellipsis"),xr(i,"max-width","80px"),br(n,"class",e[8]),xr(n,"background-color",e[2]),xr(n,"color",e[9]),xr(n,"opacity",e[11]),br(t,"class",s="netless-window-manager-cursor-name "+e[14]+" "+e[13])},m:function(e,s){fr(e,t,s),hr(t,n),u&&u.m(n,null),hr(n,r),hr(n,i),hr(i,a),hr(n,o),c&&c.m(n,null)},p:function(e,i){e[16]?u?u.p(e,i):((u=Br(e)).c(),u.m(n,r)):u&&(u.d(1),u=null),1&i&&Mr(a,e[0]),e[17]?c?c.p(e,i):((c=Vr(e)).c(),c.m(n,null)):c&&(c.d(1),c=null),256&i&&br(n,"class",e[8]),4&i&&xr(n,"background-color",e[2]),512&i&&xr(n,"color",e[9]),2048&i&&xr(n,"opacity",e[11]),24576&i&&s!==(s="netless-window-manager-cursor-name "+e[14]+" "+e[13])&&br(t,"class",s)},d:function(e){e&&gr(t),u&&u.d(),c&&c.d()}}}function Br(e){var t,n;return{c:function(){br(t=mr("img"),"class","netless-window-manager-cursor-selector-avatar"),br(t,"style",e[18]()),pr(t.src,n=e[7])||br(t,"src",n),br(t,"alt","avatar")},m:function(e,n){fr(e,t,n)},p:function(e,r){128&r&&!pr(t.src,n=e[7])&&br(t,"src",n)},d:function(e){e&&gr(t)}}}function Vr(e){var t,n;return{c:function(){t=mr("span"),n=yr(e[1]),br(t,"class","netless-window-manager-cursor-tag-name"),xr(t,"background-color",e[10])},m:function(e,r){fr(e,t,r),hr(t,n)},p:function(e,r){2&r&&Mr(n,e[1]),1024&r&&xr(t,"background-color",e[10])},d:function(e){e&&gr(t)}}}function Yr(e){var t,n,r,i,a,o,s=!e[12]&&Ur(e);return{c:function(){t=mr("div"),s&&s.c(),n=vr(),r=mr("div"),br(i=mr("img"),"class",a="netless-window-manager-cursor-"+e[3]+"-image "+e[13]),pr(i.src,o=e[6])||br(i,"src",o),br(i,"alt",e[3]),br(r,"class","cursor-image-wrapper"),br(t,"class","netless-window-manager-cursor-mid"),xr(t,"transform","translateX("+e[4]+"px) translateY("+e[5]+"px)"),xr(t,"display",e[15])},m:function(e,a){fr(e,t,a),s&&s.m(t,null),hr(t,n),hr(t,r),hr(r,i)},p:function(e,r){var u=v(r,1)[0];e[12]?s&&(s.d(1),s=null):s?s.p(e,u):((s=Ur(e)).c(),s.m(t,n)),8200&u&&a!==(a="netless-window-manager-cursor-"+e[3]+"-image "+e[13])&&br(i,"class",a),64&u&&!pr(i.src,o=e[6])&&br(i,"src",o),8&u&&br(i,"alt",e[3]),48&u&&xr(t,"transform","translateX("+e[4]+"px) translateY("+e[5]+"px)"),32768&u&&xr(t,"display",e[15])},i:or,o:or,d:function(e){e&&gr(t),s&&s.d()}}}function Qr(e,t,n){var r,i,a,o,c,l,d,p,h=t.cursorName,f=t.tagName,g=t.backgroundColor,m=t.appliance,y=t.x,b=t.y,w=t.src,M=t.visible,x=t.avatar,I=t.theme,N=t.color,T=t.cursorTagBackgroundColor,D=t.opacity,A=t.pencilEraserSize;return e.$$set=function(e){"cursorName"in e&&n(0,h=e.cursorName),"tagName"in e&&n(1,f=e.tagName),"backgroundColor"in e&&n(2,g=e.backgroundColor),"appliance"in e&&n(3,m=e.appliance),"x"in e&&n(4,y=e.x),"y"in e&&n(5,b=e.y),"src"in e&&n(6,w=e.src),"visible"in e&&n(19,M=e.visible),"avatar"in e&&n(7,x=e.avatar),"theme"in e&&n(8,I=e.theme),"color"in e&&n(9,N=e.color),"cursorTagBackgroundColor"in e&&n(10,T=e.cursorTagBackgroundColor),"opacity"in e&&n(11,D=e.opacity),"pencilEraserSize"in e&&n(20,A=e.pencilEraserSize)},e.$$.update=function(){1&e.$$.dirty&&(r=!(0,s.isEmpty)(h)),2&e.$$.dirty&&n(17,i=!(0,s.isEmpty)(f)),128&e.$$.dirty&&n(16,a=!(0,s.isEmpty)(x)),524288&e.$$.dirty&&n(15,o=M?"initial":"none"),8&e.$$.dirty&&n(12,c=m===u.ApplianceNames.laserPointer),4104&e.$$.dirty&&n(21,l=c||m===u.ApplianceNames.pencilEraser),2097152&e.$$.dirty&&n(14,d=l?"netless-window-manager-laserPointer-pencilEraser-offset":""),1048576&e.$$.dirty&&n(13,p=3===A?"netless-window-manager-pencilEraser-3-offset":"")},[h,f,g,m,y,b,w,x,I,N,T,D,c,p,d,o,a,i,function(){return Object.entries({width:(r?19:28)+"px",height:(r?19:28)+"px",position:r?"initial":"absolute","border-color":r?"white":g,"margin-right":(r?4:0)+"px"}).map((function(e){var t=v(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)})).join(";")},M,A,l]}var Zr=function(e){x(n,e);var t=I(n);function n(e){var r;return P(this,n),function(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],u=Xn;Ir(e);var c=e.$$={fragment:null,ctx:[],props:a,update:or,not_equal:i,bound:ur(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:ur(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);var l=!1;if(c.ctx=n?n(e,t.props||{},(function(t,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&i(c.ctx[t],c.ctx[t]=r)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](r),l&&Rr(e,t)),n})):[],c.update(),l=!0,cr(c.before_update),c.fragment=!!r&&r(c.ctx),t.target){if(t.hydrate){var d=wr(t.target);c.fragment&&c.fragment.l(d),d.forEach(gr)}else c.fragment&&c.fragment.c();t.intro&&_r(e.$$.fragment),Pr(e,t.target,t.anchor,t.customElement),zr()}Ir(u)}(T(r=t.call(this)),e,Qr,Yr,dr,{cursorName:0,tagName:1,backgroundColor:2,appliance:3,x:4,y:5,src:6,visible:19,avatar:7,theme:8,color:9,cursorTagBackgroundColor:10,opacity:11,pencilEraserSize:20}),r}return n}(function(){function e(){P(this,e)}return U(e,[{key:"$destroy",value:function(){var e,t;e=1,null!==(t=this.$$).fragment&&(cr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[]),this.$destroy=or}},{key:"$on",value:function(e,t){if(!lr(t))return or;var n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},{key:"$set",value:function(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}]),e}()),Wr=function(){function e(t,n,r,i){var a=this;P(this,e),this.manager=t,this.memberId=n,this.cursorManager=r,this.wrapper=i,this.move=function(e){var t,n;if("main"===e.type){var r=null==(t=a.manager.boxManager)?void 0:t.stageRect;a.component&&r&&(a.autoHidden(),a.moveCursor(e,r,a.manager.mainView))}else{var i=a.cursorManager.focusView,o=null==(n=null==i?void 0:i.divElement)?void 0:n.getBoundingClientRect(),s=null==i?void 0:i.camera;i&&o&&s&&a.component&&(a.autoHidden(),a.moveCursor(e,o,i))}},this.leave=function(){a.hide()},this.updateMember(),this.createCursor(),this.autoHidden()}var t;return U(e,[{key:"moveCursor",value:function(e,t,n){var r,i,a=e.x,o=e.y,s=e.type,u=null==n?void 0:n.screen.convertPointToScreen(a,o);if(u){var c=u.x-2,l=u.y-18;if("app"===s){var d=this.cursorManager.playgroundRect;d&&(c=c+t.x-d.x,l=l+t.y-d.y)}else c+=t.x,l+=t.y;u.x<0||u.x>t.width||u.y<0||u.y>t.height?null==(r=this.component)||r.$set({visible:!1,x:c,y:l}):null==(i=this.component)||i.$set({visible:!0,x:c,y:l})}}},{key:"autoHidden",value:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout((function(){e.hide()}),1e4)}},{key:"createCursor",value:(t=_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.member&&this.wrapper&&(this.component=new Zr({target:this.wrapper,props:this.initProps()}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"initProps",value:function(){var e;return{x:0,y:0,appliance:this.memberApplianceName,avatar:this.memberAvatar,src:this.getIcon(),visible:!1,backgroundColor:this.memberColor,cursorName:this.memberCursorName,theme:this.memberTheme,color:this.memberCursorTextColor,cursorTagBackgroundColor:this.memberCursorTagBackgroundColor,opacity:this.memberOpacity,tagName:this.memberTagName,pencilEraserSize:null==(e=this.member)?void 0:e.memberState.pencilEraserSize}}},{key:"getIcon",value:function(){var e;if(this.member){var t,n=this.cursorManager.applianceIcons;if(this.memberApplianceName===u.ApplianceNames.pencilEraser){var r=(null==(e=this.member)?void 0:e.memberState.pencilEraserSize)||1;t=n["".concat(this.memberApplianceName).concat(r)]}else t=n[this.memberApplianceName||u.ApplianceNames.shape];return t||n[u.ApplianceNames.shape]}}},{key:"updateMember",value:function(){return this.member=Ve(this.manager.room,this.memberId),this.updateComponent(),this.member}},{key:"updateComponent",value:function(){var e;null==(e=this.component)||e.$set((0,s.omit)(this.initProps(),["x","y"]))}},{key:"destroy",value:function(){this.component&&this.component.$destroy(),this.cursorManager.cursorInstances.delete(this.memberId),this.timer&&clearTimeout(this.timer)}},{key:"hide",value:function(){this.component&&(this.component.$set({visible:!1}),this.destroy())}},{key:"memberApplianceName",get:function(){var e,t;return null==(t=null==(e=this.member)?void 0:e.memberState)?void 0:t.currentApplianceName}},{key:"memberColor",get:function(){var e,t,n=null==(t=null==(e=this.member)?void 0:e.memberState)?void 0:t.strokeColor.join(",");return"rgb(".concat(n,")")}},{key:"payload",get:function(){var e;return null==(e=this.member)?void 0:e.payload}},{key:"memberCursorName",get:function(){var e,t;return(null==(e=this.payload)?void 0:e.nickName)||(null==(t=this.payload)?void 0:t.cursorName)||this.memberId}},{key:"memberTheme",get:function(){var e;return(null==(e=this.payload)?void 0:e.theme)?"netless-window-manager-cursor-inner-mellow":"netless-window-manager-cursor-inner"}},{key:"memberCursorTextColor",get:function(){var e;return(null==(e=this.payload)?void 0:e.cursorTextColor)||"#FFFFFF"}},{key:"memberCursorTagBackgroundColor",get:function(){var e;return(null==(e=this.payload)?void 0:e.cursorTagBackgroundColor)||this.memberColor}},{key:"memberAvatar",get:function(){var e;return null==(e=this.payload)?void 0:e.avatar}},{key:"memberOpacity",get:function(){return this.memberCursorName||this.memberAvatar?1:0}},{key:"memberTagName",get:function(){var e;return null==(e=this.payload)?void 0:e.cursorTagName}}]),e}(),Gr=(z(r={},u.ApplianceNames.pencil,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg=="),z(r,u.ApplianceNames.selector,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg=="),z(r,u.ApplianceNames.eraser,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII="),z(r,u.ApplianceNames.shape,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5zaGFwZS1jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNjQuNiUiIHk9Ii01OS41JSIgd2lkdGg9IjIyOS4zJSIgaGVpZ2h0PSIyNDYuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd0JsdXJPdXRlcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbXBvc2l0ZT4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMTYgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi00IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iV2hpdGVib2FyZC1HdWlkZWxpbmVzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ0LjAwMDAwMCwgLTc1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNoYXBlLWN1cnNvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgNzUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkh+S7vS00NCIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC4wMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMjAsMjEgQzIwLjQ4NTQxMDMsMjEgMjAuODk4MDg1LDIxLjM0Nzk5OTMgMjAuOTg5OTQ3OSwyMS44NjU0ODc3IEwyMSwyMiBMMjEsMjcgQzIxLDI3LjU1MjI4NDcgMjAuNTUyMjg0NywyOCAyMCwyOCBDMTkuNTE0NTg5NywyOCAxOS4xMDE5MTUsMjcuNjUyMDAwNyAxOS4wMTAwNTIxLDI3LjEzNDUxMjMgTDE5LDI3IEwxOSwyMiBDMTksMjEuNDQ3NzE1MyAxOS40NDc3MTUzLDIxIDIwLDIxIFogTTI3LDE5IEMyNy41NTIyODQ3LDE5IDI4LDE5LjQ0NzcxNTMgMjgsMjAgQzI4LDIwLjQ4NTQxMDMgMjcuNjUyMDAwNywyMC44OTgwODUgMjcuMTM0NTEyMywyMC45ODk5NDc5IEwyNywyMSBMMjIsMjEgQzIxLjQ0NzcxNTMsMjEgMjEsMjAuNTUyMjg0NyAyMSwyMCBDMjEsMTkuNTE0NTg5NyAyMS4zNDc5OTkzLDE5LjEwMTkxNSAyMS44NjU0ODc3LDE5LjAxMDA1MjEgTDIyLDE5IEwyNywxOSBaIE0xOCwxOSBDMTguNTUyMjg0NywxOSAxOSwxOS40NDc3MTUzIDE5LDIwIEMxOSwyMC40ODU0MTAzIDE4LjY1MjAwMDcsMjAuODk4MDg1IDE4LjEzNDUxMjMsMjAuOTg5OTQ3OSBMMTgsMjEgTDEzLDIxIEMxMi40NDc3MTUzLDIxIDEyLDIwLjU1MjI4NDcgMTIsMjAgQzEyLDE5LjUxNDU4OTcgMTIuMzQ3OTk5MywxOS4xMDE5MTUgMTIuODY1NDg3NywxOS4wMTAwNTIxIEwxMywxOSBMMTgsMTkgWiBNMjAsMTIgQzIwLjQ4NTQxMDMsMTIgMjAuODk4MDg1LDEyLjM0Nzk5OTMgMjAuOTg5OTQ3OSwxMi44NjU0ODc3IEwyMSwxMyBMMjEsMTggQzIxLDE4LjU1MjI4NDcgMjAuNTUyMjg0NywxOSAyMCwxOSBDMTkuNTE0NTg5NywxOSAxOS4xMDE5MTUsMTguNjUyMDAwNyAxOS4wMTAwNTIxLDE4LjEzNDUxMjMgTDE5LDE4IEwxOSwxMyBDMTksMTIuNDQ3NzE1MyAxOS40NDc3MTUzLDEyIDIwLDEyIFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTguNSIgeT0iMTciIHdpZHRoPSIzIiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNGRkZGRkYiIHg9IjE3IiB5PSIxOC41IiB3aWR0aD0iNiIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMzI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"),z(r,u.ApplianceNames.text,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT50ZXh0LWN1cnNvcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwyNi41IEMxNS43MjM4NTc2LDI2LjUgMTUuNSwyNi4yNzYxNDI0IDE1LjUsMjYgQzE1LjUsMjUuNzU0NTQwMSAxNS42NzY4NzUyLDI1LjU1MDM5MTYgMTUuOTEwMTI0NCwyNS41MDgwNTU3IEwxNiwyNS41IEwxOS41LDI1LjUgTDE5LjUsMTQuNSBMMTYsMTQuNSBDMTUuNzIzODU3NiwxNC41IDE1LjUsMTQuMjc2MTQyNCAxNS41LDE0IEMxNS41LDEzLjc1NDU0MDEgMTUuNjc2ODc1MiwxMy41NTAzOTE2IDE1LjkxMDEyNDQsMTMuNTA4MDU1NyBMMTYsMTMuNSBMMjQsMTMuNSBDMjQuMjc2MTQyNCwxMy41IDI0LjUsMTMuNzIzODU3NiAyNC41LDE0IEMyNC41LDE0LjI0NTQ1OTkgMjQuMzIzMTI0OCwxNC40NDk2MDg0IDI0LjA4OTg3NTYsMTQuNDkxOTQ0MyBMMjQsMTQuNSBMMjAuNSwxNC41IEwyMC41LDI1LjUgTDI0LDI1LjUgQzI0LjI3NjE0MjQsMjUuNSAyNC41LDI1LjcyMzg1NzYgMjQuNSwyNiBDMjQuNSwyNi4yNDU0NTk5IDI0LjMyMzEyNDgsMjYuNDQ5NjA4NCAyNC4wODk4NzU2LDI2LjQ5MTk0NDMgTDI0LDI2LjUgTDE2LDI2LjUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4NC4wJSIgeT0iLTgxLjUlIiB3aWR0aD0iNjY4LjElIiBoZWlnaHQ9IjI5My45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xNiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iLTQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXaGl0ZWJvYXJkLUd1aWRlbGluZXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODguMDAwMDAwLCAtNjcyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0idGV4dC1jdXJzb3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Mi4wMDAwMDAsIDY3Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNDAiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuMDEiIHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSIgZD0iTTE5LDI1IEwxOSwxNSBMMTYsMTUgQzE1LjQ0NzcxNTMsMTUgMTUsMTQuNTUyMjg0NyAxNSwxNCBDMTUsMTMuNTE0NTg5NyAxNS4zNDc5OTkzLDEzLjEwMTkxNSAxNS44NjU0ODc3LDEzLjAxMDA1MjEgTDE2LDEzIEwyNCwxMyBDMjQuNTUyMjg0NywxMyAyNSwxMy40NDc3MTUzIDI1LDE0IEMyNSwxNC40ODU0MTAzIDI0LjY1MjAwMDcsMTQuODk4MDg1IDI0LjEzNDUxMjMsMTQuOTg5OTQ3OSBMMjQsMTUgTDIxLDE1IEwyMSwyNSBMMjQsMjUgQzI0LjU1MjI4NDcsMjUgMjUsMjUuNDQ3NzE1MyAyNSwyNiBDMjUsMjYuNDg1NDEwMyAyNC42NTIwMDA3LDI2Ljg5ODA4NSAyNC4xMzQ1MTIzLDI2Ljk4OTk0NzkgTDI0LDI3IEwxNiwyNyBDMTUuNDQ3NzE1MywyNyAxNSwyNi41NTIyODQ3IDE1LDI2IEMxNSwyNS41MTQ1ODk3IDE1LjM0Nzk5OTMsMjUuMTAxOTE1IDE1Ljg2NTQ4NzcsMjUuMDEwMDUyMSBMMTYsMjUgTDE5LDI1IFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="),z(r,u.ApplianceNames.laserPointer,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjhweCIgaGVpZ2h0PSIyOHB4IiB2aWV3Qm94PSIwIDAgMjggMjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxmaWx0ZXIgeD0iLTEyMC4wJSIgeT0iLTEyMC4wJSIgd2lkdGg9IjM0MC4wJSIgaGVpZ2h0PSIzNDAuMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNCIgaW49IlNvdXJjZUdyYXBoaWMiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjAwMDAwMCwgOS4wMDAwMDApIiBmaWxsPSIjRkYwMTAwIj4KICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2iIiBmaWx0ZXI9InVybCgjZmlsdGVyLTEpIiBjeD0iNSIgY3k9IjUiIHI9IjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8cGF0aCBkPSJNNSw4IEM2LjY1Njg1NDI1LDggOCw2LjY1Njg1NDI1IDgsNSBDOCwzLjM0MzE0NTc1IDYuNjU2ODU0MjUsMiA1LDIgQzMuMzQzMTQ1NzUsMiAyLDMuMzQzMTQ1NzUgMiw1IEMyLDYuNjU2ODU0MjUgMy4zNDMxNDU3NSw4IDUsOCBaIE01LDYuMjg1NzE0MjkgQzQuMjg5OTE5NjEsNi4yODU3MTQyOSAzLjcxNDI4NTcxLDUuNzEwMDgwMzkgMy43MTQyODU3MSw1IEMzLjcxNDI4NTcxLDQuMjg5OTE5NjEgNC4yODk5MTk2MSwzLjcxNDI4NTcxIDUsMy43MTQyODU3MSBDNS43MTAwODAzOSwzLjcxNDI4NTcxIDYuMjg1NzE0MjksNC4yODk5MTk2MSA2LjI4NTcxNDI5LDUgQzYuMjg1NzE0MjksNS43MTAwODAzOSA1LjcxMDA4MDM5LDYuMjg1NzE0MjkgNSw2LjI4NTcxNDI5IFoiIGlkPSLmpK3lnIblvaIiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"),z(r,"pencilEraser1","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAxOCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIxNyIgaGVpZ2h0PSIyNSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K"),z(r,"pencilEraser2","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCAyNiAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIyNSIgaGVpZ2h0PSIzMyIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K"),z(r,"pencilEraser3","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCAzNCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIzMyIgaGVpZ2h0PSI0OSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K"),r),Fr=function(){function e(t,n,r){var i,a=this;P(this,e),this.manager=t,this.enableCursor=n,this.cursorInstances=new Map,this.sideEffectManager=new p.SideEffectManager,this.store=this.manager.store,this.applianceIcons=Gr,this.onCursorMove=function(e){var t=a.initCursorInstance(e.uid);if(e.state===F.Leave)t.leave();else{var n=t.updateMember();a.canMoveCursor(n)&&t.move(e.position)}},this.initCursorInstance=function(e){var t=a.cursorInstances.get(e);return t||(t=new Wr(a.manager,e,a,a.playground$.value),a.cursorInstances.set(e,t)),t},this.mouseMoveListener=(0,s.throttle)((function(e){("touch"!==e.pointerType||e.isPrimary)&&a.updateCursor(a.getType(e),e.clientX,e.clientY)}),48),this.getPoint=function(e,t,n){var r,i=null==(r=null==e?void 0:e.divElement)?void 0:r.getBoundingClientRect();if(i)return null==e?void 0:e.convertToPointInWorld({x:t-i.x,y:n-i.y})},this.getType=function(e){var t,n=e.target,r=a.manager.focusApp;switch(n.parentElement){case a.mainViewElement:return{type:"main"};case null==(t=null==r?void 0:r.view)?void 0:t.divElement:return{type:"app"};default:return{type:"main"}}},this.mouseLeaveListener=function(){a.hideCursor(a.manager.uid)},this.roomMembers=null==(i=this.manager.room)?void 0:i.state.roomMembers;var o=this.playground$.value;o&&this.setupWrapper(o),this.sideEffectManager.add((function(){return q.on("cursorMove",a.onCursorMove)})),this.sideEffectManager.add((function(){return q.on("playgroundSizeChange",(function(){return a.updateContainerRect()}))})),r&&(this.applianceIcons=C(C({},Gr),r))}return U(e,[{key:"canMoveCursor",value:function(e){var t=(null==e?void 0:e.memberState.currentApplianceName)===u.ApplianceNames.laserPointer;return this.enableCursor||t}},{key:"setupWrapper",value:function(e){var t=this;this.sideEffectManager.add((function(){return e.addEventListener("pointerenter",t.mouseMoveListener),e.addEventListener("pointermove",t.mouseMoveListener),e.addEventListener("pointerleave",t.mouseLeaveListener),function(){e.removeEventListener("pointerenter",t.mouseMoveListener),e.removeEventListener("pointermove",t.mouseMoveListener),e.removeEventListener("pointerleave",t.mouseLeaveListener)}})),this.updateContainerRect()}},{key:"setMainViewDivElement",value:function(e){this.mainViewElement=e}},{key:"updateCursor",value:function(e,t,n){var r=Ve(this.manager.room,this.manager.uid);if(this.wrapperRect&&this.manager.canOperate&&this.canMoveCursor(r)){var i="main"===e.type?this.manager.mainView:this.focusView,a=this.getPoint(i,t,n);a&&this.manager.dispatchInternalEvent(V.CursorMove,{uid:this.manager.uid,position:{x:a.x,y:a.y,type:e.type}})}}},{key:"updateContainerRect",value:function(){var e,t;this.wrapperRect=null==(e=this.manager.boxManager)?void 0:e.stageRect,this.playgroundRect=null==(t=Nc.playground)?void 0:t.getBoundingClientRect()}},{key:"deleteCursor",value:function(e){this.store.cleanCursor(e);var t=this.cursorInstances.get(e);t&&t.destroy()}},{key:"hideCursor",value:function(e){var t=this.cursorInstances.get(e);t&&t.hide()}},{key:"destroy",value:function(){this.sideEffectManager.flushAll(),this.cursorInstances.size&&(this.cursorInstances.forEach((function(e){e.destroy()})),this.cursorInstances.clear())}},{key:"playground$",get:function(){return this.manager.windowManger.playground$}},{key:"boxState",get:function(){return this.store.getBoxState()}},{key:"focusView",get:function(){var e;return null==(e=this.manager.focusApp)?void 0:e.view}}]),e}(),Hr=function(){function e(t){var n=this;P(this,e),this.manager=t,q.on("changePageState",(function(){J.emit("pageStateChange",n.toObject())}))}return U(e,[{key:"getPages",value:function(){var e,t=this;return(null==(e=this.manager.callbacksNode)?void 0:e.scenes.map((function(e){var n;return"".concat(null==(n=t.manager.callbacksNode)?void 0:n.path).concat(e)})))||[]}},{key:"toObject",value:function(){return{index:this.index>=this.length?this.length-1:this.index,length:this.length,pages:this.getPages()}}},{key:"index",get:function(){var e;return(null==(e=this.manager)?void 0:e.store.getMainViewSceneIndex())||0}},{key:"length",get:function(){var e;return(null==(e=this.manager)?void 0:e.mainViewScenesLength)||0}}]),e}(),$r=function(){function e(t){var n=this;P(this,e),this.ctx=t,this.reactors=new Map,this.disposers=new Map,this.onPhaseChanged=function(e){var t,r;e===u.RoomPhase.Reconnecting&&n.ctx.emitter.emit("startReconnect"),e===u.RoomPhase.Connected&&n.phase===u.RoomPhase.Reconnecting&&((null==(t=n.room)?void 0:t.isWritable)?null==(r=n.room)||r.dispatchMagixEvent(Q,{}):n.onReconnected()),n.phase=e},this.onReconnected=(0,s.debounce)((function(){n._onReconnected()}),1e3),this._onReconnected=function(){Ue("onReconnected refresh reactors"),n.releaseDisposers(),n.reactors.forEach((function(e,t){(0,s.isFunction)(e)&&n.disposers.set(t,e())})),n.ctx.emitter.emit("onReconnected")}}return U(e,[{key:"setRoom",value:function(e){var t=this;this.room=e,this.phase=null==e?void 0:e.phase,e&&(e.callbacks.off("onPhaseChanged",this.onPhaseChanged),e.callbacks.on("onPhaseChanged",this.onPhaseChanged),e.addMagixEventListener(Q,(function(n){n.authorId===e.observerId&&t.onReconnected()}),{fireSelfEventAfterCommit:!0}))}},{key:"setContext",value:function(e){this.ctx=e}},{key:"releaseDisposers",value:function(){this.disposers.forEach((function(e){(0,s.isFunction)(e)&&e()})),this.disposers.clear()}},{key:"refresh",value:function(){this._onReconnected()}},{key:"add",value:function(e,t){var n=this,r=this.disposers.get(e);return r&&(0,s.isFunction)(r)&&r(),(0,s.isFunction)(t)&&(this.reactors.set(e,t),this.disposers.set(e,t())),function(){return n.remove(e)}}},{key:"remove",value:function(e){this.reactors.has(e)&&this.reactors.delete(e);var t=this.disposers.get(e);t&&((0,s.isFunction)(t)&&t(),this.disposers.delete(e))}},{key:"hasReactor",value:function(e){return this.reactors.has(e)}},{key:"destroy",value:function(){var e,t;null==(e=this.room)||e.callbacks.off("onPhaseChanged",this.onPhaseChanged),null==(t=this.room)||t.removeMagixEventListener(Q,this.onReconnected),this.releaseDisposers()}}]),e}(),Xr=function(e,t){if((0,u.isPlayer)(e)){Kr(e)}else{if(Object.getOwnPropertyDescriptor(e,"disableCameraTransform"))return;Object.defineProperty(e,"disableCameraTransform",{get:function(){return t.mainView.disableCameraTransform},set:function(e){t.mainView.disableCameraTransform=e}}),Object.defineProperty(e,"canUndoSteps",{get:function(){return t.canUndoSteps}}),Object.defineProperty(e,"canRedoSteps",{get:function(){return t.canRedoSteps}}),e.moveCamera=function(e){return t.moveCamera(e)},e.moveCameraToContain=function(){return t.moveCameraToContain.apply(t,arguments)},e.convertToPointInWorld=function(){var e;return(e=t.mainView).convertToPointInWorld.apply(e,arguments)},e.setCameraBound=function(){var e;return(e=t.mainView).setCameraBound.apply(e,arguments)},e.scenePreview=function(){var e;return(e=t.mainView).scenePreview.apply(e,arguments)},e.fillSceneSnapshot=function(){var e;return(e=t.mainView).fillSceneSnapshot.apply(e,arguments)},e.generateScreenshot=function(){var e;return(e=t.mainView).generateScreenshot.apply(e,arguments)},e.setMemberState=function(){var e;return(e=t.mainView).setMemberState.apply(e,arguments)},e.redo=function(){return t.redo()},e.undo=function(){return t.undo()},e.cleanCurrentScene=function(){return t.cleanCurrentScene()},e.delete=function(){return t.delete()},e.copy=function(){return t.copy()},e.paste=function(){return t.paste()},e.duplicate=function(){return t.duplicate()},e.insertImage=function(){return t.insertImage.apply(t,arguments)},e.completeImageUpload=function(){return t.completeImageUpload.apply(t,arguments)},e.insertText=function(){return t.insertText.apply(t,arguments)},e.lockImage=function(){return t.lockImage.apply(t,arguments)},e.lockImages=function(){return t.lockImages.apply(t,arguments)},Jr(e,t),e.dynamicPpt.slideStateAdapter.pptHandler||(e.dynamicPpt.slideStateAdapter.pptHandler=t.createPPTHandler())}},Jr=function(e,t){var n=e.removeScenes;e.removeScenes=function(r,i){var a;r===$&&(null==(a=t.appManager)||a.updateRootDirRemoving(!0));var o=n.call(e,r);return q.emit("removeScenes",{scenePath:r,index:i}),o}},Kr=function(e){var t=e.seekToProgressTime;function n(){return(n=_(regeneratorRuntime.mark((function n(r){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.emit("seekStart");case 2:return n.next=4,t.call(e,r);case 4:return i=n.sent,q.emit("seek",r),n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}e.seekToProgressTime=function(e){return n.apply(this,arguments)}},qr="undefined"!=typeof window,ei=qr&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),ti=qr&&"IntersectionObserver"in window,ni=qr&&"classList"in document.createElement("p"),ri=qr&&window.devicePixelRatio>1,ii={elements_selector:".lazy",container:ei||qr?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},ai=function(e){return Object.assign({},ii,e)},oi=function(e,t){var n,r="LazyLoad::Initialized",i=new e(t);try{n=new CustomEvent(r,{detail:{instance:i}})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,{instance:i})}window.dispatchEvent(n)},si="src",ui="srcset",ci="sizes",li="poster",di="llOriginalAttrs",pi="data",hi="loading",fi="loaded",gi="applied",mi="error",yi="native",vi="data-",bi="ll-status",wi=function(e,t){return e.getAttribute(vi+t)},Mi=function(e){return wi(e,bi)},xi=function(e,t){return function(e,t,n){var r=vi+t;null!==n?e.setAttribute(r,n):e.removeAttribute(r)}(e,bi,t)},Ii=function(e){return xi(e,null)},Ni=function(e){return null===Mi(e)},Ti=function(e){return Mi(e)===yi},Di=[hi,fi,gi,mi],Ai=function(e,t,n,r){e&&(void 0===r?void 0===n?e(t):e(t,n):e(t,n,r))},ki=function(e,t){ni?e.classList.add(t):e.className+=(e.className?" ":"")+t},Si=function(e,t){ni?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},Ei=function(e){return e.llTempImage},ji=function(e,t){if(t){var n=t._observer;n&&n.unobserve(e)}},Ci=function(e,t){e&&(e.loadingCount+=t)},zi=function(e,t){e&&(e.toLoadCount=t)},Oi=function(e){for(var t,n=[],r=0;t=e.children[r];r+=1)"SOURCE"===t.tagName&&n.push(t);return n},Li=function(e,t){var n=e.parentNode;n&&"PICTURE"===n.tagName&&Oi(n).forEach(t)},_i=function(e,t){Oi(e).forEach(t)},Pi=[si],Ri=[si,li],Ui=[si,ui,ci],Bi=[pi],Vi=function(e){return!!e[di]},Yi=function(e){return e[di]},Qi=function(e){return delete e[di]},Zi=function(e,t){if(!Vi(e)){var n={};t.forEach((function(t){n[t]=e.getAttribute(t)})),e[di]=n}},Wi=function(e,t){if(Vi(e)){var n=Yi(e);t.forEach((function(t){!function(e,t,n){n?e.setAttribute(t,n):e.removeAttribute(t)}(e,t,n[t])}))}},Gi=function(e,t,n){ki(e,t.class_applied),xi(e,gi),n&&(t.unobserve_completed&&ji(e,t),Ai(t.callback_applied,e,n))},Fi=function(e,t,n){ki(e,t.class_loading),xi(e,hi),n&&(Ci(n,1),Ai(t.callback_loading,e,n))},Hi=function(e,t,n){n&&e.setAttribute(t,n)},$i=function(e,t){Hi(e,ci,wi(e,t.data_sizes)),Hi(e,ui,wi(e,t.data_srcset)),Hi(e,si,wi(e,t.data_src))},Xi={IMG:function(e,t){Li(e,(function(e){Zi(e,Ui),$i(e,t)})),Zi(e,Ui),$i(e,t)},IFRAME:function(e,t){Zi(e,Pi),Hi(e,si,wi(e,t.data_src))},VIDEO:function(e,t){_i(e,(function(e){Zi(e,Pi),Hi(e,si,wi(e,t.data_src))})),Zi(e,Ri),Hi(e,li,wi(e,t.data_poster)),Hi(e,si,wi(e,t.data_src)),e.load()},OBJECT:function(e,t){Zi(e,Bi),Hi(e,pi,wi(e,t.data_src))}},Ji=["IMG","IFRAME","VIDEO","OBJECT"],Ki=function(e,t){!t||function(e){return e.loadingCount>0}(t)||function(e){return e.toLoadCount>0}(t)||Ai(e.callback_finish,t)},qi=function(e,t,n){e.addEventListener(t,n),e.llEvLisnrs[t]=n},ea=function(e,t,n){e.removeEventListener(t,n)},ta=function(e){return!!e.llEvLisnrs},na=function(e){if(ta(e)){var t=e.llEvLisnrs;for(var n in t){var r=t[n];ea(e,n,r)}delete e.llEvLisnrs}},ra=function(e,t,n){!function(e){delete e.llTempImage}(e),Ci(n,-1),function(e){e&&(e.toLoadCount-=1)}(n),Si(e,t.class_loading),t.unobserve_completed&&ji(e,n)},ia=function(e,t,n){var r=Ei(e)||e;if(!ta(r)){!function(e,t,n){ta(e)||(e.llEvLisnrs={});var r="VIDEO"===e.tagName?"loadeddata":"load";qi(e,r,t),qi(e,"error",n)}(r,(function(i){!function(e,t,n,r){var i=Ti(t);ra(t,n,r),ki(t,n.class_loaded),xi(t,fi),Ai(n.callback_loaded,t,r),i||Ki(n,r)}(0,e,t,n),na(r)}),(function(i){!function(e,t,n,r){var i=Ti(t);ra(t,n,r),ki(t,n.class_error),xi(t,mi),Ai(n.callback_error,t,r),n.restore_on_error&&Wi(t,Ui),i||Ki(n,r)}(0,e,t,n),na(r)}))}},aa=function(e,t,n){!function(e){e.llTempImage=document.createElement("IMG")}(e),ia(e,t,n),function(e){Vi(e)||(e[di]={backgroundImage:e.style.backgroundImage})}(e),function(e,t,n){var r=wi(e,t.data_bg),i=wi(e,t.data_bg_hidpi),a=ri&&i?i:r;a&&(e.style.backgroundImage='url("'.concat(a,'")'),Ei(e).setAttribute(si,a),Fi(e,t,n))}(e,t,n),function(e,t,n){var r=wi(e,t.data_bg_multi),i=wi(e,t.data_bg_multi_hidpi),a=ri&&i?i:r;a&&(e.style.backgroundImage=a,Gi(e,t,n))}(e,t,n),function(e,t,n){var r=wi(e,t.data_bg_set);if(r){var i=r.split("|"),a=i.map((function(e){return"image-set(".concat(e,")")}));e.style.backgroundImage=a.join(),""===e.style.backgroundImage&&(a=i.map((function(e){return"-webkit-image-set(".concat(e,")")})),e.style.backgroundImage=a.join()),Gi(e,t,n)}}(e,t,n)},oa=function(e,t,n){ia(e,t,n),function(e,t,n){var r=Xi[e.tagName];r&&(r(e,t),Fi(e,t,n))}(e,t,n)},sa=function(e,t,n){!function(e){return Ji.indexOf(e.tagName)>-1}(e)?aa(e,t,n):oa(e,t,n)},ua=function(e,t,n){e.setAttribute("loading","lazy"),ia(e,t,n),function(e,t){var n=Xi[e.tagName];n&&n(e,t)}(e,t),xi(e,yi)},ca=function(e){e.removeAttribute(si),e.removeAttribute(ui),e.removeAttribute(ci)},la=function(e){Li(e,(function(e){Wi(e,Ui)})),Wi(e,Ui)},da={IMG:la,IFRAME:function(e){Wi(e,Pi)},VIDEO:function(e){_i(e,(function(e){Wi(e,Pi)})),Wi(e,Ri),e.load()},OBJECT:function(e){Wi(e,Bi)}},pa=function(e){var t=da[e.tagName];t?t(e):function(e){if(Vi(e)){var t=Yi(e);e.style.backgroundImage=t.backgroundImage}}(e)},ha=function(e,t){pa(e),function(e,t){Ni(e)||Ti(e)||(Si(e,t.class_entered),Si(e,t.class_exited),Si(e,t.class_applied),Si(e,t.class_loading),Si(e,t.class_loaded),Si(e,t.class_error))}(e,t),Ii(e),Qi(e)},fa=function(e,t,n,r){n.cancel_on_exit&&function(e){return Mi(e)===hi}(e)&&"IMG"===e.tagName&&(na(e),function(e){Li(e,(function(e){ca(e)})),ca(e)}(e),la(e),Si(e,n.class_loading),Ci(r,-1),Ii(e),Ai(n.callback_cancel,e,t,r))},ga=function(e,t,n,r){var i=function(e){return Di.indexOf(Mi(e))>=0}(e);xi(e,"entered"),ki(e,n.class_entered),Si(e,n.class_exited),function(e,t,n){t.unobserve_entered&&ji(e,n)}(e,n,r),Ai(n.callback_enter,e,t,r),i||sa(e,n,r)},ma=["IMG","IFRAME","VIDEO"],ya=function(e){return e.use_native&&"loading"in HTMLImageElement.prototype},va=function(e,t,n){e.forEach((function(e){return function(e){return e.isIntersecting||e.intersectionRatio>0}(e)?ga(e.target,e,t,n):function(e,t,n,r){Ni(e)||(ki(e,n.class_exited),fa(e,t,n,r),Ai(n.callback_exit,e,t,r))}(e.target,e,t,n)}))},ba=function(e,t){ti&&!ya(e)&&(t._observer=new IntersectionObserver((function(n){va(n,e,t)}),function(e){return{root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}}(e)))},wa=function(e){return Array.prototype.slice.call(e)},Ma=function(e){return e.container.querySelectorAll(e.elements_selector)},xa=function(e){return function(e){return Mi(e)===mi}(e)},Ia=function(e,t){return function(e){return wa(e).filter(Ni)}(e||Ma(t))},Na=function(e,t){var n;(n=Ma(e),wa(n).filter(xa)).forEach((function(t){Si(t,e.class_error),Ii(t)})),t.update()},Ta=function(e,t){var n=ai(e);this._settings=n,this.loadingCount=0,ba(n,this),function(e,t){qr&&(t._onlineHandler=function(){Na(e,t)},window.addEventListener("online",t._onlineHandler))}(n,this),this.update(t)};Ta.prototype={update:function(e){var t,n,r=this._settings,i=Ia(e,r);(zi(this,i.length),!ei&&ti)?ya(r)?function(e,t,n){e.forEach((function(e){-1!==ma.indexOf(e.tagName)&&ua(e,t,n)})),zi(n,0)}(i,r,this):(t=this._observer,n=i,function(e){e.disconnect()}(t),function(e,t){t.forEach((function(t){e.observe(t)}))}(t,n)):this.loadAll(i)},destroy:function(){var e;this._observer&&this._observer.disconnect(),e=this,qr&&window.removeEventListener("online",e._onlineHandler),Ma(this._settings).forEach((function(e){Qi(e)})),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,n=this._settings;Ia(e,n).forEach((function(e){ji(e,t),sa(e,n,t)}))},restoreAll:function(){var e=this._settings;Ma(e).forEach((function(t){ha(t,e)}))}},Ta.load=function(e,t){var n=ai(t);sa(e,n)},Ta.resetStatus=function(e){Ii(e)},qr&&function(e,t){if(t)if(t.length)for(var n,r=0;n=t[r];r+=1)oi(e,n);else oi(e,t)}(Ta,window.lazyLoadOptions);var Da=function(){function e(){P(this,e),this.a=new Map,this.b=new Set}return U(e,[{key:"emit",value:function(e,t){var n=this.a.get(e);if(n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(t)}catch(e){console.error(e)}}}catch(e){i.e(e)}finally{i.f()}}}},{key:"on",value:function(e,t){var n=this,r=this.a.get(e);if(r||(r=new Set,this.a.set(e,r)),r.add(t),1===r.size){var i,a=y(this.b);try{for(a.s();!(i=a.n()).done;){i.value.e(e)}}catch(e){a.e(e)}finally{a.f()}}return function(){n.off(e,t)}}},{key:"once",value:function(e,t){var n=this,r=function(r){return n.off(e,t),t(r)};return this.c=this.c||new WeakMap,this.c.set(t,r),this.on(e,r)}},{key:"off",value:function(e,t){var n,r=this.a.get(e);if(r){var i=r.delete((null==(n=this.c)?void 0:n.get(t))||t);if(r.size<=0){this.a.delete(e);var a,o=y(this.b);try{for(o.s();!(a=o.n()).done;){a.value.d(e)}}catch(e){o.e(e)}finally{o.f()}}return i}return!1}},{key:"clear",value:function(e){var t;e?null==(t=this.a.get(e))||t.clear():this.a.clear()}},{key:"count",value:function(e){var t;if(e)return(null==(t=this.a.get(e))?void 0:t.size)||0;var n,r=0,i=y(this.a.values());try{for(i.s();!(n=i.n()).done;){r+=n.value.size}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"remit",value:function(e,t){var n,r,i=this,a={e:function n(a){if(a===e)try{r=t(i)}catch(n){console.error(n)}},d:function(t){if(r&&(!t||t===e))try{r()}catch(e){console.error(e)}}};return this.b.add(a),(null==(n=this.a.get(e))?void 0:n.size)&&a.e(e),function(){i.b.delete(a),a.d()}}},{key:"destroy",value:function(){this.clear();var e,t=y(this.b);try{for(t.s();!(e=t.n()).done;){e.value.d()}}catch(e){t.e(e)}finally{t.f()}this.b.clear()}}]),e}(),Aa=function(){function e(t){var n=this,r=t.namespace,i=t.pages$,a=t.sideEffect,o=t.readonly$,s=t.events,u=t.wrapClassName,c=t.root,l=t.pagesIndex$;P(this,e),this.showPreview$=new d.Val(!1),this.namespace=r,this.pages$=i,this.sideEffect=a,this.readonly$=o,this.events=s,this.wrapClassName=u,this.sideEffect.addDisposer(this.events.on("togglePreview",(function(){n.showPreview$.setValue(!n.showPreview$.value)}))),this.sideEffect.addDisposer(this.showPreview$.subscribe((function(e){n.sideEffect.add((function(){var t=n.renderPreview(),r=n.renderPreviewMask();if(e){c.appendChild(t),c.appendChild(r),t.scrollTop;var i=t.querySelector("."+n.wrapClassName("preview-page-".concat(l.value)));return i&&t.scrollTo({top:i.offsetTop-16}),t.classList.toggle(n.wrapClassName("preview-active"),!0),n.previewLazyLoad=new Ta({container:n.$preview,elements_selector:"."+n.wrapClassName("preview-page>img")}),function(){var e;return null==(e=n.previewLazyLoad)?void 0:e.destroy()}}return t.classList.toggle(n.wrapClassName("preview-active"),!1),n.sideEffect.setTimeout((function(){t.remove(),r.remove()}),500,"preview-remove"),null}),"preview-lazyload")})))}return U(e,[{key:"destroy",value:function(){var e,t;null==(e=this.$preview)||e.remove(),null==(t=this.$previewMask)||t.remove()}},{key:"renderPreview",value:function(){var e=this;if(this.$preview)return this.$preview;var t=document.createElement("div");return t.className=this.wrapClassName("preview")+" tele-fancy-scrollbar",this.$preview=t,this.sideEffect.addEventListener(t,"wheel",(function(e){return e.stopPropagation()}),{passive:!1}),this.sideEffect.addDisposer(this.pages$.subscribe((function(n){var r;e.sideEffect.add((function(){var r=n.map((function(n,r){var i,a=null!==(i=n.thumbnail)&&void 0!==i?i:n.src.startsWith("ppt")?void 0:n.src;if(a){var o=String(r),s=document.createElement("a");s.className=e.wrapClassName("preview-page")+" "+e.wrapClassName("preview-page-".concat(r)),s.setAttribute("href","#"),s.dataset.pageIndex=o;var u=document.createElement("span");u.className=e.wrapClassName("preview-page-name"),u.textContent=String(r+1),u.dataset.pageIndex=o;var c=document.createElement("img");return c.width=n.width,c.height=n.height,c.dataset.src=a,c.dataset.pageIndex=o,s.appendChild(c),s.appendChild(u),t.appendChild(s),s}}));return function(){return r.forEach((function(e){return null==e?void 0:e.remove()}))}}),"render-preview-pages"),null==(r=e.previewLazyLoad)||r.update()}))),this.sideEffect.addEventListener(t,"click",(function(t){var n;if(!e.readonly$.value){var r=null==(n=t.target.dataset)?void 0:n.pageIndex;r&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.events.emit("jumpPage",Number(r)),e.showPreview$.setValue(!1))}})),t}},{key:"renderPreviewMask",value:function(){var e=this;if(this.$previewMask)return this.$previewMask;var t=document.createElement("div");return t.className=this.wrapClassName("preview-mask"),this.$previewMask=t,this.sideEffect.addEventListener(t,"click",(function(n){e.readonly$.value||n.target===t&&e.showPreview$.setValue(!1)})),t}}]),e}();var ka=function(){function e(t){var n=t.namespace,r=t.pages$,i=t.sideEffect,a=t.readonly$,o=t.events,s=t.playable,u=t.wrapClassName,c=t.pagesIndex$,l=t.root;P(this,e),this.namespace=n,this.pages$=r,this.sideEffect=i,this.readonly$=a,this.events=o,this.wrapClassName=u,this.pagesIndex$=c,this.playable=s,this.$footer=this.render(),l.appendChild(this.$footer)}return U(e,[{key:"destroy",value:function(){this.$footer.remove()}},{key:"render",value:function(){var e=this,t=document.createElement("div");t.className=this.wrapClassName("footer"),this.sideEffect.addDisposer(this.readonly$.subscribe((function(n){return t.classList.toggle(e.wrapClassName("readonly"),n)})));var n=this.renderFooterBtn("btn-sidebar",function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-sidebar")),n.setAttribute("viewBox","0 0 64 64");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z"),n.appendChild(r),n}(this.namespace));this.sideEffect.addEventListener(n,"click",(function(){e.readonly$.value||e.events.emit("togglePreview")})),t.appendChild(n),this.sideEffect.addDisposer(this.pages$.subscribe((function(e){var t=e.some((function(e){return e.thumbnail||!e.src.startsWith("ppt")}));n.style.display=t?"":"none"})));var r=document.createElement("div");r.className=this.wrapClassName("page-jumps");var i=this.renderFooterBtn("btn-page-back",function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-arrow-left")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z"),n.appendChild(r),n}(this.namespace));if(this.sideEffect.addEventListener(i,"click",(function(){e.readonly$.value||e.events.emit("back")})),r.appendChild(i),this.playable){var a=this.renderFooterBtn("btn-page-play",function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-play")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z"),n.appendChild(r),n}(this.namespace),function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-pause")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z"),n.appendChild(r),n}(this.namespace));this.sideEffect.addEventListener(a,"click",(function(){e.readonly$.value||(a.classList.toggle(e.wrapClassName("footer-btn-playing"),!0),e.events.emit("play"),e.sideEffect.setTimeout((function(){return a.classList.toggle(e.wrapClassName("footer-btn-playing"),!1)}),500,"returnPlay"))})),r.appendChild(a)}var o=this.renderFooterBtn("btn-page-next",function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-arrow-right")),n.setAttribute("viewBox","0 0 500 500");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z"),n.appendChild(r),n}(this.namespace));this.sideEffect.addEventListener(o,"click",(function(){e.readonly$.value||e.events.emit("next")})),r.appendChild(o);var s=document.createElement("div");s.className=this.wrapClassName("page-number");var u=document.createElement("input");u.className=this.wrapClassName("page-number-input"),this.sideEffect.addDisposer(this.readonly$.subscribe((function(e){return u.disabled=e}))),this.sideEffect.addDisposer(this.pagesIndex$.subscribe((function(e){return u.value=String(e+1)}))),this.sideEffect.addEventListener(u,"blur",(function(){u.value=String(e.pagesIndex$.value+1)})),this.sideEffect.addEventListener(u,"change",(function(){if(!e.readonly$.value){var t=u.value?Number(u.value)-1:NaN;t>=0?e.events.emit("jumpPage",t):u.value=String(e.pagesIndex$.value+1)}}));var c=document.createElement("span");this.sideEffect.addDisposer(this.pages$.subscribe((function(e){c.textContent=" / "+e.length}))),s.appendChild(u),s.appendChild(c),t.appendChild(r),t.appendChild(s);var l=function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-save")),n.setAttribute("viewBox","0 0 448 512");var r=document.createElementNS(t,"path");return r.setAttribute("fill","currentColor"),r.setAttribute("d","M224 256c-35.2 0-64 28.8-64 64c0 35.2 28.8 64 64 64c35.2 0 64-28.8 64-64C288 284.8 259.2 256 224 256zM433.1 129.1l-83.9-83.9C341.1 37.06 328.8 32 316.1 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V163.9C448 151.2 442.9 138.9 433.1 129.1zM128 80h144V160H128V80zM400 416c0 8.836-7.164 16-16 16H64c-8.836 0-16-7.164-16-16V96c0-8.838 7.164-16 16-16h16v104c0 13.25 10.75 24 24 24h192C309.3 208 320 197.3 320 184V83.88l78.25 78.25C399.4 163.2 400 164.8 400 166.3V416z"),n.appendChild(r),n}(this.namespace),d=function(e){var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","".concat(e,"-footer-icon-spinner")),n.setAttribute("viewBox","0 0 512 512");var r=document.createElementNS(t,"path");r.setAttribute("fill","currentColor"),r.setAttribute("d","M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z");var i=document.createElementNS(t,"animateTransform");i.setAttribute("attributeName","transform"),i.setAttribute("attributeType","xml"),i.setAttribute("type","rotate"),i.setAttribute("from","0 256 256"),i.setAttribute("to","360 256 256"),i.setAttribute("begin","0s"),i.setAttribute("dur","2s"),i.setAttribute("fill","freeze"),i.setAttribute("repeatCount","indefinite"),r.appendChild(i);var a=document.createElementNS(t,"text");return a.setAttribute("x","125"),a.setAttribute("y","345"),a.setAttribute("data-id","progress"),a.style.fontSize="246px",a.textContent="20",n.appendChild(a),n.appendChild(r),n}(this.namespace);d.style.display="none";var p=document.createElement("button");return p.className=this.wrapClassName("footer-btn"),p.appendChild(l),p.appendChild(d),this.sideEffect.addEventListener(p,"click",(function(){e.events.emit("save")})),this.events.on("saveProgress",(function(e){if(e<99){d.style.display="block",l.style.display="none";var t=d.querySelector("[data-id]");t&&(t.textContent=e.toString().padStart(2,"0"))}else d.style.display="none",l.style.display="block"})),t}},{key:"renderFooterBtn",value:function(e,t,n){var r=document.createElement("button");return r.className=this.wrapClassName("footer-btn")+" "+this.wrapClassName(e),r.appendChild(t),n&&r.appendChild(n),r}}]),e}(),Sa=function(){function e(t){var n=this,r=t.readonly$,i=t.pagesIndex$,a=t.previewRoot,o=t.footerRoot,s=t.pages$,u=t.playable;P(this,e),this.wrapClassName=function(e){return"".concat(n.namespace,"-").concat(e)},this.namespace="netless-app-docs-viewer",this.sideEffect=new p.SideEffectManager,this.events=new Da,this.preview=new Aa({pages$:s,readonly$:r,pagesIndex$:i,root:a,sideEffect:this.sideEffect,events:this.events,namespace:this.namespace,wrapClassName:this.wrapClassName}),this.footer=new ka({pages$:s,readonly$:r,playable:u,pagesIndex$:i,root:o,namespace:this.namespace,sideEffect:this.sideEffect,events:this.events,wrapClassName:this.wrapClassName})}return U(e,[{key:"destroy",value:function(){this.preview.destroy(),this.footer.destroy(),this.sideEffect.flushAll(),this.events.destroy()}}]),e}();function Ea(e,t,n){return Math.min(Math.max(e,t),n)}function ja(e){return e.touches?e.touches[0]:e}function Ca(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}function za(e,t){return e.width===t.width&&e.height===t.height}var Oa=function(){function e(t){var n,r,i,a=this;P(this,e),this.velocity=0,this._paused=!0,this._animationFrameID=null,this._loopTimestamp=0,this.looper=function(e){var t;if(!a._paused){var n=Math.floor((e-a._loopTimestamp)/1e3*60)+1;for(a._loopTimestamp=e;n-- >0;)a.stepper();null==(t=a.onStep)||t.call(a,a.current),a._paused?a._animationFrameID=null:a._animationFrameID=window.requestAnimationFrame(a.looper)}},this.current=null!==(n=t.start)&&void 0!==n?n:0,this.target=this.current,this.stiffness=null!==(r=t.stiffness)&&void 0!==r?r:170,this.damping=null!==(i=t.damping)&&void 0!==i?i:26,this.onStep=t.onStep}return U(e,[{key:"stepTo",value:function(e,t){var n;this._paused&&null!=t&&(this.current=t),this._paused=!1,this.target=e,null==(n=this.onStep)||n.call(this,this.current),this._loopTimestamp=Date.now(),this._animationFrameID=window.requestAnimationFrame(this.looper)}},{key:"pause",value:function(){this._paused=!0,null!=this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID)}},{key:"destroy",value:function(){this.pause(),this.onStep=void 0}},{key:"stepper",value:function(){var e=-this.stiffness*(this.current-this.target),t=-this.damping*this.velocity,n=this.velocity+(e+t)/60,r=this.current+n/60;Math.abs(n-0)<.01&&Math.abs(r-this.target)<.01?(this.current=this.target,this.velocity=0,this._paused=!0):(this.current=r,this.velocity=n)}},{key:"paused",get:function(){return this._paused}}]),e}(),La=function(){function e(t,n,r,i,a,o){P(this,e),this.index=t,this.lastVisit=Date.now(),this.sideEffect=new p.SideEffectManager;var s=(0,d.derive)(n,(function(e){return e[t]||{width:0,height:0}})),u=(0,d.combine)([s,r],(function(e){var t=v(e,2),n=t[0];return(t[1].width-n.width)/2})),c=(0,d.combine)([a,o],(function(e){var n=v(e,2),r=n[0],i=n[1];return(r[t]||0)-i})),l=document.createElement("div");l.className="page-renderer-page",l.dataset.index="".concat(t);var h=document.createElement("img");h.className="page-renderer-page-img",l.appendChild(h),this.sideEffect.addDisposer([(0,d.combine)([s,i]).subscribe((function(e){var t=v(e,2),n=t[0],r=t[1];l.style.width="".concat(n.width*r,"px"),l.style.height="".concat(n.height*r,"px")})),s.subscribe((function(e){e.thumbnail&&(l.style.backgroundImage='url("'.concat(e.thumbnail,'")')),h.width=e.width,h.height=e.height,h.src=e.src})),(0,d.combine)([u,c,i]).subscribe((function(e){var t=v(e,3),n=t[0],r=t[1],i=t[2];l.style.transform="translate(".concat(n*i,"px, ").concat(r*i,"px)")}))]),this.$page=l}return U(e,[{key:"destroy",value:function(){this.sideEffect.flushAll(),this.$page.remove()}}]),e}(),_a=function(){function e(t,n,r,i,a){var o=this;P(this,e),this.pages$=t,this.pagesSize$=n,this.scale$=r,this.pagesYs$=i,this.pagesScrollTop$=a,this.els=new Map,this.maxElCount=200,this.gcTimer=null,this.gc=function(){var e;if(o.gcTimer=null,o.els.size>o.maxElCount)for(var t=b(o.els.values()).sort((function(e,t){return t.lastVisit-e.lastVisit})),n=Math.floor(o.maxElCount/4);n<t.length;n++)null==(e=o.els.get(t[n].index))||e.destroy(),o.els.delete(t[n].index)},this.schedule=window.requestIdleCallback||function(e){return window.setTimeout(e,5e3)},this.cancelSchedule=window.cancelIdleCallback||window.clearTimeout}return U(e,[{key:"getEl",value:function(e){var t=this.els.get(e);return t||(t=new La(e,this.pages$,this.pagesSize$,this.scale$,this.pagesYs$,this.pagesScrollTop$),this.els.set(e,t)),t.lastVisit=Date.now(),this.els.size>this.maxElCount&&null===this.gcTimer&&(this.gcTimer=this.schedule(this.gc)),t}},{key:"destroy",value:function(){this.els.forEach((function(e){return e.destroy()})),this.els.clear(),null!==this.gcTimer&&(this.cancelSchedule(this.gcTimer),this.gcTimer=null)}}]),e}(),Pa=function(){function e(t){var n=this,r=t.pagesScrollTop$,i=t.containerRect$,a=t.pages$,o=t.pagesSize$;P(this,e),this.sideEffect=new p.SideEffectManager,a=(0,d.derive)(a,(function(e){return e.map((function(e){if(e.thumbnail)return e;try{var t=new URL(e.src);return t.searchParams.set("x-oss-process","image/resize,l_50"),C(C({},e),{},{thumbnail:t.toString()})}catch(t){return console.error(t),e}}))}));var s=(0,d.derive)(a,(function(e){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=n>0?t[n-1]+e[n-1].height:0;return t})),u=(0,d.derive)(a,(function(e){for(var t=1/0,n=e.length-1;n>=0;n--)e[n].height<=t&&(t=e[n].height);return t})),c=(0,d.combine)([r,s,a],(function(e){var t=v(e,3),n=t[0],r=t[1],i=t[2];if(r.length!==i.length)return c.value;for(var a=0;a<r.length;a++)if(r[a]+i[a].height-n>=.001)return a;return r.length-1})),l=(0,d.combine)([i,o],(function(e){var t=v(e,2),n=t[0],r=t[1];return n.width/r.width||1})),h=(0,d.combine)([a,i,u,l],(function(e){var t=v(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return Ea(Math.ceil(r.height/a/i/2),1,n.length)}));(0,d.withReadonlyValueEnhancer)(this,{pagesScrollTop:r,containerRect:i,pages:a,pagesSize:o,pagesIndex:c,pagesYs:s,pagesMinHeight:u,scale:l}),this.pageElManager=new _a(a,o,l,s,r),this.$pages=this.renderPages();var f=new d.Val(!1);this.sideEffect.addDisposer(f.subscribe((function(e){return n.$pages.classList.toggle("is-hwa",e)})));var g=function(){return f.setValue(!1)};this.sideEffect.addDisposer((0,d.combine)([c,h,a]).subscribe((function(e){var t=v(e,3),r=t[0],i=t[1],a=t[2];n.sideEffect.setTimeout(g,1e3,"turn-off-hwa"),f.setValue(!0);for(var o=Math.max(r-i,0),s=Math.min(r+i,a.length-1),u=0;u<n.$pages.children.length;u++){var c=n.$pages.children[u],l=Number(c.dataset.index);l>=o&&l<=s||(c.remove(),u--)}for(var d=o;d<=s;d++){var p=n.pageElManager.getEl(d);p.$page.parentElement!==n.$pages&&n.$pages.appendChild(p.$page)}})))}return U(e,[{key:"renderPages",value:function(){var e=document.createElement("div");return e.className="page-renderer-pages-container",this.sideEffect.addDisposer(this._containerRect$.subscribe((function(t){e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px")})),"render-pages-size"),e}},{key:"destroy",value:function(){this.sideEffect.flushAll(),this.$pages.remove(),this.pageElManager.destroy()}}]),e}(),Ra=function(){function e(t){var n=t.pagesScrollTop$,r=t.containerRect$,i=t.stageRect$,a=t.pagesSize$,o=t.readonly$,s=t.scrollbarMinHeight,u=void 0===s?30:s,c=t.wrapClassName,l=t.onDragScroll;P(this,e),this.sideEffect=new p.SideEffectManager,this.scrolling$=new d.Val(!1),this.pagesScrollTop$=n,this.containerRect$=r,this.stageRect$=i,this.pagesSize$=a,this.scrollbarMinHeight=u,this.readonly$=o,this.wrapClassName=c,this.onDragScroll=l,this.scrollbarHeight$=(0,d.combine)([r,i,a],(function(e){var t=v(e,3),n=t[0],r=t[1],i=t[2];return Ea(r.height/(r.width/i.width*i.height)*n.height,u,n.height)})),this.scrollTop$=(0,d.combine)([r,i,a,this.scrollbarHeight$,this.pagesScrollTop$],(function(e){var t=v(e,5),n=t[0],r=t[1],i=t[2],a=t[3];return Ea(t[4]/(i.height-i.width/r.width*r.height)*(n.height-a),0,n.height-a)})),this.$scrollbar=this.renderScrollbar()}return U(e,[{key:"mount",value:function(e){e.appendChild(this.$scrollbar)}},{key:"destroy",value:function(){this.$scrollbar.remove(),this.onDragScroll=void 0,this.sideEffect.flushAll()}},{key:"renderScrollbar",value:function(){var e=this,t=document.createElement("button");t.className=this.wrapClassName("scrollbar"),t.style.minHeight="".concat(this.scrollbarMinHeight,"px"),this.sideEffect.addDisposer([this.scrollbarHeight$.subscribe((function(e){t.style.height="".concat(e,"px")})),this.scrollTop$.subscribe((function(n){e.scrolling$.setValue(!0),e.sideEffect.setTimeout((function(){return e.scrolling$.setValue(!1)}),100,"reset-scrolling");var r=function(){return t.style.transform="translateY(".concat(n,"px)")};window.requestAnimationFrame?window.requestAnimationFrame(r):r()})),this.scrolling$.subscribe((function(n){t.classList.toggle(e.wrapClassName("scrolling"),n)}))]);return this.sideEffect.addEventListener(t,"pointerdown",(function(n){if(n.isPrimary&&!e.readonly$.value&&(null==n.button||0===n.button)){Ca(n);var r=e.wrapClassName("scrollbar-dragging");t.classList.toggle(r,!0);var i=e.pagesScrollTop$.value,a=ja(n).clientY,o=function(t){if(t.isPrimary&&!e.readonly$.value){var n=ja(t).clientY-a;Math.abs(n)>0&&e.onDragScroll&&e.onDragScroll(i+n/e.containerRect$.value.height*e.pagesSize$.value.height)}},s=function e(n){!n.isPrimary||(t.classList.toggle(r,!1),window.removeEventListener("pointermove",o,!0),window.removeEventListener("pointerup",e,!0),window.removeEventListener("pointercancel",e,!0))};window.addEventListener("pointermove",o,!0),window.addEventListener("pointerup",s,!0),window.addEventListener("pointercancel",s,!0)}})),t}}]),e}(),Ua=function(){function e(t){var r=this,i=t.whiteboard,a=t.readonly$,o=t.box,s=t.pages,u=t.pagesScrollTop,c=void 0===u?0:u,l=t.onUserScroll;P(this,e),this.sideEffect=new p.SideEffectManager,this.userScrolling=!1,this.toPdf=_(regeneratorRuntime.mark((function e(){var t,i,a,o,s,u,c,l,d,p,h,f,g,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.createElement("canvas"),i=t.getContext("2d")){e.next=3;break}return e.abrupt("return",null);case 3:return a=r.whiteboard.pageState.pages[0],o=r.pages[0],e.next=7,n.e(736).then(n.t.bind(n,88877,19));case 7:s=e.sent,u=s.jsPDF,c=new u({format:[o.width,o.height],orientation:o.width>o.height?"l":"p",compress:!0}),l=y(r.pages.entries()),e.prev=11,p=regeneratorRuntime.mark((function e(){var n,o,s,u,l,p,h,f,g,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(d.value,2),o=n[0],s=n[1],u=s.width,l=s.height,p=s.src,t.width=u,t.height=l,h=u>l?"l":"p",o>0&&c.addPage([u,l],h),e.next=7,r.getBase64FromUrl(p);case 7:return f=e.sent,(g=document.createElement("img")).src=f,e.next=12,new Promise((function(e){return g.onload=e}));case 12:i.drawImage(g,0,0),m=t.toDataURL("image/jpeg",.6),i.clearRect(0,0,u,l),r.whiteboard.view.screenshotToCanvas(i,a,u,l,{centerX:u/2,centerY:l/2+o*l,scale:1}),y=t.toDataURL("image/png"),c.addImage(m,"JPEG",0,0,u,l,"","FAST"),c.addImage(y,"PNG",0,0,u,l,"","FAST"),i.clearRect(0,0,u,l),r.viewer.events.emit("saveProgress",Math.ceil((o+1)/r.pages.length*100));case 17:case"end":return e.stop()}}),e)})),l.s();case 14:if((d=l.n()).done){e.next=18;break}return e.delegateYield(p(),"t0",16);case 16:e.next=14;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(11),l.e(e.t1);case 23:return e.prev=23,l.f(),e.finish(23);case 26:h=c.output("arraybuffer"),f=new Blob([h]),g=URL.createObjectURL(f),(m=document.createElement("a")).setAttribute("href",g),m.setAttribute("download","".concat(r.box.title,".pdf")),m.style.display="none",document.body.appendChild(m),m.click(),document.body.removeChild(m),window.postMessage({type:"@app-slide/_download_pdf_",buf:h});case 28:case"end":return e.stop()}}),e,null,[[11,20,23,26]])}))),this.whiteboard=i,this.readonly$=a,this.box=o,this.pages=s,this.onUserScroll=l;var h=function(){var e;r.userScrolling=!1,null==(e=r.onUserScroll)||e.call(r,r.pagesScrollTop$.value)};this.debounceOnUserScroll=function(){r.userScrolling=!0,r.sideEffect.setTimeout(h,80,"debounceOnUserScroll")};var f=new d.Val(s);this.pagesScrollTop$=new d.Val(c),this.pagesSize$=(0,d.derive)(f,(function(e){for(var t=0,n=0,r=e.length-1;r>=0;r--){var i=e[r];i.width>t&&(t=i.width),n+=i.height}return{width:Math.max(1,t),height:Math.max(1,n)}}),{compare:za}),this.pageRenderer=new Pa({pagesScrollTop$:this.pagesScrollTop$,containerRect$:o._stageRect$,pages$:f,pagesSize$:this.pagesSize$}),this.viewer=new Sa({readonly$:a,pagesIndex$:this.pageRenderer._pagesIndex$,previewRoot:o.$body,footerRoot:o.$footer,pages$:f,playable:!1}),this.sideEffect.addDisposer([this.viewer.events.on("next",(function(){r.userScrollByPercent(.8)})),this.viewer.events.on("back",(function(){r.userScrollByPercent(-.8)}))]),this.scrollbar=new Ra({pagesScrollTop$:this.pagesScrollTop$,containerRect$:o._bodyRect$,stageRect$:o._stageRect$,pagesSize$:this.pagesSize$,readonly$:a,wrapClassName:this.wrapClassName.bind(this),onDragScroll:function(e){r.pageScrollTo(e),r.debounceOnUserScroll()}}),this.pageScrollStepper=new Oa({start:this.pagesScrollTop$.value,onStep:function(e){r.pageScrollTo(e)}}),this.sideEffect.addDisposer(this.viewer.events.on("jumpPage",(function(e){return r.userScrollToPageIndex(e)}))),this.sideEffect.addDisposer(this.viewer.events.on("save",(function(){return r.toPdf()}))),this.render(),this.setupScrollListener(),this.sideEffect.setTimeout((function(){r.userScrolling||r.pageScrollTo(r.pageRenderer.pagesScrollTop)}),100)}var t;return U(e,[{key:"destroy",value:function(){this.sideEffect.flushAll(),this.pageScrollStepper.destroy(),this.onUserScroll=void 0,this.viewer.destroy(),this.pageRenderer.destroy(),this.scrollbar.destroy()}},{key:"syncPageScrollTop",value:function(e){!this.userScrolling&&e>=0&&Math.abs(this.pagesScrollTop$.value-e)>.01&&this.pageScrollStepper.stepTo(e,this.pagesScrollTop$.value)}},{key:"getBase64FromUrl",value:(t=_(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.blob();case 4:return n=e.sent,e.abrupt("return",new Promise((function(e){var t=new FileReader;t.readAsDataURL(n),t.onloadend=function(){var n=t.result;e(n)}})));case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){this.box.$content.style.overflow="hidden",this.box.mountStage(this.pageRenderer.$pages),this.scrollbar.mount(this.box.$body)}},{key:"pageScrollTo",value:function(e){var t=this.whiteboard.view.size.height/2/this.pageRenderer.scale;this.whiteboard.view.moveCamera({centerY:Ea(e+t,t,this.pagesSize$.value.height-t),animationMode:"immediately"})}},{key:"userScrollToPageIndex",value:function(e){var t;if(e=Ea(e,0,this.pages.length-1),!this.readonly$.value&&!Number.isNaN(e)){var n=this.pageRenderer.pagesYs[e];n>=0&&(null==(t=this.onUserScroll)||t.call(this,n+5/this.pageRenderer.scale))}}},{key:"userScrollByPercent",value:function(e){var t;this.readonly$.value||null==(t=this.onUserScroll)||t.call(this,Ea(this.pageRenderer.pagesScrollTop+this.pageRenderer.containerRect.height/this.pageRenderer.scale*Ea(e,-1,1),0,this.pageRenderer.pagesSize.height-this.pageRenderer.containerRect.height/this.pageRenderer.scale))}},{key:"setupScrollListener",value:function(){var e=this;this.sideEffect.addEventListener(this.box.$main,"wheel",(function(t){Ca(t),!e.readonly$.value&&e.pageScrollStepper.paused&&(e.pageScrollTo(e.pagesScrollTop+t.deltaY),e.debounceOnUserScroll())}),{passive:!1}),this.sideEffect.addEventListener(this.box.$main,"touchmove",(function(t){!e.readonly$.value&&t.touches.length>1&&e.debounceOnUserScroll()}),{passive:!0,capture:!0}),this.sideEffect.add((function(){var t=function(t){var n=e.whiteboard.view.size,r=n.width,i=n.height;if(!(r<=0||i<=0)){var a=t.centerY-e.pageRenderer.containerRect.height/e.pageRenderer.scale/2;e.pagesScrollTop$.setValue(Math.max(0,a))}};return e.whiteboard.view.callbacks.on("onCameraUpdated",t),function(){return e.whiteboard.view.callbacks.off("onCameraUpdated",t)}})),this.sideEffect.addDisposer(this.box._stageRect$.subscribe((function(t){var n=e.pagesSize$.value,r=n.width,i=n.height;e.whiteboard.view.moveCameraToContain({originX:0,originY:e.pageRenderer.pagesScrollTop,width:r,height:t.height/e.pageRenderer.scale,animationMode:"immediately"}),e.whiteboard.view.setCameraBound({damping:1,maxContentMode:function(){return e.pageRenderer.scale},minContentMode:function(){return e.pageRenderer.scale},centerX:r/2,centerY:i/2,width:r,height:i})})),"whiteboard-size-update"),this.sideEffect.addEventListener(window,"keyup",(function(t){if(!e.readonly$.value&&e.box.focus&&!e.box.minimized)switch(t.key){case"PageDown":e.userScrollByPercent(.8);break;case"PageUp":e.userScrollByPercent(-.8);break;case"ArrowLeft":e.userScrollByPercent(-.25);break;case"ArrowRight":e.userScrollByPercent(.25);break;case"ArrowDown":e.userScrollByPercent(.5);break;case"ArrowUp":e.userScrollByPercent(-.5)}}),{capture:!0})}},{key:"wrapClassName",value:function(e){return"netless-app-docs-viewer-static-"+e}},{key:"pagesScrollTop",get:function(){return this.pagesScrollTop$.value}}]),e}(),Ba=function(){function e(t){var n=this,r=t.readonly$,i=t.context,a=t.whiteboard,o=t.box,s=t.pages;P(this,e),this.sideEffect=new p.SideEffectManager,this.context=i,this.whiteboard=a,this.box=o,this.pages=s;var u=new d.Val(i.displayer.state.sceneState.index||0);this.pagesIndex$=u,this.sideEffect.add((function(){var e=function(e){n.jumpToPage(e.index)};return n.context.emitter.on("sceneStateChange",e),function(){return n.context.emitter.off("sceneStateChange",e)}})),this.viewer=new Sa({readonly$:r,pagesIndex$:u,previewRoot:o.$body,footerRoot:o.$footer,pages$:new d.Val(s),playable:!0}),this.sideEffect.addDisposer([this.viewer.events.on("jumpPage",(function(e){return n.jumpToPage(e,!0)})),this.viewer.events.on("play",(function(){var e;return null==(e=n.context.room)?void 0:e.pptNextStep()})),this.viewer.events.on("back",(function(){return n.prevPage()})),this.viewer.events.on("next",(function(){return n.nextPage()}))]),this.render(),this.sideEffect.addDisposer(u.subscribe((function(e,t){var i,a;if(!r.value){var o=n.context.getInitScenePath(),s=null==(a=null==(i=n.context.getScenes())?void 0:i[e])?void 0:a.name;if(o&&s&&n.context.setScenePath("".concat(o,"/").concat(s)),t){var u=n.context.room;if(u){var c=u.state.globalState.__pptState;u.setGlobalState({__pptState:c&&{uuid:c.uuid,pageIndex:e,disableAutoPlay:c.disableAutoPlay}})}}}})))}return U(e,[{key:"destroy",value:function(){this.sideEffect.flushAll(),this.viewer.destroy()}},{key:"nextPage",value:function(){this.jumpToPage(this.pagesIndex$.value+1,!0)}},{key:"prevPage",value:function(){this.jumpToPage(this.pagesIndex$.value-1,!0)}},{key:"jumpToPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.pagesIndex$.setValue(Ea(e,0,this.pages.length-1),t)}},{key:"render",value:function(){var e,t=this;this.box.mountStage(document.createElement("div")),this.sideEffect.addEventListener(window,"keydown",(function(e){var n;if(t.box.focus)switch(e.key){case"ArrowUp":case"ArrowLeft":t.prevPage();break;case"ArrowRight":case"ArrowDown":null==(n=t.context.room)||n.pptNextStep()}}));var n=null==(e=this.whiteboard.view.divElement)?void 0:e.parentElement;n&&this.sideEffect.addEventListener(n,"click",(function(e){var n,r=t.context.room;if(r&&"clicker"===r.state.memberState.currentApplianceName){for(var i=e.target;i;i=i.parentElement)if(null!=(n=i.classList)&&n.contains("ppt-event-source"))return;r.pptNextStep()}}))}},{key:"wrapClassName",value:function(e){return"netless-app-docs-viewer-dynamic-"+e}}]),e}(),Va={kind:"DocsViewer",setup:function(e){var t=e.box,n=e.getScenes();if(!n)throw new Error("[Docs Viewer]: scenes not found.");var r=new p.SideEffectManager,i=n.map((function(e){var t=e.ppt;return t?{width:t.width,height:t.height,src:t.src,thumbnail:t.previewURL}:null})).filter((function(e){return Boolean(e)}));if(i.length<=0)throw new Error("[Docs Viewer]: empty scenes.");t.mountStyles('.netless-app-docs-viewer-footer{box-sizing:border-box;height:26px;display:flex;align-items:center;padding:0 16px;border-top:1px solid #eeeef7;font-family:PingFang SC,Source Han Sans SC,Microsoft YaHei,Helvetica Neue,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.netless-app-docs-viewer-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:1px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-footer-btn:hover{background:rgba(237,237,240,.9)}@media (hover: none){.netless-app-docs-viewer-footer-btn:hover{background:transparent!important}}.netless-app-docs-viewer-footer-btn>svg{width:100%;height:100%}.netless-app-docs-viewer-footer-btn>svg:nth-of-type(2){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-docs-viewer-footer-btn~.netless-app-docs-viewer-footer-btn{margin-left:15px}.netless-app-docs-viewer-page-jumps{flex:1;display:flex;justify-content:center;align-items:center}.netless-app-docs-viewer-page-number{display:flex;align-items:center;height:26px;margin-left:auto;font-size:13px;white-space:nowrap;word-break:keep-all;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-docs-viewer-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 .5em 0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;font-family:PingFang SC,Source Han Sans SC,Microsoft YaHei,Helvetica Neue,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif;background:transparent;transition:background .4s;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-page-number-input:active{user-select:text;background:#fff;box-shadow:#63636333 0 2px 8px}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn:hover{background:transparent}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:active{background:transparent;box-shadow:none}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:disabled{color:inherit}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:active,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:focus,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:hover{color:currentColor;background:#25282e}.telebox-color-scheme-dark .netless-app-docs-viewer-footer{border-top:none}.telebox-color-scheme-dark .netless-app-docs-viewer-footer-btn:hover{background:#212126}.netless-app-docs-viewer-preview-mask{position:absolute;z-index:10200;top:0;left:0;width:100%;height:100%}.netless-app-docs-viewer-preview{box-sizing:border-box;display:flex;flex-direction:column;align-items:center;position:absolute;z-index:10300;top:0;left:0;width:33%;max-width:200px;height:100%;padding-top:10px;transform:translate(-100%);background:rgba(237,237,240,.9);box-shadow:inset -1px 0 #0000001c;transition:transform .4s;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-docs-viewer-preview.netless-app-docs-viewer-preview-active{transform:translate(0)}.netless-app-docs-viewer-preview-page{position:relative;display:block;width:55%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border:7px solid transparent;border-radius:4px;transition:border-color .3s;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.netless-app-docs-viewer-preview-page:hover,.netless-app-docs-viewer-preview-page.netless-app-docs-viewer-preview-page-active{border-color:#444e601a}.netless-app-docs-viewer-preview-page>img{width:100%;height:auto;box-sizing:border-box;border:1px solid rgba(0,0,0,.5);border-radius:1px;background-color:#fff;box-shadow:0 2px 8px #0000004d}.netless-app-docs-viewer-preview-page-name{position:absolute;top:1px;left:-10px;transform:translate(-100%);text-align:right;font-size:12px;color:#5f5f5f;user-select:none}.telebox-color-scheme-dark .netless-app-docs-viewer-preview{background:rgba(50,50,50,.9)}.netless-app-docs-viewer-content{position:relative;height:100%;overflow:hidden}.netless-app-docs-viewer-static-scrollbar{box-sizing:border-box;position:absolute;top:0;right:0;z-index:2147483647;width:16px;min-height:30px;margin:0;padding:0 0 0 8px;border:none;outline:none;opacity:0;background:transparent;transition:opacity .4s 3s,transform .1s;user-select:none;touch-action:none}.netless-app-docs-viewer-static-scrollbar:after{content:"";display:block;width:8px;height:100%;border-radius:4px;background:rgba(68,78,96,.4);box-shadow:1px 1px 8px #ffffffb3;transition:background .4s}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrolling{opacity:1;transition:opacity .4s,transform .1s}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging{opacity:1;transition:opacity .4s 3s!important}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging:after{background:rgba(68,78,96,.6)}.netless-app-docs-viewer-static-scrollbar:hover:after,.netless-app-docs-viewer-static-scrollbar:focus:after{background:rgba(68,78,96,.5)}.netless-app-docs-viewer-static-scrollbar:active:after{background:rgba(68,78,96,.6)}.telebox-body-wrap:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:opacity .4s,transform .1s}.telebox-readonly .netless-app-docs-viewer-static-scrollbar{display:none}.page-renderer-pages-container{position:relative;width:100%;height:100%}.page-renderer-page{position:absolute;top:0;left:0;background-position:center;background-size:cover;background-repeat:no-repeat}.page-renderer-pages-container.is-hwa .page-renderer-page{will-change:transform}.page-renderer-page-img{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-pages{overflow:hidden;position:relative;height:100%;user-select:none}.netless-app-docs-viewer-static-page{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-dynamic-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:hidden}.netless-app-docs-viewer-dynamic-wb-view .cursor-clicker .ppt-event-source{cursor:pointer}\n');var a=new d.Val(!e.isWritable);r.addDisposer(e.emitter.on("writableChange",(function(e){a.setValue(!e)}))),i[0].src.startsWith("ppt")?function(e,t,n,r,i){var a=t.createWhiteBoardView();a.view.disableCameraTransform=!0;var o=new Ba({context:t,whiteboard:a,box:n,pages:r,readonly$:i});e.addDisposer((function(){return o.destroy()}));var s=new d.Val({width:r[0].width,height:r[0].height},{compare:za});if(e.addDisposer(o.pagesIndex$.subscribe((function(e){var t=r[e];t&&s.setValue({width:t.width,height:t.height})}))),e.addDisposer(s.subscribe((function(e){i.value||a.setBaseRect(e)}))),t.isAddApp)var u=e.add((function(){var i=function(i){var a=i.width,o=i.height;if(r.length>0&&"maximized"!==n.state){var s=r[0],c=s.width,l=s.height/c*a-o;0!==l&&t.isWritable&&t.emitter.emit("setBoxSize",{width:n.intrinsicWidth,height:n.intrinsicHeight+l/n.rootRect.height})}e.remove(u)};return a.view.callbacks.once("onSizeUpdated",i),function(){return a.view.callbacks.off("onSizeUpdated",i)}}))}(r,e,t,i,a):function(e,t,n,r,i){var a=t.createWhiteBoardView({syncCamera:!1});e.addDisposer(i.subscribe((function(e){a.view.disableCameraTransform=e})));var o=t.createStorage("static-docs-viewer",{pagesScrollTop:0}),s=new Ua({whiteboard:a,readonly$:i,box:n,pages:r,pagesScrollTop:o.state.pagesScrollTop,onUserScroll:function(e){t.isWritable&&o.setState({pagesScrollTop:e})}});e.addDisposer((function(){return s.destroy()})),e.addDisposer(o.on("stateChanged",(function(e){e.pagesScrollTop&&s.syncPageScrollTop(e.pagesScrollTop.newValue||0)}))),e.addDisposer((0,d.combine)([n._maximized$,n._managerStageRect$,n._intrinsicSize$,s.pagesSize$,s.pageRenderer._pagesMinHeight$],(function(e){var t=v(e,5),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4];return n?Math.max(o/a.width*.4,r.height/r.width):i.height/i.width*(r.height/r.width)})).subscribe((function(e){n.setStageRatio(e)})))}(r,e,t,i,a),r.addDisposer(e.emitter.on("destroy",(function(){r.flushAll()})))}};var Ya,Qa,Za=Object.defineProperty,Wa=function(e,t,n){return function(e,t,n){t in e?Za(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=O(t)?t+"":t,n),n};function Ga(){}function Fa(e){return e()}function Ha(){return Object.create(null)}function $a(e){e.forEach(Fa)}function Xa(e){return"function"==typeof e}function Ja(e,t){return e!=e?t==t:e!==t||e&&"object"==O(e)||"function"==typeof e}function Ka(e,t){return Ya||(Ya=document.createElement("a")),Ya.href=t,e===Ya.href}function qa(e,t){e.appendChild(t)}function eo(e,t,n){e.insertBefore(t,n||null)}function to(e){e.parentNode.removeChild(e)}function no(e){return document.createElement(e)}function ro(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function io(e){return document.createTextNode(e)}function ao(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function oo(e){return Array.from(e.childNodes)}function so(e){Qa=e}function uo(){if(!Qa)throw new Error("Function called outside component initialization");return Qa}var co=[],lo=[],po=[],ho=[],fo=Promise.resolve(),go=!1;function mo(e){po.push(e)}var yo=new Set,vo=0;function bo(){var e=Qa;do{for(;vo<co.length;){var t=co[vo];vo++,so(t),wo(t.$$)}for(so(null),co.length=0,vo=0;lo.length;)lo.pop()();for(var n=0;n<po.length;n+=1){var r=po[n];yo.has(r)||(yo.add(r),r())}po.length=0}while(co.length);for(;ho.length;)ho.pop()();go=!1,yo.clear(),so(e)}function wo(e){if(null!==e.fragment){e.update(),$a(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(mo)}}var Mo=new Set;function xo(e,t){e&&e.i&&(Mo.delete(e),e.i(t))}function Io(e,t,n,r){var i=e.$$,a=i.fragment,o=i.on_mount,s=i.on_destroy,u=i.after_update;a&&a.m(t,n),r||mo((function(){var t=o.map(Fa).filter(Xa);s?s.push.apply(s,b(t)):$a(t),e.$$.on_mount=[]})),u.forEach(mo)}function No(e,t){var n=e.$$;null!==n.fragment&&($a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function To(e,t){-1===e.$$.dirty[0]&&(co.push(e),go||(go=!0,fo.then(bo)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Do(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],u=Qa;so(e);var c=e.$$={fragment:null,ctx:null,props:a,update:Ga,not_equal:i,bound:Ha(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Ha(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);var l=!1;if(c.ctx=n?n(e,t.props||{},(function(t,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&i(c.ctx[t],c.ctx[t]=r)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](r),l&&To(e,t)),n})):[],c.update(),l=!0,$a(c.before_update),c.fragment=!!r&&r(c.ctx),t.target){if(t.hydrate){var d=oo(t.target);c.fragment&&c.fragment.l(d),d.forEach(to)}else c.fragment&&c.fragment.c();t.intro&&xo(e.$$.fragment),Io(e,t.target,t.anchor,t.customElement),bo()}so(u)}var Ao=function(){function e(){P(this,e)}return U(e,[{key:"$destroy",value:function(){No(this,1),this.$destroy=Ga}},{key:"$on",value:function(e,t){var n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},{key:"$set",value:function(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}]),e}(),ko={"3g2":"video/3gpp2","3gp":"video/3gpp","3gpp":"audio/3gpp",aac:"audio/x-aac",adp:"audio/adpcm",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",amr:"audio/amr",asf:"video/x-ms-asf",asx:"video/x-ms-asf",au:"audio/basic",avi:"video/x-msvideo",caf:"audio/x-caf",dra:"audio/vnd.dra",dts:"audio/vnd.dts",dtshd:"audio/vnd.dts.hd",dvb:"video/vnd.dvb.file",eol:"audio/vnd.digital-winds",f4v:"video/x-f4v",flac:"audio/x-flac",fli:"video/x-fli",flv:"video/x-flv",fvt:"video/vnd.fvt",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgm:"video/jpm",jpgv:"video/jpeg",kar:"audio/midi",lvp:"audio/vnd.lucent.voice",m1v:"video/mpeg",m2a:"audio/mpeg",m2v:"video/mpeg",m3a:"audio/mpeg",m3u:"audio/x-mpegurl",m4a:"audio/mp4",m4s:"video/iso.segment",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mid:"audio/midi",midi:"audio/midi",mj2:"video/mj2",mjp2:"video/mj2",mk3d:"video/x-matroska",mka:"audio/x-matroska",mks:"video/x-matroska",mkv:"video/x-matroska",mng:"video/x-mng",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp2a:"audio/mpeg",mp3:"audio/mp3",mp4:"video/mp4",mp4a:"audio/mp4",mp4v:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpg4:"video/mp4",mpga:"audio/mpeg",mxmf:"audio/mobile-xmf",mxu:"video/vnd.mpegurl",oga:"audio/ogg",ogg:"audio/ogg",ogv:"video/ogg",opus:"audio/ogg",pya:"audio/vnd.ms-playready.media.pya",pyv:"video/vnd.ms-playready.media.pyv",qt:"video/quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",rip:"audio/vnd.rip",rmi:"audio/midi",rmp:"audio/x-pn-realaudio-plugin",s3m:"audio/s3m",sil:"audio/silk",smv:"video/x-smv",snd:"audio/basic",spx:"audio/ogg",ts:"video/mp2t",uva:"audio/vnd.dece.audio",uvh:"video/vnd.dece.hd",uvm:"video/vnd.dece.mobile",uvp:"video/vnd.dece.pd",uvs:"video/vnd.dece.sd",uvu:"video/vnd.uvvu.mp4",uvv:"video/vnd.dece.video",uvva:"audio/vnd.dece.audio",uvvh:"video/vnd.dece.hd",uvvm:"video/vnd.dece.mobile",uvvp:"video/vnd.dece.pd",uvvs:"video/vnd.dece.sd",uvvu:"video/vnd.uvvu.mp4",uvvv:"video/vnd.dece.video",viv:"video/vnd.vivo",vob:"video/x-ms-vob",wav:"audio/wav",wax:"audio/x-ms-wax",weba:"audio/webm",webm:"video/webm",wm:"video/x-ms-wm",wma:"audio/x-ms-wma",wmv:"video/x-ms-wmv",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",xm:"audio/xm",m3u8:"application/vnd.apple.mpegurl"},So=["application/x-mpegurl","application/vnd.apple.mpegurl"];function Eo(){return(Eo=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.play();case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),t.muted=!0,e.next=11,t.play();case 11:return console.debug(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function jo(e){var t=document.createElement("script");return new Promise((function(n,r){t.onload=function(){return n()},t.onerror=r,t.src=e,document.head.appendChild(t)}))}function Co(){return zo.apply(this,arguments)}function zo(){return(zo=_(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={loadSource:function(e){},attachMedia:function(e){}},null!==(n=window.Hls)&&!1!==n){e.next=4;break}return e.abrupt("return",t);case 4:if(e.t0=void 0===n,!e.t0){e.next=9;break}return e.next=8,jo("https://cdn.jsdelivr.net/npm/hls.js");case 8:n=window.Hls;case 9:if("function"!=typeof n){e.next=19;break}return e.prev=10,e.abrupt("return",new n);case 14:return e.prev=14,e.t1=e.catch(10),e.abrupt("return",(console.debug(e.t1),t));case 17:e.next=20;break;case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,null,[[10,14]])})))).apply(this,arguments)}function Oo(e){return"canPlayType"in e&&!e.canPlayType("application/vnd.apple.mpegurl")}function Lo(e){var t,n,r,i,a,o,s,u,c,l,d,p,h,f,g,m,y,v,b,w,M,x,I,N,T,D,A,k,S,E,j,C,z,O,L,_,P,R;return{c:function(){t=ro("svg"),n=ro("symbol"),r=ro("path"),i=ro("path"),a=ro("symbol"),o=ro("path"),s=ro("symbol"),u=ro("path"),c=ro("symbol"),l=ro("path"),d=ro("symbol"),p=ro("path"),h=ro("symbol"),f=ro("path"),g=ro("symbol"),m=ro("path"),y=ro("symbol"),v=ro("path"),b=ro("symbol"),w=ro("path"),M=ro("symbol"),x=ro("path"),I=ro("symbol"),N=ro("path"),T=ro("symbol"),D=ro("path"),A=ro("path"),k=ro("symbol"),S=ro("path"),E=ro("symbol"),j=ro("path"),C=ro("symbol"),z=ro("path"),O=ro("symbol"),L=ro("path"),_=ro("symbol"),P=ro("path"),R=ro("path"),ao(r,"d","M16 1H2a1 1 0 00-1 1v10a1 1 0 001 1h3v-2H3V3h12v8h-2v2h3a1 1 0 001-1V2a1 1 0 00-1-1z"),ao(i,"d","M4 17h10l-5-6z"),ao(n,"id","plyr-airplay"),ao(n,"viewBox","0 0 18 18"),ao(o,"d","M1 1c-.6 0-1 .4-1 1v11c0 .6.4 1 1 1h4.6l2.7 2.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3l2.7-2.7H17c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1H1zm4.52 10.15c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41C8.47 4.96 7.46 3.76 5.5 3.76c-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69zm7.57 0c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41c-.28-1.15-1.29-2.35-3.25-2.35-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69z"),ao(o,"fill-rule","evenodd"),ao(o,"fill-opacity",".5"),ao(a,"id","plyr-captions-off"),ao(a,"viewBox","0 0 18 18"),ao(u,"d","M1 1c-.6 0-1 .4-1 1v11c0 .6.4 1 1 1h4.6l2.7 2.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3l2.7-2.7H17c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1H1zm4.52 10.15c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41C8.47 4.96 7.46 3.76 5.5 3.76c-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69zm7.57 0c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41c-.28-1.15-1.29-2.35-3.25-2.35-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69z"),ao(u,"fill-rule","evenodd"),ao(s,"id","plyr-captions-on"),ao(s,"viewBox","0 0 18 18"),ao(l,"d","M9 13c.3 0 .5-.1.7-.3L15.4 7 14 5.6l-4 4V1H8v8.6l-4-4L2.6 7l5.7 5.7c.2.2.4.3.7.3zm-7 2h14v2H2z"),ao(c,"id","plyr-download"),ao(c,"viewBox","0 0 18 18"),ao(p,"d","M10 3h3.6l-4 4L11 8.4l4-4V8h2V1h-7zM7 9.6l-4 4V10H1v7h7v-2H4.4l4-4z"),ao(d,"id","plyr-enter-fullscreen"),ao(d,"viewBox","0 0 18 18"),ao(f,"d","M1 12h3.6l-4 4L2 17.4l4-4V17h2v-7H1zM16 .6l-4 4V1h-2v7h7V6h-3.6l4-4z"),ao(h,"id","plyr-exit-fullscreen"),ao(h,"viewBox","0 0 18 18"),ao(m,"d","M7.875 7.171L0 1v16l7.875-6.171V17L18 9 7.875 1z"),ao(g,"id","plyr-fast-forward"),ao(g,"viewBox","0 0 18 18"),ao(v,"d","M17 5.3c-.1 1.6-1.2 3.7-3.3 6.4-2.2 2.8-4 4.2-5.5 4.2-.9 0-1.7-.9-2.4-2.6C5 10.9 4.4 6 3 6c-.1 0-.5.3-1.2.8l-.8-1c.8-.7 3.5-3.4 4.7-3.5 1.2-.1 2 .7 2.3 2.5.3 2 .8 6.1 1.8 6.1.9 0 2.5-3.4 2.6-4 .1-.9-.3-1.9-2.3-1.1.8-2.6 2.3-3.8 4.5-3.8 1.7.1 2.5 1.2 2.4 3.3z"),ao(y,"id","plyr-logo-vimeo"),ao(y,"viewBox","0 0 18 18"),ao(w,"d","M16.8 5.8c-.2-1.3-.8-2.2-2.2-2.4C12.4 3 9 3 9 3s-3.4 0-5.6.4C2 3.6 1.3 4.5 1.2 5.8 1 7.1 1 9 1 9s0 1.9.2 3.2c.2 1.3.8 2.2 2.2 2.4C5.6 15 9 15 9 15s3.4 0 5.6-.4c1.4-.3 2-1.1 2.2-2.4.2-1.3.2-3.2.2-3.2s0-1.9-.2-3.2zM7 12V6l5 3-5 3z"),ao(b,"id","plyr-logo-youtube"),ao(b,"viewBox","0 0 18 18"),ao(x,"d","M12.4 12.5l2.1-2.1 2.1 2.1 1.4-1.4L15.9 9 18 6.9l-1.4-1.4-2.1 2.1-2.1-2.1L11 6.9 13.1 9 11 11.1zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"),ao(M,"id","plyr-muted"),ao(M,"viewBox","0 0 18 18"),ao(N,"d","M6 1H3c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1zm6 0c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1h-3z"),ao(I,"id","plyr-pause"),ao(I,"viewBox","0 0 18 18"),ao(D,"d","M13.293 3.293L7.022 9.564l1.414 1.414 6.271-6.271L17 7V1h-6z"),ao(A,"d","M13 15H3V5h5V3H2a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-6h-2v5z"),ao(T,"id","plyr-pip"),ao(T,"viewBox","0 0 18 18"),ao(S,"d","M15.562 8.1L3.87.225c-.818-.562-1.87 0-1.87.9v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"),ao(k,"id","plyr-play"),ao(k,"viewBox","0 0 18 18"),ao(j,"d","M9.7 1.2l.7 6.4 2.1-2.1c1.9 1.9 1.9 5.1 0 7-.9 1-2.2 1.5-3.5 1.5-1.3 0-2.6-.5-3.5-1.5-1.9-1.9-1.9-5.1 0-7 .6-.6 1.4-1.1 2.3-1.3l-.6-1.9C6 2.6 4.9 3.2 4 4.1 1.3 6.8 1.3 11.2 4 14c1.3 1.3 3.1 2 4.9 2 1.9 0 3.6-.7 4.9-2 2.7-2.7 2.7-7.1 0-9.9L16 1.9l-6.3-.7z"),ao(E,"id","plyr-restart"),ao(E,"viewBox","0 0 18 18"),ao(z,"d","M10.125 1L0 9l10.125 8v-6.171L18 17V1l-7.875 6.171z"),ao(C,"id","plyr-rewind"),ao(C,"viewBox","0 0 18 18"),ao(L,"d","M16.135 7.784a2 2 0 01-1.23-2.969c.322-.536.225-.998-.094-1.316l-.31-.31c-.318-.318-.78-.415-1.316-.094a2 2 0 01-2.969-1.23C10.065 1.258 9.669 1 9.219 1h-.438c-.45 0-.845.258-.997.865a2 2 0 01-2.969 1.23c-.536-.322-.999-.225-1.317.093l-.31.31c-.318.318-.415.781-.093 1.317a2 2 0 01-1.23 2.969C1.26 7.935 1 8.33 1 8.781v.438c0 .45.258.845.865.997a2 2 0 011.23 2.969c-.322.536-.225.998.094 1.316l.31.31c.319.319.782.415 1.316.094a2 2 0 012.969 1.23c.151.607.547.865.997.865h.438c.45 0 .845-.258.997-.865a2 2 0 012.969-1.23c.535.321.997.225 1.316-.094l.31-.31c.318-.318.415-.781.094-1.316a2 2 0 011.23-2.969c.607-.151.865-.547.865-.997v-.438c0-.451-.26-.846-.865-.997zM9 12a3 3 0 110-6 3 3 0 010 6z"),ao(O,"id","plyr-settings"),ao(O,"viewBox","0 0 18 18"),ao(P,"d","M15.6 3.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4C15.4 5.9 16 7.4 16 9c0 1.6-.6 3.1-1.8 4.3-.4.4-.4 1 0 1.4.2.2.5.3.7.3.3 0 .5-.1.7-.3C17.1 13.2 18 11.2 18 9s-.9-4.2-2.4-5.7z"),ao(R,"d","M11.282 5.282a.909.909 0 000 1.316c.735.735.995 1.458.995 2.402 0 .936-.425 1.917-.995 2.487a.909.909 0 000 1.316c.145.145.636.262 1.018.156a.725.725 0 00.298-.156C13.773 11.733 14.13 10.16 14.13 9c0-.17-.002-.34-.011-.51-.053-.992-.319-2.005-1.522-3.208a.909.909 0 00-1.316 0zm-7.496.726H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"),ao(_,"id","plyr-volume"),ao(_,"viewBox","0 0 18 18"),ao(t,"xmlns","http://www.w3.org/2000/svg"),ao(t,"xmlns:xlink","http://www.w3.org/1999/xlink")},m:function(e,U){eo(e,t,U),qa(t,n),qa(n,r),qa(n,i),qa(t,a),qa(a,o),qa(t,s),qa(s,u),qa(t,c),qa(c,l),qa(t,d),qa(d,p),qa(t,h),qa(h,f),qa(t,g),qa(g,m),qa(t,y),qa(y,v),qa(t,b),qa(b,w),qa(t,M),qa(M,x),qa(t,I),qa(I,N),qa(t,T),qa(T,D),qa(T,A),qa(t,k),qa(k,S),qa(t,E),qa(E,j),qa(t,C),qa(C,z),qa(t,O),qa(O,L),qa(t,_),qa(_,P),qa(_,R)},p:Ga,i:Ga,o:Ga,d:function(e){e&&to(t)}}}var _o=function(e){x(n,e);var t=I(n);function n(e){var r;return P(this,n),Do(T(r=t.call(this)),e,null,Lo,Ja,{}),r}return n}(Ao);function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(n),!0).forEach((function(t){Uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yo={addCSS:!0,thumbWidth:15,watch:!0};function Qo(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var Zo=function(e){return null!=e?e.constructor:null},Wo=function(e,t){return!!(e&&t&&e instanceof t)},Go=function(e){return null==e},Fo=function(e){return Zo(e)===Object},Ho=function(e){return Zo(e)===String},$o=function(e){return Array.isArray(e)},Xo=function(e){return Wo(e,NodeList)},Jo=Ho,Ko=$o,qo=Xo,es=function(e){return Wo(e,Element)},ts=function(e){return Wo(e,Event)},ns=function(e){return Go(e)||(Ho(e)||$o(e)||Xo(e))&&!e.length||Fo(e)&&!Object.keys(e).length};function rs(e,t){if(1>t){var n=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var is,as,os,ss=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),es(t)?this.element=t:Jo(t)&&(this.element=document.querySelector(t)),es(this.element)&&ns(this.element.rangeTouch)&&(this.config=Vo({},Yo,{},n),this.init())}return function(e,t,n){t&&Ro(e.prototype,t),n&&Ro(e,n)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[n](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!ts(t))return null;var n,r=t.target,i=t.changedTouches[0],a=parseFloat(r.getAttribute("min"))||0,o=parseFloat(r.getAttribute("max"))||100,s=parseFloat(r.getAttribute("step"))||1,u=r.getBoundingClientRect(),c=100/u.width*(this.config.thumbWidth/2)/100;return 0>(n=100/u.width*(i.clientX-u.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*c:50<n&&(n+=2*(n-50)*c),a+rs(n/100*(o-a),s)}},{key:"set",value:function(t){e.enabled&&ts(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=null;if(ns(t)||Jo(t)?r=Array.from(document.querySelectorAll(Jo(t)?t:'input[type="range"]')):es(t)?r=[t]:qo(t)?r=Array.from(t):Ko(t)&&(r=t.filter(es)),ns(r))return null;var i=Vo({},Yo,{},n);if(Jo(t)&&i.watch){var a=new MutationObserver((function(n){Array.from(n).forEach((function(n){Array.from(n.addedNodes).forEach((function(n){es(n)&&Qo(n,t)&&new e(n,i)}))}))}));a.observe(document.body,{childList:!0,subtree:!0})}return r.map((function(t){return new e(t,n)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}(),us=function(e){return null!=e?e.constructor:null},cs=function(e,t){return Boolean(e&&t&&e instanceof t)},ls=function(e){return null==e},ds=function(e){return us(e)===Object},ps=function(e){return us(e)===String},hs=function(e){return us(e)===Function},fs=function(e){return Array.isArray(e)},gs=function(e){return cs(e,NodeList)},ms=function(e){return ls(e)||(ps(e)||fs(e)||gs(e))&&!e.length||ds(e)&&!Object.keys(e).length},ys=ls,vs=ds,bs=function(e){return us(e)===Number&&!Number.isNaN(e)},ws=ps,Ms=function(e){return us(e)===Boolean},xs=hs,Is=fs,Ns=gs,Ts=function(e){return null!==e&&"object"==O(e)&&1===e.nodeType&&"object"==O(e.style)&&"object"==O(e.ownerDocument)},Ds=function(e){return cs(e,Event)},As=function(e){return cs(e,KeyboardEvent)},ks=function(e){return cs(e,TextTrack)||!ls(e)&&ps(e.kind)},Ss=function(e){return cs(e,Promise)&&hs(e.then)},Es=function(e){if(cs(e,window.URL))return!0;if(!ps(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!ms(new URL(t).hostname)}catch(e){return!1}},js=ms,Cs=(is=document.createElement("span"),as={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},os=Object.keys(as).find((function(e){return void 0!==is.style[e]})),!!ws(os)&&as[os]);function zs(e,t){setTimeout((function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var Os={isIE:Boolean(window.document.documentMode),isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function Ls(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function _s(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var i=n.shift();return vs(i)?(Object.keys(i).forEach((function(t){vs(i[t])?(Object.keys(e).includes(t)||Object.assign(e,z({},t,{})),_s(e[t],i[t])):Object.assign(e,z({},t,i[t]))})),_s.apply(void 0,[e].concat(n))):e}function Ps(e,t){var n=e.length?e:[e];Array.from(n).reverse().forEach((function(e,n){var r=n>0?t.cloneNode(!0):t,i=e.parentNode,a=e.nextSibling;r.appendChild(e),a?i.insertBefore(r,a):i.appendChild(r)}))}function Rs(e,t){Ts(e)&&!js(t)&&Object.entries(t).filter((function(e){var t=v(e,2)[1];return!ys(t)})).forEach((function(t){var n=v(t,2),r=n[0],i=n[1];return e.setAttribute(r,i)}))}function Us(e,t,n){var r=document.createElement(e);return vs(t)&&Rs(r,t),ws(n)&&(r.innerText=n),r}function Bs(e,t,n,r){Ts(t)&&t.appendChild(Us(e,n,r))}function Vs(e){Ns(e)||Is(e)?Array.from(e).forEach(Vs):Ts(e)&&Ts(e.parentNode)&&e.parentNode.removeChild(e)}function Ys(e){if(Ts(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}function Qs(e,t){return Ts(t)&&Ts(t.parentNode)&&Ts(e)?(t.parentNode.replaceChild(e,t),e):null}function Zs(e,t){if(!ws(e)||js(e))return{};var n={},r=_s({},t);return e.split(",").forEach((function(e){var t=e.trim(),i=t.replace(".",""),a=t.replace(/[[\]]/g,"").split("="),o=v(a,1)[0],s=a.length>1?a[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":ws(r.class)?n.class="".concat(r.class," ").concat(i):n.class=i;break;case"#":n.id=t.replace("#","");break;case"[":n[o]=s}})),_s(r,n)}function Ws(e,t){if(Ts(e)){var n=t;Ms(n)||(n=!e.hidden),e.hidden=n}}function Gs(e,t,n){if(Ns(e))return Array.from(e).map((function(e){return Gs(e,t,n)}));if(Ts(e)){var r="toggle";return void 0!==n&&(r=n?"add":"remove"),e.classList[r](t),e.classList.contains(t)}return!1}function Fs(e,t){return Ts(e)&&e.classList.contains(t)}function Hs(e,t){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function $s(e){return this.elements.container.querySelectorAll(e)}function Xs(e){return this.elements.container.querySelector(e)}function Js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ts(e)&&(e.focus({preventScroll:!0}),t&&Gs(e,this.config.classNames.tabFocus))}var Ks={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},qs={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,n){var r=Os.isIPhone&&n&&qs.playsinline,i=qs[e]||"html5"!==t;return{api:i,ui:i&&qs.rangeInput&&("video"!==e||!Os.isIPhone||r)}},pip:!(Os.isIPhone||!xs(Us("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||Us("video").disablePictureInPicture)),airplay:xs(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(js(e))return!1;var t=v(e.split("/"),1)[0],n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(Ks).includes(n)&&(n+='; codecs="'.concat(Ks[e],'"'));try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:function(){var e=document.createElement("input");return e.type="range","range"===e.type}(),touch:"ontouchstart"in document.documentElement,transitions:!1!==Cs,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},eu=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function tu(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e&&"addEventListener"in e&&!js(t)&&xs(n)){var s=t.split(" "),u=o;eu&&(u={passive:a,capture:o}),s.forEach((function(t){r&&r.eventListeners&&i&&r.eventListeners.push({element:e,type:t,callback:n,options:u}),e[i?"addEventListener":"removeEventListener"](t,n,u)}))}}function nu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];tu.call(this,e,t,n,!0,r,i)}function ru(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];tu.call(this,e,t,n,!1,r,i)}function iu(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function o(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];ru(e,n,o,i,a),r.apply(t,u)};tu.call(this,e,n,o,!0,i,a)}function au(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Ts(e)&&!js(t)){var i=new CustomEvent(t,{bubbles:n,detail:C(C({},r),{},{plyr:this})});e.dispatchEvent(i)}}function ou(){this&&this.eventListeners&&(this.eventListeners.forEach((function(e){var t=e.element,n=e.type,r=e.callback,i=e.options;t.removeEventListener(n,r,i)})),this.eventListeners=[])}function su(){var e=this;return new Promise((function(t){return e.ready?setTimeout(t,0):nu.call(e,e.elements.container,"ready",t)})).then((function(){}))}function uu(e){Ss(e)&&e.then(null,(function(){}))}function cu(e){return Is(e)?e.filter((function(t,n){return e.indexOf(t)===n})):e}function lu(e,t){return Is(e)&&e.length?e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e})):null}function du(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}var pu=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((function(e,t){var n=v(t,2),r=n[0],i=n[1];return C(C({},e),{},z({},r/i,[r,i]))}),{});function hu(e){return!!(Is(e)||ws(e)&&e.includes(":"))&&(Is(e)?e:e.split(":")).map(Number).every(bs)}function fu(e){if(!Is(e)||!e.every(bs))return null;var t=v(e,2),n=t[0],r=t[1],i=function e(t,n){return 0===n?t:e(n,t%n)}(n,r);return[n/i,r/i]}function gu(e){var t=function(e){return hu(e)?e.split(":").map(Number):null},n=t(e);if(null===n&&(n=t(this.config.ratio)),null===n&&!js(this.embed)&&Is(this.embed.ratio)&&(n=this.embed.ratio),null===n&&this.isHTML5){var r=this.media;n=[r.videoWidth,r.videoHeight]}return fu(n)}function mu(e){if(!this.isVideo)return{};var t=this.elements.wrapper,n=gu.call(this,e);if(!Is(n))return{};var r=v(fu(n),2),i=r[0],a=r[1],o=100/i*a;if(du("aspect-ratio: ".concat(i,"/").concat(a))?t.style.aspectRatio="".concat(i,"/").concat(a):t.style.paddingBottom="".concat(o,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var s=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),u=(s-o)/(s/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform="translateY(-".concat(u,"%)")}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:o,ratio:n}}function yu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05,r=e/t,i=lu(Object.keys(pu),r);return Math.abs(i-r)<=n?pu[i]:[e,t]}var vu={getSources:function(){var e=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(t){var n=t.getAttribute("type");return!!js(n)||qs.mime.call(e,n)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:vu.getSources.call(this).map((function(e){return Number(e.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var e=this;e.options.speed=e.config.speed.options,js(this.config.ratio)||mu.call(e),Object.defineProperty(e.media,"quality",{get:function(){var t=vu.getSources.call(e).find((function(t){return t.getAttribute("src")===e.source}));return t&&Number(t.getAttribute("size"))},set:function(t){if(e.quality!==t){if(e.config.quality.forced&&xs(e.config.quality.onChange))e.config.quality.onChange(t);else{var n=vu.getSources.call(e).find((function(e){return Number(e.getAttribute("size"))===t}));if(!n)return;var r=e.media,i=r.currentTime,a=r.paused,o=r.preload,s=r.readyState,u=r.playbackRate;e.media.src=n.getAttribute("src"),("none"!==o||s)&&(e.once("loadedmetadata",(function(){e.speed=u,e.currentTime=i,a||uu(e.play())})),e.media.load())}au.call(e,e.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(Vs(vu.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function bu(e){return"".concat(e,"-").concat(Math.floor(1e4*Math.random()))}function wu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return js(e)?e:e.toString().replace(/{(\d+)}/g,(function(e,t){return n[t].toString()}))}var Mu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString())},xu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}))};function Iu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toString();return t=Mu(t,"-"," "),t=Mu(t,"_"," "),t=xu(t),Mu(t," ","")}function Nu(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var Tu={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Du=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(js(e)||js(t))return"";var n=Ls(t.i18n,e);if(js(n))return Object.keys(Tu).includes(e)?Tu[e]:"";var r={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(r).forEach((function(e){var t=v(e,2),r=t[0],i=t[1];n=Mu(n,r,i)})),n},Au=function(){function e(t){var n=this;P(this,e),Po(this,"get",(function(t){if(!e.supported||!n.enabled)return null;var r=window.localStorage.getItem(n.key);if(js(r))return null;var i=JSON.parse(r);return ws(t)&&t.length?i[t]:i})),Po(this,"set",(function(t){if(e.supported&&n.enabled&&vs(t)){var r=n.get();js(r)&&(r={}),_s(r,t);try{window.localStorage.setItem(n.key,JSON.stringify(r))}catch(e){}}})),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}return U(e,null,[{key:"supported",get:function(){try{if(!("localStorage"in window))return!1;var e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}]),e}();function ku(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(n,r){try{var i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",(function(){if("text"===t)try{n(JSON.parse(i.responseText))}catch(e){n(i.responseText)}else n(i.response)})),i.addEventListener("error",(function(){throw new Error(i.status)})),i.open("GET",e,!0),i.responseType=t,i.send()}catch(i){r(i)}}))}function Su(e,t){if(ws(e)){var n=ws(t),r=function(){return null!==document.getElementById(t)},i=function(e,t){e.innerHTML=t,n&&r()||document.body.insertAdjacentElement("afterbegin",e)};if(!n||!r()){var a=Au.supported,o=document.createElement("div");if(o.setAttribute("hidden",""),n&&o.setAttribute("id",t),a){var s=window.localStorage.getItem("cache-".concat(t));if(null!==s){var u=JSON.parse(s);i(o,u.content)}}ku(e).then((function(e){if(!js(e)){if(a)try{window.localStorage.setItem("cache-".concat(t),JSON.stringify({content:e}))}catch(e){}i(o,e)}})).catch((function(){}))}}}var Eu=function(e){return Math.trunc(e/60/60%60,10)},ju=function(e){return Math.trunc(e%60,10)};function Cu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!bs(e))return Cu(void 0,t,n);var r,i=function(e){return"0".concat(e).slice(-2)},a=Eu(e),o=(r=e,Math.trunc(r/60%60,10)),s=ju(e);return a=t||a>0?"".concat(a,":"):"","".concat(n&&e>0?"-":"").concat(a).concat(i(o),":").concat(i(s))}var zu={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,n=e.host!==t||Os.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements:function(){try{return this.elements.controls=Xs.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:$s.call(this,this.config.selectors.buttons.play),pause:Xs.call(this,this.config.selectors.buttons.pause),restart:Xs.call(this,this.config.selectors.buttons.restart),rewind:Xs.call(this,this.config.selectors.buttons.rewind),fastForward:Xs.call(this,this.config.selectors.buttons.fastForward),mute:Xs.call(this,this.config.selectors.buttons.mute),pip:Xs.call(this,this.config.selectors.buttons.pip),airplay:Xs.call(this,this.config.selectors.buttons.airplay),settings:Xs.call(this,this.config.selectors.buttons.settings),captions:Xs.call(this,this.config.selectors.buttons.captions),fullscreen:Xs.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Xs.call(this,this.config.selectors.progress),this.elements.inputs={seek:Xs.call(this,this.config.selectors.inputs.seek),volume:Xs.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Xs.call(this,this.config.selectors.display.buffer),currentTime:Xs.call(this,this.config.selectors.display.currentTime),duration:Xs.call(this,this.config.selectors.display.duration)},Ts(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var n="http://www.w3.org/2000/svg",r=zu.getIconUrl.call(this),i="".concat(r.cors?"":r.url,"#").concat(this.config.iconPrefix),a=document.createElementNS(n,"svg");Rs(a,_s(t,{"aria-hidden":"true",focusable:"false"}));var o=document.createElementNS(n,"use"),s="".concat(i,"-").concat(e);return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",s),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s),a.appendChild(o),a},createLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Du(e,this.config);return Us("span",C(C({},t),{},{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),n)},createBadge:function(e){if(js(e))return null;var t=Us("span",{class:this.config.classNames.menu.value});return t.appendChild(Us("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n=this,r=_s({},t),i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return(e=Iu(e)).charAt(0).toLowerCase()+e.slice(1)}(e),a={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(e){Object.keys(r).includes(e)&&(a[e]=r[e],delete r[e])})),"button"!==a.element||Object.keys(r).includes("type")||(r.type="button"),Object.keys(r).includes("class")?r.class.split(" ").some((function(e){return e===n.config.classNames.control}))||_s(r,{class:"".concat(r.class," ").concat(this.config.classNames.control)}):r.class=this.config.classNames.control,e){case"play":a.toggle=!0,a.label="play",a.labelPressed="pause",a.icon="play",a.iconPressed="pause";break;case"mute":a.toggle=!0,a.label="mute",a.labelPressed="unmute",a.icon="volume",a.iconPressed="muted";break;case"captions":a.toggle=!0,a.label="enableCaptions",a.labelPressed="disableCaptions",a.icon="captions-off",a.iconPressed="captions-on";break;case"fullscreen":a.toggle=!0,a.label="enterFullscreen",a.labelPressed="exitFullscreen",a.icon="enter-fullscreen",a.iconPressed="exit-fullscreen";break;case"play-large":r.class+=" ".concat(this.config.classNames.control,"--overlaid"),i="play",a.label="play",a.icon="play";break;default:js(a.label)&&(a.label=i),js(a.icon)&&(a.icon=e)}var o=Us(a.element);return a.toggle?(o.appendChild(zu.createIcon.call(this,a.iconPressed,{class:"icon--pressed"})),o.appendChild(zu.createIcon.call(this,a.icon,{class:"icon--not-pressed"})),o.appendChild(zu.createLabel.call(this,a.labelPressed,{class:"label--pressed"})),o.appendChild(zu.createLabel.call(this,a.label,{class:"label--not-pressed"}))):(o.appendChild(zu.createIcon.call(this,a.icon)),o.appendChild(zu.createLabel.call(this,a.label))),_s(r,Zs(this.config.selectors.buttons[i],r)),Rs(o,r),"play"===i?(Is(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(o)):this.elements.buttons[i]=o,o},createRange:function(e,t){var n=Us("input",_s(Zs(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Du(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,zu.updateRangeFill.call(this,n),ss.setup(n),n},createProgress:function(e,t){var n=Us("progress",_s(Zs(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){n.appendChild(Us("span",null,"0"));var r={played:"played",buffer:"buffered"}[e],i=r?Du(r,this.config):"";n.innerText="% ".concat(i.toLowerCase())}return this.elements.display[e]=n,n},createTime:function(e,t){var n=Zs(this.config.selectors.display[e],t),r=Us("div",_s(n,{class:"".concat(n.class?n.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":Du(e,this.config)}),"00:00");return this.elements.display[e]=r,r},bindMenuItemShortcuts:function(e,t){var n=this;nu.call(this,e,"keydown keyup",(function(r){if(["Space","ArrowUp","ArrowDown","ArrowRight"].includes(r.key)&&(r.preventDefault(),r.stopPropagation(),"keydown"!==r.type)){var i,a=Hs(e,'[role="menuitemradio"]');if(!a&&["Space","ArrowRight"].includes(r.key))zu.showMenuPanel.call(n,t,!0);else"Space"!==r.key&&("ArrowDown"===r.key||a&&"ArrowRight"===r.key?(i=e.nextElementSibling,Ts(i)||(i=e.parentNode.firstElementChild)):(i=e.previousElementSibling,Ts(i)||(i=e.parentNode.lastElementChild)),Js.call(n,i,!0))}}),!1),nu.call(this,e,"keyup",(function(e){"Return"===e.key&&zu.focusFirstMenuItem.call(n,null,!0)}))},createMenuItem:function(e){var t=this,n=e.value,r=e.list,i=e.type,a=e.title,o=e.badge,s=void 0===o?null:o,u=e.checked,c=void 0!==u&&u,l=Zs(this.config.selectors.inputs[i]),d=Us("button",_s(l,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(l.class?l.class:"").trim(),"aria-checked":c,value:n})),p=Us("span");p.innerHTML=a,Ts(s)&&p.appendChild(s),d.appendChild(p),Object.defineProperty(d,"checked",{enumerable:!0,get:function(){return"true"===d.getAttribute("aria-checked")},set:function(e){e&&Array.from(d.parentNode.children).filter((function(e){return Hs(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),d.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(d,"click keyup",(function(e){if(!As(e)||"Space"===e.key){switch(e.preventDefault(),e.stopPropagation(),d.checked=!0,i){case"language":t.currentTrack=Number(n);break;case"quality":t.quality=n;break;case"speed":t.speed=parseFloat(n)}zu.showMenuPanel.call(t,"home",As(e))}}),i,!1),zu.bindMenuItemShortcuts.call(this,d,i),r.appendChild(d)},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return bs(e)?Cu(e,Eu(this.duration)>0,t):e},updateTimeDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Ts(e)&&bs(t)&&(e.innerText=zu.formatTime(t,n))},updateVolume:function(){this.supported.ui&&(Ts(this.elements.inputs.volume)&&zu.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),Ts(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Ts(e)&&(e.value=t,zu.updateRangeFill.call(this,e))},updateProgress:function(e){var t=this;if(this.supported.ui&&Ds(e)){var n=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=function(e,t){return 0===e||0===t||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}(this.currentTime,this.duration),"timeupdate"===e.type&&zu.setRange.call(this,this.elements.inputs.seek,n);break;case"playing":case"progress":!function(e,n){var r=bs(n)?n:0,i=Ts(e)?e:t.elements.display.buffer;if(Ts(i)){i.value=r;var a=i.getElementsByTagName("span")[0];Ts(a)&&(a.childNodes[0].nodeValue=r)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=Ds(e)?e.target:e;if(Ts(t)&&"range"===t.getAttribute("type")){if(Hs(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var n=zu.formatTime(this.currentTime),r=zu.formatTime(this.duration),i=Du("seekLabel",this.config);t.setAttribute("aria-valuetext",i.replace("{currentTime}",n).replace("{duration}",r))}else if(Hs(t,this.config.selectors.inputs.volume)){var a=100*t.value;t.setAttribute("aria-valuenow",a),t.setAttribute("aria-valuetext","".concat(a.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);Os.isWebkit&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip:function(e){var t,n;if(this.config.tooltips.seek&&Ts(this.elements.inputs.seek)&&Ts(this.elements.display.seekTooltip)&&0!==this.duration){var r=this.elements.display.seekTooltip,i="".concat(this.config.classNames.tooltip,"--visible"),a=function(e){return Gs(r,i,e)};if(this.touch)a(!1);else{var o=0,s=this.elements.progress.getBoundingClientRect();if(Ds(e))o=100/s.width*(e.pageX-s.left);else{if(!Fs(r,i))return;o=parseFloat(r.style.left,10)}o<0?o=0:o>100&&(o=100);var u=this.duration/100*o;r.innerText=zu.formatTime(u);var c=null===(t=this.config.markers)||void 0===t||null===(n=t.points)||void 0===n?void 0:n.find((function(e){return e.time===Math.round(u)}));c&&r.insertAdjacentHTML("afterbegin","".concat(c.label,"<br>")),r.style.left="".concat(o,"%"),Ds(e)&&["mouseenter","mouseleave"].includes(e.type)&&a("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!Ts(this.elements.display.duration)&&this.config.invertTime;zu.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||zu.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return Ws(this.elements.display.currentTime,!0),void Ws(this.elements.progress,!0);Ts(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=Ts(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&zu.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&zu.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&zu.setMarkers.call(this),zu.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){Ws(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,n){var r=this.elements.settings.panels[e],i=null,a=t;if("captions"===e)i=this.currentTrack;else{if(i=js(n)?this[e]:n,js(i)&&(i=this.config[e].default),!js(this.options[e])&&!this.options[e].includes(i))return void this.debug.warn("Unsupported value of '".concat(i,"' for ").concat(e));if(!this.config[e].options.includes(i))return void this.debug.warn("Disabled value of '".concat(i,"' for ").concat(e))}if(Ts(a)||(a=r&&r.querySelector('[role="menu"]')),Ts(a)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=zu.getLabel.call(this,e,i);var o=a&&a.querySelector('[value="'.concat(i,'"]'));Ts(o)&&(o.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?Du("normal",this.config):"".concat(t,"&times;");case"quality":if(bs(t)){var n=Du("qualityLabel.".concat(t),this.config);return n.length?n:"".concat(t,"p")}return xu(t);case"captions":return _u.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t=this;if(Ts(this.elements.settings.panels.quality)){var n="quality",r=this.elements.settings.panels.quality.querySelector('[role="menu"]');Is(e)&&(this.options.quality=cu(e).filter((function(e){return t.config.quality.options.includes(e)})));var i=!js(this.options.quality)&&this.options.quality.length>1;if(zu.toggleMenuButton.call(this,n,i),Ys(r),zu.checkMenu.call(this),i){var a=function(e){var n=Du("qualityBadge.".concat(e),t.config);return n.length?zu.createBadge.call(t,n):null};this.options.quality.sort((function(e,n){var r=t.config.quality.options;return r.indexOf(e)>r.indexOf(n)?1:-1})).forEach((function(e){zu.createMenuItem.call(t,{value:e,list:r,type:n,title:zu.getLabel.call(t,"quality",e),badge:a(e)})})),zu.updateSetting.call(this,n,r)}}},setCaptionsMenu:function(){var e=this;if(Ts(this.elements.settings.panels.captions)){var t="captions",n=this.elements.settings.panels.captions.querySelector('[role="menu"]'),r=_u.getTracks.call(this),i=Boolean(r.length);if(zu.toggleMenuButton.call(this,t,i),Ys(n),zu.checkMenu.call(this),i){var a=r.map((function(t,r){return{value:r,checked:e.captions.toggled&&e.currentTrack===r,title:_u.getLabel.call(e,t),badge:t.language&&zu.createBadge.call(e,t.language.toUpperCase()),list:n,type:"language"}}));a.unshift({value:-1,checked:!this.captions.toggled,title:Du("disabled",this.config),list:n,type:"language"}),a.forEach(zu.createMenuItem.bind(this)),zu.updateSetting.call(this,t,n)}}},setSpeedMenu:function(){var e=this;if(Ts(this.elements.settings.panels.speed)){var t="speed",n=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(t){return t>=e.minimumSpeed&&t<=e.maximumSpeed}));var r=!js(this.options.speed)&&this.options.speed.length>1;zu.toggleMenuButton.call(this,t,r),Ys(n),zu.checkMenu.call(this),r&&(this.options.speed.forEach((function(r){zu.createMenuItem.call(e,{value:r,list:n,type:t,title:zu.getLabel.call(e,"speed",r)})})),zu.updateSetting.call(this,t,n))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!js(e)&&Object.values(e).some((function(e){return!e.hidden}));Ws(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var n=e;Ts(n)||(n=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var r=n.querySelector('[role^="menuitem"]');Js.call(this,r,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(Ts(t)&&Ts(n)){var r=t.hidden,i=r;if(Ms(e))i=e;else if(As(e)&&"Escape"===e.key)i=!1;else if(Ds(e)){var a=xs(e.composedPath)?e.composedPath()[0]:e.target,o=t.contains(a);if(o||!o&&e.target!==n&&i)return}n.setAttribute("aria-expanded",i),Ws(t,!i),Gs(this.elements.container,this.config.classNames.menu.open,i),i&&As(e)?zu.focusFirstMenuItem.call(this,null,!0):i||r||Js.call(this,n,As(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,r=t.scrollHeight;return Vs(t),{width:n,height:r}},showMenuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(t));if(Ts(r)){var i=r.parentNode,a=Array.from(i.children).find((function(e){return!e.hidden}));if(qs.transitions&&!qs.reducedMotion){i.style.width="".concat(a.scrollWidth,"px"),i.style.height="".concat(a.scrollHeight,"px");var o=zu.getMenuSize.call(this,r),s=function t(n){n.target===i&&["width","height"].includes(n.propertyName)&&(i.style.width="",i.style.height="",ru.call(e,i,Cs,t))};nu.call(this,i,Cs,s),i.style.width="".concat(o.width,"px"),i.style.height="".concat(o.height,"px")}Ws(a,!0),Ws(r,!1),zu.focusFirstMenuItem.call(this,r,n)}},setDownloadUrl:function(){var e=this.elements.buttons.download;Ts(e)&&e.setAttribute("href",this.download)},create:function(e){var t=this,n=zu.bindMenuItemShortcuts,r=zu.createButton,i=zu.createProgress,a=zu.createRange,o=zu.createTime,s=zu.setQualityMenu,u=zu.setSpeedMenu,c=zu.showMenuPanel;this.elements.controls=null,Is(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(r.call(this,"play-large"));var l=Us("div",Zs(this.config.selectors.controls.wrapper));this.elements.controls=l;var d={class:"plyr__controls__item"};return cu(Is(this.config.controls)?this.config.controls:[]).forEach((function(s){if("restart"===s&&l.appendChild(r.call(t,"restart",d)),"rewind"===s&&l.appendChild(r.call(t,"rewind",d)),"play"===s&&l.appendChild(r.call(t,"play",d)),"fast-forward"===s&&l.appendChild(r.call(t,"fast-forward",d)),"progress"===s){var u=Us("div",{class:"".concat(d.class," plyr__progress__container")}),p=Us("div",Zs(t.config.selectors.progress));if(p.appendChild(a.call(t,"seek",{id:"plyr-seek-".concat(e.id)})),p.appendChild(i.call(t,"buffer")),t.config.tooltips.seek){var h=Us("span",{class:t.config.classNames.tooltip},"00:00");p.appendChild(h),t.elements.display.seekTooltip=h}t.elements.progress=p,u.appendChild(t.elements.progress),l.appendChild(u)}if("current-time"===s&&l.appendChild(o.call(t,"currentTime",d)),"duration"===s&&l.appendChild(o.call(t,"duration",d)),"mute"===s||"volume"===s){var f=t.elements.volume;if(Ts(f)&&l.contains(f)||(f=Us("div",_s({},d,{class:"".concat(d.class," plyr__volume").trim()})),t.elements.volume=f,l.appendChild(f)),"mute"===s&&f.appendChild(r.call(t,"mute")),"volume"===s&&!Os.isIos){var g={max:1,step:.05,value:t.config.volume};f.appendChild(a.call(t,"volume",_s(g,{id:"plyr-volume-".concat(e.id)})))}}if("captions"===s&&l.appendChild(r.call(t,"captions",d)),"settings"===s&&!js(t.config.settings)){var m=Us("div",_s({},d,{class:"".concat(d.class," plyr__menu").trim(),hidden:""}));m.appendChild(r.call(t,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(e.id),"aria-expanded":!1}));var y=Us("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(e.id),hidden:""}),v=Us("div"),b=Us("div",{id:"plyr-settings-".concat(e.id,"-home")}),w=Us("div",{role:"menu"});b.appendChild(w),v.appendChild(b),t.elements.settings.panels.home=b,t.config.settings.forEach((function(r){var i=Us("button",_s(Zs(t.config.selectors.buttons.settings),{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));n.call(t,i,r),nu.call(t,i,"click",(function(){c.call(t,r,!1)}));var a=Us("span",null,Du(r,t.config)),o=Us("span",{class:t.config.classNames.menu.value});o.innerHTML=e[r],a.appendChild(o),i.appendChild(a),w.appendChild(i);var s=Us("div",{id:"plyr-settings-".concat(e.id,"-").concat(r),hidden:""}),u=Us("button",{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--back")});u.appendChild(Us("span",{"aria-hidden":!0},Du(r,t.config))),u.appendChild(Us("span",{class:t.config.classNames.hidden},Du("menuBack",t.config))),nu.call(t,s,"keydown",(function(e){"ArrowLeft"===e.key&&(e.preventDefault(),e.stopPropagation(),c.call(t,"home",!0))}),!1),nu.call(t,u,"click",(function(){c.call(t,"home",!1)})),s.appendChild(u),s.appendChild(Us("div",{role:"menu"})),v.appendChild(s),t.elements.settings.buttons[r]=i,t.elements.settings.panels[r]=s})),y.appendChild(v),m.appendChild(y),l.appendChild(m),t.elements.settings.popup=y,t.elements.settings.menu=m}if("pip"===s&&qs.pip&&l.appendChild(r.call(t,"pip",d)),"airplay"===s&&qs.airplay&&l.appendChild(r.call(t,"airplay",d)),"download"===s){var M=_s({},d,{element:"a",href:t.download,target:"_blank"});t.isHTML5&&(M.download="");var x=t.config.urls.download;!Es(x)&&t.isEmbed&&_s(M,{icon:"logo-".concat(t.provider),label:t.provider}),l.appendChild(r.call(t,"download",M))}"fullscreen"===s&&l.appendChild(r.call(t,"fullscreen",d))})),this.isHTML5&&s.call(this,vu.getQualityOptions.call(this)),u.call(this),l},inject:function(){var e=this;if(this.config.loadSprite){var t=zu.getIconUrl.call(this);t.cors&&Su(t.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var n=null;this.elements.controls=null;var r,i={id:this.id,seektime:this.config.seekTime,title:this.config.title},a=!0;if(xs(this.config.controls)&&(this.config.controls=this.config.controls.call(this,i)),this.config.controls||(this.config.controls=[]),Ts(this.config.controls)||ws(this.config.controls)?n=this.config.controls:(n=zu.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:_u.getLabel.call(this)}),a=!1),a&&ws(this.config.controls)&&(n=function(e){var t=e;return Object.entries(i).forEach((function(e){var n=v(e,2),r=n[0],i=n[1];t=Mu(t,"{".concat(r,"}"),i)})),t}(n)),ws(this.config.selectors.controls.container)&&(r=document.querySelector(this.config.selectors.controls.container)),Ts(r)||(r=this.elements.container),r[Ts(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),Ts(this.elements.controls)||zu.findElements.call(this),!js(this.elements.buttons)){var o=function(t){var n=e.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:function(){return Fs(t,n)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Gs(t,n,e)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(e){Is(e)||Ns(e)?Array.from(e).filter(Boolean).forEach(o):o(e)}))}if(Os.isEdge&&zs(r),this.config.tooltips.controls){var s=this.config,u=s.classNames,c=s.selectors,l="".concat(c.controls.wrapper," ").concat(c.labels," .").concat(u.hidden),d=$s.call(this,l);Array.from(d).forEach((function(t){Gs(t,e.config.classNames.hidden,!1),Gs(t,e.config.classNames.tooltip,!0)}))}},setMediaMetadata:function(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(e){}},setMarkers:function(){var e,t,n=this;if(this.duration&&!this.elements.markers){var r=null===(e=this.config.markers)||void 0===e||null===(t=e.points)||void 0===t?void 0:t.filter((function(e){var t=e.time;return t>0&&t<n.duration}));if(null!=r&&r.length){var i=document.createDocumentFragment(),a=document.createDocumentFragment(),o=null,s="".concat(this.config.classNames.tooltip,"--visible"),u=function(e){return Gs(o,s,e)};r.forEach((function(e){var t=Us("span",{class:n.config.classNames.marker},""),r=e.time/n.duration*100+"%";o&&(t.addEventListener("mouseenter",(function(){e.label||(o.style.left=r,o.innerHTML=e.label,u(!0))})),t.addEventListener("mouseleave",(function(){u(!1)}))),t.addEventListener("click",(function(){n.currentTime=e.time})),t.style.left=r,a.appendChild(t)})),i.appendChild(a),this.config.tooltips.seek||(o=Us("span",{class:this.config.classNames.tooltip},""),i.appendChild(o)),this.elements.markers={points:a,tip:o},this.elements.progress.appendChild(i)}}}};function Ou(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e;if(t){var r=document.createElement("a");r.href=n,n=r.href}try{return new URL(n)}catch(e){return null}}function Lu(e){var t=new URLSearchParams;return vs(e)&&Object.entries(e).forEach((function(e){var n=v(e,2),r=n[0],i=n[1];t.set(r,i)})),t}var _u={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!qs.textTracks)Is(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&zu.setCaptionsMenu.call(this);else{if(Ts(this.elements.captions)||(this.elements.captions=Us("div",Zs(this.config.selectors.captions)),function(e,t){Ts(e)&&Ts(t)&&t.parentNode.insertBefore(e,t.nextSibling)}(this.elements.captions,this.elements.wrapper)),Os.isIE&&window.URL){var e=this.media.querySelectorAll("track");Array.from(e).forEach((function(e){var t=e.getAttribute("src"),n=Ou(t);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&ku(t,"blob").then((function(t){e.setAttribute("src",window.URL.createObjectURL(t))})).catch((function(){Vs(e)}))}))}var t=cu((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(e){return e.split("-")[0]}))),n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===n&&(n=v(t,1)[0]);var r=this.storage.get("captions");if(Ms(r)||(r=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:r,language:n,languages:t}),this.isHTML5){e=this.config.captions.update?"addtrack removetrack":"removetrack";nu.call(this,this.media.textTracks,e,_u.update.bind(this))}setTimeout(_u.update.bind(this),0)}},update:function(){var e=this,t=_u.getTracks.call(this,!0),n=this.captions,r=n.active,i=n.language,a=n.meta,o=n.currentTrackNode,s=Boolean(t.find((function(e){return e.language===i})));this.isHTML5&&this.isVideo&&t.filter((function(e){return!a.get(e)})).forEach((function(t){e.debug.log("Track added",t),a.set(t,{default:"showing"===t.mode}),"showing"===t.mode&&(t.mode="hidden"),nu.call(e,t,"cuechange",(function(){return _u.updateCues.call(e)}))})),(s&&this.language!==i||!t.includes(o))&&(_u.setLanguage.call(this,i),_u.toggle.call(this,r&&s)),this.elements&&Gs(this.elements.container,this.config.classNames.captions.enabled,!js(t)),Is(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&zu.setCaptionsMenu.call(this)},toggle:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var r=this.captions.toggled,i=this.config.classNames.captions.active,a=ys(e)?!r:e;if(a!==r){if(n||(this.captions.active=a,this.storage.set({captions:a})),!this.language&&a&&!n){var o=_u.getTracks.call(this),s=_u.findTrack.call(this,[this.captions.language].concat(b(this.captions.languages)),!0);return this.captions.language=s.language,void _u.set.call(this,o.indexOf(s))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=a),Gs(this.elements.container,i,a),this.captions.toggled=a,zu.updateSetting.call(this,"captions"),au.call(this,this.media,a?"captionsenabled":"captionsdisabled")}setTimeout((function(){a&&t.captions.toggled&&(t.captions.currentTrackNode.mode="hidden")}))}},set:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=_u.getTracks.call(this);if(-1!==e)if(bs(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var r=n[e],i=r||{},a=i.language;this.captions.currentTrackNode=r,zu.updateSetting.call(this,"captions"),t||(this.captions.language=a,this.storage.set({language:a})),this.isVimeo&&this.embed.enableTextTrack(a),au.call(this,this.media,"languagechange")}_u.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&_u.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else _u.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(ws(e)){var n=e.toLowerCase();this.captions.language=n;var r=_u.getTracks.call(this),i=_u.findTrack.call(this,[n]);_u.set.call(this,r.indexOf(i),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Array.from((this.media||{}).textTracks||[]).filter((function(n){return!e.isHTML5||t||e.captions.meta.has(n)})).filter((function(e){return["captions","subtitles"].includes(e.kind)}))},findTrack:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=_u.getTracks.call(this),a=function(e){return Number((n.captions.meta.get(e)||{}).default)},o=Array.from(i).sort((function(e,t){return a(t)-a(e)}));return e.every((function(e){return!(t=o.find((function(t){return t.language===e})))})),t||(r?o[0]:void 0)},getCurrentTrack:function(){return _u.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!ks(t)&&qs.textTracks&&this.captions.toggled&&(t=_u.getCurrentTrack.call(this)),ks(t)?js(t.label)?js(t.language)?Du("enabled",this.config):e.language.toUpperCase():t.label:Du("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(Ts(this.elements.captions))if(ys(e)||Array.isArray(e)){var t=e;if(!t){var n=_u.getCurrentTrack.call(this);t=Array.from((n||{}).activeCues||[]).map((function(e){return e.getCueAsHTML()})).map(Nu)}var r=t.map((function(e){return e.trim()})).join("\n");if(r!==this.elements.captions.innerHTML){Ys(this.elements.captions);var i=Us("span",Zs(this.config.selectors.caption));i.innerHTML=r,this.elements.captions.appendChild(i),au.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},Pu={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.2/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Ru="picture-in-picture",Uu="inline",Bu={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Vu="audio",Yu="video";var Qu=function(){},Zu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];P(this,e),this.enabled=window.console&&t,this.enabled&&this.log("Debugging enabled")}return U(e,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):Qu}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):Qu}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):Qu}}]),e}(),Wu=function(){function e(t){var n=this;P(this,e),Po(this,"onChange",(function(){if(n.enabled){var e=n.player.elements.buttons.fullscreen;Ts(e)&&(e.pressed=n.active);var t=n.target===n.player.media?n.target:n.player.elements.container;au.call(n.player,t,n.active?"enterfullscreen":"exitfullscreen",!0)}})),Po(this,"toggleFallback",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e?n.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(n.scrollPosition.x,n.scrollPosition.y),document.body.style.overflow=e?"hidden":"",Gs(n.target,n.player.config.classNames.fullscreen.fallback,e),Os.isIos){var t=document.head.querySelector('meta[name="viewport"]'),r="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");var i=ws(t.content)&&t.content.includes(r);e?(n.cleanupViewport=!i,i||(t.content+=",".concat(r))):n.cleanupViewport&&(t.content=t.content.split(",").filter((function(e){return e.trim()!==r})).join(","))}n.onChange()})),Po(this,"trapFocus",(function(e){if(!Os.isIos&&n.active&&"Tab"===e.key){var t=document.activeElement,r=$s.call(n.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),i=v(r,1)[0],a=r[r.length-1];t!==a||e.shiftKey?t===i&&e.shiftKey&&(a.focus(),e.preventDefault()):(i.focus(),e.preventDefault())}})),Po(this,"update",(function(){var t;n.enabled?(t=n.forceFallback?"Fallback (forced)":e.native?"Native":"Fallback",n.player.debug.log("".concat(t," fullscreen enabled"))):n.player.debug.log("Fullscreen not supported and fallback disabled");Gs(n.player.elements.container,n.player.config.classNames.fullscreen.enabled,n.enabled)})),Po(this,"enter",(function(){n.enabled&&(Os.isIos&&n.player.config.fullscreen.iosNative?n.player.isVimeo?n.player.embed.requestFullscreen():n.target.webkitEnterFullscreen():!e.native||n.forceFallback?n.toggleFallback(!0):n.prefix?js(n.prefix)||n.target["".concat(n.prefix,"Request").concat(n.property)]():n.target.requestFullscreen({navigationUI:"hide"}))})),Po(this,"exit",(function(){if(n.enabled)if(Os.isIos&&n.player.config.fullscreen.iosNative)n.target.webkitExitFullscreen(),uu(n.player.play());else if(!e.native||n.forceFallback)n.toggleFallback(!1);else if(n.prefix){if(!js(n.prefix)){var t="moz"===n.prefix?"Cancel":"Exit";document["".concat(n.prefix).concat(t).concat(n.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),Po(this,"toggle",(function(){n.active?n.exit():n.enter()})),this.player=t,this.prefix=e.prefix,this.property=e.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&function(e,t){return(Element.prototype.closest||function(){var e=this;do{if(Hs.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,t.config.fullscreen.container),nu.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){n.onChange()})),nu.call(this.player,this.player.elements.container,"dblclick",(function(e){Ts(n.player.elements.controls)&&n.player.elements.controls.contains(e.target)||n.player.listeners.proxy(e,n.toggle,"fullscreen")})),nu.call(this,this.player.elements.container,"keydown",(function(e){return n.trapFocus(e)})),this.update()}return U(e,[{key:"usingNative",get:function(){return e.native&&!this.forceFallback}},{key:"enabled",get:function(){return(e.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){if(!this.enabled)return!1;if(!e.native||this.forceFallback)return Fs(this.target,this.player.config.classNames.fullscreen.fallback);var t=this.prefix?this.target.getRootNode()["".concat(this.prefix).concat(this.property,"Element")]:this.target.getRootNode().fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}},{key:"target",get:function(){return Os.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(xs(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!xs(document["".concat(t,"ExitFullscreen")])&&!xs(document["".concat(t,"CancelFullScreen")])||(e=t,0))})),e}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),e}();function Gu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(n,r){var i=new Image,a=function(){delete i.onload,delete i.onerror,(i.naturalWidth>=t?n:r)(i)};Object.assign(i,{onload:a,onerror:a,src:e})}))}var Fu={addStyleHook:function(){Gs(this.elements.container,this.config.selectors.container.replace(".",""),!0),Gs(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void Fu.toggleNativeControls.call(this,!0);Ts(this.elements.controls)||(zu.inject.call(this),this.listeners.controls()),Fu.toggleNativeControls.call(this),this.isHTML5&&_u.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,zu.updateVolume.call(this),zu.timeUpdate.call(this),zu.durationUpdate.call(this),Fu.checkPlaying.call(this),Gs(this.elements.container,this.config.classNames.pip.supported,qs.pip&&this.isHTML5&&this.isVideo),Gs(this.elements.container,this.config.classNames.airplay.supported,qs.airplay&&this.isHTML5),Gs(this.elements.container,this.config.classNames.isIos,Os.isIos),Gs(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){au.call(e,e.media,"ready")}),0),Fu.setTitle.call(this),this.poster&&Fu.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&zu.durationUpdate.call(this),this.config.mediaMetadata&&zu.setMediaMetadata.call(this)},setTitle:function(){var e=Du("play",this.config);if(ws(this.config.title)&&!js(this.config.title)&&(e+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(t){t.setAttribute("aria-label",e)})),this.isEmbed){var t=Xs.call(this,"iframe");if(!Ts(t))return;var n=js(this.config.title)?"video":this.config.title,r=Du("frameTitle",this.config);t.setAttribute("title",r.replace("{title}",n))}},togglePoster:function(e){Gs(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),su.call(this).then((function(){return Gu(e)})).catch((function(n){throw e===t.poster&&Fu.togglePoster.call(t,!1),n})).then((function(){if(e!==t.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(t.elements.poster.style,{backgroundImage:"url('".concat(e,"')"),backgroundSize:""}),Fu.togglePoster.call(t,!0),e})))},checkPlaying:function(e){var t=this;Gs(this.elements.container,this.config.classNames.playing,this.playing),Gs(this.elements.container,this.config.classNames.paused,this.paused),Gs(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(e){Object.assign(e,{pressed:t.playing}),e.setAttribute("aria-label",Du(t.playing?"pause":"play",t.config))})),Ds(e)&&"timeupdate"===e.type||Fu.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){Gs(t.elements.container,t.config.classNames.loading,t.loading),Fu.toggleControls.call(t)}),this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles:function(){var e=this;Object.values(C({},this.media.style)).filter((function(e){return!js(e)&&ws(e)&&e.startsWith("--plyr")})).forEach((function(t){e.elements.container.style.setProperty(t,e.media.style.getPropertyValue(t)),e.media.style.removeProperty(t)})),js(this.media.style)&&this.media.removeAttribute("style")}},Hu=function(){function e(t){var n=this;P(this,e),Po(this,"firstTouch",(function(){var e=n.player,t=e.elements;e.touch=!0,Gs(t.container,e.config.classNames.isTouch,!0)})),Po(this,"setTabFocus",(function(e){var t=n.player,r=t.elements,i=e.key,a=e.type,o=e.timeStamp;if(clearTimeout(n.focusTimer),"keydown"!==a||"Tab"===i){"keydown"===a&&(n.lastKeyDown=o);var s,u=o-n.lastKeyDown<=20;("focus"!==a||u)&&(s=t.config.classNames.tabFocus,Gs($s.call(t,".".concat(s)),s,!1),"focusout"!==a&&(n.focusTimer=setTimeout((function(){var e=document.activeElement;r.container.contains(e)&&Gs(document.activeElement,t.config.classNames.tabFocus,!0)}),10)))}})),Po(this,"global",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.player;t.config.keyboard.global&&tu.call(t,window,"keydown keyup",n.handleKey,e,!1),tu.call(t,document.body,"click",n.toggleMenu,e),iu.call(t,document.body,"touchstart",n.firstTouch),tu.call(t,document.body,"keydown focus blur focusout",n.setTabFocus,e,!1,!0)})),Po(this,"container",(function(){var e=n.player,t=e.config,r=e.elements,i=e.timers;!t.keyboard.global&&t.keyboard.focused&&nu.call(e,r.container,"keydown keyup",n.handleKey,!1),nu.call(e,r.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(t){var n=r.controls;n&&"enterfullscreen"===t.type&&(n.pressed=!1,n.hover=!1);var a=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(Fu.toggleControls.call(e,!0),a=e.touch?3e3:2e3),clearTimeout(i.controls),i.controls=setTimeout((function(){return Fu.toggleControls.call(e,!1)}),a)}));var a=function(){if(e.isVimeo&&!e.config.vimeo.premium){var t=r.wrapper,n=e.fullscreen.active,i=v(gu.call(e),2),a=i[0],o=i[1],s=du("aspect-ratio: ".concat(a," / ").concat(o));if(n){var u=v([Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],2),c=u[0],l=u[1],d=c/l>a/o;s?(t.style.width=d?"auto":"100%",t.style.height=d?"100%":"auto"):(t.style.maxWidth=d?l/o*a+"px":null,t.style.margin=d?"0 auto":null)}else s?(t.style.width=null,t.style.height=null):(t.style.maxWidth=null,t.style.margin=null)}},o=function(){clearTimeout(i.resized),i.resized=setTimeout(a,50)};nu.call(e,r.container,"enterfullscreen exitfullscreen",(function(t){e.fullscreen.target===r.container&&(!e.isEmbed&&js(e.config.ratio)||(a(),("enterfullscreen"===t.type?nu:ru).call(e,window,"resize",o)))}))})),Po(this,"media",(function(){var e=n.player,t=e.elements;if(nu.call(e,e.media,"timeupdate seeking seeked",(function(t){return zu.timeUpdate.call(e,t)})),nu.call(e,e.media,"durationchange loadeddata loadedmetadata",(function(t){return zu.durationUpdate.call(e,t)})),nu.call(e,e.media,"ended",(function(){e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())})),nu.call(e,e.media,"progress playing seeking seeked",(function(t){return zu.updateProgress.call(e,t)})),nu.call(e,e.media,"volumechange",(function(t){return zu.updateVolume.call(e,t)})),nu.call(e,e.media,"playing play pause ended emptied timeupdate",(function(t){return Fu.checkPlaying.call(e,t)})),nu.call(e,e.media,"waiting canplay seeked playing",(function(t){return Fu.checkLoading.call(e,t)})),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){var r=Xs.call(e,".".concat(e.config.classNames.video));if(!Ts(r))return;nu.call(e,t.container,"click",(function(i){([t.container,r].includes(i.target)||r.contains(i.target))&&(e.touch&&e.config.hideControls||(e.ended?(n.proxy(i,e.restart,"restart"),n.proxy(i,(function(){uu(e.play())}),"play")):n.proxy(i,(function(){uu(e.togglePlay())}),"play")))}))}e.supported.ui&&e.config.disableContextMenu&&nu.call(e,t.wrapper,"contextmenu",(function(e){e.preventDefault()}),!1),nu.call(e,e.media,"volumechange",(function(){e.storage.set({volume:e.volume,muted:e.muted})})),nu.call(e,e.media,"ratechange",(function(){zu.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})})),nu.call(e,e.media,"qualitychange",(function(t){zu.updateSetting.call(e,"quality",null,t.detail.quality)})),nu.call(e,e.media,"ready qualitychange",(function(){zu.setDownloadUrl.call(e)}));var i=e.config.events.concat(["keyup","keydown"]).join(" ");nu.call(e,e.media,i,(function(n){var r=n.detail,i=void 0===r?{}:r;"error"===n.type&&(i=e.media.error),au.call(e,t.container,n.type,!0,i)}))})),Po(this,"proxy",(function(e,t,r){var i=n.player,a=i.config.listeners[r],o=!0;xs(a)&&(o=a.call(i,e)),!1!==o&&xs(t)&&t.call(i,e)})),Po(this,"bind",(function(e,t,r,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=n.player,s=o.config.listeners[i],u=xs(s);nu.call(o,e,t,(function(e){return n.proxy(e,r,i)}),a&&!u)})),Po(this,"controls",(function(){var e=n.player,t=e.elements,r=Os.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach((function(t){n.bind(t,"click",(function(){uu(e.togglePlay())}),"play")})),n.bind(t.buttons.restart,"click",e.restart,"restart"),n.bind(t.buttons.rewind,"click",(function(){e.lastSeekTime=Date.now(),e.rewind()}),"rewind"),n.bind(t.buttons.fastForward,"click",(function(){e.lastSeekTime=Date.now(),e.forward()}),"fastForward"),n.bind(t.buttons.mute,"click",(function(){e.muted=!e.muted}),"mute"),n.bind(t.buttons.captions,"click",(function(){return e.toggleCaptions()})),n.bind(t.buttons.download,"click",(function(){au.call(e,e.media,"download")}),"download"),n.bind(t.buttons.fullscreen,"click",(function(){e.fullscreen.toggle()}),"fullscreen"),n.bind(t.buttons.pip,"click",(function(){e.pip="toggle"}),"pip"),n.bind(t.buttons.airplay,"click",e.airplay,"airplay"),n.bind(t.buttons.settings,"click",(function(t){t.stopPropagation(),t.preventDefault(),zu.toggleMenu.call(e,t)}),null,!1),n.bind(t.buttons.settings,"keyup",(function(t){["Space","Enter"].includes(t.key)&&("Enter"!==t.key?(t.preventDefault(),t.stopPropagation(),zu.toggleMenu.call(e,t)):zu.focusFirstMenuItem.call(e,null,!0))}),null,!1),n.bind(t.settings.menu,"keydown",(function(t){"Escape"===t.key&&zu.toggleMenu.call(e,t)})),n.bind(t.inputs.seek,"mousedown mousemove",(function(e){var n=t.progress.getBoundingClientRect(),r=100/n.width*(e.pageX-n.left);e.currentTarget.setAttribute("seek-value",r)})),n.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(t){var n=t.currentTarget,r="play-on-seeked";if(!As(t)||["ArrowLeft","ArrowRight"].includes(t.key)){e.lastSeekTime=Date.now();var i=n.hasAttribute(r),a=["mouseup","touchend","keyup"].includes(t.type);i&&a?(n.removeAttribute(r),uu(e.play())):!a&&e.playing&&(n.setAttribute(r,""),e.pause())}})),Os.isIos){var i=$s.call(e,'input[type="range"]');Array.from(i).forEach((function(e){return n.bind(e,r,(function(e){return zs(e.target)}))}))}n.bind(t.inputs.seek,r,(function(t){var n=t.currentTarget,r=n.getAttribute("seek-value");js(r)&&(r=n.value),n.removeAttribute("seek-value"),e.currentTime=r/n.max*e.duration}),"seek"),n.bind(t.progress,"mouseenter mouseleave mousemove",(function(t){return zu.updateSeekTooltip.call(e,t)})),n.bind(t.progress,"mousemove touchmove",(function(t){var n=e.previewThumbnails;n&&n.loaded&&n.startMove(t)})),n.bind(t.progress,"mouseleave touchend click",(function(){var t=e.previewThumbnails;t&&t.loaded&&t.endMove(!1,!0)})),n.bind(t.progress,"mousedown touchstart",(function(t){var n=e.previewThumbnails;n&&n.loaded&&n.startScrubbing(t)})),n.bind(t.progress,"mouseup touchend",(function(t){var n=e.previewThumbnails;n&&n.loaded&&n.endScrubbing(t)})),Os.isWebkit&&Array.from($s.call(e,'input[type="range"]')).forEach((function(t){n.bind(t,"input",(function(t){return zu.updateRangeFill.call(e,t.target)}))})),e.config.toggleInvert&&!Ts(t.display.duration)&&n.bind(t.display.currentTime,"click",(function(){0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,zu.timeUpdate.call(e))})),n.bind(t.inputs.volume,r,(function(t){e.volume=t.target.value}),"volume"),n.bind(t.controls,"mouseenter mouseleave",(function(n){t.controls.hover=!e.touch&&"mouseenter"===n.type})),t.fullscreen&&Array.from(t.fullscreen.children).filter((function(e){return!e.contains(t.container)})).forEach((function(r){n.bind(r,"mouseenter mouseleave",(function(n){t.controls&&(t.controls.hover=!e.touch&&"mouseenter"===n.type)}))})),n.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){t.controls.pressed=["mousedown","touchstart"].includes(e.type)})),n.bind(t.controls,"focusin",(function(){var r=e.config,i=e.timers;Gs(t.controls,r.classNames.noTransition,!0),Fu.toggleControls.call(e,!0),setTimeout((function(){Gs(t.controls,r.classNames.noTransition,!1)}),0);var a=n.touch?3e3:4e3;clearTimeout(i.controls),i.controls=setTimeout((function(){return Fu.toggleControls.call(e,!1)}),a)})),n.bind(t.inputs.volume,"wheel",(function(t){var n=t.webkitDirectionInvertedFromDevice,r=v([t.deltaX,-t.deltaY].map((function(e){return n?-e:e})),2),i=r[0],a=r[1],o=Math.sign(Math.abs(i)>Math.abs(a)?i:a);e.increaseVolume(o/50);var s=e.media.volume;(1===o&&s<1||-1===o&&s>0)&&t.preventDefault()}),"volume",!1)})),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return U(e,[{key:"handleKey",value:function(e){var t,n=this.player,r=n.elements,i=e.key,a=e.type,o=e.altKey,s=e.ctrlKey,u=e.metaKey,c=e.shiftKey,l="keydown"===a,d=l&&i===this.lastKey;if(!(o||s||u||c)&&i)if(l){var p=document.activeElement;if(Ts(p)){var h=n.config.selectors.editable;if(p!==r.inputs.seek&&Hs(p,h)||"Space"===e.key&&Hs(p,'button, [role^="menuitem"]'))return}switch(["Space","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(t=parseInt(i,10),n.currentTime=n.duration/10*t);break;case"Space":case"k":d||uu(n.togglePlay());break;case"ArrowUp":n.increaseVolume(.1);break;case"ArrowDown":n.decreaseVolume(.1);break;case"m":d||(n.muted=!n.muted);break;case"ArrowRight":n.forward();break;case"ArrowLeft":n.rewind();break;case"f":n.fullscreen.toggle();break;case"c":d||n.toggleCaptions();break;case"l":n.loop=!n.loop}"Escape"===i&&!n.fullscreen.usingNative&&n.fullscreen.active&&n.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}},{key:"toggleMenu",value:function(e){zu.toggleMenu.call(this.player,e)}}]),e}();var $u=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){e.exports=function(){var e=function(){},t={},n={},r={};function i(e,t){if(e){var i=r[e];if(n[e]=t,i)for(;i.length;)i[0](e,t),i.splice(0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function o(t,n,r,i){var a,s,u=document,c=r.async,l=(r.numRetries||0)+1,d=r.before||e,p=t.replace(/[\?|#].*$/,""),h=t.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(p)?((s=u.createElement("link")).rel="stylesheet",s.href=h,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p)?(s=u.createElement("img")).src=h:((s=u.createElement("script")).src=t,s.async=void 0===c||c),s.onload=s.onerror=s.onbeforeload=function(e){var u=e.type[0];if(a)try{s.sheet.cssText.length||(u="e")}catch(e){18!=e.code&&(u="e")}if("e"==u){if((i+=1)<l)return o(t,n,r,i)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,u,e.defaultPrevented)},!1!==d(t,s)&&u.head.appendChild(s)}function s(e,n,r){var s,u;if(n&&n.trim&&(s=n),u=(s?r:n)||{},s){if(s in t)throw"LoadJS";t[s]=!0}function c(t,n){!function(e,t,n){var r,i,a=(e=e.push?e:[e]).length,s=a,u=[];for(r=function(e,n,r){if("e"==n&&u.push(e),"b"==n){if(!r)return;u.push(e)}--a||t(u)},i=0;i<s;i++)o(e[i],r,n)}(e,(function(e){a(u,e),t&&a({success:t,error:n},e),i(s,e)}),u)}if(u.returnPromise)return new Promise(c);c()}return s.ready=function(e,t){return function(e,t){e=e.push?e:[e];var i,a,o,s=[],u=e.length,c=u;for(i=function(e,n){n.length&&s.push(e),--c||t(s)};u--;)a=e[u],(o=n[a])?i(a,o):(r[a]=r[a]||[]).push(i)}(e,(function(e){a(t,e)})),s},s.done=function(e){i(e,[])},s.reset=function(){t={},n={},r={}},s.isDefined=function(e){return e in t},s}()}));function Xu(e){return new Promise((function(t,n){$u(e,{success:t,error:n})}))}function Ju(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,au.call(this,this.media,e?"play":"pause"))}var Ku={setup:function(){var e=this;Gs(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,mu.call(e),vs(window.Vimeo)?Ku.ready.call(e):Xu(e.config.urls.vimeo.sdk).then((function(){Ku.ready.call(e)})).catch((function(t){e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready:function(){var e=this,t=this,n=t.config.vimeo,r=n.premium,i=n.referrerPolicy,a=g(n,["premium","referrerPolicy"]),o=t.media.getAttribute("src"),s="";js(o)?(o=t.media.getAttribute(t.config.attributes.embed.id),s=t.media.getAttribute(t.config.attributes.embed.hash)):s=function(e){var t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&5===t.length?t[4]:null}(o);var u=s?{h:s}:{};r&&Object.assign(a,{controls:!1,sidedock:!1});var c=Lu(C(C({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},u),a)),l=function(e){return js(e)?null:bs(Number(e))?e:e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e}(o),d=Us("iframe"),p=wu(t.config.urls.vimeo.iframe,l,c);if(d.setAttribute("src",p),d.setAttribute("allowfullscreen",""),d.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),js(i)||d.setAttribute("referrerPolicy",i),r||!n.customControls)d.setAttribute("data-poster",t.poster),t.media=Qs(d,t.media);else{var h=Us("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});h.appendChild(d),t.media=Qs(h,t.media)}n.customControls||ku(wu(t.config.urls.vimeo.api,p)).then((function(e){!js(e)&&e.thumbnail_url&&Fu.setPoster.call(t,e.thumbnail_url).catch((function(){}))})),t.embed=new window.Vimeo.Player(d,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=function(){return Ju.call(t,!0),t.embed.play()},t.media.pause=function(){return Ju.call(t,!1),t.embed.pause()},t.media.stop=function(){t.pause(),t.currentTime=0};var f=t.media.currentTime;Object.defineProperty(t.media,"currentTime",{get:function(){return f},set:function(e){var n=t.embed,r=t.media,i=t.paused,a=t.volume,o=i&&!n.hasPlayed;r.seeking=!0,au.call(t,r,"seeking"),Promise.resolve(o&&n.setVolume(0)).then((function(){return n.setCurrentTime(e)})).then((function(){return o&&n.pause()})).then((function(){return o&&n.setVolume(a)})).catch((function(){}))}});var m=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:function(){return m},set:function(e){t.embed.setPlaybackRate(e).then((function(){m=e,au.call(t,t.media,"ratechange")})).catch((function(){t.options.speed=[1]}))}});var y=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return y},set:function(e){t.embed.setVolume(e).then((function(){y=e,au.call(t,t.media,"volumechange")}))}});var b=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return b},set:function(e){var n=!!Ms(e)&&e;t.embed.setVolume(n?0:t.config.volume).then((function(){b=n,au.call(t,t.media,"volumechange")}))}});var w,M=t.config.loop;Object.defineProperty(t.media,"loop",{get:function(){return M},set:function(e){var n=Ms(e)?e:t.config.loop.active;t.embed.setLoop(n).then((function(){M=n}))}}),t.embed.getVideoUrl().then((function(e){w=e,zu.setDownloadUrl.call(t)})).catch((function(t){e.debug.warn(t)})),Object.defineProperty(t.media,"currentSrc",{get:function(){return w}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then((function(n){var r=v(n,2),i=r[0],a=r[1];t.embed.ratio=yu(i,a),mu.call(e)})),t.embed.setAutopause(t.config.autopause).then((function(e){t.config.autopause=e})),t.embed.getVideoTitle().then((function(n){t.config.title=n,Fu.setTitle.call(e)})),t.embed.getCurrentTime().then((function(e){f=e,au.call(t,t.media,"timeupdate")})),t.embed.getDuration().then((function(e){t.media.duration=e,au.call(t,t.media,"durationchange")})),t.embed.getTextTracks().then((function(e){t.media.textTracks=e,_u.setup.call(t)})),t.embed.on("cuechange",(function(e){var n=e.cues,r=(void 0===n?[]:n).map((function(e){return function(e){var t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}(e.text)}));_u.updateCues.call(t,r)})),t.embed.on("loaded",(function(){t.embed.getPaused().then((function(e){Ju.call(t,!e),e||au.call(t,t.media,"playing")})),Ts(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)})),t.embed.on("bufferstart",(function(){au.call(t,t.media,"waiting")})),t.embed.on("bufferend",(function(){au.call(t,t.media,"playing")})),t.embed.on("play",(function(){Ju.call(t,!0),au.call(t,t.media,"playing")})),t.embed.on("pause",(function(){Ju.call(t,!1)})),t.embed.on("timeupdate",(function(e){t.media.seeking=!1,f=e.seconds,au.call(t,t.media,"timeupdate")})),t.embed.on("progress",(function(e){t.media.buffered=e.percent,au.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&au.call(t,t.media,"canplaythrough"),t.embed.getDuration().then((function(e){e!==t.media.duration&&(t.media.duration=e,au.call(t,t.media,"durationchange"))}))})),t.embed.on("seeked",(function(){t.media.seeking=!1,au.call(t,t.media,"seeked")})),t.embed.on("ended",(function(){t.media.paused=!0,au.call(t,t.media,"ended")})),t.embed.on("error",(function(e){t.media.error=e,au.call(t,t.media,"error")})),n.customControls&&setTimeout((function(){return Fu.build.call(t)}),0)}};function qu(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,au.call(this,this.media,e?"play":"pause"))}function ec(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var tc={setup:function(){var e=this;if(Gs(this.elements.wrapper,this.config.classNames.embed,!0),vs(window.YT)&&xs(window.YT.Player))tc.ready.call(this);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){xs(t)&&t(),tc.ready.call(e)},Xu(this.config.urls.youtube.sdk).catch((function(t){e.debug.warn("YouTube API failed to load",t)}))}},getTitle:function(e){var t=this;ku(wu(this.config.urls.youtube.api,e)).then((function(e){if(vs(e)){var n=e.title,r=e.height,i=e.width;t.config.title=n,Fu.setTitle.call(t),t.embed.ratio=yu(i,r)}mu.call(t)})).catch((function(){mu.call(t)}))},ready:function(){var e=this,t=e.config.youtube,n=e.media&&e.media.getAttribute("id");if(js(n)||!n.startsWith("youtube-")){var r=e.media.getAttribute("src");js(r)&&(r=e.media.getAttribute(this.config.attributes.embed.id));var i=function(e){return js(e)?null:e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:e}(r),a=Us("div",{id:bu(e.provider),"data-poster":t.customControls?e.poster:void 0});if(e.media=Qs(a,e.media),t.customControls){var o=function(e){return"https://i.ytimg.com/vi/".concat(i,"/").concat(e,"default.jpg")};Gu(o("maxres"),121).catch((function(){return Gu(o("sd"),121)})).catch((function(){return Gu(o("hq"))})).then((function(t){return Fu.setPoster.call(e,t.src)})).then((function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((function(){}))}e.embed=new window.YT.Player(e.media,{videoId:i,host:ec(t),playerVars:_s({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError:function(t){if(!e.media.error){var n=t.data,r={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[n]||"An unknown error occured";e.media.error={code:n,message:r},au.call(e,e.media,"error")}},onPlaybackRateChange:function(t){var n=t.target;e.media.playbackRate=n.getPlaybackRate(),au.call(e,e.media,"ratechange")},onReady:function(n){if(!xs(e.media.play)){var r=n.target;tc.getTitle.call(e,i),e.media.play=function(){qu.call(e,!0),r.playVideo()},e.media.pause=function(){qu.call(e,!1),r.pauseVideo()},e.media.stop=function(){r.stopVideo()},e.media.duration=r.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(r.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,au.call(e,e.media,"seeking"),r.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return r.getPlaybackRate()},set:function(e){r.setPlaybackRate(e)}});var a=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return a},set:function(t){a=t,r.setVolume(100*a),au.call(e,e.media,"volumechange")}});var o=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return o},set:function(t){var n=Ms(t)?t:o;o=n,r[n?"mute":"unMute"](),r.setVolume(100*a),au.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return r.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}});var s=r.getAvailablePlaybackRates();e.options.speed=s.filter((function(t){return e.config.speed.options.includes(t)})),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),au.call(e,e.media,"timeupdate"),au.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((function(){e.media.buffered=r.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&au.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),au.call(e,e.media,"canplaythrough"))}),200),t.customControls&&setTimeout((function(){return Fu.build.call(e)}),50)}},onStateChange:function(n){var r=n.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(n.data)&&(e.media.seeking=!1,au.call(e,e.media,"seeked")),n.data){case-1:au.call(e,e.media,"timeupdate"),e.media.buffered=r.getVideoLoadedFraction(),au.call(e,e.media,"progress");break;case 0:qu.call(e,!1),e.media.loop?(r.stopVideo(),r.playVideo()):au.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(qu.call(e,!0),au.call(e,e.media,"playing"),e.timers.playing=setInterval((function(){au.call(e,e.media,"timeupdate")}),50),e.media.duration!==r.getDuration()&&(e.media.duration=r.getDuration(),au.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),qu.call(e,!1);break;case 3:au.call(e,e.media,"waiting")}au.call(e,e.elements.container,"statechange",!1,{code:n.data})}}})}}},nc={setup:function(){this.media?(Gs(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Gs(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Gs(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=Us("div",{class:this.config.classNames.video}),Ps(this.media,this.elements.wrapper),this.elements.poster=Us("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?vu.setup.call(this):this.isYouTube?tc.setup.call(this):this.isVimeo&&Ku.setup.call(this)):this.debug.warn("No media element found!")}},rc=function(){function e(t){var n=this;P(this,e),Po(this,"load",(function(){n.enabled&&(vs(window.google)&&vs(window.google.ima)?n.ready():Xu(n.player.config.urls.googleIMA.sdk).then((function(){n.ready()})).catch((function(){n.trigger("error",new Error("Google IMA SDK failed to load"))})))})),Po(this,"ready",(function(){var e;n.enabled||((e=n).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),n.startSafetyTimer(12e3,"ready()"),n.managerPromise.then((function(){n.clearSafetyTimer("onAdsManagerLoaded()")})),n.listeners(),n.setupIMA()})),Po(this,"setupIMA",(function(){n.elements.container=Us("div",{class:n.player.config.classNames.ads}),n.player.elements.container.appendChild(n.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(n.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(n.player.config.playsinline),n.elements.displayContainer=new google.ima.AdDisplayContainer(n.elements.container,n.player.media),n.loader=new google.ima.AdsLoader(n.elements.displayContainer),n.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){return n.onAdsManagerLoaded(e)}),!1),n.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return n.onAdError(e)}),!1),n.requestAds()})),Po(this,"requestAds",(function(){var e=n.player.elements.container;try{var t=new google.ima.AdsRequest;t.adTagUrl=n.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!n.player.muted),n.loader.requestAds(t)}catch(t){n.onAdError(t)}})),Po(this,"pollCountdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return clearInterval(n.countdownTimer),void n.elements.container.removeAttribute("data-badge-text");n.countdownTimer=setInterval((function(){var e=Cu(Math.max(n.manager.getRemainingTime(),0)),t="".concat(Du("advertisement",n.player.config)," - ").concat(e);n.elements.container.setAttribute("data-badge-text",t)}),100)})),Po(this,"onAdsManagerLoaded",(function(e){if(n.enabled){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,n.manager=e.getAdsManager(n.player,t),n.cuePoints=n.manager.getCuePoints(),n.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return n.onAdError(e)})),Object.keys(google.ima.AdEvent.Type).forEach((function(e){n.manager.addEventListener(google.ima.AdEvent.Type[e],(function(e){return n.onAdEvent(e)}))})),n.trigger("loaded")}})),Po(this,"addCuePoints",(function(){js(n.cuePoints)||n.cuePoints.forEach((function(e){if(0!==e&&-1!==e&&e<n.player.duration){var t=n.player.elements.progress;if(Ts(t)){var r=100/n.player.duration*e,i=Us("span",{class:n.player.config.classNames.cues});i.style.left="".concat(r.toString(),"%"),t.appendChild(i)}}}))})),Po(this,"onAdEvent",(function(e){var t,r=n.player.elements.container,i=e.getAd(),a=e.getAdData();switch(t=e.type,au.call(n.player,n.player.media,"ads".concat(t.replace(/_/g,"").toLowerCase())),e.type){case google.ima.AdEvent.Type.LOADED:n.trigger("loaded"),n.pollCountdown(!0),i.isLinear()||(i.width=r.offsetWidth,i.height=r.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:n.manager.setVolume(n.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:n.player.ended?n.loadAds():n.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:n.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:n.pollCountdown(),n.resumeContent();break;case google.ima.AdEvent.Type.LOG:a.adError&&n.player.debug.warn("Non-fatal ad error: ".concat(a.adError.getMessage()))}})),Po(this,"onAdError",(function(e){n.cancel(),n.player.debug.warn("Ads error",e)})),Po(this,"listeners",(function(){var e,t=n.player.elements.container;n.player.on("canplay",(function(){n.addCuePoints()})),n.player.on("ended",(function(){n.loader.contentComplete()})),n.player.on("timeupdate",(function(){e=n.player.currentTime})),n.player.on("seeked",(function(){var t=n.player.currentTime;js(n.cuePoints)||n.cuePoints.forEach((function(r,i){e<r&&r<t&&(n.manager.discardAdBreak(),n.cuePoints.splice(i,1))}))})),window.addEventListener("resize",(function(){n.manager&&n.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)}))})),Po(this,"play",(function(){var e=n.player.elements.container;n.managerPromise||n.resumeContent(),n.managerPromise.then((function(){n.manager.setVolume(n.player.volume),n.elements.displayContainer.initialize();try{n.initialized||(n.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),n.manager.start()),n.initialized=!0}catch(e){n.onAdError(e)}})).catch((function(){}))})),Po(this,"resumeContent",(function(){n.elements.container.style.zIndex="",n.playing=!1,uu(n.player.media.play())})),Po(this,"pauseContent",(function(){n.elements.container.style.zIndex=3,n.playing=!0,n.player.media.pause()})),Po(this,"cancel",(function(){n.initialized&&n.resumeContent(),n.trigger("error"),n.loadAds()})),Po(this,"loadAds",(function(){n.managerPromise.then((function(){n.manager&&n.manager.destroy(),n.managerPromise=new Promise((function(e){n.on("loaded",e),n.player.debug.log(n.manager)})),n.initialized=!1,n.requestAds()})).catch((function(){}))})),Po(this,"trigger",(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var a=n.events[e];Is(a)&&a.forEach((function(e){xs(e)&&e.apply(n,r)}))})),Po(this,"on",(function(e,t){return Is(n.events[e])||(n.events[e]=[]),n.events[e].push(t),n})),Po(this,"startSafetyTimer",(function(e,t){n.player.debug.log("Safety timer invoked from: ".concat(t)),n.safetyTimer=setTimeout((function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()")}),e)})),Po(this,"clearSafetyTimer",(function(e){ys(n.safetyTimer)||(n.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(n.safetyTimer),n.safetyTimer=null)})),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(e,t){n.on("loaded",e),n.on("error",t)})),this.load()}return U(e,[{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!js(e.publisherId)||Es(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;return Es(e.tagUrl)?e.tagUrl:"https://go.aniview.com/api/adserver6/vast/?".concat(Lu({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId}))}}]),e}();function ic(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return Math.min(Math.max(e,t),n)}var ac=function(e){var t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(e){var n={};e.split(/\r\n|\n|\r/).forEach((function(e){if(bs(n.startTime)){if(!js(e.trim())&&js(n.text)){var t,r,i=e.trim().split("#xywh=");t=v(i,1),n.text=t[0],i[1]&&(r=v(i[1].split(","),4),n.x=r[0],n.y=r[1],n.w=r[2],n.h=r[3])}}else{var a=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);a&&(n.startTime=60*Number(a[1]||0)*60+60*Number(a[2])+Number(a[3])+Number("0.".concat(a[4])),n.endTime=60*Number(a[6]||0)*60+60*Number(a[7])+Number(a[8])+Number("0.".concat(a[9])))}})),n.text&&t.push(n)})),t},oc=function(e,t){var n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n},sc=function(){function e(t){var n=this;P(this,e),Po(this,"load",(function(){n.player.elements.display.seekTooltip&&(n.player.elements.display.seekTooltip.hidden=n.enabled),n.enabled&&n.getThumbnails().then((function(){n.enabled&&(n.render(),n.determineContainerAutoSizing(),n.loaded=!0)}))})),Po(this,"getThumbnails",(function(){return new Promise((function(e){var t=n.player.config.previewThumbnails.src;if(js(t))throw new Error("Missing previewThumbnails.src config attribute");var r=function(){n.thumbnails.sort((function(e,t){return e.height-t.height})),n.player.debug.log("Preview thumbnails",n.thumbnails),e()};if(xs(t))t((function(e){n.thumbnails=e,r()}));else{var i=(ws(t)?[t]:t).map((function(e){return n.getThumbnail(e)}));Promise.all(i).then(r)}}))})),Po(this,"getThumbnail",(function(e){return new Promise((function(t){ku(e).then((function(r){var i={frames:ac(r),height:null,urlPrefix:""};i.frames[0].text.startsWith("/")||i.frames[0].text.startsWith("http://")||i.frames[0].text.startsWith("https://")||(i.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var a=new Image;a.onload=function(){i.height=a.naturalHeight,i.width=a.naturalWidth,n.thumbnails.push(i),t()},a.src=i.urlPrefix+i.frames[0].text}))}))})),Po(this,"startMove",(function(e){if(n.loaded&&Ds(e)&&["touchmove","mousemove"].includes(e.type)&&n.player.media.duration){if("touchmove"===e.type)n.seekTime=n.player.media.duration*(n.player.elements.inputs.seek.value/100);else{var t,r,i=n.player.elements.progress.getBoundingClientRect(),a=100/i.width*(e.pageX-i.left);n.seekTime=n.player.media.duration*(a/100),n.seekTime<0&&(n.seekTime=0),n.seekTime>n.player.media.duration-1&&(n.seekTime=n.player.media.duration-1),n.mousePosX=e.pageX,n.elements.thumb.time.innerText=Cu(n.seekTime);var o=null===(t=n.player.config.markers)||void 0===t||null===(r=t.points)||void 0===r?void 0:r.find((function(e){return e.time===Math.round(n.seekTime)}));o&&n.elements.thumb.time.insertAdjacentHTML("afterbegin","".concat(o.label,"<br>"))}n.showImageAtCurrentTime()}})),Po(this,"endMove",(function(){n.toggleThumbContainer(!1,!0)})),Po(this,"startScrubbing",(function(e){(ys(e.button)||!1===e.button||0===e.button)&&(n.mouseDown=!0,n.player.media.duration&&(n.toggleScrubbingContainer(!0),n.toggleThumbContainer(!1,!0),n.showImageAtCurrentTime()))})),Po(this,"endScrubbing",(function(){n.mouseDown=!1,Math.ceil(n.lastTime)===Math.ceil(n.player.media.currentTime)?n.toggleScrubbingContainer(!1):iu.call(n.player,n.player.media,"timeupdate",(function(){n.mouseDown||n.toggleScrubbingContainer(!1)}))})),Po(this,"listeners",(function(){n.player.on("play",(function(){n.toggleThumbContainer(!1,!0)})),n.player.on("seeked",(function(){n.toggleThumbContainer(!1)})),n.player.on("timeupdate",(function(){n.lastTime=n.player.media.currentTime}))})),Po(this,"render",(function(){n.elements.thumb.container=Us("div",{class:n.player.config.classNames.previewThumbnails.thumbContainer}),n.elements.thumb.imageContainer=Us("div",{class:n.player.config.classNames.previewThumbnails.imageContainer}),n.elements.thumb.container.appendChild(n.elements.thumb.imageContainer);var e=Us("div",{class:n.player.config.classNames.previewThumbnails.timeContainer});n.elements.thumb.time=Us("span",{},"00:00"),e.appendChild(n.elements.thumb.time),n.elements.thumb.imageContainer.appendChild(e),Ts(n.player.elements.progress)&&n.player.elements.progress.appendChild(n.elements.thumb.container),n.elements.scrubbing.container=Us("div",{class:n.player.config.classNames.previewThumbnails.scrubbingContainer}),n.player.elements.wrapper.appendChild(n.elements.scrubbing.container)})),Po(this,"destroy",(function(){n.elements.thumb.container&&n.elements.thumb.container.remove(),n.elements.scrubbing.container&&n.elements.scrubbing.container.remove()})),Po(this,"showImageAtCurrentTime",(function(){n.mouseDown?n.setScrubbingContainerSize():n.setThumbContainerSizeAndPos();var e=n.thumbnails[0].frames.findIndex((function(e){return n.seekTime>=e.startTime&&n.seekTime<=e.endTime})),t=e>=0,r=0;n.mouseDown||n.toggleThumbContainer(t),t&&(n.thumbnails.forEach((function(t,i){n.loadedImages.includes(t.frames[e].text)&&(r=i)})),e!==n.showingThumb&&(n.showingThumb=e,n.loadImage(r)))})),Po(this,"loadImage",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=n.showingThumb,r=n.thumbnails[e],i=r.urlPrefix,a=r.frames[t],o=r.frames[t].text,s=i+o;if(n.currentImageElement&&n.currentImageElement.dataset.filename===o)n.showImage(n.currentImageElement,a,e,t,o,!1),n.currentImageElement.dataset.index=t,n.removeOldImages(n.currentImageElement);else{n.loadingImage&&n.usingSprites&&(n.loadingImage.onload=null);var u=new Image;u.src=s,u.dataset.index=t,u.dataset.filename=o,n.showingThumbFilename=o,n.player.debug.log("Loading image: ".concat(s)),u.onload=function(){return n.showImage(u,a,e,t,o,!0)},n.loadingImage=u,n.removeOldImages(u)}})),Po(this,"showImage",(function(e,t,r,i,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];n.player.debug.log("Showing thumb: ".concat(a,". num: ").concat(i,". qual: ").concat(r,". newimg: ").concat(o)),n.setImageSizeAndOffset(e,t),o&&(n.currentImageContainer.appendChild(e),n.currentImageElement=e,n.loadedImages.includes(a)||n.loadedImages.push(a)),n.preloadNearby(i,!0).then(n.preloadNearby(i,!1)).then(n.getHigherQuality(r,e,t,a))})),Po(this,"removeOldImages",(function(e){Array.from(n.currentImageContainer.children).forEach((function(t){if("img"===t.tagName.toLowerCase()){var r=n.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;var i=n.currentImageContainer;setTimeout((function(){i.removeChild(t),n.player.debug.log("Removing thumb: ".concat(t.dataset.filename))}),r)}}}))})),Po(this,"preloadNearby",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(r){setTimeout((function(){var i=n.thumbnails[0].frames[e].text;if(n.showingThumbFilename===i){var a;a=t?n.thumbnails[0].frames.slice(e):n.thumbnails[0].frames.slice(0,e).reverse();var o=!1;a.forEach((function(e){var t=e.text;if(t!==i&&!n.loadedImages.includes(t)){o=!0,n.player.debug.log("Preloading thumb filename: ".concat(t));var a=n.thumbnails[0].urlPrefix+t,s=new Image;s.src=a,s.onload=function(){n.player.debug.log("Preloaded thumb filename: ".concat(t)),n.loadedImages.includes(t)||n.loadedImages.push(t),r()}}})),o||r()}}),300)}))})),Po(this,"getHigherQuality",(function(e,t,r,i){if(e<n.thumbnails.length-1){var a=t.naturalHeight;n.usingSprites&&(a=r.h),a<n.thumbContainerHeight&&setTimeout((function(){n.showingThumbFilename===i&&(n.player.debug.log("Showing higher quality thumb for: ".concat(i)),n.loadImage(e+1))}),300)}})),Po(this,"toggleThumbContainer",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n.player.config.classNames.previewThumbnails.thumbContainerShown;n.elements.thumb.container.classList.toggle(r,e),!e&&t&&(n.showingThumb=null,n.showingThumbFilename=null)})),Po(this,"toggleScrubbingContainer",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.player.config.classNames.previewThumbnails.scrubbingContainerShown;n.elements.scrubbing.container.classList.toggle(t,e),e||(n.showingThumb=null,n.showingThumbFilename=null)})),Po(this,"determineContainerAutoSizing",(function(){(n.elements.thumb.imageContainer.clientHeight>20||n.elements.thumb.imageContainer.clientWidth>20)&&(n.sizeSpecifiedInCSS=!0)})),Po(this,"setThumbContainerSizeAndPos",(function(){var e=n.elements.thumb.imageContainer;if(n.sizeSpecifiedInCSS){if(e.clientHeight>20&&e.clientWidth<20){var t=Math.floor(e.clientHeight*n.thumbAspectRatio);e.style.width="".concat(t,"px")}else if(e.clientHeight<20&&e.clientWidth>20){var r=Math.floor(e.clientWidth/n.thumbAspectRatio);e.style.height="".concat(r,"px")}}else{var i=Math.floor(n.thumbContainerHeight*n.thumbAspectRatio);e.style.height="".concat(n.thumbContainerHeight,"px"),e.style.width="".concat(i,"px")}n.setThumbContainerPos()})),Po(this,"setThumbContainerPos",(function(){var e=n.player.elements.progress.getBoundingClientRect(),t=n.player.elements.container.getBoundingClientRect(),r=n.elements.thumb.container,i=t.left-e.left+10,a=t.right-e.left-r.clientWidth-10,o=n.mousePosX-e.left-r.clientWidth/2,s=ic(o,i,a);r.style.left="".concat(s,"px"),r.style.setProperty("--preview-arrow-offset",o-s+"px")})),Po(this,"setScrubbingContainerSize",(function(){var e=oc(n.thumbAspectRatio,{width:n.player.media.clientWidth,height:n.player.media.clientHeight}),t=e.width,r=e.height;n.elements.scrubbing.container.style.width="".concat(t,"px"),n.elements.scrubbing.container.style.height="".concat(r,"px")})),Po(this,"setImageSizeAndOffset",(function(e,t){if(n.usingSprites){var r=n.thumbContainerHeight/t.h;e.style.height=e.naturalHeight*r+"px",e.style.width=e.naturalWidth*r+"px",e.style.left="-".concat(t.x*r,"px"),e.style.top="-".concat(t.y*r,"px")}})),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return U(e,[{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?oc(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),e}(),uc={insertElements:function(e,t){var n=this;ws(t)?Bs(e,this.media,{src:t}):Is(t)&&t.forEach((function(t){Bs(e,n.media,t)}))},change:function(e){var t=this;Ls(e,"sources.length")?(vu.cancelRequests.call(this),this.destroy.call(this,(function(){t.options.quality=[],Vs(t.media),t.media=null,Ts(t.elements.container)&&t.elements.container.removeAttribute("class");var n=e.sources,r=e.type,i=v(n,1)[0],a=i.provider,o=void 0===a?Bu.html5:a,s=i.src,u="html5"===o?r:"div",c="html5"===o?{}:{src:s};Object.assign(t,{provider:o,type:r,supported:qs.check(r,o,t.config.playsinline),media:Us(u,c)}),t.elements.container.appendChild(t.media),Ms(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),js(e.poster)||(t.poster=e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.playsinline&&t.media.setAttribute("playsinline","")),Fu.addStyleHook.call(t),t.isHTML5&&uc.insertElements.call(t,"source",n),t.config.title=e.title,nc.setup.call(t),t.isHTML5&&Object.keys(e).includes("tracks")&&uc.insertElements.call(t,"track",e.tracks),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&Fu.build.call(t),t.isHTML5&&t.media.load(),js(e.previewThumbnails)||(Object.assign(t.config.previewThumbnails,e.previewThumbnails),t.previewThumbnails&&t.previewThumbnails.loaded&&(t.previewThumbnails.destroy(),t.previewThumbnails=null),t.config.previewThumbnails.enabled&&(t.previewThumbnails=new sc(t))),t.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}},cc=function(){function e(t,n){var r=this;if(P(this,e),Po(this,"play",(function(){return xs(r.media.play)?(r.ads&&r.ads.enabled&&r.ads.managerPromise.then((function(){return r.ads.play()})).catch((function(){return uu(r.media.play())})),r.media.play()):null})),Po(this,"pause",(function(){return r.playing&&xs(r.media.pause)?r.media.pause():null})),Po(this,"togglePlay",(function(e){return(Ms(e)?e:!r.playing)?r.play():r.pause()})),Po(this,"stop",(function(){r.isHTML5?(r.pause(),r.restart()):xs(r.media.stop)&&r.media.stop()})),Po(this,"restart",(function(){r.currentTime=0})),Po(this,"rewind",(function(e){r.currentTime-=bs(e)?e:r.config.seekTime})),Po(this,"forward",(function(e){r.currentTime+=bs(e)?e:r.config.seekTime})),Po(this,"increaseVolume",(function(e){var t=r.media.muted?0:r.volume;r.volume=t+(bs(e)?e:0)})),Po(this,"decreaseVolume",(function(e){r.increaseVolume(-e)})),Po(this,"airplay",(function(){qs.airplay&&r.media.webkitShowPlaybackTargetPicker()})),Po(this,"toggleControls",(function(e){if(r.supported.ui&&!r.isAudio){var t=Fs(r.elements.container,r.config.classNames.hideControls),n=void 0===e?void 0:!e,i=Gs(r.elements.container,r.config.classNames.hideControls,n);if(i&&Is(r.config.controls)&&r.config.controls.includes("settings")&&!js(r.config.settings)&&zu.toggleMenu.call(r,!1),i!==t){var a=i?"controlshidden":"controlsshown";au.call(r,r.media,a)}return!i}return!1})),Po(this,"on",(function(e,t){nu.call(r,r.elements.container,e,t)})),Po(this,"once",(function(e,t){iu.call(r,r.elements.container,e,t)})),Po(this,"off",(function(e,t){ru(r.elements.container,e,t)})),Po(this,"destroy",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.ready){var n=function(){document.body.style.overflow="",r.embed=null,t?(Object.keys(r.elements).length&&(Vs(r.elements.buttons.play),Vs(r.elements.captions),Vs(r.elements.controls),Vs(r.elements.wrapper),r.elements.buttons.play=null,r.elements.captions=null,r.elements.controls=null,r.elements.wrapper=null),xs(e)&&e()):(ou.call(r),vu.cancelRequests.call(r),Qs(r.elements.original,r.elements.container),au.call(r,r.elements.original,"destroyed",!0),xs(e)&&e.call(r.elements.original),r.ready=!1,setTimeout((function(){r.elements=null,r.media=null}),200))};r.stop(),clearTimeout(r.timers.loading),clearTimeout(r.timers.controls),clearTimeout(r.timers.resized),r.isHTML5?(Fu.toggleNativeControls.call(r,!0),n()):r.isYouTube?(clearInterval(r.timers.buffering),clearInterval(r.timers.playing),null!==r.embed&&xs(r.embed.destroy)&&r.embed.destroy(),n()):r.isVimeo&&(null!==r.embed&&r.embed.unload().then(n),setTimeout(n,200))}})),Po(this,"supports",(function(e){return qs.mime.call(r,e)})),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=qs.touch,this.media=t,ws(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||Ns(this.media)||Is(this.media))&&(this.media=this.media[0]),this.config=_s({},Pu,e.defaults,n||{},function(){try{return JSON.parse(r.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Zu(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",qs),!ys(this.media)&&Ts(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(qs.check().api){var i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;var a=this.media.tagName.toLowerCase(),o=null,s=null;switch(a){case"div":if(o=this.media.querySelector("iframe"),Ts(o)){if(s=Ou(o.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Bu.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Bu.vimeo:null}(s.toString()),this.elements.container=this.media,this.media=o,this.elements.container.className="",s.search.length){var u=["1","true"];u.includes(s.searchParams.get("autoplay"))&&(this.config.autoplay=!0),u.includes(s.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=u.includes(s.searchParams.get("playsinline")),this.config.youtube.hl=s.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(js(this.provider)||!Object.values(Bu).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Yu;break;case"video":case"audio":this.type=a,this.provider=Bu.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=qs.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new Hu(this),this.storage=new Au(this),this.media.plyr=this,Ts(this.elements.container)||(this.elements.container=Us("div",{tabindex:0}),Ps(this.media,this.elements.container)),Fu.migrateStyles.call(this),Fu.addStyleHook.call(this),nc.setup.call(this),this.config.debug&&nu.call(this,this.elements.container,this.config.events.join(" "),(function(e){r.debug.log("event: ".concat(e.type))})),this.fullscreen=new Wu(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Fu.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new rc(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(function(){return uu(r.play())})),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new sc(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return U(e,[{key:"toggleCaptions",value:function(e){_u.toggle.call(this,e,!1)}},{key:"setPreviewThumbnails",value:function(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new sc(this))}},{key:"isHTML5",get:function(){return this.provider===Bu.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===Bu.youtube}},{key:"isVimeo",get:function(){return this.provider===Bu.vimeo}},{key:"isVideo",get:function(){return this.type===Yu}},{key:"isAudio",get:function(){return this.type===Vu}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=bs(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return bs(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=bs(t)&&t!==1/0?t:0;return e||n}},{key:"volume",set:function(e){var t=e;ws(t)&&(t=Number(t)),bs(t)||(t=this.storage.get("volume")),bs(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!js(e)&&this.muted&&t>0&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;Ms(t)||(t=this.storage.get("muted")),Ms(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(e){var t=this,n=null;bs(e)&&(n=e),bs(n)||(n=this.storage.get("speed")),bs(n)||(n=this.config.speed.selected);var r=this.minimumSpeed,i=this.maximumSpeed;n=ic(n,r,i),this.config.speed.selected=n,setTimeout((function(){t.media&&(t.media.playbackRate=n)}),0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,b(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,b(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(e){var t=this.config.quality,n=this.options.quality;if(n.length){var r=[!js(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(bs),i=!0;if(!n.includes(r)){var a=lu(n,r);this.debug.warn("Unsupported quality option: ".concat(r,", using ").concat(a," instead")),r=a,i=!1}t.selected=r,this.media.quality=r,i&&this.storage.set({quality:r})}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=Ms(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){uc.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return Es(e)?e:this.source},set:function(e){Es(e)&&(this.config.urls.download=e,zu.setDownloadUrl.call(this))}},{key:"poster",set:function(e){this.isVideo?Fu.setPoster.call(this,e,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=fu(gu.call(this));return Is(e)?e.join(":"):e},set:function(e){this.isVideo?ws(e)&&hu(e)?(this.config.ratio=fu(e),mu.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(e){this.config.autoplay=Ms(e)?e:this.config.autoplay},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){_u.set.call(this,e,!1),_u.setup.call(this)},get:function(){var e=this.captions,t=e.toggled,n=e.currentTrack;return t?n:-1}},{key:"language",set:function(e){_u.setLanguage.call(this,e,!1)},get:function(){return(_u.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(qs.pip){var t=Ms(e)?e:!this.pip;xs(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?Ru:Uu),xs(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}},get:function(){return qs.pip?js(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Ru:null}}],[{key:"supported",value:function(e,t,n){return qs.check(e,t,n)}},{key:"loadSprite",value:function(e,t){return Su(e,t)}},{key:"setup",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;return ws(t)?r=Array.from(document.querySelectorAll(t)):Ns(t)?r=Array.from(t):Is(t)&&(r=t.filter(Ts)),js(r)?null:r.map((function(t){return new e(t,n)}))}}]),e}();function lc(e){var t,n,r;return{c:function(){t=no("video"),Ka((n=no("source")).src,r=e[3])||ao(n,"src",r),ao(n,"type",e[2]),ao(t,"data-app-kind","Plyr"),ao(t,"crossorigin","anonymous"),t.playsInline=!0,ao(t,"data-poster",e[4])},m:function(r,i){eo(r,t,i),qa(t,n),e[8](t)},p:Ga,d:function(n){n&&to(t),e[8](null)}}}function dc(e){var t,n,r;return{c:function(){t=no("audio"),Ka((n=no("source")).src,r=e[3])||ao(n,"src",r),ao(n,"type",e[2]),ao(t,"data-app-kind","Plyr"),ao(t,"crossorigin","anonymous"),ao(t,"data-poster",e[4])},m:function(r,i){eo(r,t,i),qa(t,n),e[7](t)},p:Ga,d:function(n){n&&to(t),e[7](null)}}}function pc(e){var t,n,r,i=JSON.stringify({src:e[3],type:e[0].state.type})+"";return{c:function(){t=no("div"),n=io('Invalid "src" or "type".\n    '),r=io(i),ao(t,"data-app-kind","Plyr"),ao(t,"class","plyr--audio")},m:function(e,i){eo(e,t,i),qa(t,n),qa(t,r)},p:function(e,t){1&t&&i!==(i=JSON.stringify({src:e[3],type:e[0].state.type})+"")&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(r,i)},d:function(e){e&&to(t)}}}function hc(e){var t;return{c:function(){ao(t=no("div"),"data-app-kind","Plyr"),ao(t,"class","plyr__video-embed"),ao(t,"data-plyr-provider","youtube"),ao(t,"data-plyr-embed-id",e[3]),ao(t,"data-poster",e[4])},m:function(n,r){eo(n,t,r),e[6](t)},p:Ga,d:function(n){n&&to(t),e[6](null)}}}function fc(e){var t,n,r,i,a;function o(e,n){return"youtube"===e[0].state.provider?hc:e[2]?(null==t&&(t=!!e[2].startsWith("audio/")),t?dc:lc):pc}var s=o(e),u=s(e);return i=new _o({}),{c:function(){u.c(),n=io(" "),r=no("div"),function(e){e&&e.c()}(i.$$.fragment),function(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}(r,"display","none")},m:function(e,t){u.m(e,t),eo(e,n,t),eo(e,r,t),Io(i,r,null),a=!0},p:function(e,t){var r=v(t,1)[0];s===(s=o(e))&&u?u.p(e,r):(u.d(1),(u=s(e))&&(u.c(),u.m(n.parentNode,n)))},i:function(e){a||(xo(i.$$.fragment,e),a=!0)},o:function(e){(function(e,t,n,r){if(e&&e.o){if(Mo.has(e))return;Mo.add(e),(void 0).c.push((function(){Mo.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()})(i.$$.fragment,e),a=!1},d:function(e){u.d(e),e&&to(n),e&&to(r),No(i)}}}function gc(e,t,n){var r,i,a=t.storage,o=t.sync,s=a.state.provider?void 0:a.state.type||function(e){if(e){var t=e.lastIndexOf(".");if(~t){var n=e.slice(t+1);return ko[n]}}}(a.state.src),u=a.state,c=u.src,l=u.poster,d=So.includes(String(s).toLowerCase());return function(e){uo().$$.on_mount.push(e)}(_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}if(!d||!Oo(r)){e.next=6;break}return e.next=4,Co();case 4:(t=e.sent).loadSource(c),t.attachMedia(r);case 6:i=new cc(r,{fullscreen:{enabled:!1},controls:["play","progress","current-time","mute","volume","pip"],clickToPlay:!1,youtube:{autoplay:!0},loadSprite:!1}),n(5,o.player=i,o);case 7:case"end":return e.stop()}}),e)})))),function(e){uo().$$.on_destroy.push(e)}((function(){try{o.dispose(),null==i||i.destroy()}catch(e){console.warn("[Plyr] destroy plyr error",e)}})),e.$$set=function(e){"storage"in e&&n(0,a=e.storage),"sync"in e&&n(5,o=e.sync)},[a,r,s,c,l,o,function(e){lo[e?"unshift":"push"]((function(){n(1,r=e)}))},function(e){lo[e?"unshift":"push"]((function(){n(1,r=e)}))},function(e){lo[e?"unshift":"push"]((function(){n(1,r=e)}))}]}cc.defaults=function(e){return JSON.parse(JSON.stringify(e))}(Pu);var mc=function(e){x(n,e);var t=I(n);function n(e){var r;return P(this,n),Do(T(r=t.call(this)),e,gc,fc,Ja,{storage:0,sync:5}),r}return n}(Ao),yc=function(){function e(t,n){P(this,e),Wa(this,"behavior","owner"),Wa(this,"uid"),Wa(this,"getTimestamp"),Wa(this,"_skip_next_play_pause",0),Wa(this,"_sync_timer",0),Wa(this,"_interval",1e3),Wa(this,"_blink",0),Wa(this,"_player",null),Wa(this,"_buffering",!1),Wa(this,"_throttle",0),Wa(this,"_dispatch_time_again",!1),Wa(this,"_buffering_timer",0),Wa(this,"_disposer",null),this.context=t,this.storage=n;var r=t.room,i=t.displayer;this.uid=r?r.uid:"",this.getTimestamp=r?function(){return r.calibrationTimestamp}:function(){return i.beginTimestamp+i.progressTime},this._disposer=n.on("stateChanged",this.syncAll.bind(this))}return U(e,[{key:"dispose",value:function(){this._disposer&&this._disposer(),this._disposer=null,clearInterval(this._sync_timer),clearTimeout(this._buffering_timer)}},{key:"setupPlayer",value:function(e){e.toggleControls(this.context.isWritable),this.registerListeners(e),this.watchUserInputs(e),this._sync_timer=setInterval(this.syncAll.bind(this),this._interval)}},{key:"setState",value:function(e){this.context.isWritable&&this.storage.setState(e)}},{key:"syncAll",value:function(){var e=this.behavior,t=this.player,n=this.context,r=this.storage;if(t){var i=r.state,a=i.currentTime,o=i.hostTime,s=i.muted,u=i.paused,c=i.volume,l=i.owner;if("owner"!==e||l!==this.uid||!n.isWritable){var d=u;!d&&n.isReplay&&["pause","ended","stop"].includes(n.displayer.phase)&&(d=!0),d!==t.paused&&!this._skip_next_play_pause&&(d?t.pause():function(e){Eo.apply(this,arguments)}(t)),s!==t.muted&&(t.muted=s),c!==t.volume&&(t.volume=c),!this._buffering&&(u?Math.abs(t.currentTime-a)>.5&&(t.currentTime=a):this.syncCurrentTime(o,a,t))}}}},{key:"watchUserInputs",value:function(e){var t=this,n=e.elements.controls,r=function(e){return Array.isArray(e)?e[0]:e}(e.elements.buttons.play),i=null==n?void 0:n.querySelector('input[data-plyr="seek"]'),a=null==n?void 0:n.querySelector('button[data-plyr="mute"]'),o=null==n?void 0:n.querySelector('input[data-plyr="volume"]');this.fixSeekBarOnInit(i,e),null==r||r.addEventListener("click",(function(){"owner"===t.behavior&&t.dispatchOwner(),t.dispatchPlayPause(e)})),null==i||i.addEventListener("change",(function(){"owner"===t.behavior&&t.dispatchOwner(),t.dispatchSeek(e,i)})),null==a||a.addEventListener("click",(function(){"owner"===t.behavior&&t.dispatchOwner(),t.dispatchVolume(e)})),null==o||o.addEventListener("change",(function(){"owner"===t.behavior&&t.dispatchOwner(),t.dispatchVolume(e)}))}},{key:"fixSeekBarOnInit",value:function(e,t){var n=this.storage.state.currentTime;if(t.duration&&n&&e){var r=100*n/t.duration;e.value=r.toFixed(2)}}},{key:"registerListeners",value:function(e){var t=this;e.on("ended",(function(){e.stop(),t.setState({paused:!0,currentTime:0})})),e.on("waiting",(function(){t._buffering=!0,t._buffering_timer=setTimeout(t.clearBuffering.bind(t),t._interval/2)})),e.on("playing",(function(){t._buffering=!1})),e.on("timeupdate",(function(){t.isOwner()&&t.dispatchCurrentTime(e)})),e.on("volumechange",(function(){t.isOwner()&&t.dispatchVolume(e)})),e.on("play",(function(){t.isOwner()&&t.dispatchPlayPause(e)})),e.on("pause",(function(){t.isOwner()&&t.dispatchPlayPause(e)}))}},{key:"clearBuffering",value:function(){this._buffering=!1,this._buffering_timer=0}},{key:"dispatchOwner",value:function(){this.storage.state.owner!==this.uid&&this.setState({owner:this.uid})}},{key:"dispatchPlayPause",value:function(e){this.setState({hostTime:this.getTimestamp(),currentTime:e.currentTime,paused:e.paused}),clearTimeout(this._skip_next_play_pause),this._skip_next_play_pause=setTimeout(this.skipNextPlayPause.bind(this),500)}},{key:"skipNextPlayPause",value:function(){this._skip_next_play_pause=0}},{key:"dispatchVolume",value:function(e){this.setState({muted:e.muted,volume:e.volume})}},{key:"dispatchSeek",value:function(e,t){var n=t.valueAsNumber*e.duration/100;this.setState({hostTime:this.getTimestamp(),currentTime:n})}},{key:"dispatchCurrentTime",value:function(e){this._throttle?this._dispatch_time_again=!0:(this.setState({hostTime:this.getTimestamp(),currentTime:e.currentTime}),this._throttle=setTimeout(this.clearThrottle.bind(this,e),1e3))}},{key:"clearThrottle",value:function(e){this._throttle=0,this._dispatch_time_again&&(this._dispatch_time_again=!1,this.dispatchCurrentTime(e))}},{key:"isOwner",value:function(){return"owner"===this.behavior&&this.storage.state.owner===this.uid}},{key:"syncCurrentTime",value:function(e,t,n){var r=this.getTimestamp();if(r&&e){var i=t+(r-e)/1e3;Math.abs(i-n.currentTime)>1?(n.currentTime=i,this._blink++,this._blink>3&&this.updateSyncInterval(!0)):this.updateSyncInterval(!1)}}},{key:"updateSyncInterval",value:function(e){this._blink=0,this._interval=function(e,t,n){return e<t?t:e>n?n:e}(this._interval+(e?2e3:-2e3),1e3,15e3),clearTimeout(this._sync_timer),this._sync_timer=setInterval(this.syncAll.bind(this),this._interval)}},{key:"player",get:function(){return this._player},set:function(e){this._player=e,e&&e.once("ready",this.setupPlayer.bind(this,e))}}]),e}(),vc={volume:1,paused:!0,muted:!1,currentTime:0},bc={kind:"Plyr",config:{minwidth:300,minheight:80},setup:function(e){var t=e.createStorage("player",C(C({},vc),e.attributes));if(t.state.src){!t.state.type&&!t.state.provider&&console.warn('[Plyr]: missing "type", will guess from file extension');var n=e.box,r=document.createElement("div");r.className="netless-app-plyr-container",n.mountStyles('@charset "UTF-8";@keyframes plyr-progress{to{background-position:25px 0;background-position:var(--plyr-progress-loading-size,25px) 0}}@keyframes plyr-popup{0%{opacity:.5;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes plyr-fade-in{0%{opacity:0}to{opacity:1}}.plyr{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;align-items:center;direction:ltr;display:flex;flex-direction:column;font-family:inherit;font-family:var(--plyr-font-family,inherit);font-variant-numeric:tabular-nums;font-weight:400;font-weight:var(--plyr-font-weight-regular,400);line-height:1.7;line-height:var(--plyr-line-height,1.7);max-width:100%;min-width:200px;position:relative;text-shadow:none;transition:box-shadow .3s ease;z-index:0}.plyr audio,.plyr iframe,.plyr video{display:block;height:100%;width:100%}.plyr button{font:inherit;line-height:inherit;width:auto}.plyr:focus{outline:0}.plyr--full-ui{box-sizing:border-box}.plyr--full-ui *,.plyr--full-ui :after,.plyr--full-ui :before{box-sizing:inherit}.plyr--full-ui a,.plyr--full-ui button,.plyr--full-ui input,.plyr--full-ui label{touch-action:manipulation}.plyr__badge{background:#4a5464;background:var(--plyr-badge-background,#4a5464);border-radius:2px;border-radius:var(--plyr-badge-border-radius,2px);color:#fff;color:var(--plyr-badge-text-color,#fff);font-size:9px;font-size:var(--plyr-font-size-badge,9px);line-height:1;padding:3px 4px}.plyr--full-ui ::-webkit-media-text-track-container{display:none}.plyr__captions{animation:plyr-fade-in .3s ease;bottom:0;display:none;font-size:13px;font-size:var(--plyr-font-size-small,13px);left:0;padding:10px;padding:var(--plyr-control-spacing,10px);position:absolute;text-align:center;transition:transform .4s ease-in-out;width:100%}.plyr__captions span:empty{display:none}@media (min-width:480px){.plyr__captions{font-size:15px;font-size:var(--plyr-font-size-base,15px);padding:20px;padding:calc(var(--plyr-control-spacing, 10px)*2)}}@media (min-width:768px){.plyr__captions{font-size:18px;font-size:var(--plyr-font-size-large,18px)}}.plyr--captions-active .plyr__captions{display:block}.plyr:not(.plyr--hide-controls) .plyr__controls:not(:empty)~.plyr__captions{transform:translateY(-40px);transform:translateY(calc(var(--plyr-control-spacing, 10px)*-4))}.plyr__caption{background:rgba(0,0,0,.8);background:var(--plyr-captions-background,rgba(0,0,0,.8));border-radius:2px;-webkit-box-decoration-break:clone;box-decoration-break:clone;color:#fff;color:var(--plyr-captions-text-color,#fff);line-height:185%;padding:.2em .5em;white-space:pre-wrap}.plyr__caption div{display:inline}.plyr__control{background:transparent;border:0;border-radius:3px;border-radius:var(--plyr-control-radius,3px);color:inherit;cursor:pointer;flex-shrink:0;overflow:visible;padding:7px;padding:calc(var(--plyr-control-spacing, 10px)*.7);position:relative;transition:all .3s ease}.plyr__control svg{fill:currentColor;display:block;height:18px;height:var(--plyr-control-icon-size,18px);pointer-events:none;width:18px;width:var(--plyr-control-icon-size,18px)}.plyr__control:focus{outline:0}.plyr__control.plyr__tab-focus{outline:3px dotted #00b2ff;outline:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b2ff))) dotted 3px;outline-offset:2px}a.plyr__control{text-decoration:none}.plyr__control.plyr__control--pressed .icon--not-pressed,.plyr__control.plyr__control--pressed .label--not-pressed,.plyr__control:not(.plyr__control--pressed) .icon--pressed,.plyr__control:not(.plyr__control--pressed) .label--pressed,a.plyr__control:after,a.plyr__control:before{display:none}.plyr--full-ui ::-webkit-media-controls{display:none}.plyr__controls{align-items:center;display:flex;justify-content:flex-end;text-align:center}.plyr__controls .plyr__progress__container{flex:1;min-width:0}.plyr__controls .plyr__controls__item{margin-left:2.5px;margin-left:calc(var(--plyr-control-spacing, 10px)/4)}.plyr__controls .plyr__controls__item:first-child{margin-left:0;margin-right:auto}.plyr__controls .plyr__controls__item.plyr__progress__container{padding-left:2.5px;padding-left:calc(var(--plyr-control-spacing, 10px)/4)}.plyr__controls .plyr__controls__item.plyr__time{padding:0 5px;padding:0 calc(var(--plyr-control-spacing, 10px)/2)}.plyr__controls .plyr__controls__item.plyr__progress__container:first-child,.plyr__controls .plyr__controls__item.plyr__time+.plyr__time,.plyr__controls .plyr__controls__item.plyr__time:first-child{padding-left:0}.plyr [data-plyr=airplay],.plyr [data-plyr=captions],.plyr [data-plyr=fullscreen],.plyr [data-plyr=pip],.plyr__controls:empty{display:none}.plyr--airplay-supported [data-plyr=airplay],.plyr--captions-enabled [data-plyr=captions],.plyr--fullscreen-enabled [data-plyr=fullscreen],.plyr--pip-supported [data-plyr=pip]{display:inline-block}.plyr__menu{display:flex;position:relative}.plyr__menu .plyr__control svg{transition:transform .3s ease}.plyr__menu .plyr__control[aria-expanded=true] svg{transform:rotate(90deg)}.plyr__menu .plyr__control[aria-expanded=true] .plyr__tooltip{display:none}.plyr__menu__container{animation:plyr-popup .2s ease;background:hsla(0,0%,100%,.9);background:var(--plyr-menu-background,hsla(0,0%,100%,.9));border-radius:4px;bottom:100%;box-shadow:0 1px 2px #00000026;box-shadow:var(--plyr-menu-shadow,0 1px 2px rgba(0,0,0,.15));color:#4a5464;color:var(--plyr-menu-color,#4a5464);font-size:15px;font-size:var(--plyr-font-size-base,15px);margin-bottom:10px;position:absolute;right:-3px;text-align:left;white-space:nowrap;z-index:3}.plyr__menu__container>div{overflow:hidden;transition:height .35s cubic-bezier(.4,0,.2,1),width .35s cubic-bezier(.4,0,.2,1)}.plyr__menu__container:after{border:4px solid transparent;border-top-color:#ffffffe6;border:var(--plyr-menu-arrow-size,4px) solid transparent;border-top-color:var(--plyr-menu-background,hsla(0,0%,100%,.9));content:"";height:0;position:absolute;right:14px;right:calc(var(--plyr-control-icon-size, 18px)/2 + var(--plyr-control-spacing, 10px)*.7 - var(--plyr-menu-arrow-size, 4px)/2);top:100%;width:0}.plyr__menu__container [role=menu]{padding:7px;padding:calc(var(--plyr-control-spacing, 10px)*.7)}.plyr__menu__container [role=menuitem],.plyr__menu__container [role=menuitemradio]{margin-top:2px}.plyr__menu__container [role=menuitem]:first-child,.plyr__menu__container [role=menuitemradio]:first-child{margin-top:0}.plyr__menu__container .plyr__control{align-items:center;color:#4a5464;color:var(--plyr-menu-color,#4a5464);display:flex;font-size:13px;font-size:var(--plyr-font-size-menu,var(--plyr-font-size-small,13px));padding:4.66667px 10.5px;padding:calc(var(--plyr-control-spacing, 10px)*.7/1.5) calc(var(--plyr-control-spacing, 10px)*.7*1.5);-webkit-user-select:none;user-select:none;width:100%}.plyr__menu__container .plyr__control>span{align-items:inherit;display:flex;width:100%}.plyr__menu__container .plyr__control:after{border:4px solid transparent;border:var(--plyr-menu-item-arrow-size,4px) solid transparent;content:"";position:absolute;top:50%;transform:translateY(-50%)}.plyr__menu__container .plyr__control--forward{padding-right:28px;padding-right:calc(var(--plyr-control-spacing, 10px)*.7*4)}.plyr__menu__container .plyr__control--forward:after{border-left-color:#728197;border-left-color:var(--plyr-menu-arrow-color,#728197);right:6.5px;right:calc(var(--plyr-control-spacing, 10px)*.7*1.5 - var(--plyr-menu-item-arrow-size, 4px))}.plyr__menu__container .plyr__control--forward.plyr__tab-focus:after,.plyr__menu__container .plyr__control--forward:hover:after{border-left-color:currentColor}.plyr__menu__container .plyr__control--back{font-weight:400;font-weight:var(--plyr-font-weight-regular,400);margin:7px;margin:calc(var(--plyr-control-spacing, 10px)*.7);margin-bottom:3.5px;margin-bottom:calc(var(--plyr-control-spacing, 10px)*.7/2);padding-left:28px;padding-left:calc(var(--plyr-control-spacing, 10px)*.7*4);position:relative;width:calc(100% - 14px);width:calc(100% - var(--plyr-control-spacing, 10px)*.7*2)}.plyr__menu__container .plyr__control--back:after{border-right-color:#728197;border-right-color:var(--plyr-menu-arrow-color,#728197);left:6.5px;left:calc(var(--plyr-control-spacing, 10px)*.7*1.5 - var(--plyr-menu-item-arrow-size, 4px))}.plyr__menu__container .plyr__control--back:before{background:#dcdfe5;background:var(--plyr-menu-back-border-color,#dcdfe5);box-shadow:0 1px #fff;box-shadow:0 1px 0 var(--plyr-menu-back-border-shadow-color,#fff);content:"";height:1px;left:0;margin-top:3.5px;margin-top:calc(var(--plyr-control-spacing, 10px)*.7/2);overflow:hidden;position:absolute;right:0;top:100%}.plyr__menu__container .plyr__control--back.plyr__tab-focus:after,.plyr__menu__container .plyr__control--back:hover:after{border-right-color:currentColor}.plyr__menu__container .plyr__control[role=menuitemradio]{padding-left:7px;padding-left:calc(var(--plyr-control-spacing, 10px)*.7)}.plyr__menu__container .plyr__control[role=menuitemradio]:after,.plyr__menu__container .plyr__control[role=menuitemradio]:before{border-radius:100%}.plyr__menu__container .plyr__control[role=menuitemradio]:before{background:rgba(0,0,0,.1);content:"";display:block;flex-shrink:0;height:16px;margin-right:10px;margin-right:var(--plyr-control-spacing,10px);transition:all .3s ease;width:16px}.plyr__menu__container .plyr__control[role=menuitemradio]:after{background:#fff;border:0;height:6px;left:12px;opacity:0;top:50%;transform:translateY(-50%) scale(0);transition:transform .3s ease,opacity .3s ease;width:6px}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]:before{background:#00b2ff;background:var(--plyr-control-toggle-checked-background,var(--plyr-color-main,var(--plyr-color-main,#00b2ff)))}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]:after{opacity:1;transform:translateY(-50%) scale(1)}.plyr__menu__container .plyr__control[role=menuitemradio].plyr__tab-focus:before,.plyr__menu__container .plyr__control[role=menuitemradio]:hover:before{background:rgba(35,40,47,.1)}.plyr__menu__container .plyr__menu__value{align-items:center;display:flex;margin-left:auto;margin-right:calc(-7px + 2);margin-right:calc(var(--plyr-control-spacing, 10px)*.7*-1 - -2);overflow:hidden;padding-left:24.5px;padding-left:calc(var(--plyr-control-spacing, 10px)*.7*3.5);pointer-events:none}.plyr--full-ui input[type=range]{-webkit-appearance:none;appearance:none;background:transparent;border:0;border-radius:26px;border-radius:calc(var(--plyr-range-thumb-height, 13px)*2);color:#00b2ff;color:var(--plyr-range-fill-background,var(--plyr-color-main,var(--plyr-color-main,#00b2ff)));display:block;height:19px;height:calc(var(--plyr-range-thumb-active-shadow-width, 3px)*2 + var(--plyr-range-thumb-height, 13px));margin:0;min-width:0;padding:0;transition:box-shadow .3s ease;width:100%}.plyr--full-ui input[type=range]::-webkit-slider-runnable-track{background:transparent;background-image:linear-gradient(90deg,currentColor 0,transparent 0);background-image:linear-gradient(to right,currentColor var(--value,0),transparent var(--value,0));border:0;border-radius:2.5px;border-radius:calc(var(--plyr-range-track-height, 5px)/2);height:5px;height:var(--plyr-range-track-height,5px);-webkit-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-webkit-user-select:none;user-select:none}.plyr--full-ui input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px #23282f26,0 0 0 1px #23282f33;box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);margin-top:-4px;margin-top:calc((var(--plyr-range-thumb-height, 13px) - var(--plyr-range-track-height, 5px))/2*-1);position:relative;-webkit-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px)}.plyr--full-ui input[type=range]::-moz-range-track{background:transparent;border:0;border-radius:2.5px;border-radius:calc(var(--plyr-range-track-height, 5px)/2);height:5px;height:var(--plyr-range-track-height,5px);-moz-transition:box-shadow .3s ease;transition:box-shadow .3s ease;user-select:none}.plyr--full-ui input[type=range]::-moz-range-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px #23282f26,0 0 0 1px #23282f33;box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-moz-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px)}.plyr--full-ui input[type=range]::-moz-range-progress{background:currentColor;border-radius:2.5px;border-radius:calc(var(--plyr-range-track-height, 5px)/2);height:5px;height:var(--plyr-range-track-height,5px)}.plyr--full-ui input[type=range]::-ms-track{color:transparent}.plyr--full-ui input[type=range]::-ms-fill-upper,.plyr--full-ui input[type=range]::-ms-track{background:transparent;border:0;border-radius:2.5px;border-radius:calc(var(--plyr-range-track-height, 5px)/2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;user-select:none}.plyr--full-ui input[type=range]::-ms-fill-lower{background:transparent;background:currentColor;border:0;border-radius:2.5px;border-radius:calc(var(--plyr-range-track-height, 5px)/2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;user-select:none}.plyr--full-ui input[type=range]::-ms-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px #23282f26,0 0 0 1px #23282f33;box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);margin-top:0;position:relative;-ms-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px)}.plyr--full-ui input[type=range]::-ms-tooltip{display:none}.plyr--full-ui input[type=range]::-moz-focus-outer{border:0}.plyr--full-ui input[type=range]:focus{outline:0}.plyr--full-ui input[type=range].plyr__tab-focus::-webkit-slider-runnable-track{outline:3px dotted #00b2ff;outline:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b2ff))) dotted 3px;outline-offset:2px}.plyr--full-ui input[type=range].plyr__tab-focus::-moz-range-track{outline:3px dotted #00b2ff;outline:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b2ff))) dotted 3px;outline-offset:2px}.plyr--full-ui input[type=range].plyr__tab-focus::-ms-track{outline:3px dotted #00b2ff;outline:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b2ff))) dotted 3px;outline-offset:2px}.plyr__poster{background-color:#000;background-color:var(--plyr-video-background,var(--plyr-video-background,#000));background-position:50% 50%;background-repeat:no-repeat;background-size:contain;height:100%;left:0;opacity:0;position:absolute;top:0;transition:opacity .2s ease;width:100%;z-index:1}.plyr--stopped.plyr__poster-enabled .plyr__poster{opacity:1}.plyr--youtube.plyr--paused.plyr__poster-enabled:not(.plyr--stopped) .plyr__poster{display:none}.plyr__time{font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px))}.plyr__time+.plyr__time:before{content:"\\2044";margin-right:10px;margin-right:var(--plyr-control-spacing,10px)}@media (max-width:767px){.plyr__time+.plyr__time{display:none}}.plyr__tooltip{background:hsla(0,0%,100%,.9);background:var(--plyr-tooltip-background,hsla(0,0%,100%,.9));border-radius:5px;border-radius:var(--plyr-tooltip-radius,5px);bottom:100%;box-shadow:0 1px 2px #00000026;box-shadow:var(--plyr-tooltip-shadow,0 1px 2px rgba(0,0,0,.15));color:#4a5464;color:var(--plyr-tooltip-color,#4a5464);font-size:13px;font-size:var(--plyr-font-size-small,13px);font-weight:400;font-weight:var(--plyr-font-weight-regular,400);left:50%;line-height:1.3;margin-bottom:10px;margin-bottom:calc(var(--plyr-control-spacing, 10px)/2*2);opacity:0;padding:5px 7.5px;padding:calc(var(--plyr-control-spacing, 10px)/2) calc(var(--plyr-control-spacing, 10px)/2*1.5);pointer-events:none;position:absolute;transform:translate(-50%,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s ease .1s,opacity .2s ease .1s;white-space:nowrap;z-index:2}.plyr__tooltip:before{border-left:4px solid transparent;border-left:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-right:4px solid transparent;border-right:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-top:4px solid hsla(0,0%,100%,.9);border-top:var(--plyr-tooltip-arrow-size,4px) solid var(--plyr-tooltip-background,hsla(0,0%,100%,.9));bottom:-4px;bottom:calc(var(--plyr-tooltip-arrow-size, 4px)*-1);content:"";height:0;left:50%;position:absolute;transform:translate(-50%);width:0;z-index:2}.plyr .plyr__control.plyr__tab-focus .plyr__tooltip,.plyr .plyr__control:hover .plyr__tooltip,.plyr__tooltip--visible{opacity:1;transform:translate(-50%) scale(1)}.plyr .plyr__control:hover .plyr__tooltip{z-index:3}.plyr__controls>.plyr__control:first-child .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip{left:0;transform:translateY(10px) scale(.8);transform-origin:0 100%}.plyr__controls>.plyr__control:first-child .plyr__tooltip:before,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip:before{left:16px;left:calc(var(--plyr-control-icon-size, 18px)/2 + var(--plyr-control-spacing, 10px)*.7)}.plyr__controls>.plyr__control:last-child .plyr__tooltip{left:auto;right:0;transform:translateY(10px) scale(.8);transform-origin:100% 100%}.plyr__controls>.plyr__control:last-child .plyr__tooltip:before{left:auto;right:16px;right:calc(var(--plyr-control-icon-size, 18px)/2 + var(--plyr-control-spacing, 10px)*.7);transform:translate(50%)}.plyr__controls>.plyr__control:first-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control:hover .plyr__tooltip,.plyr__controls>.plyr__control:first-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child:hover .plyr__tooltip,.plyr__controls>.plyr__control:last-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:last-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:last-child:hover .plyr__tooltip{transform:translate(0) scale(1)}.plyr__progress{left:6.5px;left:calc(var(--plyr-range-thumb-height, 13px)*.5);margin-right:13px;margin-right:var(--plyr-range-thumb-height,13px);position:relative}.plyr__progress input[type=range],.plyr__progress__buffer{margin-left:-6.5px;margin-left:calc(var(--plyr-range-thumb-height, 13px)*-.5);margin-right:-6.5px;margin-right:calc(var(--plyr-range-thumb-height, 13px)*-.5);width:calc(100% + 13px);width:calc(100% + var(--plyr-range-thumb-height, 13px))}.plyr__progress input[type=range]{position:relative;z-index:2}.plyr__progress .plyr__tooltip{left:0;max-width:120px;overflow-wrap:break-word;white-space:normal}.plyr__progress__buffer{-webkit-appearance:none;background:transparent;border:0;border-radius:100px;height:5px;height:var(--plyr-range-track-height,5px);left:0;margin-top:-2.5px;margin-top:calc((var(--plyr-range-track-height, 5px)/2)*-1);padding:0;position:absolute;top:50%}.plyr__progress__buffer::-webkit-progress-bar{background:transparent}.plyr__progress__buffer::-webkit-progress-value{background:currentColor;border-radius:100px;min-width:5px;min-width:var(--plyr-range-track-height,5px);-webkit-transition:width .2s ease;transition:width .2s ease}.plyr__progress__buffer::-moz-progress-bar{background:currentColor;border-radius:100px;min-width:5px;min-width:var(--plyr-range-track-height,5px);-moz-transition:width .2s ease;transition:width .2s ease}.plyr__progress__buffer::-ms-fill{border-radius:100px;-ms-transition:width .2s ease;transition:width .2s ease}.plyr--loading .plyr__progress__buffer{animation:plyr-progress 1s linear infinite;background-image:linear-gradient(-45deg,rgba(35,40,47,.6) 25%,transparent 0,transparent 50%,rgba(35,40,47,.6) 0,rgba(35,40,47,.6) 75%,transparent 0,transparent);background-image:linear-gradient(-45deg,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 25%,transparent 25%,transparent 50%,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 50%,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 75%,transparent 75%,transparent);background-repeat:repeat-x;background-size:25px 25px;background-size:var(--plyr-progress-loading-size,25px) var(--plyr-progress-loading-size,25px);color:transparent}.plyr--video.plyr--loading .plyr__progress__buffer{background-color:#ffffff40;background-color:var(--plyr-video-progress-buffered-background,hsla(0,0%,100%,.25))}.plyr--audio.plyr--loading .plyr__progress__buffer{background-color:#c1c8d199;background-color:var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6))}.plyr__progress__marker{background-color:#fff;background-color:var(--plyr-progress-marker-background,#fff);border-radius:1px;height:5px;height:var(--plyr-range-track-height,5px);position:absolute;top:50%;transform:translate(-50%,-50%);width:3px;width:var(--plyr-progress-marker-width,3px);z-index:3}.plyr__volume{align-items:center;display:flex;max-width:110px;min-width:80px;position:relative;width:20%}.plyr__volume input[type=range]{margin-left:5px;margin-left:calc(var(--plyr-control-spacing, 10px)/2);margin-right:5px;margin-right:calc(var(--plyr-control-spacing, 10px)/2);position:relative;z-index:2}.plyr--is-ios .plyr__volume{min-width:0;width:auto}.plyr--audio{display:block}.plyr--audio .plyr__controls{background:#fff;background:var(--plyr-audio-controls-background,#fff);border-radius:inherit;color:#4a5464;color:var(--plyr-audio-control-color,#4a5464);padding:10px;padding:var(--plyr-control-spacing,10px)}.plyr--audio .plyr__control.plyr__tab-focus,.plyr--audio .plyr__control:hover,.plyr--audio .plyr__control[aria-expanded=true]{background:#00b2ff;background:var(--plyr-audio-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b2ff)));color:#fff;color:var(--plyr-audio-control-color-hover,#fff)}.plyr--full-ui.plyr--audio input[type=range]::-webkit-slider-runnable-track{background-color:#c1c8d199;background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]::-moz-range-track{background-color:#c1c8d199;background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]::-ms-track{background-color:#c1c8d199;background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px #23282f26,0 0 0 1px #23282f33,0 0 0 3px #23282f1a;box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--full-ui.plyr--audio input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px #23282f26,0 0 0 1px #23282f33,0 0 0 3px #23282f1a;box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--full-ui.plyr--audio input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px #23282f26,0 0 0 1px #23282f33,0 0 0 3px #23282f1a;box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--audio .plyr__progress__buffer{color:#c1c8d199;color:var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6))}.plyr--video{background:#000;background:var(--plyr-video-background,var(--plyr-video-background,#000));overflow:hidden}.plyr--video.plyr--menu-open{overflow:visible}.plyr__video-wrapper{background:#000;background:var(--plyr-video-background,var(--plyr-video-background,#000));height:100%;margin:auto;overflow:hidden;position:relative;width:100%}.plyr__video-embed,.plyr__video-wrapper--fixed-ratio{aspect-ratio:16/9}@supports not (aspect-ratio:16/9){.plyr__video-embed,.plyr__video-wrapper--fixed-ratio{height:0;padding-bottom:56.25%;position:relative}}.plyr__video-embed iframe,.plyr__video-wrapper--fixed-ratio video{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.plyr--full-ui .plyr__video-embed>.plyr__video-embed__container{padding-bottom:240%;position:relative;transform:translateY(-38.28125%)}.plyr--video .plyr__controls{background:linear-gradient(transparent,rgba(0,0,0,.75));background:var(--plyr-video-controls-background,linear-gradient(transparent,rgba(0,0,0,.75)));border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;bottom:0;color:#fff;color:var(--plyr-video-control-color,#fff);left:0;padding:5px;padding:calc(var(--plyr-control-spacing, 10px)/2);padding-top:20px;padding-top:calc(var(--plyr-control-spacing, 10px)*2);position:absolute;right:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out;z-index:3}@media (min-width:480px){.plyr--video .plyr__controls{padding:10px;padding:var(--plyr-control-spacing,10px);padding-top:35px;padding-top:calc(var(--plyr-control-spacing, 10px)*3.5)}}.plyr--video.plyr--hide-controls .plyr__controls{opacity:0;pointer-events:none;transform:translateY(100%)}.plyr--video .plyr__control.plyr__tab-focus,.plyr--video .plyr__control:hover,.plyr--video .plyr__control[aria-expanded=true]{background:#00b2ff;background:var(--plyr-video-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b2ff)));color:#fff;color:var(--plyr-video-control-color-hover,#fff)}.plyr__control--overlaid{background:#00b2ff;background:var(--plyr-video-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b2ff)));border:0;border-radius:100%;color:#fff;color:var(--plyr-video-control-color,#fff);display:none;left:50%;opacity:.9;padding:15px;padding:calc(var(--plyr-control-spacing, 10px)*1.5);position:absolute;top:50%;transform:translate(-50%,-50%);transition:.3s;z-index:2}.plyr__control--overlaid svg{left:2px;position:relative}.plyr__control--overlaid:focus,.plyr__control--overlaid:hover{opacity:1}.plyr--playing .plyr__control--overlaid{opacity:0;visibility:hidden}.plyr--full-ui.plyr--video .plyr__control--overlaid{display:block}.plyr--full-ui.plyr--video input[type=range]::-webkit-slider-runnable-track{background-color:#ffffff40;background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,hsla(0,0%,100%,.25)))}.plyr--full-ui.plyr--video input[type=range]::-moz-range-track{background-color:#ffffff40;background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,hsla(0,0%,100%,.25)))}.plyr--full-ui.plyr--video input[type=range]::-ms-track{background-color:#ffffff40;background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,hsla(0,0%,100%,.25)))}.plyr--full-ui.plyr--video input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px #23282f26,0 0 0 1px #23282f33,0 0 0 3px #ffffff80;box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,hsla(0,0%,100%,.5))}.plyr--full-ui.plyr--video input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px #23282f26,0 0 0 1px #23282f33,0 0 0 3px #ffffff80;box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,hsla(0,0%,100%,.5))}.plyr--full-ui.plyr--video input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px #23282f26,0 0 0 1px #23282f33,0 0 0 3px #ffffff80;box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,hsla(0,0%,100%,.5))}.plyr--video .plyr__progress__buffer{color:#ffffff40;color:var(--plyr-video-progress-buffered-background,hsla(0,0%,100%,.25))}.plyr:fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:fullscreen video{height:100%}.plyr:fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:fullscreen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr--fullscreen-fallback{background:#000;border-radius:0!important;bottom:0;display:block;height:100%;left:0;margin:0;position:fixed;right:0;top:0;width:100%;z-index:10000000}.plyr--fullscreen-fallback video{height:100%}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen{display:block}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr--fullscreen-fallback.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr--fullscreen-fallback .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr__ads{border-radius:inherit;bottom:0;cursor:pointer;left:0;overflow:hidden;position:absolute;right:0;top:0;z-index:-1}.plyr__ads>div,.plyr__ads>div iframe{height:100%;position:absolute;width:100%}.plyr__ads:after{background:#23282f;border-radius:2px;bottom:10px;bottom:var(--plyr-control-spacing,10px);color:#fff;content:attr(data-badge-text);font-size:11px;padding:2px 6px;pointer-events:none;position:absolute;right:10px;right:var(--plyr-control-spacing,10px);z-index:3}.plyr__ads:empty:after{display:none}.plyr__cues{background:currentColor;display:block;height:5px;height:var(--plyr-range-track-height,5px);left:0;opacity:.8;position:absolute;top:50%;transform:translateY(-50%);width:3px;z-index:3}.plyr__preview-thumb{background-color:#ffffffe6;background-color:var(--plyr-tooltip-background,hsla(0,0%,100%,.9));border-radius:5px;border-radius:var(--plyr-tooltip-radius,5px);bottom:100%;box-shadow:0 1px 2px #00000026;box-shadow:var(--plyr-tooltip-shadow,0 1px 2px rgba(0,0,0,.15));margin-bottom:10px;margin-bottom:calc(var(--plyr-control-spacing, 10px)/2*2);opacity:0;padding:3px;pointer-events:none;position:absolute;transform:translateY(10px) scale(.8);transform-origin:50% 100%;transition:transform .2s ease .1s,opacity .2s ease .1s;z-index:2}.plyr__preview-thumb--is-shown{opacity:1;transform:translate(0) scale(1)}.plyr__preview-thumb:before{border-left:4px solid transparent;border-left:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-right:4px solid transparent;border-right:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-top:4px solid hsla(0,0%,100%,.9);border-top:var(--plyr-tooltip-arrow-size,4px) solid var(--plyr-tooltip-background,hsla(0,0%,100%,.9));bottom:-4px;bottom:calc(var(--plyr-tooltip-arrow-size, 4px)*-1);content:"";height:0;left:calc(50% + var(--preview-arrow-offset));position:absolute;transform:translate(-50%);width:0;z-index:2}.plyr__preview-thumb__image-container{background:#c1c8d1;border-radius:4px;border-radius:calc(var(--plyr-tooltip-radius, 5px) - 1px);overflow:hidden;position:relative;z-index:0}.plyr__preview-thumb__image-container img,.plyr__preview-thumb__image-container:after{height:100%;left:0;position:absolute;top:0;width:100%}.plyr__preview-thumb__image-container:after{border-radius:inherit;box-shadow:inset 0 0 0 1px #00000026;content:"";pointer-events:none}.plyr__preview-thumb__image-container img{max-height:none;max-width:none}.plyr__preview-thumb__time-container{background:linear-gradient(transparent,rgba(0,0,0,.75));background:var(--plyr-video-controls-background,linear-gradient(transparent,rgba(0,0,0,.75)));border-bottom-left-radius:4px;border-bottom-left-radius:calc(var(--plyr-tooltip-radius, 5px) - 1px);border-bottom-right-radius:4px;border-bottom-right-radius:calc(var(--plyr-tooltip-radius, 5px) - 1px);bottom:0;left:0;line-height:1.1;padding:20px 6px 6px;position:absolute;right:0;z-index:3}.plyr__preview-thumb__time-container span{color:#fff;font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px))}.plyr__preview-scrubbing{bottom:0;filter:blur(1px);height:100%;left:0;margin:auto;opacity:0;overflow:hidden;pointer-events:none;position:absolute;right:0;top:0;transition:opacity .3s ease;width:100%;z-index:1}.plyr__preview-scrubbing--is-shown{opacity:1}.plyr__preview-scrubbing img{height:100%;left:0;max-height:none;max-width:none;-o-object-fit:contain;object-fit:contain;position:absolute;top:0;width:100%}.plyr--no-transition{transition:none!important}.plyr__sr-only{clip:rect(1px,1px,1px,1px);border:0!important;height:1px!important;overflow:hidden;padding:0!important;position:absolute!important;width:1px!important}.plyr [hidden]{display:none!important}.plyr--video{width:100%;height:100%}.plyr--audio{width:100%;height:100%;display:flex;align-items:stretch;justify-content:center;background-color:#fff}.telebox-color-scheme-dark .plyr--audio{color-scheme:dark;background-color:#121212;--plyr-audio-controls-background: #121212;--plyr-audio-control-color: #eee}.netless-app-plyr-container{width:100%;height:100%}.netless-app-plyr-container.is-readonly{pointer-events:none;cursor:not-allowed}\n'),n.mountContent(r);var i=e.emitter.on("writableChange",(function(){r.classList.toggle("is-readonly",!e.isWritable)})),a=new yc(e,t),o=new mc({target:r,props:{storage:t,sync:a}});e.emitter.on("destroy",(function(){try{i(),a.dispose(),o.$destroy()}catch(e){}}))}else e.emitter.emit("destroy",{error:new Error('[Plyr]: missing "src"')})}},wc={DocsViewer:Va.kind,MediaPlayer:bc.kind};exports.BuiltinApps=wc;var Mc=(z(i={},wc.DocsViewer,Va),z(i,wc.MediaPlayer,bc),i);exports.BuiltinAppsMap=Mc;var xc=new $r({emitter:q});exports.reconnectRefresher=xc;var Ic=function(e){x(b,e);var t,n,r,i,o,c,l,p,h,f,g,m,y,v=I(b);function b(e){var t;return P(this,b),(t=v.call(this,e)).version="1.0.0-canary.72",t.dependencies={dependencies:{"@juggle/resize-observer":"^3.4.0","@netless/synced-store":"^2.0.7","@netless/telebox-insider":"1.0.0-alpha.37",emittery:"^0.11.0",jspdf:"^2.5.1",lodash:"^4.17.21","p-retry":"^5.1.2","side-effect-manager":"^1.2.1",uuid:"^9.0.0","value-enhancer":"^1.3.2"},peerDependencies:{"white-web-sdk":"^2.16.0"},devDependencies:{"@netless/app-docs-viewer":"1.0.0-canary.5","@netless/app-plyr":"^0.2.4","@playwright/test":"^1.28.1","@rollup/plugin-commonjs":"^23.0.4","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-url":"^8.0.1","@sveltejs/vite-plugin-svelte":"^2.0.2","@tsconfig/svelte":"^3.0.0","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.6","@types/node":"^18.0.3","@types/uuid":"^9.0.0","@typescript-eslint/eslint-plugin":"^5.46.1","@typescript-eslint/parser":"^5.46.1","@vitest/ui":"^0.25.7",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^8.29.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^4.0.0",jsdom:"^19.0.0",less:"^4.1.3",prettier:"^2.8.1","prettier-plugin-svelte":"^2.9.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^4.0.0",svelte:"^3.54.0",typescript:"^4.9.4",vite:"^4.0.1","vite-plugin-dts":"^1.7.1",vitest:"^0.25.7","white-web-sdk":"^2.16.40"}},t.emitter=J,t.viewMode$=new d.Val(u.ViewMode.Broadcaster),t.playground$=new d.Val(void 0),t.isReplay=(0,u.isPlayer)(t.displayer),t.containerSizeRatio=b.containerSizeRatio,t.moveCamera=function(e){var n,r,i=(0,s.omit)(e,["animationMode"]),a=C({},t.mainView.camera);(0,s.isEqual)(C(C({},a),i),a)||(null==(n=t.appManager)||n.mainViewProxy.moveCamera(e),null==(r=t.appManager)||r.dispatchInternalEvent(V.MoveCamera,e))},b.displayer=e.displayer,window.NETLESS_DEPS={dependencies:{"@juggle/resize-observer":"^3.4.0","@netless/synced-store":"^2.0.7","@netless/telebox-insider":"1.0.0-alpha.37",emittery:"^0.11.0",jspdf:"^2.5.1",lodash:"^4.17.21","p-retry":"^5.1.2","side-effect-manager":"^1.2.1",uuid:"^9.0.0","value-enhancer":"^1.3.2"},peerDependencies:{"white-web-sdk":"^2.16.0"},devDependencies:{"@netless/app-docs-viewer":"1.0.0-canary.5","@netless/app-plyr":"^0.2.4","@playwright/test":"^1.28.1","@rollup/plugin-commonjs":"^23.0.4","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-url":"^8.0.1","@sveltejs/vite-plugin-svelte":"^2.0.2","@tsconfig/svelte":"^3.0.0","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.6","@types/node":"^18.0.3","@types/uuid":"^9.0.0","@typescript-eslint/eslint-plugin":"^5.46.1","@typescript-eslint/parser":"^5.46.1","@vitest/ui":"^0.25.7",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^8.29.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^4.0.0",jsdom:"^19.0.0",less:"^4.1.3",prettier:"^2.8.1","prettier-plugin-svelte":"^2.9.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^4.0.0",svelte:"^3.54.0",typescript:"^4.9.4",vite:"^4.0.1","vite-plugin-dts":"^1.7.1",vitest:"^0.25.7","white-web-sdk":"^2.16.40"}},t}return U(b,[{key:"bindContainer",value:function(e){var t,n,r,i,a,o;if((0,u.isRoom)(this.displayer)&&this.room.phase!==u.RoomPhase.Connected)throw new _e;if(b.isCreated&&b.container)b.container.firstChild&&e.appendChild(b.container.firstChild);else{var s=null==(t=this.boxManager)?void 0:t.teleBoxManager.$stage;if(b.params&&s){var c=b.params,l=b.initContainer(e,s,c.overwriteStyles);this.boxManager&&b.playground&&this.boxManager.setRoot(b.playground),this.bindMainView(l,c.disableCameraTransform),b.playground&&(null==(n=this.cursorManager)||n.setupWrapper(b.playground),this.playground$.setValue(b.playground))}}q.emit("updateManagerRect"),null==(r=this.appManager)||r.refresh(),null==(i=this.appManager)||i.resetMaximized(),null==(a=this.appManager)||a.resetMinimized(),null==(o=this.appManager)||o.displayerWritableListener(!this.room.isWritable),b.container=e}},{key:"bindCollectorContainer",value:function(e){b.isCreated&&this.boxManager?this.boxManager.setCollector(e):b.params&&(b.params.collectorContainer=e)}},{key:"addApp",value:(y=_(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appManager){e.next=8;break}if(!this.appManager.rootDirRemoving){e.next=5;break}return e.abrupt("return",new Promise((function(e,r){q.once("rootDirRemoved").then(_(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,n._addApp(t);case 3:a=i.sent,e(a),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),r(i.t0.message);case 10:case"end":return i.stop()}}),i,null,[[0,7]])}))))})));case 5:return e.abrupt("return",this._addApp(t));case 6:e.next=9;break;case 8:throw new Ee;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"_addApp",value:(m=_(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appManager){e.next=19;break}if(t.kind&&"string"==typeof t.kind){e.next=3;break}throw new Ce;case 3:return e.next=5,null==(n=fe.appClasses.get(t.kind))?void 0:n();case 5:if(!(a=e.sent)||!(null==(r=a.config)?void 0:r.singleton)){e.next=9;break}if(!this.appManager.appProxies.has(t.kind)){e.next=9;break}throw new ke;case 9:if(void 0!==(o=this.setupScenePath(t,this.appManager))){e.next=12;break}return e.abrupt("return");case 12:return(null==(i=null==t?void 0:t.options)?void 0:i.scenePath)&&(t.options.scenePath=(u=t.options.scenePath).endsWith("/")?u.slice(0,-1):u),e.next=15,this.appManager.addApp(t,Boolean(o));case 15:return s=e.sent,e.abrupt("return",s);case 19:throw new Ee;case 20:case"end":return e.stop()}var u}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"setupScenePath",value:function(e,t){var n=!1;if(e.options){var r=e.options,i=r.scenePath,a=r.scenes;if(i){if(!function(e){return e.startsWith("/")}(i))throw new Oe;for(var o=0,s=Object.keys(this.apps||{});o<s.length;o++){var u=s[o],c=t.store.getAppScenePath(u);if(c&&c===i){if(console.warn("[WindowManager]: ScenePath ".concat(i," Already opened")),this.boxManager){var l=this.boxManager.getTopBox();l&&this.boxManager.setZIndex(u,l.zIndex+1,!1)}return}}}i&&a&&a.length>0&&(this.isDynamicPPT(a)?(n=!0,Me(this.displayer)[i]||xe(this.room,i,a)):Me(this.displayer)[i]||xe(this.room,i,[{name:a[0].name}])),i&&void 0===a&&xe(this.room,i,[{}])}return n}},{key:"setMainViewScenePath",value:(g=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appManager){e.next=3;break}return e.next=3,this.appManager.setMainViewScenePath(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"setMainViewSceneIndex",value:(f=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appManager){e.next=3;break}return e.next=3,this.appManager.setMainViewSceneIndex(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"nextPage",value:(h=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appManager){e.next=10;break}if(!((t=this.mainViewSceneIndex+1)>=this.mainViewScenesLength)){e.next=5;break}return console.warn("[WindowManager]: current page is the last page"),e.abrupt("return",!1);case 5:return e.next=7,this.appManager.setMainViewSceneIndex(t);case 7:return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"prevPage",value:(p=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appManager){e.next=10;break}if(!((t=this.mainViewSceneIndex-1)<0)){e.next=5;break}return console.warn("[WindowManager]: current page is the first page"),e.abrupt("return",!1);case 5:return e.next=7,this.appManager.setMainViewSceneIndex(t);case 7:return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"jumpPage",value:(l=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.appManager){e.next=2;break}return e.abrupt("return",!1);case 2:if(!(t<0||t>=this.pageState.length)){e.next=5;break}return console.warn("[WindowManager]: index ".concat(t," out of range")),e.abrupt("return",!1);case 5:return e.next=7,this.appManager.setMainViewSceneIndex(t);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"addPage",value:(c=_(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.appManager&&(n=null==t?void 0:t.after,r=(null==t?void 0:t.scene)||{},i=Array.isArray(r)?r:[r],n?(a=this.mainViewSceneIndex+1,this.room.putScenes($,i,a)):this.room.putScenes($,i));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"removePage",value:(o=_(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appManager){e.next=11;break}if(n=void 0===t?this.pageState.index:t,1!==this.pageState.length){e.next=5;break}return console.warn("[WindowManager]: can not remove the last page"),e.abrupt("return",!1);case 5:if(!(n<0||n>=this.pageState.length)){e.next=8;break}return console.warn("[WindowManager]: index ".concat(t," out of range")),e.abrupt("return",!1);case 8:return e.abrupt("return",this.appManager.removeSceneByIndex(n));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getMainViewScenePath",value:function(){var e;return null==(e=this.appManager)?void 0:e.store.getMainViewScenePath()}},{key:"getMainViewSceneIndex",value:function(){var e;return null==(e=this.appManager)?void 0:e.store.getMainViewSceneIndex()}},{key:"setReadonly",value:function(e){var t;this.readonly=e,null==(t=this.boxManager)||t.setReadonly(e),q.emit("setReadonly",e)}},{key:"switchMainViewToWriter",value:function(){var e;return null==(e=this.appManager)?void 0:e.mainViewProxy.mainViewClickHandler()}},{key:"onAppDestroy",value:function(e,t){!function(e,t){q.once(e).then(t)}("destroy-".concat(e),t)}},{key:"setViewMode",value:function(e){var t;if(Ue("setViewMode",e),"scroll"===this.viewMode$.value&&"scroll"!==e)throw new Pe;var n=null==(t=this.appManager)?void 0:t.mainViewProxy;e!==u.ViewMode.Broadcaster&&e!==u.ViewMode.Follower||(this.canOperate&&e===u.ViewMode.Broadcaster&&(null==n||n.storeCurrentCamera(),null==n||n.storeCurrentSize()),null==n||n.start()),e!==u.ViewMode.Freedom&&"scroll"!==e||null==n||n.stop(),this.viewMode$.setValue(e)}},{key:"setBoxState",value:function(e){if(this.canOperate)switch(e){case"normal":this.setMaximized(!1),this.setMinimized(!1);break;case"maximized":this.setMaximized(!0),this.setMinimized(!1);break;case"minimized":this.setMinimized(!0)}}},{key:"setMaximized",value:function(e){var t;this.canOperate&&(null==(t=this.boxManager)||t.setMaximized(e,!1))}},{key:"setMinimized",value:function(e){var t;this.canOperate&&(null==(t=this.boxManager)||t.setMinimized(e,!1))}},{key:"queryAll",value:function(){var e;return Array.from((null==(e=this.appManager)?void 0:e.appProxies.values())||[])}},{key:"queryOne",value:function(e){var t;return null==(t=this.appManager)?void 0:t.appProxies.get(e)}},{key:"closeApp",value:(i=_(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null==(n=this.appManager)?void 0:n.closeApp(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"moveCameraToContain",value:function(e){var t;this.mainView.moveCameraToContain(e),null==(t=this.appManager)||t.dispatchInternalEvent(V.MoveCameraToContain,e)}},{key:"convertToPointInWorld",value:function(e){return this.mainView.convertToPointInWorld(e)}},{key:"setCameraBound",value:function(e){this.mainView.setCameraBound(e)}},{key:"onDestroy",value:function(){this._destroy()}},{key:"destroy",value:function(){this._destroy()}},{key:"_destroy",value:function(){var e,t,n;null==(e=this.appManager)||e.destroy(),null==(t=this.cursorManager)||t.destroy(),b.container=void 0,b.isCreated=!1,b.playground&&(null==(n=b.playground.parentNode)||n.removeChild(b.playground)),b.params=void 0,Ue("Destroyed")}},{key:"bindMainView",value:function(e,t){var n;this.appManager&&(this.appManager.bindMainView(e,Boolean(t)),null==(n=this.cursorManager)||n.setMainViewDivElement(e))}},{key:"safeSetAttributes",value:function(e){this.canOperate&&this.setAttributes(e)}},{key:"safeUpdateAttributes",value:function(e,t){this.canOperate&&this.updateAttributes(e,t)}},{key:"setPrefersColorScheme",value:function(e){var t,n;null==(n=null==(t=this.appManager)?void 0:t.boxManager)||n.setPrefersColorScheme(e)}},{key:"setFullscreen",value:function(e){var t,n;null==(n=null==(t=this.appManager)?void 0:t.boxManager)||n.teleBoxManager.setFullscreen(e)}},{key:"cleanCurrentScene",value:function(){var e;null==(e=this.focusedView)||e.cleanCurrentScene()}},{key:"redo",value:function(){var e;return(null==(e=this.focusedView)?void 0:e.redo())||0}},{key:"undo",value:function(){var e;return(null==(e=this.focusedView)?void 0:e.undo())||0}},{key:"delete",value:function(){var e;null==(e=this.focusedView)||e.delete()}},{key:"copy",value:function(){var e;null==(e=this.focusedView)||e.copy()}},{key:"paste",value:function(){var e;null==(e=this.focusedView)||e.paste()}},{key:"duplicate",value:function(){var e;null==(e=this.focusedView)||e.duplicate()}},{key:"insertText",value:function(e,t,n){var r;return(null==(r=this.focusedView)?void 0:r.insertText(e,t,n))||""}},{key:"insertImage",value:function(e){var t;return null==(t=this.focusedView)?void 0:t.insertImage(e)}},{key:"completeImageUpload",value:function(e,t){var n;return null==(n=this.focusedView)?void 0:n.completeImageUpload(e,t)}},{key:"lockImage",value:function(e,t){var n;return null==(n=this.focusedView)?void 0:n.lockImage(e,t)}},{key:"lockImages",value:function(e){var t;return null==(t=this.focusedView)?void 0:t.lockImages(e)}},{key:"refresh",value:function(){var e;this._refresh(),null==(e=this.appManager)||e.dispatchInternalEvent(V.Refresh)}},{key:"_refresh",value:function(){var e,t;null==(e=this.appManager)||e.mainViewProxy.rebind(),b.container&&this.bindContainer(b.container),null==(t=this.appManager)||t.refresher.refresh()}},{key:"setContainerSizeRatio",value:function(e){if(!(0,s.isNumber)(e))throw new Error("[WindowManager]: updateContainerSizeRatio error, ratio must be a number. but got ".concat(e));b.containerSizeRatio=e,this.containerSizeRatio=e,q.emit("containerSizeRatioUpdate",e)}},{key:"setContainerStyle",value:function(e){var t;null==(t=this.boxManager)||t.teleBoxManager.setContainerStyle(e)}},{key:"setStageStyle",value:function(e){var t;null==(t=this.boxManager)||t.teleBoxManager.setStageStyle(e)}},{key:"setBaseSize",value:function(e){var t,n=this;null==(t=this.appManager)||t.mainViewProxy.setMainViewSize(e),setTimeout((function(){n.appManager&&n.appManager.mainViewProxy.camera$.value&&n.appManager.mainViewProxy.storeCamera(C(C({},n.appManager.mainViewProxy.camera$.value),{},{id:n.appManager.uid,scale:1}))}),500)}},{key:"focusApp",value:function(e){var t,n,r,i=null==(t=this.boxManager)?void 0:t.getBox(e);i&&(null==(n=this.boxManager)||n.focusBox({appId:e},!1),(null==(r=this.boxManager)?void 0:r.teleBoxManager).makeBoxTop(i,!1))}},{key:"createPPTHandler",value:function(){var e=this;return{onPageJumpTo:function(t,n){var r,i,a,o;null==(o=null==(a=null==(i=null==(r=e.appManager)?void 0:r.focusApp)?void 0:i.appContext)?void 0:a.whiteBoardView)||o.jumpPage(n)},onPageToNext:function(){var t,n,r,i;e.focused&&(null==(i=null==(r=null==(n=null==(t=e.appManager)?void 0:t.focusApp)?void 0:n.appContext)?void 0:r.whiteBoardView)||i.nextPage())},onPageToPrev:function(){var t,n,r,i;e.focused&&(null==(i=null==(r=null==(n=null==(t=e.appManager)?void 0:t.focusApp)?void 0:n.appContext)?void 0:r.whiteBoardView)||i.prevPage())}}}},{key:"isDynamicPPT",value:function(e){var t,n,r=null==(n=null==(t=e[0])?void 0:t.ppt)?void 0:n.src;return null==r?void 0:r.startsWith("pptx://")}},{key:"ensureAttributes",value:(r=_(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,s.isNull)(this.attributes)){e.next=3;break}return e.next=3,Te(50);case 3:(0,s.isObject)(this.attributes)&&(this.attributes[Xe.Apps]||this.safeSetAttributes(z({},Xe.Apps,{})),this.attributes[Xe.Cursors]||this.safeSetAttributes(z({},Xe.Cursors,{})),this.attributes._mainScenePath||this.safeSetAttributes({_mainScenePath:X}),this.attributes._mainSceneIndex||this.safeSetAttributes({_mainSceneIndex:0}),this.attributes[Xe.Registered]||this.safeSetAttributes(z({},Xe.Registered,{})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"mainView",get:function(){if(this.appManager)return this.appManager.mainViewProxy.view;throw new Ee}},{key:"camera",get:function(){if(this.appManager)return this.appManager.mainViewProxy.view.camera;throw new Ee}},{key:"baseCamera",get:function(){if(this.appManager)return this.appManager.mainViewProxy.camera$.value;throw new Ee}},{key:"baseSize",get:function(){if(this.appManager)return this.appManager.mainViewProxy.size$.value;throw new Ee}},{key:"cameraState",get:function(){if(this.appManager)return this.appManager.mainViewProxy.cameraState;throw new Ee}},{key:"apps",get:function(){var e;return null==(e=this.appManager)?void 0:e.store.apps()}},{key:"boxState",get:function(){var e;if(this.appManager)return null==(e=this.appManager.boxManager)?void 0:e.boxState;throw new Ee}},{key:"darkMode",get:function(){var e,t;return Boolean(null==(t=null==(e=this.appManager)?void 0:e.boxManager)?void 0:t.darkMode)}},{key:"viewMode",get:function(){return this.viewMode$.value}},{key:"prefersColorScheme",get:function(){var e;if(this.appManager)return null==(e=this.appManager.boxManager)?void 0:e.prefersColorScheme;throw new Ee}},{key:"fullscreen",get:function(){var e;if(this.appManager)return null==(e=this.appManager.boxManager)?void 0:e.teleBoxManager.fullscreen;throw new Ee}},{key:"focused",get:function(){return this.attributes.focus}},{key:"focusedView",get:function(){var e,t;return(null==(t=null==(e=this.appManager)?void 0:e.focusApp)?void 0:t.view)||this.mainView}},{key:"mainViewSceneIndex",get:function(){var e;return(null==(e=this._pageState)?void 0:e.index)||0}},{key:"mainViewSceneDir",get:function(){var e;if(this.appManager)return null==(e=this.appManager)?void 0:e.getMainViewSceneDir();throw new Ee}},{key:"topApp",get:function(){var e,t;return null==(t=null==(e=this.boxManager)?void 0:e.getTopBox())?void 0:t.id}},{key:"mainViewScenesLength",get:function(){var e;return(null==(e=this._pageState)?void 0:e.length)||0}},{key:"canRedoSteps",get:function(){var e;return(null==(e=this.focusedView)?void 0:e.canRedoSteps)||0}},{key:"canUndoSteps",get:function(){var e;return(null==(e=this.focusedView)?void 0:e.canUndoSteps)||0}},{key:"sceneState",get:function(){if(this.appManager)return this.appManager.sceneState;throw new Ee}},{key:"pageState",get:function(){if(this._pageState)return this._pageState.toObject();throw new Ee}},{key:"scrollState",get:function(){var e,t;return null==(t=null==(e=this.appManager)?void 0:e.scrollMode)?void 0:t.scrollState$.value}},{key:"teleboxManager",get:function(){if(!this.boxManager)throw new Le;return this.boxManager.teleBoxManager}},{key:"canOperate",get:function(){return!!(0,u.isRoom)(this.displayer)&&(this.displayer.isWritable&&this.displayer.phase===u.RoomPhase.Connected)}},{key:"room",get:function(){return this.displayer}}],[{key:"mount",value:(n=_(regeneratorRuntime.mark((function e(t){var n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.room,b.container=t.container,i=t.debug,o=t.cursor,b.params=t,b.displayer=t.room,s=void 0,Be(),!(0,u.isRoom)(r)){e.next=15;break}if(r.phase===u.RoomPhase.Connected){e.next=11;break}throw new Error("[WindowManager]: Room only Connected can be mount");case 11:return r.phase===u.RoomPhase.Connected&&r.isWritable&&(r.disableSerialization=!1),e.next=14,this.initManager(r);case 14:s=e.sent;case 15:if(!b.isCreated){e.next=17;break}throw new Error("[WindowManager]: Already created cannot be created again");case 17:if(this.debug=Boolean(i),Ue("Already insert room",s),!(0,u.isRoom)(this.displayer)){e.next=24;break}if(s){e.next=22;break}throw new Error("[WindowManager]: init InvisiblePlugin failed");case 22:e.next=26;break;case 24:return e.next=26,(0,a.default)(function(){var e=_(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getInvisiblePlugin(b.kind);case 2:if(s=e.sent){e.next=6;break}throw Ue("manager is empty. retrying ".concat(t)),new Error;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{retries:10});case 26:if(s){e.next=28;break}throw new Error("[WindowManager]: create manager failed");case 28:return t.containerSizeRatio&&(b.containerSizeRatio=t.containerSizeRatio),s.containerSizeRatio=b.containerSizeRatio,e.next=32,s.ensureAttributes();case 32:return t.viewMode&&s.viewMode$.setValue(t.viewMode),s.appManager=new ut(s),s._pageState=new Hr(s.appManager),s.cursorManager=new Fr(s.appManager,Boolean(o),t.applianceIcons),s.boxManager=ir(s,J,q,He,{collectorContainer:t.collectorContainer,collectorStyles:t.collectorStyles,prefersColorScheme:t.prefersColorScheme,stageRatio:b.containerSizeRatio,containerStyle:t.containerStyle,stageStyle:t.stageStyle,fullscreen:t.fullscreen,theme:t.theme}),null==(n=s.appManager)||n.setBoxManager(s.boxManager),t.container&&s.bindContainer(t.container),t.scrollModeWidth&&t.scrollModeHeight&&s.appManager.scrollBaseSize$.setValue({width:t.scrollModeWidth,height:t.scrollModeHeight}),Xr(r,s),q.emit("onCreated"),b.isCreated=!0,e.prev=43,e.next=46,ee(fe);case 46:e.next=52;break;case 48:e.prev=48,e.t0=e.catch(43),console.warn("[WindowManager]: indexedDB open failed"),console.log(e.t0);case 52:return e.abrupt("return",s);case 53:case"end":return e.stop()}}),e,this,[[43,48]])}))),function(e){return n.apply(this,arguments)})},{key:"initManager",value:(t=_(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getInvisiblePlugin(b.kind)){e.next=25;break}if(!(0,u.isRoom)(t)){e.next=25;break}if(!1!==t.isWritable){e.next=22;break}return e.prev=4,e.next=7,t.setWritable(!0);case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),new Error("[WindowManger]: room must be switched to be writable");case 12:return e.next=14,Qe(t);case 14:return null==(n=e.sent)||n.ensureAttributes(),e.next=18,Te(500);case 18:return e.next=20,t.setWritable(!1);case 20:e.next=25;break;case 22:return e.next=24,Qe(t);case 24:n=e.sent;case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,null,[[4,9]])}))),function(e){return t.apply(this,arguments)})},{key:"initContainer",value:function(e,t,n){b.container||(b.container=e);var r=function(e,t){var n=document.createElement("div");n.className="netless-window-manager-playground";var r=document.createElement("div");return r.className="netless-window-manager-main-view",t.appendChild(r),e.appendChild(n),{playground:n,mainViewElement:r}}(e,t),i=r.playground,a=r.mainViewElement;if(b.playground=i,n){var o=document.createElement("style");o.textContent=n,i.appendChild(o)}return a}},{key:"register",value:function(e){return fe.register(e)}},{key:"unregister",value:function(e){return fe.unregister(e)}},{key:"registered",get:function(){return fe.registered}}]),b}(u.InvisiblePlugin),Nc=Ic;exports.WindowManager=Nc,Nc.kind="WindowManager",Nc.debug=!1,Nc.containerSizeRatio=9/16,Nc.isCreated=!1,Nc.registry=fe,Nc.register({kind:Va.kind,src:Va}),Nc.register({kind:bc.kind,src:bc})}}]);